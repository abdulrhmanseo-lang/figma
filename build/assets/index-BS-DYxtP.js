function JA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function ES(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pg={exports:{}},Iu={},Dg={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function XA(){if(c_)return Ze;c_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,N={};function _(H,ne,ue){this.props=H,this.context=ne,this.refs=N,this.updater=ue||T}_.prototype.isReactComponent={},_.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},_.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function k(){}k.prototype=_.prototype;function R(H,ne,ue){this.props=H,this.context=ne,this.refs=N,this.updater=ue||T}var j=R.prototype=new k;j.constructor=R,I(j,_.prototype),j.isPureReactComponent=!0;var D=Array.isArray,M=Object.prototype.hasOwnProperty,z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function C(H,ne,ue){var ye,_e={},De=null,Ae=null;if(ne!=null)for(ye in ne.ref!==void 0&&(Ae=ne.ref),ne.key!==void 0&&(De=""+ne.key),ne)M.call(ne,ye)&&!P.hasOwnProperty(ye)&&(_e[ye]=ne[ye]);var je=arguments.length-2;if(je===1)_e.children=ue;else if(1<je){for(var Je=Array(je),pt=0;pt<je;pt++)Je[pt]=arguments[pt+2];_e.children=Je}if(H&&H.defaultProps)for(ye in je=H.defaultProps,je)_e[ye]===void 0&&(_e[ye]=je[ye]);return{$$typeof:t,type:H,key:De,ref:Ae,props:_e,_owner:z.current}}function L(H,ne){return{$$typeof:t,type:H.type,key:ne,ref:H.ref,props:H.props,_owner:H._owner}}function U(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function $(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ue){return ne[ue]})}var q=/\/+/g;function V(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?$(""+H.key):ne.toString(36)}function se(H,ne,ue,ye,_e){var De=typeof H;(De==="undefined"||De==="boolean")&&(H=null);var Ae=!1;if(H===null)Ae=!0;else switch(De){case"string":case"number":Ae=!0;break;case"object":switch(H.$$typeof){case t:case e:Ae=!0}}if(Ae)return Ae=H,_e=_e(Ae),H=ye===""?"."+V(Ae,0):ye,D(_e)?(ue="",H!=null&&(ue=H.replace(q,"$&/")+"/"),se(_e,ne,ue,"",function(pt){return pt})):_e!=null&&(U(_e)&&(_e=L(_e,ue+(!_e.key||Ae&&Ae.key===_e.key?"":(""+_e.key).replace(q,"$&/")+"/")+H)),ne.push(_e)),1;if(Ae=0,ye=ye===""?".":ye+":",D(H))for(var je=0;je<H.length;je++){De=H[je];var Je=ye+V(De,je);Ae+=se(De,ne,ue,Je,_e)}else if(Je=x(H),typeof Je=="function")for(H=Je.call(H),je=0;!(De=H.next()).done;)De=De.value,Je=ye+V(De,je++),Ae+=se(De,ne,ue,Je,_e);else if(De==="object")throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Ae}function Q(H,ne,ue){if(H==null)return H;var ye=[],_e=0;return se(H,ye,"","",function(De){return ne.call(ue,De,_e++)}),ye}function le(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(ue){(H._status===0||H._status===-1)&&(H._status=1,H._result=ue)},function(ue){(H._status===0||H._status===-1)&&(H._status=2,H._result=ue)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var me={current:null},J={transition:null},ve={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:J,ReactCurrentOwner:z};function he(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:Q,forEach:function(H,ne,ue){Q(H,function(){ne.apply(this,arguments)},ue)},count:function(H){var ne=0;return Q(H,function(){ne++}),ne},toArray:function(H){return Q(H,function(ne){return ne})||[]},only:function(H){if(!U(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Ze.Component=_,Ze.Fragment=n,Ze.Profiler=s,Ze.PureComponent=R,Ze.StrictMode=r,Ze.Suspense=d,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,Ze.act=he,Ze.cloneElement=function(H,ne,ue){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var ye=I({},H.props),_e=H.key,De=H.ref,Ae=H._owner;if(ne!=null){if(ne.ref!==void 0&&(De=ne.ref,Ae=z.current),ne.key!==void 0&&(_e=""+ne.key),H.type&&H.type.defaultProps)var je=H.type.defaultProps;for(Je in ne)M.call(ne,Je)&&!P.hasOwnProperty(Je)&&(ye[Je]=ne[Je]===void 0&&je!==void 0?je[Je]:ne[Je])}var Je=arguments.length-2;if(Je===1)ye.children=ue;else if(1<Je){je=Array(Je);for(var pt=0;pt<Je;pt++)je[pt]=arguments[pt+2];ye.children=je}return{$$typeof:t,type:H.type,key:_e,ref:De,props:ye,_owner:Ae}},Ze.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:a,_context:H},H.Consumer=H},Ze.createElement=C,Ze.createFactory=function(H){var ne=C.bind(null,H);return ne.type=H,ne},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(H){return{$$typeof:u,render:H}},Ze.isValidElement=U,Ze.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:le}},Ze.memo=function(H,ne){return{$$typeof:f,type:H,compare:ne===void 0?null:ne}},Ze.startTransition=function(H){var ne=J.transition;J.transition={};try{H()}finally{J.transition=ne}},Ze.unstable_act=he,Ze.useCallback=function(H,ne){return me.current.useCallback(H,ne)},Ze.useContext=function(H){return me.current.useContext(H)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(H){return me.current.useDeferredValue(H)},Ze.useEffect=function(H,ne){return me.current.useEffect(H,ne)},Ze.useId=function(){return me.current.useId()},Ze.useImperativeHandle=function(H,ne,ue){return me.current.useImperativeHandle(H,ne,ue)},Ze.useInsertionEffect=function(H,ne){return me.current.useInsertionEffect(H,ne)},Ze.useLayoutEffect=function(H,ne){return me.current.useLayoutEffect(H,ne)},Ze.useMemo=function(H,ne){return me.current.useMemo(H,ne)},Ze.useReducer=function(H,ne,ue){return me.current.useReducer(H,ne,ue)},Ze.useRef=function(H){return me.current.useRef(H)},Ze.useState=function(H){return me.current.useState(H)},Ze.useSyncExternalStore=function(H,ne,ue){return me.current.useSyncExternalStore(H,ne,ue)},Ze.useTransition=function(){return me.current.useTransition()},Ze.version="18.3.1",Ze}var u_;function nv(){return u_||(u_=1,Dg.exports=XA()),Dg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function ZA(){if(d_)return Iu;d_=1;var t=nv(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(u,d,f){var g,y={},x=null,T=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(T=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(y[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:u,key:x,ref:T,props:y,_owner:s.current}}return Iu.Fragment=n,Iu.jsx=o,Iu.jsxs=o,Iu}var h_;function eR(){return h_||(h_=1,Pg.exports=ZA()),Pg.exports}var c=eR(),nf={},Og={exports:{}},ar={},Mg={exports:{}},Lg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function tR(){return f_||(f_=1,(function(t){function e(J,ve){var he=J.length;J.push(ve);e:for(;0<he;){var H=he-1>>>1,ne=J[H];if(0<s(ne,ve))J[H]=ve,J[he]=ne,he=H;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ve=J[0],he=J.pop();if(he!==ve){J[0]=he;e:for(var H=0,ne=J.length,ue=ne>>>1;H<ue;){var ye=2*(H+1)-1,_e=J[ye],De=ye+1,Ae=J[De];if(0>s(_e,he))De<ne&&0>s(Ae,_e)?(J[H]=Ae,J[De]=he,H=De):(J[H]=_e,J[ye]=he,H=ye);else if(De<ne&&0>s(Ae,he))J[H]=Ae,J[De]=he,H=De;else break e}}return ve}function s(J,ve){var he=J.sortIndex-ve.sortIndex;return he!==0?he:J.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var d=[],f=[],g=1,y=null,x=3,T=!1,I=!1,N=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(J){for(var ve=n(f);ve!==null;){if(ve.callback===null)r(f);else if(ve.startTime<=J)r(f),ve.sortIndex=ve.expirationTime,e(d,ve);else break;ve=n(f)}}function D(J){if(N=!1,j(J),!I)if(n(d)!==null)I=!0,le(M);else{var ve=n(f);ve!==null&&me(D,ve.startTime-J)}}function M(J,ve){I=!1,N&&(N=!1,k(C),C=-1),T=!0;var he=x;try{for(j(ve),y=n(d);y!==null&&(!(y.expirationTime>ve)||J&&!$());){var H=y.callback;if(typeof H=="function"){y.callback=null,x=y.priorityLevel;var ne=H(y.expirationTime<=ve);ve=t.unstable_now(),typeof ne=="function"?y.callback=ne:y===n(d)&&r(d),j(ve)}else r(d);y=n(d)}if(y!==null)var ue=!0;else{var ye=n(f);ye!==null&&me(D,ye.startTime-ve),ue=!1}return ue}finally{y=null,x=he,T=!1}}var z=!1,P=null,C=-1,L=5,U=-1;function $(){return!(t.unstable_now()-U<L)}function q(){if(P!==null){var J=t.unstable_now();U=J;var ve=!0;try{ve=P(!0,J)}finally{ve?V():(z=!1,P=null)}}else z=!1}var V;if(typeof R=="function")V=function(){R(q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Q=se.port2;se.port1.onmessage=q,V=function(){Q.postMessage(null)}}else V=function(){_(q,0)};function le(J){P=J,z||(z=!0,V())}function me(J,ve){C=_(function(){J(t.unstable_now())},ve)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){I||T||(I=!0,le(M))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(J){switch(x){case 1:case 2:case 3:var ve=3;break;default:ve=x}var he=x;x=ve;try{return J()}finally{x=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,ve){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=x;x=J;try{return ve()}finally{x=he}},t.unstable_scheduleCallback=function(J,ve,he){var H=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?H+he:H):he=H,J){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=he+ne,J={id:g++,callback:ve,priorityLevel:J,startTime:he,expirationTime:ne,sortIndex:-1},he>H?(J.sortIndex=he,e(f,J),n(d)===null&&J===n(f)&&(N?(k(C),C=-1):N=!0,me(D,he-H))):(J.sortIndex=ne,e(d,J),I||T||(I=!0,le(M))),J},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(J){var ve=x;return function(){var he=x;x=ve;try{return J.apply(this,arguments)}finally{x=he}}}})(Lg)),Lg}var m_;function nR(){return m_||(m_=1,Mg.exports=tR()),Mg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function rR(){if(p_)return ar;p_=1;var t=nv(),e=nR();function n(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,l){o(i,l),o(i+"Capture",l)}function o(i,l){for(s[i]=l,i=0;i<l.length;i++)r.add(l[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(i){return d.call(y,i)?!0:d.call(g,i)?!1:f.test(i)?y[i]=!0:(g[i]=!0,!1)}function T(i,l,h,p){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function I(i,l,h,p){if(l===null||typeof l>"u"||T(i,l,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function N(i,l,h,p,v,w,A){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=i,this.type=l,this.sanitizeURL=w,this.removeEmptyString=A}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){_[i]=new N(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];_[l]=new N(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){_[i]=new N(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){_[i]=new N(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){_[i]=new N(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){_[i]=new N(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){_[i]=new N(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){_[i]=new N(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){_[i]=new N(i,5,!1,i.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function R(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(k,R);_[l]=new N(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(k,R);_[l]=new N(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(k,R);_[l]=new N(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){_[i]=new N(i,1,!1,i.toLowerCase(),null,!1,!1)}),_.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){_[i]=new N(i,1,!1,i.toLowerCase(),null,!0,!0)});function j(i,l,h,p){var v=_.hasOwnProperty(l)?_[l]:null;(v!==null?v.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(I(l,h,v,p)&&(h=null),p||v===null?x(l)&&(h===null?i.removeAttribute(l):i.setAttribute(l,""+h)):v.mustUseProperty?i[v.propertyName]=h===null?v.type===3?!1:"":h:(l=v.attributeName,p=v.attributeNamespace,h===null?i.removeAttribute(l):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,p?i.setAttributeNS(p,l,h):i.setAttribute(l,h))))}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),$=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),J=Symbol.iterator;function ve(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var he=Object.assign,H;function ne(i){if(H===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);H=l&&l[1]||""}return`
`+H+i}var ue=!1;function ye(i,l){if(!i||ue)return"";ue=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(X){var p=X}Reflect.construct(i,[],l)}else{try{l.call()}catch(X){p=X}i.call(l.prototype)}else{try{throw Error()}catch(X){p=X}i()}}catch(X){if(X&&p&&typeof X.stack=="string"){for(var v=X.stack.split(`
`),w=p.stack.split(`
`),A=v.length-1,F=w.length-1;1<=A&&0<=F&&v[A]!==w[F];)F--;for(;1<=A&&0<=F;A--,F--)if(v[A]!==w[F]){if(A!==1||F!==1)do if(A--,F--,0>F||v[A]!==w[F]){var B=`
`+v[A].replace(" at new "," at ");return i.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",i.displayName)),B}while(1<=A&&0<=F);break}}}finally{ue=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?ne(i):""}function _e(i){switch(i.tag){case 5:return ne(i.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return i=ye(i.type,!1),i;case 11:return i=ye(i.type.render,!1),i;case 1:return i=ye(i.type,!0),i;default:return""}}function De(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case z:return"Portal";case L:return"Profiler";case C:return"StrictMode";case V:return"Suspense";case se:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case $:return(i.displayName||"Context")+".Consumer";case U:return(i._context.displayName||"Context")+".Provider";case q:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Q:return l=i.displayName||null,l!==null?l:De(i.type)||"Memo";case le:l=i._payload,i=i._init;try{return De(i(l))}catch{}}return null}function Ae(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(l);case 8:return l===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function je(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Je(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function pt(i){var l=Je(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),p=""+i[l];if(!i.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return v.call(this)},set:function(A){p=""+A,w.call(this,A)}}),Object.defineProperty(i,l,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(A){p=""+A},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function vn(i){i._valueTracker||(i._valueTracker=pt(i))}function nn(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var h=l.getValue(),p="";return i&&(p=Je(i)?i.checked?"true":"false":i.value),i=p,i!==h?(l.setValue(i),!0):!1}function te(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ee(i,l){var h=l.checked;return he({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function ge(i,l){var h=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;h=je(l.value!=null?l.value:h),i._wrapperState={initialChecked:p,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ve(i,l){l=l.checked,l!=null&&j(i,"checked",l,!1)}function lt(i,l){Ve(i,l);var h=je(l.value),p=l.type;if(h!=null)p==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?rt(i,l.type,h):l.hasOwnProperty("defaultValue")&&rt(i,l.type,je(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function At(i,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,h||l===i.value||(i.value=l),i.defaultValue=l}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function rt(i,l,h){(l!=="number"||te(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var xt=Array.isArray;function qn(i,l,h,p){if(i=i.options,l){l={};for(var v=0;v<h.length;v++)l["$"+h[v]]=!0;for(h=0;h<i.length;h++)v=l.hasOwnProperty("$"+i[h].value),i[h].selected!==v&&(i[h].selected=v),v&&p&&(i[h].defaultSelected=!0)}else{for(h=""+je(h),l=null,v=0;v<i.length;v++){if(i[v].value===h){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}l!==null||i[v].disabled||(l=i[v])}l!==null&&(l.selected=!0)}}function Bt(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return he({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function An(i,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(n(92));if(xt(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),h=l}i._wrapperState={initialValue:je(h)}}function qi(i,l){var h=je(l.value),p=je(l.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),l.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),p!=null&&(i.defaultValue=""+p)}function ht(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function zt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wi(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?zt(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Gr,Hi=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,p,v){MSApp.execUnsafeLocalFunction(function(){return i(l,h,p,v)})}:i})(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Gr=Gr||document.createElement("div"),Gr.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Gr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function Zn(i,l){if(l){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=l;return}}i.textContent=l}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qr=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(i){Qr.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),Yr[l]=Yr[i]})});function _s(i,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||Yr.hasOwnProperty(i)&&Yr[i]?(""+l).trim():l+"px"}function Ki(i,l){i=i.style;for(var h in l)if(l.hasOwnProperty(h)){var p=h.indexOf("--")===0,v=_s(h,l[h],p);h==="float"&&(h="cssFloat"),p?i.setProperty(h,v):i[h]=v}}var Gi=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function er(i,l){if(l){if(Gi[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Yi(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ir=null;function Wn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Jr=null,Xr=null,_t=null;function Qi(i){if(i=mu(i)){if(typeof Jr!="function")throw Error(n(280));var l=i.stateNode;l&&(l=yh(l),Jr(i.stateNode,i.type,l))}}function Fe(i){Xr?_t?_t.push(i):_t=[i]:Xr=i}function gt(){if(Xr){var i=Xr,l=_t;if(_t=Xr=null,Qi(i),l)for(i=0;i<l.length;i++)Qi(l[i])}}function qt(i,l){return i(l)}function dn(){}var Hn=!1;function Vt(i,l,h){if(Hn)return i(l,h);Hn=!0;try{return qt(i,l,h)}finally{Hn=!1,(Xr!==null||_t!==null)&&(dn(),gt())}}function Gt(i,l){var h=i.stateNode;if(h===null)return null;var p=yh(h);if(p===null)return null;h=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var hr=!1;if(u)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){hr=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{hr=!1}function Rn(i,l,h,p,v,w,A,F,B){var X=Array.prototype.slice.call(arguments,3);try{l.apply(h,X)}catch(ae){this.onError(ae)}}var Cr=!1,hn=null,Ka=!1,Ar=null,Yd={onError:function(i){Cr=!0,hn=i}};function Qd(i,l,h,p,v,w,A,F,B){Cr=!1,hn=null,Rn.apply(Yd,arguments)}function Bc(i,l,h,p,v,w,A,F,B){if(Qd.apply(this,arguments),Cr){if(Cr){var X=hn;Cr=!1,hn=null}else throw Error(n(198));Ka||(Ka=!0,Ar=X)}}function Zr(i){var l=i,h=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(h=l.return),i=l.return;while(i)}return l.tag===3?h:null}function zc(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function Jd(i){if(Zr(i)!==i)throw Error(n(188))}function Xd(i){var l=i.alternate;if(!l){if(l=Zr(i),l===null)throw Error(n(188));return l!==i?null:i}for(var h=i,p=l;;){var v=h.return;if(v===null)break;var w=v.alternate;if(w===null){if(p=v.return,p!==null){h=p;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===h)return Jd(v),i;if(w===p)return Jd(v),l;w=w.sibling}throw Error(n(188))}if(h.return!==p.return)h=v,p=w;else{for(var A=!1,F=v.child;F;){if(F===h){A=!0,h=v,p=w;break}if(F===p){A=!0,p=v,h=w;break}F=F.sibling}if(!A){for(F=w.child;F;){if(F===h){A=!0,h=w,p=v;break}if(F===p){A=!0,p=w,h=v;break}F=F.sibling}if(!A)throw Error(n(189))}}if(h.alternate!==p)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?i:l}function Zd(i){return i=Xd(i),i!==null?Ga(i):null}function Ga(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=Ga(i);if(l!==null)return l;i=i.sibling}return null}var qc=e.unstable_scheduleCallback,Xo=e.unstable_cancelCallback,Ya=e.unstable_shouldYield,si=e.unstable_requestPaint,Et=e.unstable_now,up=e.unstable_getCurrentPriorityLevel,Zo=e.unstable_ImmediatePriority,Wc=e.unstable_UserBlockingPriority,Qa=e.unstable_NormalPriority,Hc=e.unstable_LowPriority,el=e.unstable_IdlePriority,Ja=null,fr=null;function eh(i){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Ja,i,void 0,(i.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:Xa,Es=Math.log,Rr=Math.LN2;function Xa(i){return i>>>=0,i===0?32:31-(Es(i)/Rr|0)|0}var Ts=64,Ji=4194304;function dt(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ii(i,l){var h=i.pendingLanes;if(h===0)return 0;var p=0,v=i.suspendedLanes,w=i.pingedLanes,A=h&268435455;if(A!==0){var F=A&~v;F!==0?p=dt(F):(w&=A,w!==0&&(p=dt(w)))}else A=h&~v,A!==0?p=dt(A):w!==0&&(p=dt(w));if(p===0)return 0;if(l!==0&&l!==p&&(l&v)===0&&(v=p&-p,w=l&-l,v>=w||v===16&&(w&4194240)!==0))return l;if((p&4)!==0&&(p|=h&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=p;0<l;)h=31-mr(l),v=1<<h,p|=i[h],l&=~v;return p}function Za(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eo(i,l){for(var h=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes;0<w;){var A=31-mr(w),F=1<<A,B=v[A];B===-1?((F&h)===0||(F&p)!==0)&&(v[A]=Za(F,l)):B<=l&&(i.expiredLanes|=F),w&=~F}}function Kc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Gc(){var i=Ts;return Ts<<=1,(Ts&4194240)===0&&(Ts=64),i}function Yc(i){for(var l=[],h=0;31>h;h++)l.push(i);return l}function to(i,l,h){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-mr(l),i[l]=h}function dp(i,l){var h=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<h;){var v=31-mr(h),w=1<<v;l[v]=0,p[v]=-1,i[v]=-1,h&=~w}}function Qc(i,l){var h=i.entangledLanes|=l;for(i=i.entanglements;h;){var p=31-mr(h),v=1<<p;v&l|i[p]&l&&(i[p]|=l),h&=~v}}var st=0;function Ss(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Jc,tl,Xc,Zc,eu,Ns=!1,nl=[],ks=null,js=null,xn=null,no=new Map,ai=new Map,pr=[],th="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xi(i,l){switch(i){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":no.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(l.pointerId)}}function es(i,l,h,p,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:l,domEventName:h,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]},l!==null&&(l=mu(l),l!==null&&tl(l)),i):(i.eventSystemFlags|=p,l=i.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),i)}function nh(i,l,h,p,v){switch(l){case"focusin":return ks=es(ks,i,l,h,p,v),!0;case"dragenter":return js=es(js,i,l,h,p,v),!0;case"mouseover":return xn=es(xn,i,l,h,p,v),!0;case"pointerover":var w=v.pointerId;return no.set(w,es(no.get(w)||null,i,l,h,p,v)),!0;case"gotpointercapture":return w=v.pointerId,ai.set(w,es(ai.get(w)||null,i,l,h,p,v)),!0}return!1}function rl(i){var l=ao(i.target);if(l!==null){var h=Zr(l);if(h!==null){if(l=h.tag,l===13){if(l=zc(h),l!==null){i.blockedOn=l,eu(i.priority,function(){Xc(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yt(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var h=sl(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var p=new h.constructor(h.type,h);Ir=p,h.target.dispatchEvent(p),Ir=null}else return l=mu(h),l!==null&&tl(l),i.blockedOn=h,!1;l.shift()}return!0}function rh(i,l,h){yt(i)&&h.delete(l)}function hp(){Ns=!1,ks!==null&&yt(ks)&&(ks=null),js!==null&&yt(js)&&(js=null),xn!==null&&yt(xn)&&(xn=null),no.forEach(rh),ai.forEach(rh)}function Zi(i,l){i.blockedOn===l&&(i.blockedOn=null,Ns||(Ns=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hp)))}function ea(i){function l(v){return Zi(v,i)}if(0<nl.length){Zi(nl[0],i);for(var h=1;h<nl.length;h++){var p=nl[h];p.blockedOn===i&&(p.blockedOn=null)}}for(ks!==null&&Zi(ks,i),js!==null&&Zi(js,i),xn!==null&&Zi(xn,i),no.forEach(l),ai.forEach(l),h=0;h<pr.length;h++)p=pr[h],p.blockedOn===i&&(p.blockedOn=null);for(;0<pr.length&&(h=pr[0],h.blockedOn===null);)rl(h),h.blockedOn===null&&pr.shift()}var oi=D.ReactCurrentBatchConfig,li=!0;function Is(i,l,h,p){var v=st,w=oi.transition;oi.transition=null;try{st=1,tu(i,l,h,p)}finally{st=v,oi.transition=w}}function sh(i,l,h,p){var v=st,w=oi.transition;oi.transition=null;try{st=4,tu(i,l,h,p)}finally{st=v,oi.transition=w}}function tu(i,l,h,p){if(li){var v=sl(i,l,h,p);if(v===null)Ep(i,l,p,Cs,h),Xi(i,p);else if(nh(v,i,l,h,p))p.stopPropagation();else if(Xi(i,p),l&4&&-1<th.indexOf(i)){for(;v!==null;){var w=mu(v);if(w!==null&&Jc(w),w=sl(i,l,h,p),w===null&&Ep(i,l,p,Cs,h),w===v)break;v=w}v!==null&&p.stopPropagation()}else Ep(i,l,p,null,h)}}var Cs=null;function sl(i,l,h,p){if(Cs=null,i=Wn(p),i=ao(i),i!==null)if(l=Zr(i),l===null)i=null;else if(h=l.tag,h===13){if(i=zc(l),i!==null)return i;i=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return Cs=i,null}function il(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(up()){case Zo:return 1;case Wc:return 4;case Qa:case Hc:return 16;case el:return 536870912;default:return 16}default:return 16}}var gr=null,al=null,ci=null;function ih(){if(ci)return ci;var i,l=al,h=l.length,p,v="value"in gr?gr.value:gr.textContent,w=v.length;for(i=0;i<h&&l[i]===v[i];i++);var A=h-i;for(p=1;p<=A&&l[h-p]===v[w-p];p++);return ci=v.slice(i,1<p?1-p:void 0)}function ro(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function As(){return!0}function nu(){return!1}function Pn(i){function l(h,p,v,w,A){this._reactName=h,this._targetInst=v,this.type=p,this.nativeEvent=w,this.target=A,this.currentTarget=null;for(var F in i)i.hasOwnProperty(F)&&(h=i[F],this[F]=h?h(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?As:nu,this.isPropagationStopped=nu,this}return he(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),l}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=Pn(Rs),ta=he({},Rs,{view:0,detail:0}),ol=Pn(ta),ll,cl,yr,io=he({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ge,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yr&&(yr&&i.type==="mousemove"?(ll=i.screenX-yr.screenX,cl=i.screenY-yr.screenY):cl=ll=0,yr=i),ll)},movementY:function(i){return"movementY"in i?i.movementY:cl}}),ru=Pn(io),ah=he({},io,{dataTransfer:0}),oh=Pn(ah),ul=he({},ta,{relatedTarget:0}),wn=Pn(ul),lh=he({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),ch=Pn(lh),na=he({},Rs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),m=Pn(na),b=he({},Rs,{data:0}),S=Pn(b),O={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pe(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=Z[i])?!!l[i]:!1}function Ge(){return pe}var Wt=he({},ta,{key:function(i){if(i.key){var l=O[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=ro(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?G[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ge,charCode:function(i){return i.type==="keypress"?ro(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ro(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),mt=Pn(Wt),Qt=he({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vr=Pn(Qt),ui=he({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ge}),Ps=Pn(ui),Ds=he({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),dl=Pn(Ds),su=he({},io,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),WC=Pn(su),HC=[9,13,27,32],fp=u&&"CompositionEvent"in window,iu=null;u&&"documentMode"in document&&(iu=document.documentMode);var KC=u&&"TextEvent"in window&&!iu,tw=u&&(!fp||iu&&8<iu&&11>=iu),nw=" ",rw=!1;function sw(i,l){switch(i){case"keyup":return HC.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var hl=!1;function GC(i,l){switch(i){case"compositionend":return iw(l);case"keypress":return l.which!==32?null:(rw=!0,nw);case"textInput":return i=l.data,i===nw&&rw?null:i;default:return null}}function YC(i,l){if(hl)return i==="compositionend"||!fp&&sw(i,l)?(i=ih(),ci=al=gr=null,hl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tw&&l.locale!=="ko"?null:l.data;default:return null}}var QC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aw(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!QC[i.type]:l==="textarea"}function ow(i,l,h,p){Fe(p),l=mh(l,"onChange"),0<l.length&&(h=new so("onChange","change",null,h,p),i.push({event:h,listeners:l}))}var au=null,ou=null;function JC(i){Sw(i,0)}function uh(i){var l=yl(i);if(nn(l))return i}function XC(i,l){if(i==="change")return l}var lw=!1;if(u){var mp;if(u){var pp="oninput"in document;if(!pp){var cw=document.createElement("div");cw.setAttribute("oninput","return;"),pp=typeof cw.oninput=="function"}mp=pp}else mp=!1;lw=mp&&(!document.documentMode||9<document.documentMode)}function uw(){au&&(au.detachEvent("onpropertychange",dw),ou=au=null)}function dw(i){if(i.propertyName==="value"&&uh(ou)){var l=[];ow(l,ou,i,Wn(i)),Vt(JC,l)}}function ZC(i,l,h){i==="focusin"?(uw(),au=l,ou=h,au.attachEvent("onpropertychange",dw)):i==="focusout"&&uw()}function eA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return uh(ou)}function tA(i,l){if(i==="click")return uh(l)}function nA(i,l){if(i==="input"||i==="change")return uh(l)}function rA(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var ts=typeof Object.is=="function"?Object.is:rA;function lu(i,l){if(ts(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var h=Object.keys(i),p=Object.keys(l);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var v=h[p];if(!d.call(l,v)||!ts(i[v],l[v]))return!1}return!0}function hw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fw(i,l){var h=hw(i);i=0;for(var p;h;){if(h.nodeType===3){if(p=i+h.textContent.length,i<=l&&p>=l)return{node:h,offset:l-i};i=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=hw(h)}}function mw(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?mw(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function pw(){for(var i=window,l=te();l instanceof i.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)i=l.contentWindow;else break;l=te(i.document)}return l}function gp(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function sA(i){var l=pw(),h=i.focusedElem,p=i.selectionRange;if(l!==h&&h&&h.ownerDocument&&mw(h.ownerDocument.documentElement,h)){if(p!==null&&gp(h)){if(l=p.start,i=p.end,i===void 0&&(i=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(i,h.value.length);else if(i=(l=h.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var v=h.textContent.length,w=Math.min(p.start,v);p=p.end===void 0?w:Math.min(p.end,v),!i.extend&&w>p&&(v=p,p=w,w=v),v=fw(h,w);var A=fw(h,p);v&&A&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==A.node||i.focusOffset!==A.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),i.removeAllRanges(),w>p?(i.addRange(l),i.extend(A.node,A.offset)):(l.setEnd(A.node,A.offset),i.addRange(l)))}}for(l=[],i=h;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)i=l[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var iA=u&&"documentMode"in document&&11>=document.documentMode,fl=null,yp=null,cu=null,vp=!1;function gw(i,l,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;vp||fl==null||fl!==te(p)||(p=fl,"selectionStart"in p&&gp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),cu&&lu(cu,p)||(cu=p,p=mh(yp,"onSelect"),0<p.length&&(l=new so("onSelect","select",null,l,h),i.push({event:l,listeners:p}),l.target=fl)))}function dh(i,l){var h={};return h[i.toLowerCase()]=l.toLowerCase(),h["Webkit"+i]="webkit"+l,h["Moz"+i]="moz"+l,h}var ml={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},xp={},yw={};u&&(yw=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function hh(i){if(xp[i])return xp[i];if(!ml[i])return i;var l=ml[i],h;for(h in l)if(l.hasOwnProperty(h)&&h in yw)return xp[i]=l[h];return i}var vw=hh("animationend"),xw=hh("animationiteration"),ww=hh("animationstart"),bw=hh("transitionend"),_w=new Map,Ew="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ra(i,l){_w.set(i,l),a(l,[i])}for(var wp=0;wp<Ew.length;wp++){var bp=Ew[wp],aA=bp.toLowerCase(),oA=bp[0].toUpperCase()+bp.slice(1);ra(aA,"on"+oA)}ra(vw,"onAnimationEnd"),ra(xw,"onAnimationIteration"),ra(ww,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(bw,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lA=new Set("cancel close invalid load scroll toggle".split(" ").concat(uu));function Tw(i,l,h){var p=i.type||"unknown-event";i.currentTarget=h,Bc(p,l,void 0,i),i.currentTarget=null}function Sw(i,l){l=(l&4)!==0;for(var h=0;h<i.length;h++){var p=i[h],v=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var A=p.length-1;0<=A;A--){var F=p[A],B=F.instance,X=F.currentTarget;if(F=F.listener,B!==w&&v.isPropagationStopped())break e;Tw(v,F,X),w=B}else for(A=0;A<p.length;A++){if(F=p[A],B=F.instance,X=F.currentTarget,F=F.listener,B!==w&&v.isPropagationStopped())break e;Tw(v,F,X),w=B}}}if(Ka)throw i=Ar,Ka=!1,Ar=null,i}function Tt(i,l){var h=l[Ip];h===void 0&&(h=l[Ip]=new Set);var p=i+"__bubble";h.has(p)||(Nw(l,i,2,!1),h.add(p))}function _p(i,l,h){var p=0;l&&(p|=4),Nw(h,i,p,l)}var fh="_reactListening"+Math.random().toString(36).slice(2);function du(i){if(!i[fh]){i[fh]=!0,r.forEach(function(h){h!=="selectionchange"&&(lA.has(h)||_p(h,!1,i),_p(h,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[fh]||(l[fh]=!0,_p("selectionchange",!1,l))}}function Nw(i,l,h,p){switch(il(l)){case 1:var v=Is;break;case 4:v=sh;break;default:v=tu}h=v.bind(null,l,h,i),v=void 0,!hr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(l,h,{capture:!0,passive:v}):i.addEventListener(l,h,!0):v!==void 0?i.addEventListener(l,h,{passive:v}):i.addEventListener(l,h,!1)}function Ep(i,l,h,p,v){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var F=p.stateNode.containerInfo;if(F===v||F.nodeType===8&&F.parentNode===v)break;if(A===4)for(A=p.return;A!==null;){var B=A.tag;if((B===3||B===4)&&(B=A.stateNode.containerInfo,B===v||B.nodeType===8&&B.parentNode===v))return;A=A.return}for(;F!==null;){if(A=ao(F),A===null)return;if(B=A.tag,B===5||B===6){p=w=A;continue e}F=F.parentNode}}p=p.return}Vt(function(){var X=w,ae=Wn(h),ce=[];e:{var ie=_w.get(i);if(ie!==void 0){var xe=so,Se=i;switch(i){case"keypress":if(ro(h)===0)break e;case"keydown":case"keyup":xe=mt;break;case"focusin":Se="focus",xe=wn;break;case"focusout":Se="blur",xe=wn;break;case"beforeblur":case"afterblur":xe=wn;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=Ps;break;case vw:case xw:case ww:xe=ch;break;case bw:xe=dl;break;case"scroll":xe=ol;break;case"wheel":xe=WC;break;case"copy":case"cut":case"paste":xe=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=vr}var Ie=(l&4)!==0,Ht=!Ie&&i==="scroll",K=Ie?ie!==null?ie+"Capture":null:ie;Ie=[];for(var W=X,Y;W!==null;){Y=W;var fe=Y.stateNode;if(Y.tag===5&&fe!==null&&(Y=fe,K!==null&&(fe=Gt(W,K),fe!=null&&Ie.push(hu(W,fe,Y)))),Ht)break;W=W.return}0<Ie.length&&(ie=new xe(ie,Se,null,h,ae),ce.push({event:ie,listeners:Ie}))}}if((l&7)===0){e:{if(ie=i==="mouseover"||i==="pointerover",xe=i==="mouseout"||i==="pointerout",ie&&h!==Ir&&(Se=h.relatedTarget||h.fromElement)&&(ao(Se)||Se[di]))break e;if((xe||ie)&&(ie=ae.window===ae?ae:(ie=ae.ownerDocument)?ie.defaultView||ie.parentWindow:window,xe?(Se=h.relatedTarget||h.toElement,xe=X,Se=Se?ao(Se):null,Se!==null&&(Ht=Zr(Se),Se!==Ht||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(xe=null,Se=X),xe!==Se)){if(Ie=ru,fe="onMouseLeave",K="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=vr,fe="onPointerLeave",K="onPointerEnter",W="pointer"),Ht=xe==null?ie:yl(xe),Y=Se==null?ie:yl(Se),ie=new Ie(fe,W+"leave",xe,h,ae),ie.target=Ht,ie.relatedTarget=Y,fe=null,ao(ae)===X&&(Ie=new Ie(K,W+"enter",Se,h,ae),Ie.target=Y,Ie.relatedTarget=Ht,fe=Ie),Ht=fe,xe&&Se)t:{for(Ie=xe,K=Se,W=0,Y=Ie;Y;Y=pl(Y))W++;for(Y=0,fe=K;fe;fe=pl(fe))Y++;for(;0<W-Y;)Ie=pl(Ie),W--;for(;0<Y-W;)K=pl(K),Y--;for(;W--;){if(Ie===K||K!==null&&Ie===K.alternate)break t;Ie=pl(Ie),K=pl(K)}Ie=null}else Ie=null;xe!==null&&kw(ce,ie,xe,Ie,!1),Se!==null&&Ht!==null&&kw(ce,Ht,Se,Ie,!0)}}e:{if(ie=X?yl(X):window,xe=ie.nodeName&&ie.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ie.type==="file")var Ce=XC;else if(aw(ie))if(lw)Ce=nA;else{Ce=eA;var Oe=ZC}else(xe=ie.nodeName)&&xe.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ce=tA);if(Ce&&(Ce=Ce(i,X))){ow(ce,Ce,h,ae);break e}Oe&&Oe(i,ie,X),i==="focusout"&&(Oe=ie._wrapperState)&&Oe.controlled&&ie.type==="number"&&rt(ie,"number",ie.value)}switch(Oe=X?yl(X):window,i){case"focusin":(aw(Oe)||Oe.contentEditable==="true")&&(fl=Oe,yp=X,cu=null);break;case"focusout":cu=yp=fl=null;break;case"mousedown":vp=!0;break;case"contextmenu":case"mouseup":case"dragend":vp=!1,gw(ce,h,ae);break;case"selectionchange":if(iA)break;case"keydown":case"keyup":gw(ce,h,ae)}var Me;if(fp)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else hl?sw(i,h)&&(We="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(We="onCompositionStart");We&&(tw&&h.locale!=="ko"&&(hl||We!=="onCompositionStart"?We==="onCompositionEnd"&&hl&&(Me=ih()):(gr=ae,al="value"in gr?gr.value:gr.textContent,hl=!0)),Oe=mh(X,We),0<Oe.length&&(We=new S(We,i,null,h,ae),ce.push({event:We,listeners:Oe}),Me?We.data=Me:(Me=iw(h),Me!==null&&(We.data=Me)))),(Me=KC?GC(i,h):YC(i,h))&&(X=mh(X,"onBeforeInput"),0<X.length&&(ae=new S("onBeforeInput","beforeinput",null,h,ae),ce.push({event:ae,listeners:X}),ae.data=Me))}Sw(ce,l)})}function hu(i,l,h){return{instance:i,listener:l,currentTarget:h}}function mh(i,l){for(var h=l+"Capture",p=[];i!==null;){var v=i,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=Gt(i,h),w!=null&&p.unshift(hu(i,w,v)),w=Gt(i,l),w!=null&&p.push(hu(i,w,v))),i=i.return}return p}function pl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function kw(i,l,h,p,v){for(var w=l._reactName,A=[];h!==null&&h!==p;){var F=h,B=F.alternate,X=F.stateNode;if(B!==null&&B===p)break;F.tag===5&&X!==null&&(F=X,v?(B=Gt(h,w),B!=null&&A.unshift(hu(h,B,F))):v||(B=Gt(h,w),B!=null&&A.push(hu(h,B,F)))),h=h.return}A.length!==0&&i.push({event:l,listeners:A})}var cA=/\r\n?/g,uA=/\u0000|\uFFFD/g;function jw(i){return(typeof i=="string"?i:""+i).replace(cA,`
`).replace(uA,"")}function ph(i,l,h){if(l=jw(l),jw(i)!==l&&h)throw Error(n(425))}function gh(){}var Tp=null,Sp=null;function Np(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var kp=typeof setTimeout=="function"?setTimeout:void 0,dA=typeof clearTimeout=="function"?clearTimeout:void 0,Iw=typeof Promise=="function"?Promise:void 0,hA=typeof queueMicrotask=="function"?queueMicrotask:typeof Iw<"u"?function(i){return Iw.resolve(null).then(i).catch(fA)}:kp;function fA(i){setTimeout(function(){throw i})}function jp(i,l){var h=l,p=0;do{var v=h.nextSibling;if(i.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(p===0){i.removeChild(v),ea(l);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=v}while(h);ea(l)}function sa(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function Cw(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return i;l--}else h==="/$"&&l++}i=i.previousSibling}return null}var gl=Math.random().toString(36).slice(2),Os="__reactFiber$"+gl,fu="__reactProps$"+gl,di="__reactContainer$"+gl,Ip="__reactEvents$"+gl,mA="__reactListeners$"+gl,pA="__reactHandles$"+gl;function ao(i){var l=i[Os];if(l)return l;for(var h=i.parentNode;h;){if(l=h[di]||h[Os]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(i=Cw(i);i!==null;){if(h=i[Os])return h;i=Cw(i)}return l}i=h,h=i.parentNode}return null}function mu(i){return i=i[Os]||i[di],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function yl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function yh(i){return i[fu]||null}var Cp=[],vl=-1;function ia(i){return{current:i}}function St(i){0>vl||(i.current=Cp[vl],Cp[vl]=null,vl--)}function wt(i,l){vl++,Cp[vl]=i.current,i.current=l}var aa={},Dn=ia(aa),tr=ia(!1),oo=aa;function xl(i,l){var h=i.type.contextTypes;if(!h)return aa;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in h)v[w]=l[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=v),v}function nr(i){return i=i.childContextTypes,i!=null}function vh(){St(tr),St(Dn)}function Aw(i,l,h){if(Dn.current!==aa)throw Error(n(168));wt(Dn,l),wt(tr,h)}function Rw(i,l,h){var p=i.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var v in p)if(!(v in l))throw Error(n(108,Ae(i)||"Unknown",v));return he({},h,p)}function xh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||aa,oo=Dn.current,wt(Dn,i),wt(tr,tr.current),!0}function Pw(i,l,h){var p=i.stateNode;if(!p)throw Error(n(169));h?(i=Rw(i,l,oo),p.__reactInternalMemoizedMergedChildContext=i,St(tr),St(Dn),wt(Dn,i)):St(tr),wt(tr,h)}var hi=null,wh=!1,Ap=!1;function Dw(i){hi===null?hi=[i]:hi.push(i)}function gA(i){wh=!0,Dw(i)}function oa(){if(!Ap&&hi!==null){Ap=!0;var i=0,l=st;try{var h=hi;for(st=1;i<h.length;i++){var p=h[i];do p=p(!0);while(p!==null)}hi=null,wh=!1}catch(v){throw hi!==null&&(hi=hi.slice(i+1)),qc(Zo,oa),v}finally{st=l,Ap=!1}}return null}var wl=[],bl=0,bh=null,_h=0,Pr=[],Dr=0,lo=null,fi=1,mi="";function co(i,l){wl[bl++]=_h,wl[bl++]=bh,bh=i,_h=l}function Ow(i,l,h){Pr[Dr++]=fi,Pr[Dr++]=mi,Pr[Dr++]=lo,lo=i;var p=fi;i=mi;var v=32-mr(p)-1;p&=~(1<<v),h+=1;var w=32-mr(l)+v;if(30<w){var A=v-v%5;w=(p&(1<<A)-1).toString(32),p>>=A,v-=A,fi=1<<32-mr(l)+v|h<<v|p,mi=w+i}else fi=1<<w|h<<v|p,mi=i}function Rp(i){i.return!==null&&(co(i,1),Ow(i,1,0))}function Pp(i){for(;i===bh;)bh=wl[--bl],wl[bl]=null,_h=wl[--bl],wl[bl]=null;for(;i===lo;)lo=Pr[--Dr],Pr[Dr]=null,mi=Pr[--Dr],Pr[Dr]=null,fi=Pr[--Dr],Pr[Dr]=null}var xr=null,wr=null,jt=!1,ns=null;function Mw(i,l){var h=Vr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=i,l=i.deletions,l===null?(i.deletions=[h],i.flags|=16):l.push(h)}function Lw(i,l){switch(i.tag){case 5:var h=i.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,xr=i,wr=sa(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,xr=i,wr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=lo!==null?{id:fi,overflow:mi}:null,i.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=Vr(18,null,null,0),h.stateNode=l,h.return=i,i.child=h,xr=i,wr=null,!0):!1;default:return!1}}function Dp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Op(i){if(jt){var l=wr;if(l){var h=l;if(!Lw(i,l)){if(Dp(i))throw Error(n(418));l=sa(h.nextSibling);var p=xr;l&&Lw(i,l)?Mw(p,h):(i.flags=i.flags&-4097|2,jt=!1,xr=i)}}else{if(Dp(i))throw Error(n(418));i.flags=i.flags&-4097|2,jt=!1,xr=i}}}function Vw(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xr=i}function Eh(i){if(i!==xr)return!1;if(!jt)return Vw(i),jt=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!Np(i.type,i.memoizedProps)),l&&(l=wr)){if(Dp(i))throw Fw(),Error(n(418));for(;l;)Mw(i,l),l=sa(l.nextSibling)}if(Vw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(l===0){wr=sa(i.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}i=i.nextSibling}wr=null}}else wr=xr?sa(i.stateNode.nextSibling):null;return!0}function Fw(){for(var i=wr;i;)i=sa(i.nextSibling)}function _l(){wr=xr=null,jt=!1}function Mp(i){ns===null?ns=[i]:ns.push(i)}var yA=D.ReactCurrentBatchConfig;function pu(i,l,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var p=h.stateNode}if(!p)throw Error(n(147,i));var v=p,w=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(A){var F=v.refs;A===null?delete F[w]:F[w]=A},l._stringRef=w,l)}if(typeof i!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,i))}return i}function Th(i,l){throw i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function Uw(i){var l=i._init;return l(i._payload)}function $w(i){function l(K,W){if(i){var Y=K.deletions;Y===null?(K.deletions=[W],K.flags|=16):Y.push(W)}}function h(K,W){if(!i)return null;for(;W!==null;)l(K,W),W=W.sibling;return null}function p(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function v(K,W){return K=pa(K,W),K.index=0,K.sibling=null,K}function w(K,W,Y){return K.index=Y,i?(Y=K.alternate,Y!==null?(Y=Y.index,Y<W?(K.flags|=2,W):Y):(K.flags|=2,W)):(K.flags|=1048576,W)}function A(K){return i&&K.alternate===null&&(K.flags|=2),K}function F(K,W,Y,fe){return W===null||W.tag!==6?(W=kg(Y,K.mode,fe),W.return=K,W):(W=v(W,Y),W.return=K,W)}function B(K,W,Y,fe){var Ce=Y.type;return Ce===P?ae(K,W,Y.props.children,fe,Y.key):W!==null&&(W.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===le&&Uw(Ce)===W.type)?(fe=v(W,Y.props),fe.ref=pu(K,W,Y),fe.return=K,fe):(fe=Gh(Y.type,Y.key,Y.props,null,K.mode,fe),fe.ref=pu(K,W,Y),fe.return=K,fe)}function X(K,W,Y,fe){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=jg(Y,K.mode,fe),W.return=K,W):(W=v(W,Y.children||[]),W.return=K,W)}function ae(K,W,Y,fe,Ce){return W===null||W.tag!==7?(W=vo(Y,K.mode,fe,Ce),W.return=K,W):(W=v(W,Y),W.return=K,W)}function ce(K,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=kg(""+W,K.mode,Y),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case M:return Y=Gh(W.type,W.key,W.props,null,K.mode,Y),Y.ref=pu(K,null,W),Y.return=K,Y;case z:return W=jg(W,K.mode,Y),W.return=K,W;case le:var fe=W._init;return ce(K,fe(W._payload),Y)}if(xt(W)||ve(W))return W=vo(W,K.mode,Y,null),W.return=K,W;Th(K,W)}return null}function ie(K,W,Y,fe){var Ce=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ce!==null?null:F(K,W,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case M:return Y.key===Ce?B(K,W,Y,fe):null;case z:return Y.key===Ce?X(K,W,Y,fe):null;case le:return Ce=Y._init,ie(K,W,Ce(Y._payload),fe)}if(xt(Y)||ve(Y))return Ce!==null?null:ae(K,W,Y,fe,null);Th(K,Y)}return null}function xe(K,W,Y,fe,Ce){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return K=K.get(Y)||null,F(W,K,""+fe,Ce);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:return K=K.get(fe.key===null?Y:fe.key)||null,B(W,K,fe,Ce);case z:return K=K.get(fe.key===null?Y:fe.key)||null,X(W,K,fe,Ce);case le:var Oe=fe._init;return xe(K,W,Y,Oe(fe._payload),Ce)}if(xt(fe)||ve(fe))return K=K.get(Y)||null,ae(W,K,fe,Ce,null);Th(W,fe)}return null}function Se(K,W,Y,fe){for(var Ce=null,Oe=null,Me=W,We=W=0,pn=null;Me!==null&&We<Y.length;We++){Me.index>We?(pn=Me,Me=null):pn=Me.sibling;var ut=ie(K,Me,Y[We],fe);if(ut===null){Me===null&&(Me=pn);break}i&&Me&&ut.alternate===null&&l(K,Me),W=w(ut,W,We),Oe===null?Ce=ut:Oe.sibling=ut,Oe=ut,Me=pn}if(We===Y.length)return h(K,Me),jt&&co(K,We),Ce;if(Me===null){for(;We<Y.length;We++)Me=ce(K,Y[We],fe),Me!==null&&(W=w(Me,W,We),Oe===null?Ce=Me:Oe.sibling=Me,Oe=Me);return jt&&co(K,We),Ce}for(Me=p(K,Me);We<Y.length;We++)pn=xe(Me,K,We,Y[We],fe),pn!==null&&(i&&pn.alternate!==null&&Me.delete(pn.key===null?We:pn.key),W=w(pn,W,We),Oe===null?Ce=pn:Oe.sibling=pn,Oe=pn);return i&&Me.forEach(function(ga){return l(K,ga)}),jt&&co(K,We),Ce}function Ie(K,W,Y,fe){var Ce=ve(Y);if(typeof Ce!="function")throw Error(n(150));if(Y=Ce.call(Y),Y==null)throw Error(n(151));for(var Oe=Ce=null,Me=W,We=W=0,pn=null,ut=Y.next();Me!==null&&!ut.done;We++,ut=Y.next()){Me.index>We?(pn=Me,Me=null):pn=Me.sibling;var ga=ie(K,Me,ut.value,fe);if(ga===null){Me===null&&(Me=pn);break}i&&Me&&ga.alternate===null&&l(K,Me),W=w(ga,W,We),Oe===null?Ce=ga:Oe.sibling=ga,Oe=ga,Me=pn}if(ut.done)return h(K,Me),jt&&co(K,We),Ce;if(Me===null){for(;!ut.done;We++,ut=Y.next())ut=ce(K,ut.value,fe),ut!==null&&(W=w(ut,W,We),Oe===null?Ce=ut:Oe.sibling=ut,Oe=ut);return jt&&co(K,We),Ce}for(Me=p(K,Me);!ut.done;We++,ut=Y.next())ut=xe(Me,K,We,ut.value,fe),ut!==null&&(i&&ut.alternate!==null&&Me.delete(ut.key===null?We:ut.key),W=w(ut,W,We),Oe===null?Ce=ut:Oe.sibling=ut,Oe=ut);return i&&Me.forEach(function(QA){return l(K,QA)}),jt&&co(K,We),Ce}function Ht(K,W,Y,fe){if(typeof Y=="object"&&Y!==null&&Y.type===P&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case M:e:{for(var Ce=Y.key,Oe=W;Oe!==null;){if(Oe.key===Ce){if(Ce=Y.type,Ce===P){if(Oe.tag===7){h(K,Oe.sibling),W=v(Oe,Y.props.children),W.return=K,K=W;break e}}else if(Oe.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===le&&Uw(Ce)===Oe.type){h(K,Oe.sibling),W=v(Oe,Y.props),W.ref=pu(K,Oe,Y),W.return=K,K=W;break e}h(K,Oe);break}else l(K,Oe);Oe=Oe.sibling}Y.type===P?(W=vo(Y.props.children,K.mode,fe,Y.key),W.return=K,K=W):(fe=Gh(Y.type,Y.key,Y.props,null,K.mode,fe),fe.ref=pu(K,W,Y),fe.return=K,K=fe)}return A(K);case z:e:{for(Oe=Y.key;W!==null;){if(W.key===Oe)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){h(K,W.sibling),W=v(W,Y.children||[]),W.return=K,K=W;break e}else{h(K,W);break}else l(K,W);W=W.sibling}W=jg(Y,K.mode,fe),W.return=K,K=W}return A(K);case le:return Oe=Y._init,Ht(K,W,Oe(Y._payload),fe)}if(xt(Y))return Se(K,W,Y,fe);if(ve(Y))return Ie(K,W,Y,fe);Th(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(h(K,W.sibling),W=v(W,Y),W.return=K,K=W):(h(K,W),W=kg(Y,K.mode,fe),W.return=K,K=W),A(K)):h(K,W)}return Ht}var El=$w(!0),Bw=$w(!1),Sh=ia(null),Nh=null,Tl=null,Lp=null;function Vp(){Lp=Tl=Nh=null}function Fp(i){var l=Sh.current;St(Sh),i._currentValue=l}function Up(i,l,h){for(;i!==null;){var p=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),i===h)break;i=i.return}}function Sl(i,l){Nh=i,Lp=Tl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(rr=!0),i.firstContext=null)}function Or(i){var l=i._currentValue;if(Lp!==i)if(i={context:i,memoizedValue:l,next:null},Tl===null){if(Nh===null)throw Error(n(308));Tl=i,Nh.dependencies={lanes:0,firstContext:i}}else Tl=Tl.next=i;return l}var uo=null;function $p(i){uo===null?uo=[i]:uo.push(i)}function zw(i,l,h,p){var v=l.interleaved;return v===null?(h.next=h,$p(l)):(h.next=v.next,v.next=h),l.interleaved=h,pi(i,p)}function pi(i,l){i.lanes|=l;var h=i.alternate;for(h!==null&&(h.lanes|=l),h=i,i=i.return;i!==null;)i.childLanes|=l,h=i.alternate,h!==null&&(h.childLanes|=l),h=i,i=i.return;return h.tag===3?h.stateNode:null}var la=!1;function Bp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qw(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function gi(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function ca(i,l,h){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(ct&2)!==0){var v=p.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),p.pending=l,pi(i,h)}return v=p.interleaved,v===null?(l.next=l,$p(p)):(l.next=v.next,v.next=l),p.interleaved=l,pi(i,h)}function kh(i,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var p=l.lanes;p&=i.pendingLanes,h|=p,l.lanes=h,Qc(i,h)}}function Ww(i,l){var h=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var v=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var A={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?v=w=A:w=w.next=A,h=h.next}while(h!==null);w===null?v=w=l:w=w.next=l}else v=w=l;h={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=l:i.next=l,h.lastBaseUpdate=l}function jh(i,l,h,p){var v=i.updateQueue;la=!1;var w=v.firstBaseUpdate,A=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var B=F,X=B.next;B.next=null,A===null?w=X:A.next=X,A=B;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,F=ae.lastBaseUpdate,F!==A&&(F===null?ae.firstBaseUpdate=X:F.next=X,ae.lastBaseUpdate=B))}if(w!==null){var ce=v.baseState;A=0,ae=X=B=null,F=w;do{var ie=F.lane,xe=F.eventTime;if((p&ie)===ie){ae!==null&&(ae=ae.next={eventTime:xe,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Se=i,Ie=F;switch(ie=l,xe=h,Ie.tag){case 1:if(Se=Ie.payload,typeof Se=="function"){ce=Se.call(xe,ce,ie);break e}ce=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ie.payload,ie=typeof Se=="function"?Se.call(xe,ce,ie):Se,ie==null)break e;ce=he({},ce,ie);break e;case 2:la=!0}}F.callback!==null&&F.lane!==0&&(i.flags|=64,ie=v.effects,ie===null?v.effects=[F]:ie.push(F))}else xe={eventTime:xe,lane:ie,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ae===null?(X=ae=xe,B=ce):ae=ae.next=xe,A|=ie;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;ie=F,F=ie.next,ie.next=null,v.lastBaseUpdate=ie,v.shared.pending=null}}while(!0);if(ae===null&&(B=ce),v.baseState=B,v.firstBaseUpdate=X,v.lastBaseUpdate=ae,l=v.shared.interleaved,l!==null){v=l;do A|=v.lane,v=v.next;while(v!==l)}else w===null&&(v.shared.lanes=0);mo|=A,i.lanes=A,i.memoizedState=ce}}function Hw(i,l,h){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var p=i[l],v=p.callback;if(v!==null){if(p.callback=null,p=h,typeof v!="function")throw Error(n(191,v));v.call(p)}}}var gu={},Ms=ia(gu),yu=ia(gu),vu=ia(gu);function ho(i){if(i===gu)throw Error(n(174));return i}function zp(i,l){switch(wt(vu,l),wt(yu,i),wt(Ms,gu),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Wi(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=Wi(l,i)}St(Ms),wt(Ms,l)}function Nl(){St(Ms),St(yu),St(vu)}function Kw(i){ho(vu.current);var l=ho(Ms.current),h=Wi(l,i.type);l!==h&&(wt(yu,i),wt(Ms,h))}function qp(i){yu.current===i&&(St(Ms),St(yu))}var Rt=ia(0);function Ih(i){for(var l=i;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Wp=[];function Hp(){for(var i=0;i<Wp.length;i++)Wp[i]._workInProgressVersionPrimary=null;Wp.length=0}var Ch=D.ReactCurrentDispatcher,Kp=D.ReactCurrentBatchConfig,fo=0,Pt=null,rn=null,fn=null,Ah=!1,xu=!1,wu=0,vA=0;function On(){throw Error(n(321))}function Gp(i,l){if(l===null)return!1;for(var h=0;h<l.length&&h<i.length;h++)if(!ts(i[h],l[h]))return!1;return!0}function Yp(i,l,h,p,v,w){if(fo=w,Pt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Ch.current=i===null||i.memoizedState===null?_A:EA,i=h(p,v),xu){w=0;do{if(xu=!1,wu=0,25<=w)throw Error(n(301));w+=1,fn=rn=null,l.updateQueue=null,Ch.current=TA,i=h(p,v)}while(xu)}if(Ch.current=Dh,l=rn!==null&&rn.next!==null,fo=0,fn=rn=Pt=null,Ah=!1,l)throw Error(n(300));return i}function Qp(){var i=wu!==0;return wu=0,i}function Ls(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Pt.memoizedState=fn=i:fn=fn.next=i,fn}function Mr(){if(rn===null){var i=Pt.alternate;i=i!==null?i.memoizedState:null}else i=rn.next;var l=fn===null?Pt.memoizedState:fn.next;if(l!==null)fn=l,rn=i;else{if(i===null)throw Error(n(310));rn=i,i={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},fn===null?Pt.memoizedState=fn=i:fn=fn.next=i}return fn}function bu(i,l){return typeof l=="function"?l(i):l}function Jp(i){var l=Mr(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=i;var p=rn,v=p.baseQueue,w=h.pending;if(w!==null){if(v!==null){var A=v.next;v.next=w.next,w.next=A}p.baseQueue=v=w,h.pending=null}if(v!==null){w=v.next,p=p.baseState;var F=A=null,B=null,X=w;do{var ae=X.lane;if((fo&ae)===ae)B!==null&&(B=B.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),p=X.hasEagerState?X.eagerState:i(p,X.action);else{var ce={lane:ae,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};B===null?(F=B=ce,A=p):B=B.next=ce,Pt.lanes|=ae,mo|=ae}X=X.next}while(X!==null&&X!==w);B===null?A=p:B.next=F,ts(p,l.memoizedState)||(rr=!0),l.memoizedState=p,l.baseState=A,l.baseQueue=B,h.lastRenderedState=p}if(i=h.interleaved,i!==null){v=i;do w=v.lane,Pt.lanes|=w,mo|=w,v=v.next;while(v!==i)}else v===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Xp(i){var l=Mr(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=i;var p=h.dispatch,v=h.pending,w=l.memoizedState;if(v!==null){h.pending=null;var A=v=v.next;do w=i(w,A.action),A=A.next;while(A!==v);ts(w,l.memoizedState)||(rr=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),h.lastRenderedState=w}return[w,p]}function Gw(){}function Yw(i,l){var h=Pt,p=Mr(),v=l(),w=!ts(p.memoizedState,v);if(w&&(p.memoizedState=v,rr=!0),p=p.queue,Zp(Xw.bind(null,h,p,i),[i]),p.getSnapshot!==l||w||fn!==null&&fn.memoizedState.tag&1){if(h.flags|=2048,_u(9,Jw.bind(null,h,p,v,l),void 0,null),mn===null)throw Error(n(349));(fo&30)!==0||Qw(h,l,v)}return v}function Qw(i,l,h){i.flags|=16384,i={getSnapshot:l,value:h},l=Pt.updateQueue,l===null?(l={lastEffect:null,stores:null},Pt.updateQueue=l,l.stores=[i]):(h=l.stores,h===null?l.stores=[i]:h.push(i))}function Jw(i,l,h,p){l.value=h,l.getSnapshot=p,Zw(l)&&eb(i)}function Xw(i,l,h){return h(function(){Zw(l)&&eb(i)})}function Zw(i){var l=i.getSnapshot;i=i.value;try{var h=l();return!ts(i,h)}catch{return!0}}function eb(i){var l=pi(i,1);l!==null&&as(l,i,1,-1)}function tb(i){var l=Ls();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:i},l.queue=i,i=i.dispatch=bA.bind(null,Pt,i),[l.memoizedState,i]}function _u(i,l,h,p){return i={tag:i,create:l,destroy:h,deps:p,next:null},l=Pt.updateQueue,l===null?(l={lastEffect:null,stores:null},Pt.updateQueue=l,l.lastEffect=i.next=i):(h=l.lastEffect,h===null?l.lastEffect=i.next=i:(p=h.next,h.next=i,i.next=p,l.lastEffect=i)),i}function nb(){return Mr().memoizedState}function Rh(i,l,h,p){var v=Ls();Pt.flags|=i,v.memoizedState=_u(1|l,h,void 0,p===void 0?null:p)}function Ph(i,l,h,p){var v=Mr();p=p===void 0?null:p;var w=void 0;if(rn!==null){var A=rn.memoizedState;if(w=A.destroy,p!==null&&Gp(p,A.deps)){v.memoizedState=_u(l,h,w,p);return}}Pt.flags|=i,v.memoizedState=_u(1|l,h,w,p)}function rb(i,l){return Rh(8390656,8,i,l)}function Zp(i,l){return Ph(2048,8,i,l)}function sb(i,l){return Ph(4,2,i,l)}function ib(i,l){return Ph(4,4,i,l)}function ab(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function ob(i,l,h){return h=h!=null?h.concat([i]):null,Ph(4,4,ab.bind(null,l,i),h)}function eg(){}function lb(i,l){var h=Mr();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&Gp(l,p[1])?p[0]:(h.memoizedState=[i,l],i)}function cb(i,l){var h=Mr();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&Gp(l,p[1])?p[0]:(i=i(),h.memoizedState=[i,l],i)}function ub(i,l,h){return(fo&21)===0?(i.baseState&&(i.baseState=!1,rr=!0),i.memoizedState=h):(ts(h,l)||(h=Gc(),Pt.lanes|=h,mo|=h,i.baseState=!0),l)}function xA(i,l){var h=st;st=h!==0&&4>h?h:4,i(!0);var p=Kp.transition;Kp.transition={};try{i(!1),l()}finally{st=h,Kp.transition=p}}function db(){return Mr().memoizedState}function wA(i,l,h){var p=fa(i);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},hb(i))fb(l,h);else if(h=zw(i,l,h,p),h!==null){var v=Gn();as(h,i,p,v),mb(h,l,p)}}function bA(i,l,h){var p=fa(i),v={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(hb(i))fb(l,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var A=l.lastRenderedState,F=w(A,h);if(v.hasEagerState=!0,v.eagerState=F,ts(F,A)){var B=l.interleaved;B===null?(v.next=v,$p(l)):(v.next=B.next,B.next=v),l.interleaved=v;return}}catch{}finally{}h=zw(i,l,v,p),h!==null&&(v=Gn(),as(h,i,p,v),mb(h,l,p))}}function hb(i){var l=i.alternate;return i===Pt||l!==null&&l===Pt}function fb(i,l){xu=Ah=!0;var h=i.pending;h===null?l.next=l:(l.next=h.next,h.next=l),i.pending=l}function mb(i,l,h){if((h&4194240)!==0){var p=l.lanes;p&=i.pendingLanes,h|=p,l.lanes=h,Qc(i,h)}}var Dh={readContext:Or,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},_A={readContext:Or,useCallback:function(i,l){return Ls().memoizedState=[i,l===void 0?null:l],i},useContext:Or,useEffect:rb,useImperativeHandle:function(i,l,h){return h=h!=null?h.concat([i]):null,Rh(4194308,4,ab.bind(null,l,i),h)},useLayoutEffect:function(i,l){return Rh(4194308,4,i,l)},useInsertionEffect:function(i,l){return Rh(4,2,i,l)},useMemo:function(i,l){var h=Ls();return l=l===void 0?null:l,i=i(),h.memoizedState=[i,l],i},useReducer:function(i,l,h){var p=Ls();return l=h!==void 0?h(l):l,p.memoizedState=p.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},p.queue=i,i=i.dispatch=wA.bind(null,Pt,i),[p.memoizedState,i]},useRef:function(i){var l=Ls();return i={current:i},l.memoizedState=i},useState:tb,useDebugValue:eg,useDeferredValue:function(i){return Ls().memoizedState=i},useTransition:function(){var i=tb(!1),l=i[0];return i=xA.bind(null,i[1]),Ls().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,h){var p=Pt,v=Ls();if(jt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),mn===null)throw Error(n(349));(fo&30)!==0||Qw(p,l,h)}v.memoizedState=h;var w={value:h,getSnapshot:l};return v.queue=w,rb(Xw.bind(null,p,w,i),[i]),p.flags|=2048,_u(9,Jw.bind(null,p,w,h,l),void 0,null),h},useId:function(){var i=Ls(),l=mn.identifierPrefix;if(jt){var h=mi,p=fi;h=(p&~(1<<32-mr(p)-1)).toString(32)+h,l=":"+l+"R"+h,h=wu++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=vA++,l=":"+l+"r"+h.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},EA={readContext:Or,useCallback:lb,useContext:Or,useEffect:Zp,useImperativeHandle:ob,useInsertionEffect:sb,useLayoutEffect:ib,useMemo:cb,useReducer:Jp,useRef:nb,useState:function(){return Jp(bu)},useDebugValue:eg,useDeferredValue:function(i){var l=Mr();return ub(l,rn.memoizedState,i)},useTransition:function(){var i=Jp(bu)[0],l=Mr().memoizedState;return[i,l]},useMutableSource:Gw,useSyncExternalStore:Yw,useId:db,unstable_isNewReconciler:!1},TA={readContext:Or,useCallback:lb,useContext:Or,useEffect:Zp,useImperativeHandle:ob,useInsertionEffect:sb,useLayoutEffect:ib,useMemo:cb,useReducer:Xp,useRef:nb,useState:function(){return Xp(bu)},useDebugValue:eg,useDeferredValue:function(i){var l=Mr();return rn===null?l.memoizedState=i:ub(l,rn.memoizedState,i)},useTransition:function(){var i=Xp(bu)[0],l=Mr().memoizedState;return[i,l]},useMutableSource:Gw,useSyncExternalStore:Yw,useId:db,unstable_isNewReconciler:!1};function rs(i,l){if(i&&i.defaultProps){l=he({},l),i=i.defaultProps;for(var h in i)l[h]===void 0&&(l[h]=i[h]);return l}return l}function tg(i,l,h,p){l=i.memoizedState,h=h(p,l),h=h==null?l:he({},l,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var Oh={isMounted:function(i){return(i=i._reactInternals)?Zr(i)===i:!1},enqueueSetState:function(i,l,h){i=i._reactInternals;var p=Gn(),v=fa(i),w=gi(p,v);w.payload=l,h!=null&&(w.callback=h),l=ca(i,w,v),l!==null&&(as(l,i,v,p),kh(l,i,v))},enqueueReplaceState:function(i,l,h){i=i._reactInternals;var p=Gn(),v=fa(i),w=gi(p,v);w.tag=1,w.payload=l,h!=null&&(w.callback=h),l=ca(i,w,v),l!==null&&(as(l,i,v,p),kh(l,i,v))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var h=Gn(),p=fa(i),v=gi(h,p);v.tag=2,l!=null&&(v.callback=l),l=ca(i,v,p),l!==null&&(as(l,i,p,h),kh(l,i,p))}};function pb(i,l,h,p,v,w,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,A):l.prototype&&l.prototype.isPureReactComponent?!lu(h,p)||!lu(v,w):!0}function gb(i,l,h){var p=!1,v=aa,w=l.contextType;return typeof w=="object"&&w!==null?w=Or(w):(v=nr(l)?oo:Dn.current,p=l.contextTypes,w=(p=p!=null)?xl(i,v):aa),l=new l(h,w),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Oh,i.stateNode=l,l._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=w),l}function yb(i,l,h,p){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,p),l.state!==i&&Oh.enqueueReplaceState(l,l.state,null)}function ng(i,l,h,p){var v=i.stateNode;v.props=h,v.state=i.memoizedState,v.refs={},Bp(i);var w=l.contextType;typeof w=="object"&&w!==null?v.context=Or(w):(w=nr(l)?oo:Dn.current,v.context=xl(i,w)),v.state=i.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(tg(i,l,w,h),v.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Oh.enqueueReplaceState(v,v.state,null),jh(i,h,v,p),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function kl(i,l){try{var h="",p=l;do h+=_e(p),p=p.return;while(p);var v=h}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:l,stack:v,digest:null}}function rg(i,l,h){return{value:i,source:null,stack:h??null,digest:l??null}}function sg(i,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var SA=typeof WeakMap=="function"?WeakMap:Map;function vb(i,l,h){h=gi(-1,h),h.tag=3,h.payload={element:null};var p=l.value;return h.callback=function(){Bh||(Bh=!0,xg=p),sg(i,l)},h}function xb(i,l,h){h=gi(-1,h),h.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var v=l.value;h.payload=function(){return p(v)},h.callback=function(){sg(i,l)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){sg(i,l),typeof p!="function"&&(da===null?da=new Set([this]):da.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})}),h}function wb(i,l,h){var p=i.pingCache;if(p===null){p=i.pingCache=new SA;var v=new Set;p.set(l,v)}else v=p.get(l),v===void 0&&(v=new Set,p.set(l,v));v.has(h)||(v.add(h),i=FA.bind(null,i,l,h),l.then(i,i))}function bb(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function _b(i,l,h,p,v){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=gi(-1,1),l.tag=2,ca(h,l,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var NA=D.ReactCurrentOwner,rr=!1;function Kn(i,l,h,p){l.child=i===null?Bw(l,null,h,p):El(l,i.child,h,p)}function Eb(i,l,h,p,v){h=h.render;var w=l.ref;return Sl(l,v),p=Yp(i,l,h,p,w,v),h=Qp(),i!==null&&!rr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~v,yi(i,l,v)):(jt&&h&&Rp(l),l.flags|=1,Kn(i,l,p,v),l.child)}function Tb(i,l,h,p,v){if(i===null){var w=h.type;return typeof w=="function"&&!Ng(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=w,Sb(i,l,w,p,v)):(i=Gh(h.type,null,p,l,l.mode,v),i.ref=l.ref,i.return=l,l.child=i)}if(w=i.child,(i.lanes&v)===0){var A=w.memoizedProps;if(h=h.compare,h=h!==null?h:lu,h(A,p)&&i.ref===l.ref)return yi(i,l,v)}return l.flags|=1,i=pa(w,p),i.ref=l.ref,i.return=l,l.child=i}function Sb(i,l,h,p,v){if(i!==null){var w=i.memoizedProps;if(lu(w,p)&&i.ref===l.ref)if(rr=!1,l.pendingProps=p=w,(i.lanes&v)!==0)(i.flags&131072)!==0&&(rr=!0);else return l.lanes=i.lanes,yi(i,l,v)}return ig(i,l,h,p,v)}function Nb(i,l,h){var p=l.pendingProps,v=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Il,br),br|=h;else{if((h&1073741824)===0)return i=w!==null?w.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,wt(Il,br),br|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:h,wt(Il,br),br|=p}else w!==null?(p=w.baseLanes|h,l.memoizedState=null):p=h,wt(Il,br),br|=p;return Kn(i,l,v,h),l.child}function kb(i,l){var h=l.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function ig(i,l,h,p,v){var w=nr(h)?oo:Dn.current;return w=xl(l,w),Sl(l,v),h=Yp(i,l,h,p,w,v),p=Qp(),i!==null&&!rr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~v,yi(i,l,v)):(jt&&p&&Rp(l),l.flags|=1,Kn(i,l,h,v),l.child)}function jb(i,l,h,p,v){if(nr(h)){var w=!0;xh(l)}else w=!1;if(Sl(l,v),l.stateNode===null)Lh(i,l),gb(l,h,p),ng(l,h,p,v),p=!0;else if(i===null){var A=l.stateNode,F=l.memoizedProps;A.props=F;var B=A.context,X=h.contextType;typeof X=="object"&&X!==null?X=Or(X):(X=nr(h)?oo:Dn.current,X=xl(l,X));var ae=h.getDerivedStateFromProps,ce=typeof ae=="function"||typeof A.getSnapshotBeforeUpdate=="function";ce||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(F!==p||B!==X)&&yb(l,A,p,X),la=!1;var ie=l.memoizedState;A.state=ie,jh(l,p,A,v),B=l.memoizedState,F!==p||ie!==B||tr.current||la?(typeof ae=="function"&&(tg(l,h,ae,p),B=l.memoizedState),(F=la||pb(l,h,F,p,ie,B,X))?(ce||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=B),A.props=p,A.state=B,A.context=X,p=F):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{A=l.stateNode,qw(i,l),F=l.memoizedProps,X=l.type===l.elementType?F:rs(l.type,F),A.props=X,ce=l.pendingProps,ie=A.context,B=h.contextType,typeof B=="object"&&B!==null?B=Or(B):(B=nr(h)?oo:Dn.current,B=xl(l,B));var xe=h.getDerivedStateFromProps;(ae=typeof xe=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(F!==ce||ie!==B)&&yb(l,A,p,B),la=!1,ie=l.memoizedState,A.state=ie,jh(l,p,A,v);var Se=l.memoizedState;F!==ce||ie!==Se||tr.current||la?(typeof xe=="function"&&(tg(l,h,xe,p),Se=l.memoizedState),(X=la||pb(l,h,X,p,ie,Se,B)||!1)?(ae||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(p,Se,B),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(p,Se,B)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||F===i.memoizedProps&&ie===i.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&ie===i.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=Se),A.props=p,A.state=Se,A.context=B,p=X):(typeof A.componentDidUpdate!="function"||F===i.memoizedProps&&ie===i.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&ie===i.memoizedState||(l.flags|=1024),p=!1)}return ag(i,l,h,p,w,v)}function ag(i,l,h,p,v,w){kb(i,l);var A=(l.flags&128)!==0;if(!p&&!A)return v&&Pw(l,h,!1),yi(i,l,w);p=l.stateNode,NA.current=l;var F=A&&typeof h.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,i!==null&&A?(l.child=El(l,i.child,null,w),l.child=El(l,null,F,w)):Kn(i,l,F,w),l.memoizedState=p.state,v&&Pw(l,h,!0),l.child}function Ib(i){var l=i.stateNode;l.pendingContext?Aw(i,l.pendingContext,l.pendingContext!==l.context):l.context&&Aw(i,l.context,!1),zp(i,l.containerInfo)}function Cb(i,l,h,p,v){return _l(),Mp(v),l.flags|=256,Kn(i,l,h,p),l.child}var og={dehydrated:null,treeContext:null,retryLane:0};function lg(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ab(i,l,h){var p=l.pendingProps,v=Rt.current,w=!1,A=(l.flags&128)!==0,F;if((F=A)||(F=i!==null&&i.memoizedState===null?!1:(v&2)!==0),F?(w=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),wt(Rt,v&1),i===null)return Op(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(A=p.children,i=p.fallback,w?(p=l.mode,w=l.child,A={mode:"hidden",children:A},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=A):w=Yh(A,p,0,null),i=vo(i,p,h,null),w.return=l,i.return=l,w.sibling=i,l.child=w,l.child.memoizedState=lg(h),l.memoizedState=og,i):cg(l,A));if(v=i.memoizedState,v!==null&&(F=v.dehydrated,F!==null))return kA(i,l,A,p,F,v,h);if(w){w=p.fallback,A=l.mode,v=i.child,F=v.sibling;var B={mode:"hidden",children:p.children};return(A&1)===0&&l.child!==v?(p=l.child,p.childLanes=0,p.pendingProps=B,l.deletions=null):(p=pa(v,B),p.subtreeFlags=v.subtreeFlags&14680064),F!==null?w=pa(F,w):(w=vo(w,A,h,null),w.flags|=2),w.return=l,p.return=l,p.sibling=w,l.child=p,p=w,w=l.child,A=i.child.memoizedState,A=A===null?lg(h):{baseLanes:A.baseLanes|h,cachePool:null,transitions:A.transitions},w.memoizedState=A,w.childLanes=i.childLanes&~h,l.memoizedState=og,p}return w=i.child,i=w.sibling,p=pa(w,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=h),p.return=l,p.sibling=null,i!==null&&(h=l.deletions,h===null?(l.deletions=[i],l.flags|=16):h.push(i)),l.child=p,l.memoizedState=null,p}function cg(i,l){return l=Yh({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function Mh(i,l,h,p){return p!==null&&Mp(p),El(l,i.child,null,h),i=cg(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function kA(i,l,h,p,v,w,A){if(h)return l.flags&256?(l.flags&=-257,p=rg(Error(n(422))),Mh(i,l,A,p)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(w=p.fallback,v=l.mode,p=Yh({mode:"visible",children:p.children},v,0,null),w=vo(w,v,A,null),w.flags|=2,p.return=l,w.return=l,p.sibling=w,l.child=p,(l.mode&1)!==0&&El(l,i.child,null,A),l.child.memoizedState=lg(A),l.memoizedState=og,w);if((l.mode&1)===0)return Mh(i,l,A,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var F=p.dgst;return p=F,w=Error(n(419)),p=rg(w,p,void 0),Mh(i,l,A,p)}if(F=(A&i.childLanes)!==0,rr||F){if(p=mn,p!==null){switch(A&-A){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|A))!==0?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,pi(i,v),as(p,i,v,-1))}return Sg(),p=rg(Error(n(421))),Mh(i,l,A,p)}return v.data==="$?"?(l.flags|=128,l.child=i.child,l=UA.bind(null,i),v._reactRetry=l,null):(i=w.treeContext,wr=sa(v.nextSibling),xr=l,jt=!0,ns=null,i!==null&&(Pr[Dr++]=fi,Pr[Dr++]=mi,Pr[Dr++]=lo,fi=i.id,mi=i.overflow,lo=l),l=cg(l,p.children),l.flags|=4096,l)}function Rb(i,l,h){i.lanes|=l;var p=i.alternate;p!==null&&(p.lanes|=l),Up(i.return,l,h)}function ug(i,l,h,p,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:v}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=h,w.tailMode=v)}function Pb(i,l,h){var p=l.pendingProps,v=p.revealOrder,w=p.tail;if(Kn(i,l,p.children,h),p=Rt.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Rb(i,h,l);else if(i.tag===19)Rb(i,h,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(wt(Rt,p),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(h=l.child,v=null;h!==null;)i=h.alternate,i!==null&&Ih(i)===null&&(v=h),h=h.sibling;h=v,h===null?(v=l.child,l.child=null):(v=h.sibling,h.sibling=null),ug(l,!1,v,h,w);break;case"backwards":for(h=null,v=l.child,l.child=null;v!==null;){if(i=v.alternate,i!==null&&Ih(i)===null){l.child=v;break}i=v.sibling,v.sibling=h,h=v,v=i}ug(l,!0,h,null,w);break;case"together":ug(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Lh(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function yi(i,l,h){if(i!==null&&(l.dependencies=i.dependencies),mo|=l.lanes,(h&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,h=pa(i,i.pendingProps),l.child=h,h.return=l;i.sibling!==null;)i=i.sibling,h=h.sibling=pa(i,i.pendingProps),h.return=l;h.sibling=null}return l.child}function jA(i,l,h){switch(l.tag){case 3:Ib(l),_l();break;case 5:Kw(l);break;case 1:nr(l.type)&&xh(l);break;case 4:zp(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,v=l.memoizedProps.value;wt(Sh,p._currentValue),p._currentValue=v;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(wt(Rt,Rt.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?Ab(i,l,h):(wt(Rt,Rt.current&1),i=yi(i,l,h),i!==null?i.sibling:null);wt(Rt,Rt.current&1);break;case 19:if(p=(h&l.childLanes)!==0,(i.flags&128)!==0){if(p)return Pb(i,l,h);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),wt(Rt,Rt.current),p)break;return null;case 22:case 23:return l.lanes=0,Nb(i,l,h)}return yi(i,l,h)}var Db,dg,Ob,Mb;Db=function(i,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},dg=function(){},Ob=function(i,l,h,p){var v=i.memoizedProps;if(v!==p){i=l.stateNode,ho(Ms.current);var w=null;switch(h){case"input":v=ee(i,v),p=ee(i,p),w=[];break;case"select":v=he({},v,{value:void 0}),p=he({},p,{value:void 0}),w=[];break;case"textarea":v=Bt(i,v),p=Bt(i,p),w=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=gh)}er(h,p);var A;h=null;for(X in v)if(!p.hasOwnProperty(X)&&v.hasOwnProperty(X)&&v[X]!=null)if(X==="style"){var F=v[X];for(A in F)F.hasOwnProperty(A)&&(h||(h={}),h[A]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?w||(w=[]):(w=w||[]).push(X,null));for(X in p){var B=p[X];if(F=v?.[X],p.hasOwnProperty(X)&&B!==F&&(B!=null||F!=null))if(X==="style")if(F){for(A in F)!F.hasOwnProperty(A)||B&&B.hasOwnProperty(A)||(h||(h={}),h[A]="");for(A in B)B.hasOwnProperty(A)&&F[A]!==B[A]&&(h||(h={}),h[A]=B[A])}else h||(w||(w=[]),w.push(X,h)),h=B;else X==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,F=F?F.__html:void 0,B!=null&&F!==B&&(w=w||[]).push(X,B)):X==="children"?typeof B!="string"&&typeof B!="number"||(w=w||[]).push(X,""+B):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(B!=null&&X==="onScroll"&&Tt("scroll",i),w||F===B||(w=[])):(w=w||[]).push(X,B))}h&&(w=w||[]).push("style",h);var X=w;(l.updateQueue=X)&&(l.flags|=4)}},Mb=function(i,l,h,p){h!==p&&(l.flags|=4)};function Eu(i,l){if(!jt)switch(i.tailMode){case"hidden":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Mn(i){var l=i.alternate!==null&&i.alternate.child===i.child,h=0,p=0;if(l)for(var v=i.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=h,l}function IA(i,l,h){var p=l.pendingProps;switch(Pp(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(l),null;case 1:return nr(l.type)&&vh(),Mn(l),null;case 3:return p=l.stateNode,Nl(),St(tr),St(Dn),Hp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Eh(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ns!==null&&(_g(ns),ns=null))),dg(i,l),Mn(l),null;case 5:qp(l);var v=ho(vu.current);if(h=l.type,i!==null&&l.stateNode!=null)Ob(i,l,h,p,v),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(n(166));return Mn(l),null}if(i=ho(Ms.current),Eh(l)){p=l.stateNode,h=l.type;var w=l.memoizedProps;switch(p[Os]=l,p[fu]=w,i=(l.mode&1)!==0,h){case"dialog":Tt("cancel",p),Tt("close",p);break;case"iframe":case"object":case"embed":Tt("load",p);break;case"video":case"audio":for(v=0;v<uu.length;v++)Tt(uu[v],p);break;case"source":Tt("error",p);break;case"img":case"image":case"link":Tt("error",p),Tt("load",p);break;case"details":Tt("toggle",p);break;case"input":ge(p,w),Tt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},Tt("invalid",p);break;case"textarea":An(p,w),Tt("invalid",p)}er(h,w),v=null;for(var A in w)if(w.hasOwnProperty(A)){var F=w[A];A==="children"?typeof F=="string"?p.textContent!==F&&(w.suppressHydrationWarning!==!0&&ph(p.textContent,F,i),v=["children",F]):typeof F=="number"&&p.textContent!==""+F&&(w.suppressHydrationWarning!==!0&&ph(p.textContent,F,i),v=["children",""+F]):s.hasOwnProperty(A)&&F!=null&&A==="onScroll"&&Tt("scroll",p)}switch(h){case"input":vn(p),At(p,w,!0);break;case"textarea":vn(p),ht(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=gh)}p=v,l.updateQueue=p,p!==null&&(l.flags|=4)}else{A=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=zt(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=A.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=A.createElement(h,{is:p.is}):(i=A.createElement(h),h==="select"&&(A=i,p.multiple?A.multiple=!0:p.size&&(A.size=p.size))):i=A.createElementNS(i,h),i[Os]=l,i[fu]=p,Db(i,l,!1,!1),l.stateNode=i;e:{switch(A=Yi(h,p),h){case"dialog":Tt("cancel",i),Tt("close",i),v=p;break;case"iframe":case"object":case"embed":Tt("load",i),v=p;break;case"video":case"audio":for(v=0;v<uu.length;v++)Tt(uu[v],i);v=p;break;case"source":Tt("error",i),v=p;break;case"img":case"image":case"link":Tt("error",i),Tt("load",i),v=p;break;case"details":Tt("toggle",i),v=p;break;case"input":ge(i,p),v=ee(i,p),Tt("invalid",i);break;case"option":v=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},v=he({},p,{value:void 0}),Tt("invalid",i);break;case"textarea":An(i,p),v=Bt(i,p),Tt("invalid",i);break;default:v=p}er(h,v),F=v;for(w in F)if(F.hasOwnProperty(w)){var B=F[w];w==="style"?Ki(i,B):w==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Hi(i,B)):w==="children"?typeof B=="string"?(h!=="textarea"||B!=="")&&Zn(i,B):typeof B=="number"&&Zn(i,""+B):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?B!=null&&w==="onScroll"&&Tt("scroll",i):B!=null&&j(i,w,B,A))}switch(h){case"input":vn(i),At(i,p,!1);break;case"textarea":vn(i),ht(i);break;case"option":p.value!=null&&i.setAttribute("value",""+je(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?qn(i,!!p.multiple,w,!1):p.defaultValue!=null&&qn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=gh)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Mn(l),null;case 6:if(i&&l.stateNode!=null)Mb(i,l,i.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(n(166));if(h=ho(vu.current),ho(Ms.current),Eh(l)){if(p=l.stateNode,h=l.memoizedProps,p[Os]=l,(w=p.nodeValue!==h)&&(i=xr,i!==null))switch(i.tag){case 3:ph(p.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ph(p.nodeValue,h,(i.mode&1)!==0)}w&&(l.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[Os]=l,l.stateNode=p}return Mn(l),null;case 13:if(St(Rt),p=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(jt&&wr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Fw(),_l(),l.flags|=98560,w=!1;else if(w=Eh(l),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(n(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[Os]=l}else _l(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Mn(l),w=!1}else ns!==null&&(_g(ns),ns=null),w=!0;if(!w)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(Rt.current&1)!==0?sn===0&&(sn=3):Sg())),l.updateQueue!==null&&(l.flags|=4),Mn(l),null);case 4:return Nl(),dg(i,l),i===null&&du(l.stateNode.containerInfo),Mn(l),null;case 10:return Fp(l.type._context),Mn(l),null;case 17:return nr(l.type)&&vh(),Mn(l),null;case 19:if(St(Rt),w=l.memoizedState,w===null)return Mn(l),null;if(p=(l.flags&128)!==0,A=w.rendering,A===null)if(p)Eu(w,!1);else{if(sn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(A=Ih(i),A!==null){for(l.flags|=128,Eu(w,!1),p=A.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=h,h=l.child;h!==null;)w=h,i=p,w.flags&=14680066,A=w.alternate,A===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=A.childLanes,w.lanes=A.lanes,w.child=A.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=A.memoizedProps,w.memoizedState=A.memoizedState,w.updateQueue=A.updateQueue,w.type=A.type,i=A.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return wt(Rt,Rt.current&1|2),l.child}i=i.sibling}w.tail!==null&&Et()>Cl&&(l.flags|=128,p=!0,Eu(w,!1),l.lanes=4194304)}else{if(!p)if(i=Ih(A),i!==null){if(l.flags|=128,p=!0,h=i.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Eu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!A.alternate&&!jt)return Mn(l),null}else 2*Et()-w.renderingStartTime>Cl&&h!==1073741824&&(l.flags|=128,p=!0,Eu(w,!1),l.lanes=4194304);w.isBackwards?(A.sibling=l.child,l.child=A):(h=w.last,h!==null?h.sibling=A:l.child=A,w.last=A)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=Et(),l.sibling=null,h=Rt.current,wt(Rt,p?h&1|2:h&1),l):(Mn(l),null);case 22:case 23:return Tg(),p=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(br&1073741824)!==0&&(Mn(l),l.subtreeFlags&6&&(l.flags|=8192)):Mn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function CA(i,l){switch(Pp(l),l.tag){case 1:return nr(l.type)&&vh(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Nl(),St(tr),St(Dn),Hp(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return qp(l),null;case 13:if(St(Rt),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));_l()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return St(Rt),null;case 4:return Nl(),null;case 10:return Fp(l.type._context),null;case 22:case 23:return Tg(),null;case 24:return null;default:return null}}var Vh=!1,Ln=!1,AA=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function jl(i,l){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){Ft(i,l,p)}else h.current=null}function hg(i,l,h){try{h()}catch(p){Ft(i,l,p)}}var Lb=!1;function RA(i,l){if(Tp=li,i=pw(),gp(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var v=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break e}var A=0,F=-1,B=-1,X=0,ae=0,ce=i,ie=null;t:for(;;){for(var xe;ce!==h||v!==0&&ce.nodeType!==3||(F=A+v),ce!==w||p!==0&&ce.nodeType!==3||(B=A+p),ce.nodeType===3&&(A+=ce.nodeValue.length),(xe=ce.firstChild)!==null;)ie=ce,ce=xe;for(;;){if(ce===i)break t;if(ie===h&&++X===v&&(F=A),ie===w&&++ae===p&&(B=A),(xe=ce.nextSibling)!==null)break;ce=ie,ie=ce.parentNode}ce=xe}h=F===-1||B===-1?null:{start:F,end:B}}else h=null}h=h||{start:0,end:0}}else h=null;for(Sp={focusedElem:i,selectionRange:h},li=!1,Ee=l;Ee!==null;)if(l=Ee,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Ee=i;else for(;Ee!==null;){l=Ee;try{var Se=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ie=Se.memoizedProps,Ht=Se.memoizedState,K=l.stateNode,W=K.getSnapshotBeforeUpdate(l.elementType===l.type?Ie:rs(l.type,Ie),Ht);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=l.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(fe){Ft(l,l.return,fe)}if(i=l.sibling,i!==null){i.return=l.return,Ee=i;break}Ee=l.return}return Se=Lb,Lb=!1,Se}function Tu(i,l,h){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&i)===i){var w=v.destroy;v.destroy=void 0,w!==void 0&&hg(l,h,w)}v=v.next}while(v!==p)}}function Fh(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&i)===i){var p=h.create;h.destroy=p()}h=h.next}while(h!==l)}}function fg(i){var l=i.ref;if(l!==null){var h=i.stateNode;switch(i.tag){case 5:i=h;break;default:i=h}typeof l=="function"?l(i):l.current=i}}function Vb(i){var l=i.alternate;l!==null&&(i.alternate=null,Vb(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[Os],delete l[fu],delete l[Ip],delete l[mA],delete l[pA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Fb(i){return i.tag===5||i.tag===3||i.tag===4}function Ub(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Fb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function mg(i,l,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(i,l):h.insertBefore(i,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(i,h)):(l=h,l.appendChild(i)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=gh));else if(p!==4&&(i=i.child,i!==null))for(mg(i,l,h),i=i.sibling;i!==null;)mg(i,l,h),i=i.sibling}function pg(i,l,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,l?h.insertBefore(i,l):h.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(pg(i,l,h),i=i.sibling;i!==null;)pg(i,l,h),i=i.sibling}var bn=null,ss=!1;function ua(i,l,h){for(h=h.child;h!==null;)$b(i,l,h),h=h.sibling}function $b(i,l,h){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Ja,h)}catch{}switch(h.tag){case 5:Ln||jl(h,l);case 6:var p=bn,v=ss;bn=null,ua(i,l,h),bn=p,ss=v,bn!==null&&(ss?(i=bn,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):bn.removeChild(h.stateNode));break;case 18:bn!==null&&(ss?(i=bn,h=h.stateNode,i.nodeType===8?jp(i.parentNode,h):i.nodeType===1&&jp(i,h),ea(i)):jp(bn,h.stateNode));break;case 4:p=bn,v=ss,bn=h.stateNode.containerInfo,ss=!0,ua(i,l,h),bn=p,ss=v;break;case 0:case 11:case 14:case 15:if(!Ln&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var w=v,A=w.destroy;w=w.tag,A!==void 0&&((w&2)!==0||(w&4)!==0)&&hg(h,l,A),v=v.next}while(v!==p)}ua(i,l,h);break;case 1:if(!Ln&&(jl(h,l),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(F){Ft(h,l,F)}ua(i,l,h);break;case 21:ua(i,l,h);break;case 22:h.mode&1?(Ln=(p=Ln)||h.memoizedState!==null,ua(i,l,h),Ln=p):ua(i,l,h);break;default:ua(i,l,h)}}function Bb(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new AA),l.forEach(function(p){var v=$A.bind(null,i,p);h.has(p)||(h.add(p),p.then(v,v))})}}function is(i,l){var h=l.deletions;if(h!==null)for(var p=0;p<h.length;p++){var v=h[p];try{var w=i,A=l,F=A;e:for(;F!==null;){switch(F.tag){case 5:bn=F.stateNode,ss=!1;break e;case 3:bn=F.stateNode.containerInfo,ss=!0;break e;case 4:bn=F.stateNode.containerInfo,ss=!0;break e}F=F.return}if(bn===null)throw Error(n(160));$b(w,A,v),bn=null,ss=!1;var B=v.alternate;B!==null&&(B.return=null),v.return=null}catch(X){Ft(v,l,X)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)zb(l,i),l=l.sibling}function zb(i,l){var h=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(is(l,i),Vs(i),p&4){try{Tu(3,i,i.return),Fh(3,i)}catch(Ie){Ft(i,i.return,Ie)}try{Tu(5,i,i.return)}catch(Ie){Ft(i,i.return,Ie)}}break;case 1:is(l,i),Vs(i),p&512&&h!==null&&jl(h,h.return);break;case 5:if(is(l,i),Vs(i),p&512&&h!==null&&jl(h,h.return),i.flags&32){var v=i.stateNode;try{Zn(v,"")}catch(Ie){Ft(i,i.return,Ie)}}if(p&4&&(v=i.stateNode,v!=null)){var w=i.memoizedProps,A=h!==null?h.memoizedProps:w,F=i.type,B=i.updateQueue;if(i.updateQueue=null,B!==null)try{F==="input"&&w.type==="radio"&&w.name!=null&&Ve(v,w),Yi(F,A);var X=Yi(F,w);for(A=0;A<B.length;A+=2){var ae=B[A],ce=B[A+1];ae==="style"?Ki(v,ce):ae==="dangerouslySetInnerHTML"?Hi(v,ce):ae==="children"?Zn(v,ce):j(v,ae,ce,X)}switch(F){case"input":lt(v,w);break;case"textarea":qi(v,w);break;case"select":var ie=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var xe=w.value;xe!=null?qn(v,!!w.multiple,xe,!1):ie!==!!w.multiple&&(w.defaultValue!=null?qn(v,!!w.multiple,w.defaultValue,!0):qn(v,!!w.multiple,w.multiple?[]:"",!1))}v[fu]=w}catch(Ie){Ft(i,i.return,Ie)}}break;case 6:if(is(l,i),Vs(i),p&4){if(i.stateNode===null)throw Error(n(162));v=i.stateNode,w=i.memoizedProps;try{v.nodeValue=w}catch(Ie){Ft(i,i.return,Ie)}}break;case 3:if(is(l,i),Vs(i),p&4&&h!==null&&h.memoizedState.isDehydrated)try{ea(l.containerInfo)}catch(Ie){Ft(i,i.return,Ie)}break;case 4:is(l,i),Vs(i);break;case 13:is(l,i),Vs(i),v=i.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(vg=Et())),p&4&&Bb(i);break;case 22:if(ae=h!==null&&h.memoizedState!==null,i.mode&1?(Ln=(X=Ln)||ae,is(l,i),Ln=X):is(l,i),Vs(i),p&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!ae&&(i.mode&1)!==0)for(Ee=i,ae=i.child;ae!==null;){for(ce=Ee=ae;Ee!==null;){switch(ie=Ee,xe=ie.child,ie.tag){case 0:case 11:case 14:case 15:Tu(4,ie,ie.return);break;case 1:jl(ie,ie.return);var Se=ie.stateNode;if(typeof Se.componentWillUnmount=="function"){p=ie,h=ie.return;try{l=p,Se.props=l.memoizedProps,Se.state=l.memoizedState,Se.componentWillUnmount()}catch(Ie){Ft(p,h,Ie)}}break;case 5:jl(ie,ie.return);break;case 22:if(ie.memoizedState!==null){Hb(ce);continue}}xe!==null?(xe.return=ie,Ee=xe):Hb(ce)}ae=ae.sibling}e:for(ae=null,ce=i;;){if(ce.tag===5){if(ae===null){ae=ce;try{v=ce.stateNode,X?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(F=ce.stateNode,B=ce.memoizedProps.style,A=B!=null&&B.hasOwnProperty("display")?B.display:null,F.style.display=_s("display",A))}catch(Ie){Ft(i,i.return,Ie)}}}else if(ce.tag===6){if(ae===null)try{ce.stateNode.nodeValue=X?"":ce.memoizedProps}catch(Ie){Ft(i,i.return,Ie)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===i)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===i)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===i)break e;ae===ce&&(ae=null),ce=ce.return}ae===ce&&(ae=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:is(l,i),Vs(i),p&4&&Bb(i);break;case 21:break;default:is(l,i),Vs(i)}}function Vs(i){var l=i.flags;if(l&2){try{e:{for(var h=i.return;h!==null;){if(Fb(h)){var p=h;break e}h=h.return}throw Error(n(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(Zn(v,""),p.flags&=-33);var w=Ub(i);pg(i,w,v);break;case 3:case 4:var A=p.stateNode.containerInfo,F=Ub(i);mg(i,F,A);break;default:throw Error(n(161))}}catch(B){Ft(i,i.return,B)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function PA(i,l,h){Ee=i,qb(i)}function qb(i,l,h){for(var p=(i.mode&1)!==0;Ee!==null;){var v=Ee,w=v.child;if(v.tag===22&&p){var A=v.memoizedState!==null||Vh;if(!A){var F=v.alternate,B=F!==null&&F.memoizedState!==null||Ln;F=Vh;var X=Ln;if(Vh=A,(Ln=B)&&!X)for(Ee=v;Ee!==null;)A=Ee,B=A.child,A.tag===22&&A.memoizedState!==null?Kb(v):B!==null?(B.return=A,Ee=B):Kb(v);for(;w!==null;)Ee=w,qb(w),w=w.sibling;Ee=v,Vh=F,Ln=X}Wb(i)}else(v.subtreeFlags&8772)!==0&&w!==null?(w.return=v,Ee=w):Wb(i)}}function Wb(i){for(;Ee!==null;){var l=Ee;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ln||Fh(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Ln)if(h===null)p.componentDidMount();else{var v=l.elementType===l.type?h.memoizedProps:rs(l.type,h.memoizedProps);p.componentDidUpdate(v,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&Hw(l,w,p);break;case 3:var A=l.updateQueue;if(A!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}Hw(l,A,h)}break;case 5:var F=l.stateNode;if(h===null&&l.flags&4){h=F;var B=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&h.focus();break;case"img":B.src&&(h.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var X=l.alternate;if(X!==null){var ae=X.memoizedState;if(ae!==null){var ce=ae.dehydrated;ce!==null&&ea(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ln||l.flags&512&&fg(l)}catch(ie){Ft(l,l.return,ie)}}if(l===i){Ee=null;break}if(h=l.sibling,h!==null){h.return=l.return,Ee=h;break}Ee=l.return}}function Hb(i){for(;Ee!==null;){var l=Ee;if(l===i){Ee=null;break}var h=l.sibling;if(h!==null){h.return=l.return,Ee=h;break}Ee=l.return}}function Kb(i){for(;Ee!==null;){var l=Ee;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Fh(4,l)}catch(B){Ft(l,h,B)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var v=l.return;try{p.componentDidMount()}catch(B){Ft(l,v,B)}}var w=l.return;try{fg(l)}catch(B){Ft(l,w,B)}break;case 5:var A=l.return;try{fg(l)}catch(B){Ft(l,A,B)}}}catch(B){Ft(l,l.return,B)}if(l===i){Ee=null;break}var F=l.sibling;if(F!==null){F.return=l.return,Ee=F;break}Ee=l.return}}var DA=Math.ceil,Uh=D.ReactCurrentDispatcher,gg=D.ReactCurrentOwner,Lr=D.ReactCurrentBatchConfig,ct=0,mn=null,Jt=null,_n=0,br=0,Il=ia(0),sn=0,Su=null,mo=0,$h=0,yg=0,Nu=null,sr=null,vg=0,Cl=1/0,vi=null,Bh=!1,xg=null,da=null,zh=!1,ha=null,qh=0,ku=0,wg=null,Wh=-1,Hh=0;function Gn(){return(ct&6)!==0?Et():Wh!==-1?Wh:Wh=Et()}function fa(i){return(i.mode&1)===0?1:(ct&2)!==0&&_n!==0?_n&-_n:yA.transition!==null?(Hh===0&&(Hh=Gc()),Hh):(i=st,i!==0||(i=window.event,i=i===void 0?16:il(i.type)),i)}function as(i,l,h,p){if(50<ku)throw ku=0,wg=null,Error(n(185));to(i,h,p),((ct&2)===0||i!==mn)&&(i===mn&&((ct&2)===0&&($h|=h),sn===4&&ma(i,_n)),ir(i,p),h===1&&ct===0&&(l.mode&1)===0&&(Cl=Et()+500,wh&&oa()))}function ir(i,l){var h=i.callbackNode;eo(i,l);var p=ii(i,i===mn?_n:0);if(p===0)h!==null&&Xo(h),i.callbackNode=null,i.callbackPriority=0;else if(l=p&-p,i.callbackPriority!==l){if(h!=null&&Xo(h),l===1)i.tag===0?gA(Yb.bind(null,i)):Dw(Yb.bind(null,i)),hA(function(){(ct&6)===0&&oa()}),h=null;else{switch(Ss(p)){case 1:h=Zo;break;case 4:h=Wc;break;case 16:h=Qa;break;case 536870912:h=el;break;default:h=Qa}h=r_(h,Gb.bind(null,i))}i.callbackPriority=l,i.callbackNode=h}}function Gb(i,l){if(Wh=-1,Hh=0,(ct&6)!==0)throw Error(n(327));var h=i.callbackNode;if(Al()&&i.callbackNode!==h)return null;var p=ii(i,i===mn?_n:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||l)l=Kh(i,p);else{l=p;var v=ct;ct|=2;var w=Jb();(mn!==i||_n!==l)&&(vi=null,Cl=Et()+500,go(i,l));do try{LA();break}catch(F){Qb(i,F)}while(!0);Vp(),Uh.current=w,ct=v,Jt!==null?l=0:(mn=null,_n=0,l=sn)}if(l!==0){if(l===2&&(v=Kc(i),v!==0&&(p=v,l=bg(i,v))),l===1)throw h=Su,go(i,0),ma(i,p),ir(i,Et()),h;if(l===6)ma(i,p);else{if(v=i.current.alternate,(p&30)===0&&!OA(v)&&(l=Kh(i,p),l===2&&(w=Kc(i),w!==0&&(p=w,l=bg(i,w))),l===1))throw h=Su,go(i,0),ma(i,p),ir(i,Et()),h;switch(i.finishedWork=v,i.finishedLanes=p,l){case 0:case 1:throw Error(n(345));case 2:yo(i,sr,vi);break;case 3:if(ma(i,p),(p&130023424)===p&&(l=vg+500-Et(),10<l)){if(ii(i,0)!==0)break;if(v=i.suspendedLanes,(v&p)!==p){Gn(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=kp(yo.bind(null,i,sr,vi),l);break}yo(i,sr,vi);break;case 4:if(ma(i,p),(p&4194240)===p)break;for(l=i.eventTimes,v=-1;0<p;){var A=31-mr(p);w=1<<A,A=l[A],A>v&&(v=A),p&=~w}if(p=v,p=Et()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*DA(p/1960))-p,10<p){i.timeoutHandle=kp(yo.bind(null,i,sr,vi),p);break}yo(i,sr,vi);break;case 5:yo(i,sr,vi);break;default:throw Error(n(329))}}}return ir(i,Et()),i.callbackNode===h?Gb.bind(null,i):null}function bg(i,l){var h=Nu;return i.current.memoizedState.isDehydrated&&(go(i,l).flags|=256),i=Kh(i,l),i!==2&&(l=sr,sr=h,l!==null&&_g(l)),i}function _g(i){sr===null?sr=i:sr.push.apply(sr,i)}function OA(i){for(var l=i;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var v=h[p],w=v.getSnapshot;v=v.value;try{if(!ts(w(),v))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ma(i,l){for(l&=~yg,l&=~$h,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var h=31-mr(l),p=1<<h;i[h]=-1,l&=~p}}function Yb(i){if((ct&6)!==0)throw Error(n(327));Al();var l=ii(i,0);if((l&1)===0)return ir(i,Et()),null;var h=Kh(i,l);if(i.tag!==0&&h===2){var p=Kc(i);p!==0&&(l=p,h=bg(i,p))}if(h===1)throw h=Su,go(i,0),ma(i,l),ir(i,Et()),h;if(h===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,yo(i,sr,vi),ir(i,Et()),null}function Eg(i,l){var h=ct;ct|=1;try{return i(l)}finally{ct=h,ct===0&&(Cl=Et()+500,wh&&oa())}}function po(i){ha!==null&&ha.tag===0&&(ct&6)===0&&Al();var l=ct;ct|=1;var h=Lr.transition,p=st;try{if(Lr.transition=null,st=1,i)return i()}finally{st=p,Lr.transition=h,ct=l,(ct&6)===0&&oa()}}function Tg(){br=Il.current,St(Il)}function go(i,l){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,dA(h)),Jt!==null)for(h=Jt.return;h!==null;){var p=h;switch(Pp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&vh();break;case 3:Nl(),St(tr),St(Dn),Hp();break;case 5:qp(p);break;case 4:Nl();break;case 13:St(Rt);break;case 19:St(Rt);break;case 10:Fp(p.type._context);break;case 22:case 23:Tg()}h=h.return}if(mn=i,Jt=i=pa(i.current,null),_n=br=l,sn=0,Su=null,yg=$h=mo=0,sr=Nu=null,uo!==null){for(l=0;l<uo.length;l++)if(h=uo[l],p=h.interleaved,p!==null){h.interleaved=null;var v=p.next,w=h.pending;if(w!==null){var A=w.next;w.next=v,p.next=A}h.pending=p}uo=null}return i}function Qb(i,l){do{var h=Jt;try{if(Vp(),Ch.current=Dh,Ah){for(var p=Pt.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Ah=!1}if(fo=0,fn=rn=Pt=null,xu=!1,wu=0,gg.current=null,h===null||h.return===null){sn=1,Su=l,Jt=null;break}e:{var w=i,A=h.return,F=h,B=l;if(l=_n,F.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var X=B,ae=F,ce=ae.tag;if((ae.mode&1)===0&&(ce===0||ce===11||ce===15)){var ie=ae.alternate;ie?(ae.updateQueue=ie.updateQueue,ae.memoizedState=ie.memoizedState,ae.lanes=ie.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var xe=bb(A);if(xe!==null){xe.flags&=-257,_b(xe,A,F,w,l),xe.mode&1&&wb(w,X,l),l=xe,B=X;var Se=l.updateQueue;if(Se===null){var Ie=new Set;Ie.add(B),l.updateQueue=Ie}else Se.add(B);break e}else{if((l&1)===0){wb(w,X,l),Sg();break e}B=Error(n(426))}}else if(jt&&F.mode&1){var Ht=bb(A);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),_b(Ht,A,F,w,l),Mp(kl(B,F));break e}}w=B=kl(B,F),sn!==4&&(sn=2),Nu===null?Nu=[w]:Nu.push(w),w=A;do{switch(w.tag){case 3:w.flags|=65536,l&=-l,w.lanes|=l;var K=vb(w,B,l);Ww(w,K);break e;case 1:F=B;var W=w.type,Y=w.stateNode;if((w.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(da===null||!da.has(Y)))){w.flags|=65536,l&=-l,w.lanes|=l;var fe=xb(w,F,l);Ww(w,fe);break e}}w=w.return}while(w!==null)}Zb(h)}catch(Ce){l=Ce,Jt===h&&h!==null&&(Jt=h=h.return);continue}break}while(!0)}function Jb(){var i=Uh.current;return Uh.current=Dh,i===null?Dh:i}function Sg(){(sn===0||sn===3||sn===2)&&(sn=4),mn===null||(mo&268435455)===0&&($h&268435455)===0||ma(mn,_n)}function Kh(i,l){var h=ct;ct|=2;var p=Jb();(mn!==i||_n!==l)&&(vi=null,go(i,l));do try{MA();break}catch(v){Qb(i,v)}while(!0);if(Vp(),ct=h,Uh.current=p,Jt!==null)throw Error(n(261));return mn=null,_n=0,sn}function MA(){for(;Jt!==null;)Xb(Jt)}function LA(){for(;Jt!==null&&!Ya();)Xb(Jt)}function Xb(i){var l=n_(i.alternate,i,br);i.memoizedProps=i.pendingProps,l===null?Zb(i):Jt=l,gg.current=null}function Zb(i){var l=i;do{var h=l.alternate;if(i=l.return,(l.flags&32768)===0){if(h=IA(h,l,br),h!==null){Jt=h;return}}else{if(h=CA(h,l),h!==null){h.flags&=32767,Jt=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{sn=6,Jt=null;return}}if(l=l.sibling,l!==null){Jt=l;return}Jt=l=i}while(l!==null);sn===0&&(sn=5)}function yo(i,l,h){var p=st,v=Lr.transition;try{Lr.transition=null,st=1,VA(i,l,h,p)}finally{Lr.transition=v,st=p}return null}function VA(i,l,h,p){do Al();while(ha!==null);if((ct&6)!==0)throw Error(n(327));h=i.finishedWork;var v=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var w=h.lanes|h.childLanes;if(dp(i,w),i===mn&&(Jt=mn=null,_n=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||zh||(zh=!0,r_(Qa,function(){return Al(),null})),w=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||w){w=Lr.transition,Lr.transition=null;var A=st;st=1;var F=ct;ct|=4,gg.current=null,RA(i,h),zb(h,i),sA(Sp),li=!!Tp,Sp=Tp=null,i.current=h,PA(h),si(),ct=F,st=A,Lr.transition=w}else i.current=h;if(zh&&(zh=!1,ha=i,qh=v),w=i.pendingLanes,w===0&&(da=null),eh(h.stateNode),ir(i,Et()),l!==null)for(p=i.onRecoverableError,h=0;h<l.length;h++)v=l[h],p(v.value,{componentStack:v.stack,digest:v.digest});if(Bh)throw Bh=!1,i=xg,xg=null,i;return(qh&1)!==0&&i.tag!==0&&Al(),w=i.pendingLanes,(w&1)!==0?i===wg?ku++:(ku=0,wg=i):ku=0,oa(),null}function Al(){if(ha!==null){var i=Ss(qh),l=Lr.transition,h=st;try{if(Lr.transition=null,st=16>i?16:i,ha===null)var p=!1;else{if(i=ha,ha=null,qh=0,(ct&6)!==0)throw Error(n(331));var v=ct;for(ct|=4,Ee=i.current;Ee!==null;){var w=Ee,A=w.child;if((Ee.flags&16)!==0){var F=w.deletions;if(F!==null){for(var B=0;B<F.length;B++){var X=F[B];for(Ee=X;Ee!==null;){var ae=Ee;switch(ae.tag){case 0:case 11:case 15:Tu(8,ae,w)}var ce=ae.child;if(ce!==null)ce.return=ae,Ee=ce;else for(;Ee!==null;){ae=Ee;var ie=ae.sibling,xe=ae.return;if(Vb(ae),ae===X){Ee=null;break}if(ie!==null){ie.return=xe,Ee=ie;break}Ee=xe}}}var Se=w.alternate;if(Se!==null){var Ie=Se.child;if(Ie!==null){Se.child=null;do{var Ht=Ie.sibling;Ie.sibling=null,Ie=Ht}while(Ie!==null)}}Ee=w}}if((w.subtreeFlags&2064)!==0&&A!==null)A.return=w,Ee=A;else e:for(;Ee!==null;){if(w=Ee,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Tu(9,w,w.return)}var K=w.sibling;if(K!==null){K.return=w.return,Ee=K;break e}Ee=w.return}}var W=i.current;for(Ee=W;Ee!==null;){A=Ee;var Y=A.child;if((A.subtreeFlags&2064)!==0&&Y!==null)Y.return=A,Ee=Y;else e:for(A=W;Ee!==null;){if(F=Ee,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Fh(9,F)}}catch(Ce){Ft(F,F.return,Ce)}if(F===A){Ee=null;break e}var fe=F.sibling;if(fe!==null){fe.return=F.return,Ee=fe;break e}Ee=F.return}}if(ct=v,oa(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Ja,i)}catch{}p=!0}return p}finally{st=h,Lr.transition=l}}return!1}function e_(i,l,h){l=kl(h,l),l=vb(i,l,1),i=ca(i,l,1),l=Gn(),i!==null&&(to(i,1,l),ir(i,l))}function Ft(i,l,h){if(i.tag===3)e_(i,i,h);else for(;l!==null;){if(l.tag===3){e_(l,i,h);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(da===null||!da.has(p))){i=kl(h,i),i=xb(l,i,1),l=ca(l,i,1),i=Gn(),l!==null&&(to(l,1,i),ir(l,i));break}}l=l.return}}function FA(i,l,h){var p=i.pingCache;p!==null&&p.delete(l),l=Gn(),i.pingedLanes|=i.suspendedLanes&h,mn===i&&(_n&h)===h&&(sn===4||sn===3&&(_n&130023424)===_n&&500>Et()-vg?go(i,0):yg|=h),ir(i,l)}function t_(i,l){l===0&&((i.mode&1)===0?l=1:(l=Ji,Ji<<=1,(Ji&130023424)===0&&(Ji=4194304)));var h=Gn();i=pi(i,l),i!==null&&(to(i,l,h),ir(i,h))}function UA(i){var l=i.memoizedState,h=0;l!==null&&(h=l.retryLane),t_(i,h)}function $A(i,l){var h=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(h=v.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(l),t_(i,h)}var n_;n_=function(i,l,h){if(i!==null)if(i.memoizedProps!==l.pendingProps||tr.current)rr=!0;else{if((i.lanes&h)===0&&(l.flags&128)===0)return rr=!1,jA(i,l,h);rr=(i.flags&131072)!==0}else rr=!1,jt&&(l.flags&1048576)!==0&&Ow(l,_h,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Lh(i,l),i=l.pendingProps;var v=xl(l,Dn.current);Sl(l,h),v=Yp(null,l,p,i,v,h);var w=Qp();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,nr(p)?(w=!0,xh(l)):w=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Bp(l),v.updater=Oh,l.stateNode=v,v._reactInternals=l,ng(l,p,i,h),l=ag(null,l,p,!0,w,h)):(l.tag=0,jt&&w&&Rp(l),Kn(null,l,v,h),l=l.child),l;case 16:p=l.elementType;e:{switch(Lh(i,l),i=l.pendingProps,v=p._init,p=v(p._payload),l.type=p,v=l.tag=zA(p),i=rs(p,i),v){case 0:l=ig(null,l,p,i,h);break e;case 1:l=jb(null,l,p,i,h);break e;case 11:l=Eb(null,l,p,i,h);break e;case 14:l=Tb(null,l,p,rs(p.type,i),h);break e}throw Error(n(306,p,""))}return l;case 0:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:rs(p,v),ig(i,l,p,v,h);case 1:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:rs(p,v),jb(i,l,p,v,h);case 3:e:{if(Ib(l),i===null)throw Error(n(387));p=l.pendingProps,w=l.memoizedState,v=w.element,qw(i,l),jh(l,p,null,h);var A=l.memoizedState;if(p=A.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){v=kl(Error(n(423)),l),l=Cb(i,l,p,h,v);break e}else if(p!==v){v=kl(Error(n(424)),l),l=Cb(i,l,p,h,v);break e}else for(wr=sa(l.stateNode.containerInfo.firstChild),xr=l,jt=!0,ns=null,h=Bw(l,null,p,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(_l(),p===v){l=yi(i,l,h);break e}Kn(i,l,p,h)}l=l.child}return l;case 5:return Kw(l),i===null&&Op(l),p=l.type,v=l.pendingProps,w=i!==null?i.memoizedProps:null,A=v.children,Np(p,v)?A=null:w!==null&&Np(p,w)&&(l.flags|=32),kb(i,l),Kn(i,l,A,h),l.child;case 6:return i===null&&Op(l),null;case 13:return Ab(i,l,h);case 4:return zp(l,l.stateNode.containerInfo),p=l.pendingProps,i===null?l.child=El(l,null,p,h):Kn(i,l,p,h),l.child;case 11:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:rs(p,v),Eb(i,l,p,v,h);case 7:return Kn(i,l,l.pendingProps,h),l.child;case 8:return Kn(i,l,l.pendingProps.children,h),l.child;case 12:return Kn(i,l,l.pendingProps.children,h),l.child;case 10:e:{if(p=l.type._context,v=l.pendingProps,w=l.memoizedProps,A=v.value,wt(Sh,p._currentValue),p._currentValue=A,w!==null)if(ts(w.value,A)){if(w.children===v.children&&!tr.current){l=yi(i,l,h);break e}}else for(w=l.child,w!==null&&(w.return=l);w!==null;){var F=w.dependencies;if(F!==null){A=w.child;for(var B=F.firstContext;B!==null;){if(B.context===p){if(w.tag===1){B=gi(-1,h&-h),B.tag=2;var X=w.updateQueue;if(X!==null){X=X.shared;var ae=X.pending;ae===null?B.next=B:(B.next=ae.next,ae.next=B),X.pending=B}}w.lanes|=h,B=w.alternate,B!==null&&(B.lanes|=h),Up(w.return,h,l),F.lanes|=h;break}B=B.next}}else if(w.tag===10)A=w.type===l.type?null:w.child;else if(w.tag===18){if(A=w.return,A===null)throw Error(n(341));A.lanes|=h,F=A.alternate,F!==null&&(F.lanes|=h),Up(A,h,l),A=w.sibling}else A=w.child;if(A!==null)A.return=w;else for(A=w;A!==null;){if(A===l){A=null;break}if(w=A.sibling,w!==null){w.return=A.return,A=w;break}A=A.return}w=A}Kn(i,l,v.children,h),l=l.child}return l;case 9:return v=l.type,p=l.pendingProps.children,Sl(l,h),v=Or(v),p=p(v),l.flags|=1,Kn(i,l,p,h),l.child;case 14:return p=l.type,v=rs(p,l.pendingProps),v=rs(p.type,v),Tb(i,l,p,v,h);case 15:return Sb(i,l,l.type,l.pendingProps,h);case 17:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:rs(p,v),Lh(i,l),l.tag=1,nr(p)?(i=!0,xh(l)):i=!1,Sl(l,h),gb(l,p,v),ng(l,p,v,h),ag(null,l,p,!0,i,h);case 19:return Pb(i,l,h);case 22:return Nb(i,l,h)}throw Error(n(156,l.tag))};function r_(i,l){return qc(i,l)}function BA(i,l,h,p){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(i,l,h,p){return new BA(i,l,h,p)}function Ng(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zA(i){if(typeof i=="function")return Ng(i)?1:0;if(i!=null){if(i=i.$$typeof,i===q)return 11;if(i===Q)return 14}return 2}function pa(i,l){var h=i.alternate;return h===null?(h=Vr(i.tag,l,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=l,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,l=i.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function Gh(i,l,h,p,v,w){var A=2;if(p=i,typeof i=="function")Ng(i)&&(A=1);else if(typeof i=="string")A=5;else e:switch(i){case P:return vo(h.children,v,w,l);case C:A=8,v|=8;break;case L:return i=Vr(12,h,l,v|2),i.elementType=L,i.lanes=w,i;case V:return i=Vr(13,h,l,v),i.elementType=V,i.lanes=w,i;case se:return i=Vr(19,h,l,v),i.elementType=se,i.lanes=w,i;case me:return Yh(h,v,w,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:A=10;break e;case $:A=9;break e;case q:A=11;break e;case Q:A=14;break e;case le:A=16,p=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return l=Vr(A,h,l,v),l.elementType=i,l.type=p,l.lanes=w,l}function vo(i,l,h,p){return i=Vr(7,i,p,l),i.lanes=h,i}function Yh(i,l,h,p){return i=Vr(22,i,p,l),i.elementType=me,i.lanes=h,i.stateNode={isHidden:!1},i}function kg(i,l,h){return i=Vr(6,i,null,l),i.lanes=h,i}function jg(i,l,h){return l=Vr(4,i.children!==null?i.children:[],i.key,l),l.lanes=h,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function qA(i,l,h,p,v){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yc(0),this.expirationTimes=Yc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yc(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Ig(i,l,h,p,v,w,A,F,B){return i=new qA(i,l,h,F,B),l===1?(l=1,w===!0&&(l|=8)):l=0,w=Vr(3,null,null,l),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bp(w),i}function WA(i,l,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:p==null?null:""+p,children:i,containerInfo:l,implementation:h}}function s_(i){if(!i)return aa;i=i._reactInternals;e:{if(Zr(i)!==i||i.tag!==1)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(nr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(i.tag===1){var h=i.type;if(nr(h))return Rw(i,h,l)}return l}function i_(i,l,h,p,v,w,A,F,B){return i=Ig(h,p,!0,i,v,w,A,F,B),i.context=s_(null),h=i.current,p=Gn(),v=fa(h),w=gi(p,v),w.callback=l??null,ca(h,w,v),i.current.lanes=v,to(i,v,p),ir(i,p),i}function Qh(i,l,h,p){var v=l.current,w=Gn(),A=fa(v);return h=s_(h),l.context===null?l.context=h:l.pendingContext=h,l=gi(w,A),l.payload={element:i},p=p===void 0?null:p,p!==null&&(l.callback=p),i=ca(v,l,A),i!==null&&(as(i,v,A,w),kh(i,v,A)),A}function Jh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function a_(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<l?h:l}}function Cg(i,l){a_(i,l),(i=i.alternate)&&a_(i,l)}function HA(){return null}var o_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Ag(i){this._internalRoot=i}Xh.prototype.render=Ag.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));Qh(i,l,null,null)},Xh.prototype.unmount=Ag.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;po(function(){Qh(null,i,null,null)}),l[di]=null}};function Xh(i){this._internalRoot=i}Xh.prototype.unstable_scheduleHydration=function(i){if(i){var l=Zc();i={blockedOn:null,target:i,priority:l};for(var h=0;h<pr.length&&l!==0&&l<pr[h].priority;h++);pr.splice(h,0,i),h===0&&rl(i)}};function Rg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Zh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function l_(){}function KA(i,l,h,p,v){if(v){if(typeof p=="function"){var w=p;p=function(){var X=Jh(A);w.call(X)}}var A=i_(l,p,i,0,null,!1,!1,"",l_);return i._reactRootContainer=A,i[di]=A.current,du(i.nodeType===8?i.parentNode:i),po(),A}for(;v=i.lastChild;)i.removeChild(v);if(typeof p=="function"){var F=p;p=function(){var X=Jh(B);F.call(X)}}var B=Ig(i,0,!1,null,null,!1,!1,"",l_);return i._reactRootContainer=B,i[di]=B.current,du(i.nodeType===8?i.parentNode:i),po(function(){Qh(l,B,h,p)}),B}function ef(i,l,h,p,v){var w=h._reactRootContainer;if(w){var A=w;if(typeof v=="function"){var F=v;v=function(){var B=Jh(A);F.call(B)}}Qh(l,A,i,v)}else A=KA(h,l,i,v,p);return Jh(A)}Jc=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var h=dt(l.pendingLanes);h!==0&&(Qc(l,h|1),ir(l,Et()),(ct&6)===0&&(Cl=Et()+500,oa()))}break;case 13:po(function(){var p=pi(i,1);if(p!==null){var v=Gn();as(p,i,1,v)}}),Cg(i,1)}},tl=function(i){if(i.tag===13){var l=pi(i,134217728);if(l!==null){var h=Gn();as(l,i,134217728,h)}Cg(i,134217728)}},Xc=function(i){if(i.tag===13){var l=fa(i),h=pi(i,l);if(h!==null){var p=Gn();as(h,i,l,p)}Cg(i,l)}},Zc=function(){return st},eu=function(i,l){var h=st;try{return st=i,l()}finally{st=h}},Jr=function(i,l,h){switch(l){case"input":if(lt(i,h),l=h.name,h.type==="radio"&&l!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var p=h[l];if(p!==i&&p.form===i.form){var v=yh(p);if(!v)throw Error(n(90));nn(p),lt(p,v)}}}break;case"textarea":qi(i,h);break;case"select":l=h.value,l!=null&&qn(i,!!h.multiple,l,!1)}},qt=Eg,dn=po;var GA={usingClientEntryPoint:!1,Events:[mu,yl,yh,Fe,gt,Eg]},ju={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YA={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zd(i),i===null?null:i.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||HA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{Ja=tf.inject(YA),fr=tf}catch{}}return ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GA,ar.createPortal=function(i,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rg(l))throw Error(n(200));return WA(i,l,null,h)},ar.createRoot=function(i,l){if(!Rg(i))throw Error(n(299));var h=!1,p="",v=o_;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=Ig(i,1,!1,null,null,h,!1,p,v),i[di]=l.current,du(i.nodeType===8?i.parentNode:i),new Ag(l)},ar.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Zd(l),i=i===null?null:i.stateNode,i},ar.flushSync=function(i){return po(i)},ar.hydrate=function(i,l,h){if(!Zh(l))throw Error(n(200));return ef(null,i,l,!0,h)},ar.hydrateRoot=function(i,l,h){if(!Rg(i))throw Error(n(405));var p=h!=null&&h.hydratedSources||null,v=!1,w="",A=o_;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(A=h.onRecoverableError)),l=i_(l,null,i,1,h??null,v,!1,w,A),i[di]=l.current,du(i),p)for(i=0;i<p.length;i++)h=p[i],v=h._getVersion,v=v(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,v]:l.mutableSourceEagerHydrationData.push(h,v);return new Xh(l)},ar.render=function(i,l,h){if(!Zh(l))throw Error(n(200));return ef(null,i,l,!1,h)},ar.unmountComponentAtNode=function(i){if(!Zh(i))throw Error(n(40));return i._reactRootContainer?(po(function(){ef(null,null,i,!1,function(){i._reactRootContainer=null,i[di]=null})}),!0):!1},ar.unstable_batchedUpdates=Eg,ar.unstable_renderSubtreeIntoContainer=function(i,l,h,p){if(!Zh(h))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return ef(i,l,h,!1,p)},ar.version="18.3.1-next-f1338f8080-20240426",ar}var g_;function TS(){if(g_)return Og.exports;g_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Og.exports=rR(),Og.exports}var y_;function sR(){if(y_)return nf;y_=1;var t=TS();return nf.createRoot=t.createRoot,nf.hydrateRoot=t.hydrateRoot,nf}var iR=sR(),E=nv();const de=ES(E),SS=JA({__proto__:null,default:de},[E]);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var v_="popstate";function aR(t={}){function e(r,s){let{pathname:a,search:o,hash:u}=r.location;return By("",{pathname:a,search:o,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:td(s)}return lR(e,n,null,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oR(){return Math.random().toString(36).substring(2,10)}function x_(t,e){return{usr:t.state,key:t.key,idx:e}}function By(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bc(e):e,state:n,key:e&&e.key||r||oR()}}function td({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function bc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function lR(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,u="POP",d=null,f=g();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function g(){return(o.state||{idx:null}).idx}function y(){u="POP";let _=g(),k=_==null?null:_-f;f=_,d&&d({action:u,location:N.location,delta:k})}function x(_,k){u="PUSH";let R=By(N.location,_,k);f=g()+1;let j=x_(R,f),D=N.createHref(R);try{o.pushState(j,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(D)}a&&d&&d({action:u,location:N.location,delta:1})}function T(_,k){u="REPLACE";let R=By(N.location,_,k);f=g();let j=x_(R,f),D=N.createHref(R);o.replaceState(j,"",D),a&&d&&d({action:u,location:N.location,delta:0})}function I(_){return cR(_)}let N={get action(){return u},get location(){return t(s,o)},listen(_){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(v_,y),d=_,()=>{s.removeEventListener(v_,y),d=null}},createHref(_){return e(s,_)},createURL:I,encodeLocation(_){let k=I(_);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:x,replace:T,go(_){return o.go(_)}};return N}function cR(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:td(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function NS(t,e,n="/"){return uR(t,e,n,!1)}function uR(t,e,n,r){let s=typeof e=="string"?bc(e):e,a=Ci(s.pathname||"/",n);if(a==null)return null;let o=kS(t);dR(o);let u=null;for(let d=0;u==null&&d<o.length;++d){let f=_R(a);u=wR(o[d],f,r)}return u}function kS(t,e=[],n=[],r="",s=!1){let a=(o,u,d=s,f)=>{let g={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;Ct(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=Ni([r,g.relativePath]),x=n.concat(g);o.children&&o.children.length>0&&(Ct(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),kS(o.children,e,x,y,d)),!(o.path==null&&!o.index)&&e.push({path:y,score:vR(y,o.index),routesMeta:x})};return t.forEach((o,u)=>{if(o.path===""||!o.path?.includes("?"))a(o,u);else for(let d of jS(o.path))a(o,u,!0,d)}),e}function jS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=jS(r.join("/")),u=[];return u.push(...o.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...o),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function dR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var hR=/^:[\w-]+$/,fR=3,mR=2,pR=1,gR=10,yR=-2,w_=t=>t==="*";function vR(t,e){let n=t.split("/"),r=n.length;return n.some(w_)&&(r+=yR),e&&(r+=mR),n.filter(s=>!w_(s)).reduce((s,a)=>s+(hR.test(a)?fR:a===""?pR:gR),r)}function xR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function wR(t,e,n=!1){let{routesMeta:r}=t,s={},a="/",o=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=Yf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),x=d.route;if(!y&&f&&n&&!r[r.length-1].route.index&&(y=Yf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),o.push({params:s,pathname:Ni([a,y.pathname]),pathnameBase:kR(Ni([a,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(a=Ni([a,y.pathnameBase]))}return o}function Yf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:y},x)=>{if(g==="*"){let I=u[x]||"";o=a.slice(0,a.length-I.length).replace(/(.)\/+$/,"$1")}const T=u[x];return y&&!T?f[g]=void 0:f[g]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:t}}function bR(t,e=!1,n=!0){jr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _R(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ci(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var ER=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TR=t=>ER.test(t);function SR(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?bc(t):t,a;if(n)if(TR(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),jr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=b_(n.substring(1),"/"):a=b_(n,e)}else a=e;return{pathname:a,search:jR(r),hash:IR(s)}}function b_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Vg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rv(t){let e=NR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function sv(t,e,n,r=!1){let s;typeof t=="string"?s=bc(t):(s={...t},Ct(!s.pathname||!s.pathname.includes("?"),Vg("?","pathname","search",s)),Ct(!s.pathname||!s.pathname.includes("#"),Vg("#","pathname","hash",s)),Ct(!s.search||!s.search.includes("#"),Vg("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,u;if(o==null)u=n;else{let y=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}u=y>=0?e[y]:"/"}let d=SR(s,u),f=o&&o!=="/"&&o.endsWith("/"),g=(a||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Ni=t=>t.join("/").replace(/\/\/+/g,"/"),kR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function AR(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var IS=["POST","PUT","PATCH","DELETE"];new Set(IS);var RR=["GET",...IS];new Set(RR);var _c=E.createContext(null);_c.displayName="DataRouter";var Rm=E.createContext(null);Rm.displayName="DataRouterState";E.createContext(!1);var CS=E.createContext({isTransitioning:!1});CS.displayName="ViewTransition";var PR=E.createContext(new Map);PR.displayName="Fetchers";var DR=E.createContext(null);DR.displayName="Await";var Kr=E.createContext(null);Kr.displayName="Navigation";var kd=E.createContext(null);kd.displayName="Location";var ti=E.createContext({outlet:null,matches:[],isDataRoute:!1});ti.displayName="Route";var iv=E.createContext(null);iv.displayName="RouteError";function OR(t,{relative:e}={}){Ct(Ec(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=E.useContext(Kr),{hash:s,pathname:a,search:o}=jd(t,{relative:e}),u=a;return n!=="/"&&(u=a==="/"?n:Ni([n,a])),r.createHref({pathname:u,search:o,hash:s})}function Ec(){return E.useContext(kd)!=null}function ur(){return Ct(Ec(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(kd).location}var AS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RS(t){E.useContext(Kr).static||E.useLayoutEffect(t)}function ni(){let{isDataRoute:t}=E.useContext(ti);return t?GR():MR()}function MR(){Ct(Ec(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(_c),{basename:e,navigator:n}=E.useContext(Kr),{matches:r}=E.useContext(ti),{pathname:s}=ur(),a=JSON.stringify(rv(r)),o=E.useRef(!1);return RS(()=>{o.current=!0}),E.useCallback((d,f={})=>{if(jr(o.current,AS),!o.current)return;if(typeof d=="number"){n.go(d);return}let g=sv(d,JSON.parse(a),s,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ni([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,a,s,t])}E.createContext(null);function jd(t,{relative:e}={}){let{matches:n}=E.useContext(ti),{pathname:r}=ur(),s=JSON.stringify(rv(n));return E.useMemo(()=>sv(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function LR(t,e){return PS(t,e)}function PS(t,e,n,r,s){Ct(Ec(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=E.useContext(Kr),{matches:o}=E.useContext(ti),u=o[o.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let R=y&&y.path||"";DS(f,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let x=ur(),T;if(e){let R=typeof e=="string"?bc(e):e;Ct(g==="/"||R.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${R.pathname}" was given in the \`location\` prop.`),T=R}else T=x;let I=T.pathname||"/",N=I;if(g!=="/"){let R=g.replace(/^\//,"").split("/");N="/"+I.replace(/^\//,"").split("/").slice(R.length).join("/")}let _=NS(t,{pathname:N});jr(y||_!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),jr(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=BR(_&&_.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:Ni([g,a.encodeLocation?a.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?g:Ni([g,a.encodeLocation?a.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),o,n,r,s);return e&&k?E.createElement(kd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},k):k}function VR(){let t=KR(),e=CR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:a},"ErrorBoundary")," or"," ",E.createElement("code",{style:a},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:s},n):null,o)}var FR=E.createElement(VR,null),UR=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?E.createElement(ti.Provider,{value:this.props.routeContext},E.createElement(iv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $R({routeContext:t,match:e,children:n}){let r=E.useContext(_c);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(ti.Provider,{value:t},n)}function BR(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let g=a.findIndex(y=>y.route.id&&o?.[y.route.id]!==void 0);Ct(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let u=!1,d=-1;if(n)for(let g=0;g<a.length;g++){let y=a[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:x,errors:T}=n,I=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||I){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let f=n&&r?(g,y)=>{r(g,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:AR(n.matches),errorInfo:y})}:void 0;return a.reduceRight((g,y,x)=>{let T,I=!1,N=null,_=null;n&&(T=o&&y.route.id?o[y.route.id]:void 0,N=y.route.errorElement||FR,u&&(d<0&&x===0?(DS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,_=null):d===x&&(I=!0,_=y.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,x+1)),R=()=>{let j;return T?j=N:I?j=_:y.route.Component?j=E.createElement(y.route.Component,null):y.route.element?j=y.route.element:j=g,E.createElement($R,{match:y,routeContext:{outlet:g,matches:k,isDataRoute:n!=null},children:j})};return n&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?E.createElement(UR,{location:n.location,revalidation:n.revalidation,component:N,error:T,children:R(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:f}):R()},null)}function av(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zR(t){let e=E.useContext(_c);return Ct(e,av(t)),e}function qR(t){let e=E.useContext(Rm);return Ct(e,av(t)),e}function WR(t){let e=E.useContext(ti);return Ct(e,av(t)),e}function ov(t){let e=WR(t),n=e.matches[e.matches.length-1];return Ct(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function HR(){return ov("useRouteId")}function KR(){let t=E.useContext(iv),e=qR("useRouteError"),n=ov("useRouteError");return t!==void 0?t:e.errors?.[n]}function GR(){let{router:t}=zR("useNavigate"),e=ov("useNavigate"),n=E.useRef(!1);return RS(()=>{n.current=!0}),E.useCallback(async(s,a={})=>{jr(n.current,AS),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var __={};function DS(t,e,n){!e&&!__[t]&&(__[t]=!0,jr(!1,n))}E.memo(YR);function YR({routes:t,future:e,state:n,unstable_onError:r}){return PS(t,void 0,n,r,e)}function zy({to:t,replace:e,state:n,relative:r}){Ct(Ec(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=E.useContext(Kr);jr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=E.useContext(ti),{pathname:o}=ur(),u=ni(),d=sv(t,rv(a),o,r==="path"),f=JSON.stringify(d);return E.useEffect(()=>{u(JSON.parse(f),{replace:e,state:n,relative:r})},[u,f,r,e,n]),null}function at(t){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:o}){Ct(!Ec(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:u,navigator:s,static:a,unstable_useTransitions:o,future:{}}),[u,s,a,o]);typeof n=="string"&&(n=bc(n));let{pathname:f="/",search:g="",hash:y="",state:x=null,key:T="default"}=n,I=E.useMemo(()=>{let N=Ci(f,u);return N==null?null:{location:{pathname:N,search:g,hash:y,state:x,key:T},navigationType:r}},[u,f,g,y,x,T,r]);return jr(I!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:E.createElement(Kr.Provider,{value:d},E.createElement(kd.Provider,{children:e,value:I}))}function JR({children:t,location:e}){return LR(qy(t),e)}function qy(t,e=[]){let n=[];return E.Children.forEach(t,(r,s)=>{if(!E.isValidElement(r))return;let a=[...e,s];if(r.type===E.Fragment){n.push.apply(n,qy(r.props.children,a));return}Ct(r.type===at,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qy(r.props.children,a)),n.push(o)}),n}var Af="get",Rf="application/x-www-form-urlencoded";function Pm(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function XR(t){return Pm(t)&&t.tagName.toLowerCase()==="button"}function ZR(t){return Pm(t)&&t.tagName.toLowerCase()==="form"}function eP(t){return Pm(t)&&t.tagName.toLowerCase()==="input"}function tP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nP(t,e){return t.button===0&&(!e||e==="_self")&&!tP(t)}function Wy(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function rP(t,e){let n=Wy(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}var rf=null;function sP(){if(rf===null)try{new FormData(document.createElement("form"),0),rf=!1}catch{rf=!0}return rf}var iP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fg(t){return t!=null&&!iP.has(t)?(jr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rf}"`),null):t}function aP(t,e){let n,r,s,a,o;if(ZR(t)){let u=t.getAttribute("action");r=u?Ci(u,e):null,n=t.getAttribute("method")||Af,s=Fg(t.getAttribute("enctype"))||Rf,a=new FormData(t)}else if(XR(t)||eP(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(r=d?Ci(d,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Af,s=Fg(t.getAttribute("formenctype"))||Fg(u.getAttribute("enctype"))||Rf,a=new FormData(u,t),!sP()){let{name:f,type:g,value:y}=t;if(g==="image"){let x=f?`${f}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else f&&a.append(f,y)}}else{if(Pm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Af,r=null,s=Rf,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function oP(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ci(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function lP(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function uP(t,e,n){let r=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await lP(a,n);return o.links?o.links():[]}return[]}));return mP(r.flat(1).filter(cP).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function E_(t,e,n,r,s,a){let o=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,f)=>o(d,f)||u(d,f)):a==="data"?e.filter((d,f)=>{let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(o(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function dP(t,e,{includeHydrateFallback:n}={}){return hP(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function hP(t){return[...new Set(t)]}function fP(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function mP(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let a=JSON.stringify(fP(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function OS(){let t=E.useContext(_c);return lv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function pP(){let t=E.useContext(Rm);return lv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cv=E.createContext(void 0);cv.displayName="FrameworkContext";function MS(){let t=E.useContext(cv);return lv(t,"You must render this element inside a <HydratedRouter> element"),t}function gP(t,e){let n=E.useContext(cv),[r,s]=E.useState(!1),[a,o]=E.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,x=E.useRef(null);E.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let N=k=>{k.forEach(R=>{o(R.isIntersecting)})},_=new IntersectionObserver(N,{threshold:.5});return x.current&&_.observe(x.current),()=>{_.disconnect()}}},[t]),E.useEffect(()=>{if(r){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[r]);let T=()=>{s(!0)},I=()=>{s(!1),o(!1)};return n?t!=="intent"?[a,x,{}]:[a,x,{onFocus:Cu(u,T),onBlur:Cu(d,I),onMouseEnter:Cu(f,T),onMouseLeave:Cu(g,I),onTouchStart:Cu(y,T)}]:[!1,x,{}]}function Cu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function yP({page:t,...e}){let{router:n}=OS(),r=E.useMemo(()=>NS(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?E.createElement(xP,{page:t,matches:r,...e}):null}function vP(t){let{manifest:e,routeModules:n}=MS(),[r,s]=E.useState([]);return E.useEffect(()=>{let a=!1;return uP(t,e,n).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,n]),r}function xP({page:t,matches:e,...n}){let r=ur(),{manifest:s,routeModules:a}=MS(),{basename:o}=OS(),{loaderData:u,matches:d}=pP(),f=E.useMemo(()=>E_(t,e,d,s,r,"data"),[t,e,d,s,r]),g=E.useMemo(()=>E_(t,e,d,s,r,"assets"),[t,e,d,s,r]),y=E.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let I=new Set,N=!1;if(e.forEach(k=>{let R=s.routes[k.route.id];!R||!R.hasLoader||(!f.some(j=>j.route.id===k.route.id)&&k.route.id in u&&a[k.route.id]?.shouldRevalidate||R.hasClientLoader?N=!0:I.add(k.route.id))}),I.size===0)return[];let _=oP(t,o,"data");return N&&I.size>0&&_.searchParams.set("_routes",e.filter(k=>I.has(k.route.id)).map(k=>k.route.id).join(",")),[_.pathname+_.search]},[o,u,r,s,f,e,t,a]),x=E.useMemo(()=>dP(g,s),[g,s]),T=vP(g);return E.createElement(E.Fragment,null,y.map(I=>E.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),x.map(I=>E.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),T.map(({key:I,link:N})=>E.createElement("link",{key:I,nonce:n.nonce,...N})))}function wP(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var LS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LS&&(window.__reactRouterVersion="7.10.1")}catch{}function bP({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=E.useRef();s.current==null&&(s.current=aR({window:r,v5Compat:!0}));let a=s.current,[o,u]=E.useState({action:a.action,location:a.location}),d=E.useCallback(f=>{n===!1?u(f):E.startTransition(()=>u(f))},[n]);return E.useLayoutEffect(()=>a.listen(d),[a,d]),E.createElement(QR,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n===!0})}var VS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ke=E.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:o,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...x},T){let{basename:I,unstable_useTransitions:N}=E.useContext(Kr),_=typeof f=="string"&&VS.test(f),k,R=!1;if(typeof f=="string"&&_&&(k=f,LS))try{let U=new URL(window.location.href),$=f.startsWith("//")?new URL(U.protocol+f):new URL(f),q=Ci($.pathname,I);$.origin===U.origin&&q!=null?f=q+$.search+$.hash:R=!0}catch{jr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=OR(f,{relative:s}),[D,M,z]=gP(r,x),P=SP(f,{replace:o,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_useTransitions:N});function C(U){e&&e(U),U.defaultPrevented||P(U)}let L=E.createElement("a",{...x,...z,href:k||j,onClick:R||a?e:C,ref:wP(T,M),target:d,"data-discover":!_&&n==="render"?"true":void 0});return D&&!_?E.createElement(E.Fragment,null,L,E.createElement(yP,{page:j})):L});Ke.displayName="Link";var _P=E.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:o,viewTransition:u,children:d,...f},g){let y=jd(o,{relative:f.relative}),x=ur(),T=E.useContext(Rm),{navigator:I,basename:N}=E.useContext(Kr),_=T!=null&&CP(y)&&u===!0,k=I.encodeLocation?I.encodeLocation(y).pathname:y.pathname,R=x.pathname,j=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(R=R.toLowerCase(),j=j?j.toLowerCase():null,k=k.toLowerCase()),j&&N&&(j=Ci(j,N)||j);const D=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let M=R===k||!s&&R.startsWith(k)&&R.charAt(D)==="/",z=j!=null&&(j===k||!s&&j.startsWith(k)&&j.charAt(k.length)==="/"),P={isActive:M,isPending:z,isTransitioning:_},C=M?e:void 0,L;typeof r=="function"?L=r(P):L=[r,M?"active":null,z?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let U=typeof a=="function"?a(P):a;return E.createElement(Ke,{...f,"aria-current":C,className:L,ref:g,style:U,to:o,viewTransition:u},typeof d=="function"?d(P):d)});_P.displayName="NavLink";var EP=E.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:a,method:o=Af,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...x},T)=>{let{unstable_useTransitions:I}=E.useContext(Kr),N=jP(),_=IP(u,{relative:f}),k=o.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&VS.test(u),j=D=>{if(d&&d(D),D.defaultPrevented)return;D.preventDefault();let M=D.nativeEvent.submitter,z=M?.getAttribute("formmethod")||o,P=()=>N(M||D.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:s,state:a,relative:f,preventScrollReset:g,viewTransition:y});I&&n!==!1?E.startTransition(()=>P()):P()};return E.createElement("form",{ref:T,method:k,action:_,onSubmit:r?d:j,...x,"data-discover":!R&&t==="render"?"true":void 0})});EP.displayName="Form";function TP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FS(t){let e=E.useContext(_c);return Ct(e,TP(t)),e}function SP(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:o,unstable_useTransitions:u}={}){let d=ni(),f=ur(),g=jd(t,{relative:a});return E.useCallback(y=>{if(nP(y,e)){y.preventDefault();let x=n!==void 0?n:td(f)===td(g),T=()=>d(t,{replace:x,state:r,preventScrollReset:s,relative:a,viewTransition:o});u?E.startTransition(()=>T()):T()}},[f,d,g,n,r,e,t,s,a,o,u])}function US(t){jr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=E.useRef(Wy(t)),n=E.useRef(!1),r=ur(),s=E.useMemo(()=>rP(r.search,n.current?null:e.current),[r.search]),a=ni(),o=E.useCallback((u,d)=>{const f=Wy(typeof u=="function"?u(new URLSearchParams(s)):u);n.current=!0,a("?"+f,d)},[a,s]);return[s,o]}var NP=0,kP=()=>`__${String(++NP)}__`;function jP(){let{router:t}=FS("useSubmit"),{basename:e}=E.useContext(Kr),n=HR(),r=t.fetch,s=t.navigate;return E.useCallback(async(a,o={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=aP(a,e);if(o.navigate===!1){let x=o.fetcherKey||kP();await r(x,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||f,flushSync:o.flushSync})}else await s(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function IP(t,{relative:e}={}){let{basename:n}=E.useContext(Kr),r=E.useContext(ti);Ct(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...jd(t||".",{relative:e})},o=ur();if(t==null){a.search=o.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();a.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ni([n,a.pathname])),td(a)}function CP(t,{relative:e}={}){let n=E.useContext(CS);Ct(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=FS("useViewTransitionState"),s=jd(t,{relative:e});if(!n.isTransitioning)return!1;let a=Ci(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ci(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Yf(s.pathname,o)!=null||Yf(s.pathname,a)!=null}var $S=TS();const BS=ES($S),AP=()=>{};var T_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},RP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],u=t[n++],d=((s&7)<<18|(a&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},qS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,u=o?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,g=a>>2,y=(a&3)<<4|u>>4;let x=(u&15)<<2|f>>6,T=f&63;d||(T=64,o||(x=64)),r.push(n[g],n[y],n[x],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||y==null)throw new PP;const x=a<<2|u>>4;if(r.push(x),f!==64){const T=u<<4&240|f>>2;if(r.push(T),y!==64){const I=f<<6&192|y;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DP=function(t){const e=zS(t);return qS.encodeByteArray(e,!0)},Qf=function(t){return DP(t).replace(/\./g,"")},WS=function(t){try{return qS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=()=>OP().__FIREBASE_DEFAULTS__,LP=()=>{if(typeof process>"u"||typeof T_>"u")return;const t=T_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WS(t[1]);return e&&JSON.parse(e)},Dm=()=>{try{return AP()||MP()||LP()||VP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},HS=t=>Dm()?.emulatorHosts?.[t],FP=t=>{const e=HS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},KS=()=>Dm()?.config,GS=t=>Dm()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UP=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function YS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Qf(JSON.stringify(n)),Qf(JSON.stringify(o)),""].join(".")}const $u={};function BP(){const t={prod:[],emulator:[]};for(const e of Object.keys($u))$u[e]?t.emulator.push(e):t.prod.push(e);return t}function zP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let S_=!1;function QS(t,e){if(typeof window>"u"||typeof document>"u"||!Tc(window.location.host)||$u[t]===e||$u[t]||S_)return;$u[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=BP().prod.length>0;function o(){const x=document.getElementById(r);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,T){x.setAttribute("width","24"),x.setAttribute("id",T),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{S_=!0,o()},x}function g(x,T){x.setAttribute("id",T),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=zP(r),T=n("text"),I=document.getElementById(T)||document.createElement("span"),N=n("learnmore"),_=document.getElementById(N)||document.createElement("a"),k=n("preprendIcon"),R=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const j=x.element;u(j),g(_,N);const D=f();d(R,k),j.append(R,I,_,D),document.body.appendChild(j)}a?(I.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function WP(){const t=Dm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GP(){const t=Bn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YP(){return!WP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XS(){try{return typeof indexedDB=="object"}catch{return!1}}function ZS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}function QP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="FirebaseError";class xs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=JP,Object.setPrototypeOf(this,xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wo.prototype.create)}}class Wo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?XP(a,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new xs(s,u,r)}}function XP(t,e){return t.replace(ZP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ZP=/\{\$([^}]+)}/g;function e4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ra(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(N_(a)&&N_(o)){if(!Ra(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function N_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Du(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function t4(t,e){const n=new n4(t,e);return n.subscribe.bind(n)}class n4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");r4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ug),s.error===void 0&&(s.error=Ug),s.complete===void 0&&(s.complete=Ug);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function r4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ug(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=1e3,i4=2,a4=14400*1e3,o4=.5;function k_(t,e=s4,n=i4){const r=e*Math.pow(n,t),s=Math.round(o4*r*(Math.random()-.5)*2);return Math.min(a4,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){return t&&t._delegate?t._delegate:t}class gs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u4(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c4(t){return t===Eo?void 0:t}function u4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const h4={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},f4=et.INFO,m4={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},p4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=m4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Om{constructor(e){this.name=e,this._logLevel=f4,this._logHandler=p4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const g4=(t,e)=>e.some(n=>t instanceof n);let j_,I_;function y4(){return j_||(j_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v4(){return I_||(I_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eN=new WeakMap,Hy=new WeakMap,tN=new WeakMap,$g=new WeakMap,uv=new WeakMap;function x4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(ja(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&eN.set(n,t)}).catch(()=>{}),uv.set(e,t),e}function w4(t){if(Hy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Hy.set(t,e)}let Ky={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ja(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function b4(t){Ky=t(Ky)}function _4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bg(this),e,...n);return tN.set(r,e.sort?e.sort():[e]),ja(r)}:v4().includes(t)?function(...e){return t.apply(Bg(this),e),ja(eN.get(this))}:function(...e){return ja(t.apply(Bg(this),e))}}function E4(t){return typeof t=="function"?_4(t):(t instanceof IDBTransaction&&w4(t),g4(t,y4())?new Proxy(t,Ky):t)}function ja(t){if(t instanceof IDBRequest)return x4(t);if($g.has(t))return $g.get(t);const e=E4(t);return e!==t&&($g.set(t,e),uv.set(e,t)),e}const Bg=t=>uv.get(t);function nN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),u=ja(o);return r&&o.addEventListener("upgradeneeded",d=>{r(ja(o.result),d.oldVersion,d.newVersion,ja(o.transaction),d)}),n&&o.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const T4=["get","getKey","getAll","getAllKeys","count"],S4=["put","add","delete","clear"],zg=new Map;function C_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zg.get(e))return zg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=S4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||T4.includes(n)))return;const a=async function(o,...u){const d=this.transaction(o,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&d.done]))[0]};return zg.set(e,a),a}b4(t=>({...t,get:(e,n,r)=>C_(e,n)||t.get(e,n,r),has:(e,n)=>!!C_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function k4(t){return t.getComponent()?.type==="VERSION"}const Gy="@firebase/app",A_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new Om("@firebase/app"),j4="@firebase/app-compat",I4="@firebase/analytics-compat",C4="@firebase/analytics",A4="@firebase/app-check-compat",R4="@firebase/app-check",P4="@firebase/auth",D4="@firebase/auth-compat",O4="@firebase/database",M4="@firebase/data-connect",L4="@firebase/database-compat",V4="@firebase/functions",F4="@firebase/functions-compat",U4="@firebase/installations",$4="@firebase/installations-compat",B4="@firebase/messaging",z4="@firebase/messaging-compat",q4="@firebase/performance",W4="@firebase/performance-compat",H4="@firebase/remote-config",K4="@firebase/remote-config-compat",G4="@firebase/storage",Y4="@firebase/storage-compat",Q4="@firebase/firestore",J4="@firebase/ai",X4="@firebase/firestore-compat",Z4="firebase",eD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="[DEFAULT]",tD={[Gy]:"fire-core",[j4]:"fire-core-compat",[C4]:"fire-analytics",[I4]:"fire-analytics-compat",[R4]:"fire-app-check",[A4]:"fire-app-check-compat",[P4]:"fire-auth",[D4]:"fire-auth-compat",[O4]:"fire-rtdb",[M4]:"fire-data-connect",[L4]:"fire-rtdb-compat",[V4]:"fire-fn",[F4]:"fire-fn-compat",[U4]:"fire-iid",[$4]:"fire-iid-compat",[B4]:"fire-fcm",[z4]:"fire-fcm-compat",[q4]:"fire-perf",[W4]:"fire-perf-compat",[H4]:"fire-rc",[K4]:"fire-rc-compat",[G4]:"fire-gcs",[Y4]:"fire-gcs-compat",[Q4]:"fire-fst",[X4]:"fire-fst-compat",[J4]:"fire-vertex","fire-js":"fire-js",[Z4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new Map,nD=new Map,Qy=new Map;function R_(t,e){try{t.container.addComponent(e)}catch(n){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qs(t){const e=t.name;if(Qy.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;Qy.set(e,t);for(const n of Jf.values())R_(n,t);for(const n of nD.values())R_(n,t);return!0}function Ho(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ur(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ia=new Wo("app","Firebase",rD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ia.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=eD;function rN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Yy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ia.create("bad-app-name",{appName:String(s)});if(n||(n=KS()),!n)throw Ia.create("no-options");const a=Jf.get(s);if(a){if(Ra(n,a.options)&&Ra(r,a.config))return a;throw Ia.create("duplicate-app",{appName:s})}const o=new d4(s);for(const d of Qy.values())o.addComponent(d);const u=new sD(n,r,o);return Jf.set(s,u),u}function dv(t=Yy){const e=Jf.get(t);if(!e&&t===Yy&&KS())return rN();if(!e)throw Ia.create("no-app",{appName:t});return e}function qr(t,e,n){let r=tD[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(o.join(" "));return}Qs(new gs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="firebase-heartbeat-database",aD=1,nd="firebase-heartbeat-store";let qg=null;function sN(){return qg||(qg=nN(iD,aD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ia.create("idb-open",{originalErrorMessage:t.message})})),qg}async function oD(t){try{const n=(await sN()).transaction(nd),r=await n.objectStore(nd).get(iN(t));return await n.done,r}catch(e){if(e instanceof xs)Ai.warn(e.message);else{const n=Ia.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(n.message)}}}async function P_(t,e){try{const r=(await sN()).transaction(nd,"readwrite");await r.objectStore(nd).put(e,iN(t)),await r.done}catch(n){if(n instanceof xs)Ai.warn(n.message);else{const r=Ia.create("idb-set",{originalErrorMessage:n?.message});Ai.warn(r.message)}}}function iN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=1024,cD=30;class uD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=D_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>cD){const s=fD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ai.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=D_(),{heartbeatsToSend:n,unsentEntries:r}=dD(this._heartbeatsCache.heartbeats),s=Qf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Ai.warn(e),""}}}function D_(){return new Date().toISOString().substring(0,10)}function dD(t,e=lD){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),O_(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),O_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XS()?ZS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return P_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return P_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function O_(t){return Qf(JSON.stringify({version:2,heartbeats:t})).length}function fD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){Qs(new gs("platform-logger",e=>new N4(e),"PRIVATE")),Qs(new gs("heartbeat",e=>new uD(e),"PRIVATE")),qr(Gy,A_,t),qr(Gy,A_,"esm2020"),qr("fire-js","")}mD("");function aN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pD=aN,oN=new Wo("auth","Firebase",aN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=new Om("@firebase/auth");function gD(t,...e){Xf.logLevel<=et.WARN&&Xf.warn(`Auth (${Sc}): ${t}`,...e)}function Pf(t,...e){Xf.logLevel<=et.ERROR&&Xf.error(`Auth (${Sc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t,...e){throw hv(t,...e)}function Bs(t,...e){return hv(t,...e)}function lN(t,e,n){const r={...pD(),[e]:n};return new Wo("auth","Firebase",r).create(e,{appName:t.name})}function ki(t){return lN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oN.create(t,...e)}function Be(t,e,...n){if(!t)throw hv(e,...n)}function Ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pf(e),new Error(e)}function Ri(t,e){t||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(){return typeof self<"u"&&self.location?.href||""}function yD(){return M_()==="http:"||M_()==="https:"}function M_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yD()||JS()||"connection"in navigator)?navigator.onLine:!0}function xD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ri(n>e,"Short delay should be less than long delay!"),this.isMobile=qP()||KP()}get(){return vD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t,e){Ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_D=new Cd(3e4,6e4);function za(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Bi(t,e,n,r,s={}){return uN(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const u=Id({key:t.config.apiKey,...o}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:d,...a};return HP()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Tc(t.emulatorConfig.host)&&(f.credentials="include"),cN.fetch()(await dN(t,t.config.apiHost,n,u),f)})}async function uN(t,e,n){t._canInitEmulator=!1;const r={...wD,...e};try{const s=new TD(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw sf(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const u=a.ok?o.errorMessage:o.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw sf(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw sf(t,"user-disabled",o);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw lN(t,g,f);ys(t,g)}}catch(s){if(s instanceof xs)throw s;ys(t,"network-request-failed",{message:String(s)})}}async function Ad(t,e,n,r,s={}){const a=await Bi(t,e,n,r,s);return"mfaPendingCredential"in a&&ys(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function dN(t,e,n,r){const s=`${e}${n}?${r}`,a=t,o=a.config.emulator?fv(t.config,s):`${t.config.apiScheme}://${s}`;return bD.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function ED(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bs(this.auth,"network-request-failed")),_D.get())})}}function sf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Bs(t,e,r);return s.customData._tokenResponse=n,s}function L_(t){return t!==void 0&&t.enterprise!==void 0}class SD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ED(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ND(t,e){return Bi(t,"GET","/v2/recaptchaConfig",za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(t,e){return Bi(t,"POST","/v1/accounts:delete",e)}async function Zf(t,e){return Bi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jD(t,e=!1){const n=In(t),r=await n.getIdToken(e),s=mv(r);Be(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a?.sign_in_provider;return{claims:s,token:r,authTime:Bu(Wg(s.auth_time)),issuedAtTime:Bu(Wg(s.iat)),expirationTime:Bu(Wg(s.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Wg(t){return Number(t)*1e3}function mv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=WS(n);return s?JSON.parse(s):(Pf("Failed to decode base64 JWT payload"),null)}catch(s){return Pf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function V_(t){const e=mv(t);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xs&&ID(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ID({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function em(t){const e=t.auth,n=await t.getIdToken(),r=await uc(t,Zf(e,{idToken:n}));Be(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=s.providerUserInfo?.length?hN(s.providerUserInfo):[],o=RD(t.providerData,a),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!o?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Xy(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function AD(t){const e=In(t);await em(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RD(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function hN(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(t,e){const n=await uN(t,{},async()=>{const r=Id({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await dN(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return t.emulatorConfig&&Tc(t.emulatorConfig.host)&&(d.credentials="include"),cN.fetch()(o,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DD(t,e){return Bi(t,"POST","/v2/accounts:revokeToken",za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const n=V_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await PD(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new nc;return r&&(Be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Be(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(Be(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nc,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t,e){Be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new CD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await uc(this,this.stsTokenManager.getToken(this.auth,e));return Be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jD(this,e)}reload(){return AD(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await em(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ur(this.auth.app))return Promise.reject(ki(this.auth));const e=await this.getIdToken();return await uc(this,kD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,u=n.tenantId??void 0,d=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:T,providerData:I,stsTokenManager:N}=n;Be(y&&N,e,"internal-error");const _=nc.fromJSON(this.name,N);Be(typeof y=="string",e,"internal-error"),ya(r,e.name),ya(s,e.name),Be(typeof x=="boolean",e,"internal-error"),Be(typeof T=="boolean",e,"internal-error"),ya(a,e.name),ya(o,e.name),ya(u,e.name),ya(d,e.name),ya(f,e.name),ya(g,e.name);const k=new fs({uid:y,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:T,photoURL:o,phoneNumber:a,tenantId:u,stsTokenManager:_,createdAt:f,lastLoginAt:g});return I&&Array.isArray(I)&&(k.providerData=I.map(R=>({...R}))),d&&(k._redirectEventId=d),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new nc;s.updateFromServerResponse(n);const a=new fs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await em(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Be(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?hN(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!a?.length,u=new nc;u.updateFromIdToken(r);const d=new fs({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;function Ti(t){Ri(t instanceof Function,"Expected a class definition");let e=F_.get(t);return e?(Ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,F_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fN.type="NONE";const U_=fN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t,e,n){return`firebase:${t}:${e}:${n}`}class rc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Df(this.userKey,s.apiKey,a),this.fullPersistenceKey=Df("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zf(this.auth,{idToken:e}).catch(()=>{});return n?fs._fromGetAccountInfoResponse(this.auth,n,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new rc(Ti(U_),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||Ti(U_);const o=Df(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(o);if(g){let y;if(typeof g=="string"){const x=await Zf(e,{idToken:g}).catch(()=>{});if(!x)break;y=await fs._fromGetAccountInfoResponse(e,x,g)}else y=fs._fromJSON(e,g);f!==a&&(u=y),a=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new rc(a,e,r):(a=d[0],u&&await a._set(o,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new rc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xN(e))return"Blackberry";if(wN(e))return"Webos";if(pN(e))return"Safari";if((e.includes("chrome/")||gN(e))&&!e.includes("edge/"))return"Chrome";if(vN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function mN(t=Bn()){return/firefox\//i.test(t)}function pN(t=Bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gN(t=Bn()){return/crios\//i.test(t)}function yN(t=Bn()){return/iemobile/i.test(t)}function vN(t=Bn()){return/android/i.test(t)}function xN(t=Bn()){return/blackberry/i.test(t)}function wN(t=Bn()){return/webos/i.test(t)}function pv(t=Bn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OD(t=Bn()){return pv(t)&&!!window.navigator?.standalone}function MD(){return GP()&&document.documentMode===10}function bN(t=Bn()){return pv(t)||vN(t)||wN(t)||xN(t)||/windows phone/i.test(t)||yN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t,e=[]){let n;switch(t){case"Browser":n=$_(Bn());break;case"Worker":n=`${$_(Bn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,u)=>{try{const d=e(a);o(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(t,e={}){return Bi(t,"GET","/v2/passwordPolicy",za(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=6;class UD{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??FD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B_(this),this.idTokenSubscription=new B_(this),this.beforeStateQueue=new LD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ti(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await rc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zf(this,{idToken:e}),r=await fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ur(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===o)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await em(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ur(this.app))return Promise.reject(ki(this));const n=e?In(e):null;return n&&Be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ur(this.app)?Promise.reject(ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ur(this.app)?Promise.reject(ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VD(this),n=new UD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ti(e)||this._popupRedirectResolver;Be(n,this,"argument-error"),this.redirectPersistenceManager=await rc.create(this,[Ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(u,this,"internal-error"),u.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{o=!0,d()}}else{const d=e.addObserver(n);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_N(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ko(t){return In(t)}class B_{constructor(e){this.auth=e,this.observer=null,this.addObserver=t4(n=>this.observer=n)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BD(t){Mm=t}function EN(t){return Mm.loadJS(t)}function zD(){return Mm.recaptchaEnterpriseScript}function qD(){return Mm.gapiScript}function WD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class HD{constructor(){this.enterprise=new KD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class KD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const GD="recaptcha-enterprise",TN="NO_RECAPTCHA";class YD{constructor(e){this.type=GD,this.auth=Ko(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,u)=>{ND(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new SD(d);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(d=>{u(d)})})}function s(a,o,u){const d=window.grecaptcha;L_(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(TN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HD().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(u=>{if(!n&&L_(window.grecaptcha))s(u,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=zD();d.length!==0&&(d+=u),EN(d).then(()=>{s(u,a,o)}).catch(f=>{o(f)})}}).catch(u=>{o(u)})})}}async function z_(t,e,n,r=!1,s=!1){const a=new YD(t);let o;if(s)o=TN;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Zy(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await z_(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await z_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t,e){const n=Ho(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Ra(a,e??{}))return s;ys(s,"already-initialized")}return n.initialize({options:e})}function JD(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ti);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function XD(t,e,n){const r=Ko(t);Be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=SN(e),{host:o,port:u}=ZD(e),d=u===null?"":`:${u}`,f={url:`${a}//${o}${d}/`},g=Object.freeze({host:o,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Be(Ra(f,r.config.emulator)&&Ra(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Tc(o)?(YS(`${a}//${o}${d}`),QS("Auth",!0)):eO()}function SN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZD(t){const e=SN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:q_(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:q_(o)}}}function q_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,n){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function tO(t,e){return Bi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e){return Ad(t,"POST","/v1/accounts:signInWithPassword",za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t,e){return Ad(t,"POST","/v1/accounts:signInWithEmailLink",za(t,e))}async function sO(t,e){return Ad(t,"POST","/v1/accounts:signInWithEmailLink",za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends gv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new rd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new rd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zy(e,n,"signInWithPassword",nO);case"emailLink":return rO(e,{email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zy(e,r,"signUpPassword",tO);case"emailLink":return sO(e,{idToken:n,email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(t,e){return Ad(t,"POST","/v1/accounts:signInWithIdp",za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="http://localhost";class Lo extends gv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ys("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const o=new Lo(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return sc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sc(e,n)}buildRequest(){const e={requestUri:iO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Id(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oO(t){const e=Pu(Du(t)).link,n=e?Pu(Du(e)).deep_link_id:null,r=Pu(Du(t)).deep_link_id;return(r?Pu(Du(r)).link:null)||r||n||e||t}class yv{constructor(e){const n=Pu(Du(e)),r=n.apiKey??null,s=n.oobCode??null,a=aO(n.mode??null);Be(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=oO(e);try{return new yv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.providerId=Nc.PROVIDER_ID}static credential(e,n){return rd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yv.parseLink(n);return Be(r,"argument-error"),rd._fromEmailAndCode(e,r.code,r.tenantId)}}Nc.PROVIDER_ID="password";Nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends NN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Rd{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends Rd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Lo._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ea.credential(n,r)}catch{return null}}}Ea.GOOGLE_SIGN_IN_METHOD="google.com";Ea.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends Rd{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ta.credential(e.oauthAccessToken)}catch{return null}}}Ta.GITHUB_SIGN_IN_METHOD="github.com";Ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Rd{constructor(){super("twitter.com")}static credential(e,n){return Lo._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sa.credential(n,r)}catch{return null}}}Sa.TWITTER_SIGN_IN_METHOD="twitter.com";Sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(t,e){return Ad(t,"POST","/v1/accounts:signUp",za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await fs._fromIdTokenResponse(e,r,s),o=W_(r);return new Vo({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=W_(r);return new Vo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function W_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends xs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,tm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new tm(e,n,r,s)}}function kN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?tm._fromErrorAndOperation(t,a,e,r):a})}async function cO(t,e,n=!1){const r=await uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(t,e,n=!1){const{auth:r}=t;if(Ur(r.app))return Promise.reject(ki(r));const s="reauthenticate";try{const a=await uc(t,kN(r,s,e,t),n);Be(a.idToken,r,"internal-error");const o=mv(a.idToken);Be(o,r,"internal-error");const{sub:u}=o;return Be(t.uid===u,r,"user-mismatch"),Vo._forOperation(t,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&ys(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,e,n=!1){if(Ur(t.app))return Promise.reject(ki(t));const r="signIn",s=await kN(t,r,e),a=await Vo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function dO(t,e){return jN(Ko(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t){const e=Ko(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hO(t,e,n){if(Ur(t.app))return Promise.reject(ki(t));const r=Ko(t),o=await Zy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lO).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&IN(t),d}),u=await Vo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function fO(t,e,n){return Ur(t.app)?Promise.reject(ki(t)):dO(In(t),Nc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(t,e){return Bi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=In(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await uc(r,mO(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function gO(t,e,n,r){return In(t).onIdTokenChanged(e,n,r)}function yO(t,e,n){return In(t).beforeAuthStateChanged(e,n)}function vO(t,e,n,r){return In(t).onAuthStateChanged(e,n,r)}function xO(t){return In(t).signOut()}const nm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nm,"1"),this.storage.removeItem(nm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=1e3,bO=10;class AN extends CN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,d)=>{this.notifyListeners(o,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);MD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bO):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AN.type="LOCAL";const _O=AN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN extends CN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RN.type="SESSION";const PN=RN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Lm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async f=>f(n.origin,a)),d=await EO(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((u,d)=>{const f=vv("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(y){const x=y;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(x.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(){return window}function SO(t){zs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){return typeof zs().WorkerGlobalScope<"u"&&typeof zs().importScripts=="function"}async function NO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kO(){return navigator?.serviceWorker?.controller||null}function jO(){return DN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="firebaseLocalStorageDb",IO=1,rm="firebaseLocalStorage",MN="fbase_key";class Pd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vm(t,e){return t.transaction([rm],e?"readwrite":"readonly").objectStore(rm)}function CO(){const t=indexedDB.deleteDatabase(ON);return new Pd(t).toPromise()}function e0(){const t=indexedDB.open(ON,IO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(rm,{keyPath:MN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(rm)?e(r):(r.close(),await CO(),e(await e0()))})})}async function H_(t,e,n){const r=Vm(t,!0).put({[MN]:e,value:n});return new Pd(r).toPromise()}async function AO(t,e){const n=Vm(t,!1).get(e),r=await new Pd(n).toPromise();return r===void 0?null:r.value}function K_(t,e){const n=Vm(t,!0).delete(e);return new Pd(n).toPromise()}const RO=800,PO=3;class LN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await e0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>PO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lm._getInstance(jO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await NO(),!this.activeServiceWorker)return;this.sender=new TO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await e0();return await H_(e,nm,"1"),await K_(e,nm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>H_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>K_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Vm(s,!1).getAll();return new Pd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LN.type="LOCAL";const DO=LN;new Cd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t,e){return e?Ti(e):(Be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv extends gv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MO(t){return jN(t.auth,new xv(t),t.bypassAuthState)}function LO(t){const{auth:e,user:n}=t;return Be(n,e,"internal-error"),uO(n,new xv(t),t.bypassAuthState)}async function VO(t){const{auth:e,user:n}=t;return Be(n,e,"internal-error"),cO(n,new xv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:u}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MO;case"linkViaPopup":case"linkViaRedirect":return VO;case"reauthViaPopup":case"reauthViaRedirect":return LO;default:ys(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=new Cd(2e3,1e4);class Yl extends VN{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Yl.currentPopupAction&&Yl.currentPopupAction.cancel(),Yl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=vv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FO.get())};e()}}Yl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="pendingRedirect",Of=new Map;class $O extends VN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Of.get(this.auth._key());if(!e){try{const r=await BO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Of.set(this.auth._key(),e)}return this.bypassAuthState||Of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BO(t,e){const n=WO(e),r=qO(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function zO(t,e){Of.set(t._key(),e)}function qO(t){return Ti(t._redirectPersistence)}function WO(t){return Df(UO,t.config.apiKey,t.name)}async function HO(t,e,n=!1){if(Ur(t.app))return Promise.reject(ki(t));const r=Ko(t),s=OO(r,e),o=await new $O(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=600*1e3;class GO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!FN(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Bs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KO&&this.cachedEventUids.clear(),this.cachedEventUids.has(G_(e))}saveEventToCache(e){this.cachedEventUids.add(G_(e)),this.lastProcessedEventTime=Date.now()}}function G_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function YO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(t,e={}){return Bi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XO=/^https?/;async function ZO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QO(t);for(const n of e)try{if(eM(n))return}catch{}ys(t,"unauthorized-domain")}function eM(t){const e=Jy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!XO.test(n))return!1;if(JO.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new Cd(3e4,6e4);function Y_(){const t=zs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nM(t){return new Promise((e,n)=>{function r(){Y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y_(),n(Bs(t,"network-request-failed"))},timeout:tM.get()})}if(zs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(zs().gapi?.load)r();else{const s=WD("iframefcb");return zs()[s]=()=>{gapi.load?r():n(Bs(t,"network-request-failed"))},EN(`${qD()}?onload=${s}`).catch(a=>n(a))}}).catch(e=>{throw Mf=null,e})}let Mf=null;function rM(t){return Mf=Mf||nM(t),Mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new Cd(5e3,15e3),iM="__/auth/iframe",aM="emulator/auth/iframe",oM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cM(t){const e=t.config;Be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fv(e,aM):`https://${t.config.authDomain}/${iM}`,r={apiKey:e.apiKey,appName:t.name,v:Sc},s=lM.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Id(r).slice(1)}`}async function uM(t){const e=await rM(t),n=zs().gapi;return Be(n,t,"internal-error"),e.open({where:document.body,url:cM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oM,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=Bs(t,"network-request-failed"),u=zs().setTimeout(()=>{a(o)},sM.get());function d(){zs().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hM=500,fM=600,mM="_blank",pM="http://localhost";class Q_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gM(t,e,n,r=hM,s=fM){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...dM,width:r.toString(),height:s.toString(),top:a,left:o},f=Bn().toLowerCase();n&&(u=gN(f)?mM:n),mN(f)&&(e=e||pM,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[T,I])=>`${x}${T}=${I},`,"");if(OD(f)&&u!=="_self")return yM(e||"",u),new Q_(null);const y=window.open(e||"",u,g);Be(y,t,"popup-blocked");try{y.focus()}catch{}return new Q_(y)}function yM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="__/auth/handler",xM="emulator/auth/handler",wM=encodeURIComponent("fac");async function J_(t,e,n,r,s,a){Be(t.config.authDomain,t,"auth-domain-config-required"),Be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sc,eventId:s};if(e instanceof NN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",e4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))o[g]=y}if(e instanceof Rd){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(o.scopes=g.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await t._getAppCheckToken(),f=d?`#${wM}=${encodeURIComponent(d)}`:"";return`${bM(t)}?${Id(u).slice(1)}${f}`}function bM({config:t}){return t.emulator?fv(t,xM):`https://${t.authDomain}/${vM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="webStorageSupport";class _M{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PN,this._completeRedirectFn=HO,this._overrideRedirectResult=zO}async _openPopup(e,n,r,s){Ri(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await J_(e,n,r,Jy(),s);return gM(e,a,vv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await J_(e,n,r,Jy(),s);return SO(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Ri(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uM(e),r=new GO(e);return n.register("authEvent",s=>(Be(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hg,{type:Hg},s=>{const a=s?.[0]?.[Hg];a!==void 0&&n(!!a),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bN()||pN()||pv()}}const EM=_M;var X_="@firebase/auth",Z_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NM(t){Qs(new gs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;Be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_N(t)},f=new $D(r,s,a,d);return JD(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qs(new gs("auth-internal",e=>{const n=Ko(e.getProvider("auth").getImmediate());return(r=>new TM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(X_,Z_,SM(t)),qr(X_,Z_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=300,jM=GS("authIdTokenMaxAge")||kM;let e1=null;const IM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jM)return;const s=n?.token;e1!==s&&(e1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function CM(t=dv()){const e=Ho(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QD(t,{popupRedirectResolver:EM,persistence:[DO,_O,PN]}),r=GS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=IM(a.toString());yO(n,o,()=>o(n.currentUser)),gO(n,u=>o(u))}}const s=HS("auth");return s&&XD(n,`http://${s}`),n}function AM(){return document.getElementsByTagName("head")?.[0]??document}BD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Bs("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",AM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NM("Browser");var t1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ca,UN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,C){function L(){}L.prototype=C.prototype,P.F=C.prototype,P.prototype=new L,P.prototype.constructor=P,P.D=function(U,$,q){for(var V=Array(arguments.length-2),se=2;se<arguments.length;se++)V[se-2]=arguments[se];return C.prototype[$].apply(U,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,C,L){L||(L=0);const U=Array(16);if(typeof C=="string")for(var $=0;$<16;++$)U[$]=C.charCodeAt(L++)|C.charCodeAt(L++)<<8|C.charCodeAt(L++)<<16|C.charCodeAt(L++)<<24;else for($=0;$<16;++$)U[$]=C[L++]|C[L++]<<8|C[L++]<<16|C[L++]<<24;C=P.g[0],L=P.g[1],$=P.g[2];let q=P.g[3],V;V=C+(q^L&($^q))+U[0]+3614090360&4294967295,C=L+(V<<7&4294967295|V>>>25),V=q+($^C&(L^$))+U[1]+3905402710&4294967295,q=C+(V<<12&4294967295|V>>>20),V=$+(L^q&(C^L))+U[2]+606105819&4294967295,$=q+(V<<17&4294967295|V>>>15),V=L+(C^$&(q^C))+U[3]+3250441966&4294967295,L=$+(V<<22&4294967295|V>>>10),V=C+(q^L&($^q))+U[4]+4118548399&4294967295,C=L+(V<<7&4294967295|V>>>25),V=q+($^C&(L^$))+U[5]+1200080426&4294967295,q=C+(V<<12&4294967295|V>>>20),V=$+(L^q&(C^L))+U[6]+2821735955&4294967295,$=q+(V<<17&4294967295|V>>>15),V=L+(C^$&(q^C))+U[7]+4249261313&4294967295,L=$+(V<<22&4294967295|V>>>10),V=C+(q^L&($^q))+U[8]+1770035416&4294967295,C=L+(V<<7&4294967295|V>>>25),V=q+($^C&(L^$))+U[9]+2336552879&4294967295,q=C+(V<<12&4294967295|V>>>20),V=$+(L^q&(C^L))+U[10]+4294925233&4294967295,$=q+(V<<17&4294967295|V>>>15),V=L+(C^$&(q^C))+U[11]+2304563134&4294967295,L=$+(V<<22&4294967295|V>>>10),V=C+(q^L&($^q))+U[12]+1804603682&4294967295,C=L+(V<<7&4294967295|V>>>25),V=q+($^C&(L^$))+U[13]+4254626195&4294967295,q=C+(V<<12&4294967295|V>>>20),V=$+(L^q&(C^L))+U[14]+2792965006&4294967295,$=q+(V<<17&4294967295|V>>>15),V=L+(C^$&(q^C))+U[15]+1236535329&4294967295,L=$+(V<<22&4294967295|V>>>10),V=C+($^q&(L^$))+U[1]+4129170786&4294967295,C=L+(V<<5&4294967295|V>>>27),V=q+(L^$&(C^L))+U[6]+3225465664&4294967295,q=C+(V<<9&4294967295|V>>>23),V=$+(C^L&(q^C))+U[11]+643717713&4294967295,$=q+(V<<14&4294967295|V>>>18),V=L+(q^C&($^q))+U[0]+3921069994&4294967295,L=$+(V<<20&4294967295|V>>>12),V=C+($^q&(L^$))+U[5]+3593408605&4294967295,C=L+(V<<5&4294967295|V>>>27),V=q+(L^$&(C^L))+U[10]+38016083&4294967295,q=C+(V<<9&4294967295|V>>>23),V=$+(C^L&(q^C))+U[15]+3634488961&4294967295,$=q+(V<<14&4294967295|V>>>18),V=L+(q^C&($^q))+U[4]+3889429448&4294967295,L=$+(V<<20&4294967295|V>>>12),V=C+($^q&(L^$))+U[9]+568446438&4294967295,C=L+(V<<5&4294967295|V>>>27),V=q+(L^$&(C^L))+U[14]+3275163606&4294967295,q=C+(V<<9&4294967295|V>>>23),V=$+(C^L&(q^C))+U[3]+4107603335&4294967295,$=q+(V<<14&4294967295|V>>>18),V=L+(q^C&($^q))+U[8]+1163531501&4294967295,L=$+(V<<20&4294967295|V>>>12),V=C+($^q&(L^$))+U[13]+2850285829&4294967295,C=L+(V<<5&4294967295|V>>>27),V=q+(L^$&(C^L))+U[2]+4243563512&4294967295,q=C+(V<<9&4294967295|V>>>23),V=$+(C^L&(q^C))+U[7]+1735328473&4294967295,$=q+(V<<14&4294967295|V>>>18),V=L+(q^C&($^q))+U[12]+2368359562&4294967295,L=$+(V<<20&4294967295|V>>>12),V=C+(L^$^q)+U[5]+4294588738&4294967295,C=L+(V<<4&4294967295|V>>>28),V=q+(C^L^$)+U[8]+2272392833&4294967295,q=C+(V<<11&4294967295|V>>>21),V=$+(q^C^L)+U[11]+1839030562&4294967295,$=q+(V<<16&4294967295|V>>>16),V=L+($^q^C)+U[14]+4259657740&4294967295,L=$+(V<<23&4294967295|V>>>9),V=C+(L^$^q)+U[1]+2763975236&4294967295,C=L+(V<<4&4294967295|V>>>28),V=q+(C^L^$)+U[4]+1272893353&4294967295,q=C+(V<<11&4294967295|V>>>21),V=$+(q^C^L)+U[7]+4139469664&4294967295,$=q+(V<<16&4294967295|V>>>16),V=L+($^q^C)+U[10]+3200236656&4294967295,L=$+(V<<23&4294967295|V>>>9),V=C+(L^$^q)+U[13]+681279174&4294967295,C=L+(V<<4&4294967295|V>>>28),V=q+(C^L^$)+U[0]+3936430074&4294967295,q=C+(V<<11&4294967295|V>>>21),V=$+(q^C^L)+U[3]+3572445317&4294967295,$=q+(V<<16&4294967295|V>>>16),V=L+($^q^C)+U[6]+76029189&4294967295,L=$+(V<<23&4294967295|V>>>9),V=C+(L^$^q)+U[9]+3654602809&4294967295,C=L+(V<<4&4294967295|V>>>28),V=q+(C^L^$)+U[12]+3873151461&4294967295,q=C+(V<<11&4294967295|V>>>21),V=$+(q^C^L)+U[15]+530742520&4294967295,$=q+(V<<16&4294967295|V>>>16),V=L+($^q^C)+U[2]+3299628645&4294967295,L=$+(V<<23&4294967295|V>>>9),V=C+($^(L|~q))+U[0]+4096336452&4294967295,C=L+(V<<6&4294967295|V>>>26),V=q+(L^(C|~$))+U[7]+1126891415&4294967295,q=C+(V<<10&4294967295|V>>>22),V=$+(C^(q|~L))+U[14]+2878612391&4294967295,$=q+(V<<15&4294967295|V>>>17),V=L+(q^($|~C))+U[5]+4237533241&4294967295,L=$+(V<<21&4294967295|V>>>11),V=C+($^(L|~q))+U[12]+1700485571&4294967295,C=L+(V<<6&4294967295|V>>>26),V=q+(L^(C|~$))+U[3]+2399980690&4294967295,q=C+(V<<10&4294967295|V>>>22),V=$+(C^(q|~L))+U[10]+4293915773&4294967295,$=q+(V<<15&4294967295|V>>>17),V=L+(q^($|~C))+U[1]+2240044497&4294967295,L=$+(V<<21&4294967295|V>>>11),V=C+($^(L|~q))+U[8]+1873313359&4294967295,C=L+(V<<6&4294967295|V>>>26),V=q+(L^(C|~$))+U[15]+4264355552&4294967295,q=C+(V<<10&4294967295|V>>>22),V=$+(C^(q|~L))+U[6]+2734768916&4294967295,$=q+(V<<15&4294967295|V>>>17),V=L+(q^($|~C))+U[13]+1309151649&4294967295,L=$+(V<<21&4294967295|V>>>11),V=C+($^(L|~q))+U[4]+4149444226&4294967295,C=L+(V<<6&4294967295|V>>>26),V=q+(L^(C|~$))+U[11]+3174756917&4294967295,q=C+(V<<10&4294967295|V>>>22),V=$+(C^(q|~L))+U[2]+718787259&4294967295,$=q+(V<<15&4294967295|V>>>17),V=L+(q^($|~C))+U[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+($+(V<<21&4294967295|V>>>11))&4294967295,P.g[2]=P.g[2]+$&4294967295,P.g[3]=P.g[3]+q&4294967295}r.prototype.v=function(P,C){C===void 0&&(C=P.length);const L=C-this.blockSize,U=this.C;let $=this.h,q=0;for(;q<C;){if($==0)for(;q<=L;)s(this,P,q),q+=this.blockSize;if(typeof P=="string"){for(;q<C;)if(U[$++]=P.charCodeAt(q++),$==this.blockSize){s(this,U),$=0;break}}else for(;q<C;)if(U[$++]=P[q++],$==this.blockSize){s(this,U),$=0;break}}this.h=$,this.o+=C},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;C=this.o*8;for(var L=P.length-8;L<P.length;++L)P[L]=C&255,C/=256;for(this.v(P),P=Array(16),C=0,L=0;L<4;++L)for(let U=0;U<32;U+=8)P[C++]=this.g[L]>>>U&255;return P};function a(P,C){var L=u;return Object.prototype.hasOwnProperty.call(L,P)?L[P]:L[P]=C(P)}function o(P,C){this.h=C;const L=[];let U=!0;for(let $=P.length-1;$>=0;$--){const q=P[$]|0;U&&q==C||(L[$]=q,U=!1)}this.g=L}var u={};function d(P){return-128<=P&&P<128?a(P,function(C){return new o([C|0],C<0?-1:0)}):new o([P|0],P<0?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return y;if(P<0)return _(f(-P));const C=[];let L=1;for(let U=0;P>=L;U++)C[U]=P/L|0,L*=4294967296;return new o(C,0)}function g(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return _(g(P.substring(1),C));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=f(Math.pow(C,8));let U=y;for(let q=0;q<P.length;q+=8){var $=Math.min(8,P.length-q);const V=parseInt(P.substring(q,q+$),C);$<8?($=f(Math.pow(C,$)),U=U.j($).add(f(V))):(U=U.j(L),U=U.add(f(V)))}return U}var y=d(0),x=d(1),T=d(16777216);t=o.prototype,t.m=function(){if(N(this))return-_(this).m();let P=0,C=1;for(let L=0;L<this.g.length;L++){const U=this.i(L);P+=(U>=0?U:4294967296+U)*C,C*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(I(this))return"0";if(N(this))return"-"+_(this).toString(P);const C=f(Math.pow(P,6));var L=this;let U="";for(;;){const $=D(L,C).g;L=k(L,$.j(C));let q=((L.g.length>0?L.g[0]:L.h)>>>0).toString(P);if(L=$,I(L))return q+U;for(;q.length<6;)q="0"+q;U=q+U}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function I(P){if(P.h!=0)return!1;for(let C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function N(P){return P.h==-1}t.l=function(P){return P=k(this,P),N(P)?-1:I(P)?0:1};function _(P){const C=P.g.length,L=[];for(let U=0;U<C;U++)L[U]=~P.g[U];return new o(L,~P.h).add(x)}t.abs=function(){return N(this)?_(this):this},t.add=function(P){const C=Math.max(this.g.length,P.g.length),L=[];let U=0;for(let $=0;$<=C;$++){let q=U+(this.i($)&65535)+(P.i($)&65535),V=(q>>>16)+(this.i($)>>>16)+(P.i($)>>>16);U=V>>>16,q&=65535,V&=65535,L[$]=V<<16|q}return new o(L,L[L.length-1]&-2147483648?-1:0)};function k(P,C){return P.add(_(C))}t.j=function(P){if(I(this)||I(P))return y;if(N(this))return N(P)?_(this).j(_(P)):_(_(this).j(P));if(N(P))return _(this.j(_(P)));if(this.l(T)<0&&P.l(T)<0)return f(this.m()*P.m());const C=this.g.length+P.g.length,L=[];for(var U=0;U<2*C;U++)L[U]=0;for(U=0;U<this.g.length;U++)for(let $=0;$<P.g.length;$++){const q=this.i(U)>>>16,V=this.i(U)&65535,se=P.i($)>>>16,Q=P.i($)&65535;L[2*U+2*$]+=V*Q,R(L,2*U+2*$),L[2*U+2*$+1]+=q*Q,R(L,2*U+2*$+1),L[2*U+2*$+1]+=V*se,R(L,2*U+2*$+1),L[2*U+2*$+2]+=q*se,R(L,2*U+2*$+2)}for(P=0;P<C;P++)L[P]=L[2*P+1]<<16|L[2*P];for(P=C;P<2*C;P++)L[P]=0;return new o(L,0)};function R(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function j(P,C){this.g=P,this.h=C}function D(P,C){if(I(C))throw Error("division by zero");if(I(P))return new j(y,y);if(N(P))return C=D(_(P),C),new j(_(C.g),_(C.h));if(N(C))return C=D(P,_(C)),new j(_(C.g),C.h);if(P.g.length>30){if(N(P)||N(C))throw Error("slowDivide_ only works with positive integers.");for(var L=x,U=C;U.l(P)<=0;)L=M(L),U=M(U);var $=z(L,1),q=z(U,1);for(U=z(U,2),L=z(L,2);!I(U);){var V=q.add(U);V.l(P)<=0&&($=$.add(L),q=V),U=z(U,1),L=z(L,1)}return C=k(P,$.j(C)),new j($,C)}for($=y;P.l(C)>=0;){for(L=Math.max(1,Math.floor(P.m()/C.m())),U=Math.ceil(Math.log(L)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),q=f(L),V=q.j(C);N(V)||V.l(P)>0;)L-=U,q=f(L),V=q.j(C);I(q)&&(q=x),$=$.add(q),P=k(P,V)}return new j($,P)}t.B=function(P){return D(this,P).h},t.and=function(P){const C=Math.max(this.g.length,P.g.length),L=[];for(let U=0;U<C;U++)L[U]=this.i(U)&P.i(U);return new o(L,this.h&P.h)},t.or=function(P){const C=Math.max(this.g.length,P.g.length),L=[];for(let U=0;U<C;U++)L[U]=this.i(U)|P.i(U);return new o(L,this.h|P.h)},t.xor=function(P){const C=Math.max(this.g.length,P.g.length),L=[];for(let U=0;U<C;U++)L[U]=this.i(U)^P.i(U);return new o(L,this.h^P.h)};function M(P){const C=P.g.length+1,L=[];for(let U=0;U<C;U++)L[U]=P.i(U)<<1|P.i(U-1)>>>31;return new o(L,P.h)}function z(P,C){const L=C>>5;C%=32;const U=P.g.length-L,$=[];for(let q=0;q<U;q++)$[q]=C>0?P.i(q+L)>>>C|P.i(q+L+1)<<32-C:P.i(q+L);return new o($,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,UN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=g,Ca=o}).apply(typeof t1<"u"?t1:typeof self<"u"?self:typeof window<"u"?window:{});var af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $N,Ou,BN,Lf,t0,zN,qN,WN;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof af=="object"&&af];for(var b=0;b<m.length;++b){var S=m[b];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(m,b){if(b)e:{var S=r;m=m.split(".");for(var O=0;O<m.length-1;O++){var G=m[O];if(!(G in S))break e;S=S[G]}m=m[m.length-1],O=S[m],b=b(O),b!=O&&b!=null&&e(S,m,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(b){var S=[],O;for(O in b)Object.prototype.hasOwnProperty.call(b,O)&&S.push([O,b[O]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function u(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,S){return m.call.apply(m.bind,arguments)}function f(m,b,S){return f=d,f.apply(null,arguments)}function g(m,b){var S=Array.prototype.slice.call(arguments,1);return function(){var O=S.slice();return O.push.apply(O,arguments),m.apply(this,O)}}function y(m,b){function S(){}S.prototype=b.prototype,m.Z=b.prototype,m.prototype=new S,m.prototype.constructor=m,m.Ob=function(O,G,Z){for(var pe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)pe[Ge-2]=arguments[Ge];return b.prototype[G].apply(O,pe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function T(m){const b=m.length;if(b>0){const S=Array(b);for(let O=0;O<b;O++)S[O]=m[O];return S}return[]}function I(m,b){for(let O=1;O<arguments.length;O++){const G=arguments[O];var S=typeof G;if(S=S!="object"?S:G?Array.isArray(G)?"array":S:"null",S=="array"||S=="object"&&typeof G.length=="number"){S=m.length||0;const Z=G.length||0;m.length=S+Z;for(let pe=0;pe<Z;pe++)m[S+pe]=G[pe]}else m.push(G)}}class N{constructor(b,S){this.i=b,this.j=S,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function _(m){o.setTimeout(()=>{throw m},0)}function k(){var m=P;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class R{constructor(){this.h=this.g=null}add(b,S){const O=j.get();O.set(b,S),this.h?this.h.next=O:this.g=O,this.h=O}}var j=new N(()=>new D,m=>m.reset());class D{constructor(){this.next=this.g=this.h=null}set(b,S){this.h=b,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let M,z=!1,P=new R,C=()=>{const m=Promise.resolve(void 0);M=()=>{m.then(L)}};function L(){for(var m;m=k();){try{m.h.call(m.g)}catch(S){_(S)}var b=j;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}z=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};o.addEventListener("test",S,b),o.removeEventListener("test",S,b)}catch{}return m})();function V(m){return/^[\s\xa0]*$/.test(m)}function se(m,b){$.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}y(se,$),se.prototype.init=function(m,b){const S=this.type=m.type,O=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(S=="mouseover"?b=m.fromElement:S=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),le=0;function me(m,b,S,O,G){this.listener=m,this.proxy=null,this.src=b,this.type=S,this.capture=!!O,this.ha=G,this.key=++le,this.da=this.fa=!1}function J(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ve(m,b,S){for(const O in m)b.call(S,m[O],O,m)}function he(m,b){for(const S in m)b.call(void 0,m[S],S,m)}function H(m){const b={};for(const S in m)b[S]=m[S];return b}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(m,b){let S,O;for(let G=1;G<arguments.length;G++){O=arguments[G];for(S in O)m[S]=O[S];for(let Z=0;Z<ne.length;Z++)S=ne[Z],Object.prototype.hasOwnProperty.call(O,S)&&(m[S]=O[S])}}function ye(m){this.src=m,this.g={},this.h=0}ye.prototype.add=function(m,b,S,O,G){const Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);const pe=De(m,b,O,G);return pe>-1?(b=m[pe],S||(b.fa=!1)):(b=new me(b,this.src,Z,!!O,G),b.fa=S,m.push(b)),b};function _e(m,b){const S=b.type;if(S in m.g){var O=m.g[S],G=Array.prototype.indexOf.call(O,b,void 0),Z;(Z=G>=0)&&Array.prototype.splice.call(O,G,1),Z&&(J(b),m.g[S].length==0&&(delete m.g[S],m.h--))}}function De(m,b,S,O){for(let G=0;G<m.length;++G){const Z=m[G];if(!Z.da&&Z.listener==b&&Z.capture==!!S&&Z.ha==O)return G}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),je={};function Je(m,b,S,O,G){if(Array.isArray(b)){for(let Z=0;Z<b.length;Z++)Je(m,b[Z],S,O,G);return null}return S=At(S),m&&m[Q]?m.J(b,S,u(O)?!!O.capture:!1,G):pt(m,b,S,!1,O,G)}function pt(m,b,S,O,G,Z){if(!b)throw Error("Invalid event type");const pe=u(G)?!!G.capture:!!G;let Ge=Ve(m);if(Ge||(m[Ae]=Ge=new ye(m)),S=Ge.add(b,S,O,pe,Z),S.proxy)return S;if(O=vn(),S.proxy=O,O.src=m,O.listener=S,m.addEventListener)q||(G=pe),G===void 0&&(G=!1),m.addEventListener(b.toString(),O,G);else if(m.attachEvent)m.attachEvent(ee(b.toString()),O);else if(m.addListener&&m.removeListener)m.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return S}function vn(){function m(S){return b.call(m.src,m.listener,S)}const b=ge;return m}function nn(m,b,S,O,G){if(Array.isArray(b))for(var Z=0;Z<b.length;Z++)nn(m,b[Z],S,O,G);else O=u(O)?!!O.capture:!!O,S=At(S),m&&m[Q]?(m=m.i,Z=String(b).toString(),Z in m.g&&(b=m.g[Z],S=De(b,S,O,G),S>-1&&(J(b[S]),Array.prototype.splice.call(b,S,1),b.length==0&&(delete m.g[Z],m.h--)))):m&&(m=Ve(m))&&(b=m.g[b.toString()],m=-1,b&&(m=De(b,S,O,G)),(S=m>-1?b[m]:null)&&te(S))}function te(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[Q])_e(b.i,m);else{var S=m.type,O=m.proxy;b.removeEventListener?b.removeEventListener(S,O,m.capture):b.detachEvent?b.detachEvent(ee(S),O):b.addListener&&b.removeListener&&b.removeListener(O),(S=Ve(b))?(_e(S,m),S.h==0&&(S.src=null,b[Ae]=null)):J(m)}}}function ee(m){return m in je?je[m]:je[m]="on"+m}function ge(m,b){if(m.da)m=!0;else{b=new se(b,this);const S=m.listener,O=m.ha||m.src;m.fa&&te(m),m=S.call(O,b)}return m}function Ve(m){return m=m[Ae],m instanceof ye?m:null}var lt="__closure_events_fn_"+(Math.random()*1e9>>>0);function At(m){return typeof m=="function"?m:(m[lt]||(m[lt]=function(b){return m.handleEvent(b)}),m[lt])}function rt(){U.call(this),this.i=new ye(this),this.M=this,this.G=null}y(rt,U),rt.prototype[Q]=!0,rt.prototype.removeEventListener=function(m,b,S,O){nn(this,m,b,S,O)};function xt(m,b){var S,O=m.G;if(O)for(S=[];O;O=O.G)S.push(O);if(m=m.M,O=b.type||b,typeof b=="string")b=new $(b,m);else if(b instanceof $)b.target=b.target||m;else{var G=b;b=new $(O,m),ue(b,G)}G=!0;let Z,pe;if(S)for(pe=S.length-1;pe>=0;pe--)Z=b.g=S[pe],G=qn(Z,O,!0,b)&&G;if(Z=b.g=m,G=qn(Z,O,!0,b)&&G,G=qn(Z,O,!1,b)&&G,S)for(pe=0;pe<S.length;pe++)Z=b.g=S[pe],G=qn(Z,O,!1,b)&&G}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const S=m.g[b];for(let O=0;O<S.length;O++)J(S[O]);delete m.g[b],m.h--}}this.G=null},rt.prototype.J=function(m,b,S,O){return this.i.add(String(m),b,!1,S,O)},rt.prototype.K=function(m,b,S,O){return this.i.add(String(m),b,!0,S,O)};function qn(m,b,S,O){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let G=!0;for(let Z=0;Z<b.length;++Z){const pe=b[Z];if(pe&&!pe.da&&pe.capture==S){const Ge=pe.listener,Wt=pe.ha||pe.src;pe.fa&&_e(m.i,pe),G=Ge.call(Wt,O)!==!1&&G}}return G&&!O.defaultPrevented}function Bt(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:o.setTimeout(m,b||0)}function An(m){m.g=Bt(()=>{m.g=null,m.i&&(m.i=!1,An(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class qi extends U{constructor(b,S){super(),this.m=b,this.l=S,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:An(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ht(m){U.call(this),this.h=m,this.g={}}y(ht,U);var zt=[];function Wi(m){ve(m.g,function(b,S){this.g.hasOwnProperty(S)&&te(b)},m),m.g={}}ht.prototype.N=function(){ht.Z.N.call(this),Wi(this)},ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gr=o.JSON.stringify,Hi=o.JSON.parse,Zn=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function Yr(){}function Qr(){}var _s={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ki(){$.call(this,"d")}y(Ki,$);function Gi(){$.call(this,"c")}y(Gi,$);var er={},Yi=null;function Ir(){return Yi=Yi||new rt}er.Ia="serverreachability";function Wn(m){$.call(this,er.Ia,m)}y(Wn,$);function Jr(m){const b=Ir();xt(b,new Wn(b))}er.STAT_EVENT="statevent";function Xr(m,b){$.call(this,er.STAT_EVENT,m),this.stat=b}y(Xr,$);function _t(m){const b=Ir();xt(b,new Xr(b,m))}er.Ja="timingevent";function Qi(m,b){$.call(this,er.Ja,m),this.size=b}y(Qi,$);function Fe(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},b)}function gt(){this.g=!0}gt.prototype.ua=function(){this.g=!1};function qt(m,b,S,O,G,Z){m.info(function(){if(m.g)if(Z){var pe="",Ge=Z.split("&");for(let mt=0;mt<Ge.length;mt++){var Wt=Ge[mt].split("=");if(Wt.length>1){const Qt=Wt[0];Wt=Wt[1];const vr=Qt.split("_");pe=vr.length>=2&&vr[1]=="type"?pe+(Qt+"="+Wt+"&"):pe+(Qt+"=redacted&")}}}else pe=null;else pe=Z;return"XMLHTTP REQ ("+O+") [attempt "+G+"]: "+b+`
`+S+`
`+pe})}function dn(m,b,S,O,G,Z,pe){m.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+G+"]: "+b+`
`+S+`
`+Z+" "+pe})}function Hn(m,b,S,O){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Gt(m,S)+(O?" "+O:"")})}function Vt(m,b){m.info(function(){return"TIMEOUT: "+b})}gt.prototype.info=function(){};function Gt(m,b){if(!m.g)return b;if(!b)return null;try{const Z=JSON.parse(b);if(Z){for(m=0;m<Z.length;m++)if(Array.isArray(Z[m])){var S=Z[m];if(!(S.length<2)){var O=S[1];if(Array.isArray(O)&&!(O.length<1)){var G=O[0];if(G!="noop"&&G!="stop"&&G!="close")for(let pe=1;pe<O.length;pe++)O[pe]=""}}}}return Gr(Z)}catch{return b}}var hr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rn;function Cr(){}y(Cr,Yr),Cr.prototype.g=function(){return new XMLHttpRequest},Rn=new Cr;function hn(m){return encodeURIComponent(String(m))}function Ka(m){var b=1;m=m.split(":");const S=[];for(;b>0&&m.length;)S.push(m.shift()),b--;return m.length&&S.push(m.join(":")),S}function Ar(m,b,S,O){this.j=m,this.i=b,this.l=S,this.S=O||1,this.V=new ht(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yd}function Yd(){this.i=null,this.g="",this.h=!1}var Qd={},Bc={};function Zr(m,b,S){m.M=1,m.A=ii(Rr(b)),m.u=S,m.R=!0,zc(m,null)}function zc(m,b){m.F=Date.now(),Ga(m),m.B=Rr(m.A);var S=m.B,O=m.S;Array.isArray(O)||(O=[String(O)]),Zc(S.i,"t",O),m.C=0,S=m.j.L,m.h=new Yd,m.g=ah(m.j,S?b:null,!m.u),m.P>0&&(m.O=new qi(f(m.Y,m,m.g),m.P)),b=m.V,S=m.g,O=m.ba;var G="readystatechange";Array.isArray(G)||(G&&(zt[0]=G.toString()),G=zt);for(let Z=0;Z<G.length;Z++){const pe=Je(S,G[Z],O||b.handleEvent,!1,b.h||b);if(!pe)break;b.g[pe.key]=pe}b=m.J?H(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),Jr(),qt(m.i,m.v,m.B,m.l,m.S,m.u)}Ar.prototype.ba=function(m){m=m.target;const b=this.O;b&&Is(m)==3?b.j():this.Y(m)},Ar.prototype.Y=function(m){try{if(m==this.g)e:{const Ge=Is(this.g),Wt=this.g.ya(),mt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||sh(this.g)))){this.K||Ge!=4||Wt==7||(Wt==8||mt<=0?Jr(3):Jr(2)),Xo(this);var b=this.g.ca();this.X=b;var S=Jd(this);if(this.o=b==200,dn(this.i,this.v,this.B,this.l,this.S,Ge,b),this.o){if(this.U&&!this.L){t:{if(this.g){var O,G=this.g;if((O=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(O)){var Z=O;break t}}Z=null}if(m=Z)Hn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Et(this,m);else{this.o=!1,this.m=3,_t(12),si(this),Ya(this);break e}}if(this.R){m=!0;let Qt;for(;!this.K&&this.C<S.length;)if(Qt=Zd(this,S),Qt==Bc){Ge==4&&(this.m=4,_t(14),m=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Qd){this.m=4,_t(15),Hn(this.i,this.l,S,"[Invalid Chunk]"),m=!1;break}else Hn(this.i,this.l,Qt,null),Et(this,Qt);if(Xd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||S.length!=0||this.h.h||(this.m=1,_t(16),m=!1),this.o=this.o&&m,!m)Hn(this.i,this.l,S,"[Invalid Chunked Response]"),si(this),Ya(this);else if(S.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),so(pe),pe.P=!0,_t(11))}}else Hn(this.i,this.l,S,null),Et(this,S);Ge==4&&si(this),this.o&&!this.K&&(Ge==4?ll(this.j,this):(this.o=!1,Ga(this)))}else tu(this.g),b==400&&S.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),si(this),Ya(this)}}}catch{}finally{}};function Jd(m){if(!Xd(m))return m.g.la();const b=sh(m.g);if(b==="")return"";let S="";const O=b.length,G=Is(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return si(m),Ya(m),"";m.h.i=new o.TextDecoder}for(let Z=0;Z<O;Z++)m.h.h=!0,S+=m.h.i.decode(b[Z],{stream:!(G&&Z==O-1)});return b.length=0,m.h.g+=S,m.C=0,m.h.g}function Xd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Zd(m,b){var S=m.C,O=b.indexOf(`
`,S);return O==-1?Bc:(S=Number(b.substring(S,O)),isNaN(S)?Qd:(O+=1,O+S>b.length?Bc:(b=b.slice(O,O+S),m.C=O+S,b)))}Ar.prototype.cancel=function(){this.K=!0,si(this)};function Ga(m){m.T=Date.now()+m.H,qc(m,m.H)}function qc(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Fe(f(m.aa,m),b)}function Xo(m){m.D&&(o.clearTimeout(m.D),m.D=null)}Ar.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Vt(this.i,this.B),this.M!=2&&(Jr(),_t(17)),si(this),this.m=2,Ya(this)):qc(this,this.T-m)};function Ya(m){m.j.I==0||m.K||ll(m.j,m)}function si(m){Xo(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,Wi(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function Et(m,b){try{var S=m.j;if(S.I!=0&&(S.g==m||Hc(S.h,m))){if(!m.L&&Hc(S.h,m)&&S.I==3){try{var O=S.Ba.g.parse(b)}catch{O=null}if(Array.isArray(O)&&O.length==3){var G=O;if(G[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<m.F)ol(S),gr(S);else break e;Rs(S),_t(18)}}else S.xa=G[1],0<S.xa-S.K&&G[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Fe(f(S.Va,S),6e3));Qa(S.h)<=1&&S.ta&&(S.ta=void 0)}else yr(S,11)}else if((m.L||S.g==m)&&ol(S),!V(b))for(G=S.Ba.g.parse(b),b=0;b<G.length;b++){let mt=G[b];const Qt=mt[0];if(!(Qt<=S.K))if(S.K=Qt,mt=mt[1],S.I==2)if(mt[0]=="c"){S.M=mt[1],S.ba=mt[2];const vr=mt[3];vr!=null&&(S.ka=vr,S.j.info("VER="+S.ka));const ui=mt[4];ui!=null&&(S.za=ui,S.j.info("SVER="+S.za));const Ps=mt[5];Ps!=null&&typeof Ps=="number"&&Ps>0&&(O=1.5*Ps,S.O=O,S.j.info("backChannelRequestTimeoutMs_="+O)),O=S;const Ds=m.g;if(Ds){const dl=Ds.g?Ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dl){var Z=O.h;Z.g||dl.indexOf("spdy")==-1&&dl.indexOf("quic")==-1&&dl.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(el(Z,Z.h),Z.h=null))}if(O.G){const su=Ds.g?Ds.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&(O.wa=su,dt(O.J,O.G,su))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-m.F,S.j.info("Handshake RTT: "+S.T+"ms")),O=S;var pe=m;if(O.na=ru(O,O.L?O.ba:null,O.W),pe.L){Ja(O.h,pe);var Ge=pe,Wt=O.O;Wt&&(Ge.H=Wt),Ge.D&&(Xo(Ge),Ga(Ge)),O.g=pe}else Pn(O);S.i.length>0&&ci(S)}else mt[0]!="stop"&&mt[0]!="close"||yr(S,7);else S.I==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?yr(S,7):il(S):mt[0]!="noop"&&S.l&&S.l.qa(mt),S.A=0)}}Jr(4)}catch{}}var up=class{constructor(m,b){this.g=m,this.map=b}};function Zo(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Qa(m){return m.h?1:m.g?m.g.size:0}function Hc(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function el(m,b){m.g?m.g.add(b):m.h=b}function Ja(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Zo.prototype.cancel=function(){if(this.i=fr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function fr(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const S of m.g.values())b=b.concat(S.G);return b}return T(m.i)}var eh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mr(m,b){if(m){m=m.split("&");for(let S=0;S<m.length;S++){const O=m[S].indexOf("=");let G,Z=null;O>=0?(G=m[S].substring(0,O),Z=m[S].substring(O+1)):G=m[S],b(G,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Es(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof Es?(this.l=m.l,Xa(this,m.j),this.o=m.o,this.g=m.g,Ts(this,m.u),this.h=m.h,Ji(this,eu(m.i)),this.m=m.m):m&&(b=String(m).match(eh))?(this.l=!1,Xa(this,b[1]||"",!0),this.o=Za(b[2]||""),this.g=Za(b[3]||"",!0),Ts(this,b[4]),this.h=Za(b[5]||"",!0),Ji(this,b[6]||"",!0),this.m=Za(b[7]||"")):(this.l=!1,this.i=new st(null,this.l))}Es.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(eo(b,Gc,!0),":");var S=this.g;return(S||b=="file")&&(m.push("//"),(b=this.o)&&m.push(eo(b,Gc,!0),"@"),m.push(hn(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&m.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(eo(S,S.charAt(0)=="/"?to:Yc,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",eo(S,Qc)),m.join("")},Es.prototype.resolve=function(m){const b=Rr(this);let S=!!m.j;S?Xa(b,m.j):S=!!m.o,S?b.o=m.o:S=!!m.g,S?b.g=m.g:S=m.u!=null;var O=m.h;if(S)Ts(b,m.u);else if(S=!!m.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var G=b.h.lastIndexOf("/");G!=-1&&(O=b.h.slice(0,G+1)+O)}if(G=O,G==".."||G==".")O="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){O=G.lastIndexOf("/",0)==0,G=G.split("/");const Z=[];for(let pe=0;pe<G.length;){const Ge=G[pe++];Ge=="."?O&&pe==G.length&&Z.push(""):Ge==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),O&&pe==G.length&&Z.push("")):(Z.push(Ge),O=!0)}O=Z.join("/")}else O=G}return S?b.h=O:S=m.i.toString()!=="",S?Ji(b,eu(m.i)):S=!!m.m,S&&(b.m=m.m),b};function Rr(m){return new Es(m)}function Xa(m,b,S){m.j=S?Za(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function Ts(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function Ji(m,b,S){b instanceof st?(m.i=b,nl(m.i,m.l)):(S||(b=eo(b,dp)),m.i=new st(b,m.l))}function dt(m,b,S){m.i.set(b,S)}function ii(m){return dt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Za(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function eo(m,b,S){return typeof m=="string"?(m=encodeURI(m).replace(b,Kc),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Kc(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Gc=/[#\/\?@]/g,Yc=/[#\?:]/g,to=/[#\?]/g,dp=/[#\?@]/g,Qc=/#/g;function st(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function Ss(m){m.g||(m.g=new Map,m.h=0,m.i&&mr(m.i,function(b,S){m.add(decodeURIComponent(b.replace(/\+/g," ")),S)}))}t=st.prototype,t.add=function(m,b){Ss(this),this.i=null,m=Ns(this,m);let S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(b),this.h+=1,this};function Jc(m,b){Ss(m),b=Ns(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function tl(m,b){return Ss(m),b=Ns(m,b),m.g.has(b)}t.forEach=function(m,b){Ss(this),this.g.forEach(function(S,O){S.forEach(function(G){m.call(b,G,O,this)},this)},this)};function Xc(m,b){Ss(m);let S=[];if(typeof b=="string")tl(m,b)&&(S=S.concat(m.g.get(Ns(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)S=S.concat(m[b]);return S}t.set=function(m,b){return Ss(this),this.i=null,m=Ns(this,m),tl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},t.get=function(m,b){return m?(m=Xc(this,m),m.length>0?String(m[0]):b):b};function Zc(m,b,S){Jc(m,b),S.length>0&&(m.i=null,m.g.set(Ns(m,b),T(S)),m.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let O=0;O<b.length;O++){var S=b[O];const G=hn(S);S=Xc(this,S);for(let Z=0;Z<S.length;Z++){let pe=G;S[Z]!==""&&(pe+="="+hn(S[Z])),m.push(pe)}}return this.i=m.join("&")};function eu(m){const b=new st;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function Ns(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function nl(m,b){b&&!m.j&&(Ss(m),m.i=null,m.g.forEach(function(S,O){const G=O.toLowerCase();O!=G&&(Jc(this,O),Zc(this,G,S))},m)),m.j=b}function ks(m,b){const S=new gt;if(o.Image){const O=new Image;O.onload=g(xn,S,"TestLoadImage: loaded",!0,b,O),O.onerror=g(xn,S,"TestLoadImage: error",!1,b,O),O.onabort=g(xn,S,"TestLoadImage: abort",!1,b,O),O.ontimeout=g(xn,S,"TestLoadImage: timeout",!1,b,O),o.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=m}else b(!1)}function js(m,b){const S=new gt,O=new AbortController,G=setTimeout(()=>{O.abort(),xn(S,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:O.signal}).then(Z=>{clearTimeout(G),Z.ok?xn(S,"TestPingServer: ok",!0,b):xn(S,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(G),xn(S,"TestPingServer: error",!1,b)})}function xn(m,b,S,O,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),O(S)}catch{}}function no(){this.g=new Zn}function ai(m){this.i=m.Sb||null,this.h=m.ab||!1}y(ai,Yr),ai.prototype.g=function(){return new pr(this.i,this.h)};function pr(m,b){rt.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(pr,rt),t=pr.prototype,t.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,es(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||o).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;th(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function th(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Xi(this):es(this),this.readyState==3&&th(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,Xi(this))},t.Na=function(m){this.g&&(this.response=m,Xi(this))},t.ga=function(){this.g&&Xi(this)};function Xi(m){m.readyState=4,m.l=null,m.j=null,m.B=null,es(m)}t.setRequestHeader=function(m,b){this.A.append(m,b)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var S=b.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=b.next();return m.join(`\r
`)};function es(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function nh(m){let b="";return ve(m,function(S,O){b+=O,b+=":",b+=S,b+=`\r
`}),b}function rl(m,b,S){e:{for(O in S){var O=!1;break e}O=!0}O||(S=nh(S),typeof m=="string"?S!=null&&hn(S):dt(m,b,S))}function yt(m){rt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(yt,rt);var rh=/^https?$/i,hp=["POST","PUT"];t=yt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,b,S,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rn.g(),this.g.onreadystatechange=x(f(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(Z){Zi(this,Z);return}if(m=S||"",S=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var G in O)S.set(G,O[G]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const Z of O.keys())S.set(Z,O.get(Z));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(S.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(hp,b,void 0)>=0)||O||G||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,pe]of S)this.g.setRequestHeader(Z,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Z){Zi(this,Z)}};function Zi(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,ea(m),li(m)}function ea(m){m.A||(m.A=!0,xt(m,"complete"),xt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,xt(this,"complete"),xt(this,"abort"),li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?oi(this):this.Xa())},t.Xa=function(){oi(this)};function oi(m){if(m.h&&typeof a<"u"){if(m.v&&Is(m)==4)setTimeout(m.Ca.bind(m),0);else if(xt(m,"readystatechange"),Is(m)==4){m.h=!1;try{const Z=m.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var S;if(!(S=b)){var O;if(O=Z===0){let pe=String(m.D).match(eh)[1]||null;!pe&&o.self&&o.self.location&&(pe=o.self.location.protocol.slice(0,-1)),O=!rh.test(pe?pe.toLowerCase():"")}S=O}if(S)xt(m,"complete"),xt(m,"success");else{m.o=6;try{var G=Is(m)>2?m.g.statusText:""}catch{G=""}m.l=G+" ["+m.ca()+"]",ea(m)}}finally{li(m)}}}}function li(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const S=m.g;m.g=null,b||xt(m,"ready");try{S.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Is(m){return m.g?m.g.readyState:0}t.ca=function(){try{return Is(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),Hi(b)}};function sh(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function tu(m){const b={};m=(m.g&&Is(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<m.length;O++){if(V(m[O]))continue;var S=Ka(m[O]);const G=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const Z=b[G]||[];b[G]=Z,Z.push(S)}he(b,function(O){return O.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cs(m,b,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||b}function sl(m){this.za=0,this.i=[],this.j=new gt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cs("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cs("baseRetryDelayMs",5e3,m),this.Za=Cs("retryDelaySeedMs",1e4,m),this.Ta=Cs("forwardChannelMaxRetries",2,m),this.va=Cs("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Zo(m&&m.concurrentRequestLimit),this.Ba=new no,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=sl.prototype,t.ka=8,t.I=1,t.connect=function(m,b,S,O){_t(0),this.W=m,this.H=b||{},S&&O!==void 0&&(this.H.OSID=S,this.H.OAID=O),this.F=this.X,this.J=ru(this,null,this.W),ci(this)};function il(m){if(al(m),m.I==3){var b=m.V++,S=Rr(m.J);if(dt(S,"SID",m.M),dt(S,"RID",b),dt(S,"TYPE","terminate"),As(m,S),b=new Ar(m,m.j,b),b.M=2,b.A=ii(Rr(S)),S=!1,o.navigator&&o.navigator.sendBeacon)try{S=o.navigator.sendBeacon(b.A.toString(),"")}catch{}!S&&o.Image&&(new Image().src=b.A,S=!0),S||(b.g=ah(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ga(b)}io(m)}function gr(m){m.g&&(so(m),m.g.cancel(),m.g=null)}function al(m){gr(m),m.v&&(o.clearTimeout(m.v),m.v=null),ol(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function ci(m){if(!Wc(m.h)&&!m.m){m.m=!0;var b=m.Ea;M||C(),z||(M(),z=!0),P.add(b,m),m.D=0}}function ih(m,b){return Qa(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Fe(f(m.Ea,m,b),cl(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const G=new Ar(this,this.j,m);let Z=this.o;if(this.U&&(Z?(Z=H(Z),ue(Z,this.U)):Z=this.U),this.u!==null||this.R||(G.J=Z,Z=null),this.S)e:{for(var b=0,S=0;S<this.i.length;S++){t:{var O=this.i[S];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(b+=O,b>4096){b=S;break e}if(b===4096||S===this.i.length-1){b=S+1;break e}}b=1e3}else b=1e3;b=nu(this,G,b),S=Rr(this.J),dt(S,"RID",m),dt(S,"CVER",22),this.G&&dt(S,"X-HTTP-Session-Id",this.G),As(this,S),Z&&(this.R?b="headers="+hn(nh(Z))+"&"+b:this.u&&rl(S,this.u,Z)),el(this.h,G),this.Ra&&dt(S,"TYPE","init"),this.S?(dt(S,"$req",b),dt(S,"SID","null"),G.U=!0,Zr(G,S,null)):Zr(G,S,b),this.I=2}}else this.I==3&&(m?ro(this,m):this.i.length==0||Wc(this.h)||ro(this))};function ro(m,b){var S;b?S=b.l:S=m.V++;const O=Rr(m.J);dt(O,"SID",m.M),dt(O,"RID",S),dt(O,"AID",m.K),As(m,O),m.u&&m.o&&rl(O,m.u,m.o),S=new Ar(m,m.j,S,m.D+1),m.u===null&&(S.J=m.o),b&&(m.i=b.G.concat(m.i)),b=nu(m,S,1e3),S.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),el(m.h,S),Zr(S,O,b)}function As(m,b){m.H&&ve(m.H,function(S,O){dt(b,O,S)}),m.l&&ve({},function(S,O){dt(b,O,S)})}function nu(m,b,S){S=Math.min(m.i.length,S);const O=m.l?f(m.l.Ka,m.l,m):null;e:{var G=m.i;let Ge=-1;for(;;){const Wt=["count="+S];Ge==-1?S>0?(Ge=G[0].g,Wt.push("ofs="+Ge)):Ge=0:Wt.push("ofs="+Ge);let mt=!0;for(let Qt=0;Qt<S;Qt++){var Z=G[Qt].g;const vr=G[Qt].map;if(Z-=Ge,Z<0)Ge=Math.max(0,G[Qt].g-100),mt=!1;else try{Z="req"+Z+"_"||"";try{var pe=vr instanceof Map?vr:Object.entries(vr);for(const[ui,Ps]of pe){let Ds=Ps;u(Ps)&&(Ds=Gr(Ps)),Wt.push(Z+ui+"="+encodeURIComponent(Ds))}}catch(ui){throw Wt.push(Z+"type="+encodeURIComponent("_badmap")),ui}}catch{O&&O(vr)}}if(mt){pe=Wt.join("&");break e}}pe=void 0}return m=m.i.splice(0,S),b.G=m,pe}function Pn(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;M||C(),z||(M(),z=!0),P.add(b,m),m.A=0}}function Rs(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Fe(f(m.Da,m),cl(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,ta(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Fe(f(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),gr(this),ta(this))};function so(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function ta(m){m.g=new Ar(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=Rr(m.na);dt(b,"RID","rpc"),dt(b,"SID",m.M),dt(b,"AID",m.K),dt(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&dt(b,"TO",m.ia),dt(b,"TYPE","xmlhttp"),As(m,b),m.u&&m.o&&rl(b,m.u,m.o),m.O&&(m.g.H=m.O);var S=m.g;m=m.ba,S.M=1,S.A=ii(Rr(b)),S.u=null,S.R=!0,zc(S,m)}t.Va=function(){this.C!=null&&(this.C=null,gr(this),Rs(this),_t(19))};function ol(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function ll(m,b){var S=null;if(m.g==b){ol(m),so(m),m.g=null;var O=2}else if(Hc(m.h,b))S=b.G,Ja(m.h,b),O=1;else return;if(m.I!=0){if(b.o)if(O==1){S=b.u?b.u.length:0,b=Date.now()-b.F;var G=m.D;O=Ir(),xt(O,new Qi(O,S)),ci(m)}else Pn(m);else if(G=b.m,G==3||G==0&&b.X>0||!(O==1&&ih(m,b)||O==2&&Rs(m)))switch(S&&S.length>0&&(b=m.h,b.i=b.i.concat(S)),G){case 1:yr(m,5);break;case 4:yr(m,10);break;case 3:yr(m,6);break;default:yr(m,2)}}}function cl(m,b){let S=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(S*=2),S*b}function yr(m,b){if(m.j.info("Error code "+b),b==2){var S=f(m.bb,m),O=m.Ua;const G=!O;O=new Es(O||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xa(O,"https"),ii(O),G?ks(O.toString(),S):js(O.toString(),S)}else _t(2);m.I=0,m.l&&m.l.pa(b),io(m),al(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function io(m){if(m.I=0,m.ja=[],m.l){const b=fr(m.h);(b.length!=0||m.i.length!=0)&&(I(m.ja,b),I(m.ja,m.i),m.h.i.length=0,T(m.i),m.i.length=0),m.l.oa()}}function ru(m,b,S){var O=S instanceof Es?Rr(S):new Es(S);if(O.g!="")b&&(O.g=b+"."+O.g),Ts(O,O.u);else{var G=o.location;O=G.protocol,b=b?b+"."+G.hostname:G.hostname,G=+G.port;const Z=new Es(null);O&&Xa(Z,O),b&&(Z.g=b),G&&Ts(Z,G),S&&(Z.h=S),O=Z}return S=m.G,b=m.wa,S&&b&&dt(O,S,b),dt(O,"VER",m.ka),As(m,O),O}function ah(m,b,S){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new yt(new ai({ab:S})):new yt(m.ma),b.Fa(m.L),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oh(){}t=oh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ul(){}ul.prototype.g=function(m,b){return new wn(m,b)};function wn(m,b){rt.call(this),this.g=new sl(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!V(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!V(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new na(this)}y(wn,rt),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){il(this.g)},wn.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.v&&(S={},S.__data__=Gr(m),m=S);b.i.push(new up(b.Ya++,m)),b.I==3&&ci(b)},wn.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,wn.Z.N.call(this)};function lh(m){Ki.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const S in b){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}y(lh,Ki);function ch(){Gi.call(this),this.status=1}y(ch,Gi);function na(m){this.g=m}y(na,oh),na.prototype.ra=function(){xt(this.g,"a")},na.prototype.qa=function(m){xt(this.g,new lh(m))},na.prototype.pa=function(m){xt(this.g,new ch)},na.prototype.oa=function(){xt(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,WN=function(){return new ul},qN=function(){return Ir()},zN=er,t0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hr.NO_ERROR=0,hr.TIMEOUT=8,hr.HTTP_ERROR=6,Lf=hr,Yt.COMPLETE="complete",BN=Yt,Qr.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",rt.prototype.listen=rt.prototype.J,Ou=Qr,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,$N=yt}).apply(typeof af<"u"?af:typeof self<"u"?self:typeof window<"u"?window:{});const n1="@firebase/firestore",r1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Om("@firebase/firestore");function Bl(){return Fo.logLevel}function be(t,...e){if(Fo.logLevel<=et.DEBUG){const n=e.map(wv);Fo.debug(`Firestore (${kc}): ${t}`,...n)}}function Pi(t,...e){if(Fo.logLevel<=et.ERROR){const n=e.map(wv);Fo.error(`Firestore (${kc}): ${t}`,...n)}}function dc(t,...e){if(Fo.logLevel<=et.WARN){const n=e.map(wv);Fo.warn(`Firestore (${kc}): ${t}`,...n)}}function wv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,HN(t,r,n)}function HN(t,e,n){let r=`FIRESTORE (${kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Pi(r),new Error(r)}function ft(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||HN(e,s,r)}function Ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends xs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Fn.UNAUTHENTICATED)))}shutdown(){}}class PM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class DM{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ft(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let a=new Aa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Aa,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Aa)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new KN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Fn(e)}}class OM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new OM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class s1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ft(this.o===void 0,3512);const r=a=>{a.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new s1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new s1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=VM(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function tt(t,e){return t<e?-1:t>e?1:0}function n0(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return Kg(s)===Kg(a)?tt(s,a):Kg(s)?1:-1}return tt(t.length,e.length)}const FM=55296,UM=57343;function Kg(t){const e=t.charCodeAt(0);return e>=FM&&e<=UM}function hc(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="__name__";class Us{constructor(e,n,r){n===void 0?n=0:n>e.length&&ze(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ze(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Us.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Us?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Us.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return tt(e.length,n.length)}static compareSegments(e,n){const r=Us.isNumericId(e),s=Us.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Us.extractNumericId(e).compare(Us.extractNumericId(n)):n0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ca.fromString(e.substring(4,e.length-2))}}class Ot extends Us{construct(e,n,r){return new Ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ot(n)}static emptyPath(){return new Ot([])}}const $M=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends Us{construct(e,n,r){return new kn(e,n,r)}static isValidIdentifier(e){return $M.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i1}static keyField(){return new kn([i1])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Pe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Pe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Pe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(a(),s++)}if(a(),o)throw new Pe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(n)}static emptyPath(){return new kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Ot.fromString(e))}static fromName(e){return new Le(Ot.fromString(e).popFirst(5))}static empty(){return new Le(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t,e,n){if(!n)throw new Pe(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zM(t,e,n,r){if(e===!0&&r===!0)throw new Pe(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function a1(t){if(!Le.isDocumentKey(t))throw new Pe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _v(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ze(12329,{type:typeof t})}function sd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_v(t);throw new Pe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Dd(t,e){if(!GN(t))throw new Pe(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Pe(oe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=-62135596800,l1=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*l1);return new kt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<o1)throw new Pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/l1}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dd(e,kt._jsonSchema))return new kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:tn("string",kt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new kt(0,0))}static max(){return new He(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=-1;function qM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=He.fromTimestamp(r===1e9?new kt(n+1,0):new kt(n,r));return new Pa(s,Le.empty(),e)}function WM(t){return new Pa(t.readTime,t.key,id)}class Pa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pa(He.min(),Le.empty(),id)}static max(){return new Pa(He.max(),Le.empty(),id)}}function HM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Le.comparator(t.documentKey,e.documentKey),n!==0?n:tt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==KM)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,r)=>{n(e)}))}static reject(e){return new re(((n,r)=>{r(e)}))}static waitFor(e){return new re(((n,r)=>{let s=0,a=0,o=!1;e.forEach((u=>{++s,u.next((()=>{++a,o&&a===s&&n()}),(d=>r(d)))})),o=!0,a===s&&n()}))}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next((s=>s?re.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,a)=>{r.push(n.call(this,s,a))})),this.waitFor(r)}static mapArray(e,n){return new re(((r,s)=>{const a=e.length,o=new Array(a);let u=0;for(let d=0;d<a;d++){const f=d;n(e[f]).next((g=>{o[f]=g,++u,u===a&&r(o)}),(g=>s(g)))}}))}static doWhile(e,n){return new re(((r,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):r()};a()}))}}function YM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ic(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=-1;function Um(t){return t==null}function sm(t){return t===0&&1/t==-1/0}function QM(t){return typeof t=="number"&&Number.isInteger(t)&&!sm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="";function JM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=c1(e)),e=XM(t.get(n),e);return c1(e)}function XM(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case YN:n+="";break;default:n+=a}}return n}function c1(t){return t+YN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function QN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.comparator=e,this.root=n||Nn.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new of(this.root,e,this.comparator,!1)}getReverseIterator(){return new of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new of(this.root,e,this.comparator,!0)}}class of{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Nn.RED,this.left=s??Nn.EMPTY,this.right=a??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Nn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Nn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d1(this.data.getIterator())}getIteratorFrom(e){return new d1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class d1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new ms([])}unionWith(e){let n=new un(kn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ms(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new JN("Invalid base64 string: "+a):a}})(e);return new Cn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a})(e);return new Cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const ZM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Da(t){if(ft(!!t,39018),typeof t=="string"){let e=0;const n=ZM.exec(t);if(ft(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kt(t.seconds),nanos:Kt(t.nanos)}}function Kt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oa(t){return typeof t=="string"?Cn.fromBase64String(t):Cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="server_timestamp",ZN="__type__",ek="__previous_value__",tk="__local_write_time__";function Tv(t){return(t?.mapValue?.fields||{})[ZN]?.stringValue===XN}function $m(t){const e=t.mapValue.fields[ek];return Tv(e)?$m(e):e}function ad(t){const e=Da(t.mapValue.fields[tk].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,n,r,s,a,o,u,d,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const im="(default)";class od{constructor(e,n){this.projectId=e,this.database=n||im}static empty(){return new od("","")}get isDefaultDatabase(){return this.database===im}isEqual(e){return e instanceof od&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="__type__",t5="__max__",lf={mapValue:{}},rk="__vector__",am="value";function Ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tv(t)?4:r5(t)?9007199254740991:n5(t)?10:11:ze(28295,{value:t})}function Js(t,e){if(t===e)return!0;const n=Ma(t);if(n!==Ma(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ad(t).isEqual(ad(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Da(s.timestampValue),u=Da(a.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Oa(s.bytesValue).isEqual(Oa(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return Kt(s.geoPointValue.latitude)===Kt(a.geoPointValue.latitude)&&Kt(s.geoPointValue.longitude)===Kt(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Kt(s.integerValue)===Kt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Kt(s.doubleValue),u=Kt(a.doubleValue);return o===u?sm(o)===sm(u):isNaN(o)&&isNaN(u)}return!1})(t,e);case 9:return hc(t.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:case 11:return(function(s,a){const o=s.mapValue.fields||{},u=a.mapValue.fields||{};if(u1(o)!==u1(u))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(u[d]===void 0||!Js(o[d],u[d])))return!1;return!0})(t,e);default:return ze(52216,{left:t})}}function ld(t,e){return(t.values||[]).find((n=>Js(n,e)))!==void 0}function fc(t,e){if(t===e)return 0;const n=Ma(t),r=Ma(e);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const u=Kt(a.integerValue||a.doubleValue),d=Kt(o.integerValue||o.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return h1(t.timestampValue,e.timestampValue);case 4:return h1(ad(t),ad(e));case 5:return n0(t.stringValue,e.stringValue);case 6:return(function(a,o){const u=Oa(a),d=Oa(o);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const u=a.split("/"),d=o.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=tt(u[f],d[f]);if(g!==0)return g}return tt(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const u=tt(Kt(a.latitude),Kt(o.latitude));return u!==0?u:tt(Kt(a.longitude),Kt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return f1(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const u=a.fields||{},d=o.fields||{},f=u[am]?.arrayValue,g=d[am]?.arrayValue,y=tt(f?.values?.length||0,g?.values?.length||0);return y!==0?y:f1(f,g)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===lf.mapValue&&o===lf.mapValue)return 0;if(a===lf.mapValue)return 1;if(o===lf.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),f=o.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=n0(d[y],g[y]);if(x!==0)return x;const T=fc(u[d[y]],f[g[y]]);if(T!==0)return T}return tt(d.length,g.length)})(t.mapValue,e.mapValue);default:throw ze(23264,{he:n})}}function h1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return tt(t,e);const n=Da(t),r=Da(e),s=tt(n.seconds,r.seconds);return s!==0?s:tt(n.nanos,r.nanos)}function f1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=fc(n[s],r[s]);if(a)return a}return tt(n.length,r.length)}function mc(t){return r0(t)}function r0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Da(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Oa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Le.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=r0(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${r0(n.fields[o])}`;return s+"}"})(t.mapValue):ze(61005,{value:t})}function Vf(t){switch(Ma(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$m(t);return e?16+Vf(e):16;case 5:return 2*t.stringValue.length;case 6:return Oa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+Vf(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Go(r.fields,((a,o)=>{s+=a.length+Vf(o)})),s})(t.mapValue);default:throw ze(13486,{value:t})}}function s0(t){return!!t&&"integerValue"in t}function Sv(t){return!!t&&"arrayValue"in t}function m1(t){return!!t&&"nullValue"in t}function p1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ff(t){return!!t&&"mapValue"in t}function n5(t){return(t?.mapValue?.fields||{})[nk]?.stringValue===rk}function zu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Go(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=zu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zu(t.arrayValue.values[n]);return e}return{...t}}function r5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===t5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ff(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(n)}setAll(e){let n=kn.emptyPath(),r={},s=[];e.forEach(((o,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=zu(o):s.push(u.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Ff(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ff(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Go(n,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new $r(zu(this.value))}}function sk(t){const e=[];return Go(t.fields,((n,r)=>{const s=new kn([n]);if(Ff(r)){const a=sk(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)})),new ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n,r,s,a,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Un(e,0,He.min(),He.min(),He.min(),$r.empty(),0)}static newFoundDocument(e,n,r,s){return new Un(e,1,n,He.min(),r,s,0)}static newNoDocument(e,n){return new Un(e,2,n,He.min(),He.min(),$r.empty(),0)}static newUnknownDocument(e,n){return new Un(e,3,n,He.min(),He.min(),$r.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.position=e,this.inclusive=n}}function g1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=Le.comparator(Le.fromName(o.referenceValue),n.key):r=fc(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function y1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Js(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n="asc"){this.field=e,this.dir=n}}function s5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{}class cn extends ik{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new a5(e,n,r):n==="array-contains"?new c5(e,r):n==="in"?new u5(e,r):n==="not-in"?new d5(e,r):n==="array-contains-any"?new h5(e,r):new cn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new o5(e,r):new l5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fc(n,this.value)):n!==null&&Ma(this.value)===Ma(n)&&this.matchesComparison(fc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xs extends ik{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xs(e,n)}matches(e){return ak(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ak(t){return t.op==="and"}function ok(t){return i5(t)&&ak(t)}function i5(t){for(const e of t.filters)if(e instanceof Xs)return!1;return!0}function i0(t){if(t instanceof cn)return t.field.canonicalString()+t.op.toString()+mc(t.value);if(ok(t))return t.filters.map((e=>i0(e))).join(",");{const e=t.filters.map((n=>i0(n))).join(",");return`${t.op}(${e})`}}function lk(t,e){return t instanceof cn?(function(r,s){return s instanceof cn&&r.op===s.op&&r.field.isEqual(s.field)&&Js(r.value,s.value)})(t,e):t instanceof Xs?(function(r,s){return s instanceof Xs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,o,u)=>a&&lk(o,s.filters[u])),!0):!1})(t,e):void ze(19439)}function ck(t){return t instanceof cn?(function(n){return`${n.field.canonicalString()} ${n.op} ${mc(n.value)}`})(t):t instanceof Xs?(function(n){return n.op.toString()+" {"+n.getFilters().map(ck).join(" ,")+"}"})(t):"Filter"}class a5 extends cn{constructor(e,n,r){super(e,n,r),this.key=Le.fromName(r.referenceValue)}matches(e){const n=Le.comparator(e.key,this.key);return this.matchesComparison(n)}}class o5 extends cn{constructor(e,n){super(e,"in",n),this.keys=uk("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class l5 extends cn{constructor(e,n){super(e,"not-in",n),this.keys=uk("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function uk(t,e){return(e.arrayValue?.values||[]).map((n=>Le.fromName(n.referenceValue)))}class c5 extends cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sv(n)&&ld(n.arrayValue,this.value)}}class u5 extends cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ld(this.value.arrayValue,n)}}class d5 extends cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ld(this.value.arrayValue,n)}}class h5 extends cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ld(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n=null,r=[],s=[],a=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=u,this.Te=null}}function v1(t,e=null,n=[],r=[],s=null,a=null,o=null){return new f5(t,e,n,r,s,a,o)}function Nv(t){const e=Ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>i0(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Um(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>mc(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>mc(r))).join(",")),e.Te=n}return e.Te}function kv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!s5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y1(t.startAt,e.startAt)&&y1(t.endAt,e.endAt)}function a0(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n=null,r=[],s=[],a=null,o="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function m5(t,e,n,r,s,a,o,u){return new Bm(t,e,n,r,s,a,o,u)}function jv(t){return new Bm(t)}function x1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function p5(t){return t.collectionGroup!==null}function qu(t){const e=Ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new un(kn.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new lm(a,r))})),n.has(kn.keyField().canonicalString())||e.Ie.push(new lm(kn.keyField(),r))}return e.Ie}function qs(t){const e=Ye(t);return e.Ee||(e.Ee=g5(e,qu(t))),e.Ee}function g5(t,e){if(t.limitType==="F")return v1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new lm(s.field,a)}));const n=t.endAt?new om(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new om(t.startAt.position,t.startAt.inclusive):null;return v1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function o0(t,e,n){return new Bm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zm(t,e){return kv(qs(t),qs(e))&&t.limitType===e.limitType}function dk(t){return`${Nv(qs(t))}|lt:${t.limitType}`}function zl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>ck(s))).join(", ")}]`),Um(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>mc(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>mc(s))).join(",")),`Target(${r})`})(qs(t))}; limitType=${t.limitType})`}function qm(t,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,s){for(const a of qu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,u,d){const f=g1(o,u,d);return o.inclusive?f<=0:f<0})(r.startAt,qu(r),s)||r.endAt&&!(function(o,u,d){const f=g1(o,u,d);return o.inclusive?f>=0:f>0})(r.endAt,qu(r),s))})(t,e)}function y5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hk(t){return(e,n)=>{let r=!1;for(const s of qu(t)){const a=v5(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function v5(t,e,n){const r=t.field.isKeyField()?Le.comparator(e.key,n.key):(function(a,o,u){const d=o.data.field(a),f=u.data.field(a);return d!==null&&f!==null?fc(d,f):ze(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ze(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Go(this.inner,((n,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return QN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=new Lt(Le.comparator);function Di(){return x5}const fk=new Lt(Le.comparator);function Mu(...t){let e=fk;for(const n of t)e=e.insert(n.key,n);return e}function mk(t){let e=fk;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function jo(){return Wu()}function pk(){return Wu()}function Wu(){return new Yo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const w5=new Lt(Le.comparator),b5=new un(Le.comparator);function nt(...t){let e=b5;for(const n of t)e=e.add(n);return e}const _5=new un(tt);function E5(){return _5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sm(e)?"-0":e}}function gk(t){return{integerValue:""+t}}function T5(t,e){return QM(e)?gk(e):Iv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this._=void 0}}function S5(t,e,n){return t instanceof cm?(function(s,a){const o={fields:{[ZN]:{stringValue:XN},[tk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Tv(a)&&(a=$m(a)),a&&(o.fields[ek]=a),{mapValue:o}})(n,e):t instanceof cd?vk(t,e):t instanceof ud?xk(t,e):(function(s,a){const o=yk(s,a),u=w1(o)+w1(s.Ae);return s0(o)&&s0(s.Ae)?gk(u):Iv(s.serializer,u)})(t,e)}function N5(t,e,n){return t instanceof cd?vk(t,e):t instanceof ud?xk(t,e):n}function yk(t,e){return t instanceof um?(function(r){return s0(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class cm extends Wm{}class cd extends Wm{constructor(e){super(),this.elements=e}}function vk(t,e){const n=wk(e);for(const r of t.elements)n.some((s=>Js(s,r)))||n.push(r);return{arrayValue:{values:n}}}class ud extends Wm{constructor(e){super(),this.elements=e}}function xk(t,e){let n=wk(e);for(const r of t.elements)n=n.filter((s=>!Js(s,r)));return{arrayValue:{values:n}}}class um extends Wm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function w1(t){return Kt(t.integerValue||t.doubleValue)}function wk(t){return Sv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function k5(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof cd&&s instanceof cd||r instanceof ud&&s instanceof ud?hc(r.elements,s.elements,Js):r instanceof um&&s instanceof um?Js(r.Ae,s.Ae):r instanceof cm&&s instanceof cm})(t.transform,e.transform)}class j5{constructor(e,n){this.version=e,this.transformResults=n}}class ji{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ji}static exists(e){return new ji(void 0,e)}static updateTime(e){return new ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hm{}function bk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ek(t.key,ji.none()):new Od(t.key,t.data,ji.none());{const n=t.data,r=$r.empty();let s=new un(kn.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Qo(t.key,r,new ms(s.toArray()),ji.none())}}function I5(t,e,n){t instanceof Od?(function(s,a,o){const u=s.value.clone(),d=_1(s.fieldTransforms,a,o.transformResults);u.setAll(d),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):t instanceof Qo?(function(s,a,o){if(!Uf(s.precondition,a))return void a.convertToUnknownDocument(o.version);const u=_1(s.fieldTransforms,a,o.transformResults),d=a.data;d.setAll(_k(s)),d.setAll(u),a.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,n):(function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Hu(t,e,n,r){return t instanceof Od?(function(a,o,u,d){if(!Uf(a.precondition,o))return u;const f=a.value.clone(),g=E1(a.fieldTransforms,d,o);return f.setAll(g),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof Qo?(function(a,o,u,d){if(!Uf(a.precondition,o))return u;const f=E1(a.fieldTransforms,d,o),g=o.data;return g.setAll(_k(a)),g.setAll(f),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((y=>y.field)))})(t,e,n,r):(function(a,o,u){return Uf(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(t,e,n)}function C5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=yk(r.transform,s||null);a!=null&&(n===null&&(n=$r.empty()),n.set(r.field,a))}return n||null}function b1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&hc(r,s,((a,o)=>k5(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Od extends Hm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Qo extends Hm{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function _k(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function _1(t,e,n){const r=new Map;ft(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,u=e.data.field(a.field);r.set(a.field,N5(o,u,n[s]))}return r}function E1(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,S5(a,o,e))}return r}class Ek extends Hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A5 extends Hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&I5(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pk();return this.mutations.forEach((s=>{const a=e.get(s.key),o=a.overlayedDocument;let u=this.applyToLocalView(o,a.mutatedFields);u=n.has(s.key)?null:u;const d=bk(o,u);d!==null&&r.set(s.key,d),o.isValidDocument()||o.convertToNoDocument(He.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),nt())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,((n,r)=>b1(n,r)))&&hc(this.baseMutations,e.baseMutations,((n,r)=>b1(n,r)))}}class Cv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ft(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return w5})();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new Cv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P5=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,it;function O5(t){switch(t){case oe.OK:return ze(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return ze(15467,{code:t})}}function Tk(t){if(t===void 0)return Pi("GRPC error has no .code"),oe.UNKNOWN;switch(t){case Xt.OK:return oe.OK;case Xt.CANCELLED:return oe.CANCELLED;case Xt.UNKNOWN:return oe.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return oe.INTERNAL;case Xt.UNAVAILABLE:return oe.UNAVAILABLE;case Xt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Xt.NOT_FOUND:return oe.NOT_FOUND;case Xt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Xt.ABORTED:return oe.ABORTED;case Xt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Xt.DATA_LOSS:return oe.DATA_LOSS;default:return ze(39323,{code:t})}}(it=Xt||(Xt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=new Ca([4294967295,4294967295],0);function T1(t){const e=M5().encode(t),n=new UN;return n.update(e),new Uint8Array(n.digest())}function S1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ca([n,r],0),new Ca([s,a],0)]}class Av{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lu(`Invalid padding: ${n}`);if(r<0)throw new Lu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ca.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ca.fromNumber(r)));return s.compare(L5)===1&&(s=new Ca([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=T1(e),[r,s]=S1(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Av(a,s,n);return r.forEach((u=>o.insert(u))),o}insert(e){if(this.ge===0)return;const n=T1(e),[r,s]=S1(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Md.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Km(He.min(),s,new Lt(tt),Di(),nt())}}class Md{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Md(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Sk{constructor(e,n){this.targetId=e,this.Ce=n}}class Nk{constructor(e,n,r=Cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class N1{constructor(){this.ve=0,this.Fe=k1(),this.Me=Cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nt(),n=nt(),r=nt();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ze(38017,{changeType:a})}})),new Md(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=k1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class V5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Di(),this.Je=cf(),this.He=cf(),this.Ye=new Lt(tt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(a0(a))if(r===0){const o=new Le(a.path);this.et(n,o,Un.newNoDocument(o,He.min()))}else ft(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),d=u?this.ct(u,e,o):1;if(d!==0){this.it(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,u;try{o=Oa(r).toUint8Array()}catch(d){if(d instanceof JN)return dc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Av(o,s,a)}catch(d){return dc(d instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((a=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(n,a,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const u=this.ot(o);if(u){if(a.current&&a0(u.target)){const d=new Le(u.target.path);this.It(d).has(o)||this.Et(o,d)||this.et(o,d,Un.newNoDocument(d,e))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=nt();this.He.forEach(((a,o)=>{let u=!0;o.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const s=new Km(e,n,this.Ye,this.je,r);return this.je=Di(),this.Je=cf(),this.He=cf(),this.Ye=new Lt(tt),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new N1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new un(tt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new un(tt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new N1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cf(){return new Lt(Le.comparator)}function k1(){return new Lt(Le.comparator)}const F5={asc:"ASCENDING",desc:"DESCENDING"},U5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$5={and:"AND",or:"OR"};class B5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function l0(t,e){return t.useProto3Json||Um(e)?e:{value:e}}function dm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function z5(t,e){return dm(t,e.toTimestamp())}function Ws(t){return ft(!!t,49232),He.fromTimestamp((function(n){const r=Da(n);return new kt(r.seconds,r.nanos)})(t))}function Rv(t,e){return c0(t,e).canonicalString()}function c0(t,e){const n=(function(s){return new Ot(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function jk(t){const e=Ot.fromString(t);return ft(Pk(e),10190,{key:e.toString()}),e}function u0(t,e){return Rv(t.databaseId,e.path)}function Gg(t,e){const n=jk(e);if(n.get(1)!==t.databaseId.projectId)throw new Pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Le(Ck(n))}function Ik(t,e){return Rv(t.databaseId,e)}function q5(t){const e=jk(t);return e.length===4?Ot.emptyPath():Ck(e)}function d0(t){return new Ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ck(t){return ft(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function j1(t,e,n){return{name:u0(t,e),fields:n.value.mapValue.fields}}function W5(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ze(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(f,g){return f.useProto3Json?(ft(g===void 0||typeof g=="string",58123),Cn.fromBase64String(g||"")):(ft(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Cn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&(function(f){const g=f.code===void 0?oe.UNKNOWN:Tk(f.code);return new Pe(g,f.message||"")})(o);n=new Nk(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gg(t,r.document.name),a=Ws(r.document.updateTime),o=r.document.createTime?Ws(r.document.createTime):He.min(),u=new $r({mapValue:{fields:r.document.fields}}),d=Un.newFoundDocument(s,a,o,u),f=r.targetIds||[],g=r.removedTargetIds||[];n=new $f(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gg(t,r.document),a=r.readTime?Ws(r.readTime):He.min(),o=Un.newNoDocument(s,a),u=r.removedTargetIds||[];n=new $f([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gg(t,r.document),a=r.removedTargetIds||[];n=new $f([],a,s,null)}else{if(!("filter"in e))return ze(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new D5(s,a),u=r.targetId;n=new Sk(u,o)}}return n}function H5(t,e){let n;if(e instanceof Od)n={update:j1(t,e.key,e.value)};else if(e instanceof Ek)n={delete:u0(t,e.key)};else if(e instanceof Qo)n={update:j1(t,e.key,e.data),updateMask:tL(e.fieldMask)};else{if(!(e instanceof A5))return ze(16599,{Vt:e.type});n={verify:u0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const u=o.transform;if(u instanceof cm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof cd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ud)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof um)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw ze(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:z5(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ze(27497)})(t,e.precondition)),n}function K5(t,e){return t&&t.length>0?(ft(e!==void 0,14353),t.map((n=>(function(s,a){let o=s.updateTime?Ws(s.updateTime):Ws(a);return o.isEqual(He.min())&&(o=Ws(a)),new j5(o,s.transformResults||[])})(n,e)))):[]}function G5(t,e){return{documents:[Ik(t,e.path)]}}function Y5(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ik(t,s);const a=(function(f){if(f.length!==0)return Rk(Xs.create(f,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(f){if(f.length!==0)return f.map((g=>(function(x){return{field:ql(x.field),direction:X5(x.dir)}})(g)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=l0(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:s}}function Q5(t){let e=q5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ft(r===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=(function(y){const x=Ak(y);return x instanceof Xs&&ok(x)?x.getFilters():[x]})(n.where));let o=[];n.orderBy&&(o=(function(y){return y.map((x=>(function(I){return new lm(Wl(I.field),(function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(x)))})(n.orderBy));let u=null;n.limit&&(u=(function(y){let x;return x=typeof y=="object"?y.value:y,Um(x)?null:x})(n.limit));let d=null;n.startAt&&(d=(function(y){const x=!!y.before,T=y.values||[];return new om(T,x)})(n.startAt));let f=null;return n.endAt&&(f=(function(y){const x=!y.before,T=y.values||[];return new om(T,x)})(n.endAt)),m5(e,s,o,a,u,"F",d,f)}function J5(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ak(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wl(n.unaryFilter.field);return cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wl(n.unaryFilter.field);return cn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Wl(n.unaryFilter.field);return cn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wl(n.unaryFilter.field);return cn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(t):t.fieldFilter!==void 0?(function(n){return cn.create(Wl(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Xs.create(n.compositeFilter.filters.map((r=>Ak(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(n.compositeFilter.op))})(t):ze(30097,{filter:t})}function X5(t){return F5[t]}function Z5(t){return U5[t]}function eL(t){return $5[t]}function ql(t){return{fieldPath:t.canonicalString()}}function Wl(t){return kn.fromServerFormat(t.fieldPath)}function Rk(t){return t instanceof cn?(function(n){if(n.op==="=="){if(p1(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NAN"}};if(m1(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p1(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NOT_NAN"}};if(m1(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(n.field),op:Z5(n.op),value:n.value}}})(t):t instanceof Xs?(function(n){const r=n.getFilters().map((s=>Rk(s)));return r.length===1?r[0]:{compositeFilter:{op:eL(n.op),filters:r}}})(t):ze(54877,{filter:t})}function tL(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Pk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r,s,a=He.min(),o=He.min(),u=Cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.yt=e}}function rL(t){const e=Q5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?o0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.Cn=new iL}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Pa.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Pa.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class iL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new un(Ot.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new un(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dk=41943040;class lr{static withCacheSize(e){return new lr(e,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(Dk,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pc(0)}static cr(){return new pc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="LruGarbageCollector",aL=1048576;function A1([t,e],[n,r]){const s=tt(t,n);return s===0?tt(e,r):s}class oL{constructor(e){this.Ir=e,this.buffer=new un(A1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();A1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(C1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ic(n)?be(C1,"Ignoring IndexedDB error during garbage collection: ",n):await jc(n)}await this.Vr(3e5)}))}}class cL{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(Fm.ce);const r=new oL(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(I1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),I1):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,o,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,o=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,n)))).next((y=>(a=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(f=Date.now(),Bl()<=et.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-g}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y}))))}}function uL(t,e){return new cL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.changes=new Yo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Hu(r.mutation,s,ms.empty(),kt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,nt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=nt()){const s=jo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((a=>{let o=Mu();return a.forEach(((u,d)=>{o=o.insert(u,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=jo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,nt())))}populateOverlays(e,n,r){const s=[];return r.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((o,u)=>{n.set(o,u)}))}))}computeViews(e,n,r,s){let a=Di();const o=Wu(),u=(function(){return Wu()})();return n.forEach(((d,f)=>{const g=r.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Qo)?a=a.insert(f.key,f):g!==void 0?(o.set(f.key,g.mutation.getFieldMask()),Hu(g.mutation,f,g.mutation.getFieldMask(),kt.now())):o.set(f.key,ms.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((f,g)=>o.set(f,g))),n.forEach(((f,g)=>u.set(f,new hL(g,o.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=Wu();let s=new Lt(((o,u)=>o-u)),a=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const u of o)u.keys().forEach((d=>{const f=n.get(d);if(f===null)return;let g=r.get(d)||ms.empty();g=u.applyToLocalView(f,g),r.set(d,g);const y=(s.get(u.batchId)||nt()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=pk();g.forEach((x=>{if(!a.has(x)){const T=bk(n.get(x),r.get(x));T!==null&&y.set(x,T),a=a.add(x)}})),o.push(this.documentOverlayCache.saveOverlays(e,f,y))}return re.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return Le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):p5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):re.resolve(jo());let u=id,d=a;return o.next((f=>re.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next((x=>{d=d.insert(g,x)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,d,f,nt()))).next((g=>({batchId:u,changes:mk(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Le(n)).next((r=>{let s=Mu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=Mu();return this.indexManager.getCollectionParents(e,a).next((u=>re.forEach(u,(d=>{const f=(function(y,x){return new Bm(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((g=>{g.forEach(((y,x)=>{o=o.insert(y,x)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s)))).next((o=>{a.forEach(((d,f)=>{const g=f.getKey();o.get(g)===null&&(o=o.insert(g,Un.newInvalidDocument(g)))}));let u=Mu();return o.forEach(((d,f)=>{const g=a.get(d);g!==void 0&&Hu(g.mutation,f,ms.empty(),kt.now()),qm(n,f)&&(u=u.insert(d,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ws(s.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:rL(s.bundledQuery),readTime:Ws(s.readTime)}})(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.overlays=new Lt(Le.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jo();return re.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,a)=>{this.St(e,n,a)})),re.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const s=jo(),a=n.length+1,o=new Le(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return re.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Lt(((f,g)=>f-g));const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=a.get(f.largestBatchId);g===null&&(g=jo(),a=a.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=jo(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return re.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new P5(n,r));let a=this.qr.get(n);a===void 0&&(a=nt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Qr=new un(gn.$r),this.Ur=new un(gn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new gn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new gn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Le(new Ot([])),r=new gn(n,e),s=new gn(n,e+1),a=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Le(new Ot([])),r=new gn(n,e),s=new gn(n,e+1);let a=nt();return this.Ur.forEachInRange([r,s],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new gn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Le.comparator(e.key,n.key)||tt(e.Yr,n.Yr)}static Kr(e,n){return tt(e.Yr,n.Yr)||Le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new un(gn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new R5(a,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new gn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Ev:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gn(n,0),s=new gn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],(o=>{const u=this.Xr(o.Yr);a.push(u)})),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new un(tt);return n.forEach((s=>{const a=new gn(s,0),o=new gn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(u=>{r=r.add(u.Yr)}))})),re.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Le.isDocumentKey(a)||(a=a.child(""));const o=new gn(new Le(a),0);let u=new un(tt);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),o),re.resolve(this.ti(u))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return re.forEach(n.mutations,(s=>{const a=new gn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new gn(n,0),s=this.Zr.firstAfterOrEqual(r);return re.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.ri=e,this.docs=(function(){return new Lt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(n))}getEntries(e,n){let r=Di();return n.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Un.newInvalidDocument(s))})),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Di();const o=n.path,u=new Le(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||HM(WM(g),r)<=0||(s.has(g.key)||qm(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,n,r,s){ze(9500)}ii(e,n){return re.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new xL(this)}getSize(e){return re.resolve(this.size)}}class xL extends dL{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.persistence=e,this.si=new Yo((n=>Nv(n)),kv),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new Pv,this.targetCount=0,this.ai=pc.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new pc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach(((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),re.waitFor(a).next((()=>s))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),re.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((o=>{a.push(s.markPotentiallyOrphaned(e,o))})),re.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,n){this.ui={},this.overlays={},this.ci=new Fm(0),this.li=!1,this.li=!0,this.hi=new gL,this.referenceDelegate=e(this),this.Pi=new wL(this),this.indexManager=new sL,this.remoteDocumentCache=(function(s){return new vL(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new nL(n),this.Ii=new mL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new yL(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){be("MemoryPersistence","Starting transaction:",e);const s=new bL(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,n){return re.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class bL extends GM{constructor(e){super(),this.currentSequenceNumber=e}}class Dv{constructor(e){this.persistence=e,this.Ri=new Pv,this.Vi=null}static mi(e){return new Dv(e)}get fi(){if(this.Vi)return this.Vi;throw ze(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(r=>{const s=Le.fromPath(r);return this.gi(e,s).next((a=>{a||n.removeEntry(s,He.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hm{constructor(e,n){this.persistence=e,this.pi=new Yo((r=>JM(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=uL(this,n)}static mi(e,n){return new hm(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return re.forEach(this.pi,((r,s)=>this.br(e,r,s).next((a=>a?re.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((u=>{u||(r++,a.removeEntry(o,He.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vf(e.data.value)),n}br(e,n,r){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return re.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=nt(),s=nt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Ov(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return YP()?8:YM(Bn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,n,s,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new _L;return this.Ss(e,n,o).next((u=>{if(a.result=u,this.Vs)return this.bs(e,n,o,u.size)}))})).next((()=>a.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Bl()<=et.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",zl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Bl()<=et.DEBUG&&be("QueryEngine","Query:",zl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Bl()<=et.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",zl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qs(n))):re.resolve())}ys(e,n){if(x1(n))return re.resolve(null);let r=qs(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=o0(n,null,"F"),r=qs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=nt(...a);return this.ps.getDocuments(e,o).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const f=this.Ds(n,u);return this.Cs(n,f,o,d.readTime)?this.ys(e,o0(n,null,"F")):this.vs(e,f,n,d)}))))})))))}ws(e,n,r,s){return x1(n)||s.isEqual(He.min())?re.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,s)?re.resolve(null):(Bl()<=et.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zl(n)),this.vs(e,o,n,qM(s,id)).next((u=>u)))}))}Ds(e,n){let r=new un(hk(e));return n.forEach(((s,a)=>{qm(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Bl()<=et.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",zl(n)),this.ps.getDocumentsMatchingQuery(e,n,Pa.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="LocalStore",TL=3e8;class SL{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Lt(tt),this.xs=new Yo((a=>Nv(a)),kv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function NL(t,e,n,r){return new SL(t,e,n,r)}async function Mk(t,e){const n=Ye(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],u=[];let d=nt();for(const f of s){o.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of a){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next((f=>({Ls:f,removedBatchIds:o,addedBatchIds:u})))}))}))}function kL(t,e){const n=Ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const y=f.batch,x=y.keys();let T=re.resolve();return x.forEach((I=>{T=T.next((()=>g.getEntry(d,I))).next((N=>{const _=f.docVersions.get(I);ft(_!==null,48541),N.version.compareTo(_)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),g.addEntry(N)))}))})),T.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=nt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Lk(t){const e=Ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function jL(t,e){const n=Ye(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const x=s.get(y);if(!x)return;u.push(n.Pi.removeMatchingKeys(a,g.removedDocuments,y).next((()=>n.Pi.addMatchingKeys(a,g.addedDocuments,y))));let T=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(Cn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),s=s.insert(y,T),(function(N,_,k){return N.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=TL?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(x,T,g)&&u.push(n.Pi.updateTargetData(a,T))}));let d=Di(),f=nt();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))})),u.push(IL(a,o,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!r.isEqual(He.min())){const g=n.Pi.getLastRemoteSnapshotVersion(a).next((y=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));u.push(g)}return re.waitFor(u).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,d,f))).next((()=>d))})).then((a=>(n.Ms=s,a)))}function IL(t,e,n){let r=nt(),s=nt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=Di();return n.forEach(((u,d)=>{const f=a.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(He.min())?(e.removeEntry(u,d.readTime),o=o.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),o=o.insert(u,d)):be(Mv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:o,qs:s}}))}function CL(t,e){const n=Ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ev),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function AL(t,e){const n=Ye(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((a=>a?(s=a,re.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new ka(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function h0(t,e,n){const r=Ye(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Ic(o))throw o;be(Mv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function R1(t,e,n){const r=Ye(t);let s=He.min(),a=nt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,f,g){const y=Ye(d),x=y.xs.get(g);return x!==void 0?re.resolve(y.Ms.get(x)):y.Pi.getTargetData(f,g)})(r,o,qs(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next((d=>{a=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:He.min(),n?a:nt()))).next((u=>(RL(r,y5(e),u),{documents:u,Qs:a})))))}function RL(t,e,n){let r=t.Os.get(e)||He.min();n.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class P1{constructor(){this.activeTargetIds=E5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PL{constructor(){this.Mo=new P1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new P1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="ConnectivityMonitor";class O1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(D1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(D1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf=null;function f0(){return uf===null?uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():uf++,"0x"+uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="RestConnection",OL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ML{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===im?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const o=f0(),u=this.zo(e,n.toUriEncodedString());be(Yg,`Sending RPC '${e}' ${o}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,a);const{host:f}=new URL(u),g=Tc(f);return this.Jo(e,u,d,r,g).then((y=>(be(Yg,`Received RPC '${e}' ${o}: `,y),y)),(y=>{throw dc(Yg,`RPC '${e}' ${o} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,n,r,s,a,o){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}zo(e,n){const r=OL[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="WebChannelConnection";class VL extends ML{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const o=f0();return new Promise(((u,d)=>{const f=new $N;f.setWithCredentials(!0),f.listenOnce(BN.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Lf.NO_ERROR:const y=f.getResponseJson();be(Vn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),u(y);break;case Lf.TIMEOUT:be(Vn,`RPC '${e}' ${o} timed out`),d(new Pe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Lf.HTTP_ERROR:const x=f.getStatus();if(be(Vn,`RPC '${e}' ${o} failed with status:`,x,"response text:",f.getResponseText()),x>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const I=T?.error;if(I&&I.status&&I.message){const N=(function(k){const R=k.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(R)>=0?R:oe.UNKNOWN})(I.status);d(new Pe(N,I.message))}else d(new Pe(oe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Pe(oe.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:o,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{be(Vn,`RPC '${e}' ${o} completed.`)}}));const g=JSON.stringify(s);be(Vn,`RPC '${e}' ${o} sending request:`,s),f.send(n,"POST",g,r,15)}))}T_(e,n,r){const s=f0(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=WN(),u=qN(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const g=a.join("");be(Vn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=o.createWebChannel(g,d);this.I_(y);let x=!1,T=!1;const I=new LL({Yo:_=>{T?be(Vn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(x||(be(Vn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),x=!0),be(Vn,`RPC '${e}' stream ${s} sending:`,_),y.send(_))},Zo:()=>y.close()}),N=(_,k,R)=>{_.listen(k,(j=>{try{R(j)}catch(D){setTimeout((()=>{throw D}),0)}}))};return N(y,Ou.EventType.OPEN,(()=>{T||(be(Vn,`RPC '${e}' stream ${s} transport opened.`),I.o_())})),N(y,Ou.EventType.CLOSE,(()=>{T||(T=!0,be(Vn,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(y))})),N(y,Ou.EventType.ERROR,(_=>{T||(T=!0,dc(Vn,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),I.a_(new Pe(oe.UNAVAILABLE,"The operation could not be completed")))})),N(y,Ou.EventType.MESSAGE,(_=>{if(!T){const k=_.data[0];ft(!!k,16349);const R=k,j=R?.error||R[0]?.error;if(j){be(Vn,`RPC '${e}' stream ${s} received error:`,j);const D=j.status;let M=(function(C){const L=Xt[C];if(L!==void 0)return Tk(L)})(D),z=j.message;M===void 0&&(M=oe.INTERNAL,z="Unknown error status: "+D+" with message "+j.message),T=!0,I.a_(new Pe(M,z)),y.close()}else be(Vn,`RPC '${e}' stream ${s} received:`,k),I.u_(k)}})),N(u,zN.STAT_EVENT,(_=>{_.stat===t0.PROXY?be(Vn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===t0.NOPROXY&&be(Vn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){return new B5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="PersistentStream";class Fk{constructor(e,n,r,s,a,o,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Vk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(Pi(n.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new Pe(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(M1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(be(M1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FL extends Fk{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=W5(this.serializer,e),r=(function(a){if(!("targetChange"in a))return He.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?Ws(o.readTime):He.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=d0(this.serializer),n.addTarget=(function(a,o){let u;const d=o.target;if(u=a0(d)?{documents:G5(a,d)}:{query:Y5(a,d).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=kk(a,o.resumeToken);const f=l0(a,o.expectedCount);f!==null&&(u.expectedCount=f)}else if(o.snapshotVersion.compareTo(He.min())>0){u.readTime=dm(a,o.snapshotVersion.toTimestamp());const f=l0(a,o.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=J5(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=d0(this.serializer),n.removeTarget=e,this.q_(n)}}class UL extends Fk{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=K5(e.writeResults,e.commitTime),r=Ws(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=d0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>H5(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{}class BL extends $L{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Pe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,c0(n,r),s,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Pe(oe.UNKNOWN,a.toString())}))}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Ho(e,c0(n,r),s,o,u,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(oe.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pi(n),this.aa=!1):be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="RemoteStore";class qL{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Jo(this)&&(be(Uo,"Restarting streams for network reachability change."),await(async function(d){const f=Ye(d);f.Ea.add(4),await Ld(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Ym(f)})(this))}))})),this.Ra=new zL(r,s)}}async function Ym(t){if(Jo(t))for(const e of t.da)await e(!0)}async function Ld(t){for(const e of t.da)await e(!1)}function Uk(t,e){const n=Ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Uv(n)?Fv(n):Cc(n).O_()&&Vv(n,e))}function Lv(t,e){const n=Ye(t),r=Cc(n);n.Ia.delete(e),r.O_()&&$k(n,e),n.Ia.size===0&&(r.O_()?r.L_():Jo(n)&&n.Ra.set("Unknown"))}function Vv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cc(t).Y_(e)}function $k(t,e){t.Va.Ue(e),Cc(t).Z_(e)}function Fv(t){t.Va=new V5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Cc(t).start(),t.Ra.ua()}function Uv(t){return Jo(t)&&!Cc(t).x_()&&t.Ia.size>0}function Jo(t){return Ye(t).Ea.size===0}function Bk(t){t.Va=void 0}async function WL(t){t.Ra.set("Online")}async function HL(t){t.Ia.forEach(((e,n)=>{Vv(t,e)}))}async function KL(t,e){Bk(t),Uv(t)?(t.Ra.ha(e),Fv(t)):t.Ra.set("Unknown")}async function GL(t,e,n){if(t.Ra.set("Online"),e instanceof Nk&&e.state===2&&e.cause)try{await(async function(s,a){const o=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))})(t,e)}catch(r){be(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fm(t,r)}else if(e instanceof $f?t.Va.Ze(e):e instanceof Sk?t.Va.st(e):t.Va.tt(e),!n.isEqual(He.min()))try{const r=await Lk(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const u=a.Va.Tt(o);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ia.get(f);g&&a.Ia.set(f,g.withResumeToken(d.resumeToken,o))}})),u.targetMismatches.forEach(((d,f)=>{const g=a.Ia.get(d);if(!g)return;a.Ia.set(d,g.withResumeToken(Cn.EMPTY_BYTE_STRING,g.snapshotVersion)),$k(a,d);const y=new ka(g.target,d,f,g.sequenceNumber);Vv(a,y)})),a.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){be(Uo,"Failed to raise snapshot:",r),await fm(t,r)}}async function fm(t,e,n){if(!Ic(e))throw e;t.Ea.add(1),await Ld(t),t.Ra.set("Offline"),n||(n=()=>Lk(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{be(Uo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ym(t)}))}function zk(t,e){return e().catch((n=>fm(t,n,e)))}async function Qm(t){const e=Ye(t),n=La(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ev;for(;YL(e);)try{const s=await CL(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,QL(e,s)}catch(s){await fm(e,s)}qk(e)&&Wk(e)}function YL(t){return Jo(t)&&t.Ta.length<10}function QL(t,e){t.Ta.push(e);const n=La(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qk(t){return Jo(t)&&!La(t).x_()&&t.Ta.length>0}function Wk(t){La(t).start()}async function JL(t){La(t).ra()}async function XL(t){const e=La(t);for(const n of t.Ta)e.ea(n.mutations)}async function ZL(t,e,n){const r=t.Ta.shift(),s=Cv.from(r,e,n);await zk(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Qm(t)}async function e3(t,e){e&&La(t).X_&&await(async function(r,s){if((function(o){return O5(o)&&o!==oe.ABORTED})(s.code)){const a=r.Ta.shift();La(r).B_(),await zk(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Qm(r)}})(t,e),qk(t)&&Wk(t)}async function L1(t,e){const n=Ye(t);n.asyncQueue.verifyOperationInProgress(),be(Uo,"RemoteStore received new credentials");const r=Jo(n);n.Ea.add(3),await Ld(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ym(n)}async function t3(t,e){const n=Ye(t);e?(n.Ea.delete(2),await Ym(n)):e||(n.Ea.add(2),await Ld(n),n.Ra.set("Unknown"))}function Cc(t){return t.ma||(t.ma=(function(n,r,s){const a=Ye(n);return a.sa(),new FL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:WL.bind(null,t),t_:HL.bind(null,t),r_:KL.bind(null,t),H_:GL.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Uv(t)?Fv(t):t.Ra.set("Unknown")):(await t.ma.stop(),Bk(t))}))),t.ma}function La(t){return t.fa||(t.fa=(function(n,r,s){const a=Ye(n);return a.sa(),new UL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:JL.bind(null,t),r_:e3.bind(null,t),ta:XL.bind(null,t),na:ZL.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Qm(t)):(await t.fa.stop(),t.Ta.length>0&&(be(Uo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,u=new $v(e,n,o,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bv(t,e){if(Pi("AsyncQueue",`${e}: ${t}`),Ic(t))return new Pe(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{static emptySet(e){return new ic(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Le.comparator(n.key,r.key):(n,r)=>Le.comparator(n.key,r.key),this.keyedMap=Mu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ic)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ic;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.ga=new Lt(Le.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ze(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class gc{constructor(e,n,r,s,a,o,u,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach((u=>{o.push({type:0,doc:u})})),new gc(e,n,ic.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class r3{constructor(){this.queries=F1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ye(n),a=s.queries;s.queries=F1(),a.forEach(((o,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new Pe(oe.ABORTED,"Firestore shutting down"))}}function F1(){return new Yo((t=>dk(t)),zm)}async function s3(t,e){const n=Ye(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new n3,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Bv(o,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&zv(n)}async function i3(t,e){const n=Ye(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function a3(t,e){const n=Ye(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&zv(n)}function o3(t,e,n){const r=Ye(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function zv(t){t.Ca.forEach((e=>{e.next()}))}var m0,U1;(U1=m0||(m0={})).Ma="default",U1.Cache="cache";class l3{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new gc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==m0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.key=e}}class Kk{constructor(e){this.key=e}}class c3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nt(),this.mutatedKeys=nt(),this.eu=hk(e),this.tu=new ic(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new V1,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const x=s.get(g),T=qm(this.query,y)?y:null,I=!!x&&this.mutatedKeys.has(x.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let _=!1;x&&T?x.data.isEqual(T.data)?I!==N&&(r.track({type:3,doc:T}),_=!0):this.su(x,T)||(r.track({type:2,doc:T}),_=!0,(d&&this.eu(T,d)>0||f&&this.eu(T,f)<0)&&(u=!0)):!x&&T?(r.track({type:0,doc:T}),_=!0):x&&!T&&(r.track({type:1,doc:x}),_=!0,(d||f)&&(u=!0)),_&&(T?(o=o.add(T),a=N?a.add(g):a.delete(g)):(o=o.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const g=this.query.limitType==="F"?o.last():o.first();o=o.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{tu:o,iu:r,Cs:u,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((g,y)=>(function(T,I){const N=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Rt:_})}};return N(T)-N(I)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,o.length!==0||f?{snapshot:new gc(this.query,e.tu,a,o,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new V1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Kk(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Hk(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=nt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return gc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qv="SyncEngine";class u3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class d3{constructor(e){this.key=e,this.hu=!1}}class h3{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Yo((u=>dk(u)),zm),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(Le.comparator),this.Au=new Map,this.Ru=new Pv,this.Vu={},this.mu=new Map,this.fu=pc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function f3(t,e,n=!0){const r=Zk(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await Gk(r,e,n,!0),s}async function m3(t,e){const n=Zk(t);await Gk(n,e,!0,!1)}async function Gk(t,e,n,r){const s=await AL(t.localStore,qs(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await p3(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Uk(t.remoteStore,s),u}async function p3(t,e,n,r,s){t.pu=(y,x,T)=>(async function(N,_,k,R){let j=_.view.ru(k);j.Cs&&(j=await R1(N.localStore,_.query,!1).then((({documents:P})=>_.view.ru(P,j))));const D=R&&R.targetChanges.get(_.targetId),M=R&&R.targetMismatches.get(_.targetId)!=null,z=_.view.applyChanges(j,N.isPrimaryClient,D,M);return B1(N,_.targetId,z.au),z.snapshot})(t,y,x,T);const a=await R1(t.localStore,e,!0),o=new c3(e,a.Qs),u=o.ru(a.documents),d=Md.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=o.applyChanges(u,t.isPrimaryClient,d);B1(t,n,f.au);const g=new u3(e,n,o);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function g3(t,e,n){const r=Ye(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((o=>!zm(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await h0(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Lv(r.remoteStore,s.targetId),p0(r,s.targetId)})).catch(jc)):(p0(r,s.targetId),await h0(r.localStore,s.targetId,!0))}async function y3(t,e){const n=Ye(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lv(n.remoteStore,r.targetId))}async function v3(t,e,n){const r=S3(t);try{const s=await(function(o,u){const d=Ye(o),f=kt.now(),g=u.reduce(((T,I)=>T.add(I.key)),nt());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let I=Di(),N=nt();return d.Ns.getEntries(T,g).next((_=>{I=_,I.forEach(((k,R)=>{R.isValidDocument()||(N=N.add(k))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,I))).next((_=>{y=_;const k=[];for(const R of u){const j=C5(R,y.get(R.key).overlayedDocument);j!=null&&k.push(new Qo(R.key,j,sk(j.value.mapValue),ji.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,k,u)})).next((_=>{x=_;const k=_.applyToLocalDocumentSet(y,N);return d.documentOverlayCache.saveOverlays(T,_.batchId,k)}))})).then((()=>({batchId:x.batchId,changes:mk(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,u,d){let f=o.Vu[o.currentUser.toKey()];f||(f=new Lt(tt)),f=f.insert(u,d),o.Vu[o.currentUser.toKey()]=f})(r,s.batchId,n),await Vd(r,s.changes),await Qm(r.remoteStore)}catch(s){const a=Bv(s,"Failed to persist write");n.reject(a)}}async function Yk(t,e){const n=Ye(t);try{const r=await jL(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const o=n.Au.get(a);o&&(ft(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ft(o.hu,14607):s.removedDocuments.size>0&&(ft(o.hu,42227),o.hu=!1))})),await Vd(n,r,e)}catch(r){await jc(r)}}function $1(t,e,n){const r=Ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((a,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(o,u){const d=Ye(o);d.onlineState=u;let f=!1;d.queries.forEach(((g,y)=>{for(const x of y.Sa)x.va(u)&&(f=!0)})),f&&zv(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function x3(t,e,n){const r=Ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new Lt(Le.comparator);o=o.insert(a,Un.newNoDocument(a,He.min()));const u=nt().add(a),d=new Km(He.min(),new Map,new Lt(tt),o,u);await Yk(r,d),r.du=r.du.remove(a),r.Au.delete(e),Wv(r)}else await h0(r.localStore,e,!1).then((()=>p0(r,e,n))).catch(jc)}async function w3(t,e){const n=Ye(t),r=e.batch.batchId;try{const s=await kL(n.localStore,e);Jk(n,r,null),Qk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vd(n,s)}catch(s){await jc(s)}}async function b3(t,e,n){const r=Ye(t);try{const s=await(function(o,u){const d=Ye(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(ft(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(r.localStore,e);Jk(r,e,n),Qk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vd(r,s)}catch(s){await jc(s)}}function Qk(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Jk(t,e,n){const r=Ye(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function p0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||Xk(t,r)}))}function Xk(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Lv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Wv(t))}function B1(t,e,n){for(const r of n)r instanceof Hk?(t.Ru.addReference(r.key,e),_3(t,r)):r instanceof Kk?(be(qv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Xk(t,r.key)):ze(19791,{wu:r})}function _3(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(be(qv,"New document in limbo: "+n),t.Eu.add(r),Wv(t))}function Wv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Le(Ot.fromString(e)),r=t.fu.next();t.Au.set(r,new d3(n)),t.du=t.du.insert(n,r),Uk(t.remoteStore,new ka(qs(jv(n.path)),r,"TargetPurposeLimboResolution",Fm.ce))}}async function Vd(t,e,n){const r=Ye(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{o.push(r.pu(d,e,n).then((f=>{if((f||n)&&r.isPrimaryClient){const g=f?!f.fromCache:n?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=Ov.As(d.targetId,f);a.push(g)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(d,f){const g=Ye(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>re.forEach(f,(x=>re.forEach(x.Es,(T=>g.persistence.referenceDelegate.addReference(y,x.targetId,T))).next((()=>re.forEach(x.ds,(T=>g.persistence.referenceDelegate.removeReference(y,x.targetId,T)))))))))}catch(y){if(!Ic(y))throw y;be(Mv,"Failed to update sequence numbers: "+y)}for(const y of f){const x=y.targetId;if(!y.fromCache){const T=g.Ms.get(x),I=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(I);g.Ms=g.Ms.insert(x,N)}}})(r.localStore,a))}async function E3(t,e){const n=Ye(t);if(!n.currentUser.isEqual(e)){be(qv,"User change. New user:",e.toKey());const r=await Mk(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((u=>{u.forEach((d=>{d.reject(new Pe(oe.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vd(n,r.Ls)}}function T3(t,e){const n=Ye(t),r=n.Au.get(e);if(r&&r.hu)return nt().add(r.key);{let s=nt();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function Zk(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x3.bind(null,e),e.Pu.H_=a3.bind(null,e.eventManager),e.Pu.yu=o3.bind(null,e.eventManager),e}function S3(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b3.bind(null,e),e}class mm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return NL(this.persistence,new EL,e.initialUser,this.serializer)}Cu(e){return new Ok(Dv.mi,this.serializer)}Du(e){return new PL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mm.provider={build:()=>new mm};class N3 extends mm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ft(this.persistence.referenceDelegate instanceof hm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lL(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new Ok((r=>hm.mi(r,n)),this.serializer)}}class g0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=E3.bind(null,this.syncEngine),await t3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new r3})()}createDatastore(e){const n=Gm(e.databaseInfo.databaseId),r=(function(a){return new VL(a)})(e.databaseInfo);return(function(a,o,u,d){return new BL(a,o,u,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,a,o,u){return new qL(r,s,a,o,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>$1(this.syncEngine,n,0)),(function(){return O1.v()?new O1:new DL})())}createSyncEngine(e,n){return(function(s,a,o,u,d,f,g){const y=new h3(s,a,o,u,d,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ye(n);be(Uo,"RemoteStore shutting down."),r.Ea.add(5),await Ld(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}g0.provider={build:()=>new g0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="FirestoreClient";class j3{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Fn.UNAUTHENTICATED,this.clientId=bv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{be(Va,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(be(Va,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Jg(t,e){t.asyncQueue.verifyOperationInProgress(),be(Va,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Mk(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function z1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await I3(t);be(Va,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>L1(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>L1(e.remoteStore,s))),t._onlineComponents=e}async function I3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be(Va,"Using user provided OfflineComponentProvider");try{await Jg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;dc("Error using user provided cache. Falling back to memory cache: "+n),await Jg(t,new mm)}}else be(Va,"Using default OfflineComponentProvider"),await Jg(t,new N3(void 0));return t._offlineComponents}async function ej(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be(Va,"Using user provided OnlineComponentProvider"),await z1(t,t._uninitializedComponentsProvider._online)):(be(Va,"Using default OnlineComponentProvider"),await z1(t,new g0))),t._onlineComponents}function C3(t){return ej(t).then((e=>e.syncEngine))}async function A3(t){const e=await ej(t),n=e.eventManager;return n.onListen=f3.bind(null,e.syncEngine),n.onUnlisten=g3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=m3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=y3.bind(null,e.syncEngine),n}function R3(t,e,n={}){const r=new Aa;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,u,d,f){const g=new k3({next:x=>{g.Nu(),o.enqueueAndForget((()=>i3(a,y)));const T=x.docs.has(u);!T&&x.fromCache?f.reject(new Pe(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&x.fromCache&&d&&d.source==="server"?f.reject(new Pe(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new l3(jv(u.path),g,{includeMetadataChanges:!0,qa:!0});return s3(a,y)})(await A3(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="firestore.googleapis.com",W1=!0;class H1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nj,this.ssl=W1}else this.host=e.host,this.ssl=e.ssl??W1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Dk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aL)throw new Pe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tj(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hv{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new RM;switch(r.type){case"firstParty":return new MM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Pe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=q1.get(n);r&&(be("ComponentProvider","Removing Datastore"),q1.delete(n),r.terminate())})(this),Promise.resolve()}}function P3(t,e,n,r={}){t=sd(t,Hv);const s=Tc(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(YS(`https://${u}`),QS("Firestore",!0)),a.host!==nj&&a.host!==u&&dc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:u,ssl:s,emulatorOptions:r};if(!Ra(d,o)&&(t._setSettings(d),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=Fn.MOCK_USER;else{f=$P(r.mockUserToken,t._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Pe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Fn(y)}t._authCredentials=new PM(new KN(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kv(this.firestore,e,this._query)}}class yn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}toJSON(){return{type:yn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Dd(n,yn._jsonSchema))return new yn(e,r||null,new Le(Ot.fromString(n.referencePath)))}}yn._jsonSchemaVersion="firestore/documentReference/1.0",yn._jsonSchema={type:tn("string",yn._jsonSchemaVersion),referencePath:tn("string")};class dd extends Kv{constructor(e,n,r){super(e,n,jv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Le(e))}withConverter(e){return new dd(this.firestore,e,this._path)}}function Xg(t,e,...n){if(t=In(t),arguments.length===1&&(e=bv.newId()),BM("doc","path",e),t instanceof Hv){const r=Ot.fromString(e,...n);return a1(r),new yn(t,null,new Le(r))}{if(!(t instanceof yn||t instanceof dd))throw new Pe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ot.fromString(e,...n));return a1(r),new yn(t.firestore,t instanceof dd?t.converter:null,new Le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="AsyncQueue";class G1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Vk(this,"async_queue_retry"),this._c=()=>{const r=Qg();r&&be(K1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Qg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Aa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ic(e))throw e;be(K1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Pi("INTERNAL UNHANDLED ERROR: ",Y1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=$v.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&ze(47125,{Pc:Y1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Y1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Gv extends Hv{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new G1,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G1(e),this._firestoreClient=void 0,await e}}}function D3(t,e){const n=typeof t=="object"?t:dv(),r=typeof t=="string"?t:im,s=Ho(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=FP("firestore");a&&P3(s,...a)}return s}function rj(t){if(t._terminated)throw new Pe(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||O3(t),t._firestoreClient}function O3(t){const e=t._freezeSettings(),n=(function(s,a,o,u){return new e5(s,a,o,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,tj(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new j3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Br(Cn.fromBase64String(e))}catch(n){throw new Pe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Br(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Br._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dd(e,Br._jsonSchema))return Br.fromBase64String(e.bytes)}}Br._jsonSchemaVersion="firestore/bytes/1.0",Br._jsonSchema={type:tn("string",Br._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Pe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Pe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Pe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hs._jsonSchemaVersion}}static fromJSON(e){if(Dd(e,Hs._jsonSchema))return new Hs(e.latitude,e.longitude)}}Hs._jsonSchemaVersion="firestore/geoPoint/1.0",Hs._jsonSchema={type:tn("string",Hs._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dd(e,Ks._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ks(e.vectorValues);throw new Pe(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ks._jsonSchemaVersion="firestore/vectorValue/1.0",Ks._jsonSchema={type:tn("string",Ks._jsonSchemaVersion),vectorValues:tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=/^__.*__$/;class L3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Od(e,this.data,n,this.fieldTransforms)}}function ij(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ac:t})}}class Qv{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ij(this.Ac)&&M3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class V3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gm(e)}Cc(e,n,r,s=!1){return new Qv({Ac:e,methodName:n,Dc:r,path:kn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function F3(t){const e=t._freezeSettings(),n=Gm(t._databaseId);return new V3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function U3(t,e,n,r,s,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);cj("Data must be an object, but it was:",o,r);const u=oj(r,o);let d,f;if(a.merge)d=new ms(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const x=$3(e,y,n);if(!o.contains(x))throw new Pe(oe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);z3(g,x)||g.push(x)}d=new ms(g),f=o.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=o.fieldTransforms;return new L3(new $r(u),d,f)}function aj(t,e){if(lj(t=In(t)))return cj("Unsupported field value:",e,t),oj(t,e);if(t instanceof sj)return(function(r,s){if(!ij(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const a=[];let o=0;for(const u of r){let d=aj(u,s.wc(o));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,s){if((r=In(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T5(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=kt.fromDate(r);return{timestampValue:dm(s.serializer,a)}}if(r instanceof kt){const a=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dm(s.serializer,a)}}if(r instanceof Hs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Br)return{bytesValue:kk(s.serializer,r._byteString)};if(r instanceof yn){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Rv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ks)return(function(o,u){return{mapValue:{fields:{[nk]:{stringValue:rk},[am]:{arrayValue:{values:o.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Iv(u.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${_v(r)}`)})(t,e)}function oj(t,e){const n={};return QN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Go(t,((r,s)=>{const a=aj(s,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function lj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof kt||t instanceof Hs||t instanceof Br||t instanceof yn||t instanceof sj||t instanceof Ks)}function cj(t,e,n){if(!lj(n)||!GN(n)){const r=_v(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function $3(t,e,n){if((e=In(e))instanceof Yv)return e._internalPath;if(typeof e=="string")return uj(t,e);throw pm("Field path arguments must be of type string or ",t,!1,void 0,n)}const B3=new RegExp("[~\\*/\\[\\]]");function uj(t,e,n){if(e.search(B3)>=0)throw pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yv(...e.split("."))._internalPath}catch{throw pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pm(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||o)&&(d+=" (found",a&&(d+=` in field ${r}`),o&&(d+=` in document ${s}`),d+=")"),new Pe(oe.INVALID_ARGUMENT,u+t+d)}function z3(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hj("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q3 extends dj{data(){return super.data()}}function hj(t,e){return typeof e=="string"?uj(t,e):e instanceof Yv?e._internalPath:e._delegate._internalPath}class W3{convertValue(e,n="none"){switch(Ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Go(e,((s,a)=>{r[s]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[am].arrayValue?.values?.map((r=>Kt(r.doubleValue)));return new Ks(n)}convertGeoPoint(e){return new Hs(Kt(e.latitude),Kt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$m(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ad(e));default:return null}}convertTimestamp(e){const n=Da(e);return new kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ot.fromString(e);ft(Pk(r),9688,{name:e});const s=new od(r.get(1),r.get(3)),a=new Le(r.popFirst(5));return s.isEqual(n)||Pi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Vu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Po extends dj{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Po._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Po._jsonSchemaVersion="firestore/documentSnapshot/1.0",Po._jsonSchema={type:tn("string",Po._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class Bf extends Po{data(e={}){return super.data(e)}}class Ku{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Bf(this._firestore,this._userDataWriter,r.key,r,new Vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Pe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((u=>{const d=new Bf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const d=new Bf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),g=o.indexOf(u.doc.key)),{type:K3(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ku._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function K3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t){t=sd(t,yn);const e=sd(t.firestore,Gv);return R3(rj(e),t._key).then((n=>J3(e,t,n)))}Ku._jsonSchemaVersion="firestore/querySnapshot/1.0",Ku._jsonSchema={type:tn("string",Ku._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class Y3 extends W3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function Q1(t,e,n){t=sd(t,yn);const r=sd(t.firestore,Gv),s=H3(t.converter,e,n);return Q3(r,[U3(F3(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ji.none())])}function Q3(t,e){return(function(r,s){const a=new Aa;return r.asyncQueue.enqueueAndForget((async()=>v3(await C3(r),s,a))),a.promise})(rj(t),e)}function J3(t,e,n){const r=n.docs.get(e._key),s=new Y3(t);return new Po(t,s,e._key,r,new Vu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){kc=s})(Sc),Qs(new gs("firestore",((r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),u=new Gv(new DM(r.getProvider("auth-internal")),new LM(o,r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Pe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new od(f.options.projectId,g)})(o,s),o);return a={useFetchStreams:n,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),qr(n1,r1,e),qr(n1,r1,"esm2020")})();var X3="firebase",Z3="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(X3,Z3,"app");const fj="@firebase/installations",Jv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=1e4,pj=`w:${Jv}`,gj="FIS_v2",eV="https://firebaseinstallations.googleapis.com/v1",tV=3600*1e3,nV="installations",rV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$o=new Wo(nV,rV,sV);function yj(t){return t instanceof xs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj({projectId:t}){return`${eV}/projects/${t}/installations`}function xj(t){return{token:t.token,requestStatus:2,expiresIn:aV(t.expiresIn),creationTime:Date.now()}}async function wj(t,e){const r=(await e.json()).error;return $o.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function bj({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function iV(t,{refreshToken:e}){const n=bj(t);return n.append("Authorization",oV(e)),n}async function _j(t){const e=await t();return e.status>=500&&e.status<600?t():e}function aV(t){return Number(t.replace("s","000"))}function oV(t){return`${gj} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=vj(t),s=bj(t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const o={fid:n,authVersion:gj,appId:t.appId,sdkVersion:pj},u={method:"POST",headers:s,body:JSON.stringify(o)},d=await _j(()=>fetch(r,u));if(d.ok){const f=await d.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:xj(f.authToken)}}else throw await wj("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV=/^[cdef][\w-]{21}$/,y0="";function dV(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=hV(t);return uV.test(n)?n:y0}catch{return y0}}function hV(t){return cV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=new Map;function Sj(t,e){const n=Jm(t);Nj(n,e),fV(n,e)}function Nj(t,e){const n=Tj.get(t);if(n)for(const r of n)r(e)}function fV(t,e){const n=mV();n&&n.postMessage({key:t,fid:e}),pV()}let Io=null;function mV(){return!Io&&"BroadcastChannel"in self&&(Io=new BroadcastChannel("[Firebase] FID Change"),Io.onmessage=t=>{Nj(t.data.key,t.data.fid)}),Io}function pV(){Tj.size===0&&Io&&(Io.close(),Io=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="firebase-installations-database",yV=1,Bo="firebase-installations-store";let Zg=null;function Xv(){return Zg||(Zg=nN(gV,yV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bo)}}})),Zg}async function gm(t,e){const n=Jm(t),s=(await Xv()).transaction(Bo,"readwrite"),a=s.objectStore(Bo),o=await a.get(n);return await a.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Sj(t,e.fid),e}async function kj(t){const e=Jm(t),r=(await Xv()).transaction(Bo,"readwrite");await r.objectStore(Bo).delete(e),await r.done}async function Xm(t,e){const n=Jm(t),s=(await Xv()).transaction(Bo,"readwrite"),a=s.objectStore(Bo),o=await a.get(n),u=e(o);return u===void 0?await a.delete(n):await a.put(u,n),await s.done,u&&(!o||o.fid!==u.fid)&&Sj(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zv(t){let e;const n=await Xm(t.appConfig,r=>{const s=vV(r),a=xV(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===y0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function vV(t){const e=t||{fid:dV(),registrationStatus:0};return jj(e)}function xV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject($o.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=wV(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:bV(t)}:{installationEntry:e}}async function wV(t,e){try{const n=await lV(t,e);return gm(t.appConfig,n)}catch(n){throw yj(n)&&n.customData.serverCode===409?await kj(t.appConfig):await gm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function bV(t){let e=await J1(t.appConfig);for(;e.registrationStatus===1;)await Ej(100),e=await J1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Zv(t);return r||n}return e}function J1(t){return Xm(t,e=>{if(!e)throw $o.create("installation-not-found");return jj(e)})}function jj(t){return _V(t)?{fid:t.fid,registrationStatus:0}:t}function _V(t){return t.registrationStatus===1&&t.registrationTime+mj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EV({appConfig:t,heartbeatServiceProvider:e},n){const r=TV(t,n),s=iV(t,n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const o={installation:{sdkVersion:pj,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(o)},d=await _j(()=>fetch(r,u));if(d.ok){const f=await d.json();return xj(f)}else throw await wj("Generate Auth Token",d)}function TV(t,{fid:e}){return`${vj(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(t,e=!1){let n;const r=await Xm(t.appConfig,a=>{if(!Ij(a))throw $o.create("not-registered");const o=a.authToken;if(!e&&kV(o))return a;if(o.requestStatus===1)return n=SV(t,e),a;{if(!navigator.onLine)throw $o.create("app-offline");const u=IV(a);return n=NV(t,u),u}});return n?await n:r.authToken}async function SV(t,e){let n=await X1(t.appConfig);for(;n.authToken.requestStatus===1;)await Ej(100),n=await X1(t.appConfig);const r=n.authToken;return r.requestStatus===0?ex(t,e):r}function X1(t){return Xm(t,e=>{if(!Ij(e))throw $o.create("not-registered");const n=e.authToken;return CV(n)?{...e,authToken:{requestStatus:0}}:e})}async function NV(t,e){try{const n=await EV(t,e),r={...e,authToken:n};return await gm(t.appConfig,r),n}catch(n){if(yj(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await kj(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await gm(t.appConfig,r)}throw n}}function Ij(t){return t!==void 0&&t.registrationStatus===2}function kV(t){return t.requestStatus===2&&!jV(t)}function jV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+tV}function IV(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function CV(t){return t.requestStatus===1&&t.requestTime+mj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AV(t){const e=t,{installationEntry:n,registrationPromise:r}=await Zv(e);return r?r.catch(console.error):ex(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e=!1){const n=t;return await PV(n),(await ex(n,e)).token}async function PV(t){const{registrationPromise:e}=await Zv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){if(!t||!t.options)throw ey("App Configuration");if(!t.name)throw ey("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ey(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ey(t){return $o.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="installations",OV="installations-internal",MV=t=>{const e=t.getProvider("app").getImmediate(),n=DV(e),r=Ho(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},LV=t=>{const e=t.getProvider("app").getImmediate(),n=Ho(e,Cj).getImmediate();return{getId:()=>AV(n),getToken:s=>RV(n,s)}};function VV(){Qs(new gs(Cj,MV,"PUBLIC")),Qs(new gs(OV,LV,"PRIVATE"))}VV();qr(fj,Jv);qr(fj,Jv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="analytics",FV="firebase_id",UV="origin",$V=60*1e3,BV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new Om("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kr=new Wo("analytics","Analytics",zV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){if(!t.startsWith(tx)){const e=kr.create("invalid-gtag-resource",{gtagURL:t});return Jn.warn(e.message),""}return t}function Aj(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function WV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function HV(t,e){const n=WV("firebase-js-sdk-policy",{createScriptURL:qV}),r=document.createElement("script"),s=`${tx}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function KV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function GV(t,e,n,r,s,a){const o=r[s];try{if(o)await e[o];else{const d=(await Aj(n)).find(f=>f.measurementId===s);d&&await e[d.appId]}}catch(u){Jn.error(u)}t("config",s,a)}async function YV(t,e,n,r,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const u=await Aj(n);for(const d of o){const f=u.find(y=>y.measurementId===d),g=f&&e[f.appId];if(g)a.push(g);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,s||{})}catch(a){Jn.error(a)}}function QV(t,e,n,r){async function s(a,...o){try{if(a==="event"){const[u,d]=o;await YV(t,e,n,u,d)}else if(a==="config"){const[u,d]=o;await GV(t,e,n,r,u,d)}else if(a==="consent"){const[u,d]=o;t("consent",u,d)}else if(a==="get"){const[u,d,f]=o;t("get",u,d,f)}else if(a==="set"){const[u]=o;t("set",u)}else t(a,...o)}catch(u){Jn.error(u)}}return s}function JV(t,e,n,r,s){let a=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=QV(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}function XV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(tx)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=30,e6=1e3;class t6{constructor(e={},n=e6){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Rj=new t6;function n6(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function r6(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:n6(n)},s=BV.replace("{app-id}",e),a=await fetch(s,r);if(a.status!==200&&a.status!==304){let o="";try{const u=await a.json();u.error?.message&&(o=u.error.message)}catch{}throw kr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:o})}return a.json()}async function s6(t,e=Rj,n){const{appId:r,apiKey:s,measurementId:a}=t.options;if(!r)throw kr.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw kr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new o6;return setTimeout(async()=>{u.abort()},$V),Pj({appId:r,apiKey:s,measurementId:a},o,u,e)}async function Pj(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Rj){const{appId:a,measurementId:o}=t;try{await i6(r,e)}catch(u){if(o)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:a,measurementId:o};throw u}try{const u=await r6(t);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!a6(d)){if(s.deleteThrottleMetadata(a),o)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:a,measurementId:o};throw u}const f=Number(d?.customData?.httpStatus)===503?k_(n,s.intervalMillis,ZV):k_(n,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,g),Jn.debug(`Calling attemptFetch again in ${f} millis`),Pj(t,g,r,s)}}function i6(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(a),r(kr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function a6(t){if(!(t instanceof xs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class o6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function l6(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const a=await e,o={...r,send_to:a};t("event",n,o)}}async function c6(t,e,n,r){if(r&&r.global){const s={};for(const a of Object.keys(n))s[`user_properties.${a}`]=n[a];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6(){if(XS())try{await ZS()}catch(t){return Jn.warn(kr.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Jn.warn(kr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function d6(t,e,n,r,s,a,o){const u=s6(t);u.then(x=>{n[x.measurementId]=x.appId,t.options.measurementId&&x.measurementId!==t.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>Jn.error(x)),e.push(u);const d=u6().then(x=>{if(x)return r.getId()}),[f,g]=await Promise.all([u,d]);XV(a)||HV(a,f.measurementId),s("js",new Date);const y=o?.config??{};return y[UV]="firebase",y.update=!0,g!=null&&(y[FV]=g),s("config",f.measurementId,y),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.app=e}_delete(){return delete ac[this.app.options.appId],Promise.resolve()}}let ac={},Z1=[];const eE={};let ty="dataLayer",f6="gtag",tE,nx,nE=!1;function m6(){const t=[];if(JS()&&t.push("This is a browser extension environment."),QP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=kr.create("invalid-analytics-context",{errorInfo:e});Jn.warn(n.message)}}function p6(t,e,n){m6();const r=t.options.appId;if(!r)throw kr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw kr.create("no-api-key");if(ac[r]!=null)throw kr.create("already-exists",{id:r});if(!nE){KV(ty);const{wrappedGtag:a,gtagCore:o}=JV(ac,Z1,eE,ty,f6);nx=a,tE=o,nE=!0}return ac[r]=d6(t,Z1,eE,e,tE,ty,n),new h6(t)}function g6(t=dv()){t=In(t);const e=Ho(t,ym);return e.isInitialized()?e.getImmediate():y6(t)}function y6(t,e={}){const n=Ho(t,ym);if(n.isInitialized()){const s=n.getImmediate();if(Ra(e,n.getOptions()))return s;throw kr.create("already-initialized")}return n.initialize({options:e})}function v6(t,e,n){t=In(t),c6(nx,ac[t.app.options.appId],e,n).catch(r=>Jn.error(r))}function x6(t,e,n,r){t=In(t),l6(nx,ac[t.app.options.appId],e,n,r).catch(s=>Jn.error(s))}const rE="@firebase/analytics",sE="0.10.19";function w6(){Qs(new gs(ym,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return p6(r,s,n)},"PUBLIC")),Qs(new gs("analytics-internal",t,"PRIVATE")),qr(rE,sE),qr(rE,sE,"esm2020");function t(e){try{const n=e.getProvider(ym).getImmediate();return{logEvent:(r,s,a)=>x6(n,r,s,a),setUserProperties:(r,s)=>v6(n,r,s)}}catch(n){throw kr.create("interop-component-reg-failed",{reason:n})}}}w6();const b6={apiKey:"AIzaSyBkxRFG8qLm3QrbUgPb_QLEC3pJYW3nfx0",authDomain:"arkan-8bd63.firebaseapp.com",projectId:"arkan-8bd63",storageBucket:"arkan-8bd63.firebasestorage.app",messagingSenderId:"1097406159096",appId:"1:1097406159096:web:3f6ab094d52e73942ac30d",measurementId:"G-VH77WMGF6Y"},rx=rN(b6);g6(rx);const df=CM(rx),ny=D3(rx),Dj=E.createContext(null),ws=()=>{const t=E.useContext(Dj);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},_6=({children:t})=>{const[e,n]=E.useState(null),[r,s]=E.useState(null),[a,o]=E.useState(!0),[u,d]=E.useState(()=>{const _=localStorage.getItem("employeeSession");return _?JSON.parse(_):null});E.useEffect(()=>{const _=vO(df,async k=>{if(n(k),k)try{const R=await G3(Xg(ny,"subscriptions",k.uid));if(R.exists()){const j=R.data();new Date(j.endDate)<new Date?s({...j,status:"expired"}):s(j)}else s(null)}catch(R){console.error("Error fetching subscription:",R),s(null)}else s(null);o(!1)});return()=>_()},[]);const f=async(_,k)=>{if(_==="admin@arkan.sa"&&k==="Admin@2024"){n({uid:"demo-admin-uid",email:"admin@arkan.sa",displayName:"  ",emailVerified:!0}),s({planName:" ",price:"199 ./",startDate:new Date().toISOString(),endDate:new Date(Date.now()+365*24*60*60*1e3).toISOString(),status:"active",code:"ARK-DEMO-2024"});return}await fO(df,_,k)},g=async(_,k,R)=>{console.log("AuthContext: Attempting registration for",k);try{const j=await hO(df,k,R);console.log("AuthContext: User created",j.user.uid),await pO(j.user,{displayName:_}),console.log("AuthContext: Profile updated"),await Q1(Xg(ny,"users",j.user.uid),{name:_,email:k,createdAt:new Date().toISOString()},{merge:!0}),console.log("AuthContext: Firestore doc created")}catch(j){throw console.error("AuthContext: Registration FAILED",j),j}},y=async()=>{await xO(df)},x=_=>{d(_),_?localStorage.setItem("employeeSession",JSON.stringify(_)):localStorage.removeItem("employeeSession")},T=()=>{d(null),localStorage.removeItem("employeeSession")},I=(_,k)=>{if(!u)return!1;const R=u.permissions.find(j=>j.module===_);return R?R.actions.includes(k):!1},N=async _=>{if(!e)return;const k=new Date,R=new Date;R.setDate(k.getDate()+30);const j={planName:_.name,price:_.price,startDate:k.toISOString(),endDate:R.toISOString(),status:"active",code:`ARK-${Math.floor(Math.random()*1e5)}-PRO`};await Q1(Xg(ny,"subscriptions",e.uid),j),s(j)};return c.jsx(Dj.Provider,{value:{user:e,loading:a,subscription:r,currentEmployee:u,login:f,register:g,logout:y,subscribe:N,setEmployeeSession:x,hasEmployeePermission:I,employeeLogout:T},children:!a&&t})};var $s=function(){return $s=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$s.apply(this,arguments)};function Ac(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function E6(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(g){try{f(r.next(g))}catch(y){o(y)}}function d(g){try{f(r.throw(g))}catch(y){o(y)}}function f(g){g.done?a(g.value):s(g.value).then(u,d)}f((r=r.apply(t,e||[])).next())})}function T6(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}const S6=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class sx extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class N6 extends sx{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class iE extends sx{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class aE extends sx{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var v0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(v0||(v0={}));class k6{constructor(e,{headers:n={},customFetch:r,region:s=v0.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=S6(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return E6(this,arguments,void 0,function*(n,r={}){var s;let a,o;try{const{headers:u,method:d,body:f,signal:g,timeout:y}=r;let x={},{region:T}=r;T||(T=this.region);const I=new URL(`${this.url}/${n}`);T&&T!=="any"&&(x["x-region"]=T,I.searchParams.set("forceFunctionRegion",T));let N;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",N=f):typeof f=="string"?(x["Content-Type"]="text/plain",N=f):typeof FormData<"u"&&f instanceof FormData?N=f:(x["Content-Type"]="application/json",N=JSON.stringify(f)):N=f;let _=g;y&&(o=new AbortController,a=setTimeout(()=>o.abort(),y),g?(_=o.signal,g.addEventListener("abort",()=>o.abort())):_=o.signal);const k=yield this.fetch(I.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),u),body:N,signal:_}).catch(M=>{throw new N6(M)}),R=k.headers.get("x-relay-error");if(R&&R==="true")throw new iE(k);if(!k.ok)throw new aE(k);let j=((s=k.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),D;return j==="application/json"?D=yield k.json():j==="application/octet-stream"||j==="application/pdf"?D=yield k.blob():j==="text/event-stream"?D=k:j==="multipart/form-data"?D=yield k.formData():D=yield k.text(),{data:D,error:null,response:k}}catch(u){return{data:null,error:u,response:u instanceof aE||u instanceof iE?u.context:void 0}}finally{a&&clearTimeout(a)}})}}var j6=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},I6=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let o=null,u=null,d=null,f=a.status,g=a.statusText;if(a.ok){var y,x;if(n.method!=="HEAD"){var T;const k=await a.text();k===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((T=n.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?u=k:u=JSON.parse(k))}const N=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),_=(x=a.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");N&&_&&_.length>1&&(d=parseInt(_[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(o={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var I;const N=await a.text();try{o=JSON.parse(N),Array.isArray(o)&&a.status===404&&(u=[],o=null,f=200,g="OK")}catch{a.status===404&&N===""?(f=204,g="No Content"):o={message:N}}if(o&&n.isMaybeSingle&&(!(o==null||(I=o.details)===null||I===void 0)&&I.includes("0 rows"))&&(o=null,f=200,g="OK"),o&&n.shouldThrowOnError)throw new j6(o)}return{error:o,data:u,count:d,status:f,statusText:g}});return this.shouldThrowOnError||(s=s.catch(a=>{var o;let u="";const d=a?.cause;if(d){var f,g,y,x;const I=(f=d?.message)!==null&&f!==void 0?f:"",N=(g=d?.code)!==null&&g!==void 0?g:"";u=`${(y=a?.name)!==null&&y!==void 0?y:"FetchError"}: ${a?.message}`,u+=`

Caused by: ${(x=d?.name)!==null&&x!==void 0?x:"Error"}: ${I}`,N&&(u+=` (${N})`),d?.stack&&(u+=`
${d.stack}`)}else{var T;u=(T=a?.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(o=a?.name)!==null&&o!==void 0?o:"FetchError"}: ${a?.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},C6=class extends I6{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var o;const u=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const oE=new RegExp("[,()]");var Hl=class extends C6{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&oE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&oE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},A6=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Hl({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((o,u)=>o.concat(Object.keys(u)),[]);if(a.length>0){const o=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",o.join(","))}}return new Hl({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new Hl({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Hl({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Hl({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},R6=class Oj{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new A6(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Oj(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){var o;let u;const d=new URL(`${this.url}/rpc/${e}`);let f;r||s?(u=r?"HEAD":"GET",Object.entries(n).filter(([y,x])=>x!==void 0).map(([y,x])=>[y,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([y,x])=>{d.searchParams.append(y,x)})):(u="POST",f=n);const g=new Headers(this.headers);return a&&g.set("Prefer",`count=${a}`),new Hl({method:u,url:d,headers:g,schema:this.schemaName,body:f,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class P6{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const D6="2.89.0",O6=`realtime-js/${D6}`,Mj="1.0.0",M6="2.0.0",lE=Mj,x0=1e4,L6=1e3,V6=100;var ba;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ba||(ba={}));var on;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(on||(on={}));var ds;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ds||(ds={}));var w0;(function(t){t.websocket="websocket"})(w0||(w0={}));var No;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(No||(No={}));class F6{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,a;const o=e.topic,u=(s=e.ref)!==null&&s!==void 0?s:"",d=(a=e.join_ref)!==null&&a!==void 0?a:"",f=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+o.length+f.length+y.length,T=new ArrayBuffer(this.HEADER_LENGTH+x);let I=new DataView(T),N=0;I.setUint8(N++,this.KINDS.userBroadcastPush),I.setUint8(N++,d.length),I.setUint8(N++,u.length),I.setUint8(N++,o.length),I.setUint8(N++,f.length),I.setUint8(N++,y.length),I.setUint8(N++,n),Array.from(d,k=>I.setUint8(N++,k.charCodeAt(0))),Array.from(u,k=>I.setUint8(N++,k.charCodeAt(0))),Array.from(o,k=>I.setUint8(N++,k.charCodeAt(0))),Array.from(f,k=>I.setUint8(N++,k.charCodeAt(0))),Array.from(y,k=>I.setUint8(N++,k.charCodeAt(0)));var _=new Uint8Array(T.byteLength+r.byteLength);return _.set(new Uint8Array(T),0),_.set(new Uint8Array(r),T.byteLength),_.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,a,o,u,d]=r;return n({join_ref:s,ref:a,topic:o,event:u,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const f=r.decode(e.slice(d,d+s));d=d+s;const g=r.decode(e.slice(d,d+a));d=d+a;const y=r.decode(e.slice(d,d+o));d=d+o;const x=e.slice(d,e.byteLength),T=u===this.JSON_ENCODING?JSON.parse(r.decode(x)):x,I={type:this.BROADCAST_EVENT,event:g,payload:T};return o>0&&(I.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:I}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Lj{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var bt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(bt||(bt={}));const cE=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=U6(o,t,e,s),a),{}):{}},U6=(t,e,n,r)=>{const s=e.find(u=>u.name===t),a=s?.type,o=n[t];return a&&!r.includes(a)?Vj(a,o):b0(o)},Vj=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return q6(e,n)}switch(t){case bt.bool:return $6(e);case bt.float4:case bt.float8:case bt.int2:case bt.int4:case bt.int8:case bt.numeric:case bt.oid:return B6(e);case bt.json:case bt.jsonb:return z6(e);case bt.timestamp:return W6(e);case bt.abstime:case bt.date:case bt.daterange:case bt.int4range:case bt.int8range:case bt.money:case bt.reltime:case bt.text:case bt.time:case bt.timestamptz:case bt.timetz:case bt.tsrange:case bt.tstzrange:return b0(e);default:return b0(e)}},b0=t=>t,$6=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},B6=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},z6=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},q6=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const o=t.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(u=>Vj(e,u))}return t},W6=t=>typeof t=="string"?t.replace(" ","T"):t,Fj=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ry{constructor(e,n,r={},s=x0){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var uE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(uE||(uE={}));class Gu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:o,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gu.syncState(this.state,s,a,o),this.pendingDiffs.forEach(d=>{this.state=Gu.syncDiff(this.state,d,a,o)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Gu.syncDiff(this.state,s,a,o),u())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),o=this.transformState(n),u={},d={};return this.map(a,(f,g)=>{o[f]||(d[f]=g)}),this.map(o,(f,g)=>{const y=a[f];if(y){const x=g.map(_=>_.presence_ref),T=y.map(_=>_.presence_ref),I=g.filter(_=>T.indexOf(_.presence_ref)<0),N=y.filter(_=>x.indexOf(_.presence_ref)<0);I.length>0&&(u[f]=I),N.length>0&&(d[f]=N)}else u[f]=g}),this.syncDiff(a,{joins:u,leaves:d},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(u,d)=>{var f;const g=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),g.length>0){const y=e[u].map(T=>T.presence_ref),x=g.filter(T=>y.indexOf(T.presence_ref)<0);e[u].unshift(...x)}r(u,g,d)}),this.map(o,(u,d)=>{let f=e[u];if(!f)return;const g=d.map(y=>y.presence_ref);f=f.filter(y=>g.indexOf(y.presence_ref)<0),e[u]=f,s(u,f,d),f.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(dE||(dE={}));var Yu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Yu||(Yu={}));var bi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bi||(bi={}));class Ql{constructor(e,n={config:{}},r){var s,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=on.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ry(this,ds.join,this.params,this.timeout),this.rejoinTimer=new Lj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=on.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=on.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ds.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new Gu(this),this.broadcastEndpointURL=Fj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==on.closed){const{config:{broadcast:o,presence:u,private:d}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&s!==void 0?s:[],g=!!this.bindings[Yu.PRESENCE]&&this.bindings[Yu.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,y={},x={broadcast:o,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(T=>e?.(bi.CHANNEL_ERROR,T)),this._onClose(()=>e?.(bi.CLOSED)),this.updateJoinPayload(Object.assign({config:x},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var I;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e?.(bi.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,_=(I=N?.length)!==null&&I!==void 0?I:0,k=[];for(let R=0;R<_;R++){const j=N[R],{filter:{event:D,schema:M,table:z,filter:P}}=j,C=T&&T[R];if(C&&C.event===D&&Ql.isFilterValueEqual(C.schema,M)&&Ql.isFilterValueEqual(C.table,z)&&Ql.isFilterValueEqual(C.filter,P))k.push(Object.assign(Object.assign({},j),{id:C.id}));else{this.unsubscribe(),this.state=on.errored,e?.(bi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(bi.SUBSCRIBED);return}}).receive("error",T=>{this.state=on.errored,e?.(bi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e?.(bi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===on.joined&&e===Yu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const f=await u.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,u,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(o=this.params)===null||o===void 0?void 0:o.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=on.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ds.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ry(this,ds.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=on.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ry(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>V6){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const o=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:g}=ds;if(r&&[u,d,f,g].indexOf(o)>=0&&r!==this._joinRef())return;let x=this._onMessage(o,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(T=>{var I,N,_;return((I=T.filter)===null||I===void 0?void 0:I.event)==="*"||((_=(N=T.filter)===null||N===void 0?void 0:N.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(T=>T.callback(x,r)):(a=this.bindings[o])===null||a===void 0||a.filter(T=>{var I,N,_,k,R,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in T){const D=T.id,M=(I=T.filter)===null||I===void 0?void 0:I.event;return D&&((N=n.ids)===null||N===void 0?void 0:N.includes(D))&&(M==="*"||M?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const D=(R=(k=T?.filter)===null||k===void 0?void 0:k.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return D==="*"||D===((j=n?.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===o}).map(T=>{if(typeof x=="object"&&"ids"in x){const I=x.data,{schema:N,table:_,commit_timestamp:k,type:R,errors:j}=I;x=Object.assign(Object.assign({},{schema:N,table:_,commit_timestamp:k,eventType:R,new:{},old:{},errors:j}),this._getPayloadRecords(I))}T.callback(x,r)})}_isClosed(){return this.state===on.closed}_isJoined(){return this.state===on.joined}_isJoining(){return this.state===on.joining}_isLeaving(){return this.state===on.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Ql.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ds.close,{},e)}_onError(e){this._on(ds.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=on.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=cE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=cE(e.columns,e.old_record)),n}}const sy=()=>{},hf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},H6=[1e3,2e3,5e3,1e4],K6=1e4,G6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Y6{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=x0,this.transport=null,this.heartbeatIntervalMs=hf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sy,this.ref=0,this.reconnectTimer=null,this.vsn=lE,this.logger=sy,this.conn=null,this.sendBuffer=[],this.serializer=new F6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${w0.websocket}`,this.httpEndpoint=Fj(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=P6.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ba.connecting:return No.Connecting;case ba.open:return No.Open;case ba.closing:return No.Closing;default:return No.Closed}}isConnected(){return this.connectionState()===No.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new Ql(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:s,ref:a}=e,o=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(L6,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},hf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:o}=n,u=o?`(${o})`:"",d=a.status||"";this.log("receive",`${d} ${r} ${s} ${u}`.trim(),a),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ba.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ba.open||this.conn.readyState===ba.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ds.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([G6],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:O6};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(ds.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Lj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,a,o,u,d,f,g,y,x,T;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:x0,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:hf.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:sy,this.vsn=(d=e?.vsn)!==null&&d!==void 0?d:lE,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(I=>H6[I-1]||K6),this.vsn){case Mj:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((I,N)=>N(JSON.stringify(I))),this.decode=(y=e?.decode)!==null&&y!==void 0?y:((I,N)=>N(JSON.parse(I)));break;case M6:this.encode=(x=e?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(T=e?.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var hd=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Q6(t,e,n){const r=new URL(e,t);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function J6(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function X6(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:o}){const u=Q6(t.baseUrl,r,s),d=await J6(t.auth),f=await e(u,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...d,...o},body:a?JSON.stringify(a):void 0}),g=await f.text(),y=(f.headers.get("content-type")||"").includes("application/json"),x=y&&g?JSON.parse(g):g;if(!f.ok){const T=y?x:void 0,I=T?.error;throw new hd(I?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:I?.type,icebergCode:I?.code,details:T})}return{status:f.status,headers:f.headers,data:x}}}}function ff(t){return t.join("")}var Z6=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ff(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ff(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ff(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ff(t.namespace)}`}),!0}catch(e){if(e instanceof hd&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof hd&&n.status===409)return;throw n}}};function Rl(t){return t.join("")}var eF=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rl(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rl(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rl(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rl(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rl(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rl(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof hd&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof hd&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},tF=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=X6({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Z6(this.client,e),this.tableOps=new eF(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Zm=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Dt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var nF=class extends Zm{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_0=class extends Zm{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const ix=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),rF=()=>Response,E0=t=>{if(Array.isArray(t))return t.map(n=>E0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=E0(r)}),e},sF=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},iF=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function fd(t){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fd(t)}function aF(t,e){if(fd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oF(t){var e=aF(t,"string");return fd(e)=="symbol"?e:e+""}function lF(t,e,n){return(e=oF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hE(Object(n),!0).forEach(function(r){lF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const iy=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},cF=async(t,e,n)=>{t instanceof await rF()&&!n?.noResolveJson?t.json().then(r=>{const s=t.status||500,a=r?.statusCode||s+"";e(new nF(iy(r),s,a))}).catch(r=>{e(new _0(iy(r),r))}):e(new _0(iy(t),t))},uF=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||!r?s:(sF(r)?(s.headers=$e({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,e?.duplex&&(s.duplex=e.duplex),$e($e({},s),n))};async function Fd(t,e,n,r,s,a){return new Promise((o,u)=>{t(n,uF(e,r,s,a)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>cF(d,u,r))})}async function md(t,e,n,r){return Fd(t,"GET",e,n,r)}async function us(t,e,n,r,s){return Fd(t,"POST",e,r,s,n)}async function T0(t,e,n,r,s){return Fd(t,"PUT",e,r,s,n)}async function dF(t,e,n,r){return Fd(t,"HEAD",e,$e($e({},n),{},{noResolveJson:!0}),r)}async function ax(t,e,n,r,s){return Fd(t,"DELETE",e,r,s,n)}var hF=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Dt(e))return{data:null,error:e};throw e}}};let Uj;Uj=Symbol.toStringTag;var fF=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Uj]="BlobDownloadBuilder",this.promise=null}asStream(){return new hF(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Dt(e))return{data:null,error:e};throw e}}};const mF={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var pF=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=ix(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let a;const o=$e($e({},fE),r);let u=$e($e({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",s.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),d&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${o.cacheControl}`,u["content-type"]=o.contentType,d&&(u["x-metadata"]=s.toBase64(s.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),r?.headers&&(u=$e($e({},u),r.headers));const f=s._removeEmptyFolders(e),g=s._getFinalPath(f),y=await(t=="PUT"?T0:us)(s.fetch,`${s.url}/object/${g}`,a,$e({headers:u},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Dt(a))return{data:null,error:a};throw a}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const a=s._removeEmptyFolders(t),o=s._getFinalPath(a),u=new URL(s.url+`/object/upload/sign/${o}`);u.searchParams.set("token",e);try{let d;const f=$e({upsert:fE.upsert},r),g=$e($e({},s.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType),{data:{path:a,fullPath:(await T0(s.fetch,u.toString(),d,{headers:g})).Key},error:null}}catch(d){if(s.shouldThrowOnError)throw d;if(Dt(d))return{data:null,error:d};throw d}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=$e({},n.headers);e?.upsert&&(s["x-upsert"]="true");const a=await us(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+a.url),u=o.searchParams.get("token");if(!u)throw new Zm("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:u},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await us(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await us(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),a=await us(r.fetch,`${r.url}/object/sign/${s}`,$e({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${r.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await us(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>$e($e({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),s=r?`?${r}`:"",a=this._getFinalPath(t),o=()=>md(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new fF(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:E0(await md(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await dF(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r)&&r instanceof _0){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const a=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&r.push(o);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}async remove(t){var e=this;try{return{data:await ax(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=$e($e($e({},mF),e),{},{prefix:t||""});return{data:await us(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=$e({},t);return{data:await us(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const $j="2.89.0",Bj={"X-Client-Info":`storage-js/${$j}`};var gF=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=$e($e({},Bj),e),this.fetch=ix(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await md(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await md(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await us(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await T0(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await us(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ax(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},yF=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=$e($e({},Bj),e),this.fetch=ix(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await us(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await md(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ax(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!iF(t))throw new Zm("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new tF({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const o=s[a];return typeof o!="function"?o:async(...u)=>{try{return{data:await o.apply(s,u),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}};const ox={"X-Client-Info":`storage-js/${$j}`,"Content-Type":"application/json"};var zj=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Sr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var ay=class extends zj{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},vF=class extends zj{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const lx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xF=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mE=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wF=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const o=a?.statusCode||a?.code||r+"";e(new ay(mE(a),r,o))}).catch(()=>{const a=r+"";e(new ay(s.statusText||`HTTP ${r} error`,r,a))});else{const a=r+"";e(new ay(s.statusText||`HTTP ${r} error`,r,a))}}else e(new vF(mE(t),t))},bF=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return r?(xF(r)?(s.headers=$e({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,$e($e({},s),n)):s};async function _F(t,e,n,r,s,a){return new Promise((o,u)=>{t(n,bF(e,r,s,a)).then(d=>{if(!d.ok)throw d;if(r?.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>o(d)).catch(d=>wF(d,u,r))})}async function Nr(t,e,n,r,s){return _F(t,"POST",e,r,s,n)}var EF=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=$e($e({},ox),e),this.fetch=lx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Nr(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Nr(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Sr(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Nr(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Nr(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Sr(r))return{data:null,error:r};throw r}}},TF=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=$e($e({},ox),e),this.fetch=lx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Nr(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Nr(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Nr(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Nr(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Nr(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}},SF=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=$e($e({},ox),e),this.fetch=lx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Nr(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Nr(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Nr(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Nr(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}},NF=class extends SF{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new kF(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},kF=class extends EF{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new jF(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},jF=class extends TF{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},IF=class extends gF{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new pF(this.url,this.headers,t,this.fetch)}get vectors(){return new NF(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yF(this.url+"/iceberg",this.headers,this.fetch)}};const qj="2.89.0",Kl=30*1e3,S0=3,oy=S0*Kl,CF="http://localhost:9999",AF="supabase.auth.token",RF={"X-Client-Info":`gotrue-js/${qj}`},N0="X-Supabase-Api-Version",Wj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PF=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,DF=600*1e3;class pd extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class OF extends pd{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function MF(t){return Re(t)&&t.name==="AuthApiError"}class ko extends pd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class zi extends pd{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Tr extends zi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LF(t){return Re(t)&&t.name==="AuthSessionMissingError"}class Pl extends zi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mf extends zi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pf extends zi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function VF(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class pE extends zi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class FF extends zi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class k0 extends zi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ly(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class gE extends zi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class j0 extends zi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yE=` 	
\r=`.split(""),UF=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yE.length;e+=1)t[yE[e].charCodeAt(0)]=-2;for(let e=0;e<vm.length;e+=1)t[vm[e].charCodeAt(0)]=e;return t})();function vE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(vm[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(vm[r]),e.queuedBits-=6}}function Hj(t,e,n){const r=UF[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xE(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{zF(o,r,n)};for(let o=0;o<t.length;o+=1)Hj(t.charCodeAt(o),s,a);return e.join("")}function $F(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function BF(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}$F(r,e)}}function zF(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function oc(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Hj(t.charCodeAt(s),n,r);return new Uint8Array(e)}function qF(t){const e=[];return BF(t,n=>e.push(n)),new Uint8Array(e)}function Co(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>vE(s,n,r)),vE(null,n,r),e.join("")}function WF(t){return Math.round(Date.now()/1e3)+t}function HF(){return Symbol("auth-callback")}const Tn=()=>typeof window<"u"&&typeof document<"u",xo={tested:!1,writable:!1},Kj=()=>{if(!Tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xo.tested)return xo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xo.tested=!0,xo.writable=!0}catch{xo.tested=!0,xo.writable=!1}return xo.writable};function KF(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Gj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),GF=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Gl=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},wo=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},En=async(t,e)=>{await t.removeItem(e)};class ep{constructor(){this.promise=new ep.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ep.promiseConstructor=Promise;function cy(t){const e=t.split(".");if(e.length!==3)throw new j0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!PF.test(e[r]))throw new j0("JWT not in base64url format");return{header:JSON.parse(xE(e[0])),payload:JSON.parse(xE(e[1])),signature:oc(e[2]),raw:{header:e[0],payload:e[1]}}}async function YF(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function QF(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function JF(t){return("0"+t.toString(16)).substr(-2)}function XF(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,JF).join("")}async function ZF(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function eU(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await ZF(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dl(t,e,n=!1){const r=XF();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Gl(t,`${e}-code-verifier`,s);const a=await eU(r);return[a,r===a?"plain":"s256"]}const tU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nU(t){const e=t.headers.get(N0);if(!e||!e.match(tU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function rU(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function sU(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const iU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ol(t){if(!iU.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function uy(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function aU(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function wE(t){return JSON.parse(JSON.stringify(t))}const To=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),oU=[502,503,504];async function bE(t){var e;if(!GF(t))throw new k0(To(t),0);if(oU.includes(t.status))throw new k0(To(t),t.status);let n;try{n=await t.json()}catch(a){throw new ko(To(a),a)}let r;const s=nU(t);if(s&&s.getTime()>=Wj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new gE(To(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Tr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new gE(To(n),t.status,n.weak_password.reasons);throw new OF(To(n),t.status||500,r)}const lU=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(t,e,n,r){var s;const a=Object.assign({},r?.headers);a[N0]||(a[N0]=Wj["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const u=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await cU(t,e,n+u,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function cU(t,e,n,r,s,a){const o=lU(e,r,s,a);let u;try{u=await t(n,Object.assign({},o))}catch(d){throw console.error(d),new k0(To(d),0)}if(u.ok||await bE(u),r?.noResolveJson)return u;try{return await u.json()}catch(d){await bE(d)}}function ls(t){var e;let n=null;hU(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=WF(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function _E(t){const e=ls(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Na(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function uU(t){return{data:t,error:null}}function dU(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,o=Ac(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},d=Object.assign({},o);return{data:{properties:u,user:d},error:null}}function EE(t){return t}function hU(t){return t.access_token&&t.refresh_token&&t.expires_in}const dy=["global","local","others"];class fU{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Gj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=dy[0]){if(dy.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${dy.join(", ")}`);try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Na})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Ac(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:dU,redirectTo:n?.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Na})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,o,u,d;try{const f={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:EE});if(g.error)throw g.error;const y=await g.json(),x=(o=g.headers.get("x-total-count"))!==null&&o!==void 0?o:0,T=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return T.length>0&&(T.forEach(I=>{const N=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(I.split(";")[1].split("=")[1]);f[`${_}Page`]=N}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(Re(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Ol(e);try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Na})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ol(e);try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Na})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ol(e);try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Na})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ol(e.userId);try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ol(e.userId),Ol(e.id);try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,a,o,u,d;try{const f={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:EE});if(g.error)throw g.error;const y=await g.json(),x=(o=g.headers.get("x-total-count"))!==null&&o!==void 0?o:0,T=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return T.length>0&&(T.forEach(I=>{const N=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(I.split(";")[1].split("=")[1]);f[`${_}Page`]=N}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(Re(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function TE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ml={debug:!!(globalThis&&Kj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mU extends Yj{}async function pU(t,e,n){Ml.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ml.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ml.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ml.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ml.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new mU(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ml.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function gU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qj(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function yU(t){return parseInt(t,16)}function vU(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function xU(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:o,notBefore:u,requestId:d,resources:f,scheme:g,uri:y,version:x}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=Qj(t.address),I=g?`${g}://${r}`:r,N=t.statement?`${t.statement}
`:"",_=`${I} wants you to sign in with your Ethereum account:
${T}

${N}`;let k=`URI: ${y}
Version: ${x}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(s&&(k+=`
Expiration Time: ${s.toISOString()}`),u&&(k+=`
Not Before: ${u.toISOString()}`),d&&(k+=`
Request ID: ${d}`),f){let R=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);R+=`
- ${j}`}k+=R}return`${_}
${k}`}class Zt extends Error{constructor({message:e,code:n,cause:r,name:s}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class xm extends Zt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function wU({error:t,options:e}){var n,r,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Zt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Zt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Zt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Zt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Zt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Zt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Zt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Zt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Jj(o)){if(a.rp.id!==o)return new Zt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Zt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Zt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function bU({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Zt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Zt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Jj(r)){if(n.rpId!==r)return new Zt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Zt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class _U{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const EU=new _U;function TU(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Ac(t,["challenge","user","excludeCredentials"]),a=oc(e).buffer,o=Object.assign(Object.assign({},n),{id:oc(n.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:o});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:oc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function SU(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Ac(t,["challenge","allowCredentials"]),s=oc(e).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const u=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},u),{id:oc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function NU(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Co(new Uint8Array(t.response.attestationObject)),clientDataJSON:Co(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kU(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Co(new Uint8Array(s.authenticatorData)),clientDataJSON:Co(new Uint8Array(s.clientDataJSON)),signature:Co(new Uint8Array(s.signature)),userHandle:s.userHandle?Co(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Jj(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function SE(){var t,e;return!!(Tn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function jU(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xm("Browser returned unexpected credential type",e)}:{data:null,error:new xm("Empty credential response",e)}}catch(e){return{data:null,error:wU({error:e,options:t})}}}async function IU(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xm("Browser returned unexpected credential type",e)}:{data:null,error:new xm("Empty credential response",e)}}catch(e){return{data:null,error:bU({error:e,options:t})}}}const CU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},AU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wm(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const a in s){const o=s[a];if(o!==void 0)if(Array.isArray(o))r[a]=o;else if(n(o))r[a]=o;else if(e(o)){const u=r[a];e(u)?r[a]=wm(u,o):r[a]=wm(o)}else r[a]=o}return r}function RU(t,e){return wm(CU,t,e||{})}function PU(t,e){return wm(AU,t,e||{})}class DU{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},a){try{const{data:o,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:u};const d=s??EU.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:f}=o.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(o.webauthn.type){case"create":{const f=RU(o.webauthn.credential_options.publicKey,a?.create),{data:g,error:y}=await jU({publicKey:f,signal:d});return g?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const f=PU(o.webauthn.credential_options.publicKey,a?.request),{data:g,error:y}=await IU(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:f,signal:d}));return g?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new ko("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new pd("rpId is required for WebAuthn authentication")};try{if(!SE())return{data:null,error:new ko("Browser does not support WebAuthn",null)};const{data:o,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!o)return{data:null,error:u};const{webauthn:d}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new ko("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new pd("rpId is required for WebAuthn registration")};try{if(!SE())return{data:null,error:new ko("Browser does not support WebAuthn",null)};const{data:o,error:u}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:u};const{data:d,error:f}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return d?this._verify({factorId:o.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new ko("Unexpected error in register",o)}}}}gU();const OU={url:CF,storageKey:AF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function NE(t,e,n){return await n()}const Ll={};class gd{get jwks(){var e,n;return(n=(e=Ll[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ll[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},OU),e);if(this.storageKey=a.storageKey,this.instanceID=(n=gd.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,gd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Tn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new fU({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Gj(a.fetch),this.lock=a.lock||NE,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&Tn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=pU:this.lock=NE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new DU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Kj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=TE(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=TE(this.memoryStorage)),Tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${qj}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Tn()&&(n=KF(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Tn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),VF(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",u),await this._saveSession(o),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?this._returnResult({error:n}):this._returnResult({error:new ko("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:ls}),{data:o,error:u}=a;if(u||!o)return this._returnResult({data:{user:null,session:null},error:u});const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:g,password:y,options:x}=e;let T=null,I=null;this.flowType==="pkce"&&([T,I]=await Dl(this.storage,this.storageKey)),a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:g,password:y,data:(n=x?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:T,code_challenge_method:I},xform:ls})}else if("phone"in e){const{phone:g,password:y,options:x}=e;a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(r=x?.data)!==null&&r!==void 0?r:{},channel:(s=x?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:ls})}else throw new mf("You must provide either an email or phone number and a password");const{data:o,error:u}=a;if(u||!o)return await En(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(await En(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:o,options:u}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:_E})}else if("phone"in e){const{phone:a,password:o,options:u}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:_E})}else throw new mf("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new Pl;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,a,o,u,d,f,g,y,x;let T,I;if("message"in e)T=e.message,I=e.signature;else{const{chain:N,wallet:_,statement:k,options:R}=e;let j;if(Tn())if(typeof _=="object")j=_;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")j=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=_}const D=new URL((n=R?.url)!==null&&n!==void 0?n:window.location.href),M=await j.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Qj(M[0]);let P=(r=R?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const L=await j.request({method:"eth_chainId"});P=yU(L)}const C={domain:D.host,address:z,statement:k,uri:D.href,version:"1",chainId:P,nonce:(s=R?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(a=R?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(u=R?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=R?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=R?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=R?.signInWithEthereum)===null||g===void 0?void 0:g.resources};T=xU(C),I=await j.request({method:"personal_sign",params:[vU(T),z]})}try{const{data:N,error:_}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:I},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ls});if(_)throw _;if(!N||!N.session||!N.user){const k=new Pl;return this._returnResult({data:{user:null,session:null},error:k})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:_})}catch(N){if(Re(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(e){var n,r,s,a,o,u,d,f,g,y,x,T;let I,N;if("message"in e)I=e.message,N=e.signature;else{const{chain:_,wallet:k,statement:R,options:j}=e;let D;if(Tn())if(typeof k=="object")D=k;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))D=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=k}const M=new URL((n=j?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in D&&D.signIn){const z=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),R?{statement:R}:null));let P;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")P=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)P=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)I=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),N=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${M.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(s=(r=j?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=j?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((d=j?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((y=(g=j?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...j.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const z=await D.signMessage(new TextEncoder().encode(I),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=z}}try{const{data:_,error:k}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:Co(N)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:ls});if(k)throw k;if(!_||!_.session||!_.user){const R=new Pl;return this._returnResult({data:{user:null,session:null},error:R})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:k})}catch(_){if(Re(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(e){const n=await wo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new FF;const{data:a,error:o}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ls});if(await En(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const u=new Pl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(await En(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:o}=e,u=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ls}),{data:d,error:f}=u;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const g=new Pl;return this._returnResult({data:{user:null,session:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,a,o;try{if("email"in e){const{email:u,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Dl(this.storage,this.storageKey));const{error:y}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d?.data)!==null&&n!==void 0?n:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d?.data)!==null&&s!==void 0?s:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(o=d?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new mf("You must provide either an email or phone number.")}catch(u){if(await En(this.storage,`${this.storageKey}-code-verifier`),Re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:u}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:ls});if(u)throw u;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,f=o.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(s){if(Re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,a,o;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Dl(this.storage,this.storageKey));const f=await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:uU});return!((a=f.data)===null||a===void 0)&&a.url&&Tn()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(u){if(await En(this.storage,`${this.storageKey}-code-verifier`),Re(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Tr;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Re(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:o}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:o,error:u}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:u})}throw new mf("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await wo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<oy:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await wo(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=uy()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=aU(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Na}):await this._useSession(async n=>{var r,s,a;const{data:o,error:u}=n;if(u)throw u;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Tr}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Na})})}catch(n){if(Re(n))return LF(n)&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Tr;const o=s.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Dl(this.storage,this.storageKey));const{data:f,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:o.access_token,xform:Na});if(g)throw g;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await En(this.storage,`${this.storageKey}-code-verifier`),Re(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Tr;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:o}=cy(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:u}=n;if(u)throw u;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Tr;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Tn())throw new pf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new pE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new pE("No code detected.");const{data:R,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:u,expires_at:d,token_type:f}=e;if(!a||!u||!o||!f)throw new pf("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(u);let x=g+y;d&&(x=parseInt(d));const T=x-g;T*1e3<=Kl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${y}s`);const I=x-y;g-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,x,g):g-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,x,g);const{data:N,error:_}=await this._getUser(a);if(_)throw _;const k={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:y,expires_at:x,refresh_token:o,token_type:f,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:e.type},error:null})}catch(r){if(Re(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await wo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:u}=await this.admin.signOut(o,e);if(u&&!(MF(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=HF(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Dl(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await En(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var o,u,d,f,g;const{data:y,error:x}=a;if(x)throw x;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",T,{headers:this.headers,jwt:(g=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Tn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(Re(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:o,provider:u,token:d,access_token:f,nonce:g}=e,y=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:ls}),{data:x,error:T}=y;return T?this._returnResult({data:{user:null,session:null},error:T}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Pl}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:T}))}catch(s){if(await En(this.storage,`${this.storageKey}-code-verifier`),Re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)throw o;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await QF(async s=>(s>0&&await YF(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ls})),(s,a)=>{const o=200*Math.pow(2,s);return a&&ly(a)&&Date.now()+o-r<Kl})}catch(r){if(this._debug(n,"error",r),Re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await wo(this.storage,this.storageKey);if(s&&this.userStorage){let o=await wo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Gl(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o?.user)!==null&&e!==void 0?e:uy()}else if(s&&!s.user&&!s.user){const o=await wo(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await En(this.storage,this.storageKey+"-user"),await Gl(this.storage,this.storageKey,s)):s.user=uy()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<oy;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${oy}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ly(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:u}=await this._getUser(s.access_token);!u&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Tr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ep;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Tr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),Re(a)){const o={data:null,error:a};return ly(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){a.push(d)}});if(await Promise.all(o),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await En(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Gl(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=wE(s);await Gl(this.storage,this.storageKey,a)}else{const s=wE(n);await Gl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await En(this.storage,this.storageKey),await En(this.storage,this.storageKey+"-code-verifier"),await En(this.storage,this.storageKey+"-user"),this.userStorage&&await En(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Kl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Kl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Kl}ms, refresh threshold is ${S0} ticks`),s<=S0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Yj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Dl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(u.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&d.type==="totp"&&(!((s=d?.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?NU(e.webauthn.credential_response):kU(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:u}=o;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:TU(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:SU(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n?.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=cy(r.access_token);let o=null;a.aal&&(o=a.aal);let u=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const f=a.amr||[];return{data:{currentLevel:o,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Tr})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Tr});const o=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return o.data&&o.data.redirect_url&&Tn()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Tr});const o=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return o.data&&o.data.redirect_url&&Tn()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Tr})})}catch(e){if(Re(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await Ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Tr})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+DF>s)return r;const{data:a,error:o}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:T,error:I}=await this.getSession();if(I||!T.session)return this._returnResult({data:null,error:I});r=T.session.access_token}const{header:s,payload:a,signature:o,raw:{header:u,payload:d}}=cy(r);n?.allowExpired||rU(a.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!f){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:a,header:s,signature:o},error:null}}const g=sU(s.alg),y=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,o,qF(`${u}.${d}`)))throw new j0("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}}gd.nextInstanceID={};const MU=gd,LU="2.89.0";let Fu="";typeof Deno<"u"?Fu="deno":typeof document<"u"?Fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fu="react-native":Fu="node";const VU={"X-Client-Info":`supabase-js-${Fu}/${LU}`},FU={headers:VU},UU={schema:"public"},$U={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},BU={};function yd(t){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yd(t)}function zU(t,e){if(yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qU(t){var e=zU(t,"string");return yd(e)=="symbol"?e:e+""}function WU(t,e,n){return(e=qU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kE(Object(n),!0).forEach(function(r){WU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const HU=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),KU=()=>Headers,GU=(t,e,n)=>{const r=HU(n),s=KU();return async(a,o)=>{var u;const d=(u=await e())!==null&&u!==void 0?u:t;let f=new s(o?.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(a,Ut(Ut({},o),{},{headers:f}))}};function YU(t){return t.endsWith("/")?t:t+"/"}function QU(t,e){var n,r;const{db:s,auth:a,realtime:o,global:u}=t,{db:d,auth:f,realtime:g,global:y}=e,x={db:Ut(Ut({},d),s),auth:Ut(Ut({},f),a),realtime:Ut(Ut({},g),o),storage:{},global:Ut(Ut(Ut({},y),u),{},{headers:Ut(Ut({},(n=y?.headers)!==null&&n!==void 0?n:{}),(r=u?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}function JU(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(YU(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var XU=class extends MU{constructor(t){super(t)}},ZU=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const a=JU(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:UU,realtime:BU,auth:Ut(Ut({},$U),{},{storageKey:o}),global:FU},d=QU(n??{},u);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=d.auth)!==null&&f!==void 0?f:{},this.headers,d.global.fetch)}this.fetch=GU(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Ut({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new R6(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new IF(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new k6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:o,lock:u,debug:d,throwOnError:f},g,y){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XU({url:this.authUrl.href,headers:Ut(Ut({},x),g),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:u,debug:d,throwOnError:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Y6(this.realtimeUrl.href,Ut(Ut({},t),{},{params:Ut(Ut({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const e$=(t,e,n)=>new ZU(t,e,n);function t$(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}t$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const n$="https://sjkmtixbwzyariqhaasl.supabase.co",r$="sb_publishable_5yRDnLS-JjfhwenmCLFPzA_Wasb6UmF",vt=e$(n$,r$),Xj=E.createContext(void 0),Yn="demo-company";function s$(t,e,n,r,s,a,o){const u=[],d=new Date(r),f=new Date(s),g=new Date;let y=1;o==="quarterly"&&(y=3),o==="yearly"&&(y=12);let x=new Date(d);for(;x<=f;){const T=x.toISOString().split("T")[0],I=new Date(T)<g;u.push({contractId:t,tenantName:e,unitNo:n,dueDate:T,amount:a,status:I?"overdue":"due"}),x.setMonth(x.getMonth()+y)}return u}function i$(t){return{id:t.id,companyId:t.company_id,name:t.name,city:t.city,address:t.address,type:t.type,description:t.description,latitude:t.latitude,longitude:t.longitude,notes:t.notes,images:t.images||[],createdAt:t.created_at}}function a$(t){return{id:t.id,companyId:t.company_id,propertyId:t.property_id,propertyName:t.property_name,unitNo:t.unit_no,type:t.type,floor:t.floor,bedrooms:t.bedrooms,bathrooms:t.bathrooms,areaSqm:t.area_sqm,description:t.description,rentAmount:t.rent_amount,status:t.status,images:t.images||[],createdAt:t.created_at}}function o$(t){return{id:t.id,companyId:t.company_id,fullName:t.full_name,nationalId:t.national_id,phone:t.phone,email:t.email,createdAt:t.created_at}}function l$(t){return{id:t.id,companyId:t.company_id,propertyId:t.property_id,propertyName:t.property_name,unitId:t.unit_id,unitNo:t.unit_no,tenantId:t.tenant_id,tenantName:t.tenant_name,startDate:t.start_date,endDate:t.end_date,rentAmount:t.rent_amount,paymentFrequency:t.payment_frequency,depositAmount:t.deposit_amount,notes:t.notes,status:t.status,createdAt:t.created_at}}function c$(t){return{id:t.id,companyId:t.company_id,contractId:t.contract_id,tenantName:t.tenant_name,unitNo:t.unit_no,dueDate:t.due_date,amount:t.amount,status:t.status,paidAt:t.paid_at,method:t.method,reference:t.reference,createdAt:t.created_at}}function u$(t){return{id:t.id,companyId:t.company_id,propertyId:t.property_id,propertyName:t.property_name,unitId:t.unit_id,unitNo:t.unit_no,title:t.title,description:t.description,priority:t.priority,status:t.status,cost:t.cost,requestedBy:t.requested_by,assignedTo:t.assigned_to,createdAt:t.created_at}}const d$=[{module:"properties",actions:["view","create","edit","delete"]},{module:"units",actions:["view","create","edit","delete"]},{module:"tenants",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view","create","edit","delete"]},{module:"payments",actions:["view","create","edit","delete"]},{module:"maintenance",actions:["view","create","edit","delete"]},{module:"reports",actions:["view"]},{module:"settings",actions:["view","edit"]},{module:"sales",actions:["view","create","edit","delete"]},{module:"employees",actions:["view","create","edit","delete"]},{module:"tasks",actions:["view","create","edit","delete"]}],h$=[{id:"emp-1",companyId:Yn,fullName:"  ",email:"admin@arkan.sa",password:"Admin@2024",phone:"0501234567",role:"admin",department:"",joinDate:"2023-01-01",status:"active",permissions:[...d$],isActive:!0,createdAt:"2023-01-01"}],f$=[],m$=[];function p$({children:t}){const[e,n]=E.useState([]),[r,s]=E.useState([]),[a,o]=E.useState([]),[u,d]=E.useState([]),[f,g]=E.useState([]),[y,x]=E.useState([]),[T,I]=E.useState(h$),[N,_]=E.useState(f$),[k,R]=E.useState(m$),[j,D]=E.useState(!0),M=E.useCallback(async()=>{D(!0);try{const{data:te}=await vt.from("properties").select("*").eq("company_id",Yn);te&&n(te.map(i$));const{data:ee}=await vt.from("units").select("*").eq("company_id",Yn);ee&&s(ee.map(a$));const{data:ge}=await vt.from("tenants").select("*").eq("company_id",Yn);ge&&o(ge.map(o$));const{data:Ve}=await vt.from("contracts").select("*").eq("company_id",Yn);Ve&&d(Ve.map(l$));const{data:lt}=await vt.from("payments").select("*").eq("company_id",Yn);lt&&g(lt.map(c$));const{data:At}=await vt.from("maintenance_requests").select("*").eq("company_id",Yn);At&&x(At.map(u$))}catch(te){console.error("Error fetching data:",te)}finally{D(!1)}},[]);E.useEffect(()=>{M()},[M]);const z=E.useCallback(()=>{const te=r.length,ee=r.filter(ht=>ht.status==="vacant").length,ge=r.filter(ht=>ht.status==="rented").length,Ve=r.filter(ht=>ht.status==="maintenance").length,lt=te>0?ge/te*100:0,rt=u.filter(ht=>ht.status==="active").reduce((ht,zt)=>zt.paymentFrequency==="monthly"?ht+zt.rentAmount:zt.paymentFrequency==="quarterly"?ht+zt.rentAmount/3:zt.paymentFrequency==="yearly"?ht+zt.rentAmount/12:ht,0),xt=f.filter(ht=>ht.status==="overdue"),qn=xt.reduce((ht,zt)=>ht+zt.amount,0),Bt=xt.length,An=new Date;An.setDate(An.getDate()+30);const qi=u.filter(ht=>{const zt=new Date(ht.endDate);return ht.status==="active"&&zt<=An}).length;return{totalUnits:te,vacantUnits:ee,rentedUnits:ge,maintenanceUnits:Ve,occupancyRate:lt,expectedMonthlyIncome:rt,overdueAmount:qn,overdueCount:Bt,contractsExpiringSoon:qi}},[r,u,f]),P=async te=>{const{error:ee}=await vt.from("properties").insert({company_id:Yn,name:te.name,city:te.city,address:te.address,type:te.type,description:te.description,notes:te.notes,images:te.images});ee||await M()},C=async(te,ee)=>{const ge={};ee.name&&(ge.name=ee.name),ee.city&&(ge.city=ee.city),ee.address&&(ge.address=ee.address),ee.type&&(ge.type=ee.type),ee.description!==void 0&&(ge.description=ee.description),ee.notes!==void 0&&(ge.notes=ee.notes),ee.images&&(ge.images=ee.images);const{error:Ve}=await vt.from("properties").update(ge).eq("id",te);Ve||await M()},L=async te=>{const{error:ee}=await vt.from("properties").delete().eq("id",te);ee||await M()},U=async te=>{const{error:ee}=await vt.from("units").insert({company_id:Yn,property_id:te.propertyId,property_name:te.propertyName,unit_no:te.unitNo,type:te.type,floor:te.floor,bedrooms:te.bedrooms,bathrooms:te.bathrooms,area_sqm:te.areaSqm,description:te.description,rent_amount:te.rentAmount,status:te.status||"vacant",images:te.images});ee||await M()},$=async(te,ee)=>{const ge={};ee.propertyId&&(ge.property_id=ee.propertyId),ee.propertyName&&(ge.property_name=ee.propertyName),ee.unitNo&&(ge.unit_no=ee.unitNo),ee.type&&(ge.type=ee.type),ee.floor!==void 0&&(ge.floor=ee.floor),ee.bedrooms!==void 0&&(ge.bedrooms=ee.bedrooms),ee.bathrooms!==void 0&&(ge.bathrooms=ee.bathrooms),ee.areaSqm!==void 0&&(ge.area_sqm=ee.areaSqm),ee.description!==void 0&&(ge.description=ee.description),ee.rentAmount!==void 0&&(ge.rent_amount=ee.rentAmount),ee.status&&(ge.status=ee.status),ee.images&&(ge.images=ee.images);const{error:Ve}=await vt.from("units").update(ge).eq("id",te);Ve||await M()},q=async te=>{const{error:ee}=await vt.from("units").delete().eq("id",te);ee||await M()},V=async te=>{const{error:ee}=await vt.from("tenants").insert({company_id:Yn,full_name:te.fullName,national_id:te.nationalId,phone:te.phone,email:te.email});ee||await M()},se=async(te,ee)=>{const ge={};ee.fullName&&(ge.full_name=ee.fullName),ee.nationalId!==void 0&&(ge.national_id=ee.nationalId),ee.phone&&(ge.phone=ee.phone),ee.email!==void 0&&(ge.email=ee.email);const{error:Ve}=await vt.from("tenants").update(ge).eq("id",te);Ve||await M()},Q=async te=>{const{error:ee}=await vt.from("tenants").delete().eq("id",te);ee||await M()},le=async te=>{const{data:ee,error:ge}=await vt.from("contracts").insert({company_id:Yn,property_id:te.propertyId,property_name:te.propertyName,unit_id:te.unitId,unit_no:te.unitNo,tenant_id:te.tenantId,tenant_name:te.tenantName,start_date:te.startDate,end_date:te.endDate,rent_amount:te.rentAmount,payment_frequency:te.paymentFrequency,deposit_amount:te.depositAmount,notes:te.notes,status:te.status||"active"}).select().single();if(!ge&&ee){const Ve=s$(ee.id,te.tenantName,te.unitNo,te.startDate,te.endDate,te.rentAmount,te.paymentFrequency);for(const lt of Ve)await vt.from("payments").insert({company_id:Yn,contract_id:lt.contractId,tenant_name:lt.tenantName,unit_no:lt.unitNo,due_date:lt.dueDate,amount:lt.amount,status:lt.status});await vt.from("units").update({status:"rented"}).eq("id",te.unitId),await M()}},me=async(te,ee)=>{const ge={};ee.status&&(ge.status=ee.status),ee.notes!==void 0&&(ge.notes=ee.notes),ee.rentAmount!==void 0&&(ge.rent_amount=ee.rentAmount);const{error:Ve}=await vt.from("contracts").update(ge).eq("id",te);if(!Ve&&ee.status==="ended"){const lt=u.find(At=>At.id===te);lt&&await vt.from("units").update({status:"vacant"}).eq("id",lt.unitId)}Ve||await M()},J=async te=>{const ee=u.find(Ve=>Ve.id===te);await vt.from("payments").delete().eq("contract_id",te);const{error:ge}=await vt.from("contracts").delete().eq("id",te);!ge&&ee&&(await vt.from("units").update({status:"vacant"}).eq("id",ee.unitId),await M())},ve=async(te,ee,ge)=>{const{error:Ve}=await vt.from("payments").update({status:"paid",paid_at:new Date().toISOString(),method:ee,reference:ge||null}).eq("id",te);Ve||await M()},he=async te=>{const{error:ee}=await vt.from("maintenance_requests").insert({company_id:Yn,property_id:te.propertyId,property_name:te.propertyName,unit_id:te.unitId,unit_no:te.unitNo,title:te.title,description:te.description,priority:te.priority,status:te.status||"new",cost:te.cost||0,requested_by:te.requestedBy,assigned_to:te.assignedTo});ee||await M()},H=async(te,ee)=>{const ge={};ee.title&&(ge.title=ee.title),ee.description&&(ge.description=ee.description),ee.priority&&(ge.priority=ee.priority),ee.status&&(ge.status=ee.status),ee.cost!==void 0&&(ge.cost=ee.cost),ee.assignedTo!==void 0&&(ge.assigned_to=ee.assignedTo);const{error:Ve}=await vt.from("maintenance_requests").update(ge).eq("id",te);Ve||await M()},ne=async te=>{const{error:ee}=await vt.from("maintenance_requests").delete().eq("id",te);ee||await M()},ue=te=>{const ee={...te,id:`emp-${Date.now()}`,companyId:Yn,createdAt:new Date().toISOString()};I(ge=>[...ge,ee])},ye=(te,ee)=>{I(ge=>ge.map(Ve=>Ve.id===te?{...Ve,...ee}:Ve))},_e=te=>{I(ee=>ee.filter(ge=>ge.id!==te))},De=te=>{const ee=new Date().toISOString(),ge={...te,id:`task-${Date.now()}`,companyId:Yn,comments:[],history:[{id:`h-${Date.now()}`,action:"created",createdBy:te.createdBy,createdByName:te.createdByName,createdAt:ee}],createdAt:ee,updatedAt:ee};_(Ve=>[...Ve,ge])},Ae=(te,ee)=>{_(ge=>ge.map(Ve=>Ve.id===te?{...Ve,...ee,updatedAt:new Date().toISOString()}:Ve))},je=te=>{_(ee=>ee.filter(ge=>ge.id!==te))},Je=(te,ee,ge,Ve)=>{_(lt=>lt.map(At=>{if(At.id===te){const rt=new Date().toISOString();return{...At,assignedTo:ee,assignedToName:ge,history:[...At.history,{id:`h-${Date.now()}`,action:"transferred",fromEmployee:At.assignedTo,fromEmployeeName:At.assignedToName,toEmployee:ee,toEmployeeName:ge,note:Ve,createdBy:At.assignedTo,createdByName:At.assignedToName,createdAt:rt}],updatedAt:rt}}return At}))},pt=(te,ee)=>{_(ge=>ge.map(Ve=>{if(Ve.id===te){const lt=new Date().toISOString();return{...Ve,status:ee,history:[...Ve.history,{id:`h-${Date.now()}`,action:"status_changed",fromStatus:Ve.status,toStatus:ee,createdBy:Ve.assignedTo,createdByName:Ve.assignedToName,createdAt:lt}],updatedAt:lt}}return Ve}))},vn=te=>{R(ee=>ee.map(ge=>ge.id===te?{...ge,read:!0}:ge))},nn=()=>{R(te=>te.map(ee=>({...ee,read:!0})))};return c.jsx(Xj.Provider,{value:{properties:e,units:r,tenants:a,contracts:u,payments:f,maintenanceRequests:y,employees:T,tasks:N,notifications:k,loading:j,getKPI:z,refreshData:M,addProperty:P,updateProperty:C,deleteProperty:L,addUnit:U,updateUnit:$,deleteUnit:q,addTenant:V,updateTenant:se,deleteTenant:Q,addContract:le,updateContract:me,deleteContract:J,recordPayment:ve,addMaintenanceRequest:he,updateMaintenanceRequest:H,deleteMaintenanceRequest:ne,addEmployee:ue,updateEmployee:ye,deleteEmployee:_e,addTask:De,updateTask:Ae,deleteTask:je,transferTask:Je,updateTaskStatus:pt,markNotificationRead:vn,markAllNotificationsRead:nn},children:t})}function zn(){const t=E.useContext(Xj);if(!t)throw new Error("useData must be used within a DataProvider");return t}const _r=({children:t})=>{const{user:e,subscription:n,isLoading:r}=ws(),s=ur();return r?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e?!["/profile","/renew","/pricing","/dashboard"].includes(s.pathname)&&(!n||n.status==="expired")?c.jsx(zy,{to:"/pricing",replace:!0,state:{message:"     ."}}):c.jsx(c.Fragment,{children:t}):c.jsx(zy,{to:"/login",state:{from:s},replace:!0})},cx=E.createContext({});function ux(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const dx=typeof window<"u",Zj=dx?E.useLayoutEffect:E.useEffect,tp=E.createContext(null);function hx(t,e){t.indexOf(e)===-1&&t.push(e)}function fx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Oi=(t,e,n)=>n>e?e:n<t?t:n;let mx=()=>{};const Mi={},e2=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function t2(t){return typeof t=="object"&&t!==null}const n2=t=>/^0[^.\s]+$/u.test(t);function px(t){let e;return()=>(e===void 0&&(e=t()),e)}const Wr=t=>t,g$=(t,e)=>n=>e(t(n)),Ud=(...t)=>t.reduce(g$),vd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class gx{constructor(){this.subscriptions=[]}add(e){return hx(this.subscriptions,e),()=>fx(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gs=t=>t*1e3,zr=t=>t/1e3;function r2(t,e){return e?t*(1e3/e):0}const s2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,y$=1e-7,v$=12;function x$(t,e,n,r,s){let a,o,u=0;do o=e+(n-e)/2,a=s2(o,r,s)-t,a>0?n=o:e=o;while(Math.abs(a)>y$&&++u<v$);return o}function $d(t,e,n,r){if(t===e&&n===r)return Wr;const s=a=>x$(a,0,1,t,n);return a=>a===0||a===1?a:s2(s(a),e,r)}const i2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,a2=t=>e=>1-t(1-e),o2=$d(.33,1.53,.69,.99),yx=a2(o2),l2=i2(yx),c2=t=>(t*=2)<1?.5*yx(t):.5*(2-Math.pow(2,-10*(t-1))),vx=t=>1-Math.sin(Math.acos(t)),u2=a2(vx),d2=i2(vx),w$=$d(.42,0,1,1),b$=$d(0,0,.58,1),h2=$d(.42,0,.58,1),_$=t=>Array.isArray(t)&&typeof t[0]!="number",f2=t=>Array.isArray(t)&&typeof t[0]=="number",E$={linear:Wr,easeIn:w$,easeInOut:h2,easeOut:b$,circIn:vx,circInOut:d2,circOut:u2,backIn:yx,backInOut:l2,backOut:o2,anticipate:c2},T$=t=>typeof t=="string",jE=t=>{if(f2(t)){mx(t.length===4);const[e,n,r,s]=t;return $d(e,n,r,s)}else if(T$(t))return E$[t];return t},gf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function S$(t,e){let n=new Set,r=new Set,s=!1,a=!1;const o=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(g){o.has(g)&&(f.schedule(g),t()),g(u)}const f={schedule:(g,y=!1,x=!1)=>{const I=x&&s?n:r;return y&&o.add(g),I.has(g)||I.add(g),g},cancel:g=>{r.delete(g),o.delete(g)},process:g=>{if(u=g,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,a&&(a=!1,f.process(g))}};return f}const N$=40;function m2(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=gf.reduce((j,D)=>(j[D]=S$(a),j),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:g,update:y,preRender:x,render:T,postRender:I}=o,N=()=>{const j=Mi.useManualTiming?s.timestamp:performance.now();n=!1,Mi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(j-s.timestamp,N$),1)),s.timestamp=j,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),g.process(s),y.process(s),x.process(s),T.process(s),I.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(N))},_=()=>{n=!0,r=!0,s.isProcessing||t(N)};return{schedule:gf.reduce((j,D)=>{const M=o[D];return j[D]=(z,P=!1,C=!1)=>(n||_(),M.schedule(z,P,C)),j},{}),cancel:j=>{for(let D=0;D<gf.length;D++)o[gf[D]].cancel(j)},state:s,steps:o}}const{schedule:It,cancel:Fa,state:Sn,steps:hy}=m2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wr,!0);let zf;function k$(){zf=void 0}const cr={now:()=>(zf===void 0&&cr.set(Sn.isProcessing||Mi.useManualTiming?Sn.timestamp:performance.now()),zf),set:t=>{zf=t,queueMicrotask(k$)}},p2=t=>e=>typeof e=="string"&&e.startsWith(t),xx=p2("--"),j$=p2("var(--"),wx=t=>j$(t)?I$.test(t.split("/*")[0].trim()):!1,I$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},xd={...Rc,transform:t=>Oi(0,1,t)},yf={...Rc,default:1},Qu=t=>Math.round(t*1e5)/1e5,bx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function C$(t){return t==null}const A$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_x=(t,e)=>n=>!!(typeof n=="string"&&A$.test(n)&&n.startsWith(t)||e&&!C$(n)&&Object.prototype.hasOwnProperty.call(n,e)),g2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,o,u]=r.match(bx);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(o),alpha:u!==void 0?parseFloat(u):1}},R$=t=>Oi(0,255,t),fy={...Rc,transform:t=>Math.round(R$(t))},Ao={test:_x("rgb","red"),parse:g2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+fy.transform(t)+", "+fy.transform(e)+", "+fy.transform(n)+", "+Qu(xd.transform(r))+")"};function P$(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const I0={test:_x("#"),parse:P$,transform:Ao.transform},Bd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xa=Bd("deg"),Ys=Bd("%"),qe=Bd("px"),D$=Bd("vh"),O$=Bd("vw"),IE={...Ys,parse:t=>Ys.parse(t)/100,transform:t=>Ys.transform(t*100)},Jl={test:_x("hsl","hue"),parse:g2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ys.transform(Qu(e))+", "+Ys.transform(Qu(n))+", "+Qu(xd.transform(r))+")"},en={test:t=>Ao.test(t)||I0.test(t)||Jl.test(t),parse:t=>Ao.test(t)?Ao.parse(t):Jl.test(t)?Jl.parse(t):I0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ao.transform(t):Jl.transform(t),getAnimatableNone:t=>{const e=en.parse(t);return e.alpha=0,en.transform(e)}},M$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function L$(t){return isNaN(t)&&typeof t=="string"&&(t.match(bx)?.length||0)+(t.match(M$)?.length||0)>0}const y2="number",v2="color",V$="var",F$="var(",CE="${}",U$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const u=e.replace(U$,d=>(en.test(d)?(r.color.push(a),s.push(v2),n.push(en.parse(d))):d.startsWith(F$)?(r.var.push(a),s.push(V$),n.push(d)):(r.number.push(a),s.push(y2),n.push(parseFloat(d))),++a,CE)).split(CE);return{values:n,split:u,indexes:r,types:s}}function x2(t){return wd(t).values}function w2(t){const{split:e,types:n}=wd(t),r=e.length;return s=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],s[o]!==void 0){const u=n[o];u===y2?a+=Qu(s[o]):u===v2?a+=en.transform(s[o]):a+=s[o]}return a}}const $$=t=>typeof t=="number"?0:en.test(t)?en.getAnimatableNone(t):t;function B$(t){const e=x2(t);return w2(t)(e.map($$))}const Ua={test:L$,parse:x2,createTransformer:w2,getAnimatableNone:B$};function my(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function z$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,o=0;if(!e)s=a=o=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;s=my(d,u,t+1/3),a=my(d,u,t),o=my(d,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function bm(t,e){return n=>n>0?e:t}const Mt=(t,e,n)=>t+(e-t)*n,py=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},q$=[I0,Ao,Jl],W$=t=>q$.find(e=>e.test(t));function AE(t){const e=W$(t);if(!e)return!1;let n=e.parse(t);return e===Jl&&(n=z$(n)),n}const RE=(t,e)=>{const n=AE(t),r=AE(e);if(!n||!r)return bm(t,e);const s={...n};return a=>(s.red=py(n.red,r.red,a),s.green=py(n.green,r.green,a),s.blue=py(n.blue,r.blue,a),s.alpha=Mt(n.alpha,r.alpha,a),Ao.transform(s))},C0=new Set(["none","hidden"]);function H$(t,e){return C0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function K$(t,e){return n=>Mt(t,e,n)}function Ex(t){return typeof t=="number"?K$:typeof t=="string"?wx(t)?bm:en.test(t)?RE:Q$:Array.isArray(t)?b2:typeof t=="object"?en.test(t)?RE:G$:bm}function b2(t,e){const n=[...t],r=n.length,s=t.map((a,o)=>Ex(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=s[o](a);return n}}function G$(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Ex(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function Y$(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],u=t.values[o]??0;n[s]=u,r[a]++}return n}const Q$=(t,e)=>{const n=Ua.createTransformer(e),r=wd(t),s=wd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?C0.has(t)&&!s.values.length||C0.has(e)&&!r.values.length?H$(t,e):Ud(b2(Y$(r,s),s.values),n):bm(t,e)};function _2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Mt(t,e,n):Ex(t)(t,e)}const J$=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>It.update(e,n),stop:()=>Fa(e),now:()=>Sn.isProcessing?Sn.timestamp:cr.now()}},E2=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},_m=2e4;function Tx(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<_m;)e+=n,r=t.next(e);return e>=_m?1/0:e}function X$(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Tx(r),_m);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:zr(s)}}const Z$=5;function T2(t,e,n){const r=Math.max(e-Z$,0);return r2(n-t(r),e-r)}const $t={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gy=.001;function e9({duration:t=$t.duration,bounce:e=$t.bounce,velocity:n=$t.velocity,mass:r=$t.mass}){let s,a,o=1-e;o=Oi($t.minDamping,$t.maxDamping,o),t=Oi($t.minDuration,$t.maxDuration,zr(t)),o<1?(s=f=>{const g=f*o,y=g*t,x=g-n,T=A0(f,o),I=Math.exp(-y);return gy-x/T*I},a=f=>{const y=f*o*t,x=y*n+n,T=Math.pow(o,2)*Math.pow(f,2)*t,I=Math.exp(-y),N=A0(Math.pow(f,2),o);return(-s(f)+gy>0?-1:1)*((x-T)*I)/N}):(s=f=>{const g=Math.exp(-f*t),y=(f-n)*t+1;return-gy+g*y},a=f=>{const g=Math.exp(-f*t),y=(n-f)*(t*t);return g*y});const u=5/t,d=n9(s,a,u);if(t=Gs(t),isNaN(d))return{stiffness:$t.stiffness,damping:$t.damping,duration:t};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:o*2*Math.sqrt(r*f),duration:t}}}const t9=12;function n9(t,e,n){let r=n;for(let s=1;s<t9;s++)r=r-t(r)/e(r);return r}function A0(t,e){return t*Math.sqrt(1-e*e)}const r9=["duration","bounce"],s9=["stiffness","damping","mass"];function PE(t,e){return e.some(n=>t[n]!==void 0)}function i9(t){let e={velocity:$t.velocity,stiffness:$t.stiffness,damping:$t.damping,mass:$t.mass,isResolvedFromDuration:!1,...t};if(!PE(t,s9)&&PE(t,r9))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Oi(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:$t.mass,stiffness:s,damping:a}}else{const n=e9(t);e={...e,...n,mass:$t.mass},e.isResolvedFromDuration=!0}return e}function Em(t=$t.visualDuration,e=$t.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:g,duration:y,velocity:x,isResolvedFromDuration:T}=i9({...n,velocity:-zr(n.velocity||0)}),I=x||0,N=f/(2*Math.sqrt(d*g)),_=o-a,k=zr(Math.sqrt(d/g)),R=Math.abs(_)<5;r||(r=R?$t.restSpeed.granular:$t.restSpeed.default),s||(s=R?$t.restDelta.granular:$t.restDelta.default);let j;if(N<1){const M=A0(k,N);j=z=>{const P=Math.exp(-N*k*z);return o-P*((I+N*k*_)/M*Math.sin(M*z)+_*Math.cos(M*z))}}else if(N===1)j=M=>o-Math.exp(-k*M)*(_+(I+k*_)*M);else{const M=k*Math.sqrt(N*N-1);j=z=>{const P=Math.exp(-N*k*z),C=Math.min(M*z,300);return o-P*((I+N*k*_)*Math.sinh(C)+M*_*Math.cosh(C))/M}}const D={calculatedDuration:T&&y||null,next:M=>{const z=j(M);if(T)u.done=M>=y;else{let P=M===0?I:0;N<1&&(P=M===0?Gs(I):T2(j,M,z));const C=Math.abs(P)<=r,L=Math.abs(o-z)<=s;u.done=C&&L}return u.value=u.done?o:z,u},toString:()=>{const M=Math.min(Tx(D),_m),z=E2(P=>D.next(M*P).value,M,30);return M+"ms "+z},toTransition:()=>{}};return D}Em.applyToOptions=t=>{const e=X$(t,100,Em);return t.ease=e.ease,t.duration=Gs(e.duration),t.type="keyframes",t};function R0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:u,max:d,restDelta:f=.5,restSpeed:g}){const y=t[0],x={done:!1,value:y},T=C=>u!==void 0&&C<u||d!==void 0&&C>d,I=C=>u===void 0?d:d===void 0||Math.abs(u-C)<Math.abs(d-C)?u:d;let N=n*e;const _=y+N,k=o===void 0?_:o(_);k!==_&&(N=k-y);const R=C=>-N*Math.exp(-C/r),j=C=>k+R(C),D=C=>{const L=R(C),U=j(C);x.done=Math.abs(L)<=f,x.value=x.done?k:U};let M,z;const P=C=>{T(x.value)&&(M=C,z=Em({keyframes:[x.value,I(x.value)],velocity:T2(j,C,x.value),damping:s,stiffness:a,restDelta:f,restSpeed:g}))};return P(0),{calculatedDuration:null,next:C=>{let L=!1;return!z&&M===void 0&&(L=!0,D(C),P(C)),M!==void 0&&C>=M?z.next(C-M):(!L&&D(C),x)}}}function a9(t,e,n){const r=[],s=n||Mi.mix||_2,a=t.length-1;for(let o=0;o<a;o++){let u=s(t[o],t[o+1]);if(e){const d=Array.isArray(e)?e[o]||Wr:e;u=Ud(d,u)}r.push(u)}return r}function o9(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(mx(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=a9(e,r,s),d=u.length,f=g=>{if(o&&g<t[0])return e[0];let y=0;if(d>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const x=vd(t[y],t[y+1],g);return u[y](x)};return n?g=>f(Oi(t[0],t[a-1],g)):f}function l9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=vd(0,e,r);t.push(Mt(n,1,s))}}function c9(t){const e=[0];return l9(e,t.length-1),e}function u9(t,e){return t.map(n=>n*e)}function d9(t,e){return t.map(()=>e||h2).splice(0,t.length-1)}function Ju({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=_$(r)?r.map(jE):jE(r),a={done:!1,value:e[0]},o=u9(n&&n.length===e.length?n:c9(e),t),u=o9(o,e,{ease:Array.isArray(s)?s:d9(e,s)});return{calculatedDuration:t,next:d=>(a.value=u(d),a.done=d>=t,a)}}const h9=t=>t!==null;function Sx(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(h9),u=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!u||r===void 0?a[u]:r}const f9={decay:R0,inertia:R0,tween:Ju,keyframes:Ju,spring:Em};function S2(t){typeof t.type=="string"&&(t.type=f9[t.type])}class Nx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const m9=t=>t/100;class kx extends Nx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==cr.now()&&this.tick(cr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;S2(e);const{type:n=Ju,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=e;let{keyframes:u}=e;const d=n||Ju;d!==Ju&&typeof u[0]!="number"&&(this.mixKeyframes=Ud(m9,_2(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=Tx(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:T,type:I,onUpdate:N,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const k=this.currentTime-f*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?k<0:k>s;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let j=this.currentTime,D=r;if(y){const C=Math.min(this.currentTime,s)/u;let L=Math.floor(C),U=C%1;!U&&C>=1&&(U=1),U===1&&L--,L=Math.min(L,y+1),!!(L%2)&&(x==="reverse"?(U=1-U,T&&(U-=T/u)):x==="mirror"&&(D=o)),j=Oi(0,1,U)*u}const M=R?{done:!1,value:g[0]}:D.next(j);a&&(M.value=a(M.value));let{done:z}=M;!R&&d!==null&&(z=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return P&&I!==R0&&(M.value=Sx(g,this.options,_,this.speed)),N&&N(M.value),P&&this.finish(),M}then(e,n){return this.finished.then(e,n)}get duration(){return zr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zr(e)}get time(){return zr(this.currentTime)}set time(e){e=Gs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(cr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=J$,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(cr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function p9(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ro=t=>t*180/Math.PI,P0=t=>{const e=Ro(Math.atan2(t[1],t[0]));return D0(e)},g9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:P0,rotateZ:P0,skewX:t=>Ro(Math.atan(t[1])),skewY:t=>Ro(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},D0=t=>(t=t%360,t<0&&(t+=360),t),DE=P0,OE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),ME=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),y9={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:OE,scaleY:ME,scale:t=>(OE(t)+ME(t))/2,rotateX:t=>D0(Ro(Math.atan2(t[6],t[5]))),rotateY:t=>D0(Ro(Math.atan2(-t[2],t[0]))),rotateZ:DE,rotate:DE,skewX:t=>Ro(Math.atan(t[4])),skewY:t=>Ro(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function O0(t){return t.includes("scale")?1:0}function M0(t,e){if(!t||t==="none")return O0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=y9,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=g9,s=u}if(!s)return O0(e);const a=r[e],o=s[1].split(",").map(x9);return typeof a=="function"?a(o):o[a]}const v9=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return M0(n,e)};function x9(t){return parseFloat(t.trim())}const Pc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Dc=new Set(Pc),LE=t=>t===Rc||t===qe,w9=new Set(["x","y","z"]),b9=Pc.filter(t=>!w9.has(t));function _9(t){const e=[];return b9.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Do={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>M0(e,"x"),y:(t,{transform:e})=>M0(e,"y")};Do.translateX=Do.x;Do.translateY=Do.y;const Oo=new Set;let L0=!1,V0=!1,F0=!1;function N2(){if(V0){const t=Array.from(Oo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=_9(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}V0=!1,L0=!1,Oo.forEach(t=>t.complete(F0)),Oo.clear()}function k2(){Oo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(V0=!0)})}function E9(){F0=!0,k2(),N2(),F0=!1}class jx{constructor(e,n,r,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Oo.add(this),L0||(L0=!0,It.read(k2),It.resolveKeyframes(N2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const u=r.readValue(n,o);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=o),s&&a===void 0&&s.set(e[0])}p9(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Oo.delete(this)}cancel(){this.state==="scheduled"&&(Oo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const T9=t=>t.startsWith("--");function S9(t,e,n){T9(e)?t.style.setProperty(e,n):t.style[e]=n}const N9=px(()=>window.ScrollTimeline!==void 0),k9={};function j9(t,e){const n=px(t);return()=>k9[e]??n()}const j2=j9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Uu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,VE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uu([0,.65,.55,1]),circOut:Uu([.55,0,1,.45]),backIn:Uu([.31,.01,.66,-.59]),backOut:Uu([.33,1.53,.69,.99])};function I2(t,e){if(t)return typeof t=="function"?j2()?E2(t,e):"ease-out":f2(t)?Uu(t):Array.isArray(t)?t.map(n=>I2(n,e)||VE.easeOut):VE[t]}function I9(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:u="easeOut",times:d}={},f=void 0){const g={[e]:n};d&&(g.offset=d);const y=I2(u,s);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return f&&(x.pseudoElement=f),t.animate(g,x)}function C2(t){return typeof t=="function"&&"applyToOptions"in t}function C9({type:t,...e}){return C2(t)&&j2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class A9 extends Nx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,mx(typeof e.type!="string");const f=C9(e);this.animation=I9(n,r,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=Sx(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):S9(n,r,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return zr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zr(e)}get time(){return zr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Gs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&N9()?(this.animation.timeline=e,Wr):n(this)}}const A2={anticipate:c2,backInOut:l2,circInOut:d2};function R9(t){return t in A2}function P9(t){typeof t.ease=="string"&&R9(t.ease)&&(t.ease=A2[t.ease])}const FE=10;class D9 extends A9{constructor(e){P9(e),S2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new kx({...o,autoplay:!1}),d=Gs(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-FE).value,u.sample(d).value,FE),u.stop()}}const UE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ua.test(t)||t==="0")&&!t.startsWith("url("));function O9(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function M9(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=UE(s,e),u=UE(a,e);return!o||!u?!1:O9(t)||(n==="spring"||C2(n))&&r}function U0(t){t.duration=0,t.type="keyframes"}const L9=new Set(["opacity","clipPath","filter","transform"]),V9=px(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function F9(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return V9()&&n&&L9.has(n)&&(n!=="transform"||!f)&&!d&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}const U9=40;class $9 extends Nx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:u,name:d,motionValue:f,element:g,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=cr.now();const x={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:o,name:d,motionValue:f,element:g,...y},T=g?.KeyframeResolver||jx;this.keyframeResolver=new T(u,(I,N,_)=>this.onKeyframesResolved(I,N,x,!_),d,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:a,type:o,velocity:u,delay:d,isHandoff:f,onUpdate:g}=r;this.resolvedAt=cr.now(),M9(e,a,o,u)||((Mi.instantAnimations||!d)&&g?.(Sx(e,r,n)),e[0]=e[e.length-1],U0(r),r.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>U9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},T=!f&&F9(x)?new D9({...x,element:x.motionValue.owner.current}):new kx(x);T.finished.then(()=>this.notifyFinished()).catch(Wr),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),E9()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const B9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function z9(t){const e=B9.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function R2(t,e,n=1){const[r,s]=z9(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return e2(o)?parseFloat(o):o}return wx(s)?R2(s,e,n+1):s}function Ix(t,e){return t?.[e]??t?.default??t}const P2=new Set(["width","height","top","left","right","bottom",...Pc]),q9={test:t=>t==="auto",parse:t=>t},D2=t=>e=>e.test(t),O2=[Rc,qe,Ys,xa,O$,D$,q9],$E=t=>O2.find(D2(t));function W9(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||n2(t):!0}const H9=new Set(["brightness","contrast","saturate","opacity"]);function K9(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bx)||[];if(!r)return t;const s=n.replace(r,"");let a=H9.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const G9=/\b([a-z-]*)\(.*?\)/gu,$0={...Ua,getAnimatableNone:t=>{const e=t.match(G9);return e?e.map(K9).join(" "):t}},BE={...Rc,transform:Math.round},Y9={rotate:xa,rotateX:xa,rotateY:xa,rotateZ:xa,scale:yf,scaleX:yf,scaleY:yf,scaleZ:yf,skew:xa,skewX:xa,skewY:xa,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:xd,originX:IE,originY:IE,originZ:qe},Cx={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe,...Y9,zIndex:BE,fillOpacity:xd,strokeOpacity:xd,numOctaves:BE},Q9={...Cx,color:en,backgroundColor:en,outlineColor:en,fill:en,stroke:en,borderColor:en,borderTopColor:en,borderRightColor:en,borderBottomColor:en,borderLeftColor:en,filter:$0,WebkitFilter:$0},M2=t=>Q9[t];function L2(t,e){let n=M2(t);return n!==$0&&(n=Ua),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const J9=new Set(["auto","none","0"]);function X9(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!J9.has(a)&&wd(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=L2(n,s)}class Z9 extends jx{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),wx(f))){const g=R2(f,n.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!P2.has(r)||e.length!==2)return;const[s,a]=e,o=$E(s),u=$E(a);if(o!==u)if(LE(o)&&LE(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else Do[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||W9(e[s]))&&r.push(s);r.length&&X9(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Do[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Do[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function eB(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const V2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function F2(t){return t2(t)&&"offsetHeight"in t}const zE=30,tB=t=>!isNaN(parseFloat(t));class nB{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=cr.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=cr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tB(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new gx);const r=this.events[e].add(n);return e==="change"?()=>{r(),It.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=cr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>zE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,zE);return r2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yc(t,e){return new nB(t,e)}const{schedule:Ax}=m2(queueMicrotask,!1),cs={x:!1,y:!1};function U2(){return cs.x||cs.y}function rB(t){return t==="x"||t==="y"?cs[t]?null:(cs[t]=!0,()=>{cs[t]=!1}):cs.x||cs.y?null:(cs.x=cs.y=!0,()=>{cs.x=cs.y=!1})}function $2(t,e){const n=eB(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function qE(t){return!(t.pointerType==="touch"||U2())}function sB(t,e,n={}){const[r,s,a]=$2(t,n),o=u=>{if(!qE(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const g=y=>{qE(y)&&(f(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(u=>{u.addEventListener("pointerenter",o,s)}),a}const B2=(t,e)=>e?t===e?!0:B2(t,e.parentElement):!1,Rx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,iB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aB(t){return iB.has(t.tagName)||t.tabIndex!==-1}const qf=new WeakSet;function WE(t){return e=>{e.key==="Enter"&&t(e)}}function yy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const oB=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=WE(()=>{if(qf.has(n))return;yy(n,"down");const s=WE(()=>{yy(n,"up")}),a=()=>yy(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function HE(t){return Rx(t)&&!U2()}function lB(t,e,n={}){const[r,s,a]=$2(t,n),o=u=>{const d=u.currentTarget;if(!HE(u))return;qf.add(d);const f=e(d,u),g=(T,I)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),qf.has(d)&&qf.delete(d),HE(T)&&typeof f=="function"&&f(T,{success:I})},y=T=>{g(T,d===window||d===document||n.useGlobalTarget||B2(d,T.target))},x=T=>{g(T,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",x,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",o,s),F2(u)&&(u.addEventListener("focus",f=>oB(f,s)),!aB(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function z2(t){return t2(t)&&"ownerSVGElement"in t}function cB(t){return z2(t)&&t.tagName==="svg"}const $n=t=>!!(t&&t.getVelocity),uB=[...O2,en,Ua],dB=t=>uB.find(D2(t)),Px=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function KE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function hB(...t){return e=>{let n=!1;const r=t.map(s=>{const a=KE(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():KE(t[s],null)}}}}function fB(...t){return E.useCallback(hB(...t),t)}class mB extends E.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=F2(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pB({children:t,isPresent:e,anchorX:n,root:r}){const s=E.useId(),a=E.useRef(null),o=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=E.useContext(Px),d=fB(a,t?.ref);return E.useInsertionEffect(()=>{const{width:f,height:g,top:y,left:x,right:T}=o.current;if(e||!a.current||!f||!g)return;const I=n==="left"?`left: ${x}`:`right: ${T}`;a.current.dataset.motionPopId=s;const N=document.createElement("style");u&&(N.nonce=u);const _=r??document.head;return _.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${I}px !important;
            top: ${y}px !important;
          }
        `),()=>{_.contains(N)&&_.removeChild(N)}},[e]),c.jsx(mB,{isPresent:e,childRef:a,sizeRef:o,children:E.cloneElement(t,{ref:d})})}const gB=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:o,anchorX:u,root:d})=>{const f=ux(yB),g=E.useId();let y=!0,x=E.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:n,custom:s,onExitComplete:T=>{f.set(T,!0);for(const I of f.values())if(!I)return;r&&r()},register:T=>(f.set(T,!1),()=>f.delete(T))}),[n,f,r]);return a&&y&&(x={...x}),E.useMemo(()=>{f.forEach((T,I)=>f.set(I,!1))},[n]),E.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),o==="popLayout"&&(t=c.jsx(pB,{isPresent:n,anchorX:u,root:d,children:t})),c.jsx(tp.Provider,{value:x,children:t})};function yB(){return new Map}function q2(t=!0){const e=E.useContext(tp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=E.useId();E.useEffect(()=>{if(t)return s(a)},[t]);const o=E.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const vf=t=>t.key||"";function GE(t){const e=[];return E.Children.forEach(t,n=>{E.isValidElement(n)&&e.push(n)}),e}const $a=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:o=!1,anchorX:u="left",root:d})=>{const[f,g]=q2(o),y=E.useMemo(()=>GE(t),[t]),x=o&&!f?[]:y.map(vf),T=E.useRef(!0),I=E.useRef(y),N=ux(()=>new Map),[_,k]=E.useState(y),[R,j]=E.useState(y);Zj(()=>{T.current=!1,I.current=y;for(let z=0;z<R.length;z++){const P=vf(R[z]);x.includes(P)?N.delete(P):N.get(P)!==!0&&N.set(P,!1)}},[R,x.length,x.join("-")]);const D=[];if(y!==_){let z=[...y];for(let P=0;P<R.length;P++){const C=R[P],L=vf(C);x.includes(L)||(z.splice(P,0,C),D.push(C))}return a==="wait"&&D.length&&(z=D),j(GE(z)),k(y),null}const{forceRender:M}=E.useContext(cx);return c.jsx(c.Fragment,{children:R.map(z=>{const P=vf(z),C=o&&!f?!1:y===R||x.includes(P),L=()=>{if(N.has(P))N.set(P,!0);else return;let U=!0;N.forEach($=>{$||(U=!1)}),U&&(M?.(),j(I.current),o&&g?.(),r&&r())};return c.jsx(gB,{isPresent:C,initial:!T.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:d,onExitComplete:C?void 0:L,anchorX:u,children:z},P)})})},W2=E.createContext({strict:!1}),YE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vc={};for(const t in YE)vc[t]={isEnabled:e=>YE[t].some(n=>!!e[n])};function vB(t){for(const e in t)vc[e]={...vc[e],...t[e]}}const xB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Tm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||xB.has(t)}let H2=t=>!Tm(t);function wB(t){typeof t=="function"&&(H2=e=>e.startsWith("on")?!Tm(e):t(e))}try{wB(require("@emotion/is-prop-valid").default)}catch{}function bB(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(H2(s)||n===!0&&Tm(s)||!e&&!Tm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const np=E.createContext({});function rp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function bd(t){return typeof t=="string"||Array.isArray(t)}const Dx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ox=["initial",...Dx];function sp(t){return rp(t.animate)||Ox.some(e=>bd(t[e]))}function K2(t){return!!(sp(t)||t.variants)}function _B(t,e){if(sp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||bd(n)?n:void 0,animate:bd(r)?r:void 0}}return t.inherit!==!1?e:{}}function EB(t){const{initial:e,animate:n}=_B(t,E.useContext(np));return E.useMemo(()=>({initial:e,animate:n}),[QE(e),QE(n)])}function QE(t){return Array.isArray(t)?t.join(" "):t}const _d={};function TB(t){for(const e in t)_d[e]=t[e],xx(e)&&(_d[e].isCSSVariable=!0)}function G2(t,{layout:e,layoutId:n}){return Dc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_d[t]||t==="opacity")}const SB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NB=Pc.length;function kB(t,e,n){let r="",s=!0;for(let a=0;a<NB;a++){const o=Pc[a],u=t[o];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(o.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const f=V2(u,Cx[o]);if(!d){s=!1;const g=SB[o]||o;r+=`${g}(${f}) `}n&&(e[o]=f)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Mx(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let o=!1,u=!1;for(const d in e){const f=e[d];if(Dc.has(d)){o=!0;continue}else if(xx(d)){s[d]=f;continue}else{const g=V2(f,Cx[d]);d.startsWith("origin")?(u=!0,a[d]=g):r[d]=g}}if(e.transform||(o||n?r.transform=kB(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${f} ${g}`}}const Lx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Y2(t,e,n){for(const r in e)!$n(e[r])&&!G2(r,n)&&(t[r]=e[r])}function jB({transformTemplate:t},e){return E.useMemo(()=>{const n=Lx();return Mx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function IB(t,e){const n=t.style||{},r={};return Y2(r,n,t),Object.assign(r,jB(t,e)),r}function CB(t,e){const n={},r=IB(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const AB={offset:"stroke-dashoffset",array:"stroke-dasharray"},RB={offset:"strokeDashoffset",array:"strokeDasharray"};function PB(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?AB:RB;t[a.offset]=qe.transform(-r);const o=qe.transform(e),u=qe.transform(n);t[a.array]=`${o} ${u}`}function Q2(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:o=0,...u},d,f,g){if(Mx(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:x}=t;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=g?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),s!==void 0&&PB(y,s,a,o,!1)}const J2=()=>({...Lx(),attrs:{}}),X2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function DB(t,e,n,r){const s=E.useMemo(()=>{const a=J2();return Q2(a,e,X2(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};Y2(a,t.style,t),s.style={...a,...s.style}}return s}const OB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vx(t){return typeof t!="string"||t.includes("-")?!1:!!(OB.indexOf(t)>-1||/[A-Z]/u.test(t))}function MB(t,e,n,{latestValues:r},s,a=!1){const u=(Vx(t)?DB:CB)(e,r,s,t),d=bB(e,typeof t=="string",a),f=t!==E.Fragment?{...d,...u,ref:n}:{},{children:g}=e,y=E.useMemo(()=>$n(g)?g.get():g,[g]);return E.createElement(t,{...f,children:y})}function JE(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Fx(t,e,n,r){if(typeof e=="function"){const[s,a]=JE(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=JE(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function Wf(t){return $n(t)?t.get():t}function LB({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:VB(n,r,s,t),renderState:e()}}function VB(t,e,n,r){const s={},a=r(t,{});for(const x in a)s[x]=Wf(a[x]);let{initial:o,animate:u}=t;const d=sp(t),f=K2(t);e&&f&&!d&&t.inherit!==!1&&(o===void 0&&(o=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||o===!1;const y=g?u:o;if(y&&typeof y!="boolean"&&!rp(y)){const x=Array.isArray(y)?y:[y];for(let T=0;T<x.length;T++){const I=Fx(t,x[T]);if(I){const{transitionEnd:N,transition:_,...k}=I;for(const R in k){let j=k[R];if(Array.isArray(j)){const D=g?j.length-1:0;j=j[D]}j!==null&&(s[R]=j)}for(const R in N)s[R]=N[R]}}}return s}const Z2=t=>(e,n)=>{const r=E.useContext(np),s=E.useContext(tp),a=()=>LB(t,e,r,s);return n?a():ux(a)};function Ux(t,e,n){const{style:r}=t,s={};for(const a in r)($n(r[a])||e.style&&$n(e.style[a])||G2(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const FB=Z2({scrapeMotionValuesFromProps:Ux,createRenderState:Lx});function eI(t,e,n){const r=Ux(t,e,n);for(const s in t)if($n(t[s])||$n(e[s])){const a=Pc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}const UB=Z2({scrapeMotionValuesFromProps:eI,createRenderState:J2}),$B=Symbol.for("motionComponentSymbol");function Xl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function BB(t,e,n){return E.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Xl(n)&&(n.current=r))},[e])}const $x=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),zB="framerAppearId",tI="data-"+$x(zB),nI=E.createContext({});function qB(t,e,n,r,s){const{visualElement:a}=E.useContext(np),o=E.useContext(W2),u=E.useContext(tp),d=E.useContext(Px).reducedMotion,f=E.useRef(null);r=r||o.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,y=E.useContext(nI);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&WB(f.current,n,s,y);const x=E.useRef(!1);E.useInsertionEffect(()=>{g&&x.current&&g.update(n,u)});const T=n[tI],I=E.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return Zj(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),I.current&&g.animationState&&g.animationState.animateChanges())}),E.useEffect(()=>{g&&(!I.current&&g.animationState&&g.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),I.current=!1),g.enteringChildren=void 0)}),g}function WB(t,e,n,r){const{layoutId:s,layout:a,drag:o,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:rI(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||u&&Xl(u),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:f})}function rI(t){if(t)return t.options.allowProjection!==!1?t.projection:rI(t.parent)}function vy(t,{forwardMotionProps:e=!1}={},n,r){n&&vB(n);const s=Vx(t)?UB:FB;function a(u,d){let f;const g={...E.useContext(Px),...u,layoutId:HB(u)},{isStatic:y}=g,x=EB(u),T=s(u,y);if(!y&&dx){KB();const I=GB(g);f=I.MeasureLayout,x.visualElement=qB(t,T,g,r,I.ProjectionNode)}return c.jsxs(np.Provider,{value:x,children:[f&&x.visualElement?c.jsx(f,{visualElement:x.visualElement,...g}):null,MB(t,u,BB(T,x.visualElement,d),T,y,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=E.forwardRef(a);return o[$B]=t,o}function HB({layoutId:t}){const e=E.useContext(cx).id;return e&&t!==void 0?e+"-"+t:t}function KB(t,e){E.useContext(W2).strict}function GB(t){const{drag:e,layout:n}=vc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function YB(t,e){if(typeof Proxy>"u")return vy;const n=new Map,r=(a,o)=>vy(a,o,t,e),s=(a,o)=>r(a,o);return new Proxy(s,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,vy(o,void 0,t,e)),n.get(o))})}function sI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function QB({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function JB(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xy(t){return t===void 0||t===1}function B0({scale:t,scaleX:e,scaleY:n}){return!xy(t)||!xy(e)||!xy(n)}function So(t){return B0(t)||iI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function iI(t){return XE(t.x)||XE(t.y)}function XE(t){return t&&t!=="0%"}function Sm(t,e,n){const r=t-n,s=e*r;return n+s}function ZE(t,e,n,r,s){return s!==void 0&&(t=Sm(t,s,r)),Sm(t,n,r)+e}function z0(t,e=0,n=1,r,s){t.min=ZE(t.min,e,n,r,s),t.max=ZE(t.max,e,n,r,s)}function aI(t,{x:e,y:n}){z0(t.x,e.translate,e.scale,e.originPoint),z0(t.y,n.translate,n.scale,n.originPoint)}const eT=.999999999999,tT=1.0000000000001;function XB(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,o;for(let u=0;u<s;u++){a=n[u],o=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ec(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,aI(t,o)),r&&So(a.latestValues)&&ec(t,a.latestValues))}e.x<tT&&e.x>eT&&(e.x=1),e.y<tT&&e.y>eT&&(e.y=1)}function Zl(t,e){t.min=t.min+e,t.max=t.max+e}function nT(t,e,n,r,s=.5){const a=Mt(t.min,t.max,s);z0(t,e,n,a,r)}function ec(t,e){nT(t.x,e.x,e.scaleX,e.scale,e.originX),nT(t.y,e.y,e.scaleY,e.scale,e.originY)}function oI(t,e){return sI(JB(t.getBoundingClientRect(),e))}function ZB(t,e,n){const r=oI(t,n),{scroll:s}=e;return s&&(Zl(r.x,s.offset.x),Zl(r.y,s.offset.y)),r}const rT=()=>({translate:0,scale:1,origin:0,originPoint:0}),tc=()=>({x:rT(),y:rT()}),sT=()=>({min:0,max:0}),ln=()=>({x:sT(),y:sT()}),q0={current:null},lI={current:!1};function e8(){if(lI.current=!0,!!dx)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>q0.current=t.matches;t.addEventListener("change",e),e()}else q0.current=!1}const t8=new WeakMap;function n8(t,e,n){for(const r in e){const s=e[r],a=n[r];if($n(s))t.addValue(r,s);else if($n(a))t.addValue(r,yc(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,yc(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const iT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class r8{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:o},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=cr.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,It.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=sp(n),this.isVariantNode=K2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in y){const T=y[x];d[x]!==void 0&&$n(T)&&T.set(d[x])}}mount(e){this.current=e,t8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),lI.current||e8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:q0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Fa(this.notifyUpdate),Fa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Dc.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&It.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vc){const n=vc[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<iT.length;r++){const s=iT[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=e[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=n8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(e2(r)||n2(r))?r=parseFloat(r):!dB(r)&&Ua.test(n)&&(r=L2(e,n)),this.setBaseTarget(e,$n(r)?r.get():r)),$n(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Fx(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!$n(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new gx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Ax.render(this.render)}}class cI extends r8{constructor(){super(...arguments),this.KeyframeResolver=Z9}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;$n(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function uI(t,{style:e,vars:n},r,s){const a=t.style;let o;for(o in e)a[o]=e[o];s?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function s8(t){return window.getComputedStyle(t)}class i8 extends cI{constructor(){super(...arguments),this.type="html",this.renderInstance=uI}readValueFromInstance(e,n){if(Dc.has(n))return this.projection?.isProjecting?O0(n):v9(e,n);{const r=s8(e),s=(xx(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return oI(e,n)}build(e,n,r){Mx(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Ux(e,n,r)}}const dI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function a8(t,e,n,r){uI(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(dI.has(s)?s:$x(s),e.attrs[s])}class o8 extends cI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Dc.has(n)){const r=M2(n);return r&&r.default||0}return n=dI.has(n)?n:$x(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return eI(e,n,r)}build(e,n,r){Q2(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){a8(e,n,r,s)}mount(e){this.isSVGTag=X2(e.tagName),super.mount(e)}}const l8=(t,e)=>Vx(t)?new o8(e):new i8(e,{allowProjection:t!==E.Fragment});function lc(t,e,n){const r=t.getProps();return Fx(r,e,n!==void 0?n:r.custom,t)}const W0=t=>Array.isArray(t);function c8(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yc(n))}function u8(t){return W0(t)?t[t.length-1]||0:t}function d8(t,e){const n=lc(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const o in a){const u=u8(a[o]);c8(t,o,u)}}function h8(t){return!!($n(t)&&t.add)}function H0(t,e){const n=t.getValue("willChange");if(h8(n))return n.add(e);if(!n&&Mi.WillChange){const r=new Mi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function hI(t){return t.props[tI]}const f8=t=>t!==null;function m8(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(f8),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}const p8={type:"spring",stiffness:500,damping:25,restSpeed:10},g8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),y8={type:"keyframes",duration:.8},v8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},x8=(t,{keyframes:e})=>e.length>2?y8:Dc.has(t)?t.startsWith("scale")?g8(e[1]):p8:v8;function w8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:u,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const Bx=(t,e,n,r={},s,a)=>o=>{const u=Ix(r,t)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Gs(d);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{o(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:a?void 0:s};w8(u)||Object.assign(g,x8(t,g)),g.duration&&(g.duration=Gs(g.duration)),g.repeatDelay&&(g.repeatDelay=Gs(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(U0(g),g.delay===0&&(y=!0)),(Mi.instantAnimations||Mi.skipAnimations)&&(y=!0,U0(g),g.delay=0),g.allowFlatten=!u.type&&!u.ease,y&&!a&&e.get()!==void 0){const x=m8(g.keyframes,u);if(x!==void 0){It.update(()=>{g.onUpdate(x),g.onComplete()});return}}return u.isSync?new kx(g):new $9(g)};function b8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function fI(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...u}=e;r&&(a=r);const d=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const g in u){const y=t.getValue(g,t.latestValues[g]??null),x=u[g];if(x===void 0||f&&b8(f,g))continue;const T={delay:n,...Ix(a||{},g)},I=y.get();if(I!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===I&&!T.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const k=hI(t);if(k){const R=window.MotionHandoffAnimation(k,g,It);R!==null&&(T.startTime=R,N=!0)}}H0(t,g),y.start(Bx(g,y,x,t.shouldReduceMotion&&P2.has(g)?{type:!1}:T,t,N));const _=y.animation;_&&d.push(_)}return o&&Promise.all(d).then(()=>{It.update(()=>{o&&d8(t,o)})}),d}function mI(t,e,n,r=0,s=1){const a=Array.from(t).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),o=t.size,u=(o-1)*r;return typeof n=="function"?n(a,o):s===1?a*r:u-a*r}function K0(t,e,n={}){const r=lc(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(fI(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:y}=s;return _8(t,e,d,f,g,y,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[a,o]:[o,a];return d().then(()=>f())}else return Promise.all([a(),o(n.delay)])}function _8(t,e,n=0,r=0,s=0,a=1,o){const u=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),u.push(K0(d,e,{...o,delay:n+(typeof r=="function"?0:r)+mI(t.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(u)}function E8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>K0(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=K0(t,e,n);else{const s=typeof e=="function"?lc(t,e,n.custom):e;r=Promise.all(fI(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function pI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const T8=Ox.length;function gI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?gI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<T8;n++){const r=Ox[n],s=t.props[r];(bd(s)||s===!1)&&(e[r]=s)}return e}const S8=[...Dx].reverse(),N8=Dx.length;function k8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>E8(t,n,r)))}function j8(t){let e=k8(t),n=aT(),r=!0;const s=d=>(f,g)=>{const y=lc(t,g,d==="exit"?t.presenceContext?.custom:void 0);if(y){const{transition:x,transitionEnd:T,...I}=y;f={...f,...I,...T}}return f};function a(d){e=d(t)}function o(d){const{props:f}=t,g=gI(t.parent)||{},y=[],x=new Set;let T={},I=1/0;for(let _=0;_<N8;_++){const k=S8[_],R=n[k],j=f[k]!==void 0?f[k]:g[k],D=bd(j),M=k===d?R.isActive:null;M===!1&&(I=_);let z=j===g[k]&&j!==f[k]&&D;if(z&&r&&t.manuallyAnimateOnMount&&(z=!1),R.protectedKeys={...T},!R.isActive&&M===null||!j&&!R.prevProp||rp(j)||typeof j=="boolean")continue;const P=I8(R.prevProp,j);let C=P||k===d&&R.isActive&&!z&&D||_>I&&D,L=!1;const U=Array.isArray(j)?j:[j];let $=U.reduce(s(k),{});M===!1&&($={});const{prevResolvedValues:q={}}=R,V={...q,...$},se=me=>{C=!0,x.has(me)&&(L=!0,x.delete(me)),R.needsAnimating[me]=!0;const J=t.getValue(me);J&&(J.liveStyle=!1)};for(const me in V){const J=$[me],ve=q[me];if(T.hasOwnProperty(me))continue;let he=!1;W0(J)&&W0(ve)?he=!pI(J,ve):he=J!==ve,he?J!=null?se(me):x.add(me):J!==void 0&&x.has(me)?se(me):R.protectedKeys[me]=!0}R.prevProp=j,R.prevResolvedValues=$,R.isActive&&(T={...T,...$}),r&&t.blockInitialAnimation&&(C=!1);const Q=z&&P;C&&(!Q||L)&&y.push(...U.map(me=>{const J={type:k};if(typeof me=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:ve}=t,he=lc(ve,me);if(ve.enteringChildren&&he){const{delayChildren:H}=he.transition||{};J.delay=mI(ve.enteringChildren,t,H)}}return{animation:me,options:J}}))}if(x.size){const _={};if(typeof f.initial!="boolean"){const k=lc(t,Array.isArray(f.initial)?f.initial[0]:f.initial);k&&k.transition&&(_.transition=k.transition)}x.forEach(k=>{const R=t.getBaseTarget(k),j=t.getValue(k);j&&(j.liveStyle=!0),_[k]=R??null}),y.push({animation:_})}let N=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(y):Promise.resolve()}function u(d,f){if(n[d].isActive===f)return Promise.resolve();t.variantChildren?.forEach(y=>y.animationState?.setActive(d,f)),n[d].isActive=f;const g=o(d);for(const y in n)n[y].protectedKeys={};return g}return{animateChanges:o,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=aT()}}}function I8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!pI(e,t):!1}function bo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aT(){return{animate:bo(!0),whileInView:bo(),whileHover:bo(),whileTap:bo(),whileDrag:bo(),whileFocus:bo(),exit:bo()}}class qa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class C8 extends qa{constructor(e){super(e),e.animationState||(e.animationState=j8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();rp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let A8=0;class R8 extends qa{constructor(){super(...arguments),this.id=A8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const P8={animation:{Feature:C8},exit:{Feature:R8}};function Ed(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function zd(t){return{point:{x:t.pageX,y:t.pageY}}}const D8=t=>e=>Rx(e)&&t(e,zd(e));function Xu(t,e,n,r){return Ed(t,e,D8(n),r)}const yI=1e-4,O8=1-yI,M8=1+yI,vI=.01,L8=0-vI,V8=0+vI;function Qn(t){return t.max-t.min}function F8(t,e,n){return Math.abs(t-e)<=n}function oT(t,e,n,r=.5){t.origin=r,t.originPoint=Mt(e.min,e.max,t.origin),t.scale=Qn(n)/Qn(e),t.translate=Mt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=O8&&t.scale<=M8||isNaN(t.scale))&&(t.scale=1),(t.translate>=L8&&t.translate<=V8||isNaN(t.translate))&&(t.translate=0)}function Zu(t,e,n,r){oT(t.x,e.x,n.x,r?r.originX:void 0),oT(t.y,e.y,n.y,r?r.originY:void 0)}function lT(t,e,n){t.min=n.min+e.min,t.max=t.min+Qn(e)}function U8(t,e,n){lT(t.x,e.x,n.x),lT(t.y,e.y,n.y)}function cT(t,e,n){t.min=e.min-n.min,t.max=t.min+Qn(e)}function Nm(t,e,n){cT(t.x,e.x,n.x),cT(t.y,e.y,n.y)}function Fr(t){return[t("x"),t("y")]}const xI=({current:t})=>t?t.ownerDocument.defaultView:null,uT=(t,e)=>Math.abs(t-e);function $8(t,e){const n=uT(t.x,e.x),r=uT(t.y,e.y);return Math.sqrt(n**2+r**2)}class wI{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=by(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,I=$8(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!I)return;const{point:N}=x,{timestamp:_}=Sn;this.history.push({...N,timestamp:_});const{onStart:k,onMove:R}=this.handlers;T||(k&&k(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,x)},this.handlePointerMove=(x,T)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=wy(T,this.transformPagePoint),It.update(this.updatePoint,!0)},this.handlePointerUp=(x,T)=>{this.end();const{onEnd:I,onSessionEnd:N,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=by(x.type==="pointercancel"?this.lastMoveEventInfo:wy(T,this.transformPagePoint),this.history);this.startEvent&&I&&I(x,k),N&&N(x,k)},!Rx(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const u=zd(e),d=wy(u,this.transformPagePoint),{point:f}=d,{timestamp:g}=Sn;this.history=[{...f,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,by(d,this.history)),this.removeListeners=Ud(Xu(this.contextWindow,"pointermove",this.handlePointerMove),Xu(this.contextWindow,"pointerup",this.handlePointerUp),Xu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Fa(this.updatePoint)}}function wy(t,e){return e?{point:e(t.point)}:t}function dT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function by({point:t},e){return{point:t,delta:dT(t,bI(e)),offset:dT(t,B8(e)),velocity:z8(e,.1)}}function B8(t){return t[0]}function bI(t){return t[t.length-1]}function z8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=bI(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Gs(e)));)n--;if(!r)return{x:0,y:0};const a=zr(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function q8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Mt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Mt(n,t,r.max):Math.min(t,n)),t}function hT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function W8(t,{top:e,left:n,bottom:r,right:s}){return{x:hT(t.x,n,s),y:hT(t.y,e,r)}}function fT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function H8(t,e){return{x:fT(t.x,e.x),y:fT(t.y,e.y)}}function K8(t,e){let n=.5;const r=Qn(t),s=Qn(e);return s>r?n=vd(e.min,e.max-r,t.min):r>s&&(n=vd(t.min,t.max-s,e.min)),Oi(0,1,n)}function G8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const G0=.35;function Y8(t=G0){return t===!1?t=0:t===!0&&(t=G0),{x:mT(t,"left","right"),y:mT(t,"top","bottom")}}function mT(t,e,n){return{min:pT(t,e),max:pT(t,n)}}function pT(t,e){return typeof t=="number"?t:t[e]||0}const Q8=new WeakMap;class J8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(zd(y).point)},o=(y,x)=>{const{drag:T,dragPropagation:I,onDragStart:N}=this.getProps();if(T&&!I&&(this.openDragLock&&this.openDragLock(),this.openDragLock=rB(T),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fr(k=>{let R=this.getAxisMotionValue(k).get()||0;if(Ys.test(R)){const{projection:j}=this.visualElement;if(j&&j.layout){const D=j.layout.layoutBox[k];D&&(R=Qn(D)*(parseFloat(R)/100))}}this.originPoint[k]=R}),N&&It.postRender(()=>N(y,x)),H0(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},u=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:T,dragDirectionLock:I,onDirectionLock:N,onDrag:_}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:k}=x;if(I&&this.currentDirection===null){this.currentDirection=X8(k),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",x.point,k),this.updateAxis("y",x.point,k),this.visualElement.render(),_&&_(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Fr(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new wI(e,{onSessionStart:a,onStart:o,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:xI(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:u}=this.getProps();u&&It.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!xf(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=q8(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Xl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=W8(r.layoutBox,e):this.constraints=!1,this.elastic=Y8(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Fr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=G8(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Xl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=ZB(r,s.root,this.visualElement.getTransformPagePoint());let o=H8(s.layout.layoutBox,a);if(n){const u=n(QB(o));this.hasMutatedConstraints=!!u,u&&(o=sI(u))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Fr(g=>{if(!xf(g,n,this.currentDirection))return;let y=d&&d[g]||{};o&&(y={min:0,max:0});const x=s?200:1e6,T=s?40:1e7,I={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(g,I)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return H0(this.visualElement,e),r.start(Bx(e,r,0,n,this.visualElement,!1))}stopAnimation(){Fr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Fr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Fr(n=>{const{drag:r}=this.getProps();if(!xf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:u}=s.layout.layoutBox[n];a.set(e[n]-Mt(o,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Fr(o=>{const u=this.getAxisMotionValue(o);if(u&&this.constraints!==!1){const d=u.get();s[o]=K8({min:d,max:d},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Fr(o=>{if(!xf(o,e,null))return;const u=this.getAxisMotionValue(o),{min:d,max:f}=this.constraints[o];u.set(Mt(d,f,s[o]))})}addListeners(){if(!this.visualElement.current)return;Q8.set(this.visualElement,this);const e=this.visualElement.current,n=Xu(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Xl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),It.read(r);const o=Ed(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Fr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=G0,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:u}}}function xf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function X8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Z8 extends qa{constructor(e){super(e),this.removeGroupControls=Wr,this.removeListeners=Wr,this.controls=new J8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wr}unmount(){this.removeGroupControls(),this.removeListeners()}}const gT=t=>(e,n)=>{t&&It.postRender(()=>t(e,n))};class e7 extends qa{constructor(){super(...arguments),this.removePointerDownListener=Wr}onPointerDown(e){this.session=new wI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:gT(e),onStart:gT(n),onMove:r,onEnd:(a,o)=>{delete this.session,s&&It.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=Xu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Au={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(qe.test(t))t=parseFloat(t);else return t;const n=yT(t,e.target.x),r=yT(t,e.target.y);return`${n}% ${r}%`}},t7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ua.parse(t);if(s.length>5)return r;const a=Ua.createTransformer(t),o=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;s[0+o]/=u,s[1+o]/=d;const f=Mt(u,d,.5);return typeof s[2+o]=="number"&&(s[2+o]/=f),typeof s[3+o]=="number"&&(s[3+o]/=f),a(s)}};let _y=!1;class n7 extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;TB(r7),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),_y&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Hf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,_y=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||It.postRender(()=>{const u=o.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ax.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;_y=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _I(t){const[e,n]=q2(),r=E.useContext(cx);return c.jsx(n7,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(nI),isPresent:e,safeToRemove:n})}const r7={borderRadius:{...Au,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Au,borderTopRightRadius:Au,borderBottomLeftRadius:Au,borderBottomRightRadius:Au,boxShadow:t7};function s7(t,e,n){const r=$n(t)?t:yc(t);return r.start(Bx("",r,e,n)),r.animation}const i7=(t,e)=>t.depth-e.depth;class a7{constructor(){this.children=[],this.isDirty=!1}add(e){hx(this.children,e),this.isDirty=!0}remove(e){fx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(i7),this.isDirty=!1,this.children.forEach(e)}}function o7(t,e){const n=cr.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(Fa(r),t(a-e))};return It.setup(r,!0),()=>Fa(r)}const EI=["TopLeft","TopRight","BottomLeft","BottomRight"],l7=EI.length,vT=t=>typeof t=="string"?parseFloat(t):t,xT=t=>typeof t=="number"||qe.test(t);function c7(t,e,n,r,s,a){s?(t.opacity=Mt(0,n.opacity??1,u7(r)),t.opacityExit=Mt(e.opacity??1,0,d7(r))):a&&(t.opacity=Mt(e.opacity??1,n.opacity??1,r));for(let o=0;o<l7;o++){const u=`border${EI[o]}Radius`;let d=wT(e,u),f=wT(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||xT(d)===xT(f)?(t[u]=Math.max(Mt(vT(d),vT(f),r),0),(Ys.test(f)||Ys.test(d))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=Mt(e.rotate||0,n.rotate||0,r))}function wT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const u7=TI(0,.5,u2),d7=TI(.5,.95,Wr);function TI(t,e,n){return r=>r<t?0:r>e?1:n(vd(t,e,r))}function bT(t,e){t.min=e.min,t.max=e.max}function os(t,e){bT(t.x,e.x),bT(t.y,e.y)}function _T(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ET(t,e,n,r,s){return t-=e,t=Sm(t,1/n,r),s!==void 0&&(t=Sm(t,1/s,r)),t}function h7(t,e=0,n=1,r=.5,s,a=t,o=t){if(Ys.test(e)&&(e=parseFloat(e),e=Mt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let u=Mt(a.min,a.max,r);t===a&&(u-=e),t.min=ET(t.min,e,n,u,s),t.max=ET(t.max,e,n,u,s)}function TT(t,e,[n,r,s],a,o){h7(t,e[n],e[r],e[s],e.scale,a,o)}const f7=["x","scaleX","originX"],m7=["y","scaleY","originY"];function ST(t,e,n,r){TT(t.x,e,f7,n?n.x:void 0,r?r.x:void 0),TT(t.y,e,m7,n?n.y:void 0,r?r.y:void 0)}function NT(t){return t.translate===0&&t.scale===1}function SI(t){return NT(t.x)&&NT(t.y)}function kT(t,e){return t.min===e.min&&t.max===e.max}function p7(t,e){return kT(t.x,e.x)&&kT(t.y,e.y)}function jT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function NI(t,e){return jT(t.x,e.x)&&jT(t.y,e.y)}function IT(t){return Qn(t.x)/Qn(t.y)}function CT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class g7{constructor(){this.members=[]}add(e){hx(this.members,e),e.scheduleRender()}remove(e){if(fx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function y7(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,o=n?.z||0;if((s||a||o)&&(r=`translate3d(${s}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:y,rotateY:x,skewX:T,skewY:I}=n;f&&(r=`perspective(${f}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),T&&(r+=`skewX(${T}deg) `),I&&(r+=`skewY(${I}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const Ey=["","X","Y","Z"],v7=1e3;let x7=0;function Ty(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function kI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",It,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&kI(r)}function jI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},u=e?.()){this.id=x7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_7),this.nodes.forEach(N7),this.nodes.forEach(k7),this.nodes.forEach(E7)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new a7)}addEventListener(o,u){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new gx),this.eventHandlers.get(o).add(u)}notifyListeners(o,...u){const d=this.eventHandlers.get(o);d&&d.notify(...u)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=z2(o)&&!cB(o),this.instance=o;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;It.read(()=>{y=window.innerWidth}),t(o,()=>{const T=window.innerWidth;T!==y&&(y=T,this.root.updateBlockedByResize=!0,g&&g(),g=o7(x,250),Hf.hasAnimatedSinceResize&&(Hf.hasAnimatedSinceResize=!1,this.nodes.forEach(PT)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||f.getDefaultTransition()||R7,{onLayoutAnimationStart:N,onLayoutAnimationComplete:_}=f.getProps(),k=!this.targetLayout||!NI(this.targetLayout,T),R=!y&&x;if(this.options.layoutRoot||this.resumeFrom||R||y&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Ix(I,"layout"),onPlay:N,onComplete:_};(f.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(g,R)}else y||PT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(j7),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(AT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(RT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(S7),this.nodes.forEach(w7),this.nodes.forEach(b7)):this.nodes.forEach(RT),this.clearAllSnapshots();const u=cr.now();Sn.delta=Oi(0,1e3/60,u-Sn.timestamp),Sn.timestamp=u,Sn.isProcessing=!0,hy.update.process(Sn),hy.preRender.process(Sn),hy.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ax.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(T7),this.sharedNodes.forEach(I7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,It.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){It.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qn(this.snapshot.measuredBox.x)&&!Qn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!SI(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;o&&this.instance&&(u||So(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return o&&(d=this.removeTransform(d)),P7(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ln();const u=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(D7))){const{scroll:f}=this.root;f&&(Zl(u.x,f.offset.x),Zl(u.y,f.offset.y))}return u}removeElementScroll(o){const u=ln();if(os(u,o),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:y}=f;f!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&os(u,o),Zl(u.x,g.offset.x),Zl(u.y,g.offset.y))}return u}applyTransform(o,u=!1){const d=ln();os(d,o);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&ec(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),So(g.latestValues)&&ec(d,g.latestValues)}return So(this.latestValues)&&ec(d,this.latestValues),d}removeTransform(o){const u=ln();os(u,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!So(f.latestValues))continue;B0(f.latestValues)&&f.updateSnapshot();const g=ln(),y=f.measurePageBox();os(g,y),ST(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return So(this.latestValues)&&ST(u,this.latestValues),u}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=Sn.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),U8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):os(this.target,this.layout.layoutBox),aI(this.target,this.targetDelta)):os(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||B0(this.parent.latestValues)||iI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,u,d){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),Nm(this.relativeTargetOrigin,u,d),os(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),u=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;os(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;XB(this.layoutCorrected,this.treeScale,this.path,u),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ln());const{target:T}=o;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_T(this.prevProjectionDelta.x,this.projectionDelta.x),_T(this.prevProjectionDelta.y,this.projectionDelta.y)),Zu(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!CT(this.projectionDelta.x,this.prevProjectionDelta.x)||!CT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tc(),this.projectionDelta=tc(),this.projectionDeltaWithTransform=tc()}setAnimationOrigin(o,u=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},y=tc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=ln(),T=d?d.source:void 0,I=this.layout?this.layout.source:void 0,N=T!==I,_=this.getStack(),k=!_||_.members.length<=1,R=!!(N&&!k&&this.options.crossfade===!0&&!this.path.some(A7));this.animationProgress=0;let j;this.mixTargetDelta=D=>{const M=D/1e3;DT(y.x,o.x,M),DT(y.y,o.y,M),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Nm(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),C7(this.relativeTarget,this.relativeTargetOrigin,x,M),j&&p7(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=ln()),os(j,this.relativeTarget)),N&&(this.animationValues=g,c7(g,f,this.latestValues,M,R,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Fa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=It.update(()=>{Hf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yc(0)),this.currentAnimation=s7(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(v7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:g}=o;if(!(!u||!d||!f)){if(this!==o&&this.layout&&f&&II(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||ln();const y=Qn(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+y;const x=Qn(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+x}os(u,d),ec(u,g),Zu(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(o,u){this.sharedNodes.has(o)||this.sharedNodes.set(o,new g7),this.sharedNodes.get(o).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let u=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&Ty("z",o,f,this.animationValues);for(let g=0;g<Ey.length;g++)Ty(`rotate${Ey[g]}`,o,f,this.animationValues),Ty(`skew${Ey[g]}`,o,f,this.animationValues);o.render();for(const g in f)o.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);o.scheduleRender()}applyProjectionStyles(o,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Wf(u?.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Wf(u?.pointerEvents)||""),this.hasProjected&&!So(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=y7(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),o.transform=y;const{x,y:T}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${T.origin*100}% 0`,f.animationValues?o.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:o.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const I in _d){if(g[I]===void 0)continue;const{correct:N,applyTo:_,isCSSVariable:k}=_d[I],R=y==="none"?g[I]:N(g[I],f);if(_){const j=_.length;for(let D=0;D<j;D++)o[_[D]]=R}else k?this.options.visualElement.renderState.vars[I]=R:o[I]=R}this.options.layoutId&&(o.pointerEvents=f===this?Wf(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(AT),this.root.sharedNodes.clear()}}}function w7(t){t.updateLayout()}function b7(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?Fr(g=>{const y=a?e.measuredBox[g]:e.layoutBox[g],x=Qn(y);y.min=n[g].min,y.max=y.min+x}):II(s,e.layoutBox,n)&&Fr(g=>{const y=a?e.measuredBox[g]:e.layoutBox[g],x=Qn(n[g]);y.max=y.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+x)});const o=tc();Zu(o,n,e.layoutBox);const u=tc();a?Zu(u,t.applyTransform(r,!0),e.measuredBox):Zu(u,n,e.layoutBox);const d=!SI(o);let f=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:x}=g;if(y&&x){const T=ln();Nm(T,e.layoutBox,y.layoutBox);const I=ln();Nm(I,n,x.layoutBox),NI(T,I)||(f=!0),g.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=T,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:o,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function _7(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function E7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function T7(t){t.clearSnapshot()}function AT(t){t.clearMeasurements()}function RT(t){t.isLayoutDirty=!1}function S7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function PT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function N7(t){t.resolveTargetDelta()}function k7(t){t.calcProjection()}function j7(t){t.resetSkewAndRotation()}function I7(t){t.removeLeadSnapshot()}function DT(t,e,n){t.translate=Mt(e.translate,0,n),t.scale=Mt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function OT(t,e,n,r){t.min=Mt(e.min,n.min,r),t.max=Mt(e.max,n.max,r)}function C7(t,e,n,r){OT(t.x,e.x,n.x,r),OT(t.y,e.y,n.y,r)}function A7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const R7={duration:.45,ease:[.4,0,.1,1]},MT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),LT=MT("applewebkit/")&&!MT("chrome/")?Math.round:Wr;function VT(t){t.min=LT(t.min),t.max=LT(t.max)}function P7(t){VT(t.x),VT(t.y)}function II(t,e,n){return t==="position"||t==="preserve-aspect"&&!F8(IT(e),IT(n),.2)}function D7(t){return t!==t.root&&t.scroll?.wasRoot}const O7=jI({attachResizeListener:(t,e)=>Ed(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sy={current:void 0},CI=jI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Sy.current){const t=new O7({});t.mount(window),t.setOptions({layoutScroll:!0}),Sy.current=t}return Sy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),M7={pan:{Feature:e7},drag:{Feature:Z8,ProjectionNode:CI,MeasureLayout:_I}};function FT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&It.postRender(()=>a(e,zd(e)))}class L7 extends qa{mount(){const{current:e}=this.node;e&&(this.unmount=sB(e,(n,r)=>(FT(this.node,r,"Start"),s=>FT(this.node,s,"End"))))}unmount(){}}class V7 extends qa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ud(Ed(this.node.current,"focus",()=>this.onFocus()),Ed(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function UT(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&It.postRender(()=>a(e,zd(e)))}class F7 extends qa{mount(){const{current:e}=this.node;e&&(this.unmount=lB(e,(n,r)=>(UT(this.node,r,"Start"),(s,{success:a})=>UT(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Y0=new WeakMap,Ny=new WeakMap,U7=t=>{const e=Y0.get(t.target);e&&e(t)},$7=t=>{t.forEach(U7)};function B7({root:t,...e}){const n=t||document;Ny.has(n)||Ny.set(n,{});const r=Ny.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver($7,{root:t,...e})),r[s]}function z7(t,e,n){const r=B7(e);return Y0.set(t,n),r.observe(t),()=>{Y0.delete(t),r.unobserve(t)}}const q7={some:0,all:1};class W7 extends qa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:q7[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=f?g:y;x&&x(d)};return z7(this.node.current,o,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(H7(e,n))&&this.startObserver()}unmount(){}}function H7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const K7={inView:{Feature:W7},tap:{Feature:F7},focus:{Feature:V7},hover:{Feature:L7}},G7={layout:{ProjectionNode:CI,MeasureLayout:_I}},Y7={...P8,...K7,...M7,...G7},Qe=YB(Y7,l8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J7=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),$T=t=>{const e=J7(t);return e.charAt(0).toUpperCase()+e.slice(1)},AI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...u},d)=>E.createElement("svg",{ref:d,...X7,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:AI("lucide",s),...u},[...o.map(([f,g])=>E.createElement(f,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(t,e)=>{const n=E.forwardRef(({className:r,...s},a)=>E.createElement(Z7,{ref:a,iconNode:e,className:AI(`lucide-${Q7($T(t))}`,`lucide-${t}`,r),...s}));return n.displayName=$T(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],BT=we("arrow-left-right",ez);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nz=we("arrow-left",tz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sz=we("arrow-right",rz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],az=we("bath",iz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],lz=we("bed",oz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],RI=we("bell",cz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],zx=we("brain",uz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],dr=we("building-2",dz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],fz=we("building",hz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],km=we("calendar",mz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Zs=we("chart-column",pz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],yz=we("chart-pie",gz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hs=we("check",vz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],PI=we("chevron-right",xz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],DI=we("circle-alert",wz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mo=we("circle-check-big",bz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Q0=we("circle-check",_z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Tz=we("circle-user",Ez);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Nz=we("circle-x",Sz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],qd=we("clipboard-list",kz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Td=we("clock",jz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],zT=we("copy",Iz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Hr=we("credit-card",Cz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],wf=we("download",Az);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Pz=we("external-link",Rz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],OI=we("eye-off",Dz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MI=we("eye",Oz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Lz=we("facebook",Mz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],Fz=we("file-pen-line",Vz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vs=we("file-text",Uz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Bz=we("funnel",$z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],qz=we("heart",zz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ps=we("house",Wz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Kz=we("info",Hz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Yz=we("instagram",Gz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Jz=we("key",Qz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Zz=we("linkedin",Xz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],tq=we("loader-circle",eq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jm=we("lock",nq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],qx=we("log-out",rq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Wa=we("mail",sq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Sd=we("map-pin",iq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],oq=we("maximize",aq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],LI=we("menu",lq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],uq=we("message-circle",cq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],hq=we("pen-tool",dq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],mq=we("pen",fq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Wd=we("phone",pq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Li=we("plus",gq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Im=we("receipt",yq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Vi=we("search",vq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],wq=we("send",xq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_q=we("settings",bq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Wx=we("shield-check",Eq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Oc=we("shopping-cart",Tq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],zo=we("square-pen",Sq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],VI=we("star",Nq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],jq=we("target",kq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Fi=we("trash-2",Iq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Hx=we("trending-up",Cq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xc=we("triangle-alert",Aq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Pq=we("twitter",Rq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],FI=we("upload",Dq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Mq=we("user-plus",Oq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hd=we("user",Lq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ui=we("users",Vq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],$i=we("wrench",Fq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ba=we("x",Uq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Bq=we("zap",$q);function UI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=UI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kx(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=UI(t))&&(r&&(r+=" "),r+=e);return r}const zq=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},qq=(t,e)=>({classGroupId:t,validator:e}),$I=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Cm="-",qT=[],Wq="arbitrary..",Hq=t=>{const e=Gq(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Kq(o);const u=o.split(Cm),d=u[0]===""&&u.length>1?1:0;return BI(u,d,e)},getConflictingClassGroupIds:(o,u)=>{if(u){const d=r[o],f=n[o];return d?f?zq(f,d):d:f||qT}return n[o]||qT}}},BI=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],a=n.nextPart.get(s);if(a){const f=BI(t,e+1,a);if(f)return f}const o=n.validators;if(o===null)return;const u=e===0?t.join(Cm):t.slice(e).join(Cm),d=o.length;for(let f=0;f<d;f++){const g=o[f];if(g.validator(u))return g.classGroupId}},Kq=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?Wq+r:void 0})(),Gq=t=>{const{theme:e,classGroups:n}=t;return Yq(n,e)},Yq=(t,e)=>{const n=$I();for(const r in t){const s=t[r];Gx(s,n,r,e)}return n},Gx=(t,e,n,r)=>{const s=t.length;for(let a=0;a<s;a++){const o=t[a];Qq(o,e,n,r)}},Qq=(t,e,n,r)=>{if(typeof t=="string"){Jq(t,e,n);return}if(typeof t=="function"){Xq(t,e,n,r);return}Zq(t,e,n,r)},Jq=(t,e,n)=>{const r=t===""?e:zI(e,t);r.classGroupId=n},Xq=(t,e,n,r)=>{if(eW(t)){Gx(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(qq(n,t))},Zq=(t,e,n,r)=>{const s=Object.entries(t),a=s.length;for(let o=0;o<a;o++){const[u,d]=s[o];Gx(d,zI(e,u),n,r)}},zI=(t,e)=>{let n=t;const r=e.split(Cm),s=r.length;for(let a=0;a<s;a++){const o=r[a];let u=n.nextPart.get(o);u||(u=$I(),n.nextPart.set(o,u)),n=u}return n},eW=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,tW=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(a,o)=>{n[a]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let o=n[a];if(o!==void 0)return o;if((o=r[a])!==void 0)return s(a,o),o},set(a,o){a in n?n[a]=o:s(a,o)}}},J0="!",WT=":",nW=[],HT=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),rW=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const a=[];let o=0,u=0,d=0,f;const g=s.length;for(let N=0;N<g;N++){const _=s[N];if(o===0&&u===0){if(_===WT){a.push(s.slice(d,N)),d=N+1;continue}if(_==="/"){f=N;continue}}_==="["?o++:_==="]"?o--:_==="("?u++:_===")"&&u--}const y=a.length===0?s:s.slice(d);let x=y,T=!1;y.endsWith(J0)?(x=y.slice(0,-1),T=!0):y.startsWith(J0)&&(x=y.slice(1),T=!0);const I=f&&f>d?f-d:void 0;return HT(a,T,x,I)};if(e){const s=e+WT,a=r;r=o=>o.startsWith(s)?a(o.slice(s.length)):HT(nW,!1,o,void 0,!0)}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},sW=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let a=0;a<n.length;a++){const o=n[a],u=o[0]==="[",d=e.has(o);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(o)):s.push(o)}return s.length>0&&(s.sort(),r.push(...s)),r}},iW=t=>({cache:tW(t.cacheSize),parseClassName:rW(t),sortModifiers:sW(t),...Hq(t)}),aW=/\s+/,oW=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=e,o=[],u=t.trim().split(aW);let d="";for(let f=u.length-1;f>=0;f-=1){const g=u[f],{isExternal:y,modifiers:x,hasImportantModifier:T,baseClassName:I,maybePostfixModifierPosition:N}=n(g);if(y){d=g+(d.length>0?" "+d:d);continue}let _=!!N,k=r(_?I.substring(0,N):I);if(!k){if(!_){d=g+(d.length>0?" "+d:d);continue}if(k=r(I),!k){d=g+(d.length>0?" "+d:d);continue}_=!1}const R=x.length===0?"":x.length===1?x[0]:a(x).join(":"),j=T?R+J0:R,D=j+k;if(o.indexOf(D)>-1)continue;o.push(D);const M=s(k,_);for(let z=0;z<M.length;++z){const P=M[z];o.push(j+P)}d=g+(d.length>0?" "+d:d)}return d},lW=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=qI(n))&&(s&&(s+=" "),s+=r);return s},qI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=qI(t[r]))&&(n&&(n+=" "),n+=e);return n},cW=(t,...e)=>{let n,r,s,a;const o=d=>{const f=e.reduce((g,y)=>y(g),t());return n=iW(f),r=n.cache.get,s=n.cache.set,a=u,u(d)},u=d=>{const f=r(d);if(f)return f;const g=oW(d,n);return s(d,g),g};return a=o,(...d)=>a(lW(...d))},uW=[],an=t=>{const e=n=>n[t]||uW;return e.isThemeGetter=!0,e},WI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,HI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dW=/^\d+\/\d+$/,hW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fW=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mW=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,pW=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gW=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vl=t=>dW.test(t),Xe=t=>!!t&&!Number.isNaN(Number(t)),va=t=>!!t&&Number.isInteger(Number(t)),ky=t=>t.endsWith("%")&&Xe(t.slice(0,-1)),xi=t=>hW.test(t),yW=()=>!0,vW=t=>fW.test(t)&&!mW.test(t),KI=()=>!1,xW=t=>pW.test(t),wW=t=>gW.test(t),bW=t=>!Ne(t)&&!ke(t),_W=t=>Mc(t,QI,KI),Ne=t=>WI.test(t),_o=t=>Mc(t,JI,vW),jy=t=>Mc(t,kW,Xe),KT=t=>Mc(t,GI,KI),EW=t=>Mc(t,YI,wW),bf=t=>Mc(t,XI,xW),ke=t=>HI.test(t),Ru=t=>Lc(t,JI),TW=t=>Lc(t,jW),GT=t=>Lc(t,GI),SW=t=>Lc(t,QI),NW=t=>Lc(t,YI),_f=t=>Lc(t,XI,!0),Mc=(t,e,n)=>{const r=WI.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Lc=(t,e,n=!1)=>{const r=HI.exec(t);return r?r[1]?e(r[1]):n:!1},GI=t=>t==="position"||t==="percentage",YI=t=>t==="image"||t==="url",QI=t=>t==="length"||t==="size"||t==="bg-size",JI=t=>t==="length",kW=t=>t==="number",jW=t=>t==="family-name",XI=t=>t==="shadow",IW=()=>{const t=an("color"),e=an("font"),n=an("text"),r=an("font-weight"),s=an("tracking"),a=an("leading"),o=an("breakpoint"),u=an("container"),d=an("spacing"),f=an("radius"),g=an("shadow"),y=an("inset-shadow"),x=an("text-shadow"),T=an("drop-shadow"),I=an("blur"),N=an("perspective"),_=an("aspect"),k=an("ease"),R=an("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...D(),ke,Ne],z=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],C=()=>[ke,Ne,d],L=()=>[Vl,"full","auto",...C()],U=()=>[va,"none","subgrid",ke,Ne],$=()=>["auto",{span:["full",va,ke,Ne]},va,ke,Ne],q=()=>[va,"auto",ke,Ne],V=()=>["auto","min","max","fr",ke,Ne],se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Q=()=>["start","end","center","stretch","center-safe","end-safe"],le=()=>["auto",...C()],me=()=>[Vl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],J=()=>[t,ke,Ne],ve=()=>[...D(),GT,KT,{position:[ke,Ne]}],he=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",SW,_W,{size:[ke,Ne]}],ne=()=>[ky,Ru,_o],ue=()=>["","none","full",f,ke,Ne],ye=()=>["",Xe,Ru,_o],_e=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>[Xe,ky,GT,KT],je=()=>["","none",I,ke,Ne],Je=()=>["none",Xe,ke,Ne],pt=()=>["none",Xe,ke,Ne],vn=()=>[Xe,ke,Ne],nn=()=>[Vl,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xi],breakpoint:[xi],color:[yW],container:[xi],"drop-shadow":[xi],ease:["in","out","in-out"],font:[bW],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xi],shadow:[xi],spacing:["px",Xe],text:[xi],"text-shadow":[xi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vl,Ne,ke,_]}],container:["container"],columns:[{columns:[Xe,Ne,ke,u]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[va,"auto",ke,Ne]}],basis:[{basis:[Vl,"full","auto",u,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Xe,Vl,"auto","initial","none",Ne]}],grow:[{grow:["",Xe,ke,Ne]}],shrink:[{shrink:["",Xe,ke,Ne]}],order:[{order:[va,"first","last","none",ke,Ne]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...Q(),"normal"]}],"justify-self":[{"justify-self":["auto",...Q()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...Q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Q(),{baseline:["","last"]}]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...Q(),"baseline"]}],"place-self":[{"place-self":["auto",...Q()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:le()}],mx:[{mx:le()}],my:[{my:le()}],ms:[{ms:le()}],me:[{me:le()}],mt:[{mt:le()}],mr:[{mr:le()}],mb:[{mb:le()}],ml:[{ml:le()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:me()}],w:[{w:[u,"screen",...me()]}],"min-w":[{"min-w":[u,"screen","none",...me()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[o]},...me()]}],h:[{h:["screen","lh",...me()]}],"min-h":[{"min-h":["screen","lh","none",...me()]}],"max-h":[{"max-h":["screen","lh",...me()]}],"font-size":[{text:["base",n,Ru,_o]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ke,jy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ky,Ne]}],"font-family":[{font:[TW,Ne,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ke,Ne]}],"line-clamp":[{"line-clamp":[Xe,"none",ke,jy]}],leading:[{leading:[a,...C()]}],"list-image":[{"list-image":["none",ke,Ne]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ke,Ne]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._e(),"wavy"]}],"text-decoration-thickness":[{decoration:[Xe,"from-font","auto",ke,_o]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[Xe,"auto",ke,Ne]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke,Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke,Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ve()}],"bg-repeat":[{bg:he()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},va,ke,Ne],radial:["",ke,Ne],conic:[va,ke,Ne]},NW,EW]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:ue()}],"rounded-s":[{"rounded-s":ue()}],"rounded-e":[{"rounded-e":ue()}],"rounded-t":[{"rounded-t":ue()}],"rounded-r":[{"rounded-r":ue()}],"rounded-b":[{"rounded-b":ue()}],"rounded-l":[{"rounded-l":ue()}],"rounded-ss":[{"rounded-ss":ue()}],"rounded-se":[{"rounded-se":ue()}],"rounded-ee":[{"rounded-ee":ue()}],"rounded-es":[{"rounded-es":ue()}],"rounded-tl":[{"rounded-tl":ue()}],"rounded-tr":[{"rounded-tr":ue()}],"rounded-br":[{"rounded-br":ue()}],"rounded-bl":[{"rounded-bl":ue()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[..._e(),"hidden","none"]}],"divide-style":[{divide:[..._e(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[..._e(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Xe,ke,Ne]}],"outline-w":[{outline:["",Xe,Ru,_o]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",g,_f,bf]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",y,_f,bf]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[Xe,_o]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",x,_f,bf]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[Xe,ke,Ne]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Xe]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ae()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":Ae()}],"mask-image-t-to-pos":[{"mask-t-to":Ae()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":Ae()}],"mask-image-r-to-pos":[{"mask-r-to":Ae()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":Ae()}],"mask-image-b-to-pos":[{"mask-b-to":Ae()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":Ae()}],"mask-image-l-to-pos":[{"mask-l-to":Ae()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":Ae()}],"mask-image-x-to-pos":[{"mask-x-to":Ae()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":Ae()}],"mask-image-y-to-pos":[{"mask-y-to":Ae()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[ke,Ne]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ae()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[Xe]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ae()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ve()}],"mask-repeat":[{mask:he()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ke,Ne]}],filter:[{filter:["","none",ke,Ne]}],blur:[{blur:je()}],brightness:[{brightness:[Xe,ke,Ne]}],contrast:[{contrast:[Xe,ke,Ne]}],"drop-shadow":[{"drop-shadow":["","none",T,_f,bf]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",Xe,ke,Ne]}],"hue-rotate":[{"hue-rotate":[Xe,ke,Ne]}],invert:[{invert:["",Xe,ke,Ne]}],saturate:[{saturate:[Xe,ke,Ne]}],sepia:[{sepia:["",Xe,ke,Ne]}],"backdrop-filter":[{"backdrop-filter":["","none",ke,Ne]}],"backdrop-blur":[{"backdrop-blur":je()}],"backdrop-brightness":[{"backdrop-brightness":[Xe,ke,Ne]}],"backdrop-contrast":[{"backdrop-contrast":[Xe,ke,Ne]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Xe,ke,Ne]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Xe,ke,Ne]}],"backdrop-invert":[{"backdrop-invert":["",Xe,ke,Ne]}],"backdrop-opacity":[{"backdrop-opacity":[Xe,ke,Ne]}],"backdrop-saturate":[{"backdrop-saturate":[Xe,ke,Ne]}],"backdrop-sepia":[{"backdrop-sepia":["",Xe,ke,Ne]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ke,Ne]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Xe,"initial",ke,Ne]}],ease:[{ease:["linear","initial",k,ke,Ne]}],delay:[{delay:[Xe,ke,Ne]}],animate:[{animate:["none",R,ke,Ne]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,ke,Ne]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:Je()}],"rotate-x":[{"rotate-x":Je()}],"rotate-y":[{"rotate-y":Je()}],"rotate-z":[{"rotate-z":Je()}],scale:[{scale:pt()}],"scale-x":[{"scale-x":pt()}],"scale-y":[{"scale-y":pt()}],"scale-z":[{"scale-z":pt()}],"scale-3d":["scale-3d"],skew:[{skew:vn()}],"skew-x":[{"skew-x":vn()}],"skew-y":[{"skew-y":vn()}],transform:[{transform:[ke,Ne,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:nn()}],"translate-x":[{"translate-x":nn()}],"translate-y":[{"translate-y":nn()}],"translate-z":[{"translate-z":nn()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke,Ne]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke,Ne]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[Xe,Ru,_o,jy]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Yx=cW(IW);function CW(...t){return Yx(Kx(t))}const Te=de.forwardRef(({className:t,variant:e="primary",size:n="md",children:r,...s},a)=>{const o={primary:"bg-primary text-white hover:bg-primary/90 shadow-lg shadow-primary/20",secondary:"bg-accent text-primary hover:bg-accent/90 shadow-lg shadow-accent/20",outline:"border-2 border-primary text-primary hover:bg-primary/5",ghost:"text-primary hover:bg-primary/5",gradient:"bg-gradient-to-r from-brand-purple to-brand-blue text-white shadow-lg shadow-brand-blue/20 hover:shadow-xl hover:shadow-brand-blue/30"},u={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg font-bold"};return c.jsx(Qe.button,{ref:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:CW("relative inline-flex items-center justify-center rounded-xl font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50",o[e],u[n],t),...s,children:r})});Te.displayName="Button";const YT=[{name:"",path:"/",icon:ps},{name:"",path:"/features",icon:VI},{name:"",path:"/units",icon:dr},{name:"",path:"/pricing",icon:Hr},{name:" ",path:"/about",icon:Kz},{name:" ",path:"/contact",icon:uq}],AW=()=>{const[t,e]=E.useState(!1),{user:n,logout:r}=ws();return c.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 h-[80px]",children:[c.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-md border-b border-gray-100"}),c.jsxs("div",{className:"max-w-7xl mx-auto px-8 relative h-full flex items-center justify-between",children:[c.jsxs(Ke,{to:"/",className:"text-3xl font-extrabold tracking-tight flex items-center gap-1",children:[c.jsx("span",{className:"bg-gradient-to-tr from-brand-purple to-brand-blue bg-clip-text text-transparent",children:""}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-accent mt-3"})]}),c.jsx("div",{className:"hidden md:flex items-center gap-8",children:YT.map(s=>c.jsx(Ke,{to:s.path,className:"text-brand-dark hover:text-brand-blue font-medium transition-colors flex items-center gap-2",children:s.name},s.path))}),c.jsxs("div",{className:"flex items-center gap-4",children:[n?c.jsxs("div",{className:"flex items-center gap-3 pl-2",children:[c.jsxs("div",{className:"hidden md:flex flex-col items-end mr-2",children:[c.jsx("span",{className:"text-sm font-bold text-brand-dark",children:n.name}),c.jsx("span",{className:"text-xs text-brand-blue bg-brand-blue/10 px-2 py-0.5 rounded-full",children:""})]}),c.jsx(Ke,{to:"/dashboard",children:c.jsxs(Te,{size:"sm",variant:"outline",className:"hidden md:inline-flex border-gray-200 hover:border-brand-blue hover:text-brand-blue",children:[c.jsx(Hd,{className:"w-4 h-4 ml-2"})," "]})}),c.jsx("button",{onClick:r,className:"p-2.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all border border-transparent hover:border-red-100",title:" ",children:c.jsx(qx,{className:"w-5 h-5"})})]}):c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Ke,{to:"/login",className:"hidden md:block text-brand-dark font-medium hover:text-brand-blue",children:" "}),c.jsx(Ke,{to:"/register",children:c.jsx(Te,{size:"sm",variant:"gradient",className:"hidden md:inline-flex",children:" "})})]}),c.jsx("button",{onClick:()=>e(!t),className:"md:hidden p-2 text-brand-dark hover:bg-gray-100 rounded-lg transition-colors",children:t?c.jsx(Ba,{}):c.jsx(LI,{})})]})]}),c.jsx($a,{children:t&&c.jsx(Qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-b border-gray-100 overflow-hidden shadow-xl",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-4 flex flex-col gap-4",children:[YT.map(s=>c.jsxs(Ke,{to:s.path,onClick:()=>e(!1),className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-xl transition-colors text-brand-dark",children:[c.jsx(s.icon,{className:"w-5 h-5 text-brand-blue"}),c.jsx("span",{className:"font-medium",children:s.name})]},s.path)),n?c.jsxs(c.Fragment,{children:[c.jsx(Ke,{to:"/dashboard",children:c.jsx(Te,{className:"w-full mb-3",variant:"outline",children:" "})}),c.jsx(Te,{onClick:r,className:"w-full text-red-500 border-red-200 hover:bg-red-50",variant:"ghost",children:" "})]}):c.jsxs(c.Fragment,{children:[c.jsx(Ke,{to:"/login",children:c.jsx(Te,{className:"w-full mb-3",variant:"ghost",children:" "})}),c.jsx(Ke,{to:"/register",children:c.jsx(Te,{className:"w-full",variant:"gradient",children:" "})})]})]})})})]})},RW=()=>c.jsx("footer",{className:"bg-white pt-24 pb-12 border-t border-gray-100 mt-20",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsx(Ke,{to:"/",className:"text-3xl font-bold bg-gradient-to-r from-brand-purple to-brand-blue bg-clip-text text-transparent inline-block mb-4",children:""}),c.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"     .         ."}),c.jsx("div",{className:"flex items-center gap-4",children:[Lz,Pq,Yz,Zz].map((t,e)=>c.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-gray-50 text-gray-400 flex items-center justify-center hover:bg-brand-blue hover:text-white transition-all duration-300",children:c.jsx(t,{className:"w-5 h-5"})},e))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-brand-dark mb-6 text-lg",children:""}),c.jsxs("ul",{className:"space-y-4 text-sm font-medium text-gray-500",children:[c.jsx("li",{children:c.jsx(Ke,{to:"/features",className:"hover:text-brand-blue transition-colors",children:""})}),c.jsx("li",{children:c.jsx(Ke,{to:"/pricing",className:"hover:text-brand-blue transition-colors",children:""})}),c.jsx("li",{children:c.jsx(Ke,{to:"/units",className:"hover:text-brand-blue transition-colors",children:""})}),c.jsx("li",{children:c.jsx(Ke,{to:"/about",className:"hover:text-brand-blue transition-colors",children:" "})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-brand-dark mb-6 text-lg",children:""}),c.jsxs("ul",{className:"space-y-4 text-sm font-medium text-gray-500",children:[c.jsx("li",{children:c.jsx(Ke,{to:"/contact",className:"hover:text-brand-blue transition-colors",children:" "})}),c.jsx("li",{children:c.jsx(Ke,{to:"#",className:"hover:text-brand-blue transition-colors",children:" "})}),c.jsx("li",{children:c.jsx(Ke,{to:"#",className:"hover:text-brand-blue transition-colors",children:" "})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-brand-dark mb-6 text-lg",children:" "}),c.jsxs("ul",{className:"space-y-4 text-sm font-medium text-gray-500",children:[c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(Sd,{className:"w-5 h-5 text-brand-blue shrink-0"}),c.jsx("span",{children:"   "})]}),c.jsxs("li",{className:"flex items-center gap-3",children:[c.jsx(Wd,{className:"w-5 h-5 text-brand-blue shrink-0"}),c.jsx("span",{dir:"ltr",children:"+966 50 000 0000"})]}),c.jsxs("li",{className:"flex items-center gap-3",children:[c.jsx(Wa,{className:"w-5 h-5 text-brand-blue shrink-0"}),c.jsx("span",{children:"help@arkan.app"})]})]})]})]}),c.jsx("div",{className:"border-t border-gray-100 pt-8 text-center",children:c.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear(),"  .   ."]})})]})}),ri=({children:t})=>c.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50 font-cairo text-brand-dark",dir:"rtl",children:[c.jsx(AW,{}),c.jsx("main",{className:"flex-grow",children:t}),c.jsx(RW,{})]});function PW(...t){return Yx(Kx(t))}const Ii=de.forwardRef(({className:t,variant:e="default",children:n,...r},s)=>{const a={default:"bg-white border border-gray-100 shadow-xl shadow-gray-200/50",glass:"glass","glass-dark":"glass-dark",gradient:"card-gradient"};return c.jsx(Qe.div,{ref:s,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.5},className:PW("rounded-2xl p-6 overflow-hidden",a[e],t),...r,children:n})});Ii.displayName="Card";const ZI=({isOpen:t,onClose:e,plan:n})=>{const[r,s]=E.useState("form"),[a,o]=E.useState(!1),[u,d]=E.useState(""),{subscribe:f,user:g}=ws();ni(),de.useEffect(()=>{t&&(s("form"),o(!1),g?.email&&d(g.email))},[t,g]);const y=async x=>{x.preventDefault(),o(!0),await new Promise(T=>setTimeout(T,1500)),n&&f(n.name,n.price,30),o(!1),s("success")};return n?c.jsx($a,{children:t&&c.jsxs(c.Fragment,{children:[c.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:e}),c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:c.jsxs(Qe.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.5},className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden pointer-events-auto border border-white/20",children:[c.jsx("button",{onClick:e,className:"absolute top-4 left-4 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors z-10",children:c.jsx(Ba,{className:"w-5 h-5"})}),r==="form"?c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h3",{className:"text-sm font-bold text-brand-blue uppercase tracking-wider mb-2",children:" "}),c.jsx("h2",{className:"text-3xl font-bold text-brand-dark mb-2",children:n.name}),c.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-500",children:[c.jsx("span",{className:"text-2xl font-bold text-brand-dark",children:n.price}),c.jsxs("span",{className:"text-sm",children:[". / ",n.period||""]})]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 mb-8 border border-gray-100",children:[c.jsx("h4",{className:"font-bold text-brand-dark mb-4 text-sm",children:" :"}),c.jsxs("ul",{className:"space-y-3",children:[n.features.slice(0,4).map((x,T)=>c.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-600",children:[c.jsx("div",{className:"w-5 h-5 rounded-full bg-white border border-gray-200 flex items-center justify-center shrink-0 text-green-500",children:c.jsx(hs,{className:"w-3 h-3"})}),x]},T)),n.features.length>4&&c.jsxs("li",{className:"text-xs text-gray-400 pr-8",children:["+",n.features.length-4,"  ..."]})]})]}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsx("input",{type:"email",required:!0,value:u,onChange:x=>d(x.target.value),placeholder:"name@company.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all"})]}),c.jsx(Te,{variant:"gradient",className:"w-full text-lg py-4 shadow-lg shadow-brand-blue/20",disabled:a,children:a?c.jsxs(c.Fragment,{children:[c.jsx(tq,{className:"w-5 h-5 animate-spin mr-2"})," ..."]}):" "})]})]}):c.jsxs("div",{className:"p-12 text-center flex flex-col items-center justify-center",children:[c.jsx(Qe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6",children:c.jsx(hs,{className:"w-10 h-10"})}),c.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-2",children:"  !"}),c.jsxs("p",{className:"text-gray-500 mb-8 max-w-xs mx-auto",children:["    ",n.name,".       ."]}),c.jsx(Te,{onClick:e,variant:"outline",className:"w-full",children:""})]})]})})]})}):null},DW=()=>{const[t,e]=E.useState(!1),[n,r]=E.useState(null),s=a=>{const o={name:a.name,price:a.price,features:a.feat||a.features||[],period:""};r(o),e(!0)};return c.jsxs(ri,{children:[c.jsxs("section",{className:"relative h-[750px] flex items-center justify-center overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 z-0",children:[c.jsx("img",{src:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&q=80&w=2670",alt:"City Skyline",className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-dark/95 via-brand-dark/80 to-brand-dark/40"})]}),c.jsx("div",{className:"container mx-auto px-6 lg:px-12 relative z-10 w-full",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[c.jsx("div",{className:"text-center lg:text-right",children:c.jsxs(Qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[c.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold leading-tight mb-8 text-white",children:["   ",c.jsx("br",{}),c.jsx("span",{className:"text-brand-accent bg-clip-text text-transparent bg-gradient-to-l from-brand-blue to-brand-light",children:" "})]}),c.jsx("p",{className:"text-xl lg:text-2xl text-gray-200 mb-12 leading-relaxed max-w-2xl mx-auto lg:mx-0 font-light",children:" ..         .      ."}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-6",children:[c.jsx(Te,{size:"lg",variant:"gradient",className:"w-full sm:w-auto min-w-[200px] shadow-lg shadow-brand-blue/20 hover:shadow-brand-blue/40 text-lg py-4",children:" "}),c.jsx(Ke,{to:"/features",className:"w-full sm:w-auto",children:c.jsx(Te,{size:"lg",variant:"outline",className:"w-full min-w-[200px] text-white border-white/30 hover:bg-white hover:text-brand-dark hover:border-white text-lg py-4 backdrop-blur-sm",children:" "})})]})]})}),c.jsx(Qe.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:1,delay:.2},className:"hidden lg:block relative",children:c.jsxs("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 p-8 rounded-3xl shadow-2xl max-w-md mr-auto transform rotate-2 hover:rotate-0 transition-all duration-500 ease-out group cursor-default",children:[c.jsxs("div",{className:"flex items-center gap-5 mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-blue to-brand-purple rounded-2xl flex items-center justify-center shadow-lg",children:c.jsx(dr,{className:"w-8 h-8 text-white"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-brand-light font-medium tracking-wide",children:"  "}),c.jsx("p",{className:"text-3xl font-bold text-white tracking-tight",children:"124 "})]})]}),c.jsx("div",{className:"relative h-3 bg-brand-dark/50 rounded-full overflow-hidden mb-4 border border-white/5",children:c.jsx(Qe.div,{className:"absolute h-full bg-brand-accent rounded-full",initial:{width:"0%"},animate:{width:"85%"},transition:{duration:1.5,delay:.5}})}),c.jsxs("div",{className:"flex justify-between items-end text-white",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-xs text-brand-light mb-1",children:" "}),c.jsx("span",{className:"text-xl font-bold",children:"85%"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-sm font-medium bg-green-400/10 px-2 py-1 rounded-lg border border-green-400/20",children:[c.jsx(Hx,{className:"w-4 h-4"}),c.jsx("span",{children:"+12% "})]})]})]})})]})})]}),c.jsx("section",{className:"py-24 bg-white",children:c.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[c.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[c.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-brand-light text-brand-blue text-sm font-bold tracking-wide uppercase mb-4",children:" "}),c.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-brand-dark",children:"   "})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[{icon:vs,title:" ",text:"          .",color:"text-blue-600",bg:"bg-blue-50"},{icon:Im,title:" ",text:"      .",color:"text-green-600",bg:"bg-green-50"},{icon:$i,title:" ",text:"       .",color:"text-orange-600",bg:"bg-orange-50"},{icon:fz,title:" ",text:"      .",color:"text-purple-600",bg:"bg-purple-50"},{icon:zx,title:" ",text:"      AI.",color:"text-pink-600",bg:"bg-pink-50"},{icon:yz,title:" ",text:"      .",color:"text-indigo-600",bg:"bg-indigo-50"}].map((a,o)=>c.jsxs(Ii,{className:"group p-8 border border-gray-100 hover:border-brand-blue/20 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 h-full",children:[c.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center mb-6 text-xl shrink-0 transition-transform group-hover:scale-110 duration-300 ${a.bg} ${a.color}`,children:c.jsx(a.icon,{className:"w-8 h-8"})}),c.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-4 group-hover:text-brand-blue transition-colors",children:a.title}),c.jsx("p",{className:"text-gray-500 leading-relaxed font-medium",children:a.text})]},o))})]})}),c.jsx("section",{className:"py-24 bg-slate-50 border-t border-gray-100",children:c.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[c.jsxs("div",{className:"text-center mb-20",children:[c.jsx("h2",{className:"text-4xl font-bold text-brand-dark mb-6",children:"   "}),c.jsx("p",{className:"text-xl text-gray-500 max-w-2xl mx-auto",children:"    .       ."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{name:"",price:"899",role:" ",feat:["  30 ","3 ","   PDF"," ","  ","  "],rec:!1},{name:"",price:"1,899",role:" ",feat:["120  ","10 ","  "," AI (+)","  ","  PDF","   "],rec:!0},{name:"",price:"3,499",role:" ",feat:["  ","  ","  (API)","  ","  ","  ","  Premium"],rec:!1},{name:"Arkan AI",price:"599",role:" ",feat:["  ","  ","  ","  "],rec:!1,addon:!0}].map((a,o)=>c.jsxs("div",{className:`flex flex-col p-8 rounded-3xl transition-all duration-300 relative ${a.rec?"bg-white shadow-2xl scale-105 z-10 border-2 border-brand-blue":"bg-white shadow-lg border border-gray-100 hover:scale-105 hover:shadow-xl"}`,children:[a.rec&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 bg-brand-blue text-white text-xs font-bold px-4 py-1.5 rounded-b-xl shadow-md",children:" "}),c.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-2",children:a.name}),c.jsx("p",{className:"text-sm text-gray-400 mb-8 font-medium",children:a.role}),c.jsxs("div",{className:"mb-8",children:[c.jsx("span",{className:"text-4xl font-bold text-brand-dark",children:a.price}),c.jsx("span",{className:"text-gray-500 text-sm mr-2",children:". /"})]}),c.jsx("div",{className:"space-y-4 mb-8 flex-grow",children:a.feat.map((u,d)=>c.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[c.jsx("div",{className:"w-5 h-5 rounded-full bg-brand-light flex items-center justify-center shrink-0",children:c.jsx(hs,{className:"w-3 h-3 text-brand-blue"})}),c.jsx("span",{className:"font-medium",children:u})]},d))}),c.jsx(Te,{onClick:()=>s(a),variant:a.rec?"gradient":"outline",className:`w-full py-6 font-bold text-base ${a.addon?"border-brand-purple text-brand-purple hover:bg-brand-purple hover:text-white":""}`,children:a.addon?" ":" "})]},o))})]})}),c.jsx("section",{className:"py-24 bg-white",children:c.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-16 gap-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-4xl font-bold text-brand-dark mb-4",children:"  "}),c.jsx("p",{className:"text-xl text-gray-500",children:"      ."})]}),c.jsx(Ke,{to:"/units",children:c.jsxs(Te,{variant:"ghost",className:"hidden md:flex items-center gap-2 group text-brand-blue hover:bg-brand-light px-6 py-3 rounded-xl transition-all",children:[c.jsx("span",{className:"font-bold",children:"  "}),c.jsx(sz,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10",children:[{img:"https://images.unsplash.com/photo-1600596542815-2a4fe053155e",title:"  -  ",price:"85,000",area:"450",loc:" ",type:""},{img:"https://images.unsplash.com/photo-1600607686527-6fb886090705",title:"  -  ",price:"45,000",area:"180",loc:" - ",type:""},{img:"https://images.unsplash.com/photo-1512917774080-9991f1c4c750",title:"  - ",price:"60,000",area:"320",loc:"",type:" "}].map((a,o)=>c.jsxs("div",{className:"group bg-white rounded-3xl overflow-hidden shadow-lg border border-gray-100 hover:shadow-2xl hover:border-brand-blue/30 transition-all duration-500 flex flex-col",children:[c.jsxs("div",{className:"relative h-72 overflow-hidden",children:[c.jsx("img",{src:`${a.img}?auto=format&fit=crop&q=80&w=800`,alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 ease-in-out"}),c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[c.jsx("span",{className:"bg-white/95 backdrop-blur shadow-sm px-4 py-1.5 rounded-full text-brand-dark font-bold text-xs",children:a.type}),c.jsx("span",{className:"bg-green-500/90 backdrop-blur shadow-sm px-4 py-1.5 rounded-full text-white font-bold text-xs animate-pulse",children:""})]})]}),c.jsxs("div",{className:"p-8 flex flex-col flex-grow",children:[c.jsx("div",{className:"flex justify-between items-start mb-6",children:c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-xl text-brand-dark mb-2 group-hover:text-brand-blue transition-colors line-clamp-1",children:a.title}),c.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[c.jsx(Pz,{className:"w-3.5 h-3.5"})," ",a.loc]})]})}),c.jsxs("div",{className:"mt-auto pt-6 border-t border-gray-100 flex items-center justify-between",children:[c.jsx("div",{className:"text-right",children:c.jsxs("p",{className:"text-2xl font-bold text-brand-dark",children:[a.price," ",c.jsx("span",{className:"text-xs text-gray-400 font-normal",children:"."})]})}),c.jsx(Te,{size:"sm",variant:"secondary",className:"hover:bg-brand-blue hover:text-white transition-colors",children:" "})]})]})]},o))})]})}),c.jsxs("section",{className:"py-24 bg-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-brand-light/30 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/2 pointer-events-none"}),c.jsx("div",{className:"container mx-auto px-6 lg:px-12 relative z-10",children:c.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-gray-100 flex flex-col md:flex-row",children:[c.jsxs("div",{className:"bg-brand-dark relative w-full md:w-2/5 p-12 text-white flex flex-col justify-between overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-brand-blue/20"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-brand-purple/50 rounded-full blur-[80px]"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("h3",{className:"text-3xl font-bold mb-6",children:" "}),c.jsxs("p",{className:"text-brand-light/80 leading-relaxed mb-8",children:["     .",c.jsx("br",{}),"      ."]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:c.jsx(Wd,{className:"w-5 h-5 text-brand-accent"})}),c.jsx("span",{className:"font-bold text-lg",dir:"ltr",children:"+966 50 123 4567"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:c.jsx(Wa,{className:"w-5 h-5 text-brand-accent"})}),c.jsx("span",{children:"hello@arkan.app"})]})]})]})]}),c.jsx("div",{className:"w-full md:w-3/5 p-12 bg-white",children:c.jsxs("form",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all bg-gray-50 focus:bg-white"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all bg-gray-50 focus:bg-white"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsx("input",{type:"email",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all bg-gray-50 focus:bg-white"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),c.jsx("textarea",{rows:4,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all bg-gray-50 focus:bg-white resize-none"})]}),c.jsx(Te,{size:"lg",variant:"gradient",className:"w-full justify-center text-lg font-bold shadow-lg shadow-brand-blue/20 hover:shadow-brand-blue/40",children:" "})]})})]})})]}),c.jsx(ZI,{isOpen:t,onClose:()=>e(!1),plan:n})]})},OW=()=>{const t=[{title:"   ",desc:"       .                .",icon:Fz,color:"text-blue-500",bg:"bg-blue-50",img:"https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?auto=format&fit=crop&q=80&w=1000"},{title:"   ",desc:"    .                   .",icon:hq,color:"text-orange-500",bg:"bg-orange-50",img:"https://images.unsplash.com/photo-1581092921461-eab62e97a783?auto=format&fit=crop&q=80&w=1000"},{title:"  ",desc:"                     .",icon:Im,color:"text-green-500",bg:"bg-green-50",img:"https://images.unsplash.com/photo-1554224154-26032ffc0d07?auto=format&fit=crop&q=80&w=1000"},{title:"  ",desc:"      .      ...         .",icon:FI,color:"text-purple-500",bg:"bg-purple-50",img:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&q=80&w=1000"},{title:"  ",desc:"    .                .",icon:zx,color:"text-pink-500",bg:"bg-pink-50",img:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=1000"},{title:"  ",desc:"            .     .",icon:Hx,color:"text-indigo-500",bg:"bg-indigo-50",img:"https://images.unsplash.com/photo-1543286386-713df548e9cc?auto=format&fit=crop&q=80&w=1000"}];return c.jsx(ri,{children:c.jsx("div",{className:"bg-white pt-20 pb-32",children:c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[c.jsx("span",{className:"text-brand-blue font-bold tracking-wider uppercase",children:" "}),c.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-brand-dark mt-3 mb-6",children:"   "}),c.jsx("p",{className:"text-gray-600 text-lg",children:"            ."})]}),c.jsx("div",{className:"space-y-32",children:t.map((e,n)=>c.jsxs(Qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.7},className:`flex flex-col ${n%2===0?"lg:flex-row":"lg:flex-row-reverse"} items-center gap-12 lg:gap-24`,children:[c.jsxs("div",{className:"lg:w-1/2 space-y-6 text-center lg:text-right",children:[c.jsx("div",{className:`w-16 h-16 rounded-2xl ${e.bg} ${e.color} flex items-center justify-center mx-auto lg:mx-0 shadow-lg`,children:c.jsx(e.icon,{className:"w-8 h-8"})}),c.jsx("h2",{className:"text-3xl font-bold text-brand-dark",children:e.title}),c.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:e.desc})]}),c.jsx("div",{className:"lg:w-1/2 w-full",children:c.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl group",children:[c.jsx("div",{className:"absolute inset-0 bg-brand-dark/20 group-hover:bg-transparent transition-colors duration-500 z-10"}),c.jsx("img",{src:e.img,alt:e.title,className:"w-full h-[400px] object-cover transform group-hover:scale-105 transition-transform duration-700"})]})})]},n))})]})})})},MW=()=>{const[t,e]=E.useState(!1),[n,r]=E.useState(null),s=o=>{r({name:o.name,price:o.price,features:o.features||[],period:""}),e(!0)},a=[{name:"",price:"899",desc:"  ",icon:VI,features:["  30 ","3 ","   PDF"," ","  ","  "]},{name:"",price:"1,899",desc:"  ",popular:!0,icon:Bq,features:["120  ","10 ","  ","   ( + )","  ","  PDF","   "]},{name:"",price:"3,499",desc:"  ",icon:dr,features:["   ","  ","  (API)","  ","  ","   ","   (Premium)"]}];return c.jsxs(ri,{children:[c.jsx("div",{className:"bg-slate-50 py-20 min-h-screen",children:c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[c.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-brand-dark mb-6",children:"   "}),c.jsx("p",{className:"text-gray-600 text-lg",children:"           ."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:a.map((o,u)=>c.jsxs(Ii,{className:`relative flex flex-col ${o.popular?"border-brand-blue shadow-2xl scale-105 z-10":""}`,variant:(o.popular,"default"),children:[o.popular&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 bg-gradient-to-r from-brand-blue to-cyan-500 text-white px-4 py-1 rounded-b-xl text-sm font-bold",children:" "}),c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 ${o.popular?"bg-brand-blue text-white":"bg-brand-light text-brand-dark"}`,children:c.jsx(o.icon,{className:"w-7 h-7"})}),c.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-2",children:o.name}),c.jsx("p",{className:"text-gray-500",children:o.desc})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("span",{className:"text-4xl font-bold text-brand-dark",children:o.price}),c.jsx("span",{className:"text-gray-500 mr-2",children:" / "})]}),c.jsx("div",{className:"flex-grow mb-8 space-y-4",children:o.features.map((d,f)=>c.jsxs("div",{className:"flex items-start gap-3 text-gray-600",children:[c.jsx(hs,{className:`w-5 h-5 shrink-0 ${o.popular?"text-brand-blue":"text-green-500"}`}),c.jsx("span",{children:d})]},f))}),c.jsx(Te,{onClick:()=>s(o),variant:o.popular?"gradient":"outline",className:"w-full",children:" "})]},u))}),c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsxs(Ii,{variant:"gradient",className:"flex flex-col md:flex-row items-center justify-between p-8 lg:p-12",children:[c.jsxs("div",{className:"flex items-start gap-6 mb-6 md:mb-0",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center text-white shrink-0",children:c.jsx(zx,{className:"w-8 h-8"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"   ()"}),c.jsx("p",{className:"text-blue-100 mb-4",children:"        ."}),c.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-2 text-blue-50 text-sm",children:[c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(hs,{className:"w-4 h-4"}),"   "]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(hs,{className:"w-4 h-4"}),"   "]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(hs,{className:"w-4 h-4"}),"   "]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(hs,{className:"w-4 h-4"}),"   "]})]})]})]}),c.jsxs("div",{className:"flex flex-col items-end gap-3 shrink-0",children:[c.jsxs("div",{className:"text-white text-right",children:[c.jsx("span",{className:"text-3xl font-bold",children:"599"}),c.jsx("span",{className:"text-blue-100 mr-2",children:" / "})]}),c.jsx(Te,{onClick:()=>s({name:"  ",price:"599",features:["  ","  ","  ","  "]}),className:"bg-white text-brand-dark hover:bg-gray-100 w-full md:w-auto",children:" "})]})]})})]})}),c.jsx(ZI,{isOpen:t,onClose:()=>e(!1),plan:n})]})},LW=()=>{const[t,e]=E.useState("all"),n=[{id:1,title:"   ",price:"85,000",loc:" - ",beds:5,baths:4,area:"450",type:"",status:"",img:"https://images.unsplash.com/photo-1600596542815-2a4fe053155e?auto=format&fit=crop&q=80&w=800"},{id:2,title:"   ",price:"45,000",loc:" - ",beds:3,baths:2,area:"180",type:"",status:"",img:"https://images.unsplash.com/photo-1600607686527-6fb886090705?auto=format&fit=crop&q=80&w=800"},{id:3,title:" ",price:"60,000",loc:" - ",beds:4,baths:3,area:"300",type:"",status:"",img:"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&q=80&w=800"},{id:4,title:"  ",price:"35,000",loc:" - ",beds:1,baths:1,area:"60",type:"",status:"",img:"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?auto=format&fit=crop&q=80&w=800"},{id:5,title:" ",price:"120,000",loc:" - ",beds:6,baths:5,area:"600",type:"",status:"",img:"https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?auto=format&fit=crop&q=80&w=800"},{id:6,title:"  ()",price:"90,000",loc:" - ",beds:4,baths:4,area:"350",type:"",status:"",img:"https://images.unsplash.com/photo-1600566753086-00f18fb6b3ea?auto=format&fit=crop&q=80&w=800"}];return c.jsx(ri,{children:c.jsx("div",{className:"bg-slate-50 min-h-screen py-10 pt-24",children:c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-10 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-brand-dark",children:" "}),c.jsxs("p",{className:"text-gray-500",children:[" ",n.length,"   "]})]}),c.jsxs("div",{className:"relative w-full md:w-96",children:[c.jsx("input",{type:"text",placeholder:"    ...",className:"w-full pl-4 pr-12 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20"}),c.jsx(Vi,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-10",children:[["","","","",""].map(r=>c.jsx("button",{onClick:()=>e(r),className:`px-6 py-2 rounded-lg text-sm font-medium transition-colors ${t===r?"bg-brand-dark text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:r},r)),c.jsxs("button",{className:"mr-auto px-4 py-2 flex items-center gap-2 text-brand-blue font-medium hover:bg-brand-light rounded-lg",children:[c.jsx(Bz,{className:"w-4 h-4"}),"  "]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(r=>c.jsxs(Ii,{className:"p-0 border-0 shadow-sm hover:shadow-xl transition-shadow overflow-hidden group",children:[c.jsxs("div",{className:"relative h-64 overflow-hidden",children:[c.jsx("img",{src:r.img,alt:r.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"}),c.jsx("div",{className:`absolute top-4 right-4 px-3 py-1 rounded-full text-white font-bold text-sm ${r.status===""?"bg-green-500":r.status===""?"bg-gray-500":"bg-orange-500"}`,children:r.status}),c.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-between items-center text-white",children:c.jsxs("span",{className:"font-bold text-lg drop-shadow-md",children:[r.price," ."]})})]}),c.jsxs("div",{className:"p-5",children:[c.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-2",children:r.title}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-4 text-sm",children:[c.jsx(Sd,{className:"w-4 h-4 text-brand-blue"}),r.loc]}),c.jsxs("div",{className:"flex items-center justify-between py-4 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[c.jsx(lz,{className:"w-5 h-5 text-gray-400"})," ",r.beds," "]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[c.jsx(az,{className:"w-5 h-5 text-gray-400"})," ",r.baths," "]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[c.jsx(oq,{className:"w-5 h-5 text-gray-400"})," ",r.area]})]}),c.jsx(Te,{variant:"outline",className:"w-full mt-2",children:" "})]})]},r.id))})]})})})},VW=()=>c.jsx(ri,{children:c.jsxs("div",{className:"pt-20",children:[c.jsxs("section",{className:"bg-brand-dark text-white py-24 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-purple/20 to-brand-blue/20"}),c.jsxs("div",{className:"container relative z-10 text-center",children:[c.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:" "}),c.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                      ."})]})]}),c.jsx("section",{className:"py-24 bg-white",children:c.jsx("div",{className:"container",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[{icon:jq,title:"",desc:"        ."},{icon:Ui,title:"",desc:"        ."},{icon:qz,title:"",desc:"         ."},{icon:Wx,title:"",desc:"      ."}].map((t,e)=>c.jsxs(Ii,{className:"text-center group hover:-translate-y-2 transition-transform duration-300",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-brand-light text-brand-blue flex items-center justify-center mx-auto mb-6 group-hover:bg-brand-blue group-hover:text-white transition-colors",children:c.jsx(t.icon,{className:"w-8 h-8"})}),c.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-3",children:t.title}),c.jsx("p",{className:"text-gray-600",children:t.desc})]},e))})})}),c.jsx("section",{className:"py-24 bg-slate-50",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{className:"text-3xl font-bold text-center text-brand-dark mb-16",children:" "}),c.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[c.jsx("div",{className:"absolute top-0 bottom-0 right-1/2 w-0.5 bg-brand-blue/20"}),[{year:"2020",title:"",desc:"     ."},{year:"2021",title:" 1000 ",desc:"     1000    ."},{year:"2022",title:" ",desc:"      ."},{year:"2023",title:" ",desc:"      ."}].map((t,e)=>c.jsxs("div",{className:"relative flex items-center justify-between mb-12",children:[c.jsx("div",{className:`w-1/2 px-8 ${e%2===0?"text-left lg:order-1":"text-right lg:order-2"}`}),c.jsx("div",{className:"absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-brand-blue border-4 border-white shadow-lg z-10"}),c.jsx("div",{className:`w-1/2 px-8 ${e%2===0?"text-right lg:order-2":"text-left lg:order-1"}`,children:c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[c.jsx("span",{className:"text-brand-blue font-bold text-xl block mb-2",children:t.year}),c.jsx("h3",{className:"font-bold text-brand-dark text-lg mb-2",children:t.title}),c.jsx("p",{className:"text-gray-500",children:t.desc})]})})]},e))]})]})})]})}),FW=()=>{const[t,e]=E.useState(!1),n=r=>{r.preventDefault(),e(!0),setTimeout(()=>e(!1),5e3)};return c.jsx(ri,{children:c.jsx("div",{className:"bg-slate-50 py-24 min-h-screen",children:c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-brand-dark mb-4",children:" "}),c.jsx("p",{className:"text-gray-600 text-lg",children:"        ."})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[c.jsxs("div",{className:"space-y-8",children:[c.jsxs(Ii,{className:"p-8",children:[c.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-6",children:" "}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-light text-brand-blue flex items-center justify-center shrink-0",children:c.jsx(Sd,{className:"w-6 h-6"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-brand-dark mb-1",children:""}),c.jsxs("p",{className:"text-gray-600",children:["   ",c.jsx("br",{}),"    "]})]})]}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-light text-brand-blue flex items-center justify-center shrink-0",children:c.jsx(Wd,{className:"w-6 h-6"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-brand-dark mb-1",children:""}),c.jsx("p",{className:"text-gray-600",dir:"ltr",children:"+966 50 123 4567"})]})]}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-light text-brand-blue flex items-center justify-center shrink-0",children:c.jsx(Wa,{className:"w-6 h-6"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-brand-dark mb-1",children:" "}),c.jsx("p",{className:"text-gray-600",children:"contact@sakan.app"})]})]})]})]}),c.jsxs(Ii,{className:"p-0 overflow-hidden h-[300px] bg-slate-200 relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Sd,{className:"w-10 h-10 mx-auto mb-2 text-gray-400"}),c.jsx("p",{children:" "})]})}),c.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14494.613867086827!2d46.72185005!3d24.738875!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3e2f03890d489399%3A0xba974d1c98e79fd5!2sRiyadh!5e0!3m2!1sen!2ssa!4v1625064562819!5m2!1sen!2ssa",width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",className:"opacity-70 hover:opacity-100 transition-opacity duration-300"})]})]}),c.jsxs(Ii,{className:"p-8 relative overflow-hidden",children:[c.jsx($a,{children:t&&c.jsxs(Qe.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"absolute inset-0 bg-white z-10 flex flex-col items-center justify-center text-center p-8",children:[c.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-green-500 mb-6",children:c.jsx(Mo,{className:"w-10 h-10"})}),c.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-2",children:"  !"}),c.jsx("p",{className:"text-gray-600",children:"  .        ."})]})}),c.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-6",children:"  "}),c.jsxs("form",{onSubmit:n,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),c.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20",placeholder:" "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),c.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20",placeholder:"name@example.com"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),c.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20 bg-white",children:[c.jsx("option",{children:" "}),c.jsx("option",{children:""}),c.jsx("option",{children:" "}),c.jsx("option",{children:""})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("textarea",{required:!0,rows:4,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20",placeholder:"  "})]}),c.jsxs(Te,{type:"submit",variant:"gradient",className:"w-full flex items-center gap-2 justify-center",children:["  ",c.jsx(wq,{className:"w-4 h-4 mt-1"})]})]})]})]})]})})})},UW=()=>{const[t,e]=E.useState(""),[n,r]=E.useState(""),{login:s}=ws(),a=ni(),o=ur(),[u,d]=E.useState(""),[f,g]=E.useState(!1),y=async x=>{x.preventDefault(),d(""),g(!0);try{await s(t,n),a(o.state?.from?.pathname||"/app")}catch(T){console.error("Login error:",T),d(T.message||"    ")}finally{g(!1)}};return c.jsx(ri,{children:c.jsx("div",{className:"min-h-screen pt-24 pb-12 flex items-center justify-center bg-slate-50",children:c.jsxs("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-gray-100",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-brand-dark mb-2",children:" "}),c.jsx("p",{className:"text-gray-500",children:"    "})]}),c.jsxs("form",{onSubmit:y,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsx("input",{type:"email",required:!0,value:t,onChange:x=>e(x.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsx(Ke,{to:"/forgot-password",className:"text-xs text-brand-blue hover:underline",children:"  "})]}),c.jsx("input",{type:"password",required:!0,value:n,onChange:x=>r(x.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all"})]}),u&&c.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl text-sm text-center",children:u}),c.jsx(Te,{variant:"gradient",className:"w-full py-4 text-lg",disabled:f,children:f?"  ...":" "})]}),c.jsx("div",{className:"text-center mt-6",children:c.jsxs("p",{className:"text-gray-500 text-sm",children:["  "," ",c.jsx(Ke,{to:"/register",className:"text-brand-blue font-bold hover:underline",children:"  "})]})}),c.jsx("div",{className:"text-center mt-4 pt-4 border-t border-gray-100",children:c.jsxs("p",{className:"text-gray-500 text-sm",children:[""," ",c.jsx(Ke,{to:"/employee/login",className:"text-brand-purple font-bold hover:underline",children:"    "})]})})]})})})},$W=()=>{const t=ni(),{register:e}=ws(),[n,r]=E.useState({fullName:"",email:"",password:"",confirmPassword:""}),[s,a]=E.useState(""),[o,u]=E.useState(!1),d=g=>{r({...n,[g.target.name]:g.target.value})},f=async g=>{if(g.preventDefault(),a(""),n.password!==n.confirmPassword){a("   ");return}if(n.password.length<6){a("     6   ");return}u(!0);try{await e(n.fullName,n.email,n.password),t("/pricing")}catch(y){console.error("Registration Error",y),y.code==="auth/email-already-in-use"?a("   "):a("   .   .")}finally{u(!1)}};return c.jsx(ri,{children:c.jsxs("div",{className:"min-h-screen pt-24 pb-12 flex items-center justify-center bg-slate-50 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-brand-purple/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-brand-blue/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 pointer-events-none"}),c.jsxs("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-gray-100 relative z-10",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-brand-light rounded-2xl flex items-center justify-center mx-auto mb-4 text-brand-blue",children:c.jsx(Mq,{className:"w-8 h-8"})}),c.jsx("h1",{className:"text-2xl font-bold text-brand-dark mb-2",children:"  "}),c.jsx("p",{className:"text-gray-500 text-sm",children:"    "})]}),s&&c.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl mb-6 text-sm flex items-center gap-2",children:[c.jsx("span",{children:""})," ",s]}),c.jsxs("form",{onSubmit:f,className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsxs("div",{className:"relative",children:[c.jsx(Hd,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{name:"fullName",type:"text",required:!0,value:n.fullName,onChange:d,className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all",placeholder:":  "})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsxs("div",{className:"relative",children:[c.jsx(Wa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{name:"email",type:"email",required:!0,value:n.email,onChange:d,className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all",placeholder:"name@company.com"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsxs("div",{className:"relative",children:[c.jsx(jm,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{name:"password",type:"password",required:!0,value:n.password,onChange:d,className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all",placeholder:""})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:"  "}),c.jsxs("div",{className:"relative",children:[c.jsx(jm,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{name:"confirmPassword",type:"password",required:!0,value:n.confirmPassword,onChange:d,className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all",placeholder:""})]})]}),c.jsx(Te,{disabled:o,variant:"gradient",className:"w-full py-4 text-lg mt-4",type:"submit",children:o?" ...":" "})]}),c.jsx("div",{className:"text-center mt-6",children:c.jsxs("p",{className:"text-gray-500 text-sm",children:["  "," ",c.jsx(Ke,{to:"/login",className:"text-brand-blue font-bold hover:underline",children:" "})]})})]})]})})},BW=[{name:" ",path:"/app",icon:Zs},{name:"",path:"/app/properties",icon:dr},{name:"",path:"/app/units",icon:ps},{name:"",path:"/app/tenants",icon:Ui},{name:"",path:"/app/contracts",icon:vs},{name:"",path:"/app/payments",icon:Hr},{name:"",path:"/app/maintenance",icon:$i},{name:"",path:"/app/sales",icon:Oc},{name:"",path:"/app/tasks",icon:qd},{name:"",path:"/app/reports",icon:Zs},{name:"",path:"/app/employees",icon:Ui}],zW={properties:{label:"",icon:dr},units:{label:"",icon:ps},tenants:{label:"",icon:Ui},contracts:{label:"",icon:vs},payments:{label:"",icon:Hr},maintenance:{label:"",icon:$i},reports:{label:"",icon:Zs},sales:{label:"",icon:Oc},employees:{label:"",icon:Ui},tasks:{label:"",icon:qd}},qW=[{module:"properties",actions:["view","create","edit","delete"]},{module:"units",actions:["view","create","edit","delete"]},{module:"tenants",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view","create","edit","delete"]},{module:"payments",actions:["view","create","edit","delete"]},{module:"maintenance",actions:["view","create","edit","delete"]},{module:"sales",actions:["view","create","edit","delete"]},{module:"tasks",actions:["view","create","edit","delete"]},{module:"reports",actions:["view"]},{module:"employees",actions:["view","create","edit","delete"]}],WW={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Iy={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};function HW(){const{user:t}=ws();return c.jsxs(Qe.div,{className:"space-y-6 lg:space-y-8",variants:WW,initial:"hidden",animate:"show",children:[c.jsx(Qe.div,{variants:Iy,className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:c.jsxs("div",{children:[c.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-brand-dark mb-1",children:[" ",c.jsx("span",{className:"text-brand-blue",children:t?.displayName?.split(" ")[0]||""}),"!"]}),c.jsx("p",{className:"text-sm lg:text-base text-gray-500",children:"   "})]})}),c.jsxs(Qe.div,{variants:Iy,className:"space-y-3 lg:space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 px-1",children:[c.jsx(Wx,{className:"w-4 h-4 lg:w-5 lg:h-5 text-brand-blue"}),c.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:" "})]}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 sm:gap-3 lg:gap-4",children:qW.map(e=>{const n=zW[e.module],r=n?.icon||Zs,s=e.actions.length>=4;return c.jsxs(Qe.div,{whileHover:{y:-2},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 lg:p-4 flex items-center justify-between group overflow-hidden relative",children:[c.jsx("div",{className:"absolute left-0 top-0 w-1 h-full bg-brand-blue opacity-0 group-hover:opacity-100 transition-opacity"}),c.jsxs("div",{className:"flex items-center gap-2 lg:gap-3 min-w-0",children:[c.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-brand-blue/10 group-hover:text-brand-blue transition-colors flex-shrink-0",children:c.jsx(r,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h3",{className:"font-bold text-gray-800 text-xs lg:text-sm truncate",children:n?.label}),c.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400 mt-0.5 truncate",children:s?" ":" "})]})]}),s&&c.jsx("div",{className:"w-6 h-6 lg:w-8 lg:h-8 rounded-full bg-green-50 flex items-center justify-center text-green-600 flex-shrink-0",children:c.jsx(Q0,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]},e.module)})})]}),c.jsxs(Qe.div,{variants:Iy,className:"space-y-3 lg:space-y-4",children:[c.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark px-1",children:" "}),c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-5 gap-2 sm:gap-3 lg:gap-4",children:BW.filter(e=>e.path!=="/app").map(e=>{const n=e.icon;return c.jsx(Ke,{to:e.path,children:c.jsxs(Qe.div,{whileHover:{scale:1.03,y:-2},whileTap:{scale:.98},className:"h-full bg-white p-3 sm:p-4 lg:p-6 rounded-xl lg:rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg hover:border-brand-blue/20 transition-all cursor-pointer group flex flex-col items-center justify-center text-center gap-2 lg:gap-3",children:[c.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gray-50 rounded-xl lg:rounded-2xl flex items-center justify-center group-hover:bg-brand-blue/10 transition-colors duration-300",children:c.jsx(n,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-gray-500 group-hover:text-brand-blue transition-colors duration-300"})}),c.jsx("h3",{className:"font-bold text-gray-700 group-hover:text-brand-dark transition-colors text-xs sm:text-sm lg:text-base",children:e.name})]})},e.path)})})]})]})}function jn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function QT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ip(...t){return e=>{let n=!1;const r=t.map(s=>{const a=QT(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():QT(t[s],null)}}}}function ei(...t){return E.useCallback(ip(...t),t)}function KW(t,e){const n=E.createContext(e),r=a=>{const{children:o,...u}=a,d=E.useMemo(()=>u,Object.values(u));return c.jsx(n.Provider,{value:d,children:o})};r.displayName=t+"Provider";function s(a){const o=E.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function ap(t,e=[]){let n=[];function r(a,o){const u=E.createContext(o),d=n.length;n=[...n,o];const f=y=>{const{scope:x,children:T,...I}=y,N=x?.[t]?.[d]||u,_=E.useMemo(()=>I,Object.values(I));return c.jsx(N.Provider,{value:_,children:T})};f.displayName=a+"Provider";function g(y,x){const T=x?.[t]?.[d]||u,I=E.useContext(T);if(I)return I;if(o!==void 0)return o;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,g]}const s=()=>{const a=n.map(o=>E.createContext(o));return function(u){const d=u?.[t]||a;return E.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return s.scopeName=t,[r,GW(s,...e)]}function GW(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((u,{useScope:d,scopeName:f})=>{const y=d(a)[`__scope${f}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Nd=globalThis?.document?E.useLayoutEffect:()=>{},YW=SS[" useId ".trim().toString()]||(()=>{}),QW=0;function ed(t){const[e,n]=E.useState(YW());return Nd(()=>{n(r=>r??String(QW++))},[t]),t||(e?`radix-${e}`:"")}var JW=SS[" useInsertionEffect ".trim().toString()]||Nd;function Qx({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,o]=XW({defaultProp:e,onChange:n}),u=t!==void 0,d=u?t:s;{const g=E.useRef(t!==void 0);E.useEffect(()=>{const y=g.current;y!==u&&console.warn(`${r} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,r])}const f=E.useCallback(g=>{if(u){const y=ZW(g)?g(t):g;y!==t&&o.current?.(y)}else a(g)},[u,t,a,o]);return[d,f]}function XW({defaultProp:t,onChange:e}){const[n,r]=E.useState(t),s=E.useRef(n),a=E.useRef(e);return JW(()=>{a.current=e},[e]),E.useEffect(()=>{s.current!==n&&(a.current?.(n),s.current=n)},[n,s]),[n,r,a]}function ZW(t){return typeof t=="function"}function eH(t){const e=tH(t),n=E.forwardRef((r,s)=>{const{children:a,...o}=r,u=E.Children.toArray(a),d=u.find(rH);if(d){const f=d.props.children,g=u.map(y=>y===d?E.Children.count(f)>1?E.Children.only(null):E.isValidElement(f)?f.props.children:null:y);return c.jsx(e,{...o,ref:s,children:E.isValidElement(f)?E.cloneElement(f,void 0,g):null})}return c.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}function tH(t){const e=E.forwardRef((n,r)=>{const{children:s,...a}=n;if(E.isValidElement(s)){const o=iH(s),u=sH(a,s.props);return s.type!==E.Fragment&&(u.ref=r?ip(r,o):o),E.cloneElement(s,u)}return E.Children.count(s)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nH=Symbol("radix.slottable");function rH(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nH}function sH(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{const d=a(...u);return s(...u),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function iH(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var aH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xn=aH.reduce((t,e)=>{const n=eH(`Primitive.${e}`),r=E.forwardRef((s,a)=>{const{asChild:o,...u}=s,d=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(d,{...u,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function oH(t,e){t&&$S.flushSync(()=>t.dispatchEvent(e))}function wc(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>e.current?.(...n),[])}function lH(t,e=globalThis?.document){const n=wc(t);E.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var cH="DismissableLayer",X0="dismissableLayer.update",uH="dismissableLayer.pointerDownOutside",dH="dismissableLayer.focusOutside",JT,eC=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tC=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:u,...d}=t,f=E.useContext(eC),[g,y]=E.useState(null),x=g?.ownerDocument??globalThis?.document,[,T]=E.useState({}),I=ei(e,P=>y(P)),N=Array.from(f.layers),[_]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),k=N.indexOf(_),R=g?N.indexOf(g):-1,j=f.layersWithOutsidePointerEventsDisabled.size>0,D=R>=k,M=mH(P=>{const C=P.target,L=[...f.branches].some(U=>U.contains(C));!D||L||(s?.(P),o?.(P),P.defaultPrevented||u?.())},x),z=pH(P=>{const C=P.target;[...f.branches].some(U=>U.contains(C))||(a?.(P),o?.(P),P.defaultPrevented||u?.())},x);return lH(P=>{R===f.layers.size-1&&(r?.(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},x),E.useEffect(()=>{if(g)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(JT=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),XT(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=JT)}},[g,x,n,f]),E.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),XT())},[g,f]),E.useEffect(()=>{const P=()=>T({});return document.addEventListener(X0,P),()=>document.removeEventListener(X0,P)},[]),c.jsx(Xn.div,{...d,ref:I,style:{pointerEvents:j?D?"auto":"none":void 0,...t.style},onFocusCapture:jn(t.onFocusCapture,z.onFocusCapture),onBlurCapture:jn(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:jn(t.onPointerDownCapture,M.onPointerDownCapture)})});tC.displayName=cH;var hH="DismissableLayerBranch",fH=E.forwardRef((t,e)=>{const n=E.useContext(eC),r=E.useRef(null),s=ei(e,r);return E.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),c.jsx(Xn.div,{...t,ref:s})});fH.displayName=hH;function mH(t,e=globalThis?.document){const n=wc(t),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let d=function(){nC(uH,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function pH(t,e=globalThis?.document){const n=wc(t),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&nC(dH,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function XT(){const t=new CustomEvent(X0);document.dispatchEvent(t)}function nC(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?oH(s,a):s.dispatchEvent(a)}var Cy="focusScope.autoFocusOnMount",Ay="focusScope.autoFocusOnUnmount",ZT={bubbles:!1,cancelable:!0},gH="FocusScope",rC=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[u,d]=E.useState(null),f=wc(s),g=wc(a),y=E.useRef(null),x=ei(e,N=>d(N)),T=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let N=function(j){if(T.paused||!u)return;const D=j.target;u.contains(D)?y.current=D:wa(y.current,{select:!0})},_=function(j){if(T.paused||!u)return;const D=j.relatedTarget;D!==null&&(u.contains(D)||wa(y.current,{select:!0}))},k=function(j){if(document.activeElement===document.body)for(const M of j)M.removedNodes.length>0&&wa(u)};document.addEventListener("focusin",N),document.addEventListener("focusout",_);const R=new MutationObserver(k);return u&&R.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",_),R.disconnect()}}},[r,u,T.paused]),E.useEffect(()=>{if(u){tS.add(T);const N=document.activeElement;if(!u.contains(N)){const k=new CustomEvent(Cy,ZT);u.addEventListener(Cy,f),u.dispatchEvent(k),k.defaultPrevented||(yH(_H(sC(u)),{select:!0}),document.activeElement===N&&wa(u))}return()=>{u.removeEventListener(Cy,f),setTimeout(()=>{const k=new CustomEvent(Ay,ZT);u.addEventListener(Ay,g),u.dispatchEvent(k),k.defaultPrevented||wa(N??document.body,{select:!0}),u.removeEventListener(Ay,g),tS.remove(T)},0)}}},[u,f,g,T]);const I=E.useCallback(N=>{if(!n&&!r||T.paused)return;const _=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,k=document.activeElement;if(_&&k){const R=N.currentTarget,[j,D]=vH(R);j&&D?!N.shiftKey&&k===D?(N.preventDefault(),n&&wa(j,{select:!0})):N.shiftKey&&k===j&&(N.preventDefault(),n&&wa(D,{select:!0})):k===R&&N.preventDefault()}},[n,r,T.paused]);return c.jsx(Xn.div,{tabIndex:-1,...o,ref:x,onKeyDown:I})});rC.displayName=gH;function yH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(wa(r,{select:e}),document.activeElement!==n)return}function vH(t){const e=sC(t),n=eS(e,t),r=eS(e.reverse(),t);return[n,r]}function sC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function eS(t,e){for(const n of t)if(!xH(n,{upTo:e}))return n}function xH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function wH(t){return t instanceof HTMLInputElement&&"select"in t}function wa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&wH(t)&&e&&t.select()}}var tS=bH();function bH(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=nS(t,e),t.unshift(e)},remove(e){t=nS(t,e),t[0]?.resume()}}}function nS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function _H(t){return t.filter(e=>e.tagName!=="A")}var EH="Portal",iC=E.forwardRef((t,e)=>{const{container:n,...r}=t,[s,a]=E.useState(!1);Nd(()=>a(!0),[]);const o=n||s&&globalThis?.document?.body;return o?BS.createPortal(c.jsx(Xn.div,{...r,ref:e}),o):null});iC.displayName=EH;function TH(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var Kd=t=>{const{present:e,children:n}=t,r=SH(e),s=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),a=ei(r.ref,NH(s));return typeof n=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};Kd.displayName="Presence";function SH(t){const[e,n]=E.useState(),r=E.useRef(null),s=E.useRef(t),a=E.useRef("none"),o=t?"mounted":"unmounted",[u,d]=TH(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=Ef(r.current);a.current=u==="mounted"?f:"none"},[u]),Nd(()=>{const f=r.current,g=s.current;if(g!==t){const x=a.current,T=Ef(f);t?d("MOUNT"):T==="none"||f?.display==="none"?d("UNMOUNT"):d(g&&x!==T?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,d]),Nd(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,y=T=>{const N=Ef(r.current).includes(CSS.escape(T.animationName));if(T.target===e&&N&&(d("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},x=T=>{T.target===e&&(a.current=Ef(r.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(f=>{r.current=f?getComputedStyle(f):null,n(f)},[])}}function Ef(t){return t?.animationName||"none"}function NH(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ry=0;function kH(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??rS()),document.body.insertAdjacentElement("beforeend",t[1]??rS()),Ry++,()=>{Ry===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ry--}},[])}function rS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Kf="right-scroll-bar-position",Gf="width-before-scroll-bar",jH="with-scroll-bars-hidden",IH="--removed-body-scroll-bar-size";function Py(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function CH(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var AH=typeof window<"u"?E.useLayoutEffect:E.useEffect,sS=new WeakMap;function RH(t,e){var n=CH(null,function(r){return t.forEach(function(s){return Py(s,r)})});return AH(function(){var r=sS.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(u){a.has(u)||Py(u,null)}),a.forEach(function(u){s.has(u)||Py(u,o)})}sS.set(n,t)},[t]),n}function PH(t){return t}function DH(t,e){e===void 0&&(e=PH);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(u){return u!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(u){return a(u)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var u=n;n=[],u.forEach(a),o=n}var d=function(){var g=o;o=[],g.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(g){o.push(g),f()},filter:function(g){return o=o.filter(g),n}}}};return s}function OH(t){t===void 0&&(t={});var e=DH(null);return e.options=$s({async:!0,ssr:!1},t),e}var aC=function(t){var e=t.sideCar,n=Ac(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,$s({},n))};aC.isSideCarExport=!0;function MH(t,e){return t.useMedium(e),aC}var oC=OH(),Dy=function(){},op=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:Dy,onWheelCapture:Dy,onTouchMoveCapture:Dy}),s=r[0],a=r[1],o=t.forwardProps,u=t.children,d=t.className,f=t.removeScrollBar,g=t.enabled,y=t.shards,x=t.sideCar,T=t.noRelative,I=t.noIsolation,N=t.inert,_=t.allowPinchZoom,k=t.as,R=k===void 0?"div":k,j=t.gapMode,D=Ac(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=x,z=RH([n,e]),P=$s($s({},D),s);return E.createElement(E.Fragment,null,g&&E.createElement(M,{sideCar:oC,removeScrollBar:f,shards:y,noRelative:T,noIsolation:I,inert:N,setCallbacks:a,allowPinchZoom:!!_,lockRef:n,gapMode:j}),o?E.cloneElement(E.Children.only(u),$s($s({},P),{ref:z})):E.createElement(R,$s({},P,{className:d,ref:z}),u))});op.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};op.classNames={fullWidth:Gf,zeroRight:Kf};var LH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VH(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=LH();return e&&t.setAttribute("nonce",e),t}function FH(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function UH(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var $H=function(){var t=0,e=null;return{add:function(n){t==0&&(e=VH())&&(FH(e,n),UH(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},BH=function(){var t=$H();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},lC=function(){var t=BH(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},zH={left:0,top:0,right:0,gap:0},Oy=function(t){return parseInt(t||"",10)||0},qH=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Oy(n),Oy(r),Oy(s)]},WH=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return zH;var e=qH(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},HH=lC(),cc="data-scroll-locked",KH=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(jH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(cc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Kf,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Gf,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Kf," .").concat(Kf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gf," .").concat(Gf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(cc,`] {
    `).concat(IH,": ").concat(u,`px;
  }
`)},iS=function(){var t=parseInt(document.body.getAttribute(cc)||"0",10);return isFinite(t)?t:0},GH=function(){E.useEffect(function(){return document.body.setAttribute(cc,(iS()+1).toString()),function(){var t=iS()-1;t<=0?document.body.removeAttribute(cc):document.body.setAttribute(cc,t.toString())}},[])},YH=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;GH();var a=E.useMemo(function(){return WH(s)},[s]);return E.createElement(HH,{styles:KH(a,!e,s,n?"":"!important")})},Z0=!1;if(typeof window<"u")try{var Tf=Object.defineProperty({},"passive",{get:function(){return Z0=!0,!0}});window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{Z0=!1}var Fl=Z0?{passive:!1}:!1,QH=function(t){return t.tagName==="TEXTAREA"},cC=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!QH(t)&&n[e]==="visible")},JH=function(t){return cC(t,"overflowY")},XH=function(t){return cC(t,"overflowX")},aS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=uC(t,r);if(s){var a=dC(t,r),o=a[1],u=a[2];if(o>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ZH=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},eK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},uC=function(t,e){return t==="v"?JH(e):XH(e)},dC=function(t,e){return t==="v"?ZH(e):eK(e)},tK=function(t,e){return t==="h"&&e==="rtl"?-1:1},nK=function(t,e,n,r,s){var a=tK(t,window.getComputedStyle(e).direction),o=a*r,u=n.target,d=e.contains(u),f=!1,g=o>0,y=0,x=0;do{if(!u)break;var T=dC(t,u),I=T[0],N=T[1],_=T[2],k=N-_-a*I;(I||k)&&uC(t,u)&&(y+=k,x+=I);var R=u.parentNode;u=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(x)<1)&&(f=!0),f},Sf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},oS=function(t){return[t.deltaX,t.deltaY]},lS=function(t){return t&&"current"in t?t.current:t},rK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},sK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},iK=0,Ul=[];function aK(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),s=E.useState(iK++)[0],a=E.useState(lC)[0],o=E.useRef(t);E.useEffect(function(){o.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var N=T6([t.lockRef.current],(t.shards||[]).map(lS),!0).filter(Boolean);return N.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),N.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=E.useCallback(function(N,_){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!o.current.allowPinchZoom;var k=Sf(N),R=n.current,j="deltaX"in N?N.deltaX:R[0]-k[0],D="deltaY"in N?N.deltaY:R[1]-k[1],M,z=N.target,P=Math.abs(j)>Math.abs(D)?"h":"v";if("touches"in N&&P==="h"&&z.type==="range")return!1;var C=window.getSelection(),L=C&&C.anchorNode,U=L?L===z||L.contains(z):!1;if(U)return!1;var $=aS(P,z);if(!$)return!0;if($?M=P:(M=P==="v"?"h":"v",$=aS(P,z)),!$)return!1;if(!r.current&&"changedTouches"in N&&(j||D)&&(r.current=M),!M)return!0;var q=r.current||M;return nK(q,_,N,q==="h"?j:D)},[]),d=E.useCallback(function(N){var _=N;if(!(!Ul.length||Ul[Ul.length-1]!==a)){var k="deltaY"in _?oS(_):Sf(_),R=e.current.filter(function(M){return M.name===_.type&&(M.target===_.target||_.target===M.shadowParent)&&rK(M.delta,k)})[0];if(R&&R.should){_.cancelable&&_.preventDefault();return}if(!R){var j=(o.current.shards||[]).map(lS).filter(Boolean).filter(function(M){return M.contains(_.target)}),D=j.length>0?u(_,j[0]):!o.current.noIsolation;D&&_.cancelable&&_.preventDefault()}}},[]),f=E.useCallback(function(N,_,k,R){var j={name:N,delta:_,target:k,should:R,shadowParent:oK(k)};e.current.push(j),setTimeout(function(){e.current=e.current.filter(function(D){return D!==j})},1)},[]),g=E.useCallback(function(N){n.current=Sf(N),r.current=void 0},[]),y=E.useCallback(function(N){f(N.type,oS(N),N.target,u(N,t.lockRef.current))},[]),x=E.useCallback(function(N){f(N.type,Sf(N),N.target,u(N,t.lockRef.current))},[]);E.useEffect(function(){return Ul.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:x}),document.addEventListener("wheel",d,Fl),document.addEventListener("touchmove",d,Fl),document.addEventListener("touchstart",g,Fl),function(){Ul=Ul.filter(function(N){return N!==a}),document.removeEventListener("wheel",d,Fl),document.removeEventListener("touchmove",d,Fl),document.removeEventListener("touchstart",g,Fl)}},[]);var T=t.removeScrollBar,I=t.inert;return E.createElement(E.Fragment,null,I?E.createElement(a,{styles:sK(s)}):null,T?E.createElement(YH,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function oK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const lK=MH(oC,aK);var hC=E.forwardRef(function(t,e){return E.createElement(op,$s({},t,{ref:e,sideCar:lK}))});hC.classNames=op.classNames;var cK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},$l=new WeakMap,Nf=new WeakMap,kf={},My=0,fC=function(t){return t&&(t.host||fC(t.parentNode))},uK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=fC(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},dK=function(t,e,n,r){var s=uK(e,Array.isArray(t)?t:[t]);kf[n]||(kf[n]=new WeakMap);var a=kf[n],o=[],u=new Set,d=new Set(s),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};s.forEach(f);var g=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(x){if(u.has(x))g(x);else try{var T=x.getAttribute(r),I=T!==null&&T!=="false",N=($l.get(x)||0)+1,_=(a.get(x)||0)+1;$l.set(x,N),a.set(x,_),o.push(x),N===1&&I&&Nf.set(x,!0),_===1&&x.setAttribute(n,"true"),I||x.setAttribute(r,"true")}catch(k){console.error("aria-hidden: cannot operate on ",x,k)}})};return g(e),u.clear(),My++,function(){o.forEach(function(y){var x=$l.get(y)-1,T=a.get(y)-1;$l.set(y,x),a.set(y,T),x||(Nf.has(y)||y.removeAttribute(r),Nf.delete(y)),T||y.removeAttribute(n)}),My--,My||($l=new WeakMap,$l=new WeakMap,Nf=new WeakMap,kf={})}},hK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=cK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),dK(r,s,n,"aria-hidden")):function(){return null}};function fK(t){const e=mK(t),n=E.forwardRef((r,s)=>{const{children:a,...o}=r,u=E.Children.toArray(a),d=u.find(gK);if(d){const f=d.props.children,g=u.map(y=>y===d?E.Children.count(f)>1?E.Children.only(null):E.isValidElement(f)?f.props.children:null:y);return c.jsx(e,{...o,ref:s,children:E.isValidElement(f)?E.cloneElement(f,void 0,g):null})}return c.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}function mK(t){const e=E.forwardRef((n,r)=>{const{children:s,...a}=n;if(E.isValidElement(s)){const o=vK(s),u=yK(a,s.props);return s.type!==E.Fragment&&(u.ref=r?ip(r,o):o),E.cloneElement(s,u)}return E.Children.count(s)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pK=Symbol("radix.slottable");function gK(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pK}function yK(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{const d=a(...u);return s(...u),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function vK(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var lp="Dialog",[mC]=ap(lp),[xK,bs]=mC(lp),pC=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,u=E.useRef(null),d=E.useRef(null),[f,g]=Qx({prop:r,defaultProp:s??!1,onChange:a,caller:lp});return c.jsx(xK,{scope:e,triggerRef:u,contentRef:d,contentId:ed(),titleId:ed(),descriptionId:ed(),open:f,onOpenChange:g,onOpenToggle:E.useCallback(()=>g(y=>!y),[g]),modal:o,children:n})};pC.displayName=lp;var gC="DialogTrigger",wK=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(gC,n),a=ei(e,s.triggerRef);return c.jsx(Xn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Zx(s.open),...r,ref:a,onClick:jn(t.onClick,s.onOpenToggle)})});wK.displayName=gC;var Jx="DialogPortal",[bK,yC]=mC(Jx,{forceMount:void 0}),vC=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=bs(Jx,e);return c.jsx(bK,{scope:e,forceMount:n,children:E.Children.map(r,o=>c.jsx(Kd,{present:n||a.open,children:c.jsx(iC,{asChild:!0,container:s,children:o})}))})};vC.displayName=Jx;var Am="DialogOverlay",xC=E.forwardRef((t,e)=>{const n=yC(Am,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=bs(Am,t.__scopeDialog);return a.modal?c.jsx(Kd,{present:r||a.open,children:c.jsx(EK,{...s,ref:e})}):null});xC.displayName=Am;var _K=fK("DialogOverlay.RemoveScroll"),EK=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(Am,n);return c.jsx(hC,{as:_K,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(Xn.div,{"data-state":Zx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),qo="DialogContent",wC=E.forwardRef((t,e)=>{const n=yC(qo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=bs(qo,t.__scopeDialog);return c.jsx(Kd,{present:r||a.open,children:a.modal?c.jsx(TK,{...s,ref:e}):c.jsx(SK,{...s,ref:e})})});wC.displayName=qo;var TK=E.forwardRef((t,e)=>{const n=bs(qo,t.__scopeDialog),r=E.useRef(null),s=ei(e,n.contentRef,r);return E.useEffect(()=>{const a=r.current;if(a)return hK(a)},[]),c.jsx(bC,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:jn(t.onCloseAutoFocus,a=>{a.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:jn(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,u=o.button===0&&o.ctrlKey===!0;(o.button===2||u)&&a.preventDefault()}),onFocusOutside:jn(t.onFocusOutside,a=>a.preventDefault())})}),SK=E.forwardRef((t,e)=>{const n=bs(qo,t.__scopeDialog),r=E.useRef(!1),s=E.useRef(!1);return c.jsx(bC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;n.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),bC=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,u=bs(qo,n),d=E.useRef(null),f=ei(e,d);return kH(),c.jsxs(c.Fragment,{children:[c.jsx(rC,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:c.jsx(tC,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Zx(u.open),...o,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(kK,{titleId:u.titleId}),c.jsx(IK,{contentRef:d,descriptionId:u.descriptionId})]})]})}),Xx="DialogTitle",_C=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(Xx,n);return c.jsx(Xn.h2,{id:s.titleId,...r,ref:e})});_C.displayName=Xx;var EC="DialogDescription",NK=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(EC,n);return c.jsx(Xn.p,{id:s.descriptionId,...r,ref:e})});NK.displayName=EC;var TC="DialogClose",SC=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(TC,n);return c.jsx(Xn.button,{type:"button",...r,ref:e,onClick:jn(t.onClick,()=>s.onOpenChange(!1))})});SC.displayName=TC;function Zx(t){return t?"open":"closed"}var NC="DialogTitleWarning",[lY,kC]=KW(NC,{contentName:qo,titleName:Xx,docsSlug:"dialog"}),kK=({titleId:t})=>{const e=kC(NC),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},jK="DialogDescriptionWarning",IK=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kC(jK).contentName}}.`;return E.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},CK=pC,AK=vC,RK=xC,PK=wC,DK=_C,OK=SC;function Ha(...t){return Yx(Kx(t))}function Vc({...t}){return c.jsx(CK,{"data-slot":"dialog",...t})}function MK({...t}){return c.jsx(AK,{"data-slot":"dialog-portal",...t})}function LK({className:t,...e}){return c.jsx(RK,{"data-slot":"dialog-overlay",className:Ha("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[100] bg-black/60",t),...e})}function Fc({className:t,children:e,...n}){return c.jsxs(MK,{"data-slot":"dialog-portal",children:[c.jsx(LK,{}),c.jsxs(PK,{"data-slot":"dialog-content",className:Ha("bg-white data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[101] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-xl border border-gray-200 p-6 shadow-2xl duration-200 sm:max-w-lg",t),...n,children:[e,c.jsxs(OK,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[c.jsx(Ba,{}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Uc({className:t,...e}){return c.jsx("div",{"data-slot":"dialog-header",className:Ha("flex flex-col gap-2 text-center sm:text-left",t),...e})}function $c({className:t,...e}){return c.jsx(DK,{"data-slot":"dialog-title",className:Ha("text-lg leading-none font-semibold",t),...e})}function VK(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const FK=t=>{switch(t){case"success":return BK;case"info":return qK;case"warning":return zK;case"error":return WK;default:return null}},UK=Array(12).fill(0),$K=({visible:t,className:e})=>de.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},de.createElement("div",{className:"sonner-spinner"},UK.map((n,r)=>de.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),BK=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),zK=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),qK=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),WK=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),HK=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},de.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),de.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),KK=()=>{const[t,e]=de.useState(document.hidden);return de.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let ev=1;class GK{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,a=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:ev++,o=this.toasts.find(d=>d.id===a),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(d=>d.id===a?(this.publish({...d,...e,id:a,title:r}),{...d,...e,id:a,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let a=r!==void 0,o;const u=s.then(async f=>{if(o=["resolve",f],de.isValidElement(f))a=!1,this.create({id:r,type:"default",message:f});else if(QK(f)&&!f.ok){a=!1;const y=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,x=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,I=typeof y=="object"&&!de.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:x,...I})}else if(f instanceof Error){a=!1;const y=typeof n.error=="function"?await n.error(f):n.error,x=typeof n.description=="function"?await n.description(f):n.description,I=typeof y=="object"&&!de.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:x,...I})}else if(n.success!==void 0){a=!1;const y=typeof n.success=="function"?await n.success(f):n.success,x=typeof n.description=="function"?await n.description(f):n.description,I=typeof y=="object"&&!de.isValidElement(y)?y:{message:y};this.create({id:r,type:"success",description:x,...I})}}).catch(async f=>{if(o=["reject",f],n.error!==void 0){a=!1;const g=typeof n.error=="function"?await n.error(f):n.error,y=typeof n.description=="function"?await n.description(f):n.description,T=typeof g=="object"&&!de.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:y,...T})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,g)=>u.then(()=>o[0]==="reject"?g(o[1]):f(o[1])).catch(g));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,n)=>{const r=n?.id||ev++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const or=new GK,YK=(t,e)=>{const n=e?.id||ev++;return or.addToast({title:t,...e,id:n}),n},QK=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",JK=YK,XK=()=>or.toasts,ZK=()=>or.getActiveToasts(),ot=Object.assign(JK,{success:or.success,info:or.info,warning:or.warning,error:or.error,custom:or.custom,message:or.message,promise:or.promise,dismiss:or.dismiss,loading:or.loading},{getHistory:XK,getToasts:ZK});VK("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jf(t){return t.label!==void 0}const eG=3,tG="24px",nG="16px",cS=4e3,rG=356,sG=14,iG=45,aG=200;function Fs(...t){return t.filter(Boolean).join(" ")}function oG(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const lG=t=>{var e,n,r,s,a,o,u,d,f;const{invert:g,toast:y,unstyled:x,interacting:T,setHeights:I,visibleToasts:N,heights:_,index:k,toasts:R,expanded:j,removeToast:D,defaultRichColors:M,closeButton:z,style:P,cancelButtonStyle:C,actionButtonStyle:L,className:U="",descriptionClassName:$="",duration:q,position:V,gap:se,expandByDefault:Q,classNames:le,icons:me,closeButtonAriaLabel:J="Close toast"}=t,[ve,he]=de.useState(null),[H,ne]=de.useState(null),[ue,ye]=de.useState(!1),[_e,De]=de.useState(!1),[Ae,je]=de.useState(!1),[Je,pt]=de.useState(!1),[vn,nn]=de.useState(!1),[te,ee]=de.useState(0),[ge,Ve]=de.useState(0),lt=de.useRef(y.duration||q||cS),At=de.useRef(null),rt=de.useRef(null),xt=k===0,qn=k+1<=N,Bt=y.type,An=y.dismissible!==!1,qi=y.className||"",ht=y.descriptionClassName||"",zt=de.useMemo(()=>_.findIndex(Fe=>Fe.toastId===y.id)||0,[_,y.id]),Wi=de.useMemo(()=>{var Fe;return(Fe=y.closeButton)!=null?Fe:z},[y.closeButton,z]),Gr=de.useMemo(()=>y.duration||q||cS,[y.duration,q]),Hi=de.useRef(0),Zn=de.useRef(0),Yr=de.useRef(0),Qr=de.useRef(null),[_s,Ki]=V.split("-"),Gi=de.useMemo(()=>_.reduce((Fe,gt,qt)=>qt>=zt?Fe:Fe+gt.height,0),[_,zt]),er=KK(),Yi=y.invert||g,Ir=Bt==="loading";Zn.current=de.useMemo(()=>zt*se+Gi,[zt,Gi]),de.useEffect(()=>{lt.current=Gr},[Gr]),de.useEffect(()=>{ye(!0)},[]),de.useEffect(()=>{const Fe=rt.current;if(Fe){const gt=Fe.getBoundingClientRect().height;return Ve(gt),I(qt=>[{toastId:y.id,height:gt,position:y.position},...qt]),()=>I(qt=>qt.filter(dn=>dn.toastId!==y.id))}},[I,y.id]),de.useLayoutEffect(()=>{if(!ue)return;const Fe=rt.current,gt=Fe.style.height;Fe.style.height="auto";const qt=Fe.getBoundingClientRect().height;Fe.style.height=gt,Ve(qt),I(dn=>dn.find(Vt=>Vt.toastId===y.id)?dn.map(Vt=>Vt.toastId===y.id?{...Vt,height:qt}:Vt):[{toastId:y.id,height:qt,position:y.position},...dn])},[ue,y.title,y.description,I,y.id,y.jsx,y.action,y.cancel]);const Wn=de.useCallback(()=>{De(!0),ee(Zn.current),I(Fe=>Fe.filter(gt=>gt.toastId!==y.id)),setTimeout(()=>{D(y)},aG)},[y,D,I,Zn]);de.useEffect(()=>{if(y.promise&&Bt==="loading"||y.duration===1/0||y.type==="loading")return;let Fe;return j||T||er?(()=>{if(Yr.current<Hi.current){const dn=new Date().getTime()-Hi.current;lt.current=lt.current-dn}Yr.current=new Date().getTime()})():(()=>{lt.current!==1/0&&(Hi.current=new Date().getTime(),Fe=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),Wn()},lt.current))})(),()=>clearTimeout(Fe)},[j,T,y,Bt,er,Wn]),de.useEffect(()=>{y.delete&&(Wn(),y.onDismiss==null||y.onDismiss.call(y,y))},[Wn,y.delete]);function Jr(){var Fe;if(me?.loading){var gt;return de.createElement("div",{className:Fs(le?.loader,y==null||(gt=y.classNames)==null?void 0:gt.loader,"sonner-loader"),"data-visible":Bt==="loading"},me.loading)}return de.createElement($K,{className:Fs(le?.loader,y==null||(Fe=y.classNames)==null?void 0:Fe.loader),visible:Bt==="loading"})}const Xr=y.icon||me?.[Bt]||FK(Bt);var _t,Qi;return de.createElement("li",{tabIndex:0,ref:rt,className:Fs(U,qi,le?.toast,y==null||(e=y.classNames)==null?void 0:e.toast,le?.default,le?.[Bt],y==null||(n=y.classNames)==null?void 0:n[Bt]),"data-sonner-toast":"","data-rich-colors":(_t=y.richColors)!=null?_t:M,"data-styled":!(y.jsx||y.unstyled||x),"data-mounted":ue,"data-promise":!!y.promise,"data-swiped":vn,"data-removed":_e,"data-visible":qn,"data-y-position":_s,"data-x-position":Ki,"data-index":k,"data-front":xt,"data-swiping":Ae,"data-dismissible":An,"data-type":Bt,"data-invert":Yi,"data-swipe-out":Je,"data-swipe-direction":H,"data-expanded":!!(j||Q&&ue),"data-testid":y.testId,style:{"--index":k,"--toasts-before":k,"--z-index":R.length-k,"--offset":`${_e?te:Zn.current}px`,"--initial-height":Q?"auto":`${ge}px`,...P,...y.style},onDragEnd:()=>{je(!1),he(null),Qr.current=null},onPointerDown:Fe=>{Fe.button!==2&&(Ir||!An||(At.current=new Date,ee(Zn.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(je(!0),Qr.current={x:Fe.clientX,y:Fe.clientY})))},onPointerUp:()=>{var Fe,gt,qt;if(Je||!An)return;Qr.current=null;const dn=Number(((Fe=rt.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Hn=Number(((gt=rt.current)==null?void 0:gt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Vt=new Date().getTime()-((qt=At.current)==null?void 0:qt.getTime()),Gt=ve==="x"?dn:Hn,hr=Math.abs(Gt)/Vt;if(Math.abs(Gt)>=iG||hr>.11){ee(Zn.current),y.onDismiss==null||y.onDismiss.call(y,y),ne(ve==="x"?dn>0?"right":"left":Hn>0?"down":"up"),Wn(),pt(!0);return}else{var Yt,Rn;(Yt=rt.current)==null||Yt.style.setProperty("--swipe-amount-x","0px"),(Rn=rt.current)==null||Rn.style.setProperty("--swipe-amount-y","0px")}nn(!1),je(!1),he(null)},onPointerMove:Fe=>{var gt,qt,dn;if(!Qr.current||!An||((gt=window.getSelection())==null?void 0:gt.toString().length)>0)return;const Vt=Fe.clientY-Qr.current.y,Gt=Fe.clientX-Qr.current.x;var hr;const Yt=(hr=t.swipeDirections)!=null?hr:oG(V);!ve&&(Math.abs(Gt)>1||Math.abs(Vt)>1)&&he(Math.abs(Gt)>Math.abs(Vt)?"x":"y");let Rn={x:0,y:0};const Cr=hn=>1/(1.5+Math.abs(hn)/20);if(ve==="y"){if(Yt.includes("top")||Yt.includes("bottom"))if(Yt.includes("top")&&Vt<0||Yt.includes("bottom")&&Vt>0)Rn.y=Vt;else{const hn=Vt*Cr(Vt);Rn.y=Math.abs(hn)<Math.abs(Vt)?hn:Vt}}else if(ve==="x"&&(Yt.includes("left")||Yt.includes("right")))if(Yt.includes("left")&&Gt<0||Yt.includes("right")&&Gt>0)Rn.x=Gt;else{const hn=Gt*Cr(Gt);Rn.x=Math.abs(hn)<Math.abs(Gt)?hn:Gt}(Math.abs(Rn.x)>0||Math.abs(Rn.y)>0)&&nn(!0),(qt=rt.current)==null||qt.style.setProperty("--swipe-amount-x",`${Rn.x}px`),(dn=rt.current)==null||dn.style.setProperty("--swipe-amount-y",`${Rn.y}px`)}},Wi&&!y.jsx&&Bt!=="loading"?de.createElement("button",{"aria-label":J,"data-disabled":Ir,"data-close-button":!0,onClick:Ir||!An?()=>{}:()=>{Wn(),y.onDismiss==null||y.onDismiss.call(y,y)},className:Fs(le?.closeButton,y==null||(r=y.classNames)==null?void 0:r.closeButton)},(Qi=me?.close)!=null?Qi:HK):null,(Bt||y.icon||y.promise)&&y.icon!==null&&(me?.[Bt]!==null||y.icon)?de.createElement("div",{"data-icon":"",className:Fs(le?.icon,y==null||(s=y.classNames)==null?void 0:s.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||Jr():null,y.type!=="loading"?Xr:null):null,de.createElement("div",{"data-content":"",className:Fs(le?.content,y==null||(a=y.classNames)==null?void 0:a.content)},de.createElement("div",{"data-title":"",className:Fs(le?.title,y==null||(o=y.classNames)==null?void 0:o.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?de.createElement("div",{"data-description":"",className:Fs($,ht,le?.description,y==null||(u=y.classNames)==null?void 0:u.description)},typeof y.description=="function"?y.description():y.description):null),de.isValidElement(y.cancel)?y.cancel:y.cancel&&jf(y.cancel)?de.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||C,onClick:Fe=>{jf(y.cancel)&&An&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,Fe),Wn())},className:Fs(le?.cancelButton,y==null||(d=y.classNames)==null?void 0:d.cancelButton)},y.cancel.label):null,de.isValidElement(y.action)?y.action:y.action&&jf(y.action)?de.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||L,onClick:Fe=>{jf(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,Fe),!Fe.defaultPrevented&&Wn())},className:Fs(le?.actionButton,y==null||(f=y.classNames)==null?void 0:f.actionButton)},y.action.label):null)};function uS(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function cG(t,e){const n={};return[t,e].forEach((r,s)=>{const a=s===1,o=a?"--mobile-offset":"--offset",u=a?nG:tG;function d(f){["top","right","bottom","left"].forEach(g=>{n[`${o}-${g}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?n[`${o}-${f}`]=u:n[`${o}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(u)}),n}const uG=de.forwardRef(function(e,n){const{id:r,invert:s,position:a="bottom-right",hotkey:o=["altKey","KeyT"],expand:u,closeButton:d,className:f,offset:g,mobileOffset:y,theme:x="light",richColors:T,duration:I,style:N,visibleToasts:_=eG,toastOptions:k,dir:R=uS(),gap:j=sG,icons:D,containerAriaLabel:M="Notifications"}=e,[z,P]=de.useState([]),C=de.useMemo(()=>r?z.filter(ue=>ue.toasterId===r):z.filter(ue=>!ue.toasterId),[z,r]),L=de.useMemo(()=>Array.from(new Set([a].concat(C.filter(ue=>ue.position).map(ue=>ue.position)))),[C,a]),[U,$]=de.useState([]),[q,V]=de.useState(!1),[se,Q]=de.useState(!1),[le,me]=de.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=de.useRef(null),ve=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),he=de.useRef(null),H=de.useRef(!1),ne=de.useCallback(ue=>{P(ye=>{var _e;return(_e=ye.find(De=>De.id===ue.id))!=null&&_e.delete||or.dismiss(ue.id),ye.filter(({id:De})=>De!==ue.id)})},[]);return de.useEffect(()=>or.subscribe(ue=>{if(ue.dismiss){requestAnimationFrame(()=>{P(ye=>ye.map(_e=>_e.id===ue.id?{..._e,delete:!0}:_e))});return}setTimeout(()=>{BS.flushSync(()=>{P(ye=>{const _e=ye.findIndex(De=>De.id===ue.id);return _e!==-1?[...ye.slice(0,_e),{...ye[_e],...ue},...ye.slice(_e+1)]:[ue,...ye]})})})}),[z]),de.useEffect(()=>{if(x!=="system"){me(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?me("dark"):me("light")),typeof window>"u")return;const ue=window.matchMedia("(prefers-color-scheme: dark)");try{ue.addEventListener("change",({matches:ye})=>{me(ye?"dark":"light")})}catch{ue.addListener(({matches:_e})=>{try{me(_e?"dark":"light")}catch(De){console.error(De)}})}},[x]),de.useEffect(()=>{z.length<=1&&V(!1)},[z]),de.useEffect(()=>{const ue=ye=>{var _e;if(o.every(je=>ye[je]||ye.code===je)){var Ae;V(!0),(Ae=J.current)==null||Ae.focus()}ye.code==="Escape"&&(document.activeElement===J.current||(_e=J.current)!=null&&_e.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",ue),()=>document.removeEventListener("keydown",ue)},[o]),de.useEffect(()=>{if(J.current)return()=>{he.current&&(he.current.focus({preventScroll:!0}),he.current=null,H.current=!1)}},[J.current]),de.createElement("section",{ref:n,"aria-label":`${M} ${ve}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},L.map((ue,ye)=>{var _e;const[De,Ae]=ue.split("-");return C.length?de.createElement("ol",{key:ue,dir:R==="auto"?uS():R,tabIndex:-1,ref:J,className:f,"data-sonner-toaster":!0,"data-sonner-theme":le,"data-y-position":De,"data-x-position":Ae,style:{"--front-toast-height":`${((_e=U[0])==null?void 0:_e.height)||0}px`,"--width":`${rG}px`,"--gap":`${j}px`,...N,...cG(g,y)},onBlur:je=>{H.current&&!je.currentTarget.contains(je.relatedTarget)&&(H.current=!1,he.current&&(he.current.focus({preventScroll:!0}),he.current=null))},onFocus:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||H.current||(H.current=!0,he.current=je.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{se||V(!1)},onDragEnd:()=>V(!1),onPointerDown:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||Q(!0)},onPointerUp:()=>Q(!1)},C.filter(je=>!je.position&&ye===0||je.position===ue).map((je,Je)=>{var pt,vn;return de.createElement(lG,{key:je.id,icons:D,index:Je,toast:je,defaultRichColors:T,duration:(pt=k?.duration)!=null?pt:I,className:k?.className,descriptionClassName:k?.descriptionClassName,invert:s,visibleToasts:_,closeButton:(vn=k?.closeButton)!=null?vn:d,interacting:se,position:ue,style:k?.style,unstyled:k?.unstyled,classNames:k?.classNames,cancelButtonStyle:k?.cancelButtonStyle,actionButtonStyle:k?.actionButtonStyle,closeButtonAriaLabel:k?.closeButtonAriaLabel,removeToast:ne,toasts:C.filter(nn=>nn.position==je.position),heights:U.filter(nn=>nn.position==je.position),setHeights:$,expandByDefault:u,gap:j,expanded:q,swipeDirections:e.swipeDirections})})):null}))}),dG=["",""," "," ","","","","","",""],hG=[{value:"building",label:" "},{value:"villa",label:""},{value:"complex",label:" "},{value:"land",label:""}];function fG({isOpen:t,onClose:e,propertyId:n}){const{properties:r,addProperty:s,updateProperty:a}=zn(),[o,u]=E.useState({name:"",city:"",address:"",type:"building",images:[]});E.useEffect(()=>{if(n){const y=r.find(x=>x.id===n);y&&u({name:y.name,city:y.city,address:y.address,type:y.type,images:y.images||[]})}else u({name:"",city:"",address:"",type:"building",images:[]})},[n,r,t]);const d=y=>{if(y.preventDefault(),!o.name||!o.address){ot.error("    ");return}n?(a(n,o),ot.success("   ")):(s(o),ot.success("   ")),e()},f=()=>{const y=["https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=800","https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800","https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800","https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800"],x=y[Math.floor(Math.random()*y.length)];u({...o,images:[...o.images,x]}),ot.success("  ")},g=y=>{u({...o,images:o.images.filter((x,T)=>T!==y)})};return c.jsx(Vc,{open:t,onOpenChange:e,children:c.jsxs(Fc,{className:"max-w-lg",children:[c.jsx(Uc,{children:c.jsx($c,{children:n?" ":"  "})}),c.jsxs("form",{onSubmit:d,className:"space-y-4 mt-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:o.name,onChange:y=>u({...o,name:y.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:":  "})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("select",{value:o.type,onChange:y=>u({...o,type:y.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:hG.map(y=>c.jsx("option",{value:y.value,children:y.label},y.value))})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("select",{value:o.city,onChange:y=>u({...o,city:y.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:dG.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:o.address,onChange:y=>u({...o,address:y.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:":    "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.images.length>0&&c.jsx("div",{className:"grid grid-cols-4 gap-2 mb-3",children:o.images.map((y,x)=>c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:y,alt:` ${x+1}`,className:"w-full h-16 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:()=>g(x),className:"absolute top-1 left-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Ba,{className:"w-3 h-3"})})]},x))}),c.jsxs("button",{type:"button",onClick:f,className:"w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-xl hover:border-brand-blue transition-colors flex items-center justify-center gap-2 text-gray-600 hover:text-brand-blue text-sm",children:[c.jsx(FI,{className:"w-4 h-4"}),c.jsx("span",{children:" "})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Te,{type:"submit",variant:"gradient",className:"flex-1",children:n?" ":" "}),c.jsx(Te,{type:"button",variant:"outline",onClick:e,children:""})]})]})]})})}function dS(){const{properties:t,units:e,deleteProperty:n}=zn();ni();const[r,s]=E.useState(""),[a,o]=E.useState("all"),[u,d]=E.useState(!1),[f,g]=E.useState(null),y=_=>{const k=e.filter(M=>M.propertyId===_),R=k.length,j=k.filter(M=>M.status==="rented").length,D=R>0?Math.round(j/R*100):0;return{total:R,rented:j,occupancy:D}},x=t.filter(_=>{const k=_.name.toLowerCase().includes(r.toLowerCase())||_.city.toLowerCase().includes(r.toLowerCase()),R=a==="all"||_.city===a;return k&&R}),T=["all",...Array.from(new Set(t.map(_=>_.city)))],I=_=>{g(_),d(!0)},N=_=>{const k=t.find(j=>j.id===_),R=e.filter(j=>j.propertyId===_);if(R.length>0){ot.error(`   "${k?.name}"    ${R.length} `);return}confirm(`     "${k?.name}"`)&&(n(_),ot.success("   "))};return c.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["    (",t.length," )"]})}),c.jsxs(Te,{onClick:()=>{g(null),d(!0)},variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[c.jsx(Li,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 lg:gap-4",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Vi,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),c.jsx("input",{type:"text",placeholder:"  ...",value:r,onChange:_=>s(_.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all text-sm lg:text-base"})]}),c.jsxs("select",{value:a,onChange:_=>o(_.target.value),className:"px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white transition-all text-sm lg:text-base",children:[c.jsx("option",{value:"all",children:" "}),T.filter(_=>_!=="all").map(_=>c.jsx("option",{value:_,children:_},_))]})]})}),x.length>0?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:x.map((_,k)=>{const R=y(_.id);return c.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.05},className:"bg-white rounded-xl lg:rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 group",children:[c.jsxs("div",{className:"relative h-36 sm:h-40 lg:h-48 overflow-hidden",children:[c.jsx("img",{src:_.images[0]||"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800",alt:_.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),c.jsxs("div",{className:"absolute bottom-3 lg:bottom-4 right-3 lg:right-4 left-3 lg:left-4",children:[c.jsx("h3",{className:"text-white font-bold text-base lg:text-lg mb-1",children:_.name}),c.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-xs lg:text-sm",children:[c.jsx(Sd,{className:"w-3 h-3 lg:w-4 lg:h-4"}),c.jsx("span",{children:_.city})]})]}),c.jsx("div",{className:"absolute top-3 lg:top-4 left-3 lg:left-4",children:c.jsx("span",{className:"px-2 lg:px-3 py-1 bg-white/90 backdrop-blur rounded-full text-[10px] lg:text-xs font-medium text-brand-dark",children:_.type==="building"?"":_.type==="villa"?"":_.type==="complex"?"":""})})]}),c.jsxs("div",{className:"p-3 lg:p-5",children:[c.jsx("p",{className:"text-gray-500 text-xs lg:text-sm mb-3 lg:mb-4 line-clamp-2",children:_.address}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 lg:gap-3 mb-3 lg:mb-4",children:[c.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-base lg:text-lg font-bold text-brand-dark",children:R.total}),c.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:""})]}),c.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-green-50 rounded-lg",children:[c.jsx("div",{className:"text-base lg:text-lg font-bold text-green-600",children:R.rented}),c.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:""})]}),c.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-blue-50 rounded-lg",children:[c.jsxs("div",{className:"text-base lg:text-lg font-bold text-brand-blue",children:[R.occupancy,"%"]}),c.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:""})]})]}),c.jsxs("div",{className:"flex items-center justify-between pt-3 lg:pt-4 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>I(_.id),className:"p-1.5 lg:p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg transition-colors",title:"",children:c.jsx(zo,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>N(_.id),className:"p-1.5 lg:p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:c.jsx(Fi,{className:"w-4 h-4"})})]}),c.jsx(Ke,{to:`/app/units?property=${_.id}`,children:c.jsxs(Te,{variant:"outline",size:"sm",className:"text-xs lg:text-sm px-2 lg:px-3",children:[c.jsx(ps,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1"}),""]})})]})]})]},_.id)})}):c.jsxs("div",{className:"bg-white rounded-xl lg:rounded-2xl shadow-lg p-8 lg:p-12 text-center",children:[c.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(dr,{className:"w-8 h-8 lg:w-10 lg:h-10 text-gray-400"})}),c.jsx("h3",{className:"text-lg lg:text-xl font-bold text-gray-700 mb-2",children:"  "}),c.jsx("p",{className:"text-sm lg:text-base text-gray-500 mb-6",children:r||a!=="all"?"    ":"   "}),!r&&a==="all"&&c.jsxs(Te,{onClick:()=>{g(null),d(!0)},variant:"gradient",children:[c.jsx(Li,{className:"w-5 h-5 ml-2"}),"  "]})]}),c.jsx(fG,{isOpen:u,onClose:()=>{d(!1),g(null)},propertyId:f})]})}const mG=[{value:"apartment",label:""},{value:"studio",label:""},{value:"office",label:""},{value:"shop",label:" "},{value:"warehouse",label:""},{value:"villa",label:""}];function pG({isOpen:t,onClose:e,propertyId:n,unitId:r}){const{units:s,properties:a,addUnit:o,updateUnit:u}=zn(),[d,f]=E.useState({propertyId:n||"",unitNo:"",type:"apartment",floor:"",rentAmount:0,status:"vacant",areaSqm:0,bedrooms:0,bathrooms:0}),g=a.find(x=>x.id===d.propertyId);E.useEffect(()=>{if(r){const x=s.find(T=>T.id===r);x&&f({propertyId:x.propertyId,unitNo:x.unitNo,type:x.type,floor:x.floor||"",rentAmount:x.rentAmount,status:x.status,areaSqm:x.areaSqm||0,bedrooms:x.bedrooms||0,bathrooms:x.bathrooms||0})}else n&&f(x=>({...x,propertyId:n}))},[r,n,s,t]);const y=x=>{if(x.preventDefault(),!d.propertyId||!d.unitNo){ot.error("    ");return}const T={propertyId:d.propertyId,propertyName:g?.name||"",unitNo:d.unitNo,type:d.type,floor:d.floor||void 0,rentAmount:d.rentAmount,status:d.status,areaSqm:d.areaSqm,bedrooms:d.bedrooms,bathrooms:d.bathrooms,images:[]};r?(u(r,T),ot.success("   ")):(o(T),ot.success("   ")),e()};return c.jsx(Vc,{open:t,onOpenChange:e,children:c.jsxs(Fc,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[c.jsx(Uc,{children:c.jsx($c,{children:r?" ":"  "})}),c.jsxs("form",{onSubmit:y,className:"space-y-4 mt-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:d.propertyId,onChange:x=>f({...d,propertyId:x.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",disabled:!!n,children:[c.jsx("option",{value:"",children:" "}),a.map(x=>c.jsxs("option",{value:x.id,children:[x.name," - ",x.city]},x.id))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:d.unitNo,onChange:x=>f({...d,unitNo:x.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:"A-101"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("select",{value:d.type,onChange:x=>f({...d,type:x.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:mG.map(x=>c.jsx("option",{value:x.value,children:x.label},x.value))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("input",{type:"text",value:d.floor,onChange:x=>f({...d,floor:x.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsxs("select",{value:d.status,onChange:x=>f({...d,status:x.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[c.jsx("option",{value:"vacant",children:""}),c.jsx("option",{value:"rented",children:""}),c.jsx("option",{value:"maintenance",children:""})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" (.) ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",min:"0",value:d.rentAmount,onChange:x=>f({...d,rentAmount:parseInt(x.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),c.jsx("input",{type:"number",min:"0",value:d.areaSqm,onChange:x=>f({...d,areaSqm:parseInt(x.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsx("input",{type:"number",min:"0",value:d.bedrooms,onChange:x=>f({...d,bedrooms:parseInt(x.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsx("input",{type:"number",min:"0",value:d.bathrooms,onChange:x=>f({...d,bathrooms:parseInt(x.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Te,{type:"submit",variant:"gradient",className:"flex-1",children:r?" ":" "}),c.jsx(Te,{type:"button",variant:"outline",onClick:e,children:""})]})]})]})})}function Nt(t){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function Si(t){return(typeof t=="string"?new Date(t):t).toLocaleDateString("ar-SA",{year:"numeric",month:"2-digit",day:"2-digit"})}function gG(t){const e=typeof t=="string"?new Date(t):t,r=new Date().getTime()-e.getTime(),s=Math.floor(r/(1e3*60*60*24));return s===0?"":s===1?"":s<7?` ${s} `:s<30?` ${Math.floor(s/7)} `:s<365?` ${Math.floor(s/30)} `:` ${Math.floor(s/365)} `}function _i(t){const e=typeof t=="string"?new Date(t):t,n=new Date,r=e.getTime()-n.getTime();return Math.ceil(r/(1e3*60*60*24))}function hS(){const{units:t,properties:e,contracts:n,deleteUnit:r,updateUnit:s}=zn(),[a]=US(),o=a.get("property")||"all",[u,d]=E.useState(""),[f,g]=E.useState("all"),[y,x]=E.useState(!1),[T,I]=E.useState(null),N=E.useMemo(()=>t.filter(M=>{const z=M.unitNo.toLowerCase().includes(u.toLowerCase())||M.propertyName.toLowerCase().includes(u.toLowerCase()),P=f==="all"||M.status===f,C=o==="all"||M.propertyId===o;return z&&P&&C}),[t,u,f,o]),_=E.useMemo(()=>{const M=o==="all"?t:t.filter(z=>z.propertyId===o);return{total:M.length,rented:M.filter(z=>z.status==="rented").length,vacant:M.filter(z=>z.status==="vacant").length,maintenance:M.filter(z=>z.status==="maintenance").length}},[t,o]),k=M=>{I(M),x(!0)},R=M=>{const z=t.find(C=>C.id===M);if(n.some(C=>C.unitId===M&&C.status==="active")){ot.error(`    "${z?.unitNo}"    `);return}confirm(`      "${z?.unitNo}"`)&&(r(M),ot.success("   "))},j=(M,z)=>{s(M,{status:z}),ot.success("   ")},D=M=>{const P={rented:{bg:"bg-green-100",text:"text-green-700",label:""},vacant:{bg:"bg-amber-100",text:"text-amber-700",label:""},maintenance:{bg:"bg-red-100",text:"text-red-700",label:""}}[M];return c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.bg} ${P.text}`,children:P.label})};return e.find(M=>M.id===o),c.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["   (",N.length,"  ",_.total,")"]})}),c.jsxs(Te,{onClick:()=>{I(null),x(!0)},variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[c.jsx(Li,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 lg:gap-4",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4 text-center",children:[c.jsx("div",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:_.total}),c.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4 text-center",children:[c.jsx("div",{className:"text-xl lg:text-2xl font-bold text-green-600",children:_.rented}),c.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:""})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4 text-center",children:[c.jsx("div",{className:"text-xl lg:text-2xl font-bold text-amber-600",children:_.vacant}),c.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:""})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4 text-center",children:[c.jsx("div",{className:"text-xl lg:text-2xl font-bold text-red-600",children:_.maintenance}),c.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:""})]})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:c.jsxs("div",{className:"space-y-3 lg:space-y-0 lg:grid lg:grid-cols-3 lg:gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Vi,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),c.jsx("input",{type:"text",placeholder:"  ...",value:u,onChange:M=>d(M.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base"})]}),c.jsxs("select",{value:o,onChange:M=>window.location.href=`/app/units?property=${M.target.value}`,className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white text-sm lg:text-base",children:[c.jsx("option",{value:"all",children:" "}),e.map(M=>c.jsx("option",{value:M.id,children:M.name},M.id))]}),c.jsx("div",{className:"flex gap-1.5 lg:gap-2 overflow-x-auto pb-1",children:["all","vacant","rented","maintenance"].map(M=>c.jsx("button",{onClick:()=>g(M),className:`flex-1 min-w-fit py-2 px-2 lg:px-3 rounded-xl text-xs lg:text-sm font-medium transition-all whitespace-nowrap ${f===M?"bg-brand-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:M==="all"?"":M==="vacant"?"":M==="rented"?"":""},M))})]})}),c.jsx("div",{className:"lg:hidden space-y-3",children:N.map((M,z)=>c.jsxs(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:z*.02},className:"bg-white rounded-xl shadow p-4",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-light flex items-center justify-center",children:c.jsx(ps,{className:"w-5 h-5 text-brand-blue"})}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-900",children:M.unitNo}),M.floor&&c.jsxs("span",{className:"text-xs text-gray-400 block",children:[" ",M.floor]})]})]}),D(M.status)]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-500",children:":"}),c.jsx("span",{className:"text-gray-700",children:M.propertyName})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-500",children:":"}),c.jsxs("span",{className:"text-gray-700",children:[M.bedrooms&&`${M.bedrooms} `,M.bathrooms&&`  ${M.bathrooms} `,M.areaSqm&&`  ${M.areaSqm} `]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-500",children:":"}),c.jsx("span",{className:"font-bold text-brand-dark",children:Nt(M.rentAmount)})]})]}),c.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100",children:[c.jsxs("select",{value:M.status,onChange:P=>j(M.id,P.target.value),className:`text-xs font-medium rounded-lg px-2 py-1.5 border-0 ${M.status==="rented"?"bg-green-100 text-green-700":M.status==="vacant"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[c.jsx("option",{value:"vacant",children:""}),c.jsx("option",{value:"rented",children:""}),c.jsx("option",{value:"maintenance",children:""})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>k(M.id),className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg transition-colors",title:"",children:c.jsx(zo,{className:"w-4 h-4"})}),M.status==="vacant"&&c.jsx(Ke,{to:`/app/contracts?unit=${M.id}`,children:c.jsx("button",{className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ",children:c.jsx(vs,{className:"w-4 h-4"})})}),c.jsx("button",{onClick:()=>R(M.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:c.jsx(Fi,{className:"w-4 h-4"})})]})]})]},M.id))}),c.jsxs("div",{className:"hidden lg:block bg-white rounded-xl shadow-lg overflow-hidden",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:" "}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map((M,z)=>c.jsxs(Qe.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:z*.02},className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-light flex items-center justify-center",children:c.jsx(ps,{className:"w-5 h-5 text-brand-blue"})}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-900",children:M.unitNo}),M.floor&&c.jsxs("span",{className:"text-xs text-gray-400 block",children:[" ",M.floor]})]})]})}),c.jsx("td",{className:"px-6 py-4 text-gray-600",children:M.propertyName}),c.jsx("td",{className:"px-6 py-4 text-gray-600",children:c.jsxs("div",{className:"text-sm",children:[M.bedrooms&&c.jsxs("span",{children:[M.bedrooms," "]}),M.bathrooms&&c.jsxs("span",{className:"mr-2",children:[" ",M.bathrooms," "]}),M.areaSqm&&c.jsxs("span",{className:"mr-2",children:[" ",M.areaSqm," "]})]})}),c.jsx("td",{className:"px-6 py-4 font-bold text-brand-dark",children:Nt(M.rentAmount)}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("select",{value:M.status,onChange:P=>j(M.id,P.target.value),className:`text-xs font-medium rounded-lg px-2 py-1 border-0 ${M.status==="rented"?"bg-green-100 text-green-700":M.status==="vacant"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[c.jsx("option",{value:"vacant",children:""}),c.jsx("option",{value:"rented",children:""}),c.jsx("option",{value:"maintenance",children:""})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>k(M.id),className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg transition-colors",title:"",children:c.jsx(zo,{className:"w-4 h-4"})}),M.status==="vacant"&&c.jsx(Ke,{to:`/app/contracts?unit=${M.id}`,children:c.jsx("button",{className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ",children:c.jsx(vs,{className:"w-4 h-4"})})}),c.jsx("button",{onClick:()=>R(M.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:c.jsx(Fi,{className:"w-4 h-4"})})]})})]},M.id))})]})}),N.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(ps,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-gray-500",children:"  "}),(u||f!=="all")&&c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"   "})]})]}),N.length===0&&c.jsxs("div",{className:"lg:hidden text-center py-12 bg-white rounded-xl shadow",children:[c.jsx(ps,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-gray-500",children:"  "}),(u||f!=="all")&&c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"   "})]}),c.jsx(pG,{isOpen:y,onClose:()=>{x(!1),I(null)},propertyId:o!=="all"?o:"",unitId:T})]})}function fS(){const{tenants:t,contracts:e,payments:n,addTenant:r,updateTenant:s,deleteTenant:a}=zn(),[o,u]=E.useState(""),[d,f]=E.useState(!1),[g,y]=E.useState(null),[x,T]=E.useState({fullName:"",phone:"",email:"",nationalId:""}),I=t.filter(j=>j.fullName.toLowerCase().includes(o.toLowerCase())||j.phone.includes(o)||j.nationalId&&j.nationalId.includes(o)),N=j=>{const D=e.filter(L=>L.tenantId===j),M=D.filter(L=>L.status==="active"),P=n.filter(L=>D.some(U=>U.id===L.contractId)).filter(L=>L.status==="overdue"),C=P.reduce((L,U)=>L+U.amount,0);return{activeContracts:M.length,totalContracts:D.length,overdueCount:P.length,overdueAmount:C}},_=j=>{j?(y(j),T({fullName:j.fullName,phone:j.phone,email:j.email||"",nationalId:j.nationalId||""})):(y(null),T({fullName:"",phone:"",email:"",nationalId:""})),f(!0)},k=j=>{if(j.preventDefault(),!x.fullName||!x.phone){ot.error("    ");return}g?(s(g.id,x),ot.success("   ")):(r(x),ot.success("   ")),f(!1),y(null)},R=j=>{if(N(j.id).activeContracts>0){ot.error(`   "${j.fullName}"    `);return}confirm(`     "${j.fullName}"`)&&(a(j.id),ot.success("   "))};return c.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["   (",t.length," )"]})}),c.jsxs(Te,{onClick:()=>_(),variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[c.jsx(Li,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:c.jsxs("div",{className:"relative",children:[c.jsx(Vi,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),c.jsx("input",{type:"text",placeholder:"      ...",value:o,onChange:j=>u(j.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all text-sm lg:text-base"})]})}),I.length>0?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:I.map((j,D)=>{const M=N(j.id);return c.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:D*.05},className:"bg-white rounded-xl lg:rounded-2xl shadow-lg p-4 lg:p-6 hover:shadow-xl transition-all",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3 lg:mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[c.jsx("div",{className:"w-10 h-10 lg:w-12 lg:h-12 rounded-full bg-gradient-to-br from-brand-blue to-brand-purple flex items-center justify-center text-white font-bold text-base lg:text-lg",children:j.fullName.charAt(0)}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h3",{className:"font-bold text-brand-dark text-sm lg:text-base truncate",children:j.fullName}),j.nationalId&&c.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-400",children:[": ",j.nationalId]})]})]}),M.overdueCount>0&&c.jsxs("span",{className:"px-1.5 lg:px-2 py-0.5 lg:py-1 bg-red-100 text-red-600 text-[10px] lg:text-xs font-medium rounded-full flex-shrink-0",children:[M.overdueCount," "]})]}),c.jsxs("div",{className:"space-y-1.5 lg:space-y-2 mb-3 lg:mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs lg:text-sm text-gray-600",children:[c.jsx(Wd,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-gray-400 flex-shrink-0"}),c.jsx("span",{dir:"ltr",className:"truncate",children:j.phone})]}),j.email&&c.jsxs("div",{className:"flex items-center gap-2 text-xs lg:text-sm text-gray-600",children:[c.jsx(Wa,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-gray-400 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:j.email})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:gap-3 mb-3 lg:mb-4 pt-3 lg:pt-4 border-t border-gray-100",children:[c.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-base lg:text-lg font-bold text-brand-dark",children:M.activeContracts}),c.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:" "})]}),c.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-base lg:text-lg font-bold text-brand-dark",children:M.totalContracts}),c.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:" "})]})]}),c.jsxs("div",{className:"flex items-center justify-between pt-3 lg:pt-4 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>_(j),className:"p-1.5 lg:p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg transition-colors",title:"",children:c.jsx(zo,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>R(j),className:"p-1.5 lg:p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:c.jsx(Fi,{className:"w-4 h-4"})})]}),c.jsx(Ke,{to:`/app/contracts?tenant=${j.id}`,children:c.jsxs(Te,{variant:"outline",size:"sm",className:"text-xs lg:text-sm px-2 lg:px-3",children:[c.jsx(vs,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1"}),""]})})]})]},j.id)})}):c.jsxs("div",{className:"bg-white rounded-xl lg:rounded-2xl shadow-lg p-8 lg:p-12 text-center",children:[c.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Hd,{className:"w-8 h-8 lg:w-10 lg:h-10 text-gray-400"})}),c.jsx("h3",{className:"text-lg lg:text-xl font-bold text-gray-700 mb-2",children:"  "}),c.jsx("p",{className:"text-sm lg:text-base text-gray-500 mb-6",children:o?"    ":"   "}),!o&&c.jsxs(Te,{onClick:()=>_(),variant:"gradient",children:[c.jsx(Li,{className:"w-5 h-5 ml-2"}),"  "]})]}),c.jsx(Vc,{open:d,onOpenChange:f,children:c.jsxs(Fc,{className:"max-w-[95vw] sm:max-w-md mx-auto",children:[c.jsx(Uc,{children:c.jsx($c,{className:"text-base lg:text-lg",children:g?"  ":"  "})}),c.jsxs("form",{onSubmit:k,className:"space-y-3 lg:space-y-4 mt-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:["  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:x.fullName,onChange:j=>T({...x,fullName:j.target.value}),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:":   "})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:["  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"tel",value:x.phone,onChange:j=>T({...x,phone:j.target.value}),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:"05XXXXXXXX",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsx("input",{type:"email",value:x.email,onChange:j=>T({...x,email:j.target.value}),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:"example@email.com",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:"  "}),c.jsx("input",{type:"text",value:x.nationalId,onChange:j=>T({...x,nationalId:j.target.value}),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:"11XXXXXXXX",dir:"ltr"})]}),c.jsxs("div",{className:"flex gap-2 lg:gap-3 pt-4",children:[c.jsx(Te,{type:"submit",variant:"gradient",className:"flex-1 text-sm lg:text-base py-2.5 lg:py-3",children:g?" ":" "}),c.jsx(Te,{type:"button",variant:"outline",onClick:()=>f(!1),className:"text-sm lg:text-base",children:""})]})]})]})})]})}function yG({isOpen:t,onClose:e,contractId:n,preselectedUnitId:r}){const{contracts:s,units:a,tenants:o,addContract:u,updateContract:d}=zn(),[f,g]=E.useState({tenantId:"",unitId:"",startDate:"",endDate:"",rentAmount:0,paymentFrequency:"monthly",status:"active",deposit:0,notes:""}),y=n?a:a.filter(I=>I.status==="vacant");E.useEffect(()=>{if(n){const I=s.find(N=>N.id===n);I&&g({tenantId:I.tenantId,unitId:I.unitId,startDate:I.startDate,endDate:I.endDate,rentAmount:I.rentAmount,paymentFrequency:I.paymentFrequency,status:I.status,deposit:I.deposit||0,notes:I.notes||""})}else{const I=r?a.find(N=>N.id===r):null;g({tenantId:"",unitId:r||"",startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],rentAmount:I?.rentAmount||0,paymentFrequency:"monthly",status:"active",deposit:0,notes:""})}},[n,r,s,a,t]);const x=I=>{const N=a.find(_=>_.id===I);N&&g({...f,unitId:I,rentAmount:N.rentAmount})},T=I=>{if(I.preventDefault(),!f.tenantId||!f.unitId){ot.error("   ");return}if(!f.startDate||!f.endDate){ot.error("   ");return}if(new Date(f.endDate)<=new Date(f.startDate)){ot.error("       ");return}n?(d(n,f),ot.success("   ")):(u(f),ot.success("    ")),e()};return c.jsx(Vc,{open:t,onOpenChange:e,children:c.jsxs(Fc,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[c.jsx(Uc,{children:c.jsx($c,{children:n?" ":"  "})}),c.jsxs("form",{onSubmit:T,className:"space-y-4 mt-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:f.tenantId,onChange:I=>g({...f,tenantId:I.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[c.jsx("option",{value:"",children:" "}),o.map(I=>c.jsxs("option",{value:I.id,children:[I.fullName," - ",I.phone]},I.id))]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:f.unitId,onChange:I=>x(I.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",disabled:!!n,children:[c.jsx("option",{value:"",children:" "}),y.map(I=>c.jsxs("option",{value:I.id,children:[I.propertyName," - ",I.unitNo," (",I.rentAmount.toLocaleString()," .)"]},I.id))]}),!n&&y.length===0&&c.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"   .    ."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",value:f.startDate,onChange:I=>g({...f,startDate:I.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",value:f.endDate,onChange:I=>g({...f,endDate:I.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  (.) ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",min:"0",value:f.rentAmount,onChange:I=>g({...f,rentAmount:parseInt(I.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:f.paymentFrequency,onChange:I=>g({...f,paymentFrequency:I.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[c.jsx("option",{value:"monthly",children:""}),c.jsx("option",{value:"quarterly",children:" "}),c.jsx("option",{value:"yearly",children:""})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  (.)"}),c.jsx("input",{type:"number",min:"0",value:f.deposit,onChange:I=>g({...f,deposit:parseInt(I.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("textarea",{value:f.notes,onChange:I=>g({...f,notes:I.target.value}),rows:2,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:"  ..."})]}),!n&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 text-sm text-blue-700",children:"          "}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Te,{type:"submit",variant:"gradient",className:"flex-1",children:n?" ":" "}),c.jsx(Te,{type:"button",variant:"outline",onClick:e,children:""})]})]})]})})}function mS(){const{contracts:t,deleteContract:e,updateContract:n}=zn(),[r]=US(),s=r.get("tenant")||"all",a=r.get("unit")||"all",[o,u]=E.useState(""),[d,f]=E.useState("all"),[g,y]=E.useState(!1),[x,T]=E.useState(null),[I,N]=E.useState(a!=="all"?a:null),_=E.useMemo(()=>t.filter(D=>{const M=D.tenantName.toLowerCase().includes(o.toLowerCase())||D.propertyName.toLowerCase().includes(o.toLowerCase())||D.unitNo.toLowerCase().includes(o.toLowerCase()),z=d==="all"||D.status===d,P=s==="all"||D.tenantId===s,C=a==="all"||D.unitId===a;return M&&z&&P&&C}),[t,o,d,s,a]),k=E.useMemo(()=>({total:t.length,active:t.filter(D=>D.status==="active").length,expiringSoon:t.filter(D=>{const M=_i(D.endDate);return D.status==="active"&&M>=0&&M<=30}).length,totalMonthlyRent:t.filter(D=>D.status==="active").reduce((D,M)=>{let z=M.rentAmount;return M.paymentFrequency==="quarterly"&&(z/=3),M.paymentFrequency==="semi_annual"&&(z/=6),M.paymentFrequency==="monthly"&&(z/=12),D+z},0)}),[t]),R=async D=>{if(window.confirm("           ."))try{await n(D,{status:"ended"}),ot.success("   ")}catch{ot.error("    ")}},j=async D=>{if(window.confirm("       "))try{await e(D),ot.success("   ")}catch{ot.error("    ")}};return c.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["   (",t.length," )"]})}),c.jsxs(Te,{onClick:()=>{T(null),N(a!=="all"?a:null),y(!0)},variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[c.jsx(Li,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 lg:gap-4",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:[c.jsx("div",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:k.total}),c.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:[c.jsx("div",{className:"text-xl lg:text-2xl font-bold text-green-600",children:k.active}),c.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:[c.jsx("div",{className:"text-xl lg:text-2xl font-bold text-amber-600",children:k.expiringSoon}),c.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:[c.jsx("div",{className:"text-sm lg:text-lg font-bold text-brand-dark",children:Nt(k.totalMonthlyRent)}),c.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:c.jsxs("div",{className:"space-y-3 lg:space-y-0 lg:grid lg:grid-cols-2 lg:gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Vi,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),c.jsx("input",{type:"text",placeholder:"   ...",value:o,onChange:D=>u(D.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base"})]}),c.jsx("div",{className:"flex gap-1.5 lg:gap-2",children:["all","active","ended"].map(D=>c.jsx("button",{onClick:()=>f(D),className:`flex-1 py-2 px-2 rounded-xl text-xs lg:text-sm font-medium transition-all ${d===D?"bg-brand-blue text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:D==="all"?"":D==="active"?"":""},D))})]})}),c.jsx("div",{className:"lg:hidden space-y-3",children:_.map((D,M)=>{const z=_i(D.endDate);return c.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:M*.02},className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-brand-blue to-brand-purple flex items-center justify-center text-white font-bold text-sm",children:D.tenantName.charAt(0)}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900 text-sm",children:D.tenantName}),c.jsxs("p",{className:"text-xs text-gray-500",children:[D.propertyName," - ",D.unitNo]})]})]}),c.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${D.status==="active"?"bg-green-100 text-green-700":D.status==="ended"?"bg-gray-100 text-gray-700":"bg-amber-100 text-amber-700"}`,children:D.status==="active"?"":D.status==="ended"?"":""})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 text-xs",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:" "}),c.jsx("p",{className:"font-medium",children:Si(D.startDate)}),c.jsxs("p",{className:"text-gray-400",children:[" ",Si(D.endDate)]}),D.status==="active"&&c.jsx("span",{className:`${z<30?"text-red-600":z<90?"text-amber-600":"text-green-600"}`,children:z>0?` ${z} `:""})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:""}),c.jsx("p",{className:"font-bold text-brand-dark",children:Nt(D.rentAmount)}),c.jsx("p",{className:"text-gray-400",children:D.paymentFrequency==="monthly"?"":D.paymentFrequency==="quarterly"?" ":""})]})]}),c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ke,{to:`/app/payments?contract=${D.id}`,children:c.jsx("button",{className:"p-1.5 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg",children:c.jsx(Hr,{className:"w-4 h-4"})})}),c.jsx("button",{onClick:()=>{T(D.id),y(!0)},className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",children:c.jsx(zo,{className:"w-4 h-4"})}),D.status==="active"&&c.jsx("button",{onClick:()=>R(D.id),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg",children:c.jsx(km,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>j(D.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg",children:c.jsx(Fi,{className:"w-4 h-4"})})]}),c.jsx(Ke,{to:`/app/payments?contract=${D.id}`,children:c.jsxs(Te,{variant:"outline",size:"sm",className:"text-xs px-2",children:[c.jsx(Hr,{className:"w-3 h-3 ml-1"}),""]})})]})]},D.id)})}),c.jsxs("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:" / "}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:" "}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map((D,M)=>{const z=_i(D.endDate);return c.jsxs(Qe.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:M*.02},className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-blue to-brand-purple flex items-center justify-center text-white font-bold",children:D.tenantName.charAt(0)}),c.jsx("div",{children:c.jsx("p",{className:"font-medium text-gray-900",children:D.tenantName})})]})}),c.jsxs("td",{className:"px-6 py-4",children:[c.jsx("p",{className:"text-gray-900",children:D.propertyName}),c.jsxs("p",{className:"text-sm text-gray-500",children:[" ",D.unitNo]})]}),c.jsxs("td",{className:"px-6 py-4",children:[c.jsx("p",{className:"text-sm text-gray-600",children:Si(D.startDate)}),c.jsxs("p",{className:"text-sm text-gray-600",children:[" ",Si(D.endDate)]}),D.status==="active"&&c.jsx("span",{className:`text-xs ${z<30?"text-red-600":z<90?"text-amber-600":"text-green-600"}`,children:z>0?` ${z} `:""})]}),c.jsxs("td",{className:"px-6 py-4",children:[c.jsx("p",{className:"font-bold text-brand-dark",children:Nt(D.rentAmount)}),c.jsx("p",{className:"text-xs text-gray-400",children:D.paymentFrequency==="monthly"?"":D.paymentFrequency==="quarterly"?" ":""})]}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D.status==="active"?"bg-green-100 text-green-700":D.status==="ended"?"bg-gray-100 text-gray-700":"bg-amber-100 text-amber-700"}`,children:D.status==="active"?"":D.status==="ended"?"":""})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ke,{to:`/app/payments?contract=${D.id}`,children:c.jsx("button",{className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg",title:"",children:c.jsx(Hr,{className:"w-4 h-4"})})}),c.jsx("button",{onClick:()=>{T(D.id),y(!0)},className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",title:"",children:c.jsx(zo,{className:"w-4 h-4"})}),D.status==="active"&&c.jsx("button",{onClick:()=>R(D.id),className:"p-2 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg",title:" ",children:c.jsx(km,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>j(D.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg",title:"",children:c.jsx(Fi,{className:"w-4 h-4"})})]})})]},D.id)})})]})}),_.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(vs,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-gray-500",children:"  "})]})]}),_.length===0&&c.jsxs("div",{className:"lg:hidden text-center py-12 bg-white rounded-xl shadow border border-gray-100",children:[c.jsx(vs,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-gray-500",children:"  "})]}),c.jsx(yG,{isOpen:g,onClose:()=>{y(!1),T(null),N(null)},contractId:x,preselectedUnitId:I})]})}function pS(){const{payments:t,recordPayment:e}=zn(),[n,r]=E.useState(""),[s,a]=E.useState("all"),[o,u]=E.useState(null),[d,f]=E.useState(!1),[g,y]=E.useState("bank"),[x,T]=E.useState(""),I=E.useMemo(()=>t.filter(j=>{const D=j.tenantName.toLowerCase().includes(n.toLowerCase())||j.unitNo.toLowerCase().includes(n.toLowerCase()),M=s==="all"||j.status===s;return D&&M}).sort((j,D)=>{const M={overdue:0,due:1,paid:2};return M[j.status]!==M[D.status]?M[j.status]-M[D.status]:new Date(j.dueDate).getTime()-new Date(D.dueDate).getTime()}),[t,n,s]),N=E.useMemo(()=>{const j=t.filter(z=>z.status==="paid"),D=t.filter(z=>z.status==="due"),M=t.filter(z=>z.status==="overdue");return{paidCount:j.length,paidAmount:j.reduce((z,P)=>z+P.amount,0),dueCount:D.length,dueAmount:D.reduce((z,P)=>z+P.amount,0),overdueCount:M.length,overdueAmount:M.reduce((z,P)=>z+P.amount,0)}},[t]),_=()=>{o&&(e(o.id,g,x||void 0),ot.success("   "),f(!1),u(null),T(""))},k=j=>{u(j),y("bank"),T(""),f(!0)},R=j=>{const M={paid:{bg:"bg-green-100",text:"text-green-700",label:"",icon:Mo},due:{bg:"bg-amber-100",text:"text-amber-700",label:"",icon:Td},overdue:{bg:"bg-red-100",text:"text-red-700",label:"",icon:xc}}[j];return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${M.bg} ${M.text}`,children:[c.jsx(M.icon,{className:"w-3 h-3"}),M.label]})};return c.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[c.jsx("div",{children:c.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"   "})}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 lg:gap-4",children:[c.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 lg:gap-3",children:[c.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-green-100 flex items-center justify-center",children:c.jsx(Mo,{className:"w-4 h-4 lg:w-5 lg:h-5 text-green-600"})}),c.jsxs("div",{className:"text-center sm:text-right",children:[c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""}),c.jsx("p",{className:"text-sm lg:text-lg font-bold text-brand-dark",children:Nt(N.paidAmount)}),c.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-400",children:[N.paidCount," "]})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 lg:gap-3",children:[c.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-amber-100 flex items-center justify-center",children:c.jsx(Td,{className:"w-4 h-4 lg:w-5 lg:h-5 text-amber-600"})}),c.jsxs("div",{className:"text-center sm:text-right",children:[c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""}),c.jsx("p",{className:"text-sm lg:text-lg font-bold text-brand-dark",children:Nt(N.dueAmount)}),c.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-400",children:[N.dueCount," "]})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 lg:gap-3",children:[c.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-red-100 flex items-center justify-center",children:c.jsx(xc,{className:"w-4 h-4 lg:w-5 lg:h-5 text-red-600"})}),c.jsxs("div",{className:"text-center sm:text-right",children:[c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""}),c.jsx("p",{className:"text-sm lg:text-lg font-bold text-red-600",children:Nt(N.overdueAmount)}),c.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-400",children:[N.overdueCount," "]})]})]})})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:c.jsxs("div",{className:"space-y-3 lg:space-y-0 lg:grid lg:grid-cols-2 lg:gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Vi,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),c.jsx("input",{type:"text",placeholder:"   ...",value:n,onChange:j=>r(j.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base"})]}),c.jsx("div",{className:"flex gap-1.5 lg:gap-2 overflow-x-auto pb-1",children:["all","overdue","due","paid"].map(j=>c.jsx("button",{onClick:()=>a(j),className:`flex-1 min-w-fit py-2 px-2 lg:px-3 rounded-xl text-xs lg:text-sm font-medium transition-all whitespace-nowrap ${s===j?"bg-brand-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:j==="all"?"":j==="overdue"?"":j==="due"?"":""},j))})]})}),c.jsx("div",{className:"lg:hidden space-y-3",children:I.slice(0,50).map((j,D)=>c.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:D*.02},className:"bg-white rounded-xl shadow p-4",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900 text-sm",children:j.tenantName}),c.jsx("p",{className:"text-xs text-gray-500",children:j.unitNo})]}),R(j.status)]}),c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:""}),c.jsx("p",{className:"font-bold text-brand-dark",children:Nt(j.amount)})]}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-xs text-gray-500",children:" "}),c.jsx("p",{className:"text-sm text-gray-600",children:Si(j.dueDate)}),j.status!=="paid"&&c.jsx("span",{className:`text-[10px] ${j.status==="overdue"?"text-red-500":"text-amber-500"}`,children:_i(j.dueDate)<0?` ${Math.abs(_i(j.dueDate))} `:` ${_i(j.dueDate)} `})]})]}),c.jsx("div",{className:"pt-3 border-t border-gray-100",children:j.status!=="paid"?c.jsxs(Te,{size:"sm",variant:"gradient",onClick:()=>k(j),className:"w-full text-sm",children:[c.jsx(Hr,{className:"w-4 h-4 ml-1"})," "]}):c.jsx("span",{className:"block text-center text-sm text-gray-400",children:j.method==="cash"?"":j.method==="bank"?" ":" "})})]},j.id))}),c.jsxs("div",{className:"hidden lg:block bg-white rounded-xl shadow-lg overflow-hidden",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:" "}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:I.slice(0,50).map((j,D)=>c.jsxs(Qe.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:D*.02},className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:"font-medium text-gray-900",children:j.tenantName})}),c.jsx("td",{className:"px-6 py-4 text-gray-600",children:j.unitNo}),c.jsx("td",{className:"px-6 py-4 font-bold text-brand-dark",children:Nt(j.amount)}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:Si(j.dueDate)}),j.status!=="paid"&&c.jsx("span",{className:`block text-xs ${j.status==="overdue"?"text-red-500":"text-amber-500"}`,children:_i(j.dueDate)<0?` ${Math.abs(_i(j.dueDate))} `:` ${_i(j.dueDate)} `})]})}),c.jsx("td",{className:"px-6 py-4",children:R(j.status)}),c.jsx("td",{className:"px-6 py-4",children:j.status!=="paid"?c.jsxs(Te,{size:"sm",variant:"gradient",onClick:()=>k(j),children:[c.jsx(Hr,{className:"w-4 h-4 ml-1"})," "]}):c.jsx("span",{className:"text-sm text-gray-400",children:j.method==="cash"?"":j.method==="bank"?" ":" "})})]},j.id))})]})}),I.length===0&&c.jsxs("div",{className:"text-center py-12 text-gray-500",children:[c.jsx(Im,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{children:"    "})]})]}),I.length===0&&c.jsxs("div",{className:"lg:hidden text-center py-12 bg-white rounded-xl shadow text-gray-500",children:[c.jsx(Im,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{children:"    "})]}),c.jsx(Vc,{open:d,onOpenChange:f,children:c.jsxs(Fc,{className:"max-w-[95vw] sm:max-w-md mx-auto",children:[c.jsx(Uc,{children:c.jsx($c,{className:"text-base lg:text-lg",children:" "})}),o&&c.jsxs("div",{className:"space-y-3 lg:space-y-4 mt-4",children:[c.jsx("div",{className:"bg-gray-50 rounded-xl p-3 lg:p-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3 lg:gap-4 text-xs lg:text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:":"}),c.jsx("p",{className:"font-medium",children:o.tenantName})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:":"}),c.jsx("p",{className:"font-medium",children:o.unitNo})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:":"}),c.jsx("p",{className:"font-bold text-brand-dark",children:Nt(o.amount)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:" :"}),c.jsx("p",{className:"font-medium",children:Si(o.dueDate)})]})]})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-2",children:" "}),c.jsx("div",{className:"grid grid-cols-3 gap-1.5 lg:gap-2",children:[{value:"bank",label:" "},{value:"cash",label:""},{value:"online",label:" "}].map(j=>c.jsx("button",{type:"button",onClick:()=>y(j.value),className:`py-2 px-2 lg:px-3 rounded-lg text-xs lg:text-sm font-medium transition-all ${g===j.value?"bg-brand-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:j.label},j.value))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:"  ()"}),c.jsx("input",{type:"text",value:x,onChange:j=>T(j.target.value),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:"   ",dir:"ltr"})]}),c.jsxs("div",{className:"flex gap-2 lg:gap-3 pt-4",children:[c.jsxs(Te,{onClick:_,variant:"gradient",className:"flex-1 text-sm lg:text-base",children:[c.jsx(Mo,{className:"w-4 h-4 ml-2"})," "]}),c.jsx(Te,{variant:"outline",onClick:()=>f(!1),className:"text-sm lg:text-base",children:""})]})]})]})})]})}function vG({isOpen:t,onClose:e,ticketId:n}){const{maintenanceRequests:r,units:s,properties:a,addMaintenanceRequest:o,updateMaintenanceRequest:u}=zn(),[d,f]=E.useState({propertyId:"",unitId:"",title:"",description:"",status:"new",priority:"medium",assignedTo:"",cost:0});E.useEffect(()=>{if(n){const N=r.find(_=>_.id===n);N&&f({propertyId:N.propertyId,unitId:N.unitId||"",title:N.title,description:N.description,status:N.status,priority:N.priority,assignedTo:N.assignedTo||"",cost:N.cost||0})}else f({propertyId:"",unitId:"",title:"",description:"",status:"new",priority:"medium",assignedTo:"",cost:0})},[n,r,t]);const g=N=>{f({...d,propertyId:N,unitId:""})},y=N=>s.filter(_=>_.propertyId===N),x=N=>a.find(_=>_.id===N)?.name||"",T=N=>s.find(_=>_.id===N)?.unitNo,I=N=>{if(N.preventDefault(),!d.propertyId||!d.title){ot.error("    ");return}const _={propertyId:d.propertyId,propertyName:x(d.propertyId),unitId:d.unitId||void 0,unitNo:d.unitId?T(d.unitId):void 0,title:d.title,description:d.description,status:d.status,priority:d.priority,assignedTo:d.assignedTo||void 0,cost:d.cost,requestedBy:"admin"};n?(u(n,_),ot.success("   ")):(o(_),ot.success("   ")),e()};return c.jsx(Vc,{open:t,onOpenChange:e,children:c.jsxs(Fc,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[c.jsx(Uc,{children:c.jsx($c,{children:n?"  ":"  "})}),c.jsxs("form",{onSubmit:I,className:"space-y-4 mt-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:d.propertyId,onChange:N=>g(N.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[c.jsx("option",{value:"",children:" "}),a.map(N=>c.jsxs("option",{value:N.id,children:[N.name," - ",N.city]},N.id))]})]}),d.propertyId&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),c.jsxs("select",{value:d.unitId,onChange:N=>f({...d,unitId:N.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[c.jsx("option",{value:"",children:"  "}),y(d.propertyId).map(N=>c.jsx("option",{value:N.id,children:N.unitNo},N.id))]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:d.title,onChange:N=>f({...d,title:N.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:":   "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("textarea",{value:d.description,onChange:N=>f({...d,description:N.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:"  ..."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsxs("select",{value:d.priority,onChange:N=>f({...d,priority:N.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[c.jsx("option",{value:"low",children:""}),c.jsx("option",{value:"medium",children:""}),c.jsx("option",{value:"high",children:""}),c.jsx("option",{value:"urgent",children:""})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsxs("select",{value:d.status,onChange:N=>f({...d,status:N.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[c.jsx("option",{value:"new",children:""}),c.jsx("option",{value:"in_progress",children:" "}),c.jsx("option",{value:"done",children:""}),c.jsx("option",{value:"canceled",children:""})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("input",{type:"text",value:d.assignedTo,onChange:N=>f({...d,assignedTo:N.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:" "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (.)"}),c.jsx("input",{type:"number",min:"0",value:d.cost,onChange:N=>f({...d,cost:parseInt(N.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Te,{type:"submit",variant:"gradient",className:"flex-1",children:n?" ":" "}),c.jsx(Te,{type:"button",variant:"outline",onClick:e,children:""})]})]})]})})}function gS(){const{maintenanceRequests:t,updateMaintenanceRequest:e,deleteMaintenanceRequest:n,properties:r}=zn(),[s,a]=E.useState(!1),[o,u]=E.useState(null),[d,f]=E.useState("all"),[g,y]=E.useState("all"),x=E.useMemo(()=>({new:t.filter(k=>k.status==="new").length,in_progress:t.filter(k=>k.status==="in_progress").length,done:t.filter(k=>k.status==="done").length,totalCost:t.reduce((k,R)=>k+R.cost,0)}),[t]),T=E.useMemo(()=>t.filter(k=>{const R=d==="all"||k.status===d,j=g==="all"||k.priority===g;return R&&j}).sort((k,R)=>{const j={urgent:0,high:1,medium:2,low:3};return j[k.priority]!==j[R.priority]?j[k.priority]-j[R.priority]:new Date(R.createdAt).getTime()-new Date(k.createdAt).getTime()}),[t,d,g]),I=(k,R)=>{e(k,{status:R}),ot.success(R==="done"?"   ":"  ")},N=k=>{const j={urgent:{bg:"bg-red-100",text:"text-red-700",label:""},high:{bg:"bg-orange-100",text:"text-orange-700",label:""},medium:{bg:"bg-amber-100",text:"text-amber-700",label:""},low:{bg:"bg-gray-100",text:"text-gray-700",label:""}}[k];return c.jsx("span",{className:`px-1.5 lg:px-2 py-0.5 lg:py-1 rounded-full text-[10px] lg:text-xs font-medium ${j.bg} ${j.text}`,children:j.label})},_=k=>({new:c.jsx(xc,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-amber-500"}),in_progress:c.jsx(Td,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-blue-500"}),done:c.jsx(Mo,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-green-500"}),canceled:c.jsx(Nz,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-gray-400"})})[k];return c.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["    (",t.length," )"]})}),c.jsxs(Te,{onClick:()=>{u(null),a(!0)},variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[c.jsx(Li,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 lg:gap-4",children:[c.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:c.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[c.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-amber-100 flex items-center justify-center",children:c.jsx(xc,{className:"w-4 h-4 lg:w-5 lg:h-5 text-amber-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:x.new}),c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:c.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[c.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:c.jsx(Td,{className:"w-4 h-4 lg:w-5 lg:h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:x.in_progress}),c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:" "})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:c.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[c.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-green-100 flex items-center justify-center",children:c.jsx(Mo,{className:"w-4 h-4 lg:w-5 lg:h-5 text-green-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:x.done}),c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})]})]})}),c.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:c.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[c.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:c.jsx($i,{className:"w-4 h-4 lg:w-5 lg:h-5 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm lg:text-lg font-bold text-brand-dark",children:Nt(x.totalCost)}),c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:" "})]})]})})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:c.jsxs("div",{className:"space-y-3 lg:space-y-0 lg:grid lg:grid-cols-2 lg:gap-4",children:[c.jsx("div",{className:"flex gap-1.5 lg:gap-2 overflow-x-auto pb-1",children:["all","new","in_progress","done"].map(k=>c.jsx("button",{onClick:()=>f(k),className:`flex-1 min-w-fit py-2 px-2 rounded-xl text-xs lg:text-sm font-medium transition-all whitespace-nowrap ${d===k?"bg-brand-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:k==="all"?"":k==="new"?"":k==="in_progress"?" ":""},k))}),c.jsx("div",{className:"flex gap-1.5 lg:gap-2 overflow-x-auto pb-1",children:["all","urgent","high","medium","low"].map(k=>c.jsx("button",{onClick:()=>y(k),className:`flex-1 min-w-fit py-2 px-2 rounded-xl text-xs lg:text-sm font-medium transition-all whitespace-nowrap ${g===k?"bg-brand-dark text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:k==="all"?"":k==="urgent"?"":k==="high"?"":k==="medium"?"":""},k))})]})}),c.jsx("div",{className:"space-y-3 lg:space-y-4",children:T.map((k,R)=>c.jsx(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:R*.03},className:`bg-white rounded-xl shadow-lg p-3 lg:p-5 border-r-4 ${k.priority==="urgent"?"border-red-500":k.priority==="high"?"border-orange-500":k.priority==="medium"?"border-amber-500":"border-gray-300"}`,children:c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3 lg:gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 lg:gap-3 mb-2",children:[_(k.status),c.jsx("h3",{className:"font-bold text-brand-dark text-sm lg:text-base",children:k.title}),N(k.priority)]}),c.jsx("p",{className:"text-xs lg:text-sm text-gray-500 mb-2 line-clamp-2",children:k.description}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 lg:gap-4 text-[10px] lg:text-xs text-gray-400",children:[c.jsx("span",{children:k.propertyName}),k.unitNo&&c.jsxs("span",{children:["  ",k.unitNo]}),c.jsxs("span",{children:[" ",gG(k.createdAt)]}),k.assignedTo&&c.jsxs("span",{className:"hidden sm:inline",children:[" : ",k.assignedTo]})]})]}),c.jsxs("div",{className:"flex items-center justify-between lg:justify-end gap-2 lg:gap-4 pt-3 lg:pt-0 border-t lg:border-0 border-gray-100",children:[k.cost>0&&c.jsxs("div",{className:"text-right lg:text-left",children:[c.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400",children:""}),c.jsx("p",{className:"font-bold text-brand-dark text-sm lg:text-base",children:Nt(k.cost)})]}),c.jsxs("select",{value:k.status,onChange:j=>I(k.id,j.target.value),className:"text-xs lg:text-sm rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[c.jsx("option",{value:"new",children:""}),c.jsx("option",{value:"in_progress",children:" "}),c.jsx("option",{value:"done",children:""}),c.jsx("option",{value:"canceled",children:""})]}),c.jsxs(Te,{size:"sm",variant:"outline",onClick:()=>{u(k.id),a(!0)},className:"text-xs lg:text-sm px-2 lg:px-3",children:[c.jsx(zo,{className:"w-3 h-3 lg:w-4 lg:h-4 lg:ml-1"}),c.jsx("span",{className:"hidden lg:inline",children:""})]})]})]})},k.id))}),T.length===0&&c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 lg:p-12 text-center",children:[c.jsx($i,{className:"w-10 h-10 lg:w-12 lg:h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-sm lg:text-base text-gray-500",children:"   "})]}),c.jsx(vG,{isOpen:s,onClose:()=>{a(!1),u(null)},ticketId:o})]})}function yS(t){const e=xG(t),n=E.forwardRef((r,s)=>{const{children:a,...o}=r,u=E.Children.toArray(a),d=u.find(bG);if(d){const f=d.props.children,g=u.map(y=>y===d?E.Children.count(f)>1?E.Children.only(null):E.isValidElement(f)?f.props.children:null:y);return c.jsx(e,{...o,ref:s,children:E.isValidElement(f)?E.cloneElement(f,void 0,g):null})}return c.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}function xG(t){const e=E.forwardRef((n,r)=>{const{children:s,...a}=n;if(E.isValidElement(s)){const o=EG(s),u=_G(a,s.props);return s.type!==E.Fragment&&(u.ref=r?ip(r,o):o),E.cloneElement(s,u)}return E.Children.count(s)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var wG=Symbol("radix.slottable");function bG(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===wG}function _G(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{const d=a(...u);return s(...u),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function EG(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function TG(t){const e=t+"CollectionProvider",[n,r]=ap(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=N=>{const{scope:_,children:k}=N,R=de.useRef(null),j=de.useRef(new Map).current;return c.jsx(s,{scope:_,itemMap:j,collectionRef:R,children:k})};o.displayName=e;const u=t+"CollectionSlot",d=yS(u),f=de.forwardRef((N,_)=>{const{scope:k,children:R}=N,j=a(u,k),D=ei(_,j.collectionRef);return c.jsx(d,{ref:D,children:R})});f.displayName=u;const g=t+"CollectionItemSlot",y="data-radix-collection-item",x=yS(g),T=de.forwardRef((N,_)=>{const{scope:k,children:R,...j}=N,D=de.useRef(null),M=ei(_,D),z=a(g,k);return de.useEffect(()=>(z.itemMap.set(D,{ref:D,...j}),()=>void z.itemMap.delete(D))),c.jsx(x,{[y]:"",ref:M,children:R})});T.displayName=g;function I(N){const _=a(t+"CollectionConsumer",N);return de.useCallback(()=>{const R=_.collectionRef.current;if(!R)return[];const j=Array.from(R.querySelectorAll(`[${y}]`));return Array.from(_.itemMap.values()).sort((z,P)=>j.indexOf(z.ref.current)-j.indexOf(P.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:f,ItemSlot:T},I,r]}var SG=E.createContext(void 0);function jC(t){const e=E.useContext(SG);return t||e||"ltr"}var Ly="rovingFocusGroup.onEntryFocus",NG={bubbles:!1,cancelable:!0},Gd="RovingFocusGroup",[tv,IC,kG]=TG(Gd),[jG,CC]=ap(Gd,[kG]),[IG,CG]=jG(Gd),AC=E.forwardRef((t,e)=>c.jsx(tv.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(tv.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(AG,{...t,ref:e})})}));AC.displayName=Gd;var AG=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,...y}=t,x=E.useRef(null),T=ei(e,x),I=jC(a),[N,_]=Qx({prop:o,defaultProp:u??null,onChange:d,caller:Gd}),[k,R]=E.useState(!1),j=wc(f),D=IC(n),M=E.useRef(!1),[z,P]=E.useState(0);return E.useEffect(()=>{const C=x.current;if(C)return C.addEventListener(Ly,j),()=>C.removeEventListener(Ly,j)},[j]),c.jsx(IG,{scope:n,orientation:r,dir:I,loop:s,currentTabStopId:N,onItemFocus:E.useCallback(C=>_(C),[_]),onItemShiftTab:E.useCallback(()=>R(!0),[]),onFocusableItemAdd:E.useCallback(()=>P(C=>C+1),[]),onFocusableItemRemove:E.useCallback(()=>P(C=>C-1),[]),children:c.jsx(Xn.div,{tabIndex:k||z===0?-1:0,"data-orientation":r,...y,ref:T,style:{outline:"none",...t.style},onMouseDown:jn(t.onMouseDown,()=>{M.current=!0}),onFocus:jn(t.onFocus,C=>{const L=!M.current;if(C.target===C.currentTarget&&L&&!k){const U=new CustomEvent(Ly,NG);if(C.currentTarget.dispatchEvent(U),!U.defaultPrevented){const $=D().filter(le=>le.focusable),q=$.find(le=>le.active),V=$.find(le=>le.id===N),Q=[q,V,...$].filter(Boolean).map(le=>le.ref.current);DC(Q,g)}}M.current=!1}),onBlur:jn(t.onBlur,()=>R(!1))})})}),RC="RovingFocusGroupItem",PC=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...u}=t,d=ed(),f=a||d,g=CG(RC,n),y=g.currentTabStopId===f,x=IC(n),{onFocusableItemAdd:T,onFocusableItemRemove:I,currentTabStopId:N}=g;return E.useEffect(()=>{if(r)return T(),()=>I()},[r,T,I]),c.jsx(tv.ItemSlot,{scope:n,id:f,focusable:r,active:s,children:c.jsx(Xn.span,{tabIndex:y?0:-1,"data-orientation":g.orientation,...u,ref:e,onMouseDown:jn(t.onMouseDown,_=>{r?g.onItemFocus(f):_.preventDefault()}),onFocus:jn(t.onFocus,()=>g.onItemFocus(f)),onKeyDown:jn(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){g.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const k=DG(_,g.orientation,g.dir);if(k!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let j=x().filter(D=>D.focusable).map(D=>D.ref.current);if(k==="last")j.reverse();else if(k==="prev"||k==="next"){k==="prev"&&j.reverse();const D=j.indexOf(_.currentTarget);j=g.loop?OG(j,D+1):j.slice(D+1)}setTimeout(()=>DC(j))}}),children:typeof o=="function"?o({isCurrentTabStop:y,hasTabStop:N!=null}):o})})});PC.displayName=RC;var RG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function PG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function DG(t,e,n){const r=PG(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return RG[r]}function DC(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function OG(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var MG=AC,LG=PC,cp="Tabs",[VG]=ap(cp,[CC]),OC=CC(),[FG,ew]=VG(cp),MC=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:u,activationMode:d="automatic",...f}=t,g=jC(u),[y,x]=Qx({prop:r,onChange:s,defaultProp:a??"",caller:cp});return c.jsx(FG,{scope:n,baseId:ed(),value:y,onValueChange:x,orientation:o,dir:g,activationMode:d,children:c.jsx(Xn.div,{dir:g,"data-orientation":o,...f,ref:e})})});MC.displayName=cp;var LC="TabsList",VC=E.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=ew(LC,n),o=OC(n);return c.jsx(MG,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:c.jsx(Xn.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});VC.displayName=LC;var FC="TabsTrigger",UC=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=ew(FC,n),u=OC(n),d=zC(o.baseId,r),f=qC(o.baseId,r),g=r===o.value;return c.jsx(LG,{asChild:!0,...u,focusable:!s,active:g,children:c.jsx(Xn.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...a,ref:e,onMouseDown:jn(t.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?o.onValueChange(r):y.preventDefault()}),onKeyDown:jn(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&o.onValueChange(r)}),onFocus:jn(t.onFocus,()=>{const y=o.activationMode!=="manual";!g&&!s&&y&&o.onValueChange(r)})})})});UC.displayName=FC;var $C="TabsContent",BC=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,u=ew($C,n),d=zC(u.baseId,r),f=qC(u.baseId,r),g=r===u.value,y=E.useRef(g);return E.useEffect(()=>{const x=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(x)},[]),c.jsx(Kd,{present:s||g,children:({present:x})=>c.jsx(Xn.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!x,id:f,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:x&&a})})});BC.displayName=$C;function zC(t,e){return`${t}-trigger-${e}`}function qC(t,e){return`${t}-content-${e}`}var UG=MC,$G=VC,BG=UC,zG=BC;function qG({className:t,...e}){return c.jsx(UG,{"data-slot":"tabs",className:Ha("flex flex-col gap-2",t),...e})}function WG({className:t,...e}){return c.jsx($G,{"data-slot":"tabs-list",className:Ha("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...e})}function If({className:t,...e}){return c.jsx(BG,{"data-slot":"tabs-trigger",className:Ha("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function Cf({className:t,...e}){return c.jsx(zG,{"data-slot":"tabs-content",className:Ha("flex-1 outline-none",t),...e})}function vS(){const{properties:t,units:e,contracts:n,payments:r,maintenanceRequests:s}=zn(),[a,o]=E.useState(""),[u,d]=E.useState(""),[f,g]=E.useState("all"),y=E.useMemo(()=>r.filter(_=>_.status==="overdue").sort((_,k)=>new Date(_.dueDate).getTime()-new Date(k.dueDate).getTime()),[r]),x=E.useMemo(()=>t.map(_=>{const k=e.filter(C=>C.propertyId===_.id),R=k.length,j=k.filter(C=>C.status==="rented").length,D=k.filter(C=>C.status==="vacant").length,M=k.filter(C=>C.status==="maintenance").length,z=R>0?Math.round(j/R*100):0,P=n.filter(C=>C.propertyId===_.id&&C.status==="active").reduce((C,L)=>L.paymentFrequency==="monthly"?C+L.rentAmount:L.paymentFrequency==="quarterly"?C+L.rentAmount/3:L.paymentFrequency==="yearly"?C+L.rentAmount/12:C,0);return{..._,total:R,rented:j,vacant:D,maintenance:M,occupancy:z,monthlyIncome:P}}),[t,e,n]),T=E.useMemo(()=>{const _=r.filter(R=>R.status==="paid"&&R.paidAt),k={};return _.forEach(R=>{const j=new Date(R.paidAt),D=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}`;k[D]=(k[D]||0)+R.amount}),Object.entries(k).sort(([R],[j])=>j.localeCompare(R)).slice(0,12).map(([R,j])=>({month:R,amount:j}))},[r]),I=E.useMemo(()=>{const _={};return s.forEach(k=>{_[k.propertyId]||(_[k.propertyId]={count:0,cost:0,name:k.propertyName}),_[k.propertyId].count++,_[k.propertyId].cost+=k.cost}),Object.entries(_).map(([k,R])=>({propertyId:k,...R})).sort((k,R)=>R.cost-k.cost)},[s]),N=(_,k,R)=>{const j=[R.join(","),..._.map(z=>R.map(P=>z[P]||"").join(","))].join(`
`),D=new Blob(["\uFEFF"+j],{type:"text/csv;charset=utf-8;"}),M=document.createElement("a");M.href=URL.createObjectURL(D),M.download=`${k}_${new Date().toISOString().split("T")[0]}.csv`,M.click(),ot.success("   ")};return c.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[c.jsx("div",{className:"mb-4 lg:mb-8",children:c.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"      "})}),c.jsxs(qG,{defaultValue:"overdue",className:"space-y-4 lg:space-y-6",children:[c.jsxs(WG,{className:"bg-white shadow rounded-xl p-1 w-full grid grid-cols-2 lg:grid-cols-4 gap-1",children:[c.jsxs(If,{value:"overdue",className:"flex items-center justify-center gap-1 lg:gap-2 text-xs lg:text-sm py-2",children:[c.jsx(xc,{className:"w-3 h-3 lg:w-4 lg:h-4"}),c.jsx("span",{children:""})]}),c.jsxs(If,{value:"occupancy",className:"flex items-center justify-center gap-1 lg:gap-2 text-xs lg:text-sm py-2",children:[c.jsx(dr,{className:"w-3 h-3 lg:w-4 lg:h-4"}),c.jsx("span",{children:""})]}),c.jsxs(If,{value:"income",className:"flex items-center justify-center gap-1 lg:gap-2 text-xs lg:text-sm py-2",children:[c.jsx(Hx,{className:"w-3 h-3 lg:w-4 lg:h-4"}),c.jsx("span",{children:""})]}),c.jsxs(If,{value:"maintenance",className:"flex items-center justify-center gap-1 lg:gap-2 text-xs lg:text-sm py-2",children:[c.jsx($i,{className:"w-3 h-3 lg:w-4 lg:h-4"}),c.jsx("span",{children:""})]})]}),c.jsx(Cf,{value:"overdue",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 lg:p-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 lg:mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:" "}),c.jsxs("p",{className:"text-xs lg:text-sm text-gray-500",children:[y.length,"    ",Nt(y.reduce((_,k)=>_+k.amount,0))]})]}),c.jsxs(Te,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs lg:text-sm",onClick:()=>N(y.map(_=>({tenantName:_.tenantName,unitNo:_.unitNo,amount:_.amount,dueDate:_.dueDate})),"overdue_payments",["tenantName","unitNo","amount","dueDate"]),children:[c.jsx(wf,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1 lg:ml-2"})," CSV"]})]}),c.jsx("div",{className:"lg:hidden space-y-3",children:y.map(_=>{const k=Math.abs(Math.floor((new Date().getTime()-new Date(_.dueDate).getTime())/864e5));return c.jsxs("div",{className:"border border-gray-100 rounded-xl p-3",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm",children:_.tenantName}),c.jsx("p",{className:"text-xs text-gray-500",children:_.unitNo})]}),c.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-[10px] font-medium",children:[k," "]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-xs text-gray-500",children:Si(_.dueDate)}),c.jsx("span",{className:"font-bold text-red-600 text-sm",children:Nt(_.amount)})]})]},_.id)})}),c.jsx("div",{className:"hidden lg:block overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "}),c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:y.map(_=>{const k=Math.abs(Math.floor((new Date().getTime()-new Date(_.dueDate).getTime())/864e5));return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium",children:_.tenantName}),c.jsx("td",{className:"px-4 py-3 text-gray-600",children:_.unitNo}),c.jsx("td",{className:"px-4 py-3 font-bold text-red-600",children:Nt(_.amount)}),c.jsx("td",{className:"px-4 py-3 text-gray-600",children:Si(_.dueDate)}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:[k," "]})})]},_.id)})})]})}),y.length===0&&c.jsxs("div",{className:"text-center py-8 lg:py-12 text-gray-500",children:[c.jsx(xc,{className:"w-10 h-10 lg:w-12 lg:h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-sm lg:text-base",children:"    "})]})]})}),c.jsx(Cf,{value:"occupancy",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 lg:p-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 lg:mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:" "}),c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:"   "})]}),c.jsxs(Te,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs lg:text-sm",onClick:()=>N(x.map(_=>({name:_.name,city:_.city,total:_.total,rented:_.rented,vacant:_.vacant,occupancy:_.occupancy,monthlyIncome:_.monthlyIncome})),"occupancy_report",["name","city","total","rented","vacant","occupancy","monthlyIncome"]),children:[c.jsx(wf,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1 lg:ml-2"})," CSV"]})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4",children:x.map(_=>c.jsxs("div",{className:"border border-gray-100 rounded-xl p-3 lg:p-4",children:[c.jsx("h3",{className:"font-bold text-brand-dark text-sm lg:text-base mb-1",children:_.name}),c.jsx("p",{className:"text-xs lg:text-sm text-gray-500 mb-3",children:_.city}),c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex justify-between text-xs lg:text-sm mb-1",children:[c.jsx("span",{children:" "}),c.jsxs("span",{className:"font-bold",children:[_.occupancy,"%"]})]}),c.jsx("div",{className:"h-1.5 lg:h-2 bg-gray-200 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full",style:{width:`${_.occupancy}%`}})})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-1.5 lg:gap-2 text-center text-[10px] lg:text-xs",children:[c.jsxs("div",{className:"bg-green-50 rounded p-1.5 lg:p-2",children:[c.jsx("div",{className:"font-bold text-green-600",children:_.rented}),c.jsx("div",{className:"text-gray-500",children:""})]}),c.jsxs("div",{className:"bg-amber-50 rounded p-1.5 lg:p-2",children:[c.jsx("div",{className:"font-bold text-amber-600",children:_.vacant}),c.jsx("div",{className:"text-gray-500",children:""})]}),c.jsxs("div",{className:"bg-gray-50 rounded p-1.5 lg:p-2",children:[c.jsx("div",{className:"font-bold text-gray-600",children:_.maintenance}),c.jsx("div",{className:"text-gray-500",children:""})]})]}),c.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:c.jsxs("div",{className:"flex justify-between text-xs lg:text-sm",children:[c.jsx("span",{className:"text-gray-500",children:" :"}),c.jsx("span",{className:"font-bold text-brand-dark",children:Nt(_.monthlyIncome)})]})})]},_.id))})]})}),c.jsx(Cf,{value:"income",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 lg:p-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 lg:mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:"  "}),c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:"   "})]}),c.jsxs(Te,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs lg:text-sm",onClick:()=>N(T,"income_report",["month","amount"]),children:[c.jsx(wf,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1 lg:ml-2"})," CSV"]})]}),c.jsxs("div",{className:"lg:hidden space-y-2",children:[T.map(_=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"font-medium text-sm",children:_.month}),c.jsx("span",{className:"font-bold text-green-600 text-sm",children:Nt(_.amount)})]},_.month)),c.jsxs("div",{className:"flex justify-between items-center p-3 bg-brand-blue/10 rounded-lg",children:[c.jsx("span",{className:"font-bold text-sm",children:""}),c.jsx("span",{className:"font-bold text-brand-dark text-sm",children:Nt(T.reduce((_,k)=>_+k.amount,0))})]})]}),c.jsx("div",{className:"hidden lg:block overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:T.map(_=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium",children:_.month}),c.jsx("td",{className:"px-4 py-3 font-bold text-green-600",children:Nt(_.amount)})]},_.month))}),c.jsx("tfoot",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 font-bold",children:""}),c.jsx("td",{className:"px-4 py-3 font-bold text-brand-dark",children:Nt(T.reduce((_,k)=>_+k.amount,0))})]})})]})})]})}),c.jsx(Cf,{value:"maintenance",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 lg:p-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 lg:mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:" "}),c.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:"   "})]}),c.jsxs(Te,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs lg:text-sm",onClick:()=>N(I,"maintenance_report",["name","count","cost"]),children:[c.jsx(wf,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1 lg:ml-2"})," CSV"]})]}),c.jsxs("div",{className:"lg:hidden space-y-2",children:[I.map(_=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm",children:_.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[_.count," "]})]}),c.jsx("span",{className:"font-bold text-brand-dark text-sm",children:Nt(_.cost)})]},_.propertyId)),c.jsxs("div",{className:"flex justify-between items-center p-3 bg-brand-blue/10 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-sm",children:""}),c.jsxs("p",{className:"text-xs text-gray-500",children:[I.reduce((_,k)=>_+k.count,0)," "]})]}),c.jsx("span",{className:"font-bold text-brand-dark text-sm",children:Nt(I.reduce((_,k)=>_+k.cost,0))})]})]}),c.jsx("div",{className:"hidden lg:block overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "}),c.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:I.map(_=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium",children:_.name}),c.jsx("td",{className:"px-4 py-3 text-gray-600",children:_.count}),c.jsx("td",{className:"px-4 py-3 font-bold text-brand-dark",children:Nt(_.cost)})]},_.propertyId))}),c.jsx("tfoot",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 font-bold",children:""}),c.jsx("td",{className:"px-4 py-3 font-bold",children:I.reduce((_,k)=>_+k.count,0)}),c.jsx("td",{className:"px-4 py-3 font-bold text-brand-dark",children:Nt(I.reduce((_,k)=>_+k.cost,0))})]})})]})})]})})]})]})}const HG=()=>{const{user:t,subscription:e,logout:n}=ws();if(!t)return null;const r=s=>new Date(s).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"});return c.jsx(ri,{children:c.jsx("div",{className:"min-h-screen pt-24 pb-12 bg-slate-50",children:c.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[c.jsx("h1",{className:"text-3xl font-bold text-brand-dark mb-8",children:" "}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx("div",{className:"md:col-span-1 bg-white rounded-3xl p-6 shadow-sm border border-gray-100 h-fit",children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"w-24 h-24 bg-brand-light rounded-full flex items-center justify-center mb-4 text-brand-blue",children:c.jsx(Hd,{className:"w-10 h-10"})}),c.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:t.displayName||" "}),c.jsx("p",{className:"text-gray-500 text-sm mb-6",children:t.email}),c.jsx(Te,{onClick:n,variant:"outline",className:"w-full text-red-500 border-red-100 hover:bg-red-50 hover:text-red-600",children:" "})]})}),c.jsxs("div",{className:"md:col-span-2 space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-sm border border-gray-100",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-brand-dark flex items-center gap-2",children:[c.jsx(Hr,{className:"w-5 h-5 text-brand-blue"})," "]}),e?.status==="active"?c.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:""}):c.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:"  / "})]}),e?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),c.jsx("p",{className:"font-bold text-brand-dark text-lg",children:e.planName})]}),c.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),c.jsx("p",{className:"font-bold text-brand-blue font-mono text-lg",children:e.code||"---"})]}),c.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),c.jsx("p",{className:"font-bold text-gray-700",children:r(e.startDate)})]}),c.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),c.jsx("p",{className:"font-bold text-gray-700",children:r(e.endDate)})]})]}),c.jsx("div",{className:"pt-4 border-t border-gray-100",children:c.jsx(Ke,{to:"/pricing",children:c.jsx(Te,{className:"w-full",children:"   "})})})]}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-gray-500 mb-4",children:"    "}),c.jsx(Ke,{to:"/pricing",children:c.jsx(Te,{variant:"primary",children:" "})})]})]}),c.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-sm border border-gray-100",children:[c.jsxs("h3",{className:"text-xl font-bold text-brand-dark flex items-center gap-2 mb-4",children:[c.jsx(Wx,{className:"w-5 h-5 text-gray-400"}),""]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-700",children:" "}),c.jsx("p",{className:"text-sm text-gray-400",children:"************"})]}),c.jsx(Ke,{to:"/forgot-password",children:c.jsx(Te,{variant:"outline",size:"sm",children:""})})]})]})]})]})]})})})},KG=()=>{const[t,e]=E.useState(""),[n,r]=E.useState(!1),[s,a]=E.useState(!1),o=async u=>{u.preventDefault(),a(!0),await new Promise(d=>setTimeout(d,1500)),a(!1),r(!0)};return c.jsx(ri,{children:c.jsxs("div",{className:"min-h-screen pt-24 pb-12 flex items-center justify-center bg-slate-50 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-brand-purple/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-brand-blue/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 pointer-events-none"}),c.jsx("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-gray-100 relative z-10 transition-all duration-300",children:n?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-6 text-green-500 animate-in zoom-in duration-300",children:c.jsx(Mo,{className:"w-10 h-10"})}),c.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-3",children:"  !"}),c.jsxs("p",{className:"text-gray-500 mb-8 leading-relaxed",children:["        :",c.jsx("br",{}),c.jsx("span",{className:"font-semibold text-brand-dark",children:t})]}),c.jsx(Ke,{to:"/login",children:c.jsx(Te,{variant:"outline",className:"w-full",children:"  "})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-brand-light rounded-2xl flex items-center justify-center mx-auto mb-4 text-brand-blue",children:c.jsx(Wa,{className:"w-8 h-8"})}),c.jsx("h1",{className:"text-2xl font-bold text-brand-dark mb-2",children:"  "}),c.jsx("p",{className:"text-gray-500 text-sm",children:"        "})]}),c.jsxs("form",{onSubmit:o,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),c.jsx("input",{type:"email",required:!0,value:t,onChange:u=>e(u.target.value),placeholder:"name@company.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all placeholder:text-gray-300"})]}),c.jsx(Te,{disabled:s,variant:"gradient",className:"w-full py-4 text-lg",children:s?" ...":"  "})]}),c.jsx("div",{className:"text-center mt-6",children:c.jsxs(Ke,{to:"/login",className:"text-gray-500 hover:text-brand-dark flex items-center justify-center gap-2 text-sm font-medium transition-colors",children:[c.jsx(nz,{className:"w-4 h-4"}),"  "]})})]})})]})})},Vy={admin:" ",manager:"",accountant:"",maintenance:" ",employee:""},GG={admin:"bg-purple-100 text-purple-700",manager:"bg-blue-100 text-blue-700",accountant:"bg-green-100 text-green-700",maintenance:"bg-orange-100 text-orange-700",employee:"bg-gray-100 text-gray-700"};function YG(){const{employees:t,addEmployee:e,updateEmployee:n,deleteEmployee:r}=zn(),[s,a]=E.useState(""),[o,u]=E.useState(!1),[d,f]=E.useState(null),[g,y]=E.useState("all"),[x,T]=E.useState(!1),[I,N]=E.useState(null),[_,k]=E.useState(null),[R,j]=E.useState(!1),[D,M]=E.useState({fullName:"",email:"",phone:"",role:"employee",department:"",joinDate:new Date().toISOString().split("T")[0],status:"active"}),z=se=>{const Q=se.trim().split(" ")[0].toLowerCase(),le={:"a",:"e",:"a",:"a",:"b",:"t",:"th",:"j",:"h",:"kh",:"d",:"th",:"r",:"z",:"s",:"sh",:"s",:"d",:"t",:"z",:"a",:"gh",:"f",:"q",:"k",:"l",:"m",:"n",:"h",:"w",:"y",:"a",:"a",:""};let me="";for(const ve of Q)me+=le[ve]||ve;const J=Math.floor(Math.random()*100);return`${me}${J}@arkan.sa`},P=()=>{const se="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789",Q="@#$%!";let le="";for(let me=0;me<8;me++)le+=se.charAt(Math.floor(Math.random()*se.length));return le+=Q.charAt(Math.floor(Math.random()*Q.length)),le},C=se=>{switch(se){case"admin":return[{module:"properties",actions:["view","create","edit","delete"]},{module:"units",actions:["view","create","edit","delete"]},{module:"tenants",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view","create","edit","delete"]},{module:"payments",actions:["view","create","edit","delete"]},{module:"maintenance",actions:["view","create","edit","delete"]},{module:"reports",actions:["view"]},{module:"employees",actions:["view","create","edit","delete"]}];case"manager":return[{module:"properties",actions:["view","create","edit"]},{module:"units",actions:["view","create","edit"]},{module:"tenants",actions:["view","create","edit"]},{module:"contracts",actions:["view","create","edit"]},{module:"reports",actions:["view"]}];case"accountant":return[{module:"payments",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view"]},{module:"reports",actions:["view"]},{module:"sales",actions:["view","create","edit","delete"]}];case"maintenance":return[{module:"maintenance",actions:["view","create","edit"]},{module:"units",actions:["view"]},{module:"tasks",actions:["view","edit"]}];default:return[{module:"properties",actions:["view"]},{module:"units",actions:["view"]},{module:"tenants",actions:["view"]}]}},L=async(se,Q)=>{await navigator.clipboard.writeText(se),k(Q),setTimeout(()=>k(null),2e3),ot.success(" !")},U=t.filter(se=>{const Q=se.fullName.includes(s)||se.email.includes(s)||se.phone.includes(s),le=g==="all"||se.role===g;return Q&&le}),$=se=>{se?(f(se),M({fullName:se.fullName,email:se.email,phone:se.phone,role:se.role,department:se.department,joinDate:se.joinDate,status:se.status})):(f(null),M({fullName:"",email:"",phone:"",role:"employee",department:"",joinDate:new Date().toISOString().split("T")[0],status:"active"})),u(!0)},q=se=>{if(se.preventDefault(),d)n(d.id,D),ot.success("   ");else{const Q=D.email||z(D.fullName),le=P(),me=C(D.role);e({...D,email:Q,password:le,permissions:me,isActive:!0}),N({email:Q,password:le,name:D.fullName}),T(!0)}u(!1)},V=se=>{confirm("      ")&&r(se)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-gray-500",children:[t.length,"  "]})}),c.jsxs(Te,{onClick:()=>$(),className:"bg-brand-blue hover:bg-brand-dark text-white",children:[c.jsx(Li,{className:"w-5 h-5 ml-2"})," "]})]}),c.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Vi,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"  ...",value:s,onChange:se=>a(se.target.value),className:"w-full pr-10 pl-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),c.jsxs("select",{value:g,onChange:se=>y(se.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[c.jsx("option",{value:"all",children:" "}),Object.entries(Vy).map(([se,Q])=>c.jsx("option",{value:se,children:Q},se))]})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map((se,Q)=>c.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Q*.05},className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-brand-blue to-brand-purple rounded-full flex items-center justify-center text-white font-bold text-lg",children:se.fullName.charAt(0)}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-brand-dark",children:se.fullName}),c.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${GG[se.role]}`,children:Vy[se.role]})]})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>$(se),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(mq,{className:"w-4 h-4 text-gray-500"})}),c.jsx("button",{onClick:()=>V(se.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(Fi,{className:"w-4 h-4 text-red-500"})})]})]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(dr,{className:"w-4 h-4"}),c.jsx("span",{children:se.department})]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Wa,{className:"w-4 h-4"}),c.jsx("span",{children:se.email})]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Wd,{className:"w-4 h-4"}),c.jsx("span",{dir:"ltr",children:se.phone})]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(km,{className:"w-4 h-4"}),c.jsxs("span",{children:[" : ",new Date(se.joinDate).toLocaleDateString("ar-EG")]})]})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:c.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${se.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:se.status==="active"?"":" "})})]},se.id))}),U.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Tz,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500",children:"  "})]}),c.jsx($a,{children:o&&c.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:d?" ":"  "}),c.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:c.jsx(Ba,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:q,className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsx("input",{type:"text",value:D.fullName,onChange:se=>M({...D,fullName:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsx("input",{type:"email",value:D.email,onChange:se=>M({...D,email:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsx("input",{type:"tel",value:D.phone,onChange:se=>M({...D,phone:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("select",{value:D.role,onChange:se=>M({...D,role:se.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:Object.entries(Vy).map(([se,Q])=>c.jsx("option",{value:se,children:Q},se))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("input",{type:"text",value:D.department,onChange:se=>M({...D,department:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsx("input",{type:"date",value:D.joinDate,onChange:se=>M({...D,joinDate:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsxs("select",{value:D.status,onChange:se=>M({...D,status:se.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[c.jsx("option",{value:"active",children:""}),c.jsx("option",{value:"inactive",children:" "})]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Te,{type:"submit",className:"flex-1 bg-brand-blue hover:bg-brand-dark text-white",children:d?" ":" "}),c.jsx(Te,{type:"button",onClick:()=>u(!1),variant:"outline",className:"flex-1",children:""})]})]})]})})}),c.jsx($a,{children:x&&I&&c.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(hs,{className:"w-8 h-8 text-green-600"})}),c.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:"   !"}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:I.name})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[c.jsxs("p",{className:"text-sm text-blue-700 font-medium mb-3",children:[c.jsx(Jz,{className:"w-4 h-4 inline ml-1"}),"  :"]}),c.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 mb-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:" "}),c.jsx("p",{className:"font-mono text-sm",dir:"ltr",children:I.email})]}),c.jsx("button",{onClick:()=>L(I.email,"email"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:_==="email"?c.jsx(hs,{className:"w-4 h-4 text-green-600"}):c.jsx(zT,{className:"w-4 h-4 text-gray-500"})})]}),c.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:" "}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("p",{className:"font-mono text-sm",dir:"ltr",children:R?I.password:""}),c.jsx("button",{onClick:()=>j(!R),className:"p-1 hover:bg-gray-100 rounded",children:R?c.jsx(OI,{className:"w-4 h-4 text-gray-400"}):c.jsx(MI,{className:"w-4 h-4 text-gray-400"})})]})]}),c.jsx("button",{onClick:()=>L(I.password,"password"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:_==="password"?c.jsx(hs,{className:"w-4 h-4 text-green-600"}):c.jsx(zT,{className:"w-4 h-4 text-gray-500"})})]})]}),c.jsx("p",{className:"text-xs text-gray-400 text-center",children:"          "})]}),c.jsx("div",{className:"p-6 border-t border-gray-100",children:c.jsx(Te,{onClick:()=>{T(!1),N(null),j(!1)},className:"w-full bg-brand-blue hover:bg-brand-dark text-white",children:""})})]})})})]})}const Fy={pending:" ",in_progress:" ",review:"",completed:"",cancelled:""},xS={pending:"bg-yellow-100 text-yellow-700 border-yellow-200",in_progress:"bg-blue-100 text-blue-700 border-blue-200",review:"bg-purple-100 text-purple-700 border-purple-200",completed:"bg-green-100 text-green-700 border-green-200",cancelled:"bg-red-100 text-red-700 border-red-200"},Uy={low:"",medium:"",high:"",urgent:""},wS={low:"bg-gray-100 text-gray-600",medium:"bg-blue-100 text-blue-600",high:"bg-orange-100 text-orange-600",urgent:"bg-red-100 text-red-600"};function bS(){const{tasks:t,employees:e,addTask:n,updateTaskStatus:r,deleteTask:s,transferTask:a}=zn(),[o,u]=E.useState(""),[d,f]=E.useState(!1),[g,y]=E.useState(!1),[x,T]=E.useState(null),[I,N]=E.useState("all"),[_,k]=E.useState("kanban"),[R,j]=E.useState({title:"",description:"",priority:"medium",assignedTo:"",dueDate:new Date().toISOString().split("T")[0]}),[D,M]=E.useState(""),[z,P]=E.useState(""),C=t.filter(Q=>{const le=Q.title.includes(o)||Q.description.includes(o),me=I==="all"||Q.status===I;return le&&me}),L=Q=>{Q.preventDefault();const le=e.find(me=>me.id===R.assignedTo);le&&(n({title:R.title,description:R.description,priority:R.priority,status:"pending",assignedTo:R.assignedTo,assignedToName:le.fullName,createdBy:"emp-1",createdByName:"  ",dueDate:R.dueDate}),f(!1),j({title:"",description:"",priority:"medium",assignedTo:"",dueDate:new Date().toISOString().split("T")[0]}))},U=()=>{if(!x||!D)return;const Q=e.find(le=>le.id===D);Q&&(a(x.id,D,Q.fullName,z),y(!1),M(""),P(""),T(null))},$=(Q,le)=>{r(Q,le)},q=Q=>{confirm("      ")&&s(Q)},V={pending:C.filter(Q=>Q.status==="pending"),in_progress:C.filter(Q=>Q.status==="in_progress"),review:C.filter(Q=>Q.status==="review"),completed:C.filter(Q=>Q.status==="completed")},se=({task:Q})=>c.jsxs(Qe.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-md p-4 mb-3 hover:shadow-lg transition-shadow",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsx("h4",{className:"font-semibold text-brand-dark text-sm",children:Q.title}),c.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${wS[Q.priority]}`,children:Uy[Q.priority]})]}),c.jsx("p",{className:"text-gray-500 text-xs mb-3 line-clamp-2",children:Q.description}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Hd,{className:"w-3 h-3"}),c.jsx("span",{children:Q.assignedToName})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(km,{className:"w-3 h-3"}),c.jsx("span",{children:new Date(Q.dueDate).toLocaleDateString("ar-EG")})]})]}),c.jsxs("div",{className:"flex gap-1 mt-3 pt-3 border-t border-gray-100",children:[c.jsxs("button",{onClick:()=>{T(Q),y(!0)},className:"flex-1 text-xs py-1.5 px-2 bg-gray-50 hover:bg-gray-100 rounded-lg text-gray-600 flex items-center justify-center gap-1",children:[c.jsx(BT,{className:"w-3 h-3"}),""]}),Q.status!=="completed"&&c.jsxs("button",{onClick:()=>$(Q.id,"completed"),className:"flex-1 text-xs py-1.5 px-2 bg-green-50 hover:bg-green-100 rounded-lg text-green-600 flex items-center justify-center gap-1",children:[c.jsx(Q0,{className:"w-3 h-3"}),""]}),c.jsx("button",{onClick:()=>q(Q.id),className:"text-xs py-1.5 px-2 bg-red-50 hover:bg-red-100 rounded-lg text-red-600",children:c.jsx(Fi,{className:"w-3 h-3"})})]})]});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-gray-500",children:[t.length,"   ",t.filter(Q=>Q.status==="pending").length,"  "]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[c.jsx("button",{onClick:()=>k("kanban"),className:`px-4 py-2 rounded-lg text-sm ${_==="kanban"?"bg-white shadow":""}`,children:""}),c.jsx("button",{onClick:()=>k("list"),className:`px-4 py-2 rounded-lg text-sm ${_==="list"?"bg-white shadow":""}`,children:""})]}),c.jsxs(Te,{onClick:()=>f(!0),className:"bg-brand-blue hover:bg-brand-dark text-white",children:[c.jsx(Li,{className:"w-5 h-5 ml-2"})," "]})]})]}),c.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Vi,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"  ...",value:o,onChange:Q=>u(Q.target.value),className:"w-full pr-10 pl-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),c.jsxs("select",{value:I,onChange:Q=>N(Q.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[c.jsx("option",{value:"all",children:" "}),Object.entries(Fy).map(([Q,le])=>c.jsx("option",{value:Q,children:le},Q))]})]})}),_==="kanban"&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:["pending","in_progress","review","completed"].map(Q=>c.jsxs("div",{className:`rounded-2xl p-4 ${xS[Q]} bg-opacity-30`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"font-bold text-brand-dark flex items-center gap-2",children:[Q==="pending"&&c.jsx(Td,{className:"w-4 h-4"}),Q==="in_progress"&&c.jsx(DI,{className:"w-4 h-4"}),Q==="review"&&c.jsx(Vi,{className:"w-4 h-4"}),Q==="completed"&&c.jsx(Q0,{className:"w-4 h-4"}),Fy[Q]]}),c.jsx("span",{className:"text-sm bg-white px-2 py-0.5 rounded-full",children:V[Q].length})]}),c.jsxs("div",{className:"space-y-3",children:[V[Q].map(le=>c.jsx(se,{task:le},le.id)),V[Q].length===0&&c.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"  "})]})]},Q))}),_==="list"&&c.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:C.map(Q=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsxs("td",{className:"px-6 py-4",children:[c.jsx("div",{className:"font-medium text-brand-dark",children:Q.title}),c.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:Q.description})]}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.assignedToName}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${wS[Q.priority]}`,children:Uy[Q.priority]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("select",{value:Q.status,onChange:le=>$(Q.id,le.target.value),className:`text-xs px-2 py-1 rounded-full border ${xS[Q.status]}`,children:Object.entries(Fy).map(([le,me])=>c.jsx("option",{value:le,children:me},le))})}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(Q.dueDate).toLocaleDateString("ar-EG")}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{T(Q),y(!0)},className:"p-2 hover:bg-gray-100 rounded-lg",children:c.jsx(BT,{className:"w-4 h-4 text-gray-500"})}),c.jsx("button",{onClick:()=>q(Q.id),className:"p-2 hover:bg-red-50 rounded-lg",children:c.jsx(Fi,{className:"w-4 h-4 text-red-500"})})]})})]},Q.id))})]})}),c.jsx($a,{children:d&&c.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:"  "}),c.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:c.jsx(Ba,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:L,className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsx("input",{type:"text",value:R.title,onChange:Q=>j({...R,title:Q.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("textarea",{value:R.description,onChange:Q=>j({...R,description:Q.target.value}),rows:3,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsxs("select",{value:R.assignedTo,onChange:Q=>j({...R,assignedTo:Q.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[c.jsx("option",{value:"",children:" "}),e.filter(Q=>Q.status==="active").map(Q=>c.jsx("option",{value:Q.id,children:Q.fullName},Q.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("select",{value:R.priority,onChange:Q=>j({...R,priority:Q.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:Object.entries(Uy).map(([Q,le])=>c.jsx("option",{value:Q,children:le},Q))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsx("input",{type:"date",value:R.dueDate,onChange:Q=>j({...R,dueDate:Q.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Te,{type:"submit",className:"flex-1 bg-brand-blue hover:bg-brand-dark text-white",children:" "}),c.jsx(Te,{type:"button",onClick:()=>f(!1),variant:"outline",className:"flex-1",children:""})]})]})]})})}),c.jsx($a,{children:g&&x&&c.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:" "}),c.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:c.jsx(Ba,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),c.jsx("p",{className:"font-medium text-brand-dark",children:x.title}),c.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[" : ",x.assignedToName]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),c.jsxs("select",{value:D,onChange:Q=>M(Q.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[c.jsx("option",{value:"",children:" "}),e.filter(Q=>Q.status==="active"&&Q.id!==x.assignedTo).map(Q=>c.jsx("option",{value:Q.id,children:Q.fullName},Q.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),c.jsx("textarea",{value:z,onChange:Q=>P(Q.target.value),rows:2,placeholder:"   ...",className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Te,{onClick:U,disabled:!D,className:"flex-1 bg-brand-blue hover:bg-brand-dark text-white",children:""}),c.jsx(Te,{type:"button",onClick:()=>y(!1),variant:"outline",className:"flex-1",children:""})]})]})]})})})]})}function QG(){return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-brand-dark mb-1",children:""}),c.jsx("p",{className:"text-gray-500",children:"  "})]})}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[c.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx(Oc,{className:"w-10 h-10 text-brand-blue"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:""}),c.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"      .     ."})]})]})}function JG(){const t=ni(),{employees:e}=zn(),{setEmployeeSession:n}=ws(),[r,s]=E.useState(""),[a,o]=E.useState(""),[u,d]=E.useState(!1),[f,g]=E.useState(""),[y,x]=E.useState(!1),T=async I=>{I.preventDefault(),g(""),x(!0);const N=e.find(_=>_.email.toLowerCase().trim()===r.toLowerCase().trim());if(console.log("Login Attempt:",{email:r.trim(),found:!!N,status:N?.status,isActive:N?.isActive}),!N){g("   "),x(!1);return}if(!N.isActive){g("  .   "),x(!1);return}if(N.password!==a.trim()){console.log("Password Mismatch:",{inputLength:a.trim().length,storedLength:N.password.length}),g("   "),x(!1);return}n&&n(N),localStorage.setItem("employeeSession",JSON.stringify(N)),x(!1),t("/employee/dashboard")};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-brand-dark to-slate-900 flex items-center justify-center p-4",dir:"rtl",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[c.jsx("div",{className:"absolute top-1/4 -right-1/4 w-96 h-96 bg-brand-blue/20 rounded-full blur-3xl"}),c.jsx("div",{className:"absolute bottom-1/4 -left-1/4 w-96 h-96 bg-brand-purple/20 rounded-full blur-3xl"})]}),c.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative z-10 w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs(Ke,{to:"/",className:"inline-flex items-center gap-3 group",children:[c.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-brand-blue to-brand-purple p-3 shadow-lg group-hover:shadow-brand-blue/30 transition-shadow",children:c.jsx(dr,{className:"w-full h-full text-white"})}),c.jsx("span",{className:"text-3xl font-bold text-white",children:""})]}),c.jsx("p",{className:"mt-4 text-gray-400",children:" "})]}),c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-brand-dark text-center mb-6",children:" "}),c.jsxs("form",{onSubmit:T,className:"space-y-5",children:[f&&c.jsxs(Qe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:[c.jsx(DI,{className:"w-5 h-5 flex-shrink-0"}),c.jsx("span",{children:f})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),c.jsxs("div",{className:"relative",children:[c.jsx(Wa,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"email",value:r,onChange:I=>s(I.target.value),className:"w-full pr-12 pl-4 py-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all",placeholder:"name@arkan.sa",required:!0,dir:"ltr"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),c.jsxs("div",{className:"relative",children:[c.jsx(jm,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:u?"text":"password",value:a,onChange:I=>o(I.target.value),className:"w-full pr-12 pl-12 py-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all",placeholder:"",required:!0,dir:"ltr"}),c.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?c.jsx(OI,{className:"w-5 h-5"}):c.jsx(MI,{className:"w-5 h-5"})})]})]}),c.jsx(Te,{type:"submit",variant:"gradient",className:"w-full py-4 text-lg",disabled:y,children:y?"  ...":" "})]}),c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl",children:[c.jsx("p",{className:"text-sm text-blue-700 font-medium mb-2",children:" :"}),c.jsxs("div",{className:"space-y-1 text-xs text-blue-600",children:[c.jsxs("p",{children:[c.jsx("strong",{children:":"})," khaled@arkan.sa / Khaled@2024"]}),c.jsxs("p",{children:[c.jsx("strong",{children:":"})," mohammed@arkan.sa / Mohammed@2024"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" :"})," fatima@arkan.sa / Fatima@2024"]})]})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx(Ke,{to:"/login",className:"text-sm text-gray-500 hover:text-brand-blue transition-colors",children:"  "})})]})]})]})}const XG=[{name:" ",path:"/employee/dashboard",icon:Zs,module:"properties"},{name:"",path:"/employee/properties",icon:dr,module:"properties"},{name:"",path:"/employee/units",icon:ps,module:"units"},{name:"",path:"/employee/tenants",icon:Ui,module:"tenants"},{name:"",path:"/employee/contracts",icon:vs,module:"contracts"},{name:"",path:"/employee/payments",icon:Hr,module:"payments"},{name:"",path:"/employee/maintenance",icon:$i,module:"maintenance"},{name:"",path:"/employee/sales",icon:Oc,module:"sales"},{name:"",path:"/employee/tasks",icon:qd,module:"tasks"},{name:"",path:"/employee/reports",icon:Zs,module:"reports"}],ZG={properties:"",units:"",tenants:"",contracts:"",payments:"",maintenance:"",reports:"",settings:"",sales:"",employees:"",tasks:""};function eY(){const{currentEmployee:t,employeeLogout:e}=ws(),{employees:n}=zn(),r=ni();ur();const s=E.useMemo(()=>t&&n.find(u=>u.id===t.id)||null,[t,n]);if(E.useEffect(()=>{if(!t){r("/employee/login");return}if(s&&!s.isActive){e(),r("/employee/login");return}t&&!s&&(e(),r("/employee/login"))},[t,s,r,e]),!t||!s)return null;const a=(u,d)=>{const f=s.permissions.find(g=>g.module===u);return f?f.actions.includes(d):!1},o=XG.filter(u=>a(u.module,"view")&&u.path!=="/employee/dashboard");return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-brand-dark mb-1",children:[" ",s.fullName.split(" ")[0],"!"]}),c.jsx("p",{className:"text-gray-500",children:"   "})]})}),c.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-brand-dark mb-4",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.permissions.map(u=>c.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-2 border-b border-gray-200 pb-2",children:ZG[u.module]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:u.actions.map(d=>c.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${d==="view"?"bg-blue-100 text-blue-700":d==="create"?"bg-green-100 text-green-700":d==="edit"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:d==="view"?"":d==="create"?"":d==="edit"?"":""},d))})]},u.module))})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-brand-dark mb-4",children:" "}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map((u,d)=>{const f=u.icon;return c.jsx(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},children:c.jsxs(Ke,{to:u.path,className:"block bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-all group border border-transparent hover:border-brand-blue/20",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-xl flex items-center justify-center mb-3 group-hover:bg-brand-blue/10 transition-colors",children:c.jsx(f,{className:"w-6 h-6 text-gray-600 group-hover:text-brand-blue transition-colors"})}),c.jsx("h3",{className:"font-bold text-gray-800 group-hover:text-brand-dark",children:u.name})]})},u.path)})})]})]})}const $y=[{name:" ",path:"/employee/dashboard",icon:Zs,module:"properties"},{name:"",path:"/employee/properties",icon:dr,module:"properties"},{name:"",path:"/employee/units",icon:ps,module:"units"},{name:"",path:"/employee/tenants",icon:Ui,module:"tenants"},{name:"",path:"/employee/contracts",icon:vs,module:"contracts"},{name:"",path:"/employee/payments",icon:Hr,module:"payments"},{name:"",path:"/employee/maintenance",icon:$i,module:"maintenance"},{name:"",path:"/employee/sales",icon:Oc,module:"sales"},{name:"",path:"/employee/tasks",icon:qd,module:"tasks"},{name:"",path:"/employee/reports",icon:Zs,module:"reports"}];function wi({children:t}){const{pathname:e}=ur(),{currentEmployee:n,employeeLogout:r}=ws(),{employees:s}=zn(),a=ni(),o=E.useMemo(()=>n&&s.find(f=>f.id===n.id)||null,[n,s]);if(!n||!o)return null;const u=(f,g)=>{const y=o.permissions.find(x=>x.module===f);return y?y.actions.includes(g):!1},d=()=>{r(),a("/employee/login")};return c.jsxs("div",{className:"min-h-screen bg-slate-100 font-cairo",dir:"rtl",children:[c.jsxs("aside",{className:"fixed right-0 top-0 h-screen w-64 bg-white shadow-xl z-40 flex flex-col",children:[c.jsx("div",{className:"p-6 border-b border-gray-100",children:c.jsxs(Ke,{to:"/employee/dashboard",className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-brand-blue to-brand-purple rounded-xl flex items-center justify-center",children:c.jsx(dr,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xl font-bold bg-gradient-to-l from-brand-blue to-brand-purple bg-clip-text text-transparent block",children:""}),c.jsx("span",{className:"text-xs text-gray-400",children:" "})]})]})}),c.jsx("nav",{className:"flex-1 py-4 overflow-y-auto",children:c.jsxs("ul",{className:"space-y-1 px-3",children:[$y.filter(f=>u(f.module,"view")).map(f=>{const g=e===f.path;return c.jsx("li",{children:c.jsxs(Ke,{to:f.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${g?"bg-gradient-to-l from-brand-blue to-brand-purple text-white shadow-lg":"text-gray-600 hover:bg-gray-50 hover:text-brand-dark"}`,children:[c.jsx(f.icon,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:f.name}),g&&c.jsx(PI,{className:"w-4 h-4 mr-auto"})]})},f.path)}),c.jsx("div",{className:"my-4 border-t border-gray-100"}),c.jsx("p",{className:"px-4 text-xs text-gray-400 mb-2",children:" "}),$y.filter(f=>!u(f.module,"view")).map(f=>c.jsx("li",{children:c.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 cursor-not-allowed",children:[c.jsx(f.icon,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium flex-1",children:f.name}),c.jsx(jm,{className:"w-4 h-4"})]})},f.path))]})}),c.jsxs("div",{className:"p-4 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3 px-2",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-brand-blue to-brand-purple rounded-full flex items-center justify-center text-white font-bold",children:o.fullName.charAt(0)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium text-brand-dark truncate",children:o.fullName}),c.jsx("p",{className:"text-xs text-gray-400 truncate",children:o.department})]})]}),c.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 px-4 py-2.5 text-red-600 hover:bg-red-50 rounded-xl transition-colors",children:[c.jsx(qx,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:" "})]})]})]}),c.jsxs("div",{className:"mr-64",children:[c.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-30",children:c.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-xl font-bold text-brand-dark",children:$y.find(f=>f.path===e)?.name||" "})}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsx("button",{className:"relative p-2 hover:bg-gray-100 rounded-xl transition-colors",children:c.jsx(RI,{className:"w-5 h-5 text-gray-500"})})})]})}),c.jsx("main",{className:"p-6",children:c.jsx(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:t},e)})]})]})}const _S=[{name:" ",path:"/app",icon:Zs},{name:"",path:"/app/properties",icon:dr},{name:"",path:"/app/units",icon:ps},{name:"",path:"/app/tenants",icon:Ui},{name:"",path:"/app/contracts",icon:vs},{name:"",path:"/app/payments",icon:Hr},{name:"",path:"/app/maintenance",icon:$i},{name:"",path:"/app/sales",icon:Oc},{name:"",path:"/app/employees",icon:Ui},{name:"",path:"/app/tasks",icon:qd},{name:"",path:"/app/reports",icon:Zs},{name:"",path:"/app/settings",icon:_q}];function Er({children:t}){const{pathname:e}=ur(),{user:n,logout:r}=ws(),[s,a]=E.useState(!1),o=()=>a(!1);return c.jsxs("div",{className:"min-h-screen bg-slate-100 font-cairo",dir:"rtl",children:[c.jsx($a,{children:s&&c.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:o,className:"fixed inset-0 bg-black/50 z-40 lg:hidden"})}),c.jsxs("aside",{className:`
                fixed right-0 top-0 h-screen w-72 lg:w-64 bg-white shadow-xl z-50 flex flex-col
                transform transition-transform duration-300 ease-in-out
                ${s?"translate-x-0":"translate-x-full lg:translate-x-0"}
            `,children:[c.jsxs("div",{className:"p-4 lg:p-6 border-b border-gray-100 flex items-center justify-between",children:[c.jsxs(Ke,{to:"/app",className:"flex items-center gap-2",onClick:o,children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-brand-blue to-brand-purple rounded-xl flex items-center justify-center",children:c.jsx(dr,{className:"w-6 h-6 text-white"})}),c.jsx("span",{className:"text-xl lg:text-2xl font-bold bg-gradient-to-l from-brand-blue to-brand-purple bg-clip-text text-transparent",children:""})]}),c.jsx("button",{onClick:o,className:"lg:hidden p-2 hover:bg-gray-100 rounded-xl",children:c.jsx(Ba,{className:"w-5 h-5 text-gray-500"})})]}),c.jsx("p",{className:"px-4 py-2 text-xs text-gray-400 lg:hidden",children:" "}),c.jsx("nav",{className:"flex-1 py-2 lg:py-4 overflow-y-auto",children:c.jsx("ul",{className:"space-y-1 px-2 lg:px-3",children:_S.map(u=>{const d=e===u.path;return c.jsx("li",{children:c.jsxs(Ke,{to:u.path,onClick:o,className:`flex items-center gap-3 px-3 lg:px-4 py-2.5 lg:py-3 rounded-xl transition-all text-sm lg:text-base ${d?"bg-gradient-to-l from-brand-blue to-brand-purple text-white shadow-lg":"text-gray-600 hover:bg-gray-50 hover:text-brand-dark"}`,children:[c.jsx(u.icon,{className:"w-5 h-5 flex-shrink-0"}),c.jsx("span",{className:"font-medium",children:u.name}),d&&c.jsx(PI,{className:"w-4 h-4 mr-auto"})]})},u.path)})})}),c.jsxs("div",{className:"p-3 lg:p-4 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3 px-2",children:[c.jsx("div",{className:"w-9 lg:w-10 h-9 lg:h-10 bg-gradient-to-br from-brand-blue to-brand-purple rounded-full flex items-center justify-center text-white font-bold text-sm lg:text-base flex-shrink-0",children:n?.displayName?.charAt(0)||""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium text-brand-dark truncate text-sm lg:text-base",children:n?.displayName||""}),c.jsx("p",{className:"text-xs text-gray-400 truncate",children:n?.email})]})]}),c.jsxs("button",{onClick:()=>r(),className:"w-full flex items-center gap-3 px-4 py-2.5 text-red-600 hover:bg-red-50 rounded-xl transition-colors",children:[c.jsx(qx,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:" "})]})]})]}),c.jsxs("div",{className:"lg:mr-64",children:[c.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-30",children:c.jsxs("div",{className:"flex items-center justify-between px-4 lg:px-6 py-3 lg:py-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>a(!0),className:"lg:hidden p-2 hover:bg-gray-100 rounded-xl transition-colors",children:c.jsx(LI,{className:"w-6 h-6 text-gray-600"})}),c.jsx("h1",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:_S.find(u=>u.path===e)?.name||" "})]}),c.jsx("div",{className:"flex items-center gap-2 lg:gap-4",children:c.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-xl transition-colors",children:[c.jsx(RI,{className:"w-5 h-5 text-gray-500"}),c.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})})]})}),c.jsx("main",{className:"p-3 lg:p-6",children:c.jsx(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:t},e)})]})]})}function tY(){return c.jsx("div",{dir:"rtl",className:"font-cairo",children:c.jsx(_6,{children:c.jsxs(p$,{children:[c.jsxs(JR,{children:[c.jsx(at,{path:"/",element:c.jsx(DW,{})}),c.jsx(at,{path:"/login",element:c.jsx(UW,{})}),c.jsx(at,{path:"/register",element:c.jsx($W,{})}),c.jsx(at,{path:"/forgot-password",element:c.jsx(KG,{})}),c.jsx(at,{path:"/features",element:c.jsx(OW,{})}),c.jsx(at,{path:"/pricing",element:c.jsx(MW,{})}),c.jsx(at,{path:"/units",element:c.jsx(LW,{})}),c.jsx(at,{path:"/about",element:c.jsx(VW,{})}),c.jsx(at,{path:"/contact",element:c.jsx(FW,{})}),c.jsx(at,{path:"/dashboard",element:c.jsx(zy,{to:"/app",replace:!0})}),c.jsx(at,{path:"/app",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(HW,{})})})}),c.jsx(at,{path:"/app/properties",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(dS,{})})})}),c.jsx(at,{path:"/app/units",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(hS,{})})})}),c.jsx(at,{path:"/app/tenants",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(fS,{})})})}),c.jsx(at,{path:"/app/contracts",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(mS,{})})})}),c.jsx(at,{path:"/app/payments",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(pS,{})})})}),c.jsx(at,{path:"/app/maintenance",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(gS,{})})})}),c.jsx(at,{path:"/app/reports",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(vS,{})})})}),c.jsx(at,{path:"/app/settings",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx("div",{className:"p-6",children:""})})})}),c.jsx(at,{path:"/profile",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(HG,{})})})}),c.jsx(at,{path:"/app/employees",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(YG,{})})})}),c.jsx(at,{path:"/app/tasks",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(bS,{})})})}),c.jsx(at,{path:"/app/sales",element:c.jsx(_r,{children:c.jsx(Er,{children:c.jsx(QG,{})})})}),c.jsx(at,{path:"/employee/login",element:c.jsx(JG,{})}),c.jsx(at,{path:"/employee/dashboard",element:c.jsx(wi,{children:c.jsx(eY,{})})}),c.jsx(at,{path:"/employee/properties",element:c.jsx(wi,{children:c.jsx(dS,{})})}),c.jsx(at,{path:"/employee/units",element:c.jsx(wi,{children:c.jsx(hS,{})})}),c.jsx(at,{path:"/employee/tenants",element:c.jsx(wi,{children:c.jsx(fS,{})})}),c.jsx(at,{path:"/employee/contracts",element:c.jsx(wi,{children:c.jsx(mS,{})})}),c.jsx(at,{path:"/employee/payments",element:c.jsx(wi,{children:c.jsx(pS,{})})}),c.jsx(at,{path:"/employee/maintenance",element:c.jsx(wi,{children:c.jsx(gS,{})})}),c.jsx(at,{path:"/employee/reports",element:c.jsx(wi,{children:c.jsx(vS,{})})}),c.jsx(at,{path:"/employee/tasks",element:c.jsx(wi,{children:c.jsx(bS,{})})})]}),c.jsx(uG,{position:"top-center",richColors:!0})]})})})}class nY extends E.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.hasError?c.jsxs("div",{style:{padding:"20px",color:"red",direction:"ltr"},children:[c.jsx("h1",{children:"Something went wrong."}),c.jsx("pre",{children:this.state.error?.toString()})]}):this.props.children}}iR.createRoot(document.getElementById("root")).render(c.jsx(nY,{children:c.jsx(bP,{basename:"/",children:c.jsx(tY,{})})}));
