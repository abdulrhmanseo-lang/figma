import{c as K,r as n,j as e,m as c,t as P}from"./index-mGwfGQYQ.js";import{B as x}from"./button-obQTf0hL.js";import{P as U}from"./plus-B5-QUGQk.js";import{S as X}from"./search-Sd1l6yxc.js";import{c as h}from"./createLucideIcon-_jMiD3q_.js";import{T as H}from"./trash-2-Duj4ao2x.js";import{B as J}from"./building-2-D4S1PQka.js";import{M as W}from"./mail-8iv_-hcW.js";import{P as Y}from"./phone-D3Iy-cXP.js";import{C as Z}from"./calendar-BCfoPkQF.js";import{A as q}from"./index-CO5ioJ40.js";import{X as ee}from"./x-BRS87iRj.js";import{C as b}from"./check-xDcwErbx.js";import{E as se}from"./eye-off-Dg2pk_7x.js";import{E as te}from"./eye-Dw4GrOfy.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],le=h("circle-user",ae);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],T=h("copy",re);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ie=h("key",ne);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ce=h("pen",oe),f={admin:"مدير النظام",manager:"مدير",accountant:"محاسب",maintenance:"فني صيانة",employee:"موظف"},de={admin:"bg-purple-100 text-purple-700",manager:"bg-blue-100 text-blue-700",accountant:"bg-green-100 text-green-700",maintenance:"bg-orange-100 text-orange-700",employee:"bg-gray-100 text-gray-700"};function Se(){const{employees:j,addEmployee:_,updateEmployee:$,deleteEmployee:z}=K(),[d,A]=n.useState(""),[L,m]=n.useState(!1),[u,y]=n.useState(null),[p,F]=n.useState("all"),[O,v]=n.useState(!1),[o,N]=n.useState(null),[w,k]=n.useState(null),[g,C]=n.useState(!1),[t,r]=n.useState({fullName:"",email:"",phone:"",role:"employee",department:"",joinDate:new Date().toISOString().split("T")[0],status:"active"}),B=s=>{const a=s.trim().split(" ")[0].toLowerCase(),l={أ:"a",إ:"e",آ:"a",ا:"a",ب:"b",ت:"t",ث:"th",ج:"j",ح:"h",خ:"kh",د:"d",ذ:"th",ر:"r",ز:"z",س:"s",ش:"sh",ص:"s",ض:"d",ط:"t",ظ:"z",ع:"a",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"a",ء:""};let i="";for(const M of a)i+=l[M]||M;const G=Math.floor(Math.random()*100);return`${i}${G}@arkan.sa`},R=()=>{const s="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789",a="@#$%!";let l="";for(let i=0;i<8;i++)l+=s.charAt(Math.floor(Math.random()*s.length));return l+=a.charAt(Math.floor(Math.random()*a.length)),l},I=s=>{switch(s){case"admin":return[{module:"properties",actions:["view","create","edit","delete"]},{module:"units",actions:["view","create","edit","delete"]},{module:"tenants",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view","create","edit","delete"]},{module:"payments",actions:["view","create","edit","delete"]},{module:"maintenance",actions:["view","create","edit","delete"]},{module:"reports",actions:["view"]},{module:"employees",actions:["view","create","edit","delete"]}];case"manager":return[{module:"properties",actions:["view","create","edit"]},{module:"units",actions:["view","create","edit"]},{module:"tenants",actions:["view","create","edit"]},{module:"contracts",actions:["view","create","edit"]},{module:"reports",actions:["view"]}];case"accountant":return[{module:"payments",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view"]},{module:"reports",actions:["view"]},{module:"sales",actions:["view","create","edit","delete"]}];case"maintenance":return[{module:"maintenance",actions:["view","create","edit"]},{module:"units",actions:["view"]},{module:"tasks",actions:["view","edit"]}];default:return[{module:"properties",actions:["view"]},{module:"units",actions:["view"]},{module:"tenants",actions:["view"]}]}},S=async(s,a)=>{await navigator.clipboard.writeText(s),k(a),setTimeout(()=>k(null),2e3),P.success("تم النسخ!")},D=j.filter(s=>{const a=s.fullName.includes(d)||s.email.includes(d)||s.phone.includes(d),l=p==="all"||s.role===p;return a&&l}),E=s=>{s?(y(s),r({fullName:s.fullName,email:s.email,phone:s.phone,role:s.role,department:s.department,joinDate:s.joinDate,status:s.status})):(y(null),r({fullName:"",email:"",phone:"",role:"employee",department:"",joinDate:new Date().toISOString().split("T")[0],status:"active"})),m(!0)},Q=s=>{if(s.preventDefault(),u)$(u.id,t),P.success("تم تحديث بيانات الموظف");else{const a=t.email||B(t.fullName),l=R(),i=I(t.role);_({...t,email:a,password:l,permissions:i,isActive:!0}),N({email:a,password:l,name:t.fullName}),v(!0)}m(!1)},V=s=>{confirm("هل أنت متأكد من حذف هذا الموظف؟")&&z(s)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-gray-500",children:[j.length," موظف مسجل"]})}),e.jsxs(x,{onClick:()=>E(),className:"bg-brand-blue hover:bg-brand-dark text-white",children:[e.jsx(U,{className:"w-5 h-5 ml-2"}),"إضافة موظف"]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(X,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"بحث عن موظف...",value:d,onChange:s=>A(s.target.value),className:"w-full pr-10 pl-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),e.jsxs("select",{value:p,onChange:s=>F(s.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[e.jsx("option",{value:"all",children:"جميع الأدوار"}),Object.entries(f).map(([s,a])=>e.jsx("option",{value:s,children:a},s))]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map((s,a)=>e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05},className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-brand-blue to-brand-purple rounded-full flex items-center justify-center text-white font-bold text-lg",children:s.fullName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-brand-dark",children:s.fullName}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${de[s.role]}`,children:f[s.role]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>E(s),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{onClick:()=>V(s.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(H,{className:"w-4 h-4 text-red-500"})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:s.department})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{dir:"ltr",children:s.phone})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsxs("span",{children:["تاريخ الانضمام: ",new Date(s.joinDate).toLocaleDateString("ar-EG")]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${s.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.status==="active"?"نشط":"غير نشط"})})]},s.id))}),D.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(le,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"لا يوجد موظفين"})]}),e.jsx(q,{children:L&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:u?"تعديل موظف":"إضافة موظف جديد"}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:Q,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الكامل"}),e.jsx("input",{type:"text",value:t.fullName,onChange:s=>r({...t,fullName:s.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),e.jsx("input",{type:"email",value:t.email,onChange:s=>r({...t,email:s.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الهاتف"}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>r({...t,phone:s.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الدور"}),e.jsx("select",{value:t.role,onChange:s=>r({...t,role:s.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:Object.entries(f).map(([s,a])=>e.jsx("option",{value:s,children:a},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"القسم"}),e.jsx("input",{type:"text",value:t.department,onChange:s=>r({...t,department:s.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الانضمام"}),e.jsx("input",{type:"date",value:t.joinDate,onChange:s=>r({...t,joinDate:s.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحالة"}),e.jsxs("select",{value:t.status,onChange:s=>r({...t,status:s.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[e.jsx("option",{value:"active",children:"نشط"}),e.jsx("option",{value:"inactive",children:"غير نشط"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(x,{type:"submit",className:"flex-1 bg-brand-blue hover:bg-brand-dark text-white",children:u?"حفظ التعديلات":"إضافة الموظف"}),e.jsx(x,{type:"button",onClick:()=>m(!1),variant:"outline",className:"flex-1",children:"إلغاء"})]})]})]})})}),e.jsx(q,{children:O&&o&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:"تم إضافة الموظف بنجاح!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:o.name})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[e.jsxs("p",{className:"text-sm text-blue-700 font-medium mb-3",children:[e.jsx(ie,{className:"w-4 h-4 inline ml-1"}),"بيانات الدخول للموظف:"]}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"البريد الإلكتروني"}),e.jsx("p",{className:"font-mono text-sm",dir:"ltr",children:o.email})]}),e.jsx("button",{onClick:()=>S(o.email,"email"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:w==="email"?e.jsx(b,{className:"w-4 h-4 text-green-600"}):e.jsx(T,{className:"w-4 h-4 text-gray-500"})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"كلمة المرور"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-mono text-sm",dir:"ltr",children:g?o.password:"••••••••"}),e.jsx("button",{onClick:()=>C(!g),className:"p-1 hover:bg-gray-100 rounded",children:g?e.jsx(se,{className:"w-4 h-4 text-gray-400"}):e.jsx(te,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsx("button",{onClick:()=>S(o.password,"password"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:w==="password"?e.jsx(b,{className:"w-4 h-4 text-green-600"}):e.jsx(T,{className:"w-4 h-4 text-gray-500"})})]})]}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:"قم بإرسال هذه البيانات للموظف ليتمكن من الدخول من بوابة الموظفين"})]}),e.jsx("div",{className:"p-6 border-t border-gray-100",children:e.jsx(x,{onClick:()=>{v(!1),N(null),C(!1)},className:"w-full bg-brand-blue hover:bg-brand-dark text-white",children:"تم"})})]})})})]})}export{Se as Employees};
