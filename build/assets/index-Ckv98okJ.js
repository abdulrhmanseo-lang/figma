const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-mGwbu4js.js","assets/Layout-2LFZcWkX.js","assets/button-C9eQ0t7a.js","assets/house-D7y-fc29.js","assets/createLucideIcon-BSYcr9Kq.js","assets/building-2-DEbP7tbQ.js","assets/credit-card-S0HkCzsQ.js","assets/user-BDVhHuma.js","assets/log-out-C7r51I_-.js","assets/x-DwS1pIqH.js","assets/menu-BETwQvcM.js","assets/index-D7xRN2HA.js","assets/map-pin-CUl8rYQm.js","assets/phone-Bhx6HWAF.js","assets/mail-CxZAaejL.js","assets/card-B_E2dptz.js","assets/SubscriptionModal-DWDoZuvB.js","assets/check-C0cR1KSP.js","assets/trending-up-Y-YGQUj4.js","assets/file-text-BlJS6ccn.js","assets/receipt-B6QwxTZF.js","assets/wrench-CjqLlqGo.js","assets/brain-MxxJ4z6z.js","assets/arrow-right-CUgAr_NZ.js","assets/FeaturesPage-D0FczCwD.js","assets/upload-DKntDDdC.js","assets/PricingPage-mp1flJnc.js","assets/UnitsPage-CRtA-658.js","assets/search-BGwozNRO.js","assets/funnel-lfaUbYFb.js","assets/AboutPage-C68han6_.js","assets/users-BW_s600M.js","assets/shield-check-DWE3FNtO.js","assets/ContactPage-D-0MxYNY.js","assets/circle-check-big-XqHpW952.js","assets/LoginPage-B7svgoMb.js","assets/RegisterPage-uSj6nOXZ.js","assets/lock-Bfzq9iru.js","assets/VerifyEmailPage-Dzm1z3ew.js","assets/refresh-cw-BPWqUeEI.js","assets/ForgotPasswordPage-DSSD8Zb4.js","assets/Dashboard-CZOOMLpB.js","assets/clipboard-list-BX0Xcw4D.js","assets/shopping-cart-Bf3XHW6H.js","assets/circle-check-j6VaHBvc.js","assets/Properties-QRtl13Q3.js","assets/dialog-CWHaaKG0.js","assets/utils-BehNRFEY.js","assets/plus-C9xzBu_X.js","assets/square-pen-DcBg-tx1.js","assets/trash-2-DcHiZy9g.js","assets/Units-BJxSz9Dy.js","assets/format-DtwxcAHJ.js","assets/Tenants-DYE0jRja.js","assets/Contracts-Ciy1LvSw.js","assets/calendar-L0H24RbP.js","assets/Payments-iMTscitI.js","assets/clock-BCkyDvFv.js","assets/triangle-alert-B6u59il_.js","assets/Maintenance-CUZlOPcd.js","assets/Reports-D-9tPjcJ.js","assets/download-DWwZuY7P.js","assets/ProfilePage-BUYFDbAi.js","assets/Billing-DgYuyRLb.js","assets/eye-CNuNKbIA.js","assets/Employees-B8clXXZ5.js","assets/eye-off-DxL8N5yW.js","assets/Tasks-BhPoR9ZM.js","assets/circle-alert-BUztd8k7.js","assets/Sales-DN5RgXEj.js","assets/chevron-right-EGWjRHRH.js","assets/Settings-D3xe1s-E.js","assets/bell-BVbBqmos.js","assets/EmployeeLoginPage-BsnwqCcC.js","assets/EmployeeDashboard-DiWsl7LU.js","assets/EmployeeLayout-CZIunnXn.js","assets/DashboardLayout-1MA7mmQC.js"])))=>i.map(i=>d[i]);
function Zk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function WS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tm={exports:{}},Pu={},nm={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function eC(){if(t0)return ze;t0=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function w($){return $===null||typeof $!="object"?null:($=y&&$[y]||$["@@iterator"],typeof $=="function"?$:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function R($,ee,de){this.props=$,this.context=ee,this.refs=C,this.updater=de||S}R.prototype.isReactComponent={},R.prototype.setState=function($,ee){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ee,"setState")},R.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function O(){}O.prototype=R.prototype;function U($,ee,de){this.props=$,this.context=ee,this.refs=C,this.updater=de||S}var N=U.prototype=new O;N.constructor=U,A(N,R.prototype),N.isPureReactComponent=!0;var K=Array.isArray,H=Object.prototype.hasOwnProperty,X={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function b($,ee,de){var ge,Ee={},Ce=null,Be=null;if(ee!=null)for(ge in ee.ref!==void 0&&(Be=ee.ref),ee.key!==void 0&&(Ce=""+ee.key),ee)H.call(ee,ge)&&!k.hasOwnProperty(ge)&&(Ee[ge]=ee[ge]);var Te=arguments.length-2;if(Te===1)Ee.children=de;else if(1<Te){for(var qe=Array(Te),kt=0;kt<Te;kt++)qe[kt]=arguments[kt+2];Ee.children=qe}if($&&$.defaultProps)for(ge in Te=$.defaultProps,Te)Ee[ge]===void 0&&(Ee[ge]=Te[ge]);return{$$typeof:t,type:$,key:Ce,ref:Be,props:Ee,_owner:X.current}}function P($,ee){return{$$typeof:t,type:$.type,key:ee,ref:$.ref,props:$.props,_owner:$._owner}}function L($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function M($){var ee={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(de){return ee[de]})}var B=/\/+/g;function x($,ee){return typeof $=="object"&&$!==null&&$.key!=null?M(""+$.key):ee.toString(36)}function We($,ee,de,ge,Ee){var Ce=typeof $;(Ce==="undefined"||Ce==="boolean")&&($=null);var Be=!1;if($===null)Be=!0;else switch(Ce){case"string":case"number":Be=!0;break;case"object":switch($.$$typeof){case t:case e:Be=!0}}if(Be)return Be=$,Ee=Ee(Be),$=ge===""?"."+x(Be,0):ge,K(Ee)?(de="",$!=null&&(de=$.replace(B,"$&/")+"/"),We(Ee,ee,de,"",function(kt){return kt})):Ee!=null&&(L(Ee)&&(Ee=P(Ee,de+(!Ee.key||Be&&Be.key===Ee.key?"":(""+Ee.key).replace(B,"$&/")+"/")+$)),ee.push(Ee)),1;if(Be=0,ge=ge===""?".":ge+":",K($))for(var Te=0;Te<$.length;Te++){Ce=$[Te];var qe=ge+x(Ce,Te);Be+=We(Ce,ee,de,qe,Ee)}else if(qe=w($),typeof qe=="function")for($=qe.call($),Te=0;!(Ce=$.next()).done;)Ce=Ce.value,qe=ge+x(Ce,Te++),Be+=We(Ce,ee,de,qe,Ee);else if(Ce==="object")throw ee=String($),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Be}function it($,ee,de){if($==null)return $;var ge=[],Ee=0;return We($,ge,"","",function(Ce){return ee.call(de,Ce,Ee++)}),ge}function je($){if($._status===-1){var ee=$._result;ee=ee(),ee.then(function(de){($._status===0||$._status===-1)&&($._status=1,$._result=de)},function(de){($._status===0||$._status===-1)&&($._status=2,$._result=de)}),$._status===-1&&($._status=0,$._result=ee)}if($._status===1)return $._result.default;throw $._result}var _e={current:null},re={transition:null},fe={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:re,ReactCurrentOwner:X};function le(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:it,forEach:function($,ee,de){it($,function(){ee.apply(this,arguments)},de)},count:function($){var ee=0;return it($,function(){ee++}),ee},toArray:function($){return it($,function(ee){return ee})||[]},only:function($){if(!L($))throw Error("React.Children.only expected to receive a single React element child.");return $}},ze.Component=R,ze.Fragment=n,ze.Profiler=s,ze.PureComponent=U,ze.StrictMode=r,ze.Suspense=h,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,ze.act=le,ze.cloneElement=function($,ee,de){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ge=A({},$.props),Ee=$.key,Ce=$.ref,Be=$._owner;if(ee!=null){if(ee.ref!==void 0&&(Ce=ee.ref,Be=X.current),ee.key!==void 0&&(Ee=""+ee.key),$.type&&$.type.defaultProps)var Te=$.type.defaultProps;for(qe in ee)H.call(ee,qe)&&!k.hasOwnProperty(qe)&&(ge[qe]=ee[qe]===void 0&&Te!==void 0?Te[qe]:ee[qe])}var qe=arguments.length-2;if(qe===1)ge.children=de;else if(1<qe){Te=Array(qe);for(var kt=0;kt<qe;kt++)Te[kt]=arguments[kt+2];ge.children=Te}return{$$typeof:t,type:$.type,key:Ee,ref:Ce,props:ge,_owner:Be}},ze.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},ze.createElement=b,ze.createFactory=function($){var ee=b.bind(null,$);return ee.type=$,ee},ze.createRef=function(){return{current:null}},ze.forwardRef=function($){return{$$typeof:c,render:$}},ze.isValidElement=L,ze.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:je}},ze.memo=function($,ee){return{$$typeof:p,type:$,compare:ee===void 0?null:ee}},ze.startTransition=function($){var ee=re.transition;re.transition={};try{$()}finally{re.transition=ee}},ze.unstable_act=le,ze.useCallback=function($,ee){return _e.current.useCallback($,ee)},ze.useContext=function($){return _e.current.useContext($)},ze.useDebugValue=function(){},ze.useDeferredValue=function($){return _e.current.useDeferredValue($)},ze.useEffect=function($,ee){return _e.current.useEffect($,ee)},ze.useId=function(){return _e.current.useId()},ze.useImperativeHandle=function($,ee,de){return _e.current.useImperativeHandle($,ee,de)},ze.useInsertionEffect=function($,ee){return _e.current.useInsertionEffect($,ee)},ze.useLayoutEffect=function($,ee){return _e.current.useLayoutEffect($,ee)},ze.useMemo=function($,ee){return _e.current.useMemo($,ee)},ze.useReducer=function($,ee,de){return _e.current.useReducer($,ee,de)},ze.useRef=function($){return _e.current.useRef($)},ze.useState=function($){return _e.current.useState($)},ze.useSyncExternalStore=function($,ee,de){return _e.current.useSyncExternalStore($,ee,de)},ze.useTransition=function(){return _e.current.useTransition()},ze.version="18.3.1",ze}var n0;function sy(){return n0||(n0=1,nm.exports=eC()),nm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function tC(){if(r0)return Pu;r0=1;var t=sy(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var m,y={},w=null,S=null;p!==void 0&&(w=""+p),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(S=h.ref);for(m in h)r.call(h,m)&&!o.hasOwnProperty(m)&&(y[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:c,key:w,ref:S,props:y,_owner:s.current}}return Pu.Fragment=n,Pu.jsx=l,Pu.jsxs=l,Pu}var s0;function nC(){return s0||(s0=1,tm.exports=tC()),tm.exports}var J=nC(),V=sy();const ce=WS(V),Q5=Zk({__proto__:null,default:ce},[V]);var Hh={},rm={exports:{}},Kn={},sm={exports:{}},im={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function rC(){return i0||(i0=1,(function(t){function e(re,fe){var le=re.length;re.push(fe);e:for(;0<le;){var $=le-1>>>1,ee=re[$];if(0<s(ee,fe))re[$]=fe,re[le]=ee,le=$;else break e}}function n(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var fe=re[0],le=re.pop();if(le!==fe){re[0]=le;e:for(var $=0,ee=re.length,de=ee>>>1;$<de;){var ge=2*($+1)-1,Ee=re[ge],Ce=ge+1,Be=re[Ce];if(0>s(Ee,le))Ce<ee&&0>s(Be,Ee)?(re[$]=Be,re[Ce]=le,$=Ce):(re[$]=Ee,re[ge]=le,$=ge);else if(Ce<ee&&0>s(Be,le))re[$]=Be,re[Ce]=le,$=Ce;else break e}}return fe}function s(re,fe){var le=re.sortIndex-fe.sortIndex;return le!==0?le:re.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],p=[],m=1,y=null,w=3,S=!1,A=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(re){for(var fe=n(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=re)r(p),fe.sortIndex=fe.expirationTime,e(h,fe);else break;fe=n(p)}}function K(re){if(C=!1,N(re),!A)if(n(h)!==null)A=!0,je(H);else{var fe=n(p);fe!==null&&_e(K,fe.startTime-re)}}function H(re,fe){A=!1,C&&(C=!1,O(b),b=-1),S=!0;var le=w;try{for(N(fe),y=n(h);y!==null&&(!(y.expirationTime>fe)||re&&!M());){var $=y.callback;if(typeof $=="function"){y.callback=null,w=y.priorityLevel;var ee=$(y.expirationTime<=fe);fe=t.unstable_now(),typeof ee=="function"?y.callback=ee:y===n(h)&&r(h),N(fe)}else r(h);y=n(h)}if(y!==null)var de=!0;else{var ge=n(p);ge!==null&&_e(K,ge.startTime-fe),de=!1}return de}finally{y=null,w=le,S=!1}}var X=!1,k=null,b=-1,P=5,L=-1;function M(){return!(t.unstable_now()-L<P)}function B(){if(k!==null){var re=t.unstable_now();L=re;var fe=!0;try{fe=k(!0,re)}finally{fe?x():(X=!1,k=null)}}else X=!1}var x;if(typeof U=="function")x=function(){U(B)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,it=We.port2;We.port1.onmessage=B,x=function(){it.postMessage(null)}}else x=function(){R(B,0)};function je(re){k=re,X||(X=!0,x())}function _e(re,fe){b=R(function(){re(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){A||S||(A=!0,je(H))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(re){switch(w){case 1:case 2:case 3:var fe=3;break;default:fe=w}var le=w;w=fe;try{return re()}finally{w=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var le=w;w=re;try{return fe()}finally{w=le}},t.unstable_scheduleCallback=function(re,fe,le){var $=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?$+le:$):le=$,re){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=le+ee,re={id:m++,callback:fe,priorityLevel:re,startTime:le,expirationTime:ee,sortIndex:-1},le>$?(re.sortIndex=le,e(p,re),n(h)===null&&re===n(p)&&(C?(O(b),b=-1):C=!0,_e(K,le-$))):(re.sortIndex=ee,e(h,re),A||S||(A=!0,je(H))),re},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(re){var fe=w;return function(){var le=w;w=fe;try{return re.apply(this,arguments)}finally{w=le}}}})(im)),im}var o0;function sC(){return o0||(o0=1,sm.exports=rC()),sm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function iC(){if(a0)return Kn;a0=1;var t=sy(),e=sC();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function w(i){return h.call(y,i)?!0:h.call(m,i)?!1:p.test(i)?y[i]=!0:(m[i]=!0,!1)}function S(i,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function A(i,a,u,f){if(a===null||typeof a>"u"||S(i,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function C(i,a,u,f,g,v,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=v,this.removeEmptyString=T}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){R[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];R[a]=new C(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){R[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){R[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){R[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){R[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){R[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){R[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){R[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function U(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(O,U);R[a]=new C(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(O,U);R[a]=new C(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(O,U);R[a]=new C(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){R[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),R.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){R[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function N(i,a,u,f){var g=R.hasOwnProperty(a)?R[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(A(a,u,g,f)&&(u=null),f||g===null?w(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,a,u):i.setAttribute(a,u))))}var K=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),X=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),M=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),We=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),re=Symbol.iterator;function fe(i){return i===null||typeof i!="object"?null:(i=re&&i[re]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,$;function ee(i){if($===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+i}var de=!1;function ge(i,a){if(!i||de)return"";de=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(G){var f=G}Reflect.construct(i,[],a)}else{try{a.call()}catch(G){f=G}i.call(a.prototype)}else{try{throw Error()}catch(G){f=G}i()}}catch(G){if(G&&f&&typeof G.stack=="string"){for(var g=G.stack.split(`
`),v=f.stack.split(`
`),T=g.length-1,D=v.length-1;1<=T&&0<=D&&g[T]!==v[D];)D--;for(;1<=T&&0<=D;T--,D--)if(g[T]!==v[D]){if(T!==1||D!==1)do if(T--,D--,0>D||g[T]!==v[D]){var j=`
`+g[T].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=T&&0<=D);break}}}finally{de=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ee(i):""}function Ee(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=ge(i.type,!1),i;case 11:return i=ge(i.type.render,!1),i;case 1:return i=ge(i.type,!0),i;default:return""}}function Ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case X:return"Portal";case P:return"Profiler";case b:return"StrictMode";case x:return"Suspense";case We:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case B:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case it:return a=i.displayName||null,a!==null?a:Ce(i.type)||"Memo";case je:a=i._payload,i=i._init;try{return Ce(i(a))}catch{}}return null}function Be(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(a);case 8:return a===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Te(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function qe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function kt(i){var a=qe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,v.call(this,T)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Yn(i){i._valueTracker||(i._valueTracker=kt(i))}function Un(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return i&&(f=qe(i)?i.checked?"true":"false":i.value),i=f,i!==u?(a.setValue(i),!0):!1}function Z(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Y(i,a){var u=a.checked;return le({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function he(i,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=Te(a.value!=null?a.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function xe(i,a){a=a.checked,a!=null&&N(i,"checked",a,!1)}function Ze(i,a){xe(i,a);var u=Te(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Qe(i,a.type,u):a.hasOwnProperty("defaultValue")&&Qe(i,a.type,Te(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Tt(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Qe(i,a,u){(a!=="number"||Z(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var ht=Array.isArray;function xn(i,a,u,f){if(i=i.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=a.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Te(u),a=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function Nt(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return le({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function _n(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(n(92));if(ht(u)){if(1<u.length)throw Error(n(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:Te(u)}}function fi(i,a){var u=Te(a.value),f=Te(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function rt(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Vt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pi(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Vt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Nr,mi=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(a,u,f,g)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Nr=Nr||document.createElement("div"),Nr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Nr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Fn(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lr=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(i){Lr.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Vr[a]=Vr[i]})});function rs(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Vr.hasOwnProperty(i)&&Vr[i]?(""+a).trim():a+"px"}function gi(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=rs(u,a[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var yi=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $n(i,a){if(a){if(yi[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function vi(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gr=null;function Dn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Mr=null,jr=null,pt=null;function _i(i){if(i=fu(i)){if(typeof Mr!="function")throw Error(n(280));var a=i.stateNode;a&&(a=ah(a),Mr(i.stateNode,i.type,a))}}function De(i){jr?pt?pt.push(i):pt=[i]:jr=i}function lt(){if(jr){var i=jr,a=pt;if(pt=jr=null,_i(i),a)for(i=0;i<a.length;i++)_i(a[i])}}function Lt(i,a){return i(a)}function en(){}var On=!1;function Ct(i,a,u){if(On)return i(a,u);On=!0;try{return Lt(i,a,u)}finally{On=!1,(jr!==null||pt!==null)&&(en(),lt())}}function Ft(i,a){var u=i.stateNode;if(u===null)return null;var f=ah(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,a,typeof u));return u}var Xn=!1;if(c)try{var $t={};Object.defineProperty($t,"passive",{get:function(){Xn=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch{Xn=!1}function wn(i,a,u,f,g,v,T,D,j){var G=Array.prototype.slice.call(arguments,3);try{a.apply(u,G)}catch(se){this.onError(se)}}var yr=!1,tn=null,uo=!1,vr=null,Uc={onError:function(i){yr=!0,tn=i}};function Fc(i,a,u,f,g,v,T,D,j){yr=!1,tn=null,wn.apply(Uc,arguments)}function $l(i,a,u,f,g,v,T,D,j){if(Fc.apply(this,arguments),yr){if(yr){var G=tn;yr=!1,tn=null}else throw Error(n(198));uo||(uo=!0,vr=G)}}function Ur(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function Bl(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function $c(i){if(Ur(i)!==i)throw Error(n(188))}function Bc(i){var a=i.alternate;if(!a){if(a=Ur(i),a===null)throw Error(n(188));return a!==i?null:i}for(var u=i,f=a;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return $c(g),i;if(v===f)return $c(g),a;v=v.sibling}throw Error(n(188))}if(u.return!==f.return)u=g,f=v;else{for(var T=!1,D=g.child;D;){if(D===u){T=!0,u=g,f=v;break}if(D===f){T=!0,f=g,u=v;break}D=D.sibling}if(!T){for(D=v.child;D;){if(D===u){T=!0,u=v,f=g;break}if(D===f){T=!0,f=v,u=g;break}D=D.sibling}if(!T)throw Error(n(189))}}if(u.alternate!==f)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:a}function zc(i){return i=Bc(i),i!==null?co(i):null}function co(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=co(i);if(a!==null)return a;i=i.sibling}return null}var zl=e.unstable_scheduleCallback,ca=e.unstable_cancelCallback,ho=e.unstable_shouldYield,Vs=e.unstable_requestPaint,mt=e.unstable_now,Df=e.unstable_getCurrentPriorityLevel,ha=e.unstable_ImmediatePriority,Wl=e.unstable_UserBlockingPriority,fo=e.unstable_NormalPriority,ql=e.unstable_LowPriority,da=e.unstable_IdlePriority,po=null,Zn=null;function Wc(i){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(po,i,void 0,(i.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:mo,ss=Math.log,_r=Math.LN2;function mo(i){return i>>>=0,i===0?32:31-(ss(i)/_r|0)|0}var is=64,wi=4194304;function nt(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ls(i,a){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,v=i.pingedLanes,T=u&268435455;if(T!==0){var D=T&~g;D!==0?f=nt(D):(v&=T,v!==0&&(f=nt(v)))}else T=u&~g,T!==0?f=nt(T):v!==0&&(f=nt(v));if(f===0)return 0;if(a!==0&&a!==f&&(a&g)===0&&(g=f&-f,v=a&-a,g>=v||g===16&&(v&4194240)!==0))return a;if((f&4)!==0&&(f|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)u=31-er(a),g=1<<u,f|=i[u],a&=~g;return f}function go(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yo(i,a){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes;0<v;){var T=31-er(v),D=1<<T,j=g[T];j===-1?((D&u)===0||(D&f)!==0)&&(g[T]=go(D,a)):j<=a&&(i.expiredLanes|=D),v&=~D}}function Hl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Kl(){var i=is;return is<<=1,(is&4194240)===0&&(is=64),i}function Gl(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function vo(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-er(a),i[a]=u}function Of(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-er(u),v=1<<g;a[g]=0,f[g]=-1,i[g]=-1,u&=~v}}function Ql(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var f=31-er(u),g=1<<f;g&a|i[f]&a&&(i[f]|=a),u&=~g}}var Je=0;function os(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Jl,fa,Yl,Xl,Zl,as=!1,pa=[],ls=null,us=null,un=null,_o=new Map,Ms=new Map,tr=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ei(i,a){switch(i){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":_o.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(a.pointerId)}}function Fr(i,a,u,f,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},a!==null&&(a=fu(a),a!==null&&fa(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function Hc(i,a,u,f,g){switch(a){case"focusin":return ls=Fr(ls,i,a,u,f,g),!0;case"dragenter":return us=Fr(us,i,a,u,f,g),!0;case"mouseover":return un=Fr(un,i,a,u,f,g),!0;case"pointerover":var v=g.pointerId;return _o.set(v,Fr(_o.get(v)||null,i,a,u,f,g)),!0;case"gotpointercapture":return v=g.pointerId,Ms.set(v,Fr(Ms.get(v)||null,i,a,u,f,g)),!0}return!1}function ma(i){var a=So(i.target);if(a!==null){var u=Ur(a);if(u!==null){if(a=u.tag,a===13){if(a=Bl(u),a!==null){i.blockedOn=a,Zl(i.priority,function(){Yl(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ut(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=ga(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);gr=f,u.target.dispatchEvent(f),gr=null}else return a=fu(u),a!==null&&fa(a),i.blockedOn=u,!1;a.shift()}return!0}function Kc(i,a,u){ut(i)&&u.delete(a)}function Nf(){as=!1,ls!==null&&ut(ls)&&(ls=null),us!==null&&ut(us)&&(us=null),un!==null&&ut(un)&&(un=null),_o.forEach(Kc),Ms.forEach(Kc)}function Ti(i,a){i.blockedOn===a&&(i.blockedOn=null,as||(as=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Nf)))}function Si(i){function a(g){return Ti(g,i)}if(0<pa.length){Ti(pa[0],i);for(var u=1;u<pa.length;u++){var f=pa[u];f.blockedOn===i&&(f.blockedOn=null)}}for(ls!==null&&Ti(ls,i),us!==null&&Ti(us,i),un!==null&&Ti(un,i),_o.forEach(a),Ms.forEach(a),u=0;u<tr.length;u++)f=tr[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<tr.length&&(u=tr[0],u.blockedOn===null);)ma(u),u.blockedOn===null&&tr.shift()}var js=K.ReactCurrentBatchConfig,Us=!0;function cs(i,a,u,f){var g=Je,v=js.transition;js.transition=null;try{Je=1,eu(i,a,u,f)}finally{Je=g,js.transition=v}}function Gc(i,a,u,f){var g=Je,v=js.transition;js.transition=null;try{Je=4,eu(i,a,u,f)}finally{Je=g,js.transition=v}}function eu(i,a,u,f){if(Us){var g=ga(i,a,u,f);if(g===null)qf(i,a,f,hs,u),Ei(i,f);else if(Hc(g,i,a,u,f))f.stopPropagation();else if(Ei(i,f),a&4&&-1<qc.indexOf(i)){for(;g!==null;){var v=fu(g);if(v!==null&&Jl(v),v=ga(i,a,u,f),v===null&&qf(i,a,f,hs,u),v===g)break;g=v}g!==null&&f.stopPropagation()}else qf(i,a,f,null,u)}}var hs=null;function ga(i,a,u,f){if(hs=null,i=Dn(f),i=So(i),i!==null)if(a=Ur(i),a===null)i=null;else if(u=a.tag,u===13){if(i=Bl(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return hs=i,null}function ya(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Df()){case ha:return 1;case Wl:return 4;case fo:case ql:return 16;case da:return 536870912;default:return 16}default:return 16}}var nr=null,va=null,Fs=null;function Qc(){if(Fs)return Fs;var i,a=va,u=a.length,f,g="value"in nr?nr.value:nr.textContent,v=g.length;for(i=0;i<u&&a[i]===g[i];i++);var T=u-i;for(f=1;f<=T&&a[u-f]===g[v-f];f++);return Fs=g.slice(i,1<f?1-f:void 0)}function wo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ds(){return!0}function tu(){return!1}function En(i){function a(u,f,g,v,T){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(u=i[D],this[D]=u?u(v):v[D]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ds:tu,this.isPropagationStopped=tu,this}return le(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),a}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eo=En(fs),Ii=le({},fs,{view:0,detail:0}),_a=En(Ii),wa,Ea,rr,To=le({},Ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fe,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==rr&&(rr&&i.type==="mousemove"?(wa=i.screenX-rr.screenX,Ea=i.screenY-rr.screenY):Ea=wa=0,rr=i),wa)},movementY:function(i){return"movementY"in i?i.movementY:Ea}}),nu=En(To),Jc=le({},To,{dataTransfer:0}),Yc=En(Jc),Ta=le({},Ii,{relatedTarget:0}),cn=En(Ta),Xc=le({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Zc=En(Xc),bi=le({},fs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),d=En(bi),_=le({},fs,{data:0}),E=En(_),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ue(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Q[i])?!!a[i]:!1}function Fe(){return ue}var Mt=le({},Ii,{key:function(i){if(i.key){var a=I[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=wo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?W[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fe,charCode:function(i){return i.type==="keypress"?wo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ot=En(Mt),Bt=le({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sr=En(Bt),$s=le({},Ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fe}),ps=En($s),ms=le({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sa=En(ms),ru=le({},To,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),KP=En(ru),GP=[9,13,27,32],Vf=c&&"CompositionEvent"in window,su=null;c&&"documentMode"in document&&(su=document.documentMode);var QP=c&&"TextEvent"in window&&!su,Kv=c&&(!Vf||su&&8<su&&11>=su),Gv=" ",Qv=!1;function Jv(i,a){switch(i){case"keyup":return GP.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ia=!1;function JP(i,a){switch(i){case"compositionend":return Yv(a);case"keypress":return a.which!==32?null:(Qv=!0,Gv);case"textInput":return i=a.data,i===Gv&&Qv?null:i;default:return null}}function YP(i,a){if(Ia)return i==="compositionend"||!Vf&&Jv(i,a)?(i=Qc(),Fs=va=nr=null,Ia=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Kv&&a.locale!=="ko"?null:a.data;default:return null}}var XP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!XP[i.type]:a==="textarea"}function Zv(i,a,u,f){De(f),a=sh(a,"onChange"),0<a.length&&(u=new Eo("onChange","change",null,u,f),i.push({event:u,listeners:a}))}var iu=null,ou=null;function ZP(i){y_(i,0)}function eh(i){var a=ka(i);if(Un(a))return i}function ek(i,a){if(i==="change")return a}var e_=!1;if(c){var Lf;if(c){var Mf="oninput"in document;if(!Mf){var t_=document.createElement("div");t_.setAttribute("oninput","return;"),Mf=typeof t_.oninput=="function"}Lf=Mf}else Lf=!1;e_=Lf&&(!document.documentMode||9<document.documentMode)}function n_(){iu&&(iu.detachEvent("onpropertychange",r_),ou=iu=null)}function r_(i){if(i.propertyName==="value"&&eh(ou)){var a=[];Zv(a,ou,i,Dn(i)),Ct(ZP,a)}}function tk(i,a,u){i==="focusin"?(n_(),iu=a,ou=u,iu.attachEvent("onpropertychange",r_)):i==="focusout"&&n_()}function nk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return eh(ou)}function rk(i,a){if(i==="click")return eh(a)}function sk(i,a){if(i==="input"||i==="change")return eh(a)}function ik(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var $r=typeof Object.is=="function"?Object.is:ik;function au(i,a){if($r(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(a,g)||!$r(i[g],a[g]))return!1}return!0}function s_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function i_(i,a){var u=s_(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=a&&f>=a)return{node:u,offset:a-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=s_(u)}}function o_(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?o_(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function a_(){for(var i=window,a=Z();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=Z(i.document)}return a}function jf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function ok(i){var a=a_(),u=i.focusedElem,f=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&o_(u.ownerDocument.documentElement,u)){if(f!==null&&jf(u)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!i.extend&&v>f&&(g=f,f=v,v=g),g=i_(u,v);var T=i_(u,f);g&&T&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),v>f?(i.addRange(a),i.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ak=c&&"documentMode"in document&&11>=document.documentMode,ba=null,Uf=null,lu=null,Ff=!1;function l_(i,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ff||ba==null||ba!==Z(f)||(f=ba,"selectionStart"in f&&jf(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),lu&&au(lu,f)||(lu=f,f=sh(Uf,"onSelect"),0<f.length&&(a=new Eo("onSelect","select",null,a,u),i.push({event:a,listeners:f}),a.target=ba)))}function th(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Aa={animationend:th("Animation","AnimationEnd"),animationiteration:th("Animation","AnimationIteration"),animationstart:th("Animation","AnimationStart"),transitionend:th("Transition","TransitionEnd")},$f={},u_={};c&&(u_=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function nh(i){if($f[i])return $f[i];if(!Aa[i])return i;var a=Aa[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in u_)return $f[i]=a[u];return i}var c_=nh("animationend"),h_=nh("animationiteration"),d_=nh("animationstart"),f_=nh("transitionend"),p_=new Map,m_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(i,a){p_.set(i,a),o(a,[i])}for(var Bf=0;Bf<m_.length;Bf++){var zf=m_[Bf],lk=zf.toLowerCase(),uk=zf[0].toUpperCase()+zf.slice(1);Ai(lk,"on"+uk)}Ai(c_,"onAnimationEnd"),Ai(h_,"onAnimationIteration"),Ai(d_,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(f_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(uu));function g_(i,a,u){var f=i.type||"unknown-event";i.currentTarget=u,$l(f,a,void 0,i),i.currentTarget=null}function y_(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;e:{var v=void 0;if(a)for(var T=f.length-1;0<=T;T--){var D=f[T],j=D.instance,G=D.currentTarget;if(D=D.listener,j!==v&&g.isPropagationStopped())break e;g_(g,D,G),v=j}else for(T=0;T<f.length;T++){if(D=f[T],j=D.instance,G=D.currentTarget,D=D.listener,j!==v&&g.isPropagationStopped())break e;g_(g,D,G),v=j}}}if(uo)throw i=vr,uo=!1,vr=null,i}function gt(i,a){var u=a[Yf];u===void 0&&(u=a[Yf]=new Set);var f=i+"__bubble";u.has(f)||(v_(a,i,2,!1),u.add(f))}function Wf(i,a,u){var f=0;a&&(f|=4),v_(u,i,f,a)}var rh="_reactListening"+Math.random().toString(36).slice(2);function cu(i){if(!i[rh]){i[rh]=!0,r.forEach(function(u){u!=="selectionchange"&&(ck.has(u)||Wf(u,!1,i),Wf(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[rh]||(a[rh]=!0,Wf("selectionchange",!1,a))}}function v_(i,a,u,f){switch(ya(a)){case 1:var g=cs;break;case 4:g=Gc;break;default:g=eu}u=g.bind(null,a,u,i),g=void 0,!Xn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,u,{capture:!0,passive:g}):i.addEventListener(a,u,!0):g!==void 0?i.addEventListener(a,u,{passive:g}):i.addEventListener(a,u,!1)}function qf(i,a,u,f,g){var v=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var D=f.stateNode.containerInfo;if(D===g||D.nodeType===8&&D.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var j=T.tag;if((j===3||j===4)&&(j=T.stateNode.containerInfo,j===g||j.nodeType===8&&j.parentNode===g))return;T=T.return}for(;D!==null;){if(T=So(D),T===null)return;if(j=T.tag,j===5||j===6){f=v=T;continue e}D=D.parentNode}}f=f.return}Ct(function(){var G=v,se=Dn(u),oe=[];e:{var ne=p_.get(i);if(ne!==void 0){var pe=Eo,ve=i;switch(i){case"keypress":if(wo(u)===0)break e;case"keydown":case"keyup":pe=ot;break;case"focusin":ve="focus",pe=cn;break;case"focusout":ve="blur",pe=cn;break;case"beforeblur":case"afterblur":pe=cn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Yc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=ps;break;case c_:case h_:case d_:pe=Zc;break;case f_:pe=Sa;break;case"scroll":pe=_a;break;case"wheel":pe=KP;break;case"copy":case"cut":case"paste":pe=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=sr}var we=(a&4)!==0,jt=!we&&i==="scroll",z=we?ne!==null?ne+"Capture":null:ne;we=[];for(var F=G,q;F!==null;){q=F;var ae=q.stateNode;if(q.tag===5&&ae!==null&&(q=ae,z!==null&&(ae=Ft(F,z),ae!=null&&we.push(hu(F,ae,q)))),jt)break;F=F.return}0<we.length&&(ne=new pe(ne,ve,null,u,se),oe.push({event:ne,listeners:we}))}}if((a&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",pe=i==="mouseout"||i==="pointerout",ne&&u!==gr&&(ve=u.relatedTarget||u.fromElement)&&(So(ve)||ve[Bs]))break e;if((pe||ne)&&(ne=se.window===se?se:(ne=se.ownerDocument)?ne.defaultView||ne.parentWindow:window,pe?(ve=u.relatedTarget||u.toElement,pe=G,ve=ve?So(ve):null,ve!==null&&(jt=Ur(ve),ve!==jt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(pe=null,ve=G),pe!==ve)){if(we=nu,ae="onMouseLeave",z="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(we=sr,ae="onPointerLeave",z="onPointerEnter",F="pointer"),jt=pe==null?ne:ka(pe),q=ve==null?ne:ka(ve),ne=new we(ae,F+"leave",pe,u,se),ne.target=jt,ne.relatedTarget=q,ae=null,So(se)===G&&(we=new we(z,F+"enter",ve,u,se),we.target=q,we.relatedTarget=jt,ae=we),jt=ae,pe&&ve)t:{for(we=pe,z=ve,F=0,q=we;q;q=Ra(q))F++;for(q=0,ae=z;ae;ae=Ra(ae))q++;for(;0<F-q;)we=Ra(we),F--;for(;0<q-F;)z=Ra(z),q--;for(;F--;){if(we===z||z!==null&&we===z.alternate)break t;we=Ra(we),z=Ra(z)}we=null}else we=null;pe!==null&&__(oe,ne,pe,we,!1),ve!==null&&jt!==null&&__(oe,jt,ve,we,!0)}}e:{if(ne=G?ka(G):window,pe=ne.nodeName&&ne.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ne.type==="file")var Se=ek;else if(Xv(ne))if(e_)Se=sk;else{Se=nk;var Re=tk}else(pe=ne.nodeName)&&pe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Se=rk);if(Se&&(Se=Se(i,G))){Zv(oe,Se,u,se);break e}Re&&Re(i,ne,G),i==="focusout"&&(Re=ne._wrapperState)&&Re.controlled&&ne.type==="number"&&Qe(ne,"number",ne.value)}switch(Re=G?ka(G):window,i){case"focusin":(Xv(Re)||Re.contentEditable==="true")&&(ba=Re,Uf=G,lu=null);break;case"focusout":lu=Uf=ba=null;break;case"mousedown":Ff=!0;break;case"contextmenu":case"mouseup":case"dragend":Ff=!1,l_(oe,u,se);break;case"selectionchange":if(ak)break;case"keydown":case"keyup":l_(oe,u,se)}var Pe;if(Vf)e:{switch(i){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Ia?Jv(i,u)&&(Me="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Me="onCompositionStart");Me&&(Kv&&u.locale!=="ko"&&(Ia||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Ia&&(Pe=Qc()):(nr=se,va="value"in nr?nr.value:nr.textContent,Ia=!0)),Re=sh(G,Me),0<Re.length&&(Me=new E(Me,i,null,u,se),oe.push({event:Me,listeners:Re}),Pe?Me.data=Pe:(Pe=Yv(u),Pe!==null&&(Me.data=Pe)))),(Pe=QP?JP(i,u):YP(i,u))&&(G=sh(G,"onBeforeInput"),0<G.length&&(se=new E("onBeforeInput","beforeinput",null,u,se),oe.push({event:se,listeners:G}),se.data=Pe))}y_(oe,a)})}function hu(i,a,u){return{instance:i,listener:a,currentTarget:u}}function sh(i,a){for(var u=a+"Capture",f=[];i!==null;){var g=i,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Ft(i,u),v!=null&&f.unshift(hu(i,v,g)),v=Ft(i,a),v!=null&&f.push(hu(i,v,g))),i=i.return}return f}function Ra(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function __(i,a,u,f,g){for(var v=a._reactName,T=[];u!==null&&u!==f;){var D=u,j=D.alternate,G=D.stateNode;if(j!==null&&j===f)break;D.tag===5&&G!==null&&(D=G,g?(j=Ft(u,v),j!=null&&T.unshift(hu(u,j,D))):g||(j=Ft(u,v),j!=null&&T.push(hu(u,j,D)))),u=u.return}T.length!==0&&i.push({event:a,listeners:T})}var hk=/\r\n?/g,dk=/\u0000|\uFFFD/g;function w_(i){return(typeof i=="string"?i:""+i).replace(hk,`
`).replace(dk,"")}function ih(i,a,u){if(a=w_(a),w_(i)!==a&&u)throw Error(n(425))}function oh(){}var Hf=null,Kf=null;function Gf(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Qf=typeof setTimeout=="function"?setTimeout:void 0,fk=typeof clearTimeout=="function"?clearTimeout:void 0,E_=typeof Promise=="function"?Promise:void 0,pk=typeof queueMicrotask=="function"?queueMicrotask:typeof E_<"u"?function(i){return E_.resolve(null).then(i).catch(mk)}:Qf;function mk(i){setTimeout(function(){throw i})}function Jf(i,a){var u=a,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),Si(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Si(a)}function Ri(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function T_(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var Pa=Math.random().toString(36).slice(2),gs="__reactFiber$"+Pa,du="__reactProps$"+Pa,Bs="__reactContainer$"+Pa,Yf="__reactEvents$"+Pa,gk="__reactListeners$"+Pa,yk="__reactHandles$"+Pa;function So(i){var a=i[gs];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Bs]||u[gs]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=T_(i);i!==null;){if(u=i[gs])return u;i=T_(i)}return a}i=u,u=i.parentNode}return null}function fu(i){return i=i[gs]||i[Bs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ka(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function ah(i){return i[du]||null}var Xf=[],Ca=-1;function Pi(i){return{current:i}}function yt(i){0>Ca||(i.current=Xf[Ca],Xf[Ca]=null,Ca--)}function dt(i,a){Ca++,Xf[Ca]=i.current,i.current=a}var ki={},Tn=Pi(ki),Bn=Pi(!1),Io=ki;function xa(i,a){var u=i.type.contextTypes;if(!u)return ki;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=a[v];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function zn(i){return i=i.childContextTypes,i!=null}function lh(){yt(Bn),yt(Tn)}function S_(i,a,u){if(Tn.current!==ki)throw Error(n(168));dt(Tn,a),dt(Bn,u)}function I_(i,a,u){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(n(108,Be(i)||"Unknown",g));return le({},u,f)}function uh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ki,Io=Tn.current,dt(Tn,i),dt(Bn,Bn.current),!0}function b_(i,a,u){var f=i.stateNode;if(!f)throw Error(n(169));u?(i=I_(i,a,Io),f.__reactInternalMemoizedMergedChildContext=i,yt(Bn),yt(Tn),dt(Tn,i)):yt(Bn),dt(Bn,u)}var zs=null,ch=!1,Zf=!1;function A_(i){zs===null?zs=[i]:zs.push(i)}function vk(i){ch=!0,A_(i)}function Ci(){if(!Zf&&zs!==null){Zf=!0;var i=0,a=Je;try{var u=zs;for(Je=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}zs=null,ch=!1}catch(g){throw zs!==null&&(zs=zs.slice(i+1)),zl(ha,Ci),g}finally{Je=a,Zf=!1}}return null}var Da=[],Oa=0,hh=null,dh=0,wr=[],Er=0,bo=null,Ws=1,qs="";function Ao(i,a){Da[Oa++]=dh,Da[Oa++]=hh,hh=i,dh=a}function R_(i,a,u){wr[Er++]=Ws,wr[Er++]=qs,wr[Er++]=bo,bo=i;var f=Ws;i=qs;var g=32-er(f)-1;f&=~(1<<g),u+=1;var v=32-er(a)+g;if(30<v){var T=g-g%5;v=(f&(1<<T)-1).toString(32),f>>=T,g-=T,Ws=1<<32-er(a)+g|u<<g|f,qs=v+i}else Ws=1<<v|u<<g|f,qs=i}function ep(i){i.return!==null&&(Ao(i,1),R_(i,1,0))}function tp(i){for(;i===hh;)hh=Da[--Oa],Da[Oa]=null,dh=Da[--Oa],Da[Oa]=null;for(;i===bo;)bo=wr[--Er],wr[Er]=null,qs=wr[--Er],wr[Er]=null,Ws=wr[--Er],wr[Er]=null}var ir=null,or=null,_t=!1,Br=null;function P_(i,a){var u=br(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function k_(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,ir=i,or=Ri(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,ir=i,or=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=bo!==null?{id:Ws,overflow:qs}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=br(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,ir=i,or=null,!0):!1;default:return!1}}function np(i){return(i.mode&1)!==0&&(i.flags&128)===0}function rp(i){if(_t){var a=or;if(a){var u=a;if(!k_(i,a)){if(np(i))throw Error(n(418));a=Ri(u.nextSibling);var f=ir;a&&k_(i,a)?P_(f,u):(i.flags=i.flags&-4097|2,_t=!1,ir=i)}}else{if(np(i))throw Error(n(418));i.flags=i.flags&-4097|2,_t=!1,ir=i}}}function C_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ir=i}function fh(i){if(i!==ir)return!1;if(!_t)return C_(i),_t=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Gf(i.type,i.memoizedProps)),a&&(a=or)){if(np(i))throw x_(),Error(n(418));for(;a;)P_(i,a),a=Ri(a.nextSibling)}if(C_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){or=Ri(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}or=null}}else or=ir?Ri(i.stateNode.nextSibling):null;return!0}function x_(){for(var i=or;i;)i=Ri(i.nextSibling)}function Na(){or=ir=null,_t=!1}function sp(i){Br===null?Br=[i]:Br.push(i)}var _k=K.ReactCurrentBatchConfig;function pu(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var f=u.stateNode}if(!f)throw Error(n(147,i));var g=f,v=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(T){var D=g.refs;T===null?delete D[v]:D[v]=T},a._stringRef=v,a)}if(typeof i!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,i))}return i}function ph(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function D_(i){var a=i._init;return a(i._payload)}function O_(i){function a(z,F){if(i){var q=z.deletions;q===null?(z.deletions=[F],z.flags|=16):q.push(F)}}function u(z,F){if(!i)return null;for(;F!==null;)a(z,F),F=F.sibling;return null}function f(z,F){for(z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function g(z,F){return z=ji(z,F),z.index=0,z.sibling=null,z}function v(z,F,q){return z.index=q,i?(q=z.alternate,q!==null?(q=q.index,q<F?(z.flags|=2,F):q):(z.flags|=2,F)):(z.flags|=1048576,F)}function T(z){return i&&z.alternate===null&&(z.flags|=2),z}function D(z,F,q,ae){return F===null||F.tag!==6?(F=Qp(q,z.mode,ae),F.return=z,F):(F=g(F,q),F.return=z,F)}function j(z,F,q,ae){var Se=q.type;return Se===k?se(z,F,q.props.children,ae,q.key):F!==null&&(F.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===je&&D_(Se)===F.type)?(ae=g(F,q.props),ae.ref=pu(z,F,q),ae.return=z,ae):(ae=jh(q.type,q.key,q.props,null,z.mode,ae),ae.ref=pu(z,F,q),ae.return=z,ae)}function G(z,F,q,ae){return F===null||F.tag!==4||F.stateNode.containerInfo!==q.containerInfo||F.stateNode.implementation!==q.implementation?(F=Jp(q,z.mode,ae),F.return=z,F):(F=g(F,q.children||[]),F.return=z,F)}function se(z,F,q,ae,Se){return F===null||F.tag!==7?(F=No(q,z.mode,ae,Se),F.return=z,F):(F=g(F,q),F.return=z,F)}function oe(z,F,q){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Qp(""+F,z.mode,q),F.return=z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case H:return q=jh(F.type,F.key,F.props,null,z.mode,q),q.ref=pu(z,null,F),q.return=z,q;case X:return F=Jp(F,z.mode,q),F.return=z,F;case je:var ae=F._init;return oe(z,ae(F._payload),q)}if(ht(F)||fe(F))return F=No(F,z.mode,q,null),F.return=z,F;ph(z,F)}return null}function ne(z,F,q,ae){var Se=F!==null?F.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Se!==null?null:D(z,F,""+q,ae);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case H:return q.key===Se?j(z,F,q,ae):null;case X:return q.key===Se?G(z,F,q,ae):null;case je:return Se=q._init,ne(z,F,Se(q._payload),ae)}if(ht(q)||fe(q))return Se!==null?null:se(z,F,q,ae,null);ph(z,q)}return null}function pe(z,F,q,ae,Se){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return z=z.get(q)||null,D(F,z,""+ae,Se);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case H:return z=z.get(ae.key===null?q:ae.key)||null,j(F,z,ae,Se);case X:return z=z.get(ae.key===null?q:ae.key)||null,G(F,z,ae,Se);case je:var Re=ae._init;return pe(z,F,q,Re(ae._payload),Se)}if(ht(ae)||fe(ae))return z=z.get(q)||null,se(F,z,ae,Se,null);ph(F,ae)}return null}function ve(z,F,q,ae){for(var Se=null,Re=null,Pe=F,Me=F=0,sn=null;Pe!==null&&Me<q.length;Me++){Pe.index>Me?(sn=Pe,Pe=null):sn=Pe.sibling;var tt=ne(z,Pe,q[Me],ae);if(tt===null){Pe===null&&(Pe=sn);break}i&&Pe&&tt.alternate===null&&a(z,Pe),F=v(tt,F,Me),Re===null?Se=tt:Re.sibling=tt,Re=tt,Pe=sn}if(Me===q.length)return u(z,Pe),_t&&Ao(z,Me),Se;if(Pe===null){for(;Me<q.length;Me++)Pe=oe(z,q[Me],ae),Pe!==null&&(F=v(Pe,F,Me),Re===null?Se=Pe:Re.sibling=Pe,Re=Pe);return _t&&Ao(z,Me),Se}for(Pe=f(z,Pe);Me<q.length;Me++)sn=pe(Pe,z,Me,q[Me],ae),sn!==null&&(i&&sn.alternate!==null&&Pe.delete(sn.key===null?Me:sn.key),F=v(sn,F,Me),Re===null?Se=sn:Re.sibling=sn,Re=sn);return i&&Pe.forEach(function(Ui){return a(z,Ui)}),_t&&Ao(z,Me),Se}function we(z,F,q,ae){var Se=fe(q);if(typeof Se!="function")throw Error(n(150));if(q=Se.call(q),q==null)throw Error(n(151));for(var Re=Se=null,Pe=F,Me=F=0,sn=null,tt=q.next();Pe!==null&&!tt.done;Me++,tt=q.next()){Pe.index>Me?(sn=Pe,Pe=null):sn=Pe.sibling;var Ui=ne(z,Pe,tt.value,ae);if(Ui===null){Pe===null&&(Pe=sn);break}i&&Pe&&Ui.alternate===null&&a(z,Pe),F=v(Ui,F,Me),Re===null?Se=Ui:Re.sibling=Ui,Re=Ui,Pe=sn}if(tt.done)return u(z,Pe),_t&&Ao(z,Me),Se;if(Pe===null){for(;!tt.done;Me++,tt=q.next())tt=oe(z,tt.value,ae),tt!==null&&(F=v(tt,F,Me),Re===null?Se=tt:Re.sibling=tt,Re=tt);return _t&&Ao(z,Me),Se}for(Pe=f(z,Pe);!tt.done;Me++,tt=q.next())tt=pe(Pe,z,Me,tt.value,ae),tt!==null&&(i&&tt.alternate!==null&&Pe.delete(tt.key===null?Me:tt.key),F=v(tt,F,Me),Re===null?Se=tt:Re.sibling=tt,Re=tt);return i&&Pe.forEach(function(Xk){return a(z,Xk)}),_t&&Ao(z,Me),Se}function jt(z,F,q,ae){if(typeof q=="object"&&q!==null&&q.type===k&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case H:e:{for(var Se=q.key,Re=F;Re!==null;){if(Re.key===Se){if(Se=q.type,Se===k){if(Re.tag===7){u(z,Re.sibling),F=g(Re,q.props.children),F.return=z,z=F;break e}}else if(Re.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===je&&D_(Se)===Re.type){u(z,Re.sibling),F=g(Re,q.props),F.ref=pu(z,Re,q),F.return=z,z=F;break e}u(z,Re);break}else a(z,Re);Re=Re.sibling}q.type===k?(F=No(q.props.children,z.mode,ae,q.key),F.return=z,z=F):(ae=jh(q.type,q.key,q.props,null,z.mode,ae),ae.ref=pu(z,F,q),ae.return=z,z=ae)}return T(z);case X:e:{for(Re=q.key;F!==null;){if(F.key===Re)if(F.tag===4&&F.stateNode.containerInfo===q.containerInfo&&F.stateNode.implementation===q.implementation){u(z,F.sibling),F=g(F,q.children||[]),F.return=z,z=F;break e}else{u(z,F);break}else a(z,F);F=F.sibling}F=Jp(q,z.mode,ae),F.return=z,z=F}return T(z);case je:return Re=q._init,jt(z,F,Re(q._payload),ae)}if(ht(q))return ve(z,F,q,ae);if(fe(q))return we(z,F,q,ae);ph(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,F!==null&&F.tag===6?(u(z,F.sibling),F=g(F,q),F.return=z,z=F):(u(z,F),F=Qp(q,z.mode,ae),F.return=z,z=F),T(z)):u(z,F)}return jt}var Va=O_(!0),N_=O_(!1),mh=Pi(null),gh=null,La=null,ip=null;function op(){ip=La=gh=null}function ap(i){var a=mh.current;yt(mh),i._currentValue=a}function lp(i,a,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===u)break;i=i.return}}function Ma(i,a){gh=i,ip=La=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Wn=!0),i.firstContext=null)}function Tr(i){var a=i._currentValue;if(ip!==i)if(i={context:i,memoizedValue:a,next:null},La===null){if(gh===null)throw Error(n(308));La=i,gh.dependencies={lanes:0,firstContext:i}}else La=La.next=i;return a}var Ro=null;function up(i){Ro===null?Ro=[i]:Ro.push(i)}function V_(i,a,u,f){var g=a.interleaved;return g===null?(u.next=u,up(a)):(u.next=g.next,g.next=u),a.interleaved=u,Hs(i,f)}function Hs(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var xi=!1;function cp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L_(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ks(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Di(i,a,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(et&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,Hs(i,u)}return g=f.interleaved,g===null?(a.next=a,up(f)):(a.next=g.next,g.next=a),f.interleaved=a,Hs(i,u)}function yh(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,Ql(i,u)}}function M_(i,a){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=T:v=v.next=T,u=u.next}while(u!==null);v===null?g=v=a:v=v.next=a}else g=v=a;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function vh(i,a,u,f){var g=i.updateQueue;xi=!1;var v=g.firstBaseUpdate,T=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var j=D,G=j.next;j.next=null,T===null?v=G:T.next=G,T=j;var se=i.alternate;se!==null&&(se=se.updateQueue,D=se.lastBaseUpdate,D!==T&&(D===null?se.firstBaseUpdate=G:D.next=G,se.lastBaseUpdate=j))}if(v!==null){var oe=g.baseState;T=0,se=G=j=null,D=v;do{var ne=D.lane,pe=D.eventTime;if((f&ne)===ne){se!==null&&(se=se.next={eventTime:pe,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var ve=i,we=D;switch(ne=a,pe=u,we.tag){case 1:if(ve=we.payload,typeof ve=="function"){oe=ve.call(pe,oe,ne);break e}oe=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,ne=typeof ve=="function"?ve.call(pe,oe,ne):ve,ne==null)break e;oe=le({},oe,ne);break e;case 2:xi=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,ne=g.effects,ne===null?g.effects=[D]:ne.push(D))}else pe={eventTime:pe,lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},se===null?(G=se=pe,j=oe):se=se.next=pe,T|=ne;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;ne=D,D=ne.next,ne.next=null,g.lastBaseUpdate=ne,g.shared.pending=null}}while(!0);if(se===null&&(j=oe),g.baseState=j,g.firstBaseUpdate=G,g.lastBaseUpdate=se,a=g.shared.interleaved,a!==null){g=a;do T|=g.lane,g=g.next;while(g!==a)}else v===null&&(g.shared.lanes=0);Co|=T,i.lanes=T,i.memoizedState=oe}}function j_(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(n(191,g));g.call(f)}}}var mu={},ys=Pi(mu),gu=Pi(mu),yu=Pi(mu);function Po(i){if(i===mu)throw Error(n(174));return i}function hp(i,a){switch(dt(yu,a),dt(gu,i),dt(ys,mu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:pi(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=pi(a,i)}yt(ys),dt(ys,a)}function ja(){yt(ys),yt(gu),yt(yu)}function U_(i){Po(yu.current);var a=Po(ys.current),u=pi(a,i.type);a!==u&&(dt(gu,i),dt(ys,u))}function dp(i){gu.current===i&&(yt(ys),yt(gu))}var St=Pi(0);function _h(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var fp=[];function pp(){for(var i=0;i<fp.length;i++)fp[i]._workInProgressVersionPrimary=null;fp.length=0}var wh=K.ReactCurrentDispatcher,mp=K.ReactCurrentBatchConfig,ko=0,It=null,Gt=null,nn=null,Eh=!1,vu=!1,_u=0,wk=0;function Sn(){throw Error(n(321))}function gp(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!$r(i[u],a[u]))return!1;return!0}function yp(i,a,u,f,g,v){if(ko=v,It=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,wh.current=i===null||i.memoizedState===null?Ik:bk,i=u(f,g),vu){v=0;do{if(vu=!1,_u=0,25<=v)throw Error(n(301));v+=1,nn=Gt=null,a.updateQueue=null,wh.current=Ak,i=u(f,g)}while(vu)}if(wh.current=Ih,a=Gt!==null&&Gt.next!==null,ko=0,nn=Gt=It=null,Eh=!1,a)throw Error(n(300));return i}function vp(){var i=_u!==0;return _u=0,i}function vs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?It.memoizedState=nn=i:nn=nn.next=i,nn}function Sr(){if(Gt===null){var i=It.alternate;i=i!==null?i.memoizedState:null}else i=Gt.next;var a=nn===null?It.memoizedState:nn.next;if(a!==null)nn=a,Gt=i;else{if(i===null)throw Error(n(310));Gt=i,i={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},nn===null?It.memoizedState=nn=i:nn=nn.next=i}return nn}function wu(i,a){return typeof a=="function"?a(i):a}function _p(i){var a=Sr(),u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var f=Gt,g=f.baseQueue,v=u.pending;if(v!==null){if(g!==null){var T=g.next;g.next=v.next,v.next=T}f.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,f=f.baseState;var D=T=null,j=null,G=v;do{var se=G.lane;if((ko&se)===se)j!==null&&(j=j.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),f=G.hasEagerState?G.eagerState:i(f,G.action);else{var oe={lane:se,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};j===null?(D=j=oe,T=f):j=j.next=oe,It.lanes|=se,Co|=se}G=G.next}while(G!==null&&G!==v);j===null?T=f:j.next=D,$r(f,a.memoizedState)||(Wn=!0),a.memoizedState=f,a.baseState=T,a.baseQueue=j,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do v=g.lane,It.lanes|=v,Co|=v,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function wp(i){var a=Sr(),u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,v=a.memoizedState;if(g!==null){u.pending=null;var T=g=g.next;do v=i(v,T.action),T=T.next;while(T!==g);$r(v,a.memoizedState)||(Wn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,f]}function F_(){}function $_(i,a){var u=It,f=Sr(),g=a(),v=!$r(f.memoizedState,g);if(v&&(f.memoizedState=g,Wn=!0),f=f.queue,Ep(W_.bind(null,u,f,i),[i]),f.getSnapshot!==a||v||nn!==null&&nn.memoizedState.tag&1){if(u.flags|=2048,Eu(9,z_.bind(null,u,f,g,a),void 0,null),rn===null)throw Error(n(349));(ko&30)!==0||B_(u,a,g)}return g}function B_(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=It.updateQueue,a===null?(a={lastEffect:null,stores:null},It.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function z_(i,a,u,f){a.value=u,a.getSnapshot=f,q_(a)&&H_(i)}function W_(i,a,u){return u(function(){q_(a)&&H_(i)})}function q_(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!$r(i,u)}catch{return!0}}function H_(i){var a=Hs(i,1);a!==null&&Hr(a,i,1,-1)}function K_(i){var a=vs();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wu,lastRenderedState:i},a.queue=i,i=i.dispatch=Sk.bind(null,It,i),[a.memoizedState,i]}function Eu(i,a,u,f){return i={tag:i,create:a,destroy:u,deps:f,next:null},a=It.updateQueue,a===null?(a={lastEffect:null,stores:null},It.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,a.lastEffect=i)),i}function G_(){return Sr().memoizedState}function Th(i,a,u,f){var g=vs();It.flags|=i,g.memoizedState=Eu(1|a,u,void 0,f===void 0?null:f)}function Sh(i,a,u,f){var g=Sr();f=f===void 0?null:f;var v=void 0;if(Gt!==null){var T=Gt.memoizedState;if(v=T.destroy,f!==null&&gp(f,T.deps)){g.memoizedState=Eu(a,u,v,f);return}}It.flags|=i,g.memoizedState=Eu(1|a,u,v,f)}function Q_(i,a){return Th(8390656,8,i,a)}function Ep(i,a){return Sh(2048,8,i,a)}function J_(i,a){return Sh(4,2,i,a)}function Y_(i,a){return Sh(4,4,i,a)}function X_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Z_(i,a,u){return u=u!=null?u.concat([i]):null,Sh(4,4,X_.bind(null,a,i),u)}function Tp(){}function ew(i,a){var u=Sr();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&gp(a,f[1])?f[0]:(u.memoizedState=[i,a],i)}function tw(i,a){var u=Sr();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&gp(a,f[1])?f[0]:(i=i(),u.memoizedState=[i,a],i)}function nw(i,a,u){return(ko&21)===0?(i.baseState&&(i.baseState=!1,Wn=!0),i.memoizedState=u):($r(u,a)||(u=Kl(),It.lanes|=u,Co|=u,i.baseState=!0),a)}function Ek(i,a){var u=Je;Je=u!==0&&4>u?u:4,i(!0);var f=mp.transition;mp.transition={};try{i(!1),a()}finally{Je=u,mp.transition=f}}function rw(){return Sr().memoizedState}function Tk(i,a,u){var f=Li(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},sw(i))iw(a,u);else if(u=V_(i,a,u,f),u!==null){var g=Vn();Hr(u,i,f,g),ow(u,a,f)}}function Sk(i,a,u){var f=Li(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(sw(i))iw(a,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var T=a.lastRenderedState,D=v(T,u);if(g.hasEagerState=!0,g.eagerState=D,$r(D,T)){var j=a.interleaved;j===null?(g.next=g,up(a)):(g.next=j.next,j.next=g),a.interleaved=g;return}}catch{}finally{}u=V_(i,a,g,f),u!==null&&(g=Vn(),Hr(u,i,f,g),ow(u,a,f))}}function sw(i){var a=i.alternate;return i===It||a!==null&&a===It}function iw(i,a){vu=Eh=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function ow(i,a,u){if((u&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,Ql(i,u)}}var Ih={readContext:Tr,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},Ik={readContext:Tr,useCallback:function(i,a){return vs().memoizedState=[i,a===void 0?null:a],i},useContext:Tr,useEffect:Q_,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,Th(4194308,4,X_.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Th(4194308,4,i,a)},useInsertionEffect:function(i,a){return Th(4,2,i,a)},useMemo:function(i,a){var u=vs();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var f=vs();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=Tk.bind(null,It,i),[f.memoizedState,i]},useRef:function(i){var a=vs();return i={current:i},a.memoizedState=i},useState:K_,useDebugValue:Tp,useDeferredValue:function(i){return vs().memoizedState=i},useTransition:function(){var i=K_(!1),a=i[0];return i=Ek.bind(null,i[1]),vs().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var f=It,g=vs();if(_t){if(u===void 0)throw Error(n(407));u=u()}else{if(u=a(),rn===null)throw Error(n(349));(ko&30)!==0||B_(f,a,u)}g.memoizedState=u;var v={value:u,getSnapshot:a};return g.queue=v,Q_(W_.bind(null,f,v,i),[i]),f.flags|=2048,Eu(9,z_.bind(null,f,v,u,a),void 0,null),u},useId:function(){var i=vs(),a=rn.identifierPrefix;if(_t){var u=qs,f=Ws;u=(f&~(1<<32-er(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=_u++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=wk++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},bk={readContext:Tr,useCallback:ew,useContext:Tr,useEffect:Ep,useImperativeHandle:Z_,useInsertionEffect:J_,useLayoutEffect:Y_,useMemo:tw,useReducer:_p,useRef:G_,useState:function(){return _p(wu)},useDebugValue:Tp,useDeferredValue:function(i){var a=Sr();return nw(a,Gt.memoizedState,i)},useTransition:function(){var i=_p(wu)[0],a=Sr().memoizedState;return[i,a]},useMutableSource:F_,useSyncExternalStore:$_,useId:rw,unstable_isNewReconciler:!1},Ak={readContext:Tr,useCallback:ew,useContext:Tr,useEffect:Ep,useImperativeHandle:Z_,useInsertionEffect:J_,useLayoutEffect:Y_,useMemo:tw,useReducer:wp,useRef:G_,useState:function(){return wp(wu)},useDebugValue:Tp,useDeferredValue:function(i){var a=Sr();return Gt===null?a.memoizedState=i:nw(a,Gt.memoizedState,i)},useTransition:function(){var i=wp(wu)[0],a=Sr().memoizedState;return[i,a]},useMutableSource:F_,useSyncExternalStore:$_,useId:rw,unstable_isNewReconciler:!1};function zr(i,a){if(i&&i.defaultProps){a=le({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function Sp(i,a,u,f){a=i.memoizedState,u=u(f,a),u=u==null?a:le({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var bh={isMounted:function(i){return(i=i._reactInternals)?Ur(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var f=Vn(),g=Li(i),v=Ks(f,g);v.payload=a,u!=null&&(v.callback=u),a=Di(i,v,g),a!==null&&(Hr(a,i,g,f),yh(a,i,g))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var f=Vn(),g=Li(i),v=Ks(f,g);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=Di(i,v,g),a!==null&&(Hr(a,i,g,f),yh(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Vn(),f=Li(i),g=Ks(u,f);g.tag=2,a!=null&&(g.callback=a),a=Di(i,g,f),a!==null&&(Hr(a,i,f,u),yh(a,i,f))}};function aw(i,a,u,f,g,v,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,v,T):a.prototype&&a.prototype.isPureReactComponent?!au(u,f)||!au(g,v):!0}function lw(i,a,u){var f=!1,g=ki,v=a.contextType;return typeof v=="object"&&v!==null?v=Tr(v):(g=zn(a)?Io:Tn.current,f=a.contextTypes,v=(f=f!=null)?xa(i,g):ki),a=new a(u,v),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=bh,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=v),a}function uw(i,a,u,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==i&&bh.enqueueReplaceState(a,a.state,null)}function Ip(i,a,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},cp(i);var v=a.contextType;typeof v=="object"&&v!==null?g.context=Tr(v):(v=zn(a)?Io:Tn.current,g.context=xa(i,v)),g.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Sp(i,a,v,u),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&bh.enqueueReplaceState(g,g.state,null),vh(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function Ua(i,a){try{var u="",f=a;do u+=Ee(f),f=f.return;while(f);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:a,stack:g,digest:null}}function bp(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function Ap(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var Rk=typeof WeakMap=="function"?WeakMap:Map;function cw(i,a,u){u=Ks(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){Dh||(Dh=!0,$p=f),Ap(i,a)},u}function hw(i,a,u){u=Ks(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;u.payload=function(){return f(g)},u.callback=function(){Ap(i,a)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Ap(i,a),typeof f!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),u}function dw(i,a,u){var f=i.pingCache;if(f===null){f=i.pingCache=new Rk;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(u)||(g.add(u),i=$k.bind(null,i,a,u),a.then(i,i))}function fw(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function pw(i,a,u,f,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Ks(-1,1),a.tag=2,Di(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var Pk=K.ReactCurrentOwner,Wn=!1;function Nn(i,a,u,f){a.child=i===null?N_(a,null,u,f):Va(a,i.child,u,f)}function mw(i,a,u,f,g){u=u.render;var v=a.ref;return Ma(a,g),f=yp(i,a,u,f,v,g),u=vp(),i!==null&&!Wn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,Gs(i,a,g)):(_t&&u&&ep(a),a.flags|=1,Nn(i,a,f,g),a.child)}function gw(i,a,u,f,g){if(i===null){var v=u.type;return typeof v=="function"&&!Gp(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=v,yw(i,a,v,f,g)):(i=jh(u.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,(i.lanes&g)===0){var T=v.memoizedProps;if(u=u.compare,u=u!==null?u:au,u(T,f)&&i.ref===a.ref)return Gs(i,a,g)}return a.flags|=1,i=ji(v,f),i.ref=a.ref,i.return=a,a.child=i}function yw(i,a,u,f,g){if(i!==null){var v=i.memoizedProps;if(au(v,f)&&i.ref===a.ref)if(Wn=!1,a.pendingProps=f=v,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Wn=!0);else return a.lanes=i.lanes,Gs(i,a,g)}return Rp(i,a,u,f,g)}function vw(i,a,u){var f=a.pendingProps,g=f.children,v=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt($a,ar),ar|=u;else{if((u&1073741824)===0)return i=v!==null?v.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,dt($a,ar),ar|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,dt($a,ar),ar|=f}else v!==null?(f=v.baseLanes|u,a.memoizedState=null):f=u,dt($a,ar),ar|=f;return Nn(i,a,g,u),a.child}function _w(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Rp(i,a,u,f,g){var v=zn(u)?Io:Tn.current;return v=xa(a,v),Ma(a,g),u=yp(i,a,u,f,v,g),f=vp(),i!==null&&!Wn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,Gs(i,a,g)):(_t&&f&&ep(a),a.flags|=1,Nn(i,a,u,g),a.child)}function ww(i,a,u,f,g){if(zn(u)){var v=!0;uh(a)}else v=!1;if(Ma(a,g),a.stateNode===null)Rh(i,a),lw(a,u,f),Ip(a,u,f,g),f=!0;else if(i===null){var T=a.stateNode,D=a.memoizedProps;T.props=D;var j=T.context,G=u.contextType;typeof G=="object"&&G!==null?G=Tr(G):(G=zn(u)?Io:Tn.current,G=xa(a,G));var se=u.getDerivedStateFromProps,oe=typeof se=="function"||typeof T.getSnapshotBeforeUpdate=="function";oe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==f||j!==G)&&uw(a,T,f,G),xi=!1;var ne=a.memoizedState;T.state=ne,vh(a,f,T,g),j=a.memoizedState,D!==f||ne!==j||Bn.current||xi?(typeof se=="function"&&(Sp(a,u,se,f),j=a.memoizedState),(D=xi||aw(a,u,D,f,ne,j,G))?(oe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=j),T.props=f,T.state=j,T.context=G,f=D):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{T=a.stateNode,L_(i,a),D=a.memoizedProps,G=a.type===a.elementType?D:zr(a.type,D),T.props=G,oe=a.pendingProps,ne=T.context,j=u.contextType,typeof j=="object"&&j!==null?j=Tr(j):(j=zn(u)?Io:Tn.current,j=xa(a,j));var pe=u.getDerivedStateFromProps;(se=typeof pe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==oe||ne!==j)&&uw(a,T,f,j),xi=!1,ne=a.memoizedState,T.state=ne,vh(a,f,T,g);var ve=a.memoizedState;D!==oe||ne!==ve||Bn.current||xi?(typeof pe=="function"&&(Sp(a,u,pe,f),ve=a.memoizedState),(G=xi||aw(a,u,G,f,ne,ve,j)||!1)?(se||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,ve,j),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,ve,j)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&ne===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&ne===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=ve),T.props=f,T.state=ve,T.context=j,f=G):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&ne===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&ne===i.memoizedState||(a.flags|=1024),f=!1)}return Pp(i,a,u,f,v,g)}function Pp(i,a,u,f,g,v){_w(i,a);var T=(a.flags&128)!==0;if(!f&&!T)return g&&b_(a,u,!1),Gs(i,a,v);f=a.stateNode,Pk.current=a;var D=T&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&T?(a.child=Va(a,i.child,null,v),a.child=Va(a,null,D,v)):Nn(i,a,D,v),a.memoizedState=f.state,g&&b_(a,u,!0),a.child}function Ew(i){var a=i.stateNode;a.pendingContext?S_(i,a.pendingContext,a.pendingContext!==a.context):a.context&&S_(i,a.context,!1),hp(i,a.containerInfo)}function Tw(i,a,u,f,g){return Na(),sp(g),a.flags|=256,Nn(i,a,u,f),a.child}var kp={dehydrated:null,treeContext:null,retryLane:0};function Cp(i){return{baseLanes:i,cachePool:null,transitions:null}}function Sw(i,a,u){var f=a.pendingProps,g=St.current,v=!1,T=(a.flags&128)!==0,D;if((D=T)||(D=i!==null&&i.memoizedState===null?!1:(g&2)!==0),D?(v=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),dt(St,g&1),i===null)return rp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=f.children,i=f.fallback,v?(f=a.mode,v=a.child,T={mode:"hidden",children:T},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=T):v=Uh(T,f,0,null),i=No(i,f,u,null),v.return=a,i.return=a,v.sibling=i,a.child=v,a.child.memoizedState=Cp(u),a.memoizedState=kp,i):xp(a,T));if(g=i.memoizedState,g!==null&&(D=g.dehydrated,D!==null))return kk(i,a,T,f,D,g,u);if(v){v=f.fallback,T=a.mode,g=i.child,D=g.sibling;var j={mode:"hidden",children:f.children};return(T&1)===0&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=j,a.deletions=null):(f=ji(g,j),f.subtreeFlags=g.subtreeFlags&14680064),D!==null?v=ji(D,v):(v=No(v,T,u,null),v.flags|=2),v.return=a,f.return=a,f.sibling=v,a.child=f,f=v,v=a.child,T=i.child.memoizedState,T=T===null?Cp(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},v.memoizedState=T,v.childLanes=i.childLanes&~u,a.memoizedState=kp,f}return v=i.child,i=v.sibling,f=ji(v,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=u),f.return=a,f.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=f,a.memoizedState=null,f}function xp(i,a){return a=Uh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Ah(i,a,u,f){return f!==null&&sp(f),Va(a,i.child,null,u),i=xp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function kk(i,a,u,f,g,v,T){if(u)return a.flags&256?(a.flags&=-257,f=bp(Error(n(422))),Ah(i,a,T,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(v=f.fallback,g=a.mode,f=Uh({mode:"visible",children:f.children},g,0,null),v=No(v,g,T,null),v.flags|=2,f.return=a,v.return=a,f.sibling=v,a.child=f,(a.mode&1)!==0&&Va(a,i.child,null,T),a.child.memoizedState=Cp(T),a.memoizedState=kp,v);if((a.mode&1)===0)return Ah(i,a,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var D=f.dgst;return f=D,v=Error(n(419)),f=bp(v,f,void 0),Ah(i,a,T,f)}if(D=(T&i.childLanes)!==0,Wn||D){if(f=rn,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,Hs(i,g),Hr(f,i,g,-1))}return Kp(),f=bp(Error(n(421))),Ah(i,a,T,f)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=Bk.bind(null,i),g._reactRetry=a,null):(i=v.treeContext,or=Ri(g.nextSibling),ir=a,_t=!0,Br=null,i!==null&&(wr[Er++]=Ws,wr[Er++]=qs,wr[Er++]=bo,Ws=i.id,qs=i.overflow,bo=a),a=xp(a,f.children),a.flags|=4096,a)}function Iw(i,a,u){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),lp(i.return,a,u)}function Dp(i,a,u,f,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=g)}function bw(i,a,u){var f=a.pendingProps,g=f.revealOrder,v=f.tail;if(Nn(i,a,f.children,u),f=St.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Iw(i,u,a);else if(i.tag===19)Iw(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(dt(St,f),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)i=u.alternate,i!==null&&_h(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),Dp(a,!1,g,u,v);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&_h(i)===null){a.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Dp(a,!0,u,null,v);break;case"together":Dp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Rh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Gs(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Co|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,u=ji(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=ji(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function Ck(i,a,u){switch(a.tag){case 3:Ew(a),Na();break;case 5:U_(a);break;case 1:zn(a.type)&&uh(a);break;case 4:hp(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;dt(mh,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(dt(St,St.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?Sw(i,a,u):(dt(St,St.current&1),i=Gs(i,a,u),i!==null?i.sibling:null);dt(St,St.current&1);break;case 19:if(f=(u&a.childLanes)!==0,(i.flags&128)!==0){if(f)return bw(i,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),dt(St,St.current),f)break;return null;case 22:case 23:return a.lanes=0,vw(i,a,u)}return Gs(i,a,u)}var Aw,Op,Rw,Pw;Aw=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Op=function(){},Rw=function(i,a,u,f){var g=i.memoizedProps;if(g!==f){i=a.stateNode,Po(ys.current);var v=null;switch(u){case"input":g=Y(i,g),f=Y(i,f),v=[];break;case"select":g=le({},g,{value:void 0}),f=le({},f,{value:void 0}),v=[];break;case"textarea":g=Nt(i,g),f=Nt(i,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=oh)}$n(u,f);var T;u=null;for(G in g)if(!f.hasOwnProperty(G)&&g.hasOwnProperty(G)&&g[G]!=null)if(G==="style"){var D=g[G];for(T in D)D.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?v||(v=[]):(v=v||[]).push(G,null));for(G in f){var j=f[G];if(D=g?.[G],f.hasOwnProperty(G)&&j!==D&&(j!=null||D!=null))if(G==="style")if(D){for(T in D)!D.hasOwnProperty(T)||j&&j.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in j)j.hasOwnProperty(T)&&D[T]!==j[T]&&(u||(u={}),u[T]=j[T])}else u||(v||(v=[]),v.push(G,u)),u=j;else G==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,D=D?D.__html:void 0,j!=null&&D!==j&&(v=v||[]).push(G,j)):G==="children"?typeof j!="string"&&typeof j!="number"||(v=v||[]).push(G,""+j):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(s.hasOwnProperty(G)?(j!=null&&G==="onScroll"&&gt("scroll",i),v||D===j||(v=[])):(v=v||[]).push(G,j))}u&&(v=v||[]).push("style",u);var G=v;(a.updateQueue=G)&&(a.flags|=4)}},Pw=function(i,a,u,f){u!==f&&(a.flags|=4)};function Tu(i,a){if(!_t)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function In(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(a)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,a}function xk(i,a,u){var f=a.pendingProps;switch(tp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(a),null;case 1:return zn(a.type)&&lh(),In(a),null;case 3:return f=a.stateNode,ja(),yt(Bn),yt(Tn),pp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(fh(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Br!==null&&(Wp(Br),Br=null))),Op(i,a),In(a),null;case 5:dp(a);var g=Po(yu.current);if(u=a.type,i!==null&&a.stateNode!=null)Rw(i,a,u,f,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(n(166));return In(a),null}if(i=Po(ys.current),fh(a)){f=a.stateNode,u=a.type;var v=a.memoizedProps;switch(f[gs]=a,f[du]=v,i=(a.mode&1)!==0,u){case"dialog":gt("cancel",f),gt("close",f);break;case"iframe":case"object":case"embed":gt("load",f);break;case"video":case"audio":for(g=0;g<uu.length;g++)gt(uu[g],f);break;case"source":gt("error",f);break;case"img":case"image":case"link":gt("error",f),gt("load",f);break;case"details":gt("toggle",f);break;case"input":he(f,v),gt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},gt("invalid",f);break;case"textarea":_n(f,v),gt("invalid",f)}$n(u,v),g=null;for(var T in v)if(v.hasOwnProperty(T)){var D=v[T];T==="children"?typeof D=="string"?f.textContent!==D&&(v.suppressHydrationWarning!==!0&&ih(f.textContent,D,i),g=["children",D]):typeof D=="number"&&f.textContent!==""+D&&(v.suppressHydrationWarning!==!0&&ih(f.textContent,D,i),g=["children",""+D]):s.hasOwnProperty(T)&&D!=null&&T==="onScroll"&&gt("scroll",f)}switch(u){case"input":Yn(f),Tt(f,v,!0);break;case"textarea":Yn(f),rt(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=oh)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Vt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=T.createElement(u,{is:f.is}):(i=T.createElement(u),u==="select"&&(T=i,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):i=T.createElementNS(i,u),i[gs]=a,i[du]=f,Aw(i,a,!1,!1),a.stateNode=i;e:{switch(T=vi(u,f),u){case"dialog":gt("cancel",i),gt("close",i),g=f;break;case"iframe":case"object":case"embed":gt("load",i),g=f;break;case"video":case"audio":for(g=0;g<uu.length;g++)gt(uu[g],i);g=f;break;case"source":gt("error",i),g=f;break;case"img":case"image":case"link":gt("error",i),gt("load",i),g=f;break;case"details":gt("toggle",i),g=f;break;case"input":he(i,f),g=Y(i,f),gt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=le({},f,{value:void 0}),gt("invalid",i);break;case"textarea":_n(i,f),g=Nt(i,f),gt("invalid",i);break;default:g=f}$n(u,g),D=g;for(v in D)if(D.hasOwnProperty(v)){var j=D[v];v==="style"?gi(i,j):v==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&mi(i,j)):v==="children"?typeof j=="string"?(u!=="textarea"||j!=="")&&Fn(i,j):typeof j=="number"&&Fn(i,""+j):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?j!=null&&v==="onScroll"&&gt("scroll",i):j!=null&&N(i,v,j,T))}switch(u){case"input":Yn(i),Tt(i,f,!1);break;case"textarea":Yn(i),rt(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Te(f.value));break;case"select":i.multiple=!!f.multiple,v=f.value,v!=null?xn(i,!!f.multiple,v,!1):f.defaultValue!=null&&xn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=oh)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return In(a),null;case 6:if(i&&a.stateNode!=null)Pw(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(n(166));if(u=Po(yu.current),Po(ys.current),fh(a)){if(f=a.stateNode,u=a.memoizedProps,f[gs]=a,(v=f.nodeValue!==u)&&(i=ir,i!==null))switch(i.tag){case 3:ih(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ih(f.nodeValue,u,(i.mode&1)!==0)}v&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[gs]=a,a.stateNode=f}return In(a),null;case 13:if(yt(St),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(_t&&or!==null&&(a.mode&1)!==0&&(a.flags&128)===0)x_(),Na(),a.flags|=98560,v=!1;else if(v=fh(a),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(n(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[gs]=a}else Na(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;In(a),v=!1}else Br!==null&&(Wp(Br),Br=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(St.current&1)!==0?Qt===0&&(Qt=3):Kp())),a.updateQueue!==null&&(a.flags|=4),In(a),null);case 4:return ja(),Op(i,a),i===null&&cu(a.stateNode.containerInfo),In(a),null;case 10:return ap(a.type._context),In(a),null;case 17:return zn(a.type)&&lh(),In(a),null;case 19:if(yt(St),v=a.memoizedState,v===null)return In(a),null;if(f=(a.flags&128)!==0,T=v.rendering,T===null)if(f)Tu(v,!1);else{if(Qt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(T=_h(i),T!==null){for(a.flags|=128,Tu(v,!1),f=T.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)v=u,i=f,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,i=T.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return dt(St,St.current&1|2),a.child}i=i.sibling}v.tail!==null&&mt()>Ba&&(a.flags|=128,f=!0,Tu(v,!1),a.lanes=4194304)}else{if(!f)if(i=_h(T),i!==null){if(a.flags|=128,f=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Tu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!_t)return In(a),null}else 2*mt()-v.renderingStartTime>Ba&&u!==1073741824&&(a.flags|=128,f=!0,Tu(v,!1),a.lanes=4194304);v.isBackwards?(T.sibling=a.child,a.child=T):(u=v.last,u!==null?u.sibling=T:a.child=T,v.last=T)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=mt(),a.sibling=null,u=St.current,dt(St,f?u&1|2:u&1),a):(In(a),null);case 22:case 23:return Hp(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(ar&1073741824)!==0&&(In(a),a.subtreeFlags&6&&(a.flags|=8192)):In(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function Dk(i,a){switch(tp(a),a.tag){case 1:return zn(a.type)&&lh(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ja(),yt(Bn),yt(Tn),pp(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return dp(a),null;case 13:if(yt(St),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Na()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return yt(St),null;case 4:return ja(),null;case 10:return ap(a.type._context),null;case 22:case 23:return Hp(),null;case 24:return null;default:return null}}var Ph=!1,bn=!1,Ok=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Fa(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){xt(i,a,f)}else u.current=null}function Np(i,a,u){try{u()}catch(f){xt(i,a,f)}}var kw=!1;function Nk(i,a){if(Hf=Us,i=a_(),jf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var T=0,D=-1,j=-1,G=0,se=0,oe=i,ne=null;t:for(;;){for(var pe;oe!==u||g!==0&&oe.nodeType!==3||(D=T+g),oe!==v||f!==0&&oe.nodeType!==3||(j=T+f),oe.nodeType===3&&(T+=oe.nodeValue.length),(pe=oe.firstChild)!==null;)ne=oe,oe=pe;for(;;){if(oe===i)break t;if(ne===u&&++G===g&&(D=T),ne===v&&++se===f&&(j=T),(pe=oe.nextSibling)!==null)break;oe=ne,ne=oe.parentNode}oe=pe}u=D===-1||j===-1?null:{start:D,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(Kf={focusedElem:i,selectionRange:u},Us=!1,ye=a;ye!==null;)if(a=ye,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ye=i;else for(;ye!==null;){a=ye;try{var ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var we=ve.memoizedProps,jt=ve.memoizedState,z=a.stateNode,F=z.getSnapshotBeforeUpdate(a.elementType===a.type?we:zr(a.type,we),jt);z.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var q=a.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ae){xt(a,a.return,ae)}if(i=a.sibling,i!==null){i.return=a.return,ye=i;break}ye=a.return}return ve=kw,kw=!1,ve}function Su(i,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var v=g.destroy;g.destroy=void 0,v!==void 0&&Np(a,u,v)}g=g.next}while(g!==f)}}function kh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function Vp(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function Cw(i){var a=i.alternate;a!==null&&(i.alternate=null,Cw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[gs],delete a[du],delete a[Yf],delete a[gk],delete a[yk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function xw(i){return i.tag===5||i.tag===3||i.tag===4}function Dw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||xw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lp(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=oh));else if(f!==4&&(i=i.child,i!==null))for(Lp(i,a,u),i=i.sibling;i!==null;)Lp(i,a,u),i=i.sibling}function Mp(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Mp(i,a,u),i=i.sibling;i!==null;)Mp(i,a,u),i=i.sibling}var hn=null,Wr=!1;function Oi(i,a,u){for(u=u.child;u!==null;)Ow(i,a,u),u=u.sibling}function Ow(i,a,u){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(po,u)}catch{}switch(u.tag){case 5:bn||Fa(u,a);case 6:var f=hn,g=Wr;hn=null,Oi(i,a,u),hn=f,Wr=g,hn!==null&&(Wr?(i=hn,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):hn.removeChild(u.stateNode));break;case 18:hn!==null&&(Wr?(i=hn,u=u.stateNode,i.nodeType===8?Jf(i.parentNode,u):i.nodeType===1&&Jf(i,u),Si(i)):Jf(hn,u.stateNode));break;case 4:f=hn,g=Wr,hn=u.stateNode.containerInfo,Wr=!0,Oi(i,a,u),hn=f,Wr=g;break;case 0:case 11:case 14:case 15:if(!bn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,T=v.destroy;v=v.tag,T!==void 0&&((v&2)!==0||(v&4)!==0)&&Np(u,a,T),g=g.next}while(g!==f)}Oi(i,a,u);break;case 1:if(!bn&&(Fa(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(D){xt(u,a,D)}Oi(i,a,u);break;case 21:Oi(i,a,u);break;case 22:u.mode&1?(bn=(f=bn)||u.memoizedState!==null,Oi(i,a,u),bn=f):Oi(i,a,u);break;default:Oi(i,a,u)}}function Nw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new Ok),a.forEach(function(f){var g=zk.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function qr(i,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var v=i,T=a,D=T;e:for(;D!==null;){switch(D.tag){case 5:hn=D.stateNode,Wr=!1;break e;case 3:hn=D.stateNode.containerInfo,Wr=!0;break e;case 4:hn=D.stateNode.containerInfo,Wr=!0;break e}D=D.return}if(hn===null)throw Error(n(160));Ow(v,T,g),hn=null,Wr=!1;var j=g.alternate;j!==null&&(j.return=null),g.return=null}catch(G){xt(g,a,G)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Vw(a,i),a=a.sibling}function Vw(i,a){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(qr(a,i),_s(i),f&4){try{Su(3,i,i.return),kh(3,i)}catch(we){xt(i,i.return,we)}try{Su(5,i,i.return)}catch(we){xt(i,i.return,we)}}break;case 1:qr(a,i),_s(i),f&512&&u!==null&&Fa(u,u.return);break;case 5:if(qr(a,i),_s(i),f&512&&u!==null&&Fa(u,u.return),i.flags&32){var g=i.stateNode;try{Fn(g,"")}catch(we){xt(i,i.return,we)}}if(f&4&&(g=i.stateNode,g!=null)){var v=i.memoizedProps,T=u!==null?u.memoizedProps:v,D=i.type,j=i.updateQueue;if(i.updateQueue=null,j!==null)try{D==="input"&&v.type==="radio"&&v.name!=null&&xe(g,v),vi(D,T);var G=vi(D,v);for(T=0;T<j.length;T+=2){var se=j[T],oe=j[T+1];se==="style"?gi(g,oe):se==="dangerouslySetInnerHTML"?mi(g,oe):se==="children"?Fn(g,oe):N(g,se,oe,G)}switch(D){case"input":Ze(g,v);break;case"textarea":fi(g,v);break;case"select":var ne=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var pe=v.value;pe!=null?xn(g,!!v.multiple,pe,!1):ne!==!!v.multiple&&(v.defaultValue!=null?xn(g,!!v.multiple,v.defaultValue,!0):xn(g,!!v.multiple,v.multiple?[]:"",!1))}g[du]=v}catch(we){xt(i,i.return,we)}}break;case 6:if(qr(a,i),_s(i),f&4){if(i.stateNode===null)throw Error(n(162));g=i.stateNode,v=i.memoizedProps;try{g.nodeValue=v}catch(we){xt(i,i.return,we)}}break;case 3:if(qr(a,i),_s(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Si(a.containerInfo)}catch(we){xt(i,i.return,we)}break;case 4:qr(a,i),_s(i);break;case 13:qr(a,i),_s(i),g=i.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Fp=mt())),f&4&&Nw(i);break;case 22:if(se=u!==null&&u.memoizedState!==null,i.mode&1?(bn=(G=bn)||se,qr(a,i),bn=G):qr(a,i),_s(i),f&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!se&&(i.mode&1)!==0)for(ye=i,se=i.child;se!==null;){for(oe=ye=se;ye!==null;){switch(ne=ye,pe=ne.child,ne.tag){case 0:case 11:case 14:case 15:Su(4,ne,ne.return);break;case 1:Fa(ne,ne.return);var ve=ne.stateNode;if(typeof ve.componentWillUnmount=="function"){f=ne,u=ne.return;try{a=f,ve.props=a.memoizedProps,ve.state=a.memoizedState,ve.componentWillUnmount()}catch(we){xt(f,u,we)}}break;case 5:Fa(ne,ne.return);break;case 22:if(ne.memoizedState!==null){jw(oe);continue}}pe!==null?(pe.return=ne,ye=pe):jw(oe)}se=se.sibling}e:for(se=null,oe=i;;){if(oe.tag===5){if(se===null){se=oe;try{g=oe.stateNode,G?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(D=oe.stateNode,j=oe.memoizedProps.style,T=j!=null&&j.hasOwnProperty("display")?j.display:null,D.style.display=rs("display",T))}catch(we){xt(i,i.return,we)}}}else if(oe.tag===6){if(se===null)try{oe.stateNode.nodeValue=G?"":oe.memoizedProps}catch(we){xt(i,i.return,we)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===i)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===i)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===i)break e;se===oe&&(se=null),oe=oe.return}se===oe&&(se=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:qr(a,i),_s(i),f&4&&Nw(i);break;case 21:break;default:qr(a,i),_s(i)}}function _s(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(xw(u)){var f=u;break e}u=u.return}throw Error(n(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Fn(g,""),f.flags&=-33);var v=Dw(i);Mp(i,v,g);break;case 3:case 4:var T=f.stateNode.containerInfo,D=Dw(i);Lp(i,D,T);break;default:throw Error(n(161))}}catch(j){xt(i,i.return,j)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Vk(i,a,u){ye=i,Lw(i)}function Lw(i,a,u){for(var f=(i.mode&1)!==0;ye!==null;){var g=ye,v=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||Ph;if(!T){var D=g.alternate,j=D!==null&&D.memoizedState!==null||bn;D=Ph;var G=bn;if(Ph=T,(bn=j)&&!G)for(ye=g;ye!==null;)T=ye,j=T.child,T.tag===22&&T.memoizedState!==null?Uw(g):j!==null?(j.return=T,ye=j):Uw(g);for(;v!==null;)ye=v,Lw(v),v=v.sibling;ye=g,Ph=D,bn=G}Mw(i)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,ye=v):Mw(i)}}function Mw(i){for(;ye!==null;){var a=ye;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:bn||kh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!bn)if(u===null)f.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:zr(a.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&j_(a,v,f);break;case 3:var T=a.updateQueue;if(T!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}j_(a,T,u)}break;case 5:var D=a.stateNode;if(u===null&&a.flags&4){u=D;var j=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&u.focus();break;case"img":j.src&&(u.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var G=a.alternate;if(G!==null){var se=G.memoizedState;if(se!==null){var oe=se.dehydrated;oe!==null&&Si(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}bn||a.flags&512&&Vp(a)}catch(ne){xt(a,a.return,ne)}}if(a===i){ye=null;break}if(u=a.sibling,u!==null){u.return=a.return,ye=u;break}ye=a.return}}function jw(i){for(;ye!==null;){var a=ye;if(a===i){ye=null;break}var u=a.sibling;if(u!==null){u.return=a.return,ye=u;break}ye=a.return}}function Uw(i){for(;ye!==null;){var a=ye;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{kh(4,a)}catch(j){xt(a,u,j)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(j){xt(a,g,j)}}var v=a.return;try{Vp(a)}catch(j){xt(a,v,j)}break;case 5:var T=a.return;try{Vp(a)}catch(j){xt(a,T,j)}}}catch(j){xt(a,a.return,j)}if(a===i){ye=null;break}var D=a.sibling;if(D!==null){D.return=a.return,ye=D;break}ye=a.return}}var Lk=Math.ceil,Ch=K.ReactCurrentDispatcher,jp=K.ReactCurrentOwner,Ir=K.ReactCurrentBatchConfig,et=0,rn=null,zt=null,dn=0,ar=0,$a=Pi(0),Qt=0,Iu=null,Co=0,xh=0,Up=0,bu=null,qn=null,Fp=0,Ba=1/0,Qs=null,Dh=!1,$p=null,Ni=null,Oh=!1,Vi=null,Nh=0,Au=0,Bp=null,Vh=-1,Lh=0;function Vn(){return(et&6)!==0?mt():Vh!==-1?Vh:Vh=mt()}function Li(i){return(i.mode&1)===0?1:(et&2)!==0&&dn!==0?dn&-dn:_k.transition!==null?(Lh===0&&(Lh=Kl()),Lh):(i=Je,i!==0||(i=window.event,i=i===void 0?16:ya(i.type)),i)}function Hr(i,a,u,f){if(50<Au)throw Au=0,Bp=null,Error(n(185));vo(i,u,f),((et&2)===0||i!==rn)&&(i===rn&&((et&2)===0&&(xh|=u),Qt===4&&Mi(i,dn)),Hn(i,f),u===1&&et===0&&(a.mode&1)===0&&(Ba=mt()+500,ch&&Ci()))}function Hn(i,a){var u=i.callbackNode;yo(i,a);var f=Ls(i,i===rn?dn:0);if(f===0)u!==null&&ca(u),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(u!=null&&ca(u),a===1)i.tag===0?vk($w.bind(null,i)):A_($w.bind(null,i)),pk(function(){(et&6)===0&&Ci()}),u=null;else{switch(os(f)){case 1:u=ha;break;case 4:u=Wl;break;case 16:u=fo;break;case 536870912:u=da;break;default:u=fo}u=Qw(u,Fw.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function Fw(i,a){if(Vh=-1,Lh=0,(et&6)!==0)throw Error(n(327));var u=i.callbackNode;if(za()&&i.callbackNode!==u)return null;var f=Ls(i,i===rn?dn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=Mh(i,f);else{a=f;var g=et;et|=2;var v=zw();(rn!==i||dn!==a)&&(Qs=null,Ba=mt()+500,Do(i,a));do try{Uk();break}catch(D){Bw(i,D)}while(!0);op(),Ch.current=v,et=g,zt!==null?a=0:(rn=null,dn=0,a=Qt)}if(a!==0){if(a===2&&(g=Hl(i),g!==0&&(f=g,a=zp(i,g))),a===1)throw u=Iu,Do(i,0),Mi(i,f),Hn(i,mt()),u;if(a===6)Mi(i,f);else{if(g=i.current.alternate,(f&30)===0&&!Mk(g)&&(a=Mh(i,f),a===2&&(v=Hl(i),v!==0&&(f=v,a=zp(i,v))),a===1))throw u=Iu,Do(i,0),Mi(i,f),Hn(i,mt()),u;switch(i.finishedWork=g,i.finishedLanes=f,a){case 0:case 1:throw Error(n(345));case 2:Oo(i,qn,Qs);break;case 3:if(Mi(i,f),(f&130023424)===f&&(a=Fp+500-mt(),10<a)){if(Ls(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Vn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Qf(Oo.bind(null,i,qn,Qs),a);break}Oo(i,qn,Qs);break;case 4:if(Mi(i,f),(f&4194240)===f)break;for(a=i.eventTimes,g=-1;0<f;){var T=31-er(f);v=1<<T,T=a[T],T>g&&(g=T),f&=~v}if(f=g,f=mt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Lk(f/1960))-f,10<f){i.timeoutHandle=Qf(Oo.bind(null,i,qn,Qs),f);break}Oo(i,qn,Qs);break;case 5:Oo(i,qn,Qs);break;default:throw Error(n(329))}}}return Hn(i,mt()),i.callbackNode===u?Fw.bind(null,i):null}function zp(i,a){var u=bu;return i.current.memoizedState.isDehydrated&&(Do(i,a).flags|=256),i=Mh(i,a),i!==2&&(a=qn,qn=u,a!==null&&Wp(a)),i}function Wp(i){qn===null?qn=i:qn.push.apply(qn,i)}function Mk(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],v=g.getSnapshot;g=g.value;try{if(!$r(v(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Mi(i,a){for(a&=~Up,a&=~xh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-er(a),f=1<<u;i[u]=-1,a&=~f}}function $w(i){if((et&6)!==0)throw Error(n(327));za();var a=Ls(i,0);if((a&1)===0)return Hn(i,mt()),null;var u=Mh(i,a);if(i.tag!==0&&u===2){var f=Hl(i);f!==0&&(a=f,u=zp(i,f))}if(u===1)throw u=Iu,Do(i,0),Mi(i,a),Hn(i,mt()),u;if(u===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Oo(i,qn,Qs),Hn(i,mt()),null}function qp(i,a){var u=et;et|=1;try{return i(a)}finally{et=u,et===0&&(Ba=mt()+500,ch&&Ci())}}function xo(i){Vi!==null&&Vi.tag===0&&(et&6)===0&&za();var a=et;et|=1;var u=Ir.transition,f=Je;try{if(Ir.transition=null,Je=1,i)return i()}finally{Je=f,Ir.transition=u,et=a,(et&6)===0&&Ci()}}function Hp(){ar=$a.current,yt($a)}function Do(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,fk(u)),zt!==null)for(u=zt.return;u!==null;){var f=u;switch(tp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&lh();break;case 3:ja(),yt(Bn),yt(Tn),pp();break;case 5:dp(f);break;case 4:ja();break;case 13:yt(St);break;case 19:yt(St);break;case 10:ap(f.type._context);break;case 22:case 23:Hp()}u=u.return}if(rn=i,zt=i=ji(i.current,null),dn=ar=a,Qt=0,Iu=null,Up=xh=Co=0,qn=bu=null,Ro!==null){for(a=0;a<Ro.length;a++)if(u=Ro[a],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,v=u.pending;if(v!==null){var T=v.next;v.next=g,f.next=T}u.pending=f}Ro=null}return i}function Bw(i,a){do{var u=zt;try{if(op(),wh.current=Ih,Eh){for(var f=It.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Eh=!1}if(ko=0,nn=Gt=It=null,vu=!1,_u=0,jp.current=null,u===null||u.return===null){Qt=1,Iu=a,zt=null;break}e:{var v=i,T=u.return,D=u,j=a;if(a=dn,D.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var G=j,se=D,oe=se.tag;if((se.mode&1)===0&&(oe===0||oe===11||oe===15)){var ne=se.alternate;ne?(se.updateQueue=ne.updateQueue,se.memoizedState=ne.memoizedState,se.lanes=ne.lanes):(se.updateQueue=null,se.memoizedState=null)}var pe=fw(T);if(pe!==null){pe.flags&=-257,pw(pe,T,D,v,a),pe.mode&1&&dw(v,G,a),a=pe,j=G;var ve=a.updateQueue;if(ve===null){var we=new Set;we.add(j),a.updateQueue=we}else ve.add(j);break e}else{if((a&1)===0){dw(v,G,a),Kp();break e}j=Error(n(426))}}else if(_t&&D.mode&1){var jt=fw(T);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),pw(jt,T,D,v,a),sp(Ua(j,D));break e}}v=j=Ua(j,D),Qt!==4&&(Qt=2),bu===null?bu=[v]:bu.push(v),v=T;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var z=cw(v,j,a);M_(v,z);break e;case 1:D=j;var F=v.type,q=v.stateNode;if((v.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Ni===null||!Ni.has(q)))){v.flags|=65536,a&=-a,v.lanes|=a;var ae=hw(v,D,a);M_(v,ae);break e}}v=v.return}while(v!==null)}qw(u)}catch(Se){a=Se,zt===u&&u!==null&&(zt=u=u.return);continue}break}while(!0)}function zw(){var i=Ch.current;return Ch.current=Ih,i===null?Ih:i}function Kp(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),rn===null||(Co&268435455)===0&&(xh&268435455)===0||Mi(rn,dn)}function Mh(i,a){var u=et;et|=2;var f=zw();(rn!==i||dn!==a)&&(Qs=null,Do(i,a));do try{jk();break}catch(g){Bw(i,g)}while(!0);if(op(),et=u,Ch.current=f,zt!==null)throw Error(n(261));return rn=null,dn=0,Qt}function jk(){for(;zt!==null;)Ww(zt)}function Uk(){for(;zt!==null&&!ho();)Ww(zt)}function Ww(i){var a=Gw(i.alternate,i,ar);i.memoizedProps=i.pendingProps,a===null?qw(i):zt=a,jp.current=null}function qw(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=xk(u,a,ar),u!==null){zt=u;return}}else{if(u=Dk(u,a),u!==null){u.flags&=32767,zt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Qt=6,zt=null;return}}if(a=a.sibling,a!==null){zt=a;return}zt=a=i}while(a!==null);Qt===0&&(Qt=5)}function Oo(i,a,u){var f=Je,g=Ir.transition;try{Ir.transition=null,Je=1,Fk(i,a,u,f)}finally{Ir.transition=g,Je=f}return null}function Fk(i,a,u,f){do za();while(Vi!==null);if((et&6)!==0)throw Error(n(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var v=u.lanes|u.childLanes;if(Of(i,v),i===rn&&(zt=rn=null,dn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Oh||(Oh=!0,Qw(fo,function(){return za(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=Ir.transition,Ir.transition=null;var T=Je;Je=1;var D=et;et|=4,jp.current=null,Nk(i,u),Vw(u,i),ok(Kf),Us=!!Hf,Kf=Hf=null,i.current=u,Vk(u),Vs(),et=D,Je=T,Ir.transition=v}else i.current=u;if(Oh&&(Oh=!1,Vi=i,Nh=g),v=i.pendingLanes,v===0&&(Ni=null),Wc(u.stateNode),Hn(i,mt()),a!==null)for(f=i.onRecoverableError,u=0;u<a.length;u++)g=a[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Dh)throw Dh=!1,i=$p,$p=null,i;return(Nh&1)!==0&&i.tag!==0&&za(),v=i.pendingLanes,(v&1)!==0?i===Bp?Au++:(Au=0,Bp=i):Au=0,Ci(),null}function za(){if(Vi!==null){var i=os(Nh),a=Ir.transition,u=Je;try{if(Ir.transition=null,Je=16>i?16:i,Vi===null)var f=!1;else{if(i=Vi,Vi=null,Nh=0,(et&6)!==0)throw Error(n(331));var g=et;for(et|=4,ye=i.current;ye!==null;){var v=ye,T=v.child;if((ye.flags&16)!==0){var D=v.deletions;if(D!==null){for(var j=0;j<D.length;j++){var G=D[j];for(ye=G;ye!==null;){var se=ye;switch(se.tag){case 0:case 11:case 15:Su(8,se,v)}var oe=se.child;if(oe!==null)oe.return=se,ye=oe;else for(;ye!==null;){se=ye;var ne=se.sibling,pe=se.return;if(Cw(se),se===G){ye=null;break}if(ne!==null){ne.return=pe,ye=ne;break}ye=pe}}}var ve=v.alternate;if(ve!==null){var we=ve.child;if(we!==null){ve.child=null;do{var jt=we.sibling;we.sibling=null,we=jt}while(we!==null)}}ye=v}}if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,ye=T;else e:for(;ye!==null;){if(v=ye,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Su(9,v,v.return)}var z=v.sibling;if(z!==null){z.return=v.return,ye=z;break e}ye=v.return}}var F=i.current;for(ye=F;ye!==null;){T=ye;var q=T.child;if((T.subtreeFlags&2064)!==0&&q!==null)q.return=T,ye=q;else e:for(T=F;ye!==null;){if(D=ye,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:kh(9,D)}}catch(Se){xt(D,D.return,Se)}if(D===T){ye=null;break e}var ae=D.sibling;if(ae!==null){ae.return=D.return,ye=ae;break e}ye=D.return}}if(et=g,Ci(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(po,i)}catch{}f=!0}return f}finally{Je=u,Ir.transition=a}}return!1}function Hw(i,a,u){a=Ua(u,a),a=cw(i,a,1),i=Di(i,a,1),a=Vn(),i!==null&&(vo(i,1,a),Hn(i,a))}function xt(i,a,u){if(i.tag===3)Hw(i,i,u);else for(;a!==null;){if(a.tag===3){Hw(a,i,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ni===null||!Ni.has(f))){i=Ua(u,i),i=hw(a,i,1),a=Di(a,i,1),i=Vn(),a!==null&&(vo(a,1,i),Hn(a,i));break}}a=a.return}}function $k(i,a,u){var f=i.pingCache;f!==null&&f.delete(a),a=Vn(),i.pingedLanes|=i.suspendedLanes&u,rn===i&&(dn&u)===u&&(Qt===4||Qt===3&&(dn&130023424)===dn&&500>mt()-Fp?Do(i,0):Up|=u),Hn(i,a)}function Kw(i,a){a===0&&((i.mode&1)===0?a=1:(a=wi,wi<<=1,(wi&130023424)===0&&(wi=4194304)));var u=Vn();i=Hs(i,a),i!==null&&(vo(i,a,u),Hn(i,u))}function Bk(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Kw(i,u)}function zk(i,a){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(a),Kw(i,u)}var Gw;Gw=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||Bn.current)Wn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return Wn=!1,Ck(i,a,u);Wn=(i.flags&131072)!==0}else Wn=!1,_t&&(a.flags&1048576)!==0&&R_(a,dh,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Rh(i,a),i=a.pendingProps;var g=xa(a,Tn.current);Ma(a,u),g=yp(null,a,f,i,g,u);var v=vp();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,zn(f)?(v=!0,uh(a)):v=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,cp(a),g.updater=bh,a.stateNode=g,g._reactInternals=a,Ip(a,f,i,u),a=Pp(null,a,f,!0,v,u)):(a.tag=0,_t&&v&&ep(a),Nn(null,a,g,u),a=a.child),a;case 16:f=a.elementType;e:{switch(Rh(i,a),i=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=qk(f),i=zr(f,i),g){case 0:a=Rp(null,a,f,i,u);break e;case 1:a=ww(null,a,f,i,u);break e;case 11:a=mw(null,a,f,i,u);break e;case 14:a=gw(null,a,f,zr(f.type,i),u);break e}throw Error(n(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:zr(f,g),Rp(i,a,f,g,u);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:zr(f,g),ww(i,a,f,g,u);case 3:e:{if(Ew(a),i===null)throw Error(n(387));f=a.pendingProps,v=a.memoizedState,g=v.element,L_(i,a),vh(a,f,null,u);var T=a.memoizedState;if(f=T.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){g=Ua(Error(n(423)),a),a=Tw(i,a,f,u,g);break e}else if(f!==g){g=Ua(Error(n(424)),a),a=Tw(i,a,f,u,g);break e}else for(or=Ri(a.stateNode.containerInfo.firstChild),ir=a,_t=!0,Br=null,u=N_(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Na(),f===g){a=Gs(i,a,u);break e}Nn(i,a,f,u)}a=a.child}return a;case 5:return U_(a),i===null&&rp(a),f=a.type,g=a.pendingProps,v=i!==null?i.memoizedProps:null,T=g.children,Gf(f,g)?T=null:v!==null&&Gf(f,v)&&(a.flags|=32),_w(i,a),Nn(i,a,T,u),a.child;case 6:return i===null&&rp(a),null;case 13:return Sw(i,a,u);case 4:return hp(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=Va(a,null,f,u):Nn(i,a,f,u),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:zr(f,g),mw(i,a,f,g,u);case 7:return Nn(i,a,a.pendingProps,u),a.child;case 8:return Nn(i,a,a.pendingProps.children,u),a.child;case 12:return Nn(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,v=a.memoizedProps,T=g.value,dt(mh,f._currentValue),f._currentValue=T,v!==null)if($r(v.value,T)){if(v.children===g.children&&!Bn.current){a=Gs(i,a,u);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var D=v.dependencies;if(D!==null){T=v.child;for(var j=D.firstContext;j!==null;){if(j.context===f){if(v.tag===1){j=Ks(-1,u&-u),j.tag=2;var G=v.updateQueue;if(G!==null){G=G.shared;var se=G.pending;se===null?j.next=j:(j.next=se.next,se.next=j),G.pending=j}}v.lanes|=u,j=v.alternate,j!==null&&(j.lanes|=u),lp(v.return,u,a),D.lanes|=u;break}j=j.next}}else if(v.tag===10)T=v.type===a.type?null:v.child;else if(v.tag===18){if(T=v.return,T===null)throw Error(n(341));T.lanes|=u,D=T.alternate,D!==null&&(D.lanes|=u),lp(T,u,a),T=v.sibling}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===a){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}Nn(i,a,g.children,u),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,Ma(a,u),g=Tr(g),f=f(g),a.flags|=1,Nn(i,a,f,u),a.child;case 14:return f=a.type,g=zr(f,a.pendingProps),g=zr(f.type,g),gw(i,a,f,g,u);case 15:return yw(i,a,a.type,a.pendingProps,u);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:zr(f,g),Rh(i,a),a.tag=1,zn(f)?(i=!0,uh(a)):i=!1,Ma(a,u),lw(a,f,g),Ip(a,f,g,u),Pp(null,a,f,!0,i,u);case 19:return bw(i,a,u);case 22:return vw(i,a,u)}throw Error(n(156,a.tag))};function Qw(i,a){return zl(i,a)}function Wk(i,a,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(i,a,u,f){return new Wk(i,a,u,f)}function Gp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qk(i){if(typeof i=="function")return Gp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===it)return 14}return 2}function ji(i,a){var u=i.alternate;return u===null?(u=br(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function jh(i,a,u,f,g,v){var T=2;if(f=i,typeof i=="function")Gp(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case k:return No(u.children,g,v,a);case b:T=8,g|=8;break;case P:return i=br(12,u,a,g|2),i.elementType=P,i.lanes=v,i;case x:return i=br(13,u,a,g),i.elementType=x,i.lanes=v,i;case We:return i=br(19,u,a,g),i.elementType=We,i.lanes=v,i;case _e:return Uh(u,g,v,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:T=10;break e;case M:T=9;break e;case B:T=11;break e;case it:T=14;break e;case je:T=16,f=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=br(T,u,a,g),a.elementType=i,a.type=f,a.lanes=v,a}function No(i,a,u,f){return i=br(7,i,f,a),i.lanes=u,i}function Uh(i,a,u,f){return i=br(22,i,f,a),i.elementType=_e,i.lanes=u,i.stateNode={isHidden:!1},i}function Qp(i,a,u){return i=br(6,i,null,a),i.lanes=u,i}function Jp(i,a,u){return a=br(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function Hk(i,a,u,f,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gl(0),this.expirationTimes=Gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Yp(i,a,u,f,g,v,T,D,j){return i=new Hk(i,a,u,D,j),a===1?(a=1,v===!0&&(a|=8)):a=0,v=br(3,null,null,a),i.current=v,v.stateNode=i,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},cp(v),i}function Kk(i,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:f==null?null:""+f,children:i,containerInfo:a,implementation:u}}function Jw(i){if(!i)return ki;i=i._reactInternals;e:{if(Ur(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(zn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var u=i.type;if(zn(u))return I_(i,u,a)}return a}function Yw(i,a,u,f,g,v,T,D,j){return i=Yp(u,f,!0,i,g,v,T,D,j),i.context=Jw(null),u=i.current,f=Vn(),g=Li(u),v=Ks(f,g),v.callback=a??null,Di(u,v,g),i.current.lanes=g,vo(i,g,f),Hn(i,f),i}function Fh(i,a,u,f){var g=a.current,v=Vn(),T=Li(g);return u=Jw(u),a.context===null?a.context=u:a.pendingContext=u,a=Ks(v,T),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Di(g,a,T),i!==null&&(Hr(i,g,T,v),yh(i,g,T)),T}function $h(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Xw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Xp(i,a){Xw(i,a),(i=i.alternate)&&Xw(i,a)}function Gk(){return null}var Zw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Zp(i){this._internalRoot=i}Bh.prototype.render=Zp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));Fh(i,a,null,null)},Bh.prototype.unmount=Zp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;xo(function(){Fh(null,i,null,null)}),a[Bs]=null}};function Bh(i){this._internalRoot=i}Bh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Xl();i={blockedOn:null,target:i,priority:a};for(var u=0;u<tr.length&&a!==0&&a<tr[u].priority;u++);tr.splice(u,0,i),u===0&&ma(i)}};function em(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function zh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function e0(){}function Qk(i,a,u,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var G=$h(T);v.call(G)}}var T=Yw(a,f,i,0,null,!1,!1,"",e0);return i._reactRootContainer=T,i[Bs]=T.current,cu(i.nodeType===8?i.parentNode:i),xo(),T}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var D=f;f=function(){var G=$h(j);D.call(G)}}var j=Yp(i,0,!1,null,null,!1,!1,"",e0);return i._reactRootContainer=j,i[Bs]=j.current,cu(i.nodeType===8?i.parentNode:i),xo(function(){Fh(a,j,u,f)}),j}function Wh(i,a,u,f,g){var v=u._reactRootContainer;if(v){var T=v;if(typeof g=="function"){var D=g;g=function(){var j=$h(T);D.call(j)}}Fh(a,T,i,g)}else T=Qk(u,a,i,g,f);return $h(T)}Jl=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=nt(a.pendingLanes);u!==0&&(Ql(a,u|1),Hn(a,mt()),(et&6)===0&&(Ba=mt()+500,Ci()))}break;case 13:xo(function(){var f=Hs(i,1);if(f!==null){var g=Vn();Hr(f,i,1,g)}}),Xp(i,1)}},fa=function(i){if(i.tag===13){var a=Hs(i,134217728);if(a!==null){var u=Vn();Hr(a,i,134217728,u)}Xp(i,134217728)}},Yl=function(i){if(i.tag===13){var a=Li(i),u=Hs(i,a);if(u!==null){var f=Vn();Hr(u,i,a,f)}Xp(i,a)}},Xl=function(){return Je},Zl=function(i,a){var u=Je;try{return Je=i,a()}finally{Je=u}},Mr=function(i,a,u){switch(a){case"input":if(Ze(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==i&&f.form===i.form){var g=ah(f);if(!g)throw Error(n(90));Un(f),Ze(f,g)}}}break;case"textarea":fi(i,u);break;case"select":a=u.value,a!=null&&xn(i,!!u.multiple,a,!1)}},Lt=qp,en=xo;var Jk={usingClientEntryPoint:!1,Events:[fu,ka,ah,De,lt,qp]},Ru={findFiberByHostInstance:So,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yk={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=zc(i),i===null?null:i.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||Gk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qh.isDisabled&&qh.supportsFiber)try{po=qh.inject(Yk),Zn=qh}catch{}}return Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jk,Kn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!em(a))throw Error(n(200));return Kk(i,a,null,u)},Kn.createRoot=function(i,a){if(!em(i))throw Error(n(299));var u=!1,f="",g=Zw;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Yp(i,1,!1,null,null,u,!1,f,g),i[Bs]=a.current,cu(i.nodeType===8?i.parentNode:i),new Zp(a)},Kn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=zc(a),i=i===null?null:i.stateNode,i},Kn.flushSync=function(i){return xo(i)},Kn.hydrate=function(i,a,u){if(!zh(a))throw Error(n(200));return Wh(null,i,a,!0,u)},Kn.hydrateRoot=function(i,a,u){if(!em(i))throw Error(n(405));var f=u!=null&&u.hydratedSources||null,g=!1,v="",T=Zw;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),a=Yw(a,null,i,1,u??null,g,!1,v,T),i[Bs]=a.current,cu(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new Bh(a)},Kn.render=function(i,a,u){if(!zh(a))throw Error(n(200));return Wh(null,i,a,!1,u)},Kn.unmountComponentAtNode=function(i){if(!zh(i))throw Error(n(40));return i._reactRootContainer?(xo(function(){Wh(null,null,i,!1,function(){i._reactRootContainer=null,i[Bs]=null})}),!0):!1},Kn.unstable_batchedUpdates=qp,Kn.unstable_renderSubtreeIntoContainer=function(i,a,u,f){if(!zh(u))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Wh(i,a,u,!1,f)},Kn.version="18.3.1-next-f1338f8080-20240426",Kn}var l0;function qS(){if(l0)return rm.exports;l0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rm.exports=iC(),rm.exports}var u0;function oC(){if(u0)return Hh;u0=1;var t=qS();return Hh.createRoot=t.createRoot,Hh.hydrateRoot=t.hydrateRoot,Hh}var aC=oC();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var c0="popstate";function lC(t={}){function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return Qm("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Zu(s)}return cC(e,n,null,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uC(){return Math.random().toString(36).substring(2,10)}function h0(t,e){return{usr:t.state,key:t.key,idx:e}}function Qm(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Pl(e):e,state:n,key:e&&e.key||r||uC()}}function Zu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Pl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function cC(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c="POP",h=null,p=m();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function m(){return(l.state||{idx:null}).idx}function y(){c="POP";let R=m(),O=R==null?null:R-p;p=R,h&&h({action:c,location:C.location,delta:O})}function w(R,O){c="PUSH";let U=Qm(C.location,R,O);p=m()+1;let N=h0(U,p),K=C.createHref(U);try{l.pushState(N,"",K)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(K)}o&&h&&h({action:c,location:C.location,delta:1})}function S(R,O){c="REPLACE";let U=Qm(C.location,R,O);p=m();let N=h0(U,p),K=C.createHref(U);l.replaceState(N,"",K),o&&h&&h({action:c,location:C.location,delta:0})}function A(R){return hC(R)}let C={get action(){return c},get location(){return t(s,l)},listen(R){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(c0,y),h=R,()=>{s.removeEventListener(c0,y),h=null}},createHref(R){return e(s,R)},createURL:A,encodeLocation(R){let O=A(R);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:w,replace:S,go(R){return l.go(R)}};return C}function hC(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Zu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function HS(t,e,n="/"){return dC(t,e,n,!1)}function dC(t,e,n,r){let s=typeof e=="string"?Pl(e):e,o=si(s.pathname||"/",n);if(o==null)return null;let l=KS(t);fC(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let p=IC(o);c=TC(l[h],p,r)}return c}function KS(t,e=[],n=[],r="",s=!1){let o=(l,c,h=s,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&h)return;Et(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let y=ti([r,m.relativePath]),w=n.concat(m);l.children&&l.children.length>0&&(Et(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),KS(l.children,e,w,y,h)),!(l.path==null&&!l.index)&&e.push({path:y,score:wC(y,l.index),routesMeta:w})};return t.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))o(l,c);else for(let h of GS(l.path))o(l,c,!0,h)}),e}function GS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=GS(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&c.push(...l),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function fC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:EC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var pC=/^:[\w-]+$/,mC=3,gC=2,yC=1,vC=10,_C=-2,d0=t=>t==="*";function wC(t,e){let n=t.split("/"),r=n.length;return n.some(d0)&&(r+=_C),e&&(r+=gC),n.filter(s=>!d0(s)).reduce((s,o)=>s+(pC.test(o)?mC:o===""?yC:vC),r)}function EC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function TC(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],p=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=Ad({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),w=h.route;if(!y&&p&&n&&!r[r.length-1].route.index&&(y=Ad({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:ti([o,y.pathname]),pathnameBase:kC(ti([o,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(o=ti([o,y.pathnameBase]))}return l}function Ad(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=SC(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((p,{paramName:m,isOptional:y},w)=>{if(m==="*"){let A=c[w]||"";l=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const S=c[w];return y&&!S?p[m]=void 0:p[m]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function SC(t,e=!1,n=!0){mr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function IC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function si(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var bC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AC=t=>bC.test(t);function RC(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Pl(t):t,o;if(n)if(AC(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),mr(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?o=f0(n.substring(1),"/"):o=f0(n,e)}else o=e;return{pathname:o,search:CC(r),hash:xC(s)}}function f0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function om(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iy(t){let e=PC(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function oy(t,e,n,r=!1){let s;typeof t=="string"?s=Pl(t):(s={...t},Et(!s.pathname||!s.pathname.includes("?"),om("?","pathname","search",s)),Et(!s.pathname||!s.pathname.includes("#"),om("#","pathname","hash",s)),Et(!s.search||!s.search.includes("#"),om("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=n;else{let y=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),y-=1;s.pathname=w.join("/")}c=y>=0?e[y]:"/"}let h=RC(s,c),p=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}var ti=t=>t.join("/").replace(/\/\/+/g,"/"),kC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function OC(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var QS=["POST","PUT","PATCH","DELETE"];new Set(QS);var NC=["GET",...QS];new Set(NC);var kl=V.createContext(null);kl.displayName="DataRouter";var sf=V.createContext(null);sf.displayName="DataRouterState";V.createContext(!1);var JS=V.createContext({isTransitioning:!1});JS.displayName="ViewTransition";var VC=V.createContext(new Map);VC.displayName="Fetchers";var LC=V.createContext(null);LC.displayName="Await";var Or=V.createContext(null);Or.displayName="Navigation";var Tc=V.createContext(null);Tc.displayName="Location";var Ds=V.createContext({outlet:null,matches:[],isDataRoute:!1});Ds.displayName="Route";var ay=V.createContext(null);ay.displayName="RouteError";function MC(t,{relative:e}={}){Et(Cl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=V.useContext(Or),{hash:s,pathname:o,search:l}=Sc(t,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:ti([n,o])),r.createHref({pathname:c,search:l,hash:s})}function Cl(){return V.useContext(Tc)!=null}function Os(){return Et(Cl(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Tc).location}var YS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function XS(t){V.useContext(Or).static||V.useLayoutEffect(t)}function ly(){let{isDataRoute:t}=V.useContext(Ds);return t?JC():jC()}function jC(){Et(Cl(),"useNavigate() may be used only in the context of a <Router> component.");let t=V.useContext(kl),{basename:e,navigator:n}=V.useContext(Or),{matches:r}=V.useContext(Ds),{pathname:s}=Os(),o=JSON.stringify(iy(r)),l=V.useRef(!1);return XS(()=>{l.current=!0}),V.useCallback((h,p={})=>{if(mr(l.current,YS),!l.current)return;if(typeof h=="number"){n.go(h);return}let m=oy(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ti([e,m.pathname])),(p.replace?n.replace:n.push)(m,p.state,p)},[e,n,o,s,t])}V.createContext(null);function Sc(t,{relative:e}={}){let{matches:n}=V.useContext(Ds),{pathname:r}=Os(),s=JSON.stringify(iy(n));return V.useMemo(()=>oy(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function UC(t,e){return ZS(t,e)}function ZS(t,e,n,r,s){Et(Cl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=V.useContext(Or),{matches:l}=V.useContext(Ds),c=l[l.length-1],h=c?c.params:{},p=c?c.pathname:"/",m=c?c.pathnameBase:"/",y=c&&c.route;{let U=y&&y.path||"";eI(p,!y||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let w=Os(),S;if(e){let U=typeof e=="string"?Pl(e):e;Et(m==="/"||U.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${U.pathname}" was given in the \`location\` prop.`),S=U}else S=w;let A=S.pathname||"/",C=A;if(m!=="/"){let U=m.replace(/^\//,"").split("/");C="/"+A.replace(/^\//,"").split("/").slice(U.length).join("/")}let R=HS(t,{pathname:C});mr(y||R!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),mr(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=WC(R&&R.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:ti([m,o.encodeLocation?o.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?m:ti([m,o.encodeLocation?o.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),l,n,r,s);return e&&O?V.createElement(Tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},O):O}function FC(){let t=QC(),e=DC(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:o},"ErrorBoundary")," or"," ",V.createElement("code",{style:o},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:s},n):null,l)}var $C=V.createElement(FC,null),BC=class extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?V.createElement(Ds.Provider,{value:this.props.routeContext},V.createElement(ay.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zC({routeContext:t,match:e,children:n}){let r=V.useContext(kl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Ds.Provider,{value:t},n)}function WC(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n?.errors;if(l!=null){let m=o.findIndex(y=>y.route.id&&l?.[y.route.id]!==void 0);Et(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,h=-1;if(n)for(let m=0;m<o.length;m++){let y=o[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=m),y.route.id){let{loaderData:w,errors:S}=n,A=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||A){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let p=n&&r?(m,y)=>{r(m,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:OC(n.matches),errorInfo:y})}:void 0;return o.reduceRight((m,y,w)=>{let S,A=!1,C=null,R=null;n&&(S=l&&y.route.id?l[y.route.id]:void 0,C=y.route.errorElement||$C,c&&(h<0&&w===0?(eI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,R=null):h===w&&(A=!0,R=y.route.hydrateFallbackElement||null)));let O=e.concat(o.slice(0,w+1)),U=()=>{let N;return S?N=C:A?N=R:y.route.Component?N=V.createElement(y.route.Component,null):y.route.element?N=y.route.element:N=m,V.createElement(zC,{match:y,routeContext:{outlet:m,matches:O,isDataRoute:n!=null},children:N})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?V.createElement(BC,{location:n.location,revalidation:n.revalidation,component:C,error:S,children:U(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:p}):U()},null)}function uy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qC(t){let e=V.useContext(kl);return Et(e,uy(t)),e}function HC(t){let e=V.useContext(sf);return Et(e,uy(t)),e}function KC(t){let e=V.useContext(Ds);return Et(e,uy(t)),e}function cy(t){let e=KC(t),n=e.matches[e.matches.length-1];return Et(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function GC(){return cy("useRouteId")}function QC(){let t=V.useContext(ay),e=HC("useRouteError"),n=cy("useRouteError");return t!==void 0?t:e.errors?.[n]}function JC(){let{router:t}=qC("useNavigate"),e=cy("useNavigate"),n=V.useRef(!1);return XS(()=>{n.current=!0}),V.useCallback(async(s,o={})=>{mr(n.current,YS),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var p0={};function eI(t,e,n){!e&&!p0[t]&&(p0[t]=!0,mr(!1,n))}V.memo(YC);function YC({routes:t,future:e,state:n,unstable_onError:r}){return ZS(t,void 0,n,r,e)}function Jm({to:t,replace:e,state:n,relative:r}){Et(Cl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=V.useContext(Or);mr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=V.useContext(Ds),{pathname:l}=Os(),c=ly(),h=oy(t,iy(o),l,r==="path"),p=JSON.stringify(h);return V.useEffect(()=>{c(JSON.parse(p),{replace:e,state:n,relative:r})},[c,p,r,e,n]),null}function Ye(t){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function XC({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1,unstable_useTransitions:l}){Et(!Cl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),h=V.useMemo(()=>({basename:c,navigator:s,static:o,unstable_useTransitions:l,future:{}}),[c,s,o,l]);typeof n=="string"&&(n=Pl(n));let{pathname:p="/",search:m="",hash:y="",state:w=null,key:S="default"}=n,A=V.useMemo(()=>{let C=si(p,c);return C==null?null:{location:{pathname:C,search:m,hash:y,state:w,key:S},navigationType:r}},[c,p,m,y,w,S,r]);return mr(A!=null,`<Router basename="${c}"> is not able to match the URL "${p}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:V.createElement(Or.Provider,{value:h},V.createElement(Tc.Provider,{children:e,value:A}))}function ZC({children:t,location:e}){return UC(Ym(t),e)}function Ym(t,e=[]){let n=[];return V.Children.forEach(t,(r,s)=>{if(!V.isValidElement(r))return;let o=[...e,s];if(r.type===V.Fragment){n.push.apply(n,Ym(r.props.children,o));return}Et(r.type===Ye,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ym(r.props.children,o)),n.push(l)}),n}var cd="get",hd="application/x-www-form-urlencoded";function of(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function e1(t){return of(t)&&t.tagName.toLowerCase()==="button"}function t1(t){return of(t)&&t.tagName.toLowerCase()==="form"}function n1(t){return of(t)&&t.tagName.toLowerCase()==="input"}function r1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function s1(t,e){return t.button===0&&(!e||e==="_self")&&!r1(t)}function Xm(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function i1(t,e){let n=Xm(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}var Kh=null;function o1(){if(Kh===null)try{new FormData(document.createElement("form"),0),Kh=!1}catch{Kh=!0}return Kh}var a1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function am(t){return t!=null&&!a1.has(t)?(mr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hd}"`),null):t}function l1(t,e){let n,r,s,o,l;if(t1(t)){let c=t.getAttribute("action");r=c?si(c,e):null,n=t.getAttribute("method")||cd,s=am(t.getAttribute("enctype"))||hd,o=new FormData(t)}else if(e1(t)||n1(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||c.getAttribute("action");if(r=h?si(h,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||cd,s=am(t.getAttribute("formenctype"))||am(c.getAttribute("enctype"))||hd,o=new FormData(c,t),!o1()){let{name:p,type:m,value:y}=t;if(m==="image"){let w=p?`${p}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else p&&o.append(p,y)}}else{if(of(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=cd,r=null,s=hd,l=t}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function u1(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&si(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function c1(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function h1(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function d1(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await c1(o,n);return l.links?l.links():[]}return[]}));return g1(r.flat(1).filter(h1).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function m0(t,e,n,r,s,o){let l=(h,p)=>n[p]?h.route.id!==n[p].route.id:!0,c=(h,p)=>n[p].pathname!==h.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,p)=>l(h,p)||c(h,p)):o==="data"?e.filter((h,p)=>{let m=r.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(l(h,p)||c(h,p))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function f1(t,e,{includeHydrateFallback:n}={}){return p1(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function p1(t){return[...new Set(t)]}function m1(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function g1(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(m1(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function tI(){let t=V.useContext(kl);return hy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function y1(){let t=V.useContext(sf);return hy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var dy=V.createContext(void 0);dy.displayName="FrameworkContext";function nI(){let t=V.useContext(dy);return hy(t,"You must render this element inside a <HydratedRouter> element"),t}function v1(t,e){let n=V.useContext(dy),[r,s]=V.useState(!1),[o,l]=V.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:p,onMouseLeave:m,onTouchStart:y}=e,w=V.useRef(null);V.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let C=O=>{O.forEach(U=>{l(U.isIntersecting)})},R=new IntersectionObserver(C,{threshold:.5});return w.current&&R.observe(w.current),()=>{R.disconnect()}}},[t]),V.useEffect(()=>{if(r){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[r]);let S=()=>{s(!0)},A=()=>{s(!1),l(!1)};return n?t!=="intent"?[o,w,{}]:[o,w,{onFocus:ku(c,S),onBlur:ku(h,A),onMouseEnter:ku(p,S),onMouseLeave:ku(m,A),onTouchStart:ku(y,S)}]:[!1,w,{}]}function ku(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function _1({page:t,...e}){let{router:n}=tI(),r=V.useMemo(()=>HS(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?V.createElement(E1,{page:t,matches:r,...e}):null}function w1(t){let{manifest:e,routeModules:n}=nI(),[r,s]=V.useState([]);return V.useEffect(()=>{let o=!1;return d1(t,e,n).then(l=>{o||s(l)}),()=>{o=!0}},[t,e,n]),r}function E1({page:t,matches:e,...n}){let r=Os(),{manifest:s,routeModules:o}=nI(),{basename:l}=tI(),{loaderData:c,matches:h}=y1(),p=V.useMemo(()=>m0(t,e,h,s,r,"data"),[t,e,h,s,r]),m=V.useMemo(()=>m0(t,e,h,s,r,"assets"),[t,e,h,s,r]),y=V.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let A=new Set,C=!1;if(e.forEach(O=>{let U=s.routes[O.route.id];!U||!U.hasLoader||(!p.some(N=>N.route.id===O.route.id)&&O.route.id in c&&o[O.route.id]?.shouldRevalidate||U.hasClientLoader?C=!0:A.add(O.route.id))}),A.size===0)return[];let R=u1(t,l,"data");return C&&A.size>0&&R.searchParams.set("_routes",e.filter(O=>A.has(O.route.id)).map(O=>O.route.id).join(",")),[R.pathname+R.search]},[l,c,r,s,p,e,t,o]),w=V.useMemo(()=>f1(m,s),[m,s]),S=w1(m);return V.createElement(V.Fragment,null,y.map(A=>V.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...n})),w.map(A=>V.createElement("link",{key:A,rel:"modulepreload",href:A,...n})),S.map(({key:A,link:C})=>V.createElement("link",{key:A,nonce:n.nonce,...C})))}function T1(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var rI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rI&&(window.__reactRouterVersion="7.10.1")}catch{}function S1({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=V.useRef();s.current==null&&(s.current=lC({window:r,v5Compat:!0}));let o=s.current,[l,c]=V.useState({action:o.action,location:o.location}),h=V.useCallback(p=>{n===!1?c(p):V.startTransition(()=>c(p))},[n]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.createElement(XC,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:n===!0})}var sI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iI=V.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:h,to:p,preventScrollReset:m,viewTransition:y,...w},S){let{basename:A,unstable_useTransitions:C}=V.useContext(Or),R=typeof p=="string"&&sI.test(p),O,U=!1;if(typeof p=="string"&&R&&(O=p,rI))try{let L=new URL(window.location.href),M=p.startsWith("//")?new URL(L.protocol+p):new URL(p),B=si(M.pathname,A);M.origin===L.origin&&B!=null?p=B+M.search+M.hash:U=!0}catch{mr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=MC(p,{relative:s}),[K,H,X]=v1(r,w),k=R1(p,{replace:l,state:c,target:h,preventScrollReset:m,relative:s,viewTransition:y,unstable_useTransitions:C});function b(L){e&&e(L),L.defaultPrevented||k(L)}let P=V.createElement("a",{...w,...X,href:O||N,onClick:U||o?e:b,ref:T1(S,H),target:h,"data-discover":!R&&n==="render"?"true":void 0});return K&&!R?V.createElement(V.Fragment,null,P,V.createElement(_1,{page:N})):P});iI.displayName="Link";var I1=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:c,children:h,...p},m){let y=Sc(l,{relative:p.relative}),w=Os(),S=V.useContext(sf),{navigator:A,basename:C}=V.useContext(Or),R=S!=null&&D1(y)&&c===!0,O=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,U=w.pathname,N=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(U=U.toLowerCase(),N=N?N.toLowerCase():null,O=O.toLowerCase()),N&&C&&(N=si(N,C)||N);const K=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let H=U===O||!s&&U.startsWith(O)&&U.charAt(K)==="/",X=N!=null&&(N===O||!s&&N.startsWith(O)&&N.charAt(O.length)==="/"),k={isActive:H,isPending:X,isTransitioning:R},b=H?e:void 0,P;typeof r=="function"?P=r(k):P=[r,H?"active":null,X?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let L=typeof o=="function"?o(k):o;return V.createElement(iI,{...p,"aria-current":b,className:P,ref:m,style:L,to:l,viewTransition:c},typeof h=="function"?h(k):h)});I1.displayName="NavLink";var b1=V.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:l=cd,action:c,onSubmit:h,relative:p,preventScrollReset:m,viewTransition:y,...w},S)=>{let{unstable_useTransitions:A}=V.useContext(Or),C=C1(),R=x1(c,{relative:p}),O=l.toLowerCase()==="get"?"get":"post",U=typeof c=="string"&&sI.test(c),N=K=>{if(h&&h(K),K.defaultPrevented)return;K.preventDefault();let H=K.nativeEvent.submitter,X=H?.getAttribute("formmethod")||l,k=()=>C(H||K.currentTarget,{fetcherKey:e,method:X,navigate:n,replace:s,state:o,relative:p,preventScrollReset:m,viewTransition:y});A&&n!==!1?V.startTransition(()=>k()):k()};return V.createElement("form",{ref:S,method:O,action:R,onSubmit:r?h:N,...w,"data-discover":!U&&t==="render"?"true":void 0})});b1.displayName="Form";function A1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oI(t){let e=V.useContext(kl);return Et(e,A1(t)),e}function R1(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_useTransitions:c}={}){let h=ly(),p=Os(),m=Sc(t,{relative:o});return V.useCallback(y=>{if(s1(y,e)){y.preventDefault();let w=n!==void 0?n:Zu(p)===Zu(m),S=()=>h(t,{replace:w,state:r,preventScrollReset:s,relative:o,viewTransition:l});c?V.startTransition(()=>S()):S()}},[p,h,m,n,r,e,t,s,o,l,c])}function J5(t){mr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=V.useRef(Xm(t)),n=V.useRef(!1),r=Os(),s=V.useMemo(()=>i1(r.search,n.current?null:e.current),[r.search]),o=ly(),l=V.useCallback((c,h)=>{const p=Xm(typeof c=="function"?c(new URLSearchParams(s)):c);n.current=!0,o("?"+p,h)},[o,s]);return[s,l]}var P1=0,k1=()=>`__${String(++P1)}__`;function C1(){let{router:t}=oI("useSubmit"),{basename:e}=V.useContext(Or),n=GC(),r=t.fetch,s=t.navigate;return V.useCallback(async(o,l={})=>{let{action:c,method:h,encType:p,formData:m,body:y}=l1(o,e);if(l.navigate===!1){let w=l.fetcherKey||k1();await r(w,n,l.action||c,{preventScrollReset:l.preventScrollReset,formData:m,body:y,formMethod:l.method||h,formEncType:l.encType||p,flushSync:l.flushSync})}else await s(l.action||c,{preventScrollReset:l.preventScrollReset,formData:m,body:y,formMethod:l.method||h,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,n])}function x1(t,{relative:e}={}){let{basename:n}=V.useContext(Or),r=V.useContext(Ds);Et(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Sc(t||".",{relative:e})},l=Os();if(t==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(m=>m==="")){c.delete("index"),h.filter(y=>y).forEach(y=>c.append("index",y));let m=c.toString();o.search=m?`?${m}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ti([n,o.pathname])),Zu(o)}function D1(t,{relative:e}={}){let n=V.useContext(JS);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=oI("useViewTransitionState"),s=Sc(t,{relative:e});if(!n.isTransitioning)return!1;let o=si(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=si(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ad(s.pathname,l)!=null||Ad(s.pathname,o)!=null}var O1=qS();const N1=WS(O1),V1="modulepreload",L1=function(t){return"/"+t},g0={},at=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=c?.nonce||c?.getAttribute("nonce");s=l(n.map(p=>{if(p=L1(p),p in g0)return;g0[p]=!0;const m=p.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":V1,m||(w.as="script"),w.crossOrigin="",w.href=p,h&&w.setAttribute("nonce",h),document.head.appendChild(w),m)return new Promise((S,A)=>{w.addEventListener("load",S),w.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},M1=()=>{};var y0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},j1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],c=t[n++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},lI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,c=l?t[s+1]:0,h=s+2<t.length,p=h?t[s+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let w=(c&15)<<2|p>>6,S=p&63;h||(S=64,l||(w=64)),r.push(n[m],n[y],n[w],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):j1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||p==null||y==null)throw new U1;const w=o<<2|c>>4;if(r.push(w),p!==64){const S=c<<4&240|p>>2;if(r.push(S),y!==64){const A=p<<6&192|y;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class U1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F1=function(t){const e=aI(t);return lI.encodeByteArray(e,!0)},Rd=function(t){return F1(t).replace(/\./g,"")},uI=function(t){try{return lI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=()=>$1().__FIREBASE_DEFAULTS__,z1=()=>{if(typeof process>"u"||typeof y0>"u")return;const t=y0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},W1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uI(t[1]);return e&&JSON.parse(e)},af=()=>{try{return M1()||B1()||z1()||W1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cI=t=>af()?.emulatorHosts?.[t],q1=t=>{const e=cI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hI=()=>af()?.config,dI=t=>af()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H1=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Rd(JSON.stringify(n)),Rd(JSON.stringify(l)),""].join(".")}const Fu={};function G1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fu))Fu[e]?t.emulator.push(e):t.prod.push(e);return t}function Q1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let v0=!1;function pI(t,e){if(typeof window>"u"||typeof document>"u"||!xl(window.location.host)||Fu[t]===e||Fu[t]||v0)return;Fu[t]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=G1().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{v0=!0,l()},w}function m(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function y(){const w=Q1(r),S=n("text"),A=document.getElementById(S)||document.createElement("span"),C=n("learnmore"),R=document.getElementById(C)||document.createElement("a"),O=n("preprendIcon"),U=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const N=w.element;c(N),m(R,C);const K=p();h(U,O),N.append(U,A,R,K),document.body.appendChild(N)}o?(A.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function Y1(){const t=af()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Z1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ex(){const t=Cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tx(){return!Y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gI(){try{return typeof indexedDB=="object"}catch{return!1}}function yI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}function nx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="FirebaseError";class ns extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rx,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sa.prototype.create)}}class sa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?sx(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new ns(s,c,r)}}function sx(t,e){return t.replace(ix,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ix=/\{\$([^}]+)}/g;function ox(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(_0(o)&&_0(l)){if(!Xi(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Du(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Ou(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ax(t,e){const n=new lx(t,e);return n.subscribe.bind(n)}class lx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ux(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=lm),s.error===void 0&&(s.error=lm),s.complete===void 0&&(s.complete=lm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ux(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=1e3,hx=2,dx=14400*1e3,fx=.5;function w0(t,e=cx,n=hx){const r=e*Math.pow(n,t),s=Math.round(fx*r*(Math.random()-.5)*2);return Math.min(dx,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new H1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gx(e))try{this.getOrInitializeService({instanceIdentifier:jo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=jo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jo){return this.instances.has(e)}getOptions(e=jo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jo){return this.component?this.component.multipleInstances?e:jo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mx(t){return t===jo?void 0:t}function gx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new px(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const vx={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},_x=He.INFO,wx={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},Ex=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=wx[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lf{constructor(e){this.name=e,this._logLevel=_x,this._logHandler=Ex,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const Tx=(t,e)=>e.some(n=>t instanceof n);let E0,T0;function Sx(){return E0||(E0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ix(){return T0||(T0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vI=new WeakMap,Zm=new WeakMap,_I=new WeakMap,um=new WeakMap,fy=new WeakMap;function bx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Gi(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&vI.set(n,t)}).catch(()=>{}),fy.set(e,t),e}function Ax(t){if(Zm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Zm.set(t,e)}let eg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_I.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Rx(t){eg=t(eg)}function Px(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cm(this),e,...n);return _I.set(r,e.sort?e.sort():[e]),Gi(r)}:Ix().includes(t)?function(...e){return t.apply(cm(this),e),Gi(vI.get(this))}:function(...e){return Gi(t.apply(cm(this),e))}}function kx(t){return typeof t=="function"?Px(t):(t instanceof IDBTransaction&&Ax(t),Tx(t,Sx())?new Proxy(t,eg):t)}function Gi(t){if(t instanceof IDBRequest)return bx(t);if(um.has(t))return um.get(t);const e=kx(t);return e!==t&&(um.set(t,e),fy.set(e,t)),e}const cm=t=>fy.get(t);function wI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),c=Gi(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Gi(l.result),h.oldVersion,h.newVersion,Gi(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const Cx=["get","getKey","getAll","getAllKeys","count"],xx=["put","add","delete","clear"],hm=new Map;function S0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hm.get(e))return hm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=xx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Cx.includes(n)))return;const o=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[n](...c),s&&h.done]))[0]};return hm.set(e,o),o}Rx(t=>({...t,get:(e,n,r)=>S0(e,n)||t.get(e,n,r),has:(e,n)=>!!S0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ox(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ox(t){return t.getComponent()?.type==="VERSION"}const tg="@firebase/app",I0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new lf("@firebase/app"),Nx="@firebase/app-compat",Vx="@firebase/analytics-compat",Lx="@firebase/analytics",Mx="@firebase/app-check-compat",jx="@firebase/app-check",Ux="@firebase/auth",Fx="@firebase/auth-compat",$x="@firebase/database",Bx="@firebase/data-connect",zx="@firebase/database-compat",Wx="@firebase/functions",qx="@firebase/functions-compat",Hx="@firebase/installations",Kx="@firebase/installations-compat",Gx="@firebase/messaging",Qx="@firebase/messaging-compat",Jx="@firebase/performance",Yx="@firebase/performance-compat",Xx="@firebase/remote-config",Zx="@firebase/remote-config-compat",eD="@firebase/storage",tD="@firebase/storage-compat",nD="@firebase/firestore",rD="@firebase/ai",sD="@firebase/firestore-compat",iD="firebase",oD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="[DEFAULT]",aD={[tg]:"fire-core",[Nx]:"fire-core-compat",[Lx]:"fire-analytics",[Vx]:"fire-analytics-compat",[jx]:"fire-app-check",[Mx]:"fire-app-check-compat",[Ux]:"fire-auth",[Fx]:"fire-auth-compat",[$x]:"fire-rtdb",[Bx]:"fire-data-connect",[zx]:"fire-rtdb-compat",[Wx]:"fire-fn",[qx]:"fire-fn-compat",[Hx]:"fire-iid",[Kx]:"fire-iid-compat",[Gx]:"fire-fcm",[Qx]:"fire-fcm-compat",[Jx]:"fire-perf",[Yx]:"fire-perf-compat",[Xx]:"fire-rc",[Zx]:"fire-rc-compat",[eD]:"fire-gcs",[tD]:"fire-gcs-compat",[nD]:"fire-fst",[sD]:"fire-fst-compat",[rD]:"fire-vertex","fire-js":"fire-js",[iD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Map,lD=new Map,rg=new Map;function b0(t,e){try{t.container.addComponent(e)}catch(n){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ks(t){const e=t.name;if(rg.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;rg.set(e,t);for(const n of Pd.values())b0(n,t);for(const n of lD.values())b0(n,t);return!0}function ia(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new sa("app","Firebase",uD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=oD;function EI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ng,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Qi.create("bad-app-name",{appName:String(s)});if(n||(n=hI()),!n)throw Qi.create("no-options");const o=Pd.get(s);if(o){if(Xi(n,o.options)&&Xi(r,o.config))return o;throw Qi.create("duplicate-app",{appName:s})}const l=new yx(s);for(const h of rg.values())l.addComponent(h);const c=new cD(n,r,l);return Pd.set(s,c),c}function py(t=ng){const e=Pd.get(t);if(!e&&t===ng&&hI())return EI();if(!e)throw Qi.create("no-app",{appName:t});return e}function Cr(t,e,n){let r=aD[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(l.join(" "));return}ks(new ts(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="firebase-heartbeat-database",dD=1,ec="firebase-heartbeat-store";let dm=null;function TI(){return dm||(dm=wI(hD,dD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ec)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qi.create("idb-open",{originalErrorMessage:t.message})})),dm}async function fD(t){try{const n=(await TI()).transaction(ec),r=await n.objectStore(ec).get(SI(t));return await n.done,r}catch(e){if(e instanceof ns)ii.warn(e.message);else{const n=Qi.create("idb-get",{originalErrorMessage:e?.message});ii.warn(n.message)}}}async function A0(t,e){try{const r=(await TI()).transaction(ec,"readwrite");await r.objectStore(ec).put(e,SI(t)),await r.done}catch(n){if(n instanceof ns)ii.warn(n.message);else{const r=Qi.create("idb-set",{originalErrorMessage:n?.message});ii.warn(r.message)}}}function SI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=1024,mD=30;class gD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=R0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>mD){const s=_D(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ii.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=R0(),{heartbeatsToSend:n,unsentEntries:r}=yD(this._heartbeatsCache.heartbeats),s=Rd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ii.warn(e),""}}}function R0(){return new Date().toISOString().substring(0,10)}function yD(t,e=pD){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),P0(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gI()?yI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function P0(t){return Rd(JSON.stringify({version:2,heartbeats:t})).length}function _D(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){ks(new ts("platform-logger",e=>new Dx(e),"PRIVATE")),ks(new ts("heartbeat",e=>new gD(e),"PRIVATE")),Cr(tg,I0,t),Cr(tg,I0,"esm2020"),Cr("fire-js","")}wD("");function II(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ED=II,bI=new sa("auth","Firebase",II());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new lf("@firebase/auth");function TD(t,...e){kd.logLevel<=He.WARN&&kd.warn(`Auth (${Dl}): ${t}`,...e)}function dd(t,...e){kd.logLevel<=He.ERROR&&kd.error(`Auth (${Dl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t,...e){throw gy(t,...e)}function es(t,...e){return gy(t,...e)}function my(t,e,n){const r={...ED(),[e]:n};return new sa("auth","Firebase",r).create(e,{appName:t.name})}function ni(t){return my(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SD(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dr(t,"argument-error"),my(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bI.create(t,...e)}function Ae(t,e,...n){if(!t)throw gy(e,...n)}function Zs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dd(e),new Error(e)}function oi(t,e){t||Zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(){return typeof self<"u"&&self.location?.href||""}function ID(){return k0()==="http:"||k0()==="https:"}function k0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ID()||mI()||"connection"in navigator)?navigator.onLine:!0}function AD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,oi(n>e,"Short delay should be less than long delay!"),this.isMobile=J1()||Z1()}get(){return bD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e){oi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kD=new bc(3e4,6e4);function hi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ns(t,e,n,r,s={}){return RI(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Ic({key:t.config.apiKey,...l}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:h,...o};return X1()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&xl(t.emulatorConfig.host)&&(p.credentials="include"),AI.fetch()(await PI(t,t.config.apiHost,n,c),p)})}async function RI(t,e,n){t._canInitEmulator=!1;const r={...RD,...e};try{const s=new xD(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Gh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gh(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Gh(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw Gh(t,"user-disabled",l);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw my(t,m,p);Dr(t,m)}}catch(s){if(s instanceof ns)throw s;Dr(t,"network-request-failed",{message:String(s)})}}async function Ac(t,e,n,r,s={}){const o=await Ns(t,e,n,r,s);return"mfaPendingCredential"in o&&Dr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function PI(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?yy(t.config,s):`${t.config.apiScheme}://${s}`;return PD.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function CD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(es(this.auth,"network-request-failed")),kD.get())})}}function Gh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=es(t,e,r);return s.customData._tokenResponse=n,s}function C0(t){return t!==void 0&&t.enterprise!==void 0}class DD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OD(t,e){return Ns(t,"GET","/v2/recaptchaConfig",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e){return Ns(t,"POST","/v1/accounts:delete",e)}async function Cd(t,e){return Ns(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VD(t,e=!1){const n=ln(t),r=await n.getIdToken(e),s=vy(r);Ae(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:$u(fm(s.auth_time)),issuedAtTime:$u(fm(s.iat)),expirationTime:$u(fm(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function fm(t){return Number(t)*1e3}function vy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{const s=uI(n);return s?JSON.parse(s):(dd("Failed to decode base64 JWT payload"),null)}catch(s){return dd("Caught error parsing JWT payload as JSON",s?.toString()),null}}function x0(t){const e=vy(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ns&&LD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function LD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(t){const e=t.auth,n=await t.getIdToken(),r=await _l(t,Cd(e,{idToken:n}));Ae(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=s.providerUserInfo?.length?kI(s.providerUserInfo):[],l=UD(t.providerData,o),c=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!l?.length,p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ig(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function jD(t){const e=ln(t);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UD(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function kI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e){const n=await RI(t,{},async()=>{const r=Ic({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await PI(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return t.emulatorConfig&&xl(t.emulatorConfig.host)&&(h.credentials="include"),AI.fetch()(l,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $D(t,e){return Ns(t,"POST","/v2/accounts:revokeToken",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=x0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await FD(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new dl;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ae(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ae(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return Zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new MD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ig(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await _l(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VD(this,e)}reload(){return jD(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(ni(this.auth));const e=await this.getIdToken();return await _l(this,ND(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,c=n.tenantId??void 0,h=n._redirectEventId??void 0,p=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:y,emailVerified:w,isAnonymous:S,providerData:A,stsTokenManager:C}=n;Ae(y&&C,e,"internal-error");const R=dl.fromJSON(this.name,C);Ae(typeof y=="string",e,"internal-error"),Fi(r,e.name),Fi(s,e.name),Ae(typeof w=="boolean",e,"internal-error"),Ae(typeof S=="boolean",e,"internal-error"),Fi(o,e.name),Fi(l,e.name),Fi(c,e.name),Fi(h,e.name),Fi(p,e.name),Fi(m,e.name);const O=new Xr({uid:y,auth:e,email:s,emailVerified:w,displayName:r,isAnonymous:S,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:R,createdAt:p,lastLoginAt:m});return A&&Array.isArray(A)&&(O.providerData=A.map(U=>({...U}))),h&&(O._redirectEventId=h),O}static async _fromIdTokenResponse(e,n,r=!1){const s=new dl;s.updateFromServerResponse(n);const o=new Xr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xd(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ae(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?kI(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,c=new dl;c.updateFromIdToken(r);const h=new Xr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ig(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=new Map;function ei(t){oi(t instanceof Function,"Expected a class definition");let e=D0.get(t);return e?(oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,D0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}CI.type="NONE";const O0=CI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t,e,n){return`firebase:${t}:${e}:${n}`}class fl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=fd(this.userKey,s.apiKey,o),this.fullPersistenceKey=fd("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cd(this.auth,{idToken:e}).catch(()=>{});return n?Xr._fromGetAccountInfoResponse(this.auth,n,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fl(ei(O0),e,r);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||ei(O0);const l=fd(r,e.config.apiKey,e.name);let c=null;for(const p of n)try{const m=await p._get(l);if(m){let y;if(typeof m=="string"){const w=await Cd(e,{idToken:m}).catch(()=>{});if(!w)break;y=await Xr._fromGetAccountInfoResponse(e,w,m)}else y=Xr._fromJSON(e,m);p!==o&&(c=y),o=p;break}}catch{}const h=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new fl(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new fl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LI(e))return"Blackberry";if(MI(e))return"Webos";if(DI(e))return"Safari";if((e.includes("chrome/")||OI(e))&&!e.includes("edge/"))return"Chrome";if(VI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function xI(t=Cn()){return/firefox\//i.test(t)}function DI(t=Cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OI(t=Cn()){return/crios\//i.test(t)}function NI(t=Cn()){return/iemobile/i.test(t)}function VI(t=Cn()){return/android/i.test(t)}function LI(t=Cn()){return/blackberry/i.test(t)}function MI(t=Cn()){return/webos/i.test(t)}function _y(t=Cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BD(t=Cn()){return _y(t)&&!!window.navigator?.standalone}function zD(){return ex()&&document.documentMode===10}function jI(t=Cn()){return _y(t)||VI(t)||MI(t)||LI(t)||/windows phone/i.test(t)||NI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e=[]){let n;switch(t){case"Browser":n=N0(Cn());break;case"Worker":n=`${N0(Cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Dl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e={}){return Ns(t,"GET","/v2/passwordPolicy",hi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=6;class KD{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??HD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V0(this),this.idTokenSubscription=new V0(this),this.beforeStateQueue=new WD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ei(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cd(this,{idToken:e}),r=await Xr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(ni(this));const n=e?ln(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qD(this),n=new KD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $D(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ei(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&TD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ao(t){return ln(t)}class V0{constructor(e){this.auth=e,this.observer=null,this.addObserver=ax(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QD(t){uf=t}function FI(t){return uf.loadJS(t)}function JD(){return uf.recaptchaEnterpriseScript}function YD(){return uf.gapiScript}function XD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ZD{constructor(){this.enterprise=new eO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const tO="recaptcha-enterprise",$I="NO_RECAPTCHA";class nO{constructor(e){this.type=tO,this.auth=ao(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{OD(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new DD(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function s(o,l,c){const h=window.grecaptcha;C0(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l($I)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZD().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!n&&C0(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=JD();h.length!==0&&(h+=c),FI(h).then(()=>{s(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function L0(t,e,n,r=!1,s=!1){const o=new nO(t);let l;if(s)l=$I;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function og(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await L0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await L0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t,e){const n=ia(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Xi(o,e??{}))return s;Dr(s,"already-initialized")}return n.initialize({options:e})}function sO(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ei);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function iO(t,e,n){const r=ao(t);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=BI(e),{host:l,port:c}=oO(e),h=c===null?"":`:${c}`,p={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(Xi(p,r.config.emulator)&&Xi(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,xl(l)?(fI(`${o}//${l}${h}`),pI("Auth",!0)):aO()}function BI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oO(t){const e=BI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:M0(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:M0(l)}}}function M0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zs("not implemented")}_getIdTokenResponse(e){return Zs("not implemented")}_linkToIdToken(e,n){return Zs("not implemented")}_getReauthenticationResolver(e){return Zs("not implemented")}}async function lO(t,e){return Ns(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(t,e){return Ac(t,"POST","/v1/accounts:signInWithPassword",hi(t,e))}async function cO(t,e){return Ns(t,"POST","/v1/accounts:sendOobCode",hi(t,e))}async function hO(t,e){return cO(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e){return Ac(t,"POST","/v1/accounts:signInWithEmailLink",hi(t,e))}async function fO(t,e){return Ac(t,"POST","/v1/accounts:signInWithEmailLink",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends wy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new tc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return og(e,n,"signInWithPassword",uO);case"emailLink":return dO(e,{email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return og(e,r,"signUpPassword",lO);case"emailLink":return fO(e,{idToken:n,email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t,e){return Ac(t,"POST","/v1/accounts:signInWithIdp",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="http://localhost";class Xo extends wy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=n;if(!r||!s)return null;const l=new Xo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return pl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,pl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pl(e,n)}buildRequest(){const e={requestUri:pO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ic(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gO(t){const e=Du(Ou(t)).link,n=e?Du(Ou(e)).deep_link_id:null,r=Du(Ou(t)).deep_link_id;return(r?Du(Ou(r)).link:null)||r||n||e||t}class Ey{constructor(e){const n=Du(Ou(e)),r=n.apiKey??null,s=n.oobCode??null,o=mO(n.mode??null);Ae(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=gO(e);try{return new Ey(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.providerId=Ol.PROVIDER_ID}static credential(e,n){return tc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ey.parseLink(n);return Ae(r,"argument-error"),tc._fromEmailAndCode(e,r.code,r.tenantId)}}Ol.PROVIDER_ID="password";Ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Ty{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Rc{constructor(){super("facebook.com")}static credential(e){return Xo._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xo._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xs.credential(n,r)}catch{return null}}}Xs.GOOGLE_SIGN_IN_METHOD="google.com";Xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Rc{constructor(){super("github.com")}static credential(e){return Xo._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Rc{constructor(){super("twitter.com")}static credential(e,n){return Xo._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qi.credential(n,r)}catch{return null}}}qi.TWITTER_SIGN_IN_METHOD="twitter.com";qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO(t,e){return Ac(t,"POST","/v1/accounts:signUp",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Xr._fromIdTokenResponse(e,r,s),l=j0(r);return new Zo({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=j0(r);return new Zo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function j0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends ns{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Dd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Dd(e,n,r,s)}}function zI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Dd._fromErrorAndOperation(t,o,e,r):o})}async function vO(t,e,n=!1){const r=await _l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(t,e,n=!1){const{auth:r}=t;if(hr(r.app))return Promise.reject(ni(r));const s="reauthenticate";try{const o=await _l(t,zI(r,s,e,t),n);Ae(o.idToken,r,"internal-error");const l=vy(o.idToken);Ae(l,r,"internal-error");const{sub:c}=l;return Ae(t.uid===c,r,"user-mismatch"),Zo._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Dr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t,e,n=!1){if(hr(t.app))return Promise.reject(ni(t));const r="signIn",s=await zI(t,r,e),o=await Zo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function wO(t,e){return WI(ao(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t,e,n){Ae(n.url?.length>0,t,"invalid-continue-uri"),Ae(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Ae(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ae(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Ae(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(t){const e=ao(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TO(t,e,n){if(hr(t.app))return Promise.reject(ni(t));const r=ao(t),l=await og(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yO).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&qI(t),h}),c=await Zo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function SO(t,e,n){return hr(t.app)?Promise.reject(ni(t)):wO(ln(t),Ol.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qI(t),r})}async function U0(t,e){const n=ln(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&EO(n.auth,s,e);const{email:o}=await hO(n.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t,e){return Ns(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ln(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await _l(r,IO(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function AO(t,e,n,r){return ln(t).onIdTokenChanged(e,n,r)}function RO(t,e,n){return ln(t).beforeAuthStateChanged(e,n)}function PO(t,e,n,r){return ln(t).onAuthStateChanged(e,n,r)}function kO(t){return ln(t).signOut()}const Od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=1e3,xO=10;class KI extends HI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);zD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,xO):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KI.type="LOCAL";const DO=KI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI extends HI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GI.type="SESSION";const QI=GI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new cf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async p=>p(n.origin,o)),h=await OO(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=Sy("",20);s.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const w=y;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return window}function VO(t){Ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function LO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MO(){return navigator?.serviceWorker?.controller||null}function jO(){return JI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="firebaseLocalStorageDb",UO=1,Nd="firebaseLocalStorage",XI="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hf(t,e){return t.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function FO(){const t=indexedDB.deleteDatabase(YI);return new Pc(t).toPromise()}function ag(){const t=indexedDB.open(YI,UO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nd,{keyPath:XI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nd)?e(r):(r.close(),await FO(),e(await ag()))})})}async function F0(t,e,n){const r=hf(t,!0).put({[XI]:e,value:n});return new Pc(r).toPromise()}async function $O(t,e){const n=hf(t,!1).get(e),r=await new Pc(n).toPromise();return r===void 0?null:r.value}function $0(t,e){const n=hf(t,!0).delete(e);return new Pc(n).toPromise()}const BO=800,zO=3;class ZI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ag(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(jO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await LO(),!this.activeServiceWorker)return;this.sender=new NO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ag();return await F0(e,Od,"1"),await $0(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>F0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$O(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=hf(s,!1).getAll();return new Pc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZI.type="LOCAL";const WO=ZI;new bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t,e){return e?ei(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy extends wy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qO(t){return WI(t.auth,new Iy(t),t.bypassAuthState)}function HO(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),_O(n,new Iy(t),t.bypassAuthState)}async function KO(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),vO(n,new Iy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qO;case"linkViaPopup":case"linkViaRedirect":return KO;case"reauthViaPopup":case"reauthViaRedirect":return HO;default:Dr(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new bc(2e3,1e4);async function QO(t,e,n){if(hr(t.app))return Promise.reject(es(t,"operation-not-supported-in-this-environment"));const r=ao(t);SD(t,e,Ty);const s=eb(r,n);return new zo(r,"signInViaPopup",e,s).executeNotNull()}class zo extends tb{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=Sy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GO.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="pendingRedirect",pd=new Map;class YO extends tb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const r=await XO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XO(t,e){const n=tN(e),r=eN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ZO(t,e){pd.set(t._key(),e)}function eN(t){return ei(t._redirectPersistence)}function tN(t){return fd(JO,t.config.apiKey,t.name)}async function nN(t,e,n=!1){if(hr(t.app))return Promise.reject(ni(t));const r=ao(t),s=eb(r,e),l=await new YO(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=600*1e3;class sN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!nb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(es(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rN&&this.cachedEventUids.clear(),this.cachedEventUids.has(B0(e))}saveEventToCache(e){this.cachedEventUids.add(B0(e)),this.lastProcessedEventTime=Date.now()}}function B0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nb({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function iN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(t,e={}){return Ns(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lN=/^https?/;async function uN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oN(t);for(const n of e)try{if(cN(n))return}catch{}Dr(t,"unauthorized-domain")}function cN(t){const e=sg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!lN.test(n))return!1;if(aN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new bc(3e4,6e4);function z0(){const t=Ts().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dN(t){return new Promise((e,n)=>{function r(){z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z0(),n(es(t,"network-request-failed"))},timeout:hN.get()})}if(Ts().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ts().gapi?.load)r();else{const s=XD("iframefcb");return Ts()[s]=()=>{gapi.load?r():n(es(t,"network-request-failed"))},FI(`${YD()}?onload=${s}`).catch(o=>n(o))}}).catch(e=>{throw md=null,e})}let md=null;function fN(t){return md=md||dN(t),md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new bc(5e3,15e3),mN="__/auth/iframe",gN="emulator/auth/iframe",yN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _N(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yy(e,gN):`https://${t.config.authDomain}/${mN}`,r={apiKey:e.apiKey,appName:t.name,v:Dl},s=vN.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ic(r).slice(1)}`}async function wN(t){const e=await fN(t),n=Ts().gapi;return Ae(n,t,"internal-error"),e.open({where:document.body,url:_N(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yN,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=es(t,"network-request-failed"),c=Ts().setTimeout(()=>{o(l)},pN.get());function h(){Ts().clearTimeout(c),s(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TN=500,SN=600,IN="_blank",bN="http://localhost";class W0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AN(t,e,n,r=TN,s=SN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...EN,width:r.toString(),height:s.toString(),top:o,left:l},p=Cn().toLowerCase();n&&(c=OI(p)?IN:n),xI(p)&&(e=e||bN,h.scrollbars="yes");const m=Object.entries(h).reduce((w,[S,A])=>`${w}${S}=${A},`,"");if(BD(p)&&c!=="_self")return RN(e||"",c),new W0(null);const y=window.open(e||"",c,m);Ae(y,t,"popup-blocked");try{y.focus()}catch{}return new W0(y)}function RN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="__/auth/handler",kN="emulator/auth/handler",CN=encodeURIComponent("fac");async function q0(t,e,n,r,s,o){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Dl,eventId:s};if(e instanceof Ty){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",ox(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof Rc){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await t._getAppCheckToken(),p=h?`#${CN}=${encodeURIComponent(h)}`:"";return`${xN(t)}?${Ic(c).slice(1)}${p}`}function xN({config:t}){return t.emulator?yy(t,kN):`https://${t.authDomain}/${PN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="webStorageSupport";class DN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QI,this._completeRedirectFn=nN,this._overrideRedirectResult=ZO}async _openPopup(e,n,r,s){oi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await q0(e,n,r,sg(),s);return AN(e,o,Sy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await q0(e,n,r,sg(),s);return VO(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(oi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wN(e),r=new sN(e);return n.register("authEvent",s=>(Ae(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pm,{type:pm},s=>{const o=s?.[0]?.[pm];o!==void 0&&n(!!o),Dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jI()||DI()||_y()}}const ON=DN;var H0="@firebase/auth",K0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LN(t){ks(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ae(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UI(t)},p=new GD(r,s,o,h);return sO(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ks(new ts("auth-internal",e=>{const n=ao(e.getProvider("auth").getImmediate());return(r=>new NN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(H0,K0,VN(t)),Cr(H0,K0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=300,jN=dI("authIdTokenMaxAge")||MN;let G0=null;const UN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jN)return;const s=n?.token;G0!==s&&(G0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function FN(t=py()){const e=ia(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rO(t,{popupRedirectResolver:ON,persistence:[WO,DO,QI]}),r=dI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=UN(o.toString());RO(n,l,()=>l(n.currentUser)),AO(n,c=>l(c))}}const s=cI("auth");return s&&iO(n,`http://${s}`),n}function $N(){return document.getElementsByTagName("head")?.[0]??document}QD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=es("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",$N().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LN("Browser");var Q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,rb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,b){function P(){}P.prototype=b.prototype,k.F=b.prototype,k.prototype=new P,k.prototype.constructor=k,k.D=function(L,M,B){for(var x=Array(arguments.length-2),We=2;We<arguments.length;We++)x[We-2]=arguments[We];return b.prototype[M].apply(L,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,b,P){P||(P=0);const L=Array(16);if(typeof b=="string")for(var M=0;M<16;++M)L[M]=b.charCodeAt(P++)|b.charCodeAt(P++)<<8|b.charCodeAt(P++)<<16|b.charCodeAt(P++)<<24;else for(M=0;M<16;++M)L[M]=b[P++]|b[P++]<<8|b[P++]<<16|b[P++]<<24;b=k.g[0],P=k.g[1],M=k.g[2];let B=k.g[3],x;x=b+(B^P&(M^B))+L[0]+3614090360&4294967295,b=P+(x<<7&4294967295|x>>>25),x=B+(M^b&(P^M))+L[1]+3905402710&4294967295,B=b+(x<<12&4294967295|x>>>20),x=M+(P^B&(b^P))+L[2]+606105819&4294967295,M=B+(x<<17&4294967295|x>>>15),x=P+(b^M&(B^b))+L[3]+3250441966&4294967295,P=M+(x<<22&4294967295|x>>>10),x=b+(B^P&(M^B))+L[4]+4118548399&4294967295,b=P+(x<<7&4294967295|x>>>25),x=B+(M^b&(P^M))+L[5]+1200080426&4294967295,B=b+(x<<12&4294967295|x>>>20),x=M+(P^B&(b^P))+L[6]+2821735955&4294967295,M=B+(x<<17&4294967295|x>>>15),x=P+(b^M&(B^b))+L[7]+4249261313&4294967295,P=M+(x<<22&4294967295|x>>>10),x=b+(B^P&(M^B))+L[8]+1770035416&4294967295,b=P+(x<<7&4294967295|x>>>25),x=B+(M^b&(P^M))+L[9]+2336552879&4294967295,B=b+(x<<12&4294967295|x>>>20),x=M+(P^B&(b^P))+L[10]+4294925233&4294967295,M=B+(x<<17&4294967295|x>>>15),x=P+(b^M&(B^b))+L[11]+2304563134&4294967295,P=M+(x<<22&4294967295|x>>>10),x=b+(B^P&(M^B))+L[12]+1804603682&4294967295,b=P+(x<<7&4294967295|x>>>25),x=B+(M^b&(P^M))+L[13]+4254626195&4294967295,B=b+(x<<12&4294967295|x>>>20),x=M+(P^B&(b^P))+L[14]+2792965006&4294967295,M=B+(x<<17&4294967295|x>>>15),x=P+(b^M&(B^b))+L[15]+1236535329&4294967295,P=M+(x<<22&4294967295|x>>>10),x=b+(M^B&(P^M))+L[1]+4129170786&4294967295,b=P+(x<<5&4294967295|x>>>27),x=B+(P^M&(b^P))+L[6]+3225465664&4294967295,B=b+(x<<9&4294967295|x>>>23),x=M+(b^P&(B^b))+L[11]+643717713&4294967295,M=B+(x<<14&4294967295|x>>>18),x=P+(B^b&(M^B))+L[0]+3921069994&4294967295,P=M+(x<<20&4294967295|x>>>12),x=b+(M^B&(P^M))+L[5]+3593408605&4294967295,b=P+(x<<5&4294967295|x>>>27),x=B+(P^M&(b^P))+L[10]+38016083&4294967295,B=b+(x<<9&4294967295|x>>>23),x=M+(b^P&(B^b))+L[15]+3634488961&4294967295,M=B+(x<<14&4294967295|x>>>18),x=P+(B^b&(M^B))+L[4]+3889429448&4294967295,P=M+(x<<20&4294967295|x>>>12),x=b+(M^B&(P^M))+L[9]+568446438&4294967295,b=P+(x<<5&4294967295|x>>>27),x=B+(P^M&(b^P))+L[14]+3275163606&4294967295,B=b+(x<<9&4294967295|x>>>23),x=M+(b^P&(B^b))+L[3]+4107603335&4294967295,M=B+(x<<14&4294967295|x>>>18),x=P+(B^b&(M^B))+L[8]+1163531501&4294967295,P=M+(x<<20&4294967295|x>>>12),x=b+(M^B&(P^M))+L[13]+2850285829&4294967295,b=P+(x<<5&4294967295|x>>>27),x=B+(P^M&(b^P))+L[2]+4243563512&4294967295,B=b+(x<<9&4294967295|x>>>23),x=M+(b^P&(B^b))+L[7]+1735328473&4294967295,M=B+(x<<14&4294967295|x>>>18),x=P+(B^b&(M^B))+L[12]+2368359562&4294967295,P=M+(x<<20&4294967295|x>>>12),x=b+(P^M^B)+L[5]+4294588738&4294967295,b=P+(x<<4&4294967295|x>>>28),x=B+(b^P^M)+L[8]+2272392833&4294967295,B=b+(x<<11&4294967295|x>>>21),x=M+(B^b^P)+L[11]+1839030562&4294967295,M=B+(x<<16&4294967295|x>>>16),x=P+(M^B^b)+L[14]+4259657740&4294967295,P=M+(x<<23&4294967295|x>>>9),x=b+(P^M^B)+L[1]+2763975236&4294967295,b=P+(x<<4&4294967295|x>>>28),x=B+(b^P^M)+L[4]+1272893353&4294967295,B=b+(x<<11&4294967295|x>>>21),x=M+(B^b^P)+L[7]+4139469664&4294967295,M=B+(x<<16&4294967295|x>>>16),x=P+(M^B^b)+L[10]+3200236656&4294967295,P=M+(x<<23&4294967295|x>>>9),x=b+(P^M^B)+L[13]+681279174&4294967295,b=P+(x<<4&4294967295|x>>>28),x=B+(b^P^M)+L[0]+3936430074&4294967295,B=b+(x<<11&4294967295|x>>>21),x=M+(B^b^P)+L[3]+3572445317&4294967295,M=B+(x<<16&4294967295|x>>>16),x=P+(M^B^b)+L[6]+76029189&4294967295,P=M+(x<<23&4294967295|x>>>9),x=b+(P^M^B)+L[9]+3654602809&4294967295,b=P+(x<<4&4294967295|x>>>28),x=B+(b^P^M)+L[12]+3873151461&4294967295,B=b+(x<<11&4294967295|x>>>21),x=M+(B^b^P)+L[15]+530742520&4294967295,M=B+(x<<16&4294967295|x>>>16),x=P+(M^B^b)+L[2]+3299628645&4294967295,P=M+(x<<23&4294967295|x>>>9),x=b+(M^(P|~B))+L[0]+4096336452&4294967295,b=P+(x<<6&4294967295|x>>>26),x=B+(P^(b|~M))+L[7]+1126891415&4294967295,B=b+(x<<10&4294967295|x>>>22),x=M+(b^(B|~P))+L[14]+2878612391&4294967295,M=B+(x<<15&4294967295|x>>>17),x=P+(B^(M|~b))+L[5]+4237533241&4294967295,P=M+(x<<21&4294967295|x>>>11),x=b+(M^(P|~B))+L[12]+1700485571&4294967295,b=P+(x<<6&4294967295|x>>>26),x=B+(P^(b|~M))+L[3]+2399980690&4294967295,B=b+(x<<10&4294967295|x>>>22),x=M+(b^(B|~P))+L[10]+4293915773&4294967295,M=B+(x<<15&4294967295|x>>>17),x=P+(B^(M|~b))+L[1]+2240044497&4294967295,P=M+(x<<21&4294967295|x>>>11),x=b+(M^(P|~B))+L[8]+1873313359&4294967295,b=P+(x<<6&4294967295|x>>>26),x=B+(P^(b|~M))+L[15]+4264355552&4294967295,B=b+(x<<10&4294967295|x>>>22),x=M+(b^(B|~P))+L[6]+2734768916&4294967295,M=B+(x<<15&4294967295|x>>>17),x=P+(B^(M|~b))+L[13]+1309151649&4294967295,P=M+(x<<21&4294967295|x>>>11),x=b+(M^(P|~B))+L[4]+4149444226&4294967295,b=P+(x<<6&4294967295|x>>>26),x=B+(P^(b|~M))+L[11]+3174756917&4294967295,B=b+(x<<10&4294967295|x>>>22),x=M+(b^(B|~P))+L[2]+718787259&4294967295,M=B+(x<<15&4294967295|x>>>17),x=P+(B^(M|~b))+L[9]+3951481745&4294967295,k.g[0]=k.g[0]+b&4294967295,k.g[1]=k.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+B&4294967295}r.prototype.v=function(k,b){b===void 0&&(b=k.length);const P=b-this.blockSize,L=this.C;let M=this.h,B=0;for(;B<b;){if(M==0)for(;B<=P;)s(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<b;)if(L[M++]=k.charCodeAt(B++),M==this.blockSize){s(this,L),M=0;break}}else for(;B<b;)if(L[M++]=k[B++],M==this.blockSize){s(this,L),M=0;break}}this.h=M,this.o+=b},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var b=1;b<k.length-8;++b)k[b]=0;b=this.o*8;for(var P=k.length-8;P<k.length;++P)k[P]=b&255,b/=256;for(this.v(k),k=Array(16),b=0,P=0;P<4;++P)for(let L=0;L<32;L+=8)k[b++]=this.g[P]>>>L&255;return k};function o(k,b){var P=c;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=b(k)}function l(k,b){this.h=b;const P=[];let L=!0;for(let M=k.length-1;M>=0;M--){const B=k[M]|0;L&&B==b||(P[M]=B,L=!1)}this.g=P}var c={};function h(k){return-128<=k&&k<128?o(k,function(b){return new l([b|0],b<0?-1:0)}):new l([k|0],k<0?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return y;if(k<0)return R(p(-k));const b=[];let P=1;for(let L=0;k>=P;L++)b[L]=k/P|0,P*=4294967296;return new l(b,0)}function m(k,b){if(k.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(k.charAt(0)=="-")return R(m(k.substring(1),b));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=p(Math.pow(b,8));let L=y;for(let B=0;B<k.length;B+=8){var M=Math.min(8,k.length-B);const x=parseInt(k.substring(B,B+M),b);M<8?(M=p(Math.pow(b,M)),L=L.j(M).add(p(x))):(L=L.j(P),L=L.add(p(x)))}return L}var y=h(0),w=h(1),S=h(16777216);t=l.prototype,t.m=function(){if(C(this))return-R(this).m();let k=0,b=1;for(let P=0;P<this.g.length;P++){const L=this.i(P);k+=(L>=0?L:4294967296+L)*b,b*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(A(this))return"0";if(C(this))return"-"+R(this).toString(k);const b=p(Math.pow(k,6));var P=this;let L="";for(;;){const M=K(P,b).g;P=O(P,M.j(b));let B=((P.g.length>0?P.g[0]:P.h)>>>0).toString(k);if(P=M,A(P))return B+L;for(;B.length<6;)B="0"+B;L=B+L}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function A(k){if(k.h!=0)return!1;for(let b=0;b<k.g.length;b++)if(k.g[b]!=0)return!1;return!0}function C(k){return k.h==-1}t.l=function(k){return k=O(this,k),C(k)?-1:A(k)?0:1};function R(k){const b=k.g.length,P=[];for(let L=0;L<b;L++)P[L]=~k.g[L];return new l(P,~k.h).add(w)}t.abs=function(){return C(this)?R(this):this},t.add=function(k){const b=Math.max(this.g.length,k.g.length),P=[];let L=0;for(let M=0;M<=b;M++){let B=L+(this.i(M)&65535)+(k.i(M)&65535),x=(B>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);L=x>>>16,B&=65535,x&=65535,P[M]=x<<16|B}return new l(P,P[P.length-1]&-2147483648?-1:0)};function O(k,b){return k.add(R(b))}t.j=function(k){if(A(this)||A(k))return y;if(C(this))return C(k)?R(this).j(R(k)):R(R(this).j(k));if(C(k))return R(this.j(R(k)));if(this.l(S)<0&&k.l(S)<0)return p(this.m()*k.m());const b=this.g.length+k.g.length,P=[];for(var L=0;L<2*b;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(let M=0;M<k.g.length;M++){const B=this.i(L)>>>16,x=this.i(L)&65535,We=k.i(M)>>>16,it=k.i(M)&65535;P[2*L+2*M]+=x*it,U(P,2*L+2*M),P[2*L+2*M+1]+=B*it,U(P,2*L+2*M+1),P[2*L+2*M+1]+=x*We,U(P,2*L+2*M+1),P[2*L+2*M+2]+=B*We,U(P,2*L+2*M+2)}for(k=0;k<b;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=b;k<2*b;k++)P[k]=0;return new l(P,0)};function U(k,b){for(;(k[b]&65535)!=k[b];)k[b+1]+=k[b]>>>16,k[b]&=65535,b++}function N(k,b){this.g=k,this.h=b}function K(k,b){if(A(b))throw Error("division by zero");if(A(k))return new N(y,y);if(C(k))return b=K(R(k),b),new N(R(b.g),R(b.h));if(C(b))return b=K(k,R(b)),new N(R(b.g),b.h);if(k.g.length>30){if(C(k)||C(b))throw Error("slowDivide_ only works with positive integers.");for(var P=w,L=b;L.l(k)<=0;)P=H(P),L=H(L);var M=X(P,1),B=X(L,1);for(L=X(L,2),P=X(P,2);!A(L);){var x=B.add(L);x.l(k)<=0&&(M=M.add(P),B=x),L=X(L,1),P=X(P,1)}return b=O(k,M.j(b)),new N(M,b)}for(M=y;k.l(b)>=0;){for(P=Math.max(1,Math.floor(k.m()/b.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),B=p(P),x=B.j(b);C(x)||x.l(k)>0;)P-=L,B=p(P),x=B.j(b);A(B)&&(B=w),M=M.add(B),k=O(k,x)}return new N(M,k)}t.B=function(k){return K(this,k).h},t.and=function(k){const b=Math.max(this.g.length,k.g.length),P=[];for(let L=0;L<b;L++)P[L]=this.i(L)&k.i(L);return new l(P,this.h&k.h)},t.or=function(k){const b=Math.max(this.g.length,k.g.length),P=[];for(let L=0;L<b;L++)P[L]=this.i(L)|k.i(L);return new l(P,this.h|k.h)},t.xor=function(k){const b=Math.max(this.g.length,k.g.length),P=[];for(let L=0;L<b;L++)P[L]=this.i(L)^k.i(L);return new l(P,this.h^k.h)};function H(k){const b=k.g.length+1,P=[];for(let L=0;L<b;L++)P[L]=k.i(L)<<1|k.i(L-1)>>>31;return new l(P,k.h)}function X(k,b){const P=b>>5;b%=32;const L=k.g.length-P,M=[];for(let B=0;B<L;B++)M[B]=b>0?k.i(B+P)>>>b|k.i(B+P+1)<<32-b:k.i(B+P);return new l(M,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,rb=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=m,Ji=l}).apply(typeof Q0<"u"?Q0:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sb,Nu,ib,gd,lg,ob,ab,lb;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,_){if(_)e:{var E=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var W=d[I];if(!(W in E))break e;E=E[W]}d=d[d.length-1],I=E[d],_=_(I),_!=I&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(_){var E=[],I;for(I in _)Object.prototype.hasOwnProperty.call(_,I)&&E.push([I,_[I]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function h(d,_,E){return d.call.apply(d.bind,arguments)}function p(d,_,E){return p=h,p.apply(null,arguments)}function m(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function y(d,_){function E(){}E.prototype=_.prototype,d.Z=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(I,W,Q){for(var ue=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ue[Fe-2]=arguments[Fe];return _.prototype[W].apply(I,ue)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function S(d){const _=d.length;if(_>0){const E=Array(_);for(let I=0;I<_;I++)E[I]=d[I];return E}return[]}function A(d,_){for(let I=1;I<arguments.length;I++){const W=arguments[I];var E=typeof W;if(E=E!="object"?E:W?Array.isArray(W)?"array":E:"null",E=="array"||E=="object"&&typeof W.length=="number"){E=d.length||0;const Q=W.length||0;d.length=E+Q;for(let ue=0;ue<Q;ue++)d[E+ue]=W[ue]}else d.push(W)}}class C{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function R(d){l.setTimeout(()=>{throw d},0)}function O(){var d=k;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class U{constructor(){this.h=this.g=null}add(_,E){const I=N.get();I.set(_,E),this.h?this.h.next=I:this.g=I,this.h=I}}var N=new C(()=>new K,d=>d.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let H,X=!1,k=new U,b=()=>{const d=Promise.resolve(void 0);H=()=>{d.then(P)}};function P(){for(var d;d=O();){try{d.h.call(d.g)}catch(E){R(E)}var _=N;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}X=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,_),l.removeEventListener("test",E,_)}catch{}return d})();function x(d){return/^[\s\xa0]*$/.test(d)}function We(d,_){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}y(We,M),We.prototype.init=function(d,_){const E=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var it="closure_listenable_"+(Math.random()*1e6|0),je=0;function _e(d,_,E,I,W){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!I,this.ha=W,this.key=++je,this.da=this.fa=!1}function re(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function fe(d,_,E){for(const I in d)_.call(E,d[I],I,d)}function le(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function $(d){const _={};for(const E in d)_[E]=d[E];return _}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(d,_){let E,I;for(let W=1;W<arguments.length;W++){I=arguments[W];for(E in I)d[E]=I[E];for(let Q=0;Q<ee.length;Q++)E=ee[Q],Object.prototype.hasOwnProperty.call(I,E)&&(d[E]=I[E])}}function ge(d){this.src=d,this.g={},this.h=0}ge.prototype.add=function(d,_,E,I,W){const Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);const ue=Ce(d,_,I,W);return ue>-1?(_=d[ue],E||(_.fa=!1)):(_=new _e(_,this.src,Q,!!I,W),_.fa=E,d.push(_)),_};function Ee(d,_){const E=_.type;if(E in d.g){var I=d.g[E],W=Array.prototype.indexOf.call(I,_,void 0),Q;(Q=W>=0)&&Array.prototype.splice.call(I,W,1),Q&&(re(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Ce(d,_,E,I){for(let W=0;W<d.length;++W){const Q=d[W];if(!Q.da&&Q.listener==_&&Q.capture==!!E&&Q.ha==I)return W}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Te={};function qe(d,_,E,I,W){if(Array.isArray(_)){for(let Q=0;Q<_.length;Q++)qe(d,_[Q],E,I,W);return null}return E=Tt(E),d&&d[it]?d.J(_,E,c(I)?!!I.capture:!1,W):kt(d,_,E,!1,I,W)}function kt(d,_,E,I,W,Q){if(!_)throw Error("Invalid event type");const ue=c(W)?!!W.capture:!!W;let Fe=xe(d);if(Fe||(d[Be]=Fe=new ge(d)),E=Fe.add(_,E,I,ue,Q),E.proxy)return E;if(I=Yn(),E.proxy=I,I.src=d,I.listener=E,d.addEventListener)B||(W=ue),W===void 0&&(W=!1),d.addEventListener(_.toString(),I,W);else if(d.attachEvent)d.attachEvent(Y(_.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Yn(){function d(E){return _.call(d.src,d.listener,E)}const _=he;return d}function Un(d,_,E,I,W){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)Un(d,_[Q],E,I,W);else I=c(I)?!!I.capture:!!I,E=Tt(E),d&&d[it]?(d=d.i,Q=String(_).toString(),Q in d.g&&(_=d.g[Q],E=Ce(_,E,I,W),E>-1&&(re(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete d.g[Q],d.h--)))):d&&(d=xe(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Ce(_,E,I,W)),(E=d>-1?_[d]:null)&&Z(E))}function Z(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[it])Ee(_.i,d);else{var E=d.type,I=d.proxy;_.removeEventListener?_.removeEventListener(E,I,d.capture):_.detachEvent?_.detachEvent(Y(E),I):_.addListener&&_.removeListener&&_.removeListener(I),(E=xe(_))?(Ee(E,d),E.h==0&&(E.src=null,_[Be]=null)):re(d)}}}function Y(d){return d in Te?Te[d]:Te[d]="on"+d}function he(d,_){if(d.da)d=!0;else{_=new We(_,this);const E=d.listener,I=d.ha||d.src;d.fa&&Z(d),d=E.call(I,_)}return d}function xe(d){return d=d[Be],d instanceof ge?d:null}var Ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tt(d){return typeof d=="function"?d:(d[Ze]||(d[Ze]=function(_){return d.handleEvent(_)}),d[Ze])}function Qe(){L.call(this),this.i=new ge(this),this.M=this,this.G=null}y(Qe,L),Qe.prototype[it]=!0,Qe.prototype.removeEventListener=function(d,_,E,I){Un(this,d,_,E,I)};function ht(d,_){var E,I=d.G;if(I)for(E=[];I;I=I.G)E.push(I);if(d=d.M,I=_.type||_,typeof _=="string")_=new M(_,d);else if(_ instanceof M)_.target=_.target||d;else{var W=_;_=new M(I,d),de(_,W)}W=!0;let Q,ue;if(E)for(ue=E.length-1;ue>=0;ue--)Q=_.g=E[ue],W=xn(Q,I,!0,_)&&W;if(Q=_.g=d,W=xn(Q,I,!0,_)&&W,W=xn(Q,I,!1,_)&&W,E)for(ue=0;ue<E.length;ue++)Q=_.g=E[ue],W=xn(Q,I,!1,_)&&W}Qe.prototype.N=function(){if(Qe.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const E=d.g[_];for(let I=0;I<E.length;I++)re(E[I]);delete d.g[_],d.h--}}this.G=null},Qe.prototype.J=function(d,_,E,I){return this.i.add(String(d),_,!1,E,I)},Qe.prototype.K=function(d,_,E,I){return this.i.add(String(d),_,!0,E,I)};function xn(d,_,E,I){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let W=!0;for(let Q=0;Q<_.length;++Q){const ue=_[Q];if(ue&&!ue.da&&ue.capture==E){const Fe=ue.listener,Mt=ue.ha||ue.src;ue.fa&&Ee(d.i,ue),W=Fe.call(Mt,I)!==!1&&W}}return W&&!I.defaultPrevented}function Nt(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(d,_||0)}function _n(d){d.g=Nt(()=>{d.g=null,d.i&&(d.i=!1,_n(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class fi extends L{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:_n(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(d){L.call(this),this.h=d,this.g={}}y(rt,L);var Vt=[];function pi(d){fe(d.g,function(_,E){this.g.hasOwnProperty(E)&&Z(_)},d),d.g={}}rt.prototype.N=function(){rt.Z.N.call(this),pi(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nr=l.JSON.stringify,mi=l.JSON.parse,Fn=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Vr(){}function Lr(){}var rs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gi(){M.call(this,"d")}y(gi,M);function yi(){M.call(this,"c")}y(yi,M);var $n={},vi=null;function gr(){return vi=vi||new Qe}$n.Ia="serverreachability";function Dn(d){M.call(this,$n.Ia,d)}y(Dn,M);function Mr(d){const _=gr();ht(_,new Dn(_))}$n.STAT_EVENT="statevent";function jr(d,_){M.call(this,$n.STAT_EVENT,d),this.stat=_}y(jr,M);function pt(d){const _=gr();ht(_,new jr(_,d))}$n.Ja="timingevent";function _i(d,_){M.call(this,$n.Ja,d),this.size=_}y(_i,M);function De(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},_)}function lt(){this.g=!0}lt.prototype.ua=function(){this.g=!1};function Lt(d,_,E,I,W,Q){d.info(function(){if(d.g)if(Q){var ue="",Fe=Q.split("&");for(let ot=0;ot<Fe.length;ot++){var Mt=Fe[ot].split("=");if(Mt.length>1){const Bt=Mt[0];Mt=Mt[1];const sr=Bt.split("_");ue=sr.length>=2&&sr[1]=="type"?ue+(Bt+"="+Mt+"&"):ue+(Bt+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+I+") [attempt "+W+"]: "+_+`
`+E+`
`+ue})}function en(d,_,E,I,W,Q,ue){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+W+"]: "+_+`
`+E+`
`+Q+" "+ue})}function On(d,_,E,I){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ft(d,E)+(I?" "+I:"")})}function Ct(d,_){d.info(function(){return"TIMEOUT: "+_})}lt.prototype.info=function(){};function Ft(d,_){if(!d.g)return _;if(!_)return null;try{const Q=JSON.parse(_);if(Q){for(d=0;d<Q.length;d++)if(Array.isArray(Q[d])){var E=Q[d];if(!(E.length<2)){var I=E[1];if(Array.isArray(I)&&!(I.length<1)){var W=I[0];if(W!="noop"&&W!="stop"&&W!="close")for(let ue=1;ue<I.length;ue++)I[ue]=""}}}}return Nr(Q)}catch{return _}}var Xn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$t={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wn;function yr(){}y(yr,Vr),yr.prototype.g=function(){return new XMLHttpRequest},wn=new yr;function tn(d){return encodeURIComponent(String(d))}function uo(d){var _=1;d=d.split(":");const E=[];for(;_>0&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function vr(d,_,E,I){this.j=d,this.i=_,this.l=E,this.S=I||1,this.V=new rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Uc}function Uc(){this.i=null,this.g="",this.h=!1}var Fc={},$l={};function Ur(d,_,E){d.M=1,d.A=Ls(_r(_)),d.u=E,d.R=!0,Bl(d,null)}function Bl(d,_){d.F=Date.now(),co(d),d.B=_r(d.A);var E=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Xl(E.i,"t",I),d.C=0,E=d.j.L,d.h=new Uc,d.g=Jc(d.j,E?_:null,!d.u),d.P>0&&(d.O=new fi(p(d.Y,d,d.g),d.P)),_=d.V,E=d.g,I=d.ba;var W="readystatechange";Array.isArray(W)||(W&&(Vt[0]=W.toString()),W=Vt);for(let Q=0;Q<W.length;Q++){const ue=qe(E,W[Q],I||_.handleEvent,!1,_.h||_);if(!ue)break;_.g[ue.key]=ue}_=d.J?$(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),Mr(),Lt(d.i,d.v,d.B,d.l,d.S,d.u)}vr.prototype.ba=function(d){d=d.target;const _=this.O;_&&cs(d)==3?_.j():this.Y(d)},vr.prototype.Y=function(d){try{if(d==this.g)e:{const Fe=cs(this.g),Mt=this.g.ya(),ot=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Gc(this.g)))){this.K||Fe!=4||Mt==7||(Mt==8||ot<=0?Mr(3):Mr(2)),ca(this);var _=this.g.ca();this.X=_;var E=$c(this);if(this.o=_==200,en(this.i,this.v,this.B,this.l,this.S,Fe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var I,W=this.g;if((I=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(I)){var Q=I;break t}}Q=null}if(d=Q)On(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mt(this,d);else{this.o=!1,this.m=3,pt(12),Vs(this),ho(this);break e}}if(this.R){d=!0;let Bt;for(;!this.K&&this.C<E.length;)if(Bt=zc(this,E),Bt==$l){Fe==4&&(this.m=4,pt(14),d=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Fc){this.m=4,pt(15),On(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else On(this.i,this.l,Bt,null),mt(this,Bt);if(Bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||E.length!=0||this.h.h||(this.m=1,pt(16),d=!1),this.o=this.o&&d,!d)On(this.i,this.l,E,"[Invalid Chunked Response]"),Vs(this),ho(this);else if(E.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Eo(ue),ue.P=!0,pt(11))}}else On(this.i,this.l,E,null),mt(this,E);Fe==4&&Vs(this),this.o&&!this.K&&(Fe==4?wa(this.j,this):(this.o=!1,co(this)))}else eu(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),Vs(this),ho(this)}}}catch{}finally{}};function $c(d){if(!Bc(d))return d.g.la();const _=Gc(d.g);if(_==="")return"";let E="";const I=_.length,W=cs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Vs(d),ho(d),"";d.h.i=new l.TextDecoder}for(let Q=0;Q<I;Q++)d.h.h=!0,E+=d.h.i.decode(_[Q],{stream:!(W&&Q==I-1)});return _.length=0,d.h.g+=E,d.C=0,d.h.g}function Bc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function zc(d,_){var E=d.C,I=_.indexOf(`
`,E);return I==-1?$l:(E=Number(_.substring(E,I)),isNaN(E)?Fc:(I+=1,I+E>_.length?$l:(_=_.slice(I,I+E),d.C=I+E,_)))}vr.prototype.cancel=function(){this.K=!0,Vs(this)};function co(d){d.T=Date.now()+d.H,zl(d,d.H)}function zl(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=De(p(d.aa,d),_)}function ca(d){d.D&&(l.clearTimeout(d.D),d.D=null)}vr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ct(this.i,this.B),this.M!=2&&(Mr(),pt(17)),Vs(this),this.m=2,ho(this)):zl(this,this.T-d)};function ho(d){d.j.I==0||d.K||wa(d.j,d)}function Vs(d){ca(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,pi(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function mt(d,_){try{var E=d.j;if(E.I!=0&&(E.g==d||ql(E.h,d))){if(!d.L&&ql(E.h,d)&&E.I==3){try{var I=E.Ba.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var W=I;if(W[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)_a(E),nr(E);else break e;fs(E),pt(18)}}else E.xa=W[1],0<E.xa-E.K&&W[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=De(p(E.Va,E),6e3));fo(E.h)<=1&&E.ta&&(E.ta=void 0)}else rr(E,11)}else if((d.L||E.g==d)&&_a(E),!x(_))for(W=E.Ba.g.parse(_),_=0;_<W.length;_++){let ot=W[_];const Bt=ot[0];if(!(Bt<=E.K))if(E.K=Bt,ot=ot[1],E.I==2)if(ot[0]=="c"){E.M=ot[1],E.ba=ot[2];const sr=ot[3];sr!=null&&(E.ka=sr,E.j.info("VER="+E.ka));const $s=ot[4];$s!=null&&(E.za=$s,E.j.info("SVER="+E.za));const ps=ot[5];ps!=null&&typeof ps=="number"&&ps>0&&(I=1.5*ps,E.O=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const ms=d.g;if(ms){const Sa=ms.g?ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var Q=I.h;Q.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(da(Q,Q.h),Q.h=null))}if(I.G){const ru=ms.g?ms.g.getResponseHeader("X-HTTP-Session-Id"):null;ru&&(I.wa=ru,nt(I.J,I.G,ru))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),I=E;var ue=d;if(I.na=nu(I,I.L?I.ba:null,I.W),ue.L){po(I.h,ue);var Fe=ue,Mt=I.O;Mt&&(Fe.H=Mt),Fe.D&&(ca(Fe),co(Fe)),I.g=ue}else En(I);E.i.length>0&&Fs(E)}else ot[0]!="stop"&&ot[0]!="close"||rr(E,7);else E.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?rr(E,7):ya(E):ot[0]!="noop"&&E.l&&E.l.qa(ot),E.A=0)}}Mr(4)}catch{}}var Df=class{constructor(d,_){this.g=d,this.map=_}};function ha(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function fo(d){return d.h?1:d.g?d.g.size:0}function ql(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function da(d,_){d.g?d.g.add(_):d.h=_}function po(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}ha.prototype.cancel=function(){if(this.i=Zn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Zn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.G);return _}return S(d.i)}var Wc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function er(d,_){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const I=d[E].indexOf("=");let W,Q=null;I>=0?(W=d[E].substring(0,I),Q=d[E].substring(I+1)):W=d[E],_(W,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function ss(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof ss?(this.l=d.l,mo(this,d.j),this.o=d.o,this.g=d.g,is(this,d.u),this.h=d.h,wi(this,Zl(d.i)),this.m=d.m):d&&(_=String(d).match(Wc))?(this.l=!1,mo(this,_[1]||"",!0),this.o=go(_[2]||""),this.g=go(_[3]||"",!0),is(this,_[4]),this.h=go(_[5]||"",!0),wi(this,_[6]||"",!0),this.m=go(_[7]||"")):(this.l=!1,this.i=new Je(null,this.l))}ss.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(yo(_,Kl,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(yo(_,Kl,!0),"@"),d.push(tn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(yo(E,E.charAt(0)=="/"?vo:Gl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",yo(E,Ql)),d.join("")},ss.prototype.resolve=function(d){const _=_r(this);let E=!!d.j;E?mo(_,d.j):E=!!d.o,E?_.o=d.o:E=!!d.g,E?_.g=d.g:E=d.u!=null;var I=d.h;if(E)is(_,d.u);else if(E=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var W=_.h.lastIndexOf("/");W!=-1&&(I=_.h.slice(0,W+1)+I)}if(W=I,W==".."||W==".")I="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){I=W.lastIndexOf("/",0)==0,W=W.split("/");const Q=[];for(let ue=0;ue<W.length;){const Fe=W[ue++];Fe=="."?I&&ue==W.length&&Q.push(""):Fe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),I&&ue==W.length&&Q.push("")):(Q.push(Fe),I=!0)}I=Q.join("/")}else I=W}return E?_.h=I:E=d.i.toString()!=="",E?wi(_,Zl(d.i)):E=!!d.m,E&&(_.m=d.m),_};function _r(d){return new ss(d)}function mo(d,_,E){d.j=E?go(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function is(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function wi(d,_,E){_ instanceof Je?(d.i=_,pa(d.i,d.l)):(E||(_=yo(_,Of)),d.i=new Je(_,d.l))}function nt(d,_,E){d.i.set(_,E)}function Ls(d){return nt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function go(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function yo(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,Hl),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Hl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Kl=/[#\/\?@]/g,Gl=/[#\?:]/g,vo=/[#\?]/g,Of=/[#\?@]/g,Ql=/#/g;function Je(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function os(d){d.g||(d.g=new Map,d.h=0,d.i&&er(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}t=Je.prototype,t.add=function(d,_){os(this),this.i=null,d=as(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function Jl(d,_){os(d),_=as(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function fa(d,_){return os(d),_=as(d,_),d.g.has(_)}t.forEach=function(d,_){os(this),this.g.forEach(function(E,I){E.forEach(function(W){d.call(_,W,I,this)},this)},this)};function Yl(d,_){os(d);let E=[];if(typeof _=="string")fa(d,_)&&(E=E.concat(d.g.get(as(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)E=E.concat(d[_]);return E}t.set=function(d,_){return os(this),this.i=null,d=as(this,d),fa(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},t.get=function(d,_){return d?(d=Yl(this,d),d.length>0?String(d[0]):_):_};function Xl(d,_,E){Jl(d,_),E.length>0&&(d.i=null,d.g.set(as(d,_),S(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let I=0;I<_.length;I++){var E=_[I];const W=tn(E);E=Yl(this,E);for(let Q=0;Q<E.length;Q++){let ue=W;E[Q]!==""&&(ue+="="+tn(E[Q])),d.push(ue)}}return this.i=d.join("&")};function Zl(d){const _=new Je;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function as(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function pa(d,_){_&&!d.j&&(os(d),d.i=null,d.g.forEach(function(E,I){const W=I.toLowerCase();I!=W&&(Jl(this,I),Xl(this,W,E))},d)),d.j=_}function ls(d,_){const E=new lt;if(l.Image){const I=new Image;I.onload=m(un,E,"TestLoadImage: loaded",!0,_,I),I.onerror=m(un,E,"TestLoadImage: error",!1,_,I),I.onabort=m(un,E,"TestLoadImage: abort",!1,_,I),I.ontimeout=m(un,E,"TestLoadImage: timeout",!1,_,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else _(!1)}function us(d,_){const E=new lt,I=new AbortController,W=setTimeout(()=>{I.abort(),un(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:I.signal}).then(Q=>{clearTimeout(W),Q.ok?un(E,"TestPingServer: ok",!0,_):un(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),un(E,"TestPingServer: error",!1,_)})}function un(d,_,E,I,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),I(E)}catch{}}function _o(){this.g=new Fn}function Ms(d){this.i=d.Sb||null,this.h=d.ab||!1}y(Ms,Vr),Ms.prototype.g=function(){return new tr(this.i,this.h)};function tr(d,_){Qe.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(tr,Qe),t=tr.prototype,t.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,Fr(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ei(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qc(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function qc(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Ei(this):Fr(this),this.readyState==3&&qc(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Ei(this))},t.Na=function(d){this.g&&(this.response=d,Ei(this))},t.ga=function(){this.g&&Ei(this)};function Ei(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Fr(d)}t.setRequestHeader=function(d,_){this.A.append(d,_)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function Fr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Hc(d){let _="";return fe(d,function(E,I){_+=I,_+=":",_+=E,_+=`\r
`}),_}function ma(d,_,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=Hc(E),typeof d=="string"?E!=null&&tn(E):nt(d,_,E))}function ut(d){Qe.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(ut,Qe);var Kc=/^https?$/i,Nf=["POST","PUT"];t=ut.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,_,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wn.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Q){Ti(this,Q);return}if(d=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var W in I)E.set(W,I[W]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Q of I.keys())E.set(Q,I.get(Q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),W=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(Nf,_,void 0)>=0)||I||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of E)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Q){Ti(this,Q)}};function Ti(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,Si(d),Us(d)}function Si(d){d.A||(d.A=!0,ht(d,"complete"),ht(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,ht(this,"complete"),ht(this,"abort"),Us(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Us(this,!0)),ut.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?js(this):this.Xa())},t.Xa=function(){js(this)};function js(d){if(d.h&&typeof o<"u"){if(d.v&&cs(d)==4)setTimeout(d.Ca.bind(d),0);else if(ht(d,"readystatechange"),cs(d)==4){d.h=!1;try{const Q=d.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var I;if(I=Q===0){let ue=String(d.D).match(Wc)[1]||null;!ue&&l.self&&l.self.location&&(ue=l.self.location.protocol.slice(0,-1)),I=!Kc.test(ue?ue.toLowerCase():"")}E=I}if(E)ht(d,"complete"),ht(d,"success");else{d.o=6;try{var W=cs(d)>2?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.ca()+"]",Si(d)}}finally{Us(d)}}}}function Us(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,_||ht(d,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cs(d){return d.g?d.g.readyState:0}t.ca=function(){try{return cs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),mi(_)}};function Gc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function eu(d){const _={};d=(d.g&&cs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(x(d[I]))continue;var E=uo(d[I]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=_[W]||[];_[W]=Q,Q.push(E)}le(_,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function ga(d){this.za=0,this.i=[],this.j=new lt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hs("baseRetryDelayMs",5e3,d),this.Za=hs("retryDelaySeedMs",1e4,d),this.Ta=hs("forwardChannelMaxRetries",2,d),this.va=hs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ha(d&&d.concurrentRequestLimit),this.Ba=new _o,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ga.prototype,t.ka=8,t.I=1,t.connect=function(d,_,E,I){pt(0),this.W=d,this.H=_||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.J=nu(this,null,this.W),Fs(this)};function ya(d){if(va(d),d.I==3){var _=d.V++,E=_r(d.J);if(nt(E,"SID",d.M),nt(E,"RID",_),nt(E,"TYPE","terminate"),ds(d,E),_=new vr(d,d.j,_),_.M=2,_.A=Ls(_r(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=_.A,E=!0),E||(_.g=Jc(_.j,null),_.g.ea(_.A)),_.F=Date.now(),co(_)}To(d)}function nr(d){d.g&&(Eo(d),d.g.cancel(),d.g=null)}function va(d){nr(d),d.v&&(l.clearTimeout(d.v),d.v=null),_a(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function Fs(d){if(!Wl(d.h)&&!d.m){d.m=!0;var _=d.Ea;H||b(),X||(H(),X=!0),k.add(_,d),d.D=0}}function Qc(d,_){return fo(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=De(p(d.Ea,d,_),Ea(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const W=new vr(this,this.j,d);let Q=this.o;if(this.U&&(Q?(Q=$(Q),de(Q,this.U)):Q=this.U),this.u!==null||this.R||(W.J=Q,Q=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=tu(this,W,_),E=_r(this.J),nt(E,"RID",d),nt(E,"CVER",22),this.G&&nt(E,"X-HTTP-Session-Id",this.G),ds(this,E),Q&&(this.R?_="headers="+tn(Hc(Q))+"&"+_:this.u&&ma(E,this.u,Q)),da(this.h,W),this.Ra&&nt(E,"TYPE","init"),this.S?(nt(E,"$req",_),nt(E,"SID","null"),W.U=!0,Ur(W,E,null)):Ur(W,E,_),this.I=2}}else this.I==3&&(d?wo(this,d):this.i.length==0||Wl(this.h)||wo(this))};function wo(d,_){var E;_?E=_.l:E=d.V++;const I=_r(d.J);nt(I,"SID",d.M),nt(I,"RID",E),nt(I,"AID",d.K),ds(d,I),d.u&&d.o&&ma(I,d.u,d.o),E=new vr(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),_&&(d.i=_.G.concat(d.i)),_=tu(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),da(d.h,E),Ur(E,I,_)}function ds(d,_){d.H&&fe(d.H,function(E,I){nt(_,I,E)}),d.l&&fe({},function(E,I){nt(_,I,E)})}function tu(d,_,E){E=Math.min(d.i.length,E);const I=d.l?p(d.l.Ka,d.l,d):null;e:{var W=d.i;let Fe=-1;for(;;){const Mt=["count="+E];Fe==-1?E>0?(Fe=W[0].g,Mt.push("ofs="+Fe)):Fe=0:Mt.push("ofs="+Fe);let ot=!0;for(let Bt=0;Bt<E;Bt++){var Q=W[Bt].g;const sr=W[Bt].map;if(Q-=Fe,Q<0)Fe=Math.max(0,W[Bt].g-100),ot=!1;else try{Q="req"+Q+"_"||"";try{var ue=sr instanceof Map?sr:Object.entries(sr);for(const[$s,ps]of ue){let ms=ps;c(ps)&&(ms=Nr(ps)),Mt.push(Q+$s+"="+encodeURIComponent(ms))}}catch($s){throw Mt.push(Q+"type="+encodeURIComponent("_badmap")),$s}}catch{I&&I(sr)}}if(ot){ue=Mt.join("&");break e}}ue=void 0}return d=d.i.splice(0,E),_.G=d,ue}function En(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;H||b(),X||(H(),X=!0),k.add(_,d),d.A=0}}function fs(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=De(p(d.Da,d),Ea(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Ii(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=De(p(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),nr(this),Ii(this))};function Eo(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function Ii(d){d.g=new vr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=_r(d.na);nt(_,"RID","rpc"),nt(_,"SID",d.M),nt(_,"AID",d.K),nt(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&nt(_,"TO",d.ia),nt(_,"TYPE","xmlhttp"),ds(d,_),d.u&&d.o&&ma(_,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=Ls(_r(_)),E.u=null,E.R=!0,Bl(E,d)}t.Va=function(){this.C!=null&&(this.C=null,nr(this),fs(this),pt(19))};function _a(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function wa(d,_){var E=null;if(d.g==_){_a(d),Eo(d),d.g=null;var I=2}else if(ql(d.h,_))E=_.G,po(d.h,_),I=1;else return;if(d.I!=0){if(_.o)if(I==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var W=d.D;I=gr(),ht(I,new _i(I,E)),Fs(d)}else En(d);else if(W=_.m,W==3||W==0&&_.X>0||!(I==1&&Qc(d,_)||I==2&&fs(d)))switch(E&&E.length>0&&(_=d.h,_.i=_.i.concat(E)),W){case 1:rr(d,5);break;case 4:rr(d,10);break;case 3:rr(d,6);break;default:rr(d,2)}}}function Ea(d,_){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*_}function rr(d,_){if(d.j.info("Error code "+_),_==2){var E=p(d.bb,d),I=d.Ua;const W=!I;I=new ss(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||mo(I,"https"),Ls(I),W?ls(I.toString(),E):us(I.toString(),E)}else pt(2);d.I=0,d.l&&d.l.pa(_),To(d),va(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function To(d){if(d.I=0,d.ja=[],d.l){const _=Zn(d.h);(_.length!=0||d.i.length!=0)&&(A(d.ja,_),A(d.ja,d.i),d.h.i.length=0,S(d.i),d.i.length=0),d.l.oa()}}function nu(d,_,E){var I=E instanceof ss?_r(E):new ss(E);if(I.g!="")_&&(I.g=_+"."+I.g),is(I,I.u);else{var W=l.location;I=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;const Q=new ss(null);I&&mo(Q,I),_&&(Q.g=_),W&&is(Q,W),E&&(Q.h=E),I=Q}return E=d.G,_=d.wa,E&&_&&nt(I,E,_),nt(I,"VER",d.ka),ds(d,I),I}function Jc(d,_,E){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new ut(new Ms({ab:E})):new ut(d.ma),_.Fa(d.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yc(){}t=Yc.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ta(){}Ta.prototype.g=function(d,_){return new cn(d,_)};function cn(d,_){Qe.call(this),this.g=new ga(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!x(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new bi(this)}y(cn,Qe),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){ya(this.g)},cn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=Nr(d),d=E);_.i.push(new Df(_.Ya++,d)),_.I==3&&Fs(_)},cn.prototype.N=function(){this.g.l=null,delete this.j,ya(this.g),delete this.g,cn.Z.N.call(this)};function Xc(d){gi.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}y(Xc,gi);function Zc(){yi.call(this),this.status=1}y(Zc,yi);function bi(d){this.g=d}y(bi,Yc),bi.prototype.ra=function(){ht(this.g,"a")},bi.prototype.qa=function(d){ht(this.g,new Xc(d))},bi.prototype.pa=function(d){ht(this.g,new Zc)},bi.prototype.oa=function(){ht(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,lb=function(){return new Ta},ab=function(){return gr()},ob=$n,lg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xn.NO_ERROR=0,Xn.TIMEOUT=8,Xn.HTTP_ERROR=6,gd=Xn,$t.COMPLETE="complete",ib=$t,Lr.EventType=rs,rs.OPEN="a",rs.CLOSE="b",rs.ERROR="c",rs.MESSAGE="d",Qe.prototype.listen=Qe.prototype.J,Nu=Lr,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,sb=ut}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});const J0="@firebase/firestore",Y0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new lf("@firebase/firestore");function Za(){return ea.logLevel}function me(t,...e){if(ea.logLevel<=He.DEBUG){const n=e.map(by);ea.debug(`Firestore (${Nl}): ${t}`,...n)}}function ai(t,...e){if(ea.logLevel<=He.ERROR){const n=e.map(by);ea.error(`Firestore (${Nl}): ${t}`,...n)}}function wl(t,...e){if(ea.logLevel<=He.WARN){const n=e.map(by);ea.warn(`Firestore (${Nl}): ${t}`,...n)}}function by(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ub(t,r,n)}function ub(t,e,n){let r=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ai(r),new Error(r)}function st(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ub(e,s,r)}function $e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends ns{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Rn.UNAUTHENTICATED)))}shutdown(){}}class zN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class WN{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let o=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},c=h=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yi)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new cb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class qN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new qN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class X0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){st(this.o===void 0,3512);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new X0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(st(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new X0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=GN(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function ug(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return mm(s)===mm(o)?Ke(s,o):mm(s)?1:-1}return Ke(t.length,e.length)}const QN=55296,JN=57343;function mm(t){const e=t.charCodeAt(0);return e>=QN&&e<=JN}function El(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="__name__";class Es{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Es.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Es?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Es.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ke(e.length,n.length)}static compareSegments(e,n){const r=Es.isNumericId(e),s=Es.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Es.extractNumericId(e).compare(Es.extractNumericId(n)):ug(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ji.fromString(e.substring(4,e.length-2))}}class At extends Es{construct(e,n,r){return new At(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new At(n)}static emptyPath(){return new At([])}}const YN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Es{construct(e,n,r){return new yn(e,n,r)}static isValidIdentifier(e){return YN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Z0}static keyField(){return new yn([Z0])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new be(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new be(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new be(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new be(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(At.fromString(e))}static fromName(e){return new ke(At.fromString(e).popFirst(5))}static empty(){return new ke(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new At(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t,e,n){if(!n)throw new be(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZN(t,e,n,r){if(e===!0&&r===!0)throw new be(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eE(t){if(!ke.isDocumentKey(t))throw new be(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ry(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve(12329,{type:typeof t})}function nc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ry(t);throw new be(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,e){const n={typeString:t};return e&&(n.value=e),n}function kc(t,e){if(!hb(t))throw new be(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(s&&typeof l!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new be(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=-62135596800,nE=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*nE);return new vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tE)throw new be(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nE}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kc(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:Kt("string",vt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new vt(0,0))}static max(){return new Ue(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=-1;function eV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new Zi(s,ke.empty(),e)}function tV(t){return new Zi(t.readTime,t.key,rc)}class Zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zi(Ue.min(),ke.empty(),rc)}static max(){return new Zi(Ue.max(),ke.empty(),rc)}}function nV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==rV)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):te.reject(n)}static resolve(e){return new te(((n,r)=>{n(e)}))}static reject(e){return new te(((n,r)=>{r(e)}))}static waitFor(e){return new te(((n,r)=>{let s=0,o=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++o,l&&o===s&&n()}),(h=>r(h)))})),l=!0,o===s&&n()}))}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next((s=>s?te.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new te(((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;n(e[p]).next((m=>{l[p]=m,++c,c===o&&r(l)}),(m=>s(m)))}}))}static doWhile(e,n){return new te(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function iV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ll(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=-1;function ff(t){return t==null}function Vd(t){return t===0&&1/t==-1/0}function oV(t){return typeof t=="number"&&Number.isInteger(t)&&!Vd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="";function aV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rE(e)),e=lV(t.get(n),e);return rE(e)}function lV(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case db:n+="";break;default:n+=o}}return n}function rE(t){return t+db+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jh(this.root,e,this.comparator,!0)}}class Jh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??gn.RED,this.left=s??gn.EMPTY,this.right=o??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new gn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iE(this.data.getIterator())}getIteratorFrom(e){return new iE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class iE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Zr([])}unionWith(e){let n=new Zt(yn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pb("Invalid base64 string: "+o):o}})(e);return new vn(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const uV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(t){if(st(!!t,39018),typeof t=="string"){let e=0;const n=uV.exec(t);if(st(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function to(t){return typeof t=="string"?vn.fromBase64String(t):vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="server_timestamp",gb="__type__",yb="__previous_value__",vb="__local_write_time__";function ky(t){return(t?.mapValue?.fields||{})[gb]?.stringValue===mb}function pf(t){const e=t.mapValue.fields[yb];return ky(e)?pf(e):e}function sc(t){const e=eo(t.mapValue.fields[vb].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n,r,s,o,l,c,h,p,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=m}}const Ld="(default)";class ic{constructor(e,n){this.projectId=e,this.database=n||Ld}static empty(){return new ic("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(e){return e instanceof ic&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="__type__",hV="__max__",Yh={mapValue:{}},wb="__vector__",Md="value";function no(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ky(t)?4:fV(t)?9007199254740991:dV(t)?10:11:Ve(28295,{value:t})}function Cs(t,e){if(t===e)return!0;const n=no(t);if(n!==no(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sc(t).isEqual(sc(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=eo(s.timestampValue),c=eo(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return to(s.bytesValue).isEqual(to(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return Ut(s.geoPointValue.latitude)===Ut(o.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Ut(s.integerValue)===Ut(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Ut(s.doubleValue),c=Ut(o.doubleValue);return l===c?Vd(l)===Vd(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return El(t.arrayValue.values||[],e.arrayValue.values||[],Cs);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(sE(l)!==sE(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Cs(l[h],c[h])))return!1;return!0})(t,e);default:return Ve(52216,{left:t})}}function oc(t,e){return(t.values||[]).find((n=>Cs(n,e)))!==void 0}function Tl(t,e){if(t===e)return 0;const n=no(t),r=no(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=Ut(o.integerValue||o.doubleValue),h=Ut(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(t,e);case 3:return oE(t.timestampValue,e.timestampValue);case 4:return oE(sc(t),sc(e));case 5:return ug(t.stringValue,e.stringValue);case 6:return(function(o,l){const c=to(o),h=to(l);return c.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const m=Ke(c[p],h[p]);if(m!==0)return m}return Ke(c.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Ke(Ut(o.latitude),Ut(l.latitude));return c!==0?c:Ke(Ut(o.longitude),Ut(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return aE(t.arrayValue,e.arrayValue);case 10:return(function(o,l){const c=o.fields||{},h=l.fields||{},p=c[Md]?.arrayValue,m=h[Md]?.arrayValue,y=Ke(p?.values?.length||0,m?.values?.length||0);return y!==0?y:aE(p,m)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Yh.mapValue&&l===Yh.mapValue)return 0;if(o===Yh.mapValue)return 1;if(l===Yh.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=l.fields||{},m=Object.keys(p);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const w=ug(h[y],m[y]);if(w!==0)return w;const S=Tl(c[h[y]],p[m[y]]);if(S!==0)return S}return Ke(h.length,m.length)})(t.mapValue,e.mapValue);default:throw Ve(23264,{he:n})}}function oE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=eo(t),r=eo(e),s=Ke(n.seconds,r.seconds);return s!==0?s:Ke(n.nanos,r.nanos)}function aE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Tl(n[s],r[s]);if(o)return o}return Ke(n.length,r.length)}function Sl(t){return cg(t)}function cg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=eo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return to(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ke.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=cg(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${cg(n.fields[l])}`;return s+"}"})(t.mapValue):Ve(61005,{value:t})}function yd(t){switch(no(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pf(t);return e?16+yd(e):16;case 5:return 2*t.stringValue.length;case 6:return to(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+yd(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return oa(r.fields,((o,l)=>{s+=o.length+yd(l)})),s})(t.mapValue);default:throw Ve(13486,{value:t})}}function hg(t){return!!t&&"integerValue"in t}function Cy(t){return!!t&&"arrayValue"in t}function lE(t){return!!t&&"nullValue"in t}function uE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vd(t){return!!t&&"mapValue"in t}function dV(t){return(t?.mapValue?.fields||{})[_b]?.stringValue===wb}function Bu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return oa(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Bu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bu(t.arrayValue.values[n]);return e}return{...t}}function fV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(n)}setAll(e){let n=yn.emptyPath(),r={},s=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=c.popLast()}l?r[c.lastSegment()]=Bu(l):s.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());vd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];vd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){oa(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Rr(Bu(this.value))}}function Eb(t){const e=[];return oa(t.fields,((n,r)=>{const s=new yn([n]);if(vd(r)){const o=Eb(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r,s,o,l,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Pn(e,0,Ue.min(),Ue.min(),Ue.min(),Rr.empty(),0)}static newFoundDocument(e,n,r,s){return new Pn(e,1,n,Ue.min(),r,s,0)}static newNoDocument(e,n){return new Pn(e,2,n,Ue.min(),Ue.min(),Rr.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Ue.min(),Ue.min(),Rr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){this.position=e,this.inclusive=n}}function cE(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=ke.comparator(ke.fromName(l.referenceValue),n.key):r=Tl(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function hE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n="asc"){this.field=e,this.dir=n}}function pV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{}class Xt extends Tb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gV(e,n,r):n==="array-contains"?new _V(e,r):n==="in"?new wV(e,r):n==="not-in"?new EV(e,r):n==="array-contains-any"?new TV(e,r):new Xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yV(e,r):new vV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tl(n,this.value)):n!==null&&no(this.value)===no(n)&&this.matchesComparison(Tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xs extends Tb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xs(e,n)}matches(e){return Sb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sb(t){return t.op==="and"}function Ib(t){return mV(t)&&Sb(t)}function mV(t){for(const e of t.filters)if(e instanceof xs)return!1;return!0}function dg(t){if(t instanceof Xt)return t.field.canonicalString()+t.op.toString()+Sl(t.value);if(Ib(t))return t.filters.map((e=>dg(e))).join(",");{const e=t.filters.map((n=>dg(n))).join(",");return`${t.op}(${e})`}}function bb(t,e){return t instanceof Xt?(function(r,s){return s instanceof Xt&&r.op===s.op&&r.field.isEqual(s.field)&&Cs(r.value,s.value)})(t,e):t instanceof xs?(function(r,s){return s instanceof xs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,c)=>o&&bb(l,s.filters[c])),!0):!1})(t,e):void Ve(19439)}function Ab(t){return t instanceof Xt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Sl(n.value)}`})(t):t instanceof xs?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ab).join(" ,")+"}"})(t):"Filter"}class gV extends Xt{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class yV extends Xt{constructor(e,n){super(e,"in",n),this.keys=Rb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class vV extends Xt{constructor(e,n){super(e,"not-in",n),this.keys=Rb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Rb(t,e){return(e.arrayValue?.values||[]).map((n=>ke.fromName(n.referenceValue)))}class _V extends Xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cy(n)&&oc(n.arrayValue,this.value)}}class wV extends Xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oc(this.value.arrayValue,n)}}class EV extends Xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!oc(this.value.arrayValue,n)}}class TV extends Xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>oc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function dE(t,e=null,n=[],r=[],s=null,o=null,l=null){return new SV(t,e,n,r,s,o,l)}function xy(t){const e=$e(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>dg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),ff(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Sl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Sl(r))).join(",")),e.Te=n}return e.Te}function Dy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hE(t.startAt,e.startAt)&&hE(t.endAt,e.endAt)}function fg(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n=null,r=[],s=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IV(t,e,n,r,s,o,l,c){return new mf(t,e,n,r,s,o,l,c)}function Oy(t){return new mf(t)}function fE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bV(t){return t.collectionGroup!==null}function zu(t){const e=$e(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Zt(yn.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((p=>{p.isInequality()&&(c=c.add(p.field))}))})),c})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ud(o,r))})),n.has(yn.keyField().canonicalString())||e.Ie.push(new Ud(yn.keyField(),r))}return e.Ie}function Ss(t){const e=$e(t);return e.Ee||(e.Ee=AV(e,zu(t))),e.Ee}function AV(t,e){if(t.limitType==="F")return dE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Ud(s.field,o)}));const n=t.endAt?new jd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new jd(t.startAt.position,t.startAt.inclusive):null;return dE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pg(t,e,n){return new mf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gf(t,e){return Dy(Ss(t),Ss(e))&&t.limitType===e.limitType}function Pb(t){return`${xy(Ss(t))}|lt:${t.limitType}`}function el(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Ab(s))).join(", ")}]`),ff(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Sl(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Sl(s))).join(",")),`Target(${r})`})(Ss(t))}; limitType=${t.limitType})`}function yf(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of zu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,c,h){const p=cE(l,c,h);return l.inclusive?p<=0:p<0})(r.startAt,zu(r),s)||r.endAt&&!(function(l,c,h){const p=cE(l,c,h);return l.inclusive?p>=0:p>0})(r.endAt,zu(r),s))})(t,e)}function RV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kb(t){return(e,n)=>{let r=!1;for(const s of zu(t)){const o=PV(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function PV(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):(function(o,l,c){const h=l.data.field(o),p=c.data.field(o);return h!==null&&p!==null?Tl(h,p):Ve(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return fb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=new Pt(ke.comparator);function li(){return kV}const Cb=new Pt(ke.comparator);function Vu(...t){let e=Cb;for(const n of t)e=e.insert(n.key,n);return e}function xb(t){let e=Cb;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Wo(){return Wu()}function Db(){return Wu()}function Wu(){return new aa((t=>t.toString()),((t,e)=>t.isEqual(e)))}const CV=new Pt(ke.comparator),xV=new Zt(ke.comparator);function Ge(...t){let e=xV;for(const n of t)e=e.add(n);return e}const DV=new Zt(Ke);function OV(){return DV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vd(e)?"-0":e}}function Ob(t){return{integerValue:""+t}}function NV(t,e){return oV(e)?Ob(e):Ny(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this._=void 0}}function VV(t,e,n){return t instanceof Fd?(function(s,o){const l={fields:{[gb]:{stringValue:mb},[vb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&ky(o)&&(o=pf(o)),o&&(l.fields[yb]=o),{mapValue:l}})(n,e):t instanceof ac?Vb(t,e):t instanceof lc?Lb(t,e):(function(s,o){const l=Nb(s,o),c=pE(l)+pE(s.Ae);return hg(l)&&hg(s.Ae)?Ob(c):Ny(s.serializer,c)})(t,e)}function LV(t,e,n){return t instanceof ac?Vb(t,e):t instanceof lc?Lb(t,e):n}function Nb(t,e){return t instanceof $d?(function(r){return hg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Fd extends vf{}class ac extends vf{constructor(e){super(),this.elements=e}}function Vb(t,e){const n=Mb(e);for(const r of t.elements)n.some((s=>Cs(s,r)))||n.push(r);return{arrayValue:{values:n}}}class lc extends vf{constructor(e){super(),this.elements=e}}function Lb(t,e){let n=Mb(e);for(const r of t.elements)n=n.filter((s=>!Cs(s,r)));return{arrayValue:{values:n}}}class $d extends vf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pE(t){return Ut(t.integerValue||t.doubleValue)}function Mb(t){return Cy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function MV(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof ac&&s instanceof ac||r instanceof lc&&s instanceof lc?El(r.elements,s.elements,Cs):r instanceof $d&&s instanceof $d?Cs(r.Ae,s.Ae):r instanceof Fd&&s instanceof Fd})(t.transform,e.transform)}class jV{constructor(e,n){this.version=e,this.transformResults=n}}class ri{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _f{}function jb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fb(t.key,ri.none()):new Cc(t.key,t.data,ri.none());{const n=t.data,r=Rr.empty();let s=new Zt(yn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new la(t.key,r,new Zr(s.toArray()),ri.none())}}function UV(t,e,n){t instanceof Cc?(function(s,o,l){const c=s.value.clone(),h=gE(s.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof la?(function(s,o,l){if(!_d(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=gE(s.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(Ub(s)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(t,e,n):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function qu(t,e,n,r){return t instanceof Cc?(function(o,l,c,h){if(!_d(o.precondition,l))return c;const p=o.value.clone(),m=yE(o.fieldTransforms,h,l);return p.setAll(m),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof la?(function(o,l,c,h){if(!_d(o.precondition,l))return c;const p=yE(o.fieldTransforms,h,l),m=l.data;return m.setAll(Ub(o)),m.setAll(p),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(t,e,n,r):(function(o,l,c){return _d(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function FV(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=Nb(r.transform,s||null);o!=null&&(n===null&&(n=Rr.empty()),n.set(r.field,o))}return n||null}function mE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&El(r,s,((o,l)=>MV(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cc extends _f{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class la extends _f{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Ub(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function gE(t,e,n){const r=new Map;st(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,LV(l,c,n[s]))}return r}function yE(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,VV(o,l,e))}return r}class Fb extends _f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $V extends _f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&UV(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Db();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(s.key)?null:c;const h=jb(l,c);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((n,r)=>mE(n,r)))&&El(this.baseMutations,e.baseMutations,((n,r)=>mE(n,r)))}}class Vy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){st(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return CV})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new Vy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,Xe;function qV(t){switch(t){case ie.OK:return Ve(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ve(15467,{code:t})}}function $b(t){if(t===void 0)return ai("GRPC error has no .code"),ie.UNKNOWN;switch(t){case Wt.OK:return ie.OK;case Wt.CANCELLED:return ie.CANCELLED;case Wt.UNKNOWN:return ie.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return ie.INTERNAL;case Wt.UNAVAILABLE:return ie.UNAVAILABLE;case Wt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Wt.NOT_FOUND:return ie.NOT_FOUND;case Wt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Wt.ABORTED:return ie.ABORTED;case Wt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Wt.DATA_LOSS:return ie.DATA_LOSS;default:return Ve(39323,{code:t})}}(Xe=Wt||(Wt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=new Ji([4294967295,4294967295],0);function vE(t){const e=HV().encode(t),n=new rb;return n.update(e),new Uint8Array(n.digest())}function _E(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ji([n,r],0),new Ji([s,o],0)]}class Ly{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lu(`Invalid padding: ${n}`);if(r<0)throw new Lu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ji.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ji.fromNumber(r)));return s.compare(KV)===1&&(s=new Ji([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vE(e),[r,s]=_E(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Ly(o,s,n);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const n=vE(e),[r,s]=_E(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wf(Ue.min(),s,new Pt(Ke),li(),Ge())}}class xc{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xc(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Bb{constructor(e,n){this.targetId=e,this.Ce=n}}class zb{constructor(e,n,r=vn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class wE{constructor(){this.ve=0,this.Fe=EE(),this.Me=vn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),r=Ge();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ve(38017,{changeType:o})}})),new xc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=EE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GV{constructor(e){this.Ge=e,this.ze=new Map,this.je=li(),this.Je=Xh(),this.He=Xh(),this.Ye=new Pt(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(fg(o))if(r===0){const l=new ke(o.path);this.et(n,l,Pn.newNoDocument(l,Ue.min()))}else st(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(n);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,c;try{l=to(r).toUint8Array()}catch(h){if(h instanceof pb)return wl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Ly(l,s,o)}catch(h){return wl(h instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&fg(c.target)){const h=new ke(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Pn.newNoDocument(h,e))}o.Be&&(n.set(l,o.ke()),o.qe())}}));let r=Ge();this.He.forEach(((o,l)=>{let c=!0;l.forEachWhile((h=>{const p=this.ot(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new wf(e,n,this.Ye,this.je,r);return this.je=li(),this.Je=Xh(),this.He=Xh(),this.Ye=new Pt(Ke),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new wE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Zt(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Zt(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xh(){return new Pt(ke.comparator)}function EE(){return new Pt(ke.comparator)}const QV={asc:"ASCENDING",desc:"DESCENDING"},JV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YV={and:"AND",or:"OR"};class XV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mg(t,e){return t.useProto3Json||ff(e)?e:{value:e}}function Bd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZV(t,e){return Bd(t,e.toTimestamp())}function Is(t){return st(!!t,49232),Ue.fromTimestamp((function(n){const r=eo(n);return new vt(r.seconds,r.nanos)})(t))}function My(t,e){return gg(t,e).canonicalString()}function gg(t,e){const n=(function(s){return new At(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function qb(t){const e=At.fromString(t);return st(Jb(e),10190,{key:e.toString()}),e}function yg(t,e){return My(t.databaseId,e.path)}function gm(t,e){const n=qb(e);if(n.get(1)!==t.databaseId.projectId)throw new be(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(Kb(n))}function Hb(t,e){return My(t.databaseId,e)}function eL(t){const e=qb(t);return e.length===4?At.emptyPath():Kb(e)}function vg(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kb(t){return st(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function TE(t,e,n){return{name:yg(t,e),fields:n.value.mapValue.fields}}function tL(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ve(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,m){return p.useProto3Json?(st(m===void 0||typeof m=="string",58123),vn.fromBase64String(m||"")):(st(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),vn.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(p){const m=p.code===void 0?ie.UNKNOWN:$b(p.code);return new be(m,p.message||"")})(l);n=new zb(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=gm(t,r.document.name),o=Is(r.document.updateTime),l=r.document.createTime?Is(r.document.createTime):Ue.min(),c=new Rr({mapValue:{fields:r.document.fields}}),h=Pn.newFoundDocument(s,o,l,c),p=r.targetIds||[],m=r.removedTargetIds||[];n=new wd(p,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=gm(t,r.document),o=r.readTime?Is(r.readTime):Ue.min(),l=Pn.newNoDocument(s,o),c=r.removedTargetIds||[];n=new wd([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=gm(t,r.document),o=r.removedTargetIds||[];n=new wd([],o,s,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new WV(s,o),c=r.targetId;n=new Bb(c,l)}}return n}function nL(t,e){let n;if(e instanceof Cc)n={update:TE(t,e.key,e.value)};else if(e instanceof Fb)n={delete:yg(t,e.key)};else if(e instanceof la)n={update:TE(t,e.key,e.data),updateMask:hL(e.fieldMask)};else{if(!(e instanceof $V))return Ve(16599,{Vt:e.type});n={verify:yg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const c=l.transform;if(c instanceof Fd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ac)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof $d)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ve(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:ZV(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ve(27497)})(t,e.precondition)),n}function rL(t,e){return t&&t.length>0?(st(e!==void 0,14353),t.map((n=>(function(s,o){let l=s.updateTime?Is(s.updateTime):Is(o);return l.isEqual(Ue.min())&&(l=Is(o)),new jV(l,s.transformResults||[])})(n,e)))):[]}function sL(t,e){return{documents:[Hb(t,e.path)]}}function iL(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hb(t,s);const o=(function(p){if(p.length!==0)return Qb(xs.create(p,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((m=>(function(w){return{field:tl(w.field),direction:lL(w.dir)}})(m)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=mg(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:s}}function oL(t){let e=eL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){st(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=(function(y){const w=Gb(y);return w instanceof xs&&Ib(w)?w.getFilters():[w]})(n.where));let l=[];n.orderBy&&(l=(function(y){return y.map((w=>(function(A){return new Ud(nl(A.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(w)))})(n.orderBy));let c=null;n.limit&&(c=(function(y){let w;return w=typeof y=="object"?y.value:y,ff(w)?null:w})(n.limit));let h=null;n.startAt&&(h=(function(y){const w=!!y.before,S=y.values||[];return new jd(S,w)})(n.startAt));let p=null;return n.endAt&&(p=(function(y){const w=!y.before,S=y.values||[];return new jd(S,w)})(n.endAt)),IV(e,s,l,o,c,"F",h,p)}function aL(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Gb(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nl(n.unaryFilter.field);return Xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=nl(n.unaryFilter.field);return Xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=nl(n.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=nl(n.unaryFilter.field);return Xt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Xt.create(nl(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return xs.create(n.compositeFilter.filters.map((r=>Gb(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(n.compositeFilter.op))})(t):Ve(30097,{filter:t})}function lL(t){return QV[t]}function uL(t){return JV[t]}function cL(t){return YV[t]}function tl(t){return{fieldPath:t.canonicalString()}}function nl(t){return yn.fromServerFormat(t.fieldPath)}function Qb(t){return t instanceof Xt?(function(n){if(n.op==="=="){if(uE(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NAN"}};if(lE(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uE(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NAN"}};if(lE(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tl(n.field),op:uL(n.op),value:n.value}}})(t):t instanceof xs?(function(n){const r=n.getFilters().map((s=>Qb(s)));return r.length===1?r[0]:{compositeFilter:{op:cL(n.op),filters:r}}})(t):Ve(54877,{filter:t})}function hL(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Jb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n,r,s,o=Ue.min(),l=Ue.min(),c=vn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.yt=e}}function fL(t){const e=oL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.Cn=new mL}addToCollectionParentIndex(e,n){return this.Cn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(Zi.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class mL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Zt(At.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Zt(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yb=41943040;class Qn{static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(Yb,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Il(0)}static cr(){return new Il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="LruGarbageCollector",gL=1048576;function bE([t,e],[n,r]){const s=Ke(t,n);return s===0?Ke(e,r):s}class yL{constructor(e){this.Ir=e,this.buffer=new Zt(bE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(IE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ll(n)?me(IE,"Ignoring IndexedDB error during garbage collection: ",n):await Vl(n)}await this.Vr(3e5)}))}}class _L{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return te.resolve(df.ce);const r=new yL(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(SE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,l,c,h,p;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,c=Date.now(),this.removeTargets(e,r,n)))).next((y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(p=Date.now(),Za()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(p-h)+`ms
Total Duration: ${p-m}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function wL(t,e){return new _L(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(){this.changes=new aa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&qu(r.mutation,s,Zr.empty(),vt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ge()){const s=Wo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let l=Vu();return o.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=Wo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ge())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,r,s){let o=li();const l=Wu(),c=(function(){return Wu()})();return n.forEach(((h,p)=>{const m=r.get(p.key);s.has(p.key)&&(m===void 0||m.mutation instanceof la)?o=o.insert(p.key,p):m!==void 0?(l.set(p.key,m.mutation.getFieldMask()),qu(m.mutation,p,m.mutation.getFieldMask(),vt.now())):l.set(p.key,Zr.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((p,m)=>l.set(p,m))),n.forEach(((p,m)=>c.set(p,new TL(m,l.get(p)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Wu();let s=new Pt(((l,c)=>l-c)),o=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((h=>{const p=n.get(h);if(p===null)return;let m=r.get(h)||Zr.empty();m=c.applyToLocalView(p,m),r.set(h,m);const y=(s.get(c.batchId)||Ge()).add(h);s=s.insert(c.batchId,y)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,m=h.value,y=Db();m.forEach((w=>{if(!o.has(w)){const S=jb(n.get(w),r.get(w));S!==null&&y.set(w,S),o=o.add(w)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return te.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return ke.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):te.resolve(Wo());let c=rc,h=o;return l.next((p=>te.forEach(p,((m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?te.resolve():this.remoteDocumentCache.getEntry(e,m).next((w=>{h=h.insert(m,w)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,h,p,Ge()))).next((m=>({batchId:c,changes:xb(m)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next((r=>{let s=Vu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=Vu();return this.indexManager.getCollectionParents(e,o).next((c=>te.forEach(c,(h=>{const p=(function(y,w){return new mf(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((m=>{m.forEach(((y,w)=>{l=l.insert(y,w)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((l=>{o.forEach(((h,p)=>{const m=p.getKey();l.get(m)===null&&(l=l.insert(m,Pn.newInvalidDocument(m)))}));let c=Vu();return l.forEach(((h,p)=>{const m=o.get(h);m!==void 0&&qu(m.mutation,p,Zr.empty(),vt.now()),yf(n,p)&&(c=c.insert(h,p))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return te.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Is(s.createTime)}})(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:fL(s.bundledQuery),readTime:Is(s.readTime)}})(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.overlays=new Pt(ke.comparator),this.qr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wo();return te.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.St(e,n,o)})),te.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const s=Wo(),o=n.length+1,l=new ke(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return te.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Pt(((p,m)=>p-m));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let m=o.get(p.largestBatchId);m===null&&(m=Wo(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const c=Wo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((p,m)=>c.set(p,m))),!(c.size()>=s)););return te.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new zV(n,r));let o=this.qr.get(n);o===void 0&&(o=Ge(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.Qr=new Zt(on.$r),this.Ur=new Zt(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new on(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new on(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ke(new At([])),r=new on(n,e),s=new on(n,e+1),o=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ke(new At([])),r=new on(n,e),s=new on(n,e+1);let o=Ge();return this.Ur.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new on(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ke.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(on.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new BV(o,n,r,s);this.mutationQueue.push(l);for(const c of s)this.Zr=this.Zr.add(new on(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,n){return te.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Py:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new on(n,0),s=new on(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(l=>{const c=this.Xr(l.Yr);o.push(c)})),te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zt(Ke);return n.forEach((s=>{const o=new on(s,0),l=new on(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(c=>{r=r.add(c.Yr)}))})),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;ke.isDocumentKey(o)||(o=o.child(""));const l=new on(new ke(o),0);let c=new Zt(Ke);return this.Zr.forEachWhile((h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(c=c.add(h.Yr)),!0)}),l),te.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){st(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(n.mutations,(s=>{const o=new on(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new on(n,0),s=this.Zr.firstAfterOrEqual(r);return te.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.ri=e,this.docs=(function(){return new Pt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let r=li();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Pn.newInvalidDocument(s))})),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=li();const l=n.path,c=new ke(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:m}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||nV(tV(m),r)<=0||(s.has(m.key)||yf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return te.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ve(9500)}ii(e,n){return te.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new kL(this)}getSize(e){return te.resolve(this.size)}}class kL extends EL{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),te.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.persistence=e,this.si=new aa((n=>xy(n)),Dy),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new jy,this.targetCount=0,this.ai=Il.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),te.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Il(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.Pr(n),te.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),te.waitFor(o).next((()=>s))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),te.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n){this.ui={},this.overlays={},this.ci=new df(0),this.li=!1,this.li=!0,this.hi=new AL,this.referenceDelegate=e(this),this.Pi=new CL(this),this.indexManager=new pL,this.remoteDocumentCache=(function(s){return new PL(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new dL(n),this.Ii=new IL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new RL(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const s=new xL(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,n){return te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class xL extends sV{constructor(e){super(),this.currentSequenceNumber=e}}class Uy{constructor(e){this.persistence=e,this.Ri=new jy,this.Vi=null}static mi(e){return new Uy(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(r=>{const s=ke.fromPath(r);return this.gi(e,s).next((o=>{o||n.removeEntry(s,Ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return te.or([()=>te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zd{constructor(e,n){this.persistence=e,this.pi=new aa((r=>aV(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=wL(this,n)}static mi(e,n){return new zd(e,n)}Ei(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return te.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?te.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,n).next((c=>{c||(r++,o.removeEntry(l,Ue.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yd(e.data.value)),n}br(e,n,r){return te.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return te.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ge(),s=Ge();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Fy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tx()?8:iV(Cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,n,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new DL;return this.Ss(e,n,l).next((c=>{if(o.result=c,this.Vs)return this.bs(e,n,l,c.size)}))})).next((()=>o.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Za()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",el(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Za()<=He.DEBUG&&me("QueryEngine","Query:",el(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Za()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",el(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ss(n))):te.resolve())}ys(e,n){if(fE(n))return te.resolve(null);let r=Ss(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=pg(n,null,"F"),r=Ss(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Ge(...o);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((h=>{const p=this.Ds(n,c);return this.Cs(n,p,l,h.readTime)?this.ys(e,pg(n,null,"F")):this.vs(e,p,n,h)}))))})))))}ws(e,n,r,s){return fE(n)||s.isEqual(Ue.min())?te.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(n,o);return this.Cs(n,l,r,s)?te.resolve(null):(Za()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),el(n)),this.vs(e,l,n,eV(s,rc)).next((c=>c)))}))}Ds(e,n){let r=new Zt(kb(e));return n.forEach(((s,o)=>{yf(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return Za()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",el(n)),this.ps.getDocumentsMatchingQuery(e,n,Zi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="LocalStore",NL=3e8;class VL{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Pt(Ke),this.xs=new aa((o=>xy(o)),Dy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function LL(t,e,n,r){return new VL(t,e,n,r)}async function Zb(t,e){const n=$e(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],c=[];let h=Ge();for(const p of s){l.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}for(const p of o){c.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(r,h).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:c})))}))}))}function ML(t,e){const n=$e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,h,p,m){const y=p.batch,w=y.keys();let S=te.resolve();return w.forEach((A=>{S=S.next((()=>m.getEntry(h,A))).next((C=>{const R=p.docVersions.get(A);st(R!==null,48541),C.version.compareTo(R)<0&&(y.applyToRemoteDocument(C,p),C.isValidDocument()&&(C.setReadTime(p.commitVersion),m.addEntry(C)))}))})),S.next((()=>c.mutationQueue.removeMutationBatch(h,y)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let h=Ge();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function eA(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function jL(t,e){const n=$e(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((m,y)=>{const w=s.get(y);if(!w)return;c.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,y).next((()=>n.Pi.addMatchingKeys(o,m.addedDocuments,y))));let S=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(vn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):m.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(m.resumeToken,r)),s=s.insert(y,S),(function(C,R,O){return C.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=NL?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(w,S,m)&&c.push(n.Pi.updateTargetData(o,S))}));let h=li(),p=Ge();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))})),c.push(UL(o,l,e.documentUpdates).next((m=>{h=m.ks,p=m.qs}))),!r.isEqual(Ue.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next((y=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(m)}return te.waitFor(c).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,h,p))).next((()=>h))})).then((o=>(n.Ms=s,o)))}function UL(t,e,n){let r=Ge(),s=Ge();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let l=li();return n.forEach(((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(Ue.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):me($y,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)})),{ks:l,qs:s}}))}function FL(t,e){const n=$e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Py),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $L(t,e){const n=$e(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((o=>o?(s=o,te.resolve(s)):n.Pi.allocateTargetId(r).next((l=>(s=new Ki(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function _g(t,e,n){const r=$e(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Ll(l))throw l;me($y,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function AE(t,e,n){const r=$e(t);let s=Ue.min(),o=Ge();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,p,m){const y=$e(h),w=y.xs.get(m);return w!==void 0?te.resolve(y.Ms.get(w)):y.Pi.getTargetData(p,m)})(r,l,Ss(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next((h=>{o=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,n?s:Ue.min(),n?o:Ge()))).next((c=>(BL(r,RV(e),c),{documents:c,Qs:o})))))}function BL(t,e,n){let r=t.Os.get(e)||Ue.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}class RE{constructor(){this.activeTargetIds=OV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zL{constructor(){this.Mo=new RE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new RE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="ConnectivityMonitor";class kE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(PE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(PE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh=null;function wg(){return Zh===null?Zh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zh++,"0x"+Zh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="RestConnection",qL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ld?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const l=wg(),c=this.zo(e,n.toUriEncodedString());me(ym,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,o);const{host:p}=new URL(c),m=xl(p);return this.Jo(e,c,h,r,m).then((y=>(me(ym,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw wl(ym,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y}))}Ho(e,n,r,s,o,l){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,n){const r=qL[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class GL extends HL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=wg();return new Promise(((c,h)=>{const p=new sb;p.setWithCredentials(!0),p.listenOnce(ib.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case gd.NO_ERROR:const y=p.getResponseJson();me(An,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case gd.TIMEOUT:me(An,`RPC '${e}' ${l} timed out`),h(new be(ie.DEADLINE_EXCEEDED,"Request time out"));break;case gd.HTTP_ERROR:const w=p.getStatus();if(me(An,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const A=S?.error;if(A&&A.status&&A.message){const C=(function(O){const U=O.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(U)>=0?U:ie.UNKNOWN})(A.status);h(new be(C,A.message))}else h(new be(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new be(ie.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{me(An,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(s);me(An,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",m,r,15)}))}T_(e,n,r){const s=wg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=lb(),c=ab(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const m=o.join("");me(An,`Creating RPC '${e}' stream ${s}: ${m}`,h);const y=l.createWebChannel(m,h);this.I_(y);let w=!1,S=!1;const A=new KL({Yo:R=>{S?me(An,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(w||(me(An,`Opening RPC '${e}' stream ${s} transport.`),y.open(),w=!0),me(An,`RPC '${e}' stream ${s} sending:`,R),y.send(R))},Zo:()=>y.close()}),C=(R,O,U)=>{R.listen(O,(N=>{try{U(N)}catch(K){setTimeout((()=>{throw K}),0)}}))};return C(y,Nu.EventType.OPEN,(()=>{S||(me(An,`RPC '${e}' stream ${s} transport opened.`),A.o_())})),C(y,Nu.EventType.CLOSE,(()=>{S||(S=!0,me(An,`RPC '${e}' stream ${s} transport closed`),A.a_(),this.E_(y))})),C(y,Nu.EventType.ERROR,(R=>{S||(S=!0,wl(An,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),A.a_(new be(ie.UNAVAILABLE,"The operation could not be completed")))})),C(y,Nu.EventType.MESSAGE,(R=>{if(!S){const O=R.data[0];st(!!O,16349);const U=O,N=U?.error||U[0]?.error;if(N){me(An,`RPC '${e}' stream ${s} received error:`,N);const K=N.status;let H=(function(b){const P=Wt[b];if(P!==void 0)return $b(P)})(K),X=N.message;H===void 0&&(H=ie.INTERNAL,X="Unknown error status: "+K+" with message "+N.message),S=!0,A.a_(new be(H,X)),y.close()}else me(An,`RPC '${e}' stream ${s} received:`,O),A.u_(O)}})),C(c,ob.STAT_EVENT,(R=>{R.stat===lg.PROXY?me(An,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===lg.NOPROXY&&me(An,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t){return new XV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="PersistentStream";class nA{constructor(e,n,r,s,o,l,c,h){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(ai(n.toString()),ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new be(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(CE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(CE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class QL extends nA{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tL(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ue.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ue.min():l.readTime?Is(l.readTime):Ue.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=vg(this.serializer),n.addTarget=(function(o,l){let c;const h=l.target;if(c=fg(h)?{documents:sL(o,h)}:{query:iL(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Wb(o,l.resumeToken);const p=mg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ue.min())>0){c.readTime=Bd(o,l.snapshotVersion.toTimestamp());const p=mg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c})(this.serializer,e);const r=aL(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=vg(this.serializer),n.removeTarget=e,this.q_(n)}}class JL extends nA{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rL(e.writeResults,e.commitTime),r=Is(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=vg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>nL(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{}class XL extends YL{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new be(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,gg(n,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(ie.UNKNOWN,o.toString())}))}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,gg(n,r),s,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(ie.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ZL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ai(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="RemoteStore";class e2{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{ua(this)&&(me(ta,"Restarting streams for network reachability change."),await(async function(h){const p=$e(h);p.Ea.add(4),await Dc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Tf(p)})(this))}))})),this.Ra=new ZL(r,s)}}async function Tf(t){if(ua(t))for(const e of t.da)await e(!0)}async function Dc(t){for(const e of t.da)await e(!1)}function rA(t,e){const n=$e(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qy(n)?Wy(n):Ml(n).O_()&&zy(n,e))}function By(t,e){const n=$e(t),r=Ml(n);n.Ia.delete(e),r.O_()&&sA(n,e),n.Ia.size===0&&(r.O_()?r.L_():ua(n)&&n.Ra.set("Unknown"))}function zy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ml(t).Y_(e)}function sA(t,e){t.Va.Ue(e),Ml(t).Z_(e)}function Wy(t){t.Va=new GV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ml(t).start(),t.Ra.ua()}function qy(t){return ua(t)&&!Ml(t).x_()&&t.Ia.size>0}function ua(t){return $e(t).Ea.size===0}function iA(t){t.Va=void 0}async function t2(t){t.Ra.set("Online")}async function n2(t){t.Ia.forEach(((e,n)=>{zy(t,e)}))}async function r2(t,e){iA(t),qy(t)?(t.Ra.ha(e),Wy(t)):t.Ra.set("Unknown")}async function s2(t,e,n){if(t.Ra.set("Online"),e instanceof zb&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){me(ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wd(t,r)}else if(e instanceof wd?t.Va.Ze(e):e instanceof Bb?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ue.min()))try{const r=await eA(t.localStore);n.compareTo(r)>=0&&await(function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach(((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(p);m&&o.Ia.set(p,m.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,p)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(vn.EMPTY_BYTE_STRING,m.snapshotVersion)),sA(o,h);const y=new Ki(m.target,h,p,m.sequenceNumber);zy(o,y)})),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){me(ta,"Failed to raise snapshot:",r),await Wd(t,r)}}async function Wd(t,e,n){if(!Ll(e))throw e;t.Ea.add(1),await Dc(t),t.Ra.set("Offline"),n||(n=()=>eA(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{me(ta,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Tf(t)}))}function oA(t,e){return e().catch((n=>Wd(t,n,e)))}async function Sf(t){const e=$e(t),n=ro(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Py;for(;i2(e);)try{const s=await FL(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,o2(e,s)}catch(s){await Wd(e,s)}aA(e)&&lA(e)}function i2(t){return ua(t)&&t.Ta.length<10}function o2(t,e){t.Ta.push(e);const n=ro(t);n.O_()&&n.X_&&n.ea(e.mutations)}function aA(t){return ua(t)&&!ro(t).x_()&&t.Ta.length>0}function lA(t){ro(t).start()}async function a2(t){ro(t).ra()}async function l2(t){const e=ro(t);for(const n of t.Ta)e.ea(n.mutations)}async function u2(t,e,n){const r=t.Ta.shift(),s=Vy.from(r,e,n);await oA(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Sf(t)}async function c2(t,e){e&&ro(t).X_&&await(async function(r,s){if((function(l){return qV(l)&&l!==ie.ABORTED})(s.code)){const o=r.Ta.shift();ro(r).B_(),await oA(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Sf(r)}})(t,e),aA(t)&&lA(t)}async function xE(t,e){const n=$e(t);n.asyncQueue.verifyOperationInProgress(),me(ta,"RemoteStore received new credentials");const r=ua(n);n.Ea.add(3),await Dc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Tf(n)}async function h2(t,e){const n=$e(t);e?(n.Ea.delete(2),await Tf(n)):e||(n.Ea.add(2),await Dc(n),n.Ra.set("Unknown"))}function Ml(t){return t.ma||(t.ma=(function(n,r,s){const o=$e(n);return o.sa(),new QL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Xo:t2.bind(null,t),t_:n2.bind(null,t),r_:r2.bind(null,t),H_:s2.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),qy(t)?Wy(t):t.Ra.set("Unknown")):(await t.ma.stop(),iA(t))}))),t.ma}function ro(t){return t.fa||(t.fa=(function(n,r,s){const o=$e(n);return o.sa(),new JL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:a2.bind(null,t),r_:c2.bind(null,t),ta:l2.bind(null,t),na:u2.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Sf(t)):(await t.fa.stop(),t.Ta.length>0&&(me(ta,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,c=new Hy(e,n,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ky(t,e){if(ai("AsyncQueue",`${e}: ${t}`),Ll(t))return new be(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=Vu(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.ga=new Pt(ke.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class bl{constructor(e,n,r,s,o,l,c,h,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new bl(e,n,ml.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class f2{constructor(){this.queries=OE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=$e(n),o=s.queries;s.queries=OE(),o.forEach(((l,c)=>{for(const h of c.Sa)h.onError(r)}))})(this,new be(ie.ABORTED,"Firestore shutting down"))}}function OE(){return new aa((t=>Pb(t)),gf)}async function p2(t,e){const n=$e(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new d2,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=Ky(l,`Initialization of query '${el(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Gy(n)}async function m2(t,e){const n=$e(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function g2(t,e){const n=$e(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const c of l.Sa)c.Fa(s)&&(r=!0);l.wa=s}}r&&Gy(n)}function y2(t,e,n){const r=$e(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function Gy(t){t.Ca.forEach((e=>{e.next()}))}var Eg,NE;(NE=Eg||(Eg={})).Ma="default",NE.Cache="cache";class v2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.key=e}}class cA{constructor(e){this.key=e}}class _2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=kb(e),this.tu=new ml(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new DE,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,y)=>{const w=s.get(m),S=yf(this.query,y)?y:null,A=!!w&&this.mutatedKeys.has(w.key),C=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let R=!1;w&&S?w.data.isEqual(S.data)?A!==C&&(r.track({type:3,doc:S}),R=!0):this.su(w,S)||(r.track({type:2,doc:S}),R=!0,(h&&this.eu(S,h)>0||p&&this.eu(S,p)<0)&&(c=!0)):!w&&S?(r.track({type:0,doc:S}),R=!0):w&&!S&&(r.track({type:1,doc:w}),R=!0,(h||p)&&(c=!0)),R&&(S?(l=l.add(S),o=C?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((m,y)=>(function(S,A){const C=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:R})}};return C(S)-C(A)})(m.type,y.type)||this.eu(m.doc,y.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,p=h!==this.Za;return this.Za=h,l.length!==0||p?{snapshot:new bl(this.query,e.tu,o,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new DE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new cA(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new uA(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qy="SyncEngine";class w2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class E2{constructor(e){this.key=e,this.hu=!1}}class T2{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new aa((c=>Pb(c)),gf),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(ke.comparator),this.Au=new Map,this.Ru=new jy,this.Vu={},this.mu=new Map,this.fu=Il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S2(t,e,n=!0){const r=gA(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await hA(r,e,n,!0),s}async function I2(t,e){const n=gA(t);await hA(n,e,!0,!1)}async function hA(t,e,n,r){const s=await $L(t.localStore,Ss(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await b2(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&rA(t.remoteStore,s),c}async function b2(t,e,n,r,s){t.pu=(y,w,S)=>(async function(C,R,O,U){let N=R.view.ru(O);N.Cs&&(N=await AE(C.localStore,R.query,!1).then((({documents:k})=>R.view.ru(k,N))));const K=U&&U.targetChanges.get(R.targetId),H=U&&U.targetMismatches.get(R.targetId)!=null,X=R.view.applyChanges(N,C.isPrimaryClient,K,H);return LE(C,R.targetId,X.au),X.snapshot})(t,y,w,S);const o=await AE(t.localStore,e,!0),l=new _2(e,o.Qs),c=l.ru(o.documents),h=xc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),p=l.applyChanges(c,t.isPrimaryClient,h);LE(t,n,p.au);const m=new w2(e,n,l);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function A2(t,e,n){const r=$e(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!gf(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _g(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&By(r.remoteStore,s.targetId),Tg(r,s.targetId)})).catch(Vl)):(Tg(r,s.targetId),await _g(r.localStore,s.targetId,!0))}async function R2(t,e){const n=$e(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),By(n.remoteStore,r.targetId))}async function P2(t,e,n){const r=V2(t);try{const s=await(function(l,c){const h=$e(l),p=vt.now(),m=c.reduce(((S,A)=>S.add(A.key)),Ge());let y,w;return h.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let A=li(),C=Ge();return h.Ns.getEntries(S,m).next((R=>{A=R,A.forEach(((O,U)=>{U.isValidDocument()||(C=C.add(O))}))})).next((()=>h.localDocuments.getOverlayedDocuments(S,A))).next((R=>{y=R;const O=[];for(const U of c){const N=FV(U,y.get(U.key).overlayedDocument);N!=null&&O.push(new la(U.key,N,Eb(N.value.mapValue),ri.exists(!0)))}return h.mutationQueue.addMutationBatch(S,p,O,c)})).next((R=>{w=R;const O=R.applyToLocalDocumentSet(y,C);return h.documentOverlayCache.saveOverlays(S,R.batchId,O)}))})).then((()=>({batchId:w.batchId,changes:xb(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,c,h){let p=l.Vu[l.currentUser.toKey()];p||(p=new Pt(Ke)),p=p.insert(c,h),l.Vu[l.currentUser.toKey()]=p})(r,s.batchId,n),await Oc(r,s.changes),await Sf(r.remoteStore)}catch(s){const o=Ky(s,"Failed to persist write");n.reject(o)}}async function dA(t,e){const n=$e(t);try{const r=await jL(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=n.Au.get(o);l&&(st(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?st(l.hu,14607):s.removedDocuments.size>0&&(st(l.hu,42227),l.hu=!1))})),await Oc(n,r,e)}catch(r){await Vl(r)}}function VE(t,e,n){const r=$e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const h=$e(l);h.onlineState=c;let p=!1;h.queries.forEach(((m,y)=>{for(const w of y.Sa)w.va(c)&&(p=!0)})),p&&Gy(h)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function k2(t,e,n){const r=$e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new Pt(ke.comparator);l=l.insert(o,Pn.newNoDocument(o,Ue.min()));const c=Ge().add(o),h=new wf(Ue.min(),new Map,new Pt(Ke),l,c);await dA(r,h),r.du=r.du.remove(o),r.Au.delete(e),Jy(r)}else await _g(r.localStore,e,!1).then((()=>Tg(r,e,n))).catch(Vl)}async function C2(t,e){const n=$e(t),r=e.batch.batchId;try{const s=await ML(n.localStore,e);pA(n,r,null),fA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Oc(n,s)}catch(s){await Vl(s)}}async function x2(t,e,n){const r=$e(t);try{const s=await(function(l,c){const h=$e(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let m;return h.mutationQueue.lookupMutationBatch(p,c).next((y=>(st(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(p,y)))).next((()=>h.mutationQueue.performConsistencyCheck(p))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(p,m,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,m))).next((()=>h.localDocuments.getDocuments(p,m)))}))})(r.localStore,e);pA(r,e,n),fA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Oc(r,s)}catch(s){await Vl(s)}}function fA(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function pA(t,e,n){const r=$e(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Tg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||mA(t,r)}))}function mA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(By(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Jy(t))}function LE(t,e,n){for(const r of n)r instanceof uA?(t.Ru.addReference(r.key,e),D2(t,r)):r instanceof cA?(me(Qy,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||mA(t,r.key)):Ve(19791,{wu:r})}function D2(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(me(Qy,"New document in limbo: "+n),t.Eu.add(r),Jy(t))}function Jy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ke(At.fromString(e)),r=t.fu.next();t.Au.set(r,new E2(n)),t.du=t.du.insert(n,r),rA(t.remoteStore,new Ki(Ss(Oy(n.path)),r,"TargetPurposeLimboResolution",df.ce))}}async function Oc(t,e,n){const r=$e(t),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,h)=>{l.push(r.pu(h,e,n).then((p=>{if((p||n)&&r.isPrimaryClient){const m=p?!p.fromCache:n?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(p){s.push(p);const m=Fy.As(h.targetId,p);o.push(m)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(h,p){const m=$e(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>te.forEach(p,(w=>te.forEach(w.Es,(S=>m.persistence.referenceDelegate.addReference(y,w.targetId,S))).next((()=>te.forEach(w.ds,(S=>m.persistence.referenceDelegate.removeReference(y,w.targetId,S)))))))))}catch(y){if(!Ll(y))throw y;me($y,"Failed to update sequence numbers: "+y)}for(const y of p){const w=y.targetId;if(!y.fromCache){const S=m.Ms.get(w),A=S.snapshotVersion,C=S.withLastLimboFreeSnapshotVersion(A);m.Ms=m.Ms.insert(w,C)}}})(r.localStore,o))}async function O2(t,e){const n=$e(t);if(!n.currentUser.isEqual(e)){me(Qy,"User change. New user:",e.toKey());const r=await Zb(n.localStore,e);n.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((h=>{h.reject(new be(ie.CANCELLED,l))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oc(n,r.Ls)}}function N2(t,e){const n=$e(t),r=n.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let s=Ge();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const c=n.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function gA(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k2.bind(null,e),e.Pu.H_=g2.bind(null,e.eventManager),e.Pu.yu=y2.bind(null,e.eventManager),e}function V2(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x2.bind(null,e),e}class qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ef(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return LL(this.persistence,new OL,e.initialUser,this.serializer)}Cu(e){return new Xb(Uy.mi,this.serializer)}Du(e){return new zL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qd.provider={build:()=>new qd};class L2 extends qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){st(this.persistence.referenceDelegate instanceof zd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vL(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new Xb((r=>zd.mi(r,n)),this.serializer)}}class Sg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>VE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O2.bind(null,this.syncEngine),await h2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f2})()}createDatastore(e){const n=Ef(e.databaseInfo.databaseId),r=(function(o){return new GL(o)})(e.databaseInfo);return(function(o,l,c,h){return new XL(o,l,c,h)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,l,c){return new e2(r,s,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>VE(this.syncEngine,n,0)),(function(){return kE.v()?new kE:new WL})())}createSyncEngine(e,n){return(function(s,o,l,c,h,p,m){const y=new T2(s,o,l,c,h,p);return m&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=$e(n);me(ta,"RemoteStore shutting down."),r.Ea.add(5),await Dc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sg.provider={build:()=>new Sg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="FirestoreClient";class j2{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Rn.UNAUTHENTICATED,this.clientId=Ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{me(so,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(me(so,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ky(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function _m(t,e){t.asyncQueue.verifyOperationInProgress(),me(so,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Zb(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function ME(t,e){t.asyncQueue.verifyOperationInProgress();const n=await U2(t);me(so,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>xE(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>xE(e.remoteStore,s))),t._onlineComponents=e}async function U2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(so,"Using user provided OfflineComponentProvider");try{await _m(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ie.FAILED_PRECONDITION||s.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;wl("Error using user provided cache. Falling back to memory cache: "+n),await _m(t,new qd)}}else me(so,"Using default OfflineComponentProvider"),await _m(t,new L2(void 0));return t._offlineComponents}async function yA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(so,"Using user provided OnlineComponentProvider"),await ME(t,t._uninitializedComponentsProvider._online)):(me(so,"Using default OnlineComponentProvider"),await ME(t,new Sg))),t._onlineComponents}function F2(t){return yA(t).then((e=>e.syncEngine))}async function $2(t){const e=await yA(t),n=e.eventManager;return n.onListen=S2.bind(null,e.syncEngine),n.onUnlisten=A2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=R2.bind(null,e.syncEngine),n}function B2(t,e,n={}){const r=new Yi;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,p){const m=new M2({next:w=>{m.Nu(),l.enqueueAndForget((()=>m2(o,y)));const S=w.docs.has(c);!S&&w.fromCache?p.reject(new be(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&h&&h.source==="server"?p.reject(new be(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),y=new v2(Oy(c.path),m,{includeMetadataChanges:!0,qa:!0});return p2(o,y)})(await $2(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firestore.googleapis.com",UE=!0;class FE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_A,this.ssl=UE}else this.host=e.host,this.ssl=e.ssl??UE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gL)throw new be(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new be(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new be(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new be(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yy{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new BN;switch(r.type){case"firstParty":return new HN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=jE.get(n);r&&(me("ComponentProvider","Removing Datastore"),jE.delete(n),r.terminate())})(this),Promise.resolve()}}function z2(t,e,n,r={}){t=nc(t,Yy);const s=xl(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(fI(`https://${c}`),pI("Firestore",!0)),o.host!==_A&&o.host!==c&&wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:c,ssl:s,emulatorOptions:r};if(!Xi(h,l)&&(t._setSettings(h),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=Rn.MOCK_USER;else{p=K1(r.mockUserToken,t._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new be(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Rn(y)}t._authCredentials=new zN(new cb(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xy(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}toJSON(){return{type:an._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(kc(n,an._jsonSchema))return new an(e,r||null,new ke(At.fromString(n.referencePath)))}}an._jsonSchemaVersion="firestore/documentReference/1.0",an._jsonSchema={type:Kt("string",an._jsonSchemaVersion),referencePath:Kt("string")};class uc extends Xy{constructor(e,n,r){super(e,n,Oy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new ke(e))}withConverter(e){return new uc(this.firestore,e,this._path)}}function Wa(t,e,...n){if(t=ln(t),arguments.length===1&&(e=Ay.newId()),XN("doc","path",e),t instanceof Yy){const r=At.fromString(e,...n);return eE(r),new an(t,null,new ke(r))}{if(!(t instanceof an||t instanceof uc))throw new be(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return eE(r),new an(t.firestore,t instanceof uc?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="AsyncQueue";class BE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tA(this,"async_queue_retry"),this._c=()=>{const r=vm();r&&me($E,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Yi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ll(e))throw e;me($E,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ai("INTERNAL UNHANDLED ERROR: ",zE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Hy.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ve(47125,{Pc:zE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zy extends Yy{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new BE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BE(e),this._firestoreClient=void 0,await e}}}function W2(t,e){const n=typeof t=="object"?t:py(),r=typeof t=="string"?t:Ld,s=ia(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=q1("firestore");o&&z2(s,...o)}return s}function wA(t){if(t._terminated)throw new be(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q2(t),t._firestoreClient}function q2(t){const e=t._freezeSettings(),n=(function(s,o,l,c){return new cV(s,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,vA(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new j2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pr(vn.fromBase64String(e))}catch(n){throw new be(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pr(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kc(e,Pr._jsonSchema))return Pr.fromBase64String(e.bytes)}}Pr._jsonSchemaVersion="firestore/bytes/1.0",Pr._jsonSchema={type:Kt("string",Pr._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bs._jsonSchemaVersion}}static fromJSON(e){if(kc(e,bs._jsonSchema))return new bs(e.latitude,e.longitude)}}bs._jsonSchemaVersion="firestore/geoPoint/1.0",bs._jsonSchema={type:Kt("string",bs._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:As._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kc(e,As._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new As(e.vectorValues);throw new be(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}As._jsonSchemaVersion="firestore/vectorValue/1.0",As._jsonSchema={type:Kt("string",As._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=/^__.*__$/;class K2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new la(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cc(e,this.data,n,this.fieldTransforms)}}function TA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:t})}}class tv{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(TA(this.Ac)&&H2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class G2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ef(e)}Cc(e,n,r,s=!1){return new tv({Ac:e,methodName:n,Dc:r,path:yn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Q2(t){const e=t._freezeSettings(),n=Ef(t._databaseId);return new G2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function J2(t,e,n,r,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);AA("Data must be an object, but it was:",l,r);const c=IA(r,l);let h,p;if(o.merge)h=new Zr(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const w=Y2(e,y,n);if(!l.contains(w))throw new be(ie.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Z2(m,w)||m.push(w)}h=new Zr(m),p=l.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,p=l.fieldTransforms;return new K2(new Rr(c),h,p)}function SA(t,e){if(bA(t=ln(t)))return AA("Unsupported field value:",e,t),IA(t,e);if(t instanceof EA)return(function(r,s){if(!TA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const c of r){let h=SA(c,s.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=vt.fromDate(r);return{timestampValue:Bd(s.serializer,o)}}if(r instanceof vt){const o=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bd(s.serializer,o)}}if(r instanceof bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pr)return{bytesValue:Wb(s.serializer,r._byteString)};if(r instanceof an){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:My(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof As)return(function(l,c){return{mapValue:{fields:{[_b]:{stringValue:wb},[Md]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw c.Sc("VectorValues must only contain numeric values.");return Ny(c.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Ry(r)}`)})(t,e)}function IA(t,e){const n={};return fb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(t,((r,s)=>{const o=SA(s,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function bA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof bs||t instanceof Pr||t instanceof an||t instanceof EA||t instanceof As)}function AA(t,e,n){if(!bA(n)||!hb(n)){const r=Ry(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Y2(t,e,n){if((e=ln(e))instanceof ev)return e._internalPath;if(typeof e=="string")return RA(t,e);throw Hd("Field path arguments must be of type string or ",t,!1,void 0,n)}const X2=new RegExp("[~\\*/\\[\\]]");function RA(t,e,n){if(e.search(X2)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ev(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hd(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new be(ie.INVALID_ARGUMENT,c+t+h)}function Z2(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eM extends PA{data(){return super.data()}}function kA(t,e){return typeof e=="string"?RA(t,e):e instanceof ev?e._internalPath:e._delegate._internalPath}class tM{convertValue(e,n="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return oa(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){const n=e.fields?.[Md].arrayValue?.values?.map((r=>Ut(r.doubleValue)));return new As(n)}convertGeoPoint(e){return new bs(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const n=eo(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=At.fromString(e);st(Jb(r),9688,{name:e});const s=new ic(r.get(1),r.get(3)),o=new ke(r.popFirst(5));return s.isEqual(n)||ai(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Mu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qo extends PA{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(kA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qo._jsonSchema={type:Kt("string",Qo._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Ed extends Qo{data(e={}){return super.data(e)}}class Hu{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Mu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ed(this._firestore,this._userDataWriter,r.key,r,new Mu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const h=new Ed(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Mu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const h=new Ed(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Mu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,m=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:rM(c.type),doc:h,oldIndex:p,newIndex:m}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t){t=nc(t,an);const e=nc(t.firestore,Zy);return B2(wA(e),t._key).then((n=>oM(e,t,n)))}Hu._jsonSchemaVersion="firestore/querySnapshot/1.0",Hu._jsonSchema={type:Kt("string",Hu._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class sM extends tM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function ed(t,e,n){t=nc(t,an);const r=nc(t.firestore,Zy),s=nM(t.converter,e,n);return iM(r,[J2(Q2(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ri.none())])}function iM(t,e){return(function(r,s){const o=new Yi;return r.asyncQueue.enqueueAndForget((async()=>P2(await F2(r),s,o))),o.promise})(wA(t),e)}function oM(t,e,n){const r=n.docs.get(e._key),s=new sM(t);return new Qo(t,s,e._key,r,new Mu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Nl=s})(Dl),ks(new ts("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Zy(new WN(r.getProvider("auth-internal")),new KN(l,r.getProvider("app-check-internal")),(function(p,m){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new be(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ic(p.options.projectId,m)})(l,s),l);return o={useFetchStreams:n,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),Cr(J0,Y0,e),Cr(J0,Y0,"esm2020")})();var aM="firebase",lM="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(aM,lM,"app");const CA="@firebase/installations",nv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=1e4,DA=`w:${nv}`,OA="FIS_v2",uM="https://firebaseinstallations.googleapis.com/v1",cM=3600*1e3,hM="installations",dM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},na=new sa(hM,dM,fM);function NA(t){return t instanceof ns&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA({projectId:t}){return`${uM}/projects/${t}/installations`}function LA(t){return{token:t.token,requestStatus:2,expiresIn:mM(t.expiresIn),creationTime:Date.now()}}async function MA(t,e){const r=(await e.json()).error;return na.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function jA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function pM(t,{refreshToken:e}){const n=jA(t);return n.append("Authorization",gM(e)),n}async function UA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function mM(t){return Number(t.replace("s","000"))}function gM(t){return`${OA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=VA(t),s=jA(t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:n,authVersion:OA,appId:t.appId,sdkVersion:DA},c={method:"POST",headers:s,body:JSON.stringify(l)},h=await UA(()=>fetch(r,c));if(h.ok){const p=await h.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:LA(p.authToken)}}else throw await MA("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=/^[cdef][\w-]{21}$/,Ig="";function wM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=EM(t);return _M.test(n)?n:Ig}catch{return Ig}}function EM(t){return vM(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new Map;function BA(t,e){const n=If(t);zA(n,e),TM(n,e)}function zA(t,e){const n=$A.get(t);if(n)for(const r of n)r(e)}function TM(t,e){const n=SM();n&&n.postMessage({key:t,fid:e}),IM()}let qo=null;function SM(){return!qo&&"BroadcastChannel"in self&&(qo=new BroadcastChannel("[Firebase] FID Change"),qo.onmessage=t=>{zA(t.data.key,t.data.fid)}),qo}function IM(){$A.size===0&&qo&&(qo.close(),qo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="firebase-installations-database",AM=1,ra="firebase-installations-store";let wm=null;function rv(){return wm||(wm=wI(bM,AM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ra)}}})),wm}async function Kd(t,e){const n=If(t),s=(await rv()).transaction(ra,"readwrite"),o=s.objectStore(ra),l=await o.get(n);return await o.put(e,n),await s.done,(!l||l.fid!==e.fid)&&BA(t,e.fid),e}async function WA(t){const e=If(t),r=(await rv()).transaction(ra,"readwrite");await r.objectStore(ra).delete(e),await r.done}async function bf(t,e){const n=If(t),s=(await rv()).transaction(ra,"readwrite"),o=s.objectStore(ra),l=await o.get(n),c=e(l);return c===void 0?await o.delete(n):await o.put(c,n),await s.done,c&&(!l||l.fid!==c.fid)&&BA(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sv(t){let e;const n=await bf(t.appConfig,r=>{const s=RM(r),o=PM(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===Ig?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function RM(t){const e=t||{fid:wM(),registrationStatus:0};return qA(e)}function PM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(na.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=kM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:CM(t)}:{installationEntry:e}}async function kM(t,e){try{const n=await yM(t,e);return Kd(t.appConfig,n)}catch(n){throw NA(n)&&n.customData.serverCode===409?await WA(t.appConfig):await Kd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function CM(t){let e=await qE(t.appConfig);for(;e.registrationStatus===1;)await FA(100),e=await qE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await sv(t);return r||n}return e}function qE(t){return bf(t,e=>{if(!e)throw na.create("installation-not-found");return qA(e)})}function qA(t){return xM(t)?{fid:t.fid,registrationStatus:0}:t}function xM(t){return t.registrationStatus===1&&t.registrationTime+xA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM({appConfig:t,heartbeatServiceProvider:e},n){const r=OM(t,n),s=pM(t,n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:DA,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},h=await UA(()=>fetch(r,c));if(h.ok){const p=await h.json();return LA(p)}else throw await MA("Generate Auth Token",h)}function OM(t,{fid:e}){return`${VA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iv(t,e=!1){let n;const r=await bf(t.appConfig,o=>{if(!HA(o))throw na.create("not-registered");const l=o.authToken;if(!e&&LM(l))return o;if(l.requestStatus===1)return n=NM(t,e),o;{if(!navigator.onLine)throw na.create("app-offline");const c=jM(o);return n=VM(t,c),c}});return n?await n:r.authToken}async function NM(t,e){let n=await HE(t.appConfig);for(;n.authToken.requestStatus===1;)await FA(100),n=await HE(t.appConfig);const r=n.authToken;return r.requestStatus===0?iv(t,e):r}function HE(t){return bf(t,e=>{if(!HA(e))throw na.create("not-registered");const n=e.authToken;return UM(n)?{...e,authToken:{requestStatus:0}}:e})}async function VM(t,e){try{const n=await DM(t,e),r={...e,authToken:n};return await Kd(t.appConfig,r),n}catch(n){if(NA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await WA(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Kd(t.appConfig,r)}throw n}}function HA(t){return t!==void 0&&t.registrationStatus===2}function LM(t){return t.requestStatus===2&&!MM(t)}function MM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+cM}function jM(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function UM(t){return t.requestStatus===1&&t.requestTime+xA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t){const e=t,{installationEntry:n,registrationPromise:r}=await sv(e);return r?r.catch(console.error):iv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e=!1){const n=t;return await BM(n),(await iv(n,e)).token}async function BM(t){const{registrationPromise:e}=await sv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){if(!t||!t.options)throw Em("App Configuration");if(!t.name)throw Em("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Em(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Em(t){return na.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="installations",WM="installations-internal",qM=t=>{const e=t.getProvider("app").getImmediate(),n=zM(e),r=ia(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},HM=t=>{const e=t.getProvider("app").getImmediate(),n=ia(e,KA).getImmediate();return{getId:()=>FM(n),getToken:s=>$M(n,s)}};function KM(){ks(new ts(KA,qM,"PUBLIC")),ks(new ts(WM,HM,"PRIVATE"))}KM();Cr(CA,nv);Cr(CA,nv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="analytics",GM="firebase_id",QM="origin",JM=60*1e3,YM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ov="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new lf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},pr=new sa("analytics","Analytics",XM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t){if(!t.startsWith(ov)){const e=pr.create("invalid-gtag-resource",{gtagURL:t});return jn.warn(e.message),""}return t}function GA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function ej(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function tj(t,e){const n=ej("firebase-js-sdk-policy",{createScriptURL:ZM}),r=document.createElement("script"),s=`${ov}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function nj(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function rj(t,e,n,r,s,o){const l=r[s];try{if(l)await e[l];else{const h=(await GA(n)).find(p=>p.measurementId===s);h&&await e[h.appId]}}catch(c){jn.error(c)}t("config",s,o)}async function sj(t,e,n,r,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const c=await GA(n);for(const h of l){const p=c.find(y=>y.measurementId===h),m=p&&e[p.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,s||{})}catch(o){jn.error(o)}}function ij(t,e,n,r){async function s(o,...l){try{if(o==="event"){const[c,h]=l;await sj(t,e,n,c,h)}else if(o==="config"){const[c,h]=l;await rj(t,e,n,r,c,h)}else if(o==="consent"){const[c,h]=l;t("consent",c,h)}else if(o==="get"){const[c,h,p]=l;t("get",c,h,p)}else if(o==="set"){const[c]=l;t("set",c)}else t(o,...l)}catch(c){jn.error(c)}}return s}function oj(t,e,n,r,s){let o=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=ij(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function aj(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ov)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=30,uj=1e3;class cj{constructor(e={},n=uj){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const QA=new cj;function hj(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function dj(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:hj(n)},s=YM.replace("{app-id}",e),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();c.error?.message&&(l=c.error.message)}catch{}throw pr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function fj(t,e=QA,n){const{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw pr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw pr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new gj;return setTimeout(async()=>{c.abort()},JM),JA({appId:r,apiKey:s,measurementId:o},l,c,e)}async function JA(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=QA){const{appId:o,measurementId:l}=t;try{await pj(r,e)}catch(c){if(l)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:l};throw c}try{const c=await dj(t);return s.deleteThrottleMetadata(o),c}catch(c){const h=c;if(!mj(h)){if(s.deleteThrottleMetadata(o),l)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:o,measurementId:l};throw c}const p=Number(h?.customData?.httpStatus)===503?w0(n,s.intervalMillis,lj):w0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return s.setThrottleMetadata(o,m),jn.debug(`Calling attemptFetch again in ${p} millis`),JA(t,m,r,s)}}function pj(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),r(pr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function mj(t){if(!(t instanceof ns)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class gj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function yj(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const o=await e,l={...r,send_to:o};t("event",n,l)}}async function vj(t,e,n,r){if(r&&r.global){const s={};for(const o of Object.keys(n))s[`user_properties.${o}`]=n[o];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(){if(gI())try{await yI()}catch(t){return jn.warn(pr.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return jn.warn(pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function wj(t,e,n,r,s,o,l){const c=fj(t);c.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>jn.error(w)),e.push(c);const h=_j().then(w=>{if(w)return r.getId()}),[p,m]=await Promise.all([c,h]);aj(o)||tj(o,p.measurementId),s("js",new Date);const y=l?.config??{};return y[QM]="firebase",y.update=!0,m!=null&&(y[GM]=m),s("config",p.measurementId,y),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.app=e}_delete(){return delete gl[this.app.options.appId],Promise.resolve()}}let gl={},KE=[];const GE={};let Tm="dataLayer",Tj="gtag",QE,av,JE=!1;function Sj(){const t=[];if(mI()&&t.push("This is a browser extension environment."),nx()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=pr.create("invalid-analytics-context",{errorInfo:e});jn.warn(n.message)}}function Ij(t,e,n){Sj();const r=t.options.appId;if(!r)throw pr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw pr.create("no-api-key");if(gl[r]!=null)throw pr.create("already-exists",{id:r});if(!JE){nj(Tm);const{wrappedGtag:o,gtagCore:l}=oj(gl,KE,GE,Tm,Tj);av=o,QE=l,JE=!0}return gl[r]=wj(t,KE,GE,e,QE,Tm,n),new Ej(t)}function bj(t=py()){t=ln(t);const e=ia(t,Gd);return e.isInitialized()?e.getImmediate():Aj(t)}function Aj(t,e={}){const n=ia(t,Gd);if(n.isInitialized()){const s=n.getImmediate();if(Xi(e,n.getOptions()))return s;throw pr.create("already-initialized")}return n.initialize({options:e})}function Rj(t,e,n){t=ln(t),vj(av,gl[t.app.options.appId],e,n).catch(r=>jn.error(r))}function Pj(t,e,n,r){t=ln(t),yj(av,gl[t.app.options.appId],e,n,r).catch(s=>jn.error(s))}const YE="@firebase/analytics",XE="0.10.19";function kj(){ks(new ts(Gd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Ij(r,s,n)},"PUBLIC")),ks(new ts("analytics-internal",t,"PRIVATE")),Cr(YE,XE),Cr(YE,XE,"esm2020");function t(e){try{const n=e.getProvider(Gd).getImmediate();return{logEvent:(r,s,o)=>Pj(n,r,s,o),setUserProperties:(r,s)=>Rj(n,r,s)}}catch(n){throw pr.create("interop-component-reg-failed",{reason:n})}}}kj();const Cj={apiKey:"AIzaSyBkxRFG8qLm3QrbUgPb_QLEC3pJYW3nfx0",authDomain:"arkan-8bd63.firebaseapp.com",projectId:"arkan-8bd63",storageBucket:"arkan-8bd63.firebasestorage.app",messagingSenderId:"1097406159096",appId:"1:1097406159096:web:3f6ab094d52e73942ac30d",measurementId:"G-VH77WMGF6Y"},lv=EI(Cj);bj(lv);const Cu=FN(lv),qa=W2(lv),YA=V.createContext(null),xj=()=>{const t=V.useContext(YA);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Dj=({children:t})=>{const[e,n]=V.useState(null),[r,s]=V.useState(null),[o,l]=V.useState(!0),[c,h]=V.useState(()=>{const N=localStorage.getItem("employeeSession");return N?JSON.parse(N):null});V.useEffect(()=>{const N=PO(Cu,async K=>{if(n(K),K)try{const H=await WE(Wa(qa,"subscriptions",K.uid));if(H.exists()){const X=H.data();new Date(X.endDate)<new Date?s({...X,status:"expired"}):s(X)}else s(null)}catch(H){console.error("Error fetching subscription:",H),s(null)}else s(null);l(!1)});return()=>N()},[]);const p=async(N,K)=>{if(N==="admin@arkan.sa"&&K==="Admin@2024"){n({uid:"demo-admin-uid",email:"admin@arkan.sa",displayName:"  ",emailVerified:!0}),s({planName:" ",price:"199 ./",startDate:new Date().toISOString(),endDate:new Date(Date.now()+365*24*60*60*1e3).toISOString(),status:"active",code:"ARK-DEMO-2024"});return}await SO(Cu,N,K)},m=async()=>{const N=new Xs;try{const H=(await QO(Cu,N)).user;if(!(await WE(Wa(qa,"users",H.uid))).exists()){await ed(Wa(qa,"users",H.uid),{name:H.displayName||" Google",email:H.email,emailVerified:!0,authProvider:"google",createdAt:new Date().toISOString()},{merge:!0});const k=new Date,b=new Date;b.setDate(k.getDate()+7);const P={planName:" ",price:"0",startDate:k.toISOString(),endDate:b.toISOString(),status:"active",code:`ARK-TRIAL-${Math.floor(Math.random()*1e5)}`};await ed(Wa(qa,"subscriptions",H.uid),P),s(P)}}catch(K){throw console.error("Google Sign-in error:",K),K}},y=async(N,K,H)=>{console.log("AuthContext: Attempting registration for",K);try{const X=await TO(Cu,K,H);console.log("AuthContext: User created",X.user.uid),await bO(X.user,{displayName:N}),console.log("AuthContext: Profile updated"),await U0(X.user,{url:window.location.origin+"/login",handleCodeInApp:!1}),console.log("AuthContext: Verification email sent"),await ed(Wa(qa,"users",X.user.uid),{name:N,email:K,emailVerified:!1,createdAt:new Date().toISOString()},{merge:!0}),console.log("AuthContext: Firestore doc created")}catch(X){throw console.error("AuthContext: Registration FAILED",X),X}},w=async()=>{await kO(Cu)},S=N=>{h(N),N?localStorage.setItem("employeeSession",JSON.stringify(N)):localStorage.removeItem("employeeSession")},A=()=>{h(null),localStorage.removeItem("employeeSession")},C=(N,K)=>{if(!c)return!1;const H=c.permissions.find(X=>X.module===N);return H?H.actions.includes(K):!1},R=async()=>{e&&!e.emailVerified&&await U0(e,{url:window.location.origin+"/login",handleCodeInApp:!1})},O=e?.emailVerified||e?.email==="admin@arkan.sa"||!1,U=async N=>{if(!e)return;const K=new Date,H=new Date;H.setDate(K.getDate()+30);const X={planName:N.name,price:N.price,startDate:K.toISOString(),endDate:H.toISOString(),status:"active",code:`ARK-${Math.floor(Math.random()*1e5)}-PRO`};await ed(Wa(qa,"subscriptions",e.uid),X),s(X)};return J.jsx(YA.Provider,{value:{user:e,loading:o,subscription:r,currentEmployee:c,login:p,loginWithGoogle:m,register:y,logout:w,subscribe:U,setEmployeeSession:S,hasEmployeePermission:C,employeeLogout:A,resendVerificationEmail:R,isEmailVerified:O},children:!o&&t})};var ZE=function(){return ZE=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ZE.apply(this,arguments)};function Af(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Oj(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(m){try{p(r.next(m))}catch(y){l(y)}}function h(m){try{p(r.throw(m))}catch(y){l(y)}}function p(m){m.done?o(m.value):s(m.value).then(c,h)}p((r=r.apply(t,e||[])).next())})}function Z5(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}const Nj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class uv extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Vj extends uv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class eT extends uv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class tT extends uv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var bg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(bg||(bg={}));class Lj{constructor(e,{headers:n={},customFetch:r,region:s=bg.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Nj(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Oj(this,arguments,void 0,function*(n,r={}){var s;let o,l;try{const{headers:c,method:h,body:p,signal:m,timeout:y}=r;let w={},{region:S}=r;S||(S=this.region);const A=new URL(`${this.url}/${n}`);S&&S!=="any"&&(w["x-region"]=S,A.searchParams.set("forceFunctionRegion",S));let C;p&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",C=p):typeof p=="string"?(w["Content-Type"]="text/plain",C=p):typeof FormData<"u"&&p instanceof FormData?C=p:(w["Content-Type"]="application/json",C=JSON.stringify(p)):C=p;let R=m;y&&(l=new AbortController,o=setTimeout(()=>l.abort(),y),m?(R=l.signal,m.addEventListener("abort",()=>l.abort())):R=l.signal);const O=yield this.fetch(A.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),c),body:C,signal:R}).catch(H=>{throw new Vj(H)}),U=O.headers.get("x-relay-error");if(U&&U==="true")throw new eT(O);if(!O.ok)throw new tT(O);let N=((s=O.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),K;return N==="application/json"?K=yield O.json():N==="application/octet-stream"||N==="application/pdf"?K=yield O.blob():N==="text/event-stream"?K=O:N==="multipart/form-data"?K=yield O.formData():K=yield O.text(),{data:K,error:null,response:O}}catch(c){return{data:null,error:c,response:c instanceof tT||c instanceof eT?c.context:void 0}}finally{o&&clearTimeout(o)}})}}var Mj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},jj=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,c=null,h=null,p=o.status,m=o.statusText;if(o.ok){var y,w;if(n.method!=="HEAD"){var S;const O=await o.text();O===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((S=n.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?c=O:c=JSON.parse(O))}const C=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),R=(w=o.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");C&&R&&R.length>1&&(h=parseInt(R[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,p=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var A;const C=await o.text();try{l=JSON.parse(C),Array.isArray(l)&&o.status===404&&(c=[],l=null,p=200,m="OK")}catch{o.status===404&&C===""?(p=204,m="No Content"):l={message:C}}if(l&&n.isMaybeSingle&&(!(l==null||(A=l.details)===null||A===void 0)&&A.includes("0 rows"))&&(l=null,p=200,m="OK"),l&&n.shouldThrowOnError)throw new Mj(l)}return{error:l,data:c,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(s=s.catch(o=>{var l;let c="";const h=o?.cause;if(h){var p,m,y,w;const A=(p=h?.message)!==null&&p!==void 0?p:"",C=(m=h?.code)!==null&&m!==void 0?m:"";c=`${(y=o?.name)!==null&&y!==void 0?y:"FetchError"}: ${o?.message}`,c+=`

Caused by: ${(w=h?.name)!==null&&w!==void 0?w:"Error"}: ${A}`,C&&(c+=` (${C})`),h?.stack&&(c+=`
${h.stack}`)}else{var S;c=(S=o?.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(l=o?.name)!==null&&l!==void 0?l:"FetchError"}: ${o?.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},Uj=class extends jj{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const nT=new RegExp("[,()]");var rl=class extends Uj{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&nT.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&nT.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Fj=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",l),r&&this.headers.append("Prefer",`count=${r}`),new rl({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new rl({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(c.length>0){const h=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new rl({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new rl({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new rl({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},$j=class XA{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Fj(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new XA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:o}={}){var l;let c;const h=new URL(`${this.url}/rpc/${e}`);let p;r||s?(c=r?"HEAD":"GET",Object.entries(n).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{h.searchParams.append(y,w)})):(c="POST",p=n);const m=new Headers(this.headers);return o&&m.set("Prefer",`count=${o}`),new rl({method:c,url:h,headers:m,schema:this.schemaName,body:p,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class Bj{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const zj="2.89.0",Wj=`realtime-js/${zj}`,ZA="1.0.0",qj="2.0.0",rT=ZA,Ag=1e4,Hj=1e3,Kj=100;var Bi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Bi||(Bi={}));var Jt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Jt||(Jt={}));var Yr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yr||(Yr={}));var Rg;(function(t){t.websocket="websocket"})(Rg||(Rg={}));var $o;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})($o||($o={}));class Gj{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,r){var s,o;const l=e.topic,c=(s=e.ref)!==null&&s!==void 0?s:"",h=(o=e.join_ref)!==null&&o!==void 0?o:"",p=e.payload.event,m=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(m).length===0?"":JSON.stringify(m);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+c.length+l.length+p.length+y.length,S=new ArrayBuffer(this.HEADER_LENGTH+w);let A=new DataView(S),C=0;A.setUint8(C++,this.KINDS.userBroadcastPush),A.setUint8(C++,h.length),A.setUint8(C++,c.length),A.setUint8(C++,l.length),A.setUint8(C++,p.length),A.setUint8(C++,y.length),A.setUint8(C++,n),Array.from(h,O=>A.setUint8(C++,O.charCodeAt(0))),Array.from(c,O=>A.setUint8(C++,O.charCodeAt(0))),Array.from(l,O=>A.setUint8(C++,O.charCodeAt(0))),Array.from(p,O=>A.setUint8(C++,O.charCodeAt(0))),Array.from(y,O=>A.setUint8(C++,O.charCodeAt(0)));var R=new Uint8Array(S.byteLength+r.byteLength);return R.set(new Uint8Array(S),0),R.set(new Uint8Array(r),S.byteLength),R.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,o,l,c,h]=r;return n({join_ref:s,ref:o,topic:l,event:c,payload:h})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),c=n.getUint8(4);let h=this.HEADER_LENGTH+4;const p=r.decode(e.slice(h,h+s));h=h+s;const m=r.decode(e.slice(h,h+o));h=h+o;const y=r.decode(e.slice(h,h+l));h=h+l;const w=e.slice(h,e.byteLength),S=c===this.JSON_ENCODING?JSON.parse(r.decode(w)):w,A={type:this.BROADCAST_EVENT,event:m,payload:S};return l>0&&(A.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class eR{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ft;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ft||(ft={}));const sT=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=Qj(l,t,e,s),o),{}):{}},Qj=(t,e,n,r)=>{const s=e.find(c=>c.name===t),o=s?.type,l=n[t];return o&&!r.includes(o)?tR(o,l):Pg(l)},tR=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Zj(e,n)}switch(t){case ft.bool:return Jj(e);case ft.float4:case ft.float8:case ft.int2:case ft.int4:case ft.int8:case ft.numeric:case ft.oid:return Yj(e);case ft.json:case ft.jsonb:return Xj(e);case ft.timestamp:return eU(e);case ft.abstime:case ft.date:case ft.daterange:case ft.int4range:case ft.int8range:case ft.money:case ft.reltime:case ft.text:case ft.time:case ft.timestamptz:case ft.timetz:case ft.tsrange:case ft.tstzrange:return Pg(e);default:return Pg(e)}},Pg=t=>t,Jj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Yj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Xj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Zj=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(c=>tR(e,c))}return t},eU=t=>typeof t=="string"?t.replace(" ","T"):t,nR=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Sm{constructor(e,n,r={},s=Ag){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var iT;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(iT||(iT={}));class Ku{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ku.syncState(this.state,s,o,l),this.pendingDiffs.forEach(h=>{this.state=Ku.syncDiff(this.state,h,o,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ku.syncDiff(this.state,s,o,l),c())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),l=this.transformState(n),c={},h={};return this.map(o,(p,m)=>{l[p]||(h[p]=m)}),this.map(l,(p,m)=>{const y=o[p];if(y){const w=m.map(R=>R.presence_ref),S=y.map(R=>R.presence_ref),A=m.filter(R=>S.indexOf(R.presence_ref)<0),C=y.filter(R=>w.indexOf(R.presence_ref)<0);A.length>0&&(c[p]=A),C.length>0&&(h[p]=C)}else c[p]=m}),this.syncDiff(o,{joins:c,leaves:h},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(c,h)=>{var p;const m=(p=e[c])!==null&&p!==void 0?p:[];if(e[c]=this.cloneDeep(h),m.length>0){const y=e[c].map(S=>S.presence_ref),w=m.filter(S=>y.indexOf(S.presence_ref)<0);e[c].unshift(...w)}r(c,m,h)}),this.map(l,(c,h)=>{let p=e[c];if(!p)return;const m=h.map(y=>y.presence_ref);p=p.filter(y=>m.indexOf(y.presence_ref)<0),e[c]=p,s(c,p,h),p.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var oT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(oT||(oT={}));var Gu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Gu||(Gu={}));var Ys;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ys||(Ys={}));class ol{constructor(e,n={config:{}},r){var s,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sm(this,Yr.join,this.params,this.timeout),this.rejoinTimer=new eR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yr.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Ku(this),this.broadcastEndpointURL=nR(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Jt.closed){const{config:{broadcast:l,presence:c,private:h}}=this.params,p=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(S=>S.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[Gu.PRESENCE]&&this.bindings[Gu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},w={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(S=>e?.(Ys.CHANNEL_ERROR,S)),this._onClose(()=>e?.(Ys.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){e?.(Ys.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,R=(A=C?.length)!==null&&A!==void 0?A:0,O=[];for(let U=0;U<R;U++){const N=C[U],{filter:{event:K,schema:H,table:X,filter:k}}=N,b=S&&S[U];if(b&&b.event===K&&ol.isFilterValueEqual(b.schema,H)&&ol.isFilterValueEqual(b.table,X)&&ol.isFilterValueEqual(b.filter,k))O.push(Object.assign(Object.assign({},N),{id:b.id}));else{this.unsubscribe(),this.state=Jt.errored,e?.(Ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,e&&e(Ys.SUBSCRIBED);return}}).receive("error",S=>{this.state=Jt.errored,e?.(Ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Jt.joined&&e===Gu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let h=c.statusText;try{const p=await c.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=p.body)===null||s===void 0?void 0:s.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,h;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Jt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Sm(this,Yr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Jt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Sm(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Kj){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const l=e.toLocaleLowerCase(),{close:c,error:h,leave:p,join:m}=Yr;if(r&&[c,h,p,m].indexOf(l)>=0&&r!==this._joinRef())return;let w=this._onMessage(l,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(S=>{var A,C,R;return((A=S.filter)===null||A===void 0?void 0:A.event)==="*"||((R=(C=S.filter)===null||C===void 0?void 0:C.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===l}).map(S=>S.callback(w,r)):(o=this.bindings[l])===null||o===void 0||o.filter(S=>{var A,C,R,O,U,N;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in S){const K=S.id,H=(A=S.filter)===null||A===void 0?void 0:A.event;return K&&((C=n.ids)===null||C===void 0?void 0:C.includes(K))&&(H==="*"||H?.toLocaleLowerCase()===((R=n.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const K=(U=(O=S?.filter)===null||O===void 0?void 0:O.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return K==="*"||K===((N=n?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===l}).map(S=>{if(typeof w=="object"&&"ids"in w){const A=w.data,{schema:C,table:R,commit_timestamp:O,type:U,errors:N}=A;w=Object.assign(Object.assign({},{schema:C,table:R,commit_timestamp:O,eventType:U,new:{},old:{},errors:N}),this._getPayloadRecords(A))}S.callback(w,r)})}_isClosed(){return this.state===Jt.closed}_isJoined(){return this.state===Jt.joined}_isJoining(){return this.state===Jt.joining}_isLeaving(){return this.state===Jt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ol.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yr.close,{},e)}_onError(e){this._on(Yr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=sT(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=sT(e.columns,e.old_record)),n}}const Im=()=>{},td={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},tU=[1e3,2e3,5e3,1e4],nU=1e4,rU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sU{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ag,this.transport=null,this.heartbeatIntervalMs=td.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Im,this.ref=0,this.reconnectTimer=null,this.vsn=rT,this.logger=Im,this.conn=null,this.sendBuffer=[],this.serializer=new Gj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Rg.websocket}`,this.httpEndpoint=nR(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Bj.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bi.connecting:return $o.Connecting;case Bi.open:return $o.Open;case Bi.closing:return $o.Closing;default:return $o.Closed}}isConnected(){return this.connectionState()===$o.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new ol(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,c=>{var h;(h=this.conn)===null||h===void 0||h.send(c)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Hj,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},td.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:l}=n,c=l?`(${l})`:"",h=o.status||"";this.log("receive",`${h} ${r} ${s} ${c}`.trim(),o),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(s,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Bi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Bi.open||this.conn.readyState===Bi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([rU],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const o={access_token:n,version:Wj};n&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Yr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new eR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},td.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,o,l,c,h,p,m,y,w,S;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Ag,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:td.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:Im,this.vsn=(h=e?.vsn)!==null&&h!==void 0?h:rT,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e?.reconnectAfterMs)!==null&&p!==void 0?p:(A=>tU[A-1]||nU),this.vsn){case ZA:this.encode=(m=e?.encode)!==null&&m!==void 0?m:((A,C)=>C(JSON.stringify(A))),this.decode=(y=e?.decode)!==null&&y!==void 0?y:((A,C)=>C(JSON.parse(A)));break;case qj:this.encode=(w=e?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(S=e?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var cc=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function iU(t,e,n){const r=new URL(e,t);if(n)for(const[s,o]of Object.entries(n))o!==void 0&&r.searchParams.set(s,o);return r.toString()}async function oU(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function aU(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:o,headers:l}){const c=iU(t.baseUrl,r,s),h=await oU(t.auth),p=await e(c,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...h,...l},body:o?JSON.stringify(o):void 0}),m=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),w=y&&m?JSON.parse(m):m;if(!p.ok){const S=y?w:void 0,A=S?.error;throw new cc(A?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:A?.type,icebergCode:A?.code,details:S})}return{status:p.status,headers:p.headers,data:w}}}}function nd(t){return t.join("")}var lU=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:nd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nd(t.namespace)}`}),!0}catch(e){if(e instanceof cc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof cc&&n.status===409)return;throw n}}};function Ha(t){return t.join("")}var uU=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof cc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof cc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},cU=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=aU({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new lU(this.client,e),this.tableOps=new uU(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Rf=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var hU=class extends Rf{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},kg=class extends Rf{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const cv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),dU=()=>Response,Cg=t=>{if(Array.isArray(t))return t.map(n=>Cg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Cg(r)}),e},fU=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pU=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function hc(t){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(t)}function mU(t,e){if(hc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gU(t){var e=mU(t,"string");return hc(e)=="symbol"?e:e+""}function yU(t,e,n){return(e=gU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aT(Object(n),!0).forEach(function(r){yU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const bm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},vU=async(t,e,n)=>{t instanceof await dU()&&!n?.noResolveJson?t.json().then(r=>{const s=t.status||500,o=r?.statusCode||s+"";e(new hU(bm(r),s,o))}).catch(r=>{e(new kg(bm(r),r))}):e(new kg(bm(t),t))},_U=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||!r?s:(fU(r)?(s.headers=Ne({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,e?.duplex&&(s.duplex=e.duplex),Ne(Ne({},s),n))};async function Nc(t,e,n,r,s,o){return new Promise((l,c)=>{t(n,_U(e,r,s,o)).then(h=>{if(!h.ok)throw h;return r?.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>vU(h,c,r))})}async function dc(t,e,n,r){return Nc(t,"GET",e,n,r)}async function Jr(t,e,n,r,s){return Nc(t,"POST",e,r,s,n)}async function xg(t,e,n,r,s){return Nc(t,"PUT",e,r,s,n)}async function wU(t,e,n,r){return Nc(t,"HEAD",e,Ne(Ne({},n),{},{noResolveJson:!0}),r)}async function hv(t,e,n,r,s){return Nc(t,"DELETE",e,r,s,n)}var EU=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(bt(e))return{data:null,error:e};throw e}}};let rR;rR=Symbol.toStringTag;var TU=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[rR]="BlobDownloadBuilder",this.promise=null}asStream(){return new EU(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(bt(e))return{data:null,error:e};throw e}}};const SU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var IU=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=cv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let o;const l=Ne(Ne({},lT),r);let c=Ne(Ne({},s.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",s.encodeMetadata(h)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),h&&!o.has("metadata")&&o.append("metadata",s.encodeMetadata(h))):(o=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,h&&(c["x-metadata"]=s.toBase64(s.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),r?.headers&&(c=Ne(Ne({},c),r.headers));const p=s._removeEmptyFolders(e),m=s._getFinalPath(p),y=await(t=="PUT"?xg:Jr)(s.fetch,`${s.url}/object/${m}`,o,Ne({headers:c},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const o=s._removeEmptyFolders(t),l=s._getFinalPath(o),c=new URL(s.url+`/object/upload/sign/${l}`);c.searchParams.set("token",e);try{let h;const p=Ne({upsert:lT.upsert},r),m=Ne(Ne({},s.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",p.cacheControl)):(h=n,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType),{data:{path:o,fullPath:(await xg(s.fetch,c.toString(),h,{headers:m})).Key},error:null}}catch(h){if(s.shouldThrowOnError)throw h;if(bt(h))return{data:null,error:h};throw h}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=Ne({},n.headers);e?.upsert&&(s["x-upsert"]="true");const o=await Jr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(n.url+o.url),c=l.searchParams.get("token");if(!c)throw new Rf("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:c},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Jr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await Jr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),o=await Jr(r.fetch,`${r.url}/object/sign/${s}`,Ne({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await Jr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Ne(Ne({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),s=r?`?${r}`:"",o=this._getFinalPath(t),l=()=>dc(this.fetch,`${this.url}/${n}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new TU(l,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Cg(await dc(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await wU(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r)&&r instanceof kg){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const o=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}async remove(t){var e=this;try{return{data:await hv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=Ne(Ne(Ne({},SU),e),{},{prefix:t||""});return{data:await Jr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=Ne({},t);return{data:await Jr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const sR="2.89.0",iR={"X-Client-Info":`storage-js/${sR}`};var bU=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Ne(Ne({},iR),e),this.fetch=cv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await dc(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await dc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Jr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await xg(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await hv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},AU=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Ne(Ne({},iR),e),this.fetch=cv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await dc(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await hv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!pU(t))throw new Rf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new cU({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,o){const l=s[o];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(s,c),error:null}}catch(h){if(r)throw h;return{data:null,error:h}}}}})}};const dv={"X-Client-Info":`storage-js/${sR}`,"Content-Type":"application/json"};var oR=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function dr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Am=class extends oR{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},RU=class extends oR{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const fv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),PU=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},uT=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kU=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const l=o?.statusCode||o?.code||r+"";e(new Am(uT(o),r,l))}).catch(()=>{const o=r+"";e(new Am(s.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";e(new Am(s.statusText||`HTTP ${r} error`,r,o))}}else e(new RU(uT(t),t))},CU=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return r?(PU(r)?(s.headers=Ne({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,Ne(Ne({},s),n)):s};async function xU(t,e,n,r,s,o){return new Promise((l,c)=>{t(n,CU(e,r,s,o)).then(h=>{if(!h.ok)throw h;if(r?.noResolveJson)return h;const p=h.headers.get("content-type");return!p||!p.includes("application/json")?{}:h.json()}).then(h=>l(h)).catch(h=>kU(h,c,r))})}async function fr(t,e,n,r,s){return xU(t,"POST",e,r,s,n)}var DU=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Ne(Ne({},dv),e),this.fetch=fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await fr(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await fr(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await fr(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await fr(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}}},OU=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Ne(Ne({},dv),e),this.fetch=fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await fr(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await fr(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await fr(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await fr(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await fr(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}},NU=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Ne(Ne({},dv),e),this.fetch=fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await fr(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await fr(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await fr(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await fr(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}}},VU=class extends NU{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new LU(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},LU=class extends DU{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Ne(Ne({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Ne(Ne({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new MU(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},MU=class extends OU{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Ne(Ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Ne(Ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Ne(Ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Ne(Ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Ne(Ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},jU=class extends bU{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new IU(this.url,this.headers,t,this.fetch)}get vectors(){return new VU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new AU(this.url+"/iceberg",this.headers,this.fetch)}};const aR="2.89.0",sl=30*1e3,Dg=3,Rm=Dg*sl,UU="http://localhost:9999",FU="supabase.auth.token",$U={"X-Client-Info":`gotrue-js/${aR}`},Og="X-Supabase-Api-Version",lR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zU=600*1e3;class fc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class WU extends fc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function qU(t){return Ie(t)&&t.name==="AuthApiError"}class Bo extends fc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class di extends fc{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class cr extends di{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function HU(t){return Ie(t)&&t.name==="AuthSessionMissingError"}class Ka extends di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class rd extends di{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class sd extends di{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function KU(t){return Ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class cT extends di{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class GU extends di{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ng extends di{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Pm(t){return Ie(t)&&t.name==="AuthRetryableFetchError"}class hT extends di{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Vg extends di{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dT=` 	
\r=`.split(""),QU=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<dT.length;e+=1)t[dT[e].charCodeAt(0)]=-2;for(let e=0;e<Qd.length;e+=1)t[Qd[e].charCodeAt(0)]=e;return t})();function fT(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Qd[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Qd[r]),e.queuedBits-=6}}function uR(t,e,n){const r=QU[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function pT(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{XU(l,r,n)};for(let l=0;l<t.length;l+=1)uR(t.charCodeAt(l),s,o);return e.join("")}function JU(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function YU(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}JU(r,e)}}function XU(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function yl(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)uR(t.charCodeAt(s),n,r);return new Uint8Array(e)}function ZU(t){const e=[];return YU(t,n=>e.push(n)),new Uint8Array(e)}function Ho(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>fT(s,n,r)),fT(null,n,r),e.join("")}function eF(t){return Math.round(Date.now()/1e3)+t}function tF(){return Symbol("auth-callback")}const pn=()=>typeof window<"u"&&typeof document<"u",Vo={tested:!1,writable:!1},cR=()=>{if(!pn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vo.tested)return Vo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Vo.tested=!0,Vo.writable=!0}catch{Vo.tested=!0,Vo.writable=!1}return Vo.writable};function nF(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const hR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),rF=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",il=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Lo=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},fn=async(t,e)=>{await t.removeItem(e)};class Pf{constructor(){this.promise=new Pf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Pf.promiseConstructor=Promise;function km(t){const e=t.split(".");if(e.length!==3)throw new Vg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!BU.test(e[r]))throw new Vg("JWT not in base64url format");return{header:JSON.parse(pT(e[0])),payload:JSON.parse(pT(e[1])),signature:yl(e[2]),raw:{header:e[0],payload:e[1]}}}async function sF(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function iF(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function oF(t){return("0"+t.toString(16)).substr(-2)}function aF(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,oF).join("")}async function lF(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function uF(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await lF(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ga(t,e,n=!1){const r=aF();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await il(t,`${e}-code-verifier`,s);const o=await uF(r);return[o,r===o?"plain":"s256"]}const cF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hF(t){const e=t.headers.get(Og);if(!e||!e.match(cF))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dF(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function fF(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qa(t){if(!pF.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Cm(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mF(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function mT(t){return JSON.parse(JSON.stringify(t))}const Uo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gF=[502,503,504];async function gT(t){var e;if(!rF(t))throw new Ng(Uo(t),0);if(gF.includes(t.status))throw new Ng(Uo(t),t.status);let n;try{n=await t.json()}catch(o){throw new Bo(Uo(o),o)}let r;const s=hF(t);if(s&&s.getTime()>=lR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new hT(Uo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new cr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new hT(Uo(n),t.status,n.weak_password.reasons);throw new WU(Uo(n),t.status||500,r)}const yF=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Oe(t,e,n,r){var s;const o=Object.assign({},r?.headers);o[Og]||(o[Og]=lR["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await vF(t,e,n+c,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(h):{data:Object.assign({},h),error:null}}async function vF(t,e,n,r,s,o){const l=yF(e,r,s,o);let c;try{c=await t(n,Object.assign({},l))}catch(h){throw console.error(h),new Ng(Uo(h),0)}if(c.ok||await gT(c),r?.noResolveJson)return c;try{return await c.json()}catch(h){await gT(h)}}function Gr(t){var e;let n=null;EF(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=eF(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function yT(t){const e=Gr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Hi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _F(t){return{data:t,error:null}}function wF(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,l=Af(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},h=Object.assign({},l);return{data:{properties:c,user:h},error:null}}function vT(t){return t}function EF(t){return t.access_token&&t.refresh_token&&t.expires_in}const xm=["global","local","others"];class TF{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=hR(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=xm[0]){if(xm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xm.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Hi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Af(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:wF,redirectTo:n?.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Hi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,l,c,h;try{const p={nextPage:null,lastPage:0,total:0},m=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:vT});if(m.error)throw m.error;const y=await m.json(),w=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(h=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return S.length>0&&(S.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(A.split(";")[1].split("=")[1]);p[`${R}Page`]=C}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Ie(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Qa(e);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Hi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Qa(e);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Hi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Qa(e);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Hi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Qa(e.userId);try{const{data:n,error:r}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Qa(e.userId),Qa(e.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,o,l,c,h;try{const p={nextPage:null,lastPage:0,total:0},m=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:vT});if(m.error)throw m.error;const y=await m.json(),w=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(h=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return S.length>0&&(S.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(A.split(";")[1].split("=")[1]);p[`${R}Page`]=C}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Ie(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}function _T(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ja={debug:!!(globalThis&&cR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dR extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class SF extends dR{}async function IF(t,e,n){Ja.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ja.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ja.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ja.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ja.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new SF(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ja.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function bF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function fR(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function AF(t){return parseInt(t,16)}function RF(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function PF(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:l,notBefore:c,requestId:h,resources:p,scheme:m,uri:y,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const S=fR(t.address),A=m?`${m}://${r}`:r,C=t.statement?`${t.statement}
`:"",R=`${A} wants you to sign in with your Ethereum account:
${S}

${C}`;let O=`URI: ${y}
Version: ${w}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(s&&(O+=`
Expiration Time: ${s.toISOString()}`),c&&(O+=`
Not Before: ${c.toISOString()}`),h&&(O+=`
Request ID: ${h}`),p){let U=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);U+=`
- ${N}`}O+=U}return`${R}
${O}`}class qt extends Error{constructor({message:e,code:n,cause:r,name:s}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Jd extends qt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function kF({error:t,options:e}){var n,r,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new qt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new qt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new qt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new qt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new qt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new qt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new qt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new qt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(pR(l)){if(o.rp.id!==l)return new qt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new qt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function CF({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new qt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new qt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(pR(r)){if(n.rpId!==r)return new qt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class xF{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const DF=new xF;function OF(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Af(t,["challenge","user","excludeCredentials"]),o=yl(e).buffer,l=Object.assign(Object.assign({},n),{id:yl(n.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:o,user:l});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const p=r[h];c.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:yl(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function NF(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Af(t,["challenge","allowCredentials"]),s=yl(e).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},c),{id:yl(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function VF(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ho(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ho(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function LF(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ho(new Uint8Array(s.authenticatorData)),clientDataJSON:Ho(new Uint8Array(s.clientDataJSON)),signature:Ho(new Uint8Array(s.signature)),userHandle:s.userHandle?Ho(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function pR(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function wT(){var t,e;return!!(pn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function MF(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Jd("Browser returned unexpected credential type",e)}:{data:null,error:new Jd("Empty credential response",e)}}catch(e){return{data:null,error:kF({error:e,options:t})}}}async function jF(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Jd("Browser returned unexpected credential type",e)}:{data:null,error:new Jd("Empty credential response",e)}}catch(e){return{data:null,error:CF({error:e,options:t})}}}const UF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},FF={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Yd(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const o in s){const l=s[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(e(l)){const c=r[o];e(c)?r[o]=Yd(c,l):r[o]=Yd(l)}else r[o]=l}return r}function $F(t,e){return Yd(UF,t,e||{})}function BF(t,e){return Yd(FF,t,e||{})}class zF{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},o){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:c};const h=s??DF.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=$F(l.webauthn.credential_options.publicKey,o?.create),{data:m,error:y}=await MF({publicKey:p,signal:h});return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}case"request":{const p=BF(l.webauthn.credential_options.publicKey,o?.request),{data:m,error:y}=await jF(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:h}));return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}}}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Bo("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!n)return{data:null,error:new fc("rpId is required for WebAuthn authentication")};try{if(!wT())return{data:null,error:new Bo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:o});if(!l)return{data:null,error:c};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Bo("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!n)return{data:null,error:new fc("rpId is required for WebAuthn registration")};try{if(!wT())return{data:null,error:new Bo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(m=>{var y;return(y=m.data)===null||y===void 0?void 0:y.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:c};const{data:h,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:o});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Bo("Unexpected error in register",l)}}}}bF();const WF={url:UU,storageKey:FU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$U,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ET(t,e,n){return await n()}const Ya={};class pc{get jwks(){var e,n;return(n=(e=Ya[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ya[this.storageKey]=Object.assign(Object.assign({},Ya[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ya[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ya[this.storageKey]=Object.assign(Object.assign({},Ya[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},WF),e);if(this.storageKey=o.storageKey,this.instanceID=(n=pc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,pc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&pn()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new TF({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=hR(o.fetch),this.lock=o.lock||ET,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&pn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=IF:this.lock=ET,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new zF(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:cR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_T(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=_T(this.memoryStorage)),pn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${aR}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(pn()&&(n=nF(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),pn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),KU(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?this._returnResult({error:n}):this._returnResult({error:new Bo("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Gr}),{data:l,error:c}=o;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(Ie(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:m,password:y,options:w}=e;let S=null,A=null;this.flowType==="pkce"&&([S,A]=await Ga(this.storage,this.storageKey)),o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:m,password:y,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:S,code_challenge_method:A},xform:Gr})}else if("phone"in e){const{phone:m,password:y,options:w}=e;o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:y,data:(r=w?.data)!==null&&r!==void 0?r:{},channel:(s=w?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Gr})}else throw new rd("You must provide either an email or phone number and a password");const{data:l,error:c}=o;if(c||!l)return await fn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ie(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:c}=e;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:yT})}else if("phone"in e){const{phone:o,password:l,options:c}=e;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:yT})}else throw new rd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const o=new Ka;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,o,l,c,h,p,m,y,w;let S,A;if("message"in e)S=e.message,A=e.signature;else{const{chain:C,wallet:R,statement:O,options:U}=e;let N;if(pn())if(typeof R=="object")N=R;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")N=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=R}const K=new URL((n=U?.url)!==null&&n!==void 0?n:window.location.href),H=await N.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const X=fR(H[0]);let k=(r=U?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!k){const P=await N.request({method:"eth_chainId"});k=AF(P)}const b={domain:K.host,address:X,statement:O,uri:K.href,version:"1",chainId:k,nonce:(s=U?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=U?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(h=U?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=U?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(m=U?.signInWithEthereum)===null||m===void 0?void 0:m.resources};S=PF(b),A=await N.request({method:"personal_sign",params:[RF(S),X]})}try{const{data:C,error:R}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:A},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Gr});if(R)throw R;if(!C||!C.session||!C.user){const O=new Ka;return this._returnResult({data:{user:null,session:null},error:O})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:R})}catch(C){if(Ie(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var n,r,s,o,l,c,h,p,m,y,w,S;let A,C;if("message"in e)A=e.message,C=e.signature;else{const{chain:R,wallet:O,statement:U,options:N}=e;let K;if(pn())if(typeof O=="object")K=O;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))K=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=O}const H=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in K&&K.signIn){const X=await K.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),U?{statement:U}:null));let k;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")k=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)k=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)A=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),C=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in K)||typeof K.signMessage!="function"||!("publicKey"in K)||typeof K!="object"||!K.publicKey||!("toBase58"in K.publicKey)||typeof K.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${H.host} wants you to sign in with your Solana account:`,K.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(s=(r=N?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=N?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((c=N?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((h=N?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((y=(m=N?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||y===void 0)&&y.length?["Resources",...N.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const X=await K.signMessage(new TextEncoder().encode(A),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=X}}try{const{data:R,error:O}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:Ho(C)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Gr});if(O)throw O;if(!R||!R.session||!R.user){const U=new Ka;return this._returnResult({data:{user:null,session:null},error:U})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:O})}catch(R){if(Ie(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const n=await Lo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new GU;const{data:o,error:l}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gr});if(await fn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const c=new Ka;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ie(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:l}=e,c=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Gr}),{data:h,error:p}=c;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){const m=new Ka;return this._returnResult({data:{user:null,session:null},error:m})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:p})}catch(n){if(Ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,o,l;try{if("email"in e){const{email:c,options:h}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Ga(this.storage,this.storageKey));const{error:y}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=h?.data)!==null&&n!==void 0?n:{},create_user:(r=h?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:c,options:h}=e,{data:p,error:m}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=h?.data)!==null&&s!==void 0?s:{},create_user:(o=h?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(l=h?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:m})}throw new rd("You must provide either an email or phone number.")}catch(c){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ie(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Gr});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,p=l.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(s){if(Ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,o,l;try{let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Ga(this.storage,this.storageKey));const p=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:_F});return!((o=p.data)===null||o===void 0)&&o.url&&pn()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(c){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ie(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new cr;const{error:s}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Ie(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:c}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:c})}throw new rd("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Lo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Rm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Lo(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=Cm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=mF(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Hi}):await this._useSession(async n=>{var r,s,o;const{data:l,error:c}=n;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cr}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Hi})})}catch(n){if(Ie(n))return HU(n)&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new cr;const l=s.session;let c=null,h=null;this.flowType==="pkce"&&e.email!=null&&([c,h]=await Ga(this.storage,this.storageKey));const{data:p,error:m}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:h}),jwt:l.access_token,xform:Hi});if(m)throw m;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ie(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new cr;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:l}=km(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{data:c,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Ie(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:c}=n;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new cr;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!pn())throw new sd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new sd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new cT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new cT("No code detected.");const{data:U,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:c,expires_at:h,token_type:p}=e;if(!o||!c||!l||!p)throw new sd("No session defined in URL");const m=Math.round(Date.now()/1e3),y=parseInt(c);let w=m+y;h&&(w=parseInt(h));const S=w-m;S*1e3<=sl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${y}s`);const A=w-y;m-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,w,m):m-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,w,m);const{data:C,error:R}=await this._getUser(o);if(R)throw R;const O={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:y,expires_at:w,refresh_token:l,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:O,redirectType:e.type},error:null})}catch(r){if(Ie(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Lo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({error:o});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(qU(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=tF(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ga(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ie(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var l,c,h,p,m;const{data:y,error:w}=o;if(w)throw w;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",S,{headers:this.headers,jwt:(m=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return pn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(Ie(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:o}}=n;if(s)throw s;const{options:l,provider:c,token:h,access_token:p,nonce:m}=e,y=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:h,access_token:p,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Gr}),{data:w,error:S}=y;return S?this._returnResult({data:{user:null,session:null},error:S}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Ka}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:S}))}catch(s){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)throw l;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await iF(async s=>(s>0&&await sF(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gr})),(s,o)=>{const l=200*Math.pow(2,s);return o&&Pm(o)&&Date.now()+l-r<sl})}catch(r){if(this._debug(n,"error",r),Ie(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),pn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Lo(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Lo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await il(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l?.user)!==null&&e!==void 0?e:Cm()}else if(s&&!s.user&&!s.user){const l=await Lo(this.storage,this.storageKey+"-user");l&&l?.user?(s.user=l.user,await fn(this.storage,this.storageKey+"-user"),await il(this.storage,this.storageKey,s)):s.user=Cm()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Rm;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Rm}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Pm(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(s.access_token);!c&&l?.user?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new cr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Pf;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new cr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(s,"error",o),Ie(o)){const l={data:null,error:o};return Pm(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(h){o.push(h)}});if(await Promise.all(l),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await fn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await il(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=mT(s);await il(this.storage,this.storageKey,o)}else{const s=mT(n);await il(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await fn(this.storage,this.storageKey),await fn(this.storage,this.storageKey+"-code-verifier"),await fn(this.storage,this.storageKey+"-user"),this.userStorage&&await fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),sl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/sl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${sl}ms, refresh threshold is ${Dg} ticks`),s<=Dg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dR)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Ga(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?this._returnResult({data:null,error:o}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&h.type==="totp"&&(!((s=h?.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?VF(e.webauthn.credential_response):LF(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:h}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:h}))})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:OF(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:NF(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n?.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=km(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const p=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new cr})})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new cr});const l=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&pn()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new cr});const l=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&pn()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new cr})})}catch(e){if(Ie(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new cr})})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(c=>c.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+zU>s)return r;const{data:o,error:l}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:S,error:A}=await this.getSession();if(A||!S.session)return this._returnResult({data:null,error:A});r=S.session.access_token}const{header:s,payload:o,signature:l,raw:{header:c,payload:h}}=km(r);n?.allowExpired||dF(o.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:S}=await this.getUser(r);if(S)throw S;return{data:{claims:o,header:s,signature:l},error:null}}const m=fF(s.alg),y=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,y,l,ZU(`${c}.${h}`)))throw new Vg("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}}pc.nextInstanceID={};const qF=pc,HF="2.89.0";let ju="";typeof Deno<"u"?ju="deno":typeof document<"u"?ju="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ju="react-native":ju="node";const KF={"X-Client-Info":`supabase-js-${ju}/${HF}`},GF={headers:KF},QF={schema:"public"},JF={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},YF={};function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(t)}function XF(t,e){if(mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZF(t){var e=XF(t,"string");return mc(e)=="symbol"?e:e+""}function e4(t,e,n){return(e=ZF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Dt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TT(Object(n),!0).forEach(function(r){e4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const t4=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),n4=()=>Headers,r4=(t,e,n)=>{const r=t4(n),s=n4();return async(o,l)=>{var c;const h=(c=await e())!==null&&c!==void 0?c:t;let p=new s(l?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),r(o,Dt(Dt({},l),{},{headers:p}))}};function s4(t){return t.endsWith("/")?t:t+"/"}function i4(t,e){var n,r;const{db:s,auth:o,realtime:l,global:c}=t,{db:h,auth:p,realtime:m,global:y}=e,w={db:Dt(Dt({},h),s),auth:Dt(Dt({},p),o),realtime:Dt(Dt({},m),l),storage:{},global:Dt(Dt(Dt({},y),c),{},{headers:Dt(Dt({},(n=y?.headers)!==null&&n!==void 0?n:{}),(r=c?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function o4(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(s4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var a4=class extends qF{constructor(t){super(t)}},l4=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const o=o4(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:QF,realtime:YF,auth:Dt(Dt({},JF),{},{storageKey:l}),global:GF},h=i4(n??{},c);if(this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=h.auth)!==null&&p!==void 0?p:{},this.headers,h.global.fetch)}this.fetch=r4(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Dt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new $j(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new jU(this.storageUrl.href,this.headers,this.fetch,n?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Lj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:o,flowType:l,lock:c,debug:h,throwOnError:p},m,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new a4({url:this.authUrl.href,headers:Dt(Dt({},w),m),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:l,lock:c,debug:h,throwOnError:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new sU(this.realtimeUrl.href,Dt(Dt({},t),{},{params:Dt(Dt({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const u4=(t,e,n)=>new l4(t,e,n);function c4(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}c4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const h4="https://sjkmtixbwzyariqhaasl.supabase.co",d4="sb_publishable_5yRDnLS-JjfhwenmCLFPzA_Wasb6UmF",ct=u4(h4,d4),mR=V.createContext(void 0),Ln="demo-company";function f4(t,e,n,r,s,o,l){const c=[],h=new Date(r),p=new Date(s),m=new Date;let y=1;l==="quarterly"&&(y=3),l==="yearly"&&(y=12);let w=new Date(h);for(;w<=p;){const S=w.toISOString().split("T")[0],A=new Date(S)<m;c.push({contractId:t,tenantName:e,unitNo:n,dueDate:S,amount:o,status:A?"overdue":"due"}),w.setMonth(w.getMonth()+y)}return c}function p4(t){return{id:t.id,companyId:t.company_id,name:t.name,city:t.city,address:t.address,type:t.type,description:t.description,latitude:t.latitude,longitude:t.longitude,notes:t.notes,images:t.images||[],createdAt:t.created_at}}function m4(t){return{id:t.id,companyId:t.company_id,propertyId:t.property_id,propertyName:t.property_name,unitNo:t.unit_no,type:t.type,floor:t.floor,bedrooms:t.bedrooms,bathrooms:t.bathrooms,areaSqm:t.area_sqm,description:t.description,rentAmount:t.rent_amount,status:t.status,images:t.images||[],createdAt:t.created_at}}function g4(t){return{id:t.id,companyId:t.company_id,fullName:t.full_name,nationalId:t.national_id,phone:t.phone,email:t.email,createdAt:t.created_at}}function y4(t){return{id:t.id,companyId:t.company_id,propertyId:t.property_id,propertyName:t.property_name,unitId:t.unit_id,unitNo:t.unit_no,tenantId:t.tenant_id,tenantName:t.tenant_name,startDate:t.start_date,endDate:t.end_date,rentAmount:t.rent_amount,paymentFrequency:t.payment_frequency,depositAmount:t.deposit_amount,notes:t.notes,status:t.status,createdAt:t.created_at}}function v4(t){return{id:t.id,companyId:t.company_id,contractId:t.contract_id,tenantName:t.tenant_name,unitNo:t.unit_no,dueDate:t.due_date,amount:t.amount,status:t.status,paidAt:t.paid_at,method:t.method,reference:t.reference,createdAt:t.created_at}}function _4(t){return{id:t.id,companyId:t.company_id,propertyId:t.property_id,propertyName:t.property_name,unitId:t.unit_id,unitNo:t.unit_no,title:t.title,description:t.description,priority:t.priority,status:t.status,cost:t.cost,requestedBy:t.requested_by,assignedTo:t.assigned_to,createdAt:t.created_at}}const w4=[{module:"properties",actions:["view","create","edit","delete"]},{module:"units",actions:["view","create","edit","delete"]},{module:"tenants",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view","create","edit","delete"]},{module:"payments",actions:["view","create","edit","delete"]},{module:"maintenance",actions:["view","create","edit","delete"]},{module:"reports",actions:["view"]},{module:"settings",actions:["view","edit"]},{module:"sales",actions:["view","create","edit","delete"]},{module:"employees",actions:["view","create","edit","delete"]},{module:"tasks",actions:["view","create","edit","delete"]}],E4=[{id:"emp-1",companyId:Ln,fullName:"  ",email:"admin@arkan.sa",password:"Admin@2024",phone:"0501234567",role:"admin",department:"",joinDate:"2023-01-01",status:"active",permissions:[...w4],isActive:!0,createdAt:"2023-01-01"}],T4=[],S4=[],Xa={employees:"arkan_employees_data",tasks:"arkan_tasks_data",notifications:"arkan_notifications_data"};function Dm(t,e){try{const n=localStorage.getItem(t);if(n)return JSON.parse(n)}catch(n){console.error(`Error loading ${t} from localStorage:`,n)}return e}function Om(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error(`Error saving ${t} to localStorage:`,n)}}function I4({children:t}){const[e,n]=V.useState([]),[r,s]=V.useState([]),[o,l]=V.useState([]),[c,h]=V.useState([]),[p,m]=V.useState([]),[y,w]=V.useState([]),[S,A]=V.useState(()=>Dm(Xa.employees,E4)),[C,R]=V.useState(()=>Dm(Xa.tasks,T4)),[O,U]=V.useState(()=>Dm(Xa.notifications,S4)),[N,K]=V.useState(!0);V.useEffect(()=>{S.length>0&&Om(Xa.employees,S)},[S]),V.useEffect(()=>{Om(Xa.tasks,C)},[C]),V.useEffect(()=>{Om(Xa.notifications,O)},[O]);const H=V.useCallback(async()=>{K(!0);try{const{data:Z}=await ct.from("properties").select("*").eq("company_id",Ln);Z&&n(Z.map(p4));const{data:Y}=await ct.from("units").select("*").eq("company_id",Ln);Y&&s(Y.map(m4));const{data:he}=await ct.from("tenants").select("*").eq("company_id",Ln);he&&l(he.map(g4));const{data:xe}=await ct.from("contracts").select("*").eq("company_id",Ln);xe&&h(xe.map(y4));const{data:Ze}=await ct.from("payments").select("*").eq("company_id",Ln);Ze&&m(Ze.map(v4));const{data:Tt}=await ct.from("maintenance_requests").select("*").eq("company_id",Ln);Tt&&w(Tt.map(_4))}catch(Z){console.error("Error fetching data:",Z)}finally{K(!1)}},[]);V.useEffect(()=>{H()},[H]);const X=V.useCallback(()=>{const Z=r.length,Y=r.filter(rt=>rt.status==="vacant").length,he=r.filter(rt=>rt.status==="rented").length,xe=r.filter(rt=>rt.status==="maintenance").length,Ze=Z>0?he/Z*100:0,Qe=c.filter(rt=>rt.status==="active").reduce((rt,Vt)=>Vt.paymentFrequency==="monthly"?rt+Vt.rentAmount:Vt.paymentFrequency==="quarterly"?rt+Vt.rentAmount/3:Vt.paymentFrequency==="yearly"?rt+Vt.rentAmount/12:rt,0),ht=p.filter(rt=>rt.status==="overdue"),xn=ht.reduce((rt,Vt)=>rt+Vt.amount,0),Nt=ht.length,_n=new Date;_n.setDate(_n.getDate()+30);const fi=c.filter(rt=>{const Vt=new Date(rt.endDate);return rt.status==="active"&&Vt<=_n}).length;return{totalUnits:Z,vacantUnits:Y,rentedUnits:he,maintenanceUnits:xe,occupancyRate:Ze,expectedMonthlyIncome:Qe,overdueAmount:xn,overdueCount:Nt,contractsExpiringSoon:fi}},[r,c,p]),k=async Z=>{const{error:Y}=await ct.from("properties").insert({company_id:Ln,name:Z.name,city:Z.city,address:Z.address,type:Z.type,description:Z.description,notes:Z.notes,images:Z.images});Y||await H()},b=async(Z,Y)=>{const he={};Y.name&&(he.name=Y.name),Y.city&&(he.city=Y.city),Y.address&&(he.address=Y.address),Y.type&&(he.type=Y.type),Y.description!==void 0&&(he.description=Y.description),Y.notes!==void 0&&(he.notes=Y.notes),Y.images&&(he.images=Y.images);const{error:xe}=await ct.from("properties").update(he).eq("id",Z);xe||await H()},P=async Z=>{const{error:Y}=await ct.from("properties").delete().eq("id",Z);Y||await H()},L=async Z=>{const{error:Y}=await ct.from("units").insert({company_id:Ln,property_id:Z.propertyId,property_name:Z.propertyName,unit_no:Z.unitNo,type:Z.type,floor:Z.floor,bedrooms:Z.bedrooms,bathrooms:Z.bathrooms,area_sqm:Z.areaSqm,description:Z.description,rent_amount:Z.rentAmount,status:Z.status||"vacant",images:Z.images});Y||await H()},M=async(Z,Y)=>{const he={};Y.propertyId&&(he.property_id=Y.propertyId),Y.propertyName&&(he.property_name=Y.propertyName),Y.unitNo&&(he.unit_no=Y.unitNo),Y.type&&(he.type=Y.type),Y.floor!==void 0&&(he.floor=Y.floor),Y.bedrooms!==void 0&&(he.bedrooms=Y.bedrooms),Y.bathrooms!==void 0&&(he.bathrooms=Y.bathrooms),Y.areaSqm!==void 0&&(he.area_sqm=Y.areaSqm),Y.description!==void 0&&(he.description=Y.description),Y.rentAmount!==void 0&&(he.rent_amount=Y.rentAmount),Y.status&&(he.status=Y.status),Y.images&&(he.images=Y.images);const{error:xe}=await ct.from("units").update(he).eq("id",Z);xe||await H()},B=async Z=>{const{error:Y}=await ct.from("units").delete().eq("id",Z);Y||await H()},x=async Z=>{const{error:Y}=await ct.from("tenants").insert({company_id:Ln,full_name:Z.fullName,national_id:Z.nationalId,phone:Z.phone,email:Z.email});Y||await H()},We=async(Z,Y)=>{const he={};Y.fullName&&(he.full_name=Y.fullName),Y.nationalId!==void 0&&(he.national_id=Y.nationalId),Y.phone&&(he.phone=Y.phone),Y.email!==void 0&&(he.email=Y.email);const{error:xe}=await ct.from("tenants").update(he).eq("id",Z);xe||await H()},it=async Z=>{const{error:Y}=await ct.from("tenants").delete().eq("id",Z);Y||await H()},je=async Z=>{const{data:Y,error:he}=await ct.from("contracts").insert({company_id:Ln,property_id:Z.propertyId,property_name:Z.propertyName,unit_id:Z.unitId,unit_no:Z.unitNo,tenant_id:Z.tenantId,tenant_name:Z.tenantName,start_date:Z.startDate,end_date:Z.endDate,rent_amount:Z.rentAmount,payment_frequency:Z.paymentFrequency,deposit_amount:Z.depositAmount,notes:Z.notes,status:Z.status||"active"}).select().single();if(!he&&Y){const xe=f4(Y.id,Z.tenantName,Z.unitNo,Z.startDate,Z.endDate,Z.rentAmount,Z.paymentFrequency);for(const Ze of xe)await ct.from("payments").insert({company_id:Ln,contract_id:Ze.contractId,tenant_name:Ze.tenantName,unit_no:Ze.unitNo,due_date:Ze.dueDate,amount:Ze.amount,status:Ze.status});await ct.from("units").update({status:"rented"}).eq("id",Z.unitId),await H()}},_e=async(Z,Y)=>{const he={};Y.status&&(he.status=Y.status),Y.notes!==void 0&&(he.notes=Y.notes),Y.rentAmount!==void 0&&(he.rent_amount=Y.rentAmount);const{error:xe}=await ct.from("contracts").update(he).eq("id",Z);if(!xe&&Y.status==="ended"){const Ze=c.find(Tt=>Tt.id===Z);Ze&&await ct.from("units").update({status:"vacant"}).eq("id",Ze.unitId)}xe||await H()},re=async Z=>{const Y=c.find(xe=>xe.id===Z);await ct.from("payments").delete().eq("contract_id",Z);const{error:he}=await ct.from("contracts").delete().eq("id",Z);!he&&Y&&(await ct.from("units").update({status:"vacant"}).eq("id",Y.unitId),await H())},fe=async(Z,Y,he)=>{const{error:xe}=await ct.from("payments").update({status:"paid",paid_at:new Date().toISOString(),method:Y,reference:he||null}).eq("id",Z);xe||await H()},le=async Z=>{const{error:Y}=await ct.from("maintenance_requests").insert({company_id:Ln,property_id:Z.propertyId,property_name:Z.propertyName,unit_id:Z.unitId,unit_no:Z.unitNo,title:Z.title,description:Z.description,priority:Z.priority,status:Z.status||"new",cost:Z.cost||0,requested_by:Z.requestedBy,assigned_to:Z.assignedTo});Y||await H()},$=async(Z,Y)=>{const he={};Y.title&&(he.title=Y.title),Y.description&&(he.description=Y.description),Y.priority&&(he.priority=Y.priority),Y.status&&(he.status=Y.status),Y.cost!==void 0&&(he.cost=Y.cost),Y.assignedTo!==void 0&&(he.assigned_to=Y.assignedTo);const{error:xe}=await ct.from("maintenance_requests").update(he).eq("id",Z);xe||await H()},ee=async Z=>{const{error:Y}=await ct.from("maintenance_requests").delete().eq("id",Z);Y||await H()},de=Z=>{const Y={...Z,id:`emp-${Date.now()}`,companyId:Ln,createdAt:new Date().toISOString()};A(he=>[...he,Y])},ge=(Z,Y)=>{A(he=>he.map(xe=>xe.id===Z?{...xe,...Y}:xe))},Ee=Z=>{A(Y=>Y.filter(he=>he.id!==Z))},Ce=Z=>{const Y=new Date().toISOString(),he={...Z,id:`task-${Date.now()}`,companyId:Ln,comments:[],history:[{id:`h-${Date.now()}`,action:"created",createdBy:Z.createdBy,createdByName:Z.createdByName,createdAt:Y}],createdAt:Y,updatedAt:Y};R(xe=>[...xe,he])},Be=(Z,Y)=>{R(he=>he.map(xe=>xe.id===Z?{...xe,...Y,updatedAt:new Date().toISOString()}:xe))},Te=Z=>{R(Y=>Y.filter(he=>he.id!==Z))},qe=(Z,Y,he,xe)=>{R(Ze=>Ze.map(Tt=>{if(Tt.id===Z){const Qe=new Date().toISOString();return{...Tt,assignedTo:Y,assignedToName:he,history:[...Tt.history,{id:`h-${Date.now()}`,action:"transferred",fromEmployee:Tt.assignedTo,fromEmployeeName:Tt.assignedToName,toEmployee:Y,toEmployeeName:he,note:xe,createdBy:Tt.assignedTo,createdByName:Tt.assignedToName,createdAt:Qe}],updatedAt:Qe}}return Tt}))},kt=(Z,Y)=>{R(he=>he.map(xe=>{if(xe.id===Z){const Ze=new Date().toISOString();return{...xe,status:Y,history:[...xe.history,{id:`h-${Date.now()}`,action:"status_changed",fromStatus:xe.status,toStatus:Y,createdBy:xe.assignedTo,createdByName:xe.assignedToName,createdAt:Ze}],updatedAt:Ze}}return xe}))},Yn=Z=>{U(Y=>Y.map(he=>he.id===Z?{...he,read:!0}:he))},Un=()=>{U(Z=>Z.map(Y=>({...Y,read:!0})))};return J.jsx(mR.Provider,{value:{properties:e,units:r,tenants:o,contracts:c,payments:p,maintenanceRequests:y,employees:S,tasks:C,notifications:O,loading:N,getKPI:X,refreshData:H,addProperty:k,updateProperty:b,deleteProperty:P,addUnit:L,updateUnit:M,deleteUnit:B,addTenant:x,updateTenant:We,deleteTenant:it,addContract:je,updateContract:_e,deleteContract:re,recordPayment:fe,addMaintenanceRequest:le,updateMaintenanceRequest:$,deleteMaintenanceRequest:ee,addEmployee:de,updateEmployee:ge,deleteEmployee:Ee,addTask:Ce,updateTask:Be,deleteTask:Te,transferTask:qe,updateTaskStatus:kt,markNotificationRead:Yn,markAllNotificationsRead:Un},children:t})}function e9(){const t=V.useContext(mR);if(!t)throw new Error("useData must be used within a DataProvider");return t}const gR=V.createContext({});function b4(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const pv=typeof window<"u",A4=pv?V.useLayoutEffect:V.useEffect,mv=V.createContext(null);function gv(t,e){t.indexOf(e)===-1&&t.push(e)}function yv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ui=(t,e,n)=>n>e?e:n<t?t:n;let vv=()=>{};const ci={},yR=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function vR(t){return typeof t=="object"&&t!==null}const _R=t=>/^0[^.\s]+$/u.test(t);function _v(t){let e;return()=>(e===void 0&&(e=t()),e)}const xr=t=>t,R4=(t,e)=>n=>e(t(n)),Vc=(...t)=>t.reduce(R4),gc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class wv{constructor(){this.subscriptions=[]}add(e){return gv(this.subscriptions,e),()=>yv(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Rs=t=>t*1e3,kr=t=>t/1e3;function wR(t,e){return e?t*(1e3/e):0}const ER=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,P4=1e-7,k4=12;function C4(t,e,n,r,s){let o,l,c=0;do l=e+(n-e)/2,o=ER(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>P4&&++c<k4);return l}function Lc(t,e,n,r){if(t===e&&n===r)return xr;const s=o=>C4(o,0,1,t,n);return o=>o===0||o===1?o:ER(s(o),e,r)}const TR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,SR=t=>e=>1-t(1-e),IR=Lc(.33,1.53,.69,.99),Ev=SR(IR),bR=TR(Ev),AR=t=>(t*=2)<1?.5*Ev(t):.5*(2-Math.pow(2,-10*(t-1))),Tv=t=>1-Math.sin(Math.acos(t)),RR=SR(Tv),PR=TR(Tv),x4=Lc(.42,0,1,1),D4=Lc(0,0,.58,1),kR=Lc(.42,0,.58,1),O4=t=>Array.isArray(t)&&typeof t[0]!="number",CR=t=>Array.isArray(t)&&typeof t[0]=="number",N4={linear:xr,easeIn:x4,easeInOut:kR,easeOut:D4,circIn:Tv,circInOut:PR,circOut:RR,backIn:Ev,backInOut:bR,backOut:IR,anticipate:AR},V4=t=>typeof t=="string",ST=t=>{if(CR(t)){vv(t.length===4);const[e,n,r,s]=t;return Lc(e,n,r,s)}else if(V4(t))return N4[t];return t},id=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function L4(t,e){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(m){l.has(m)&&(p.schedule(m),t()),m(c)}const p={schedule:(m,y=!1,w=!1)=>{const A=w&&s?n:r;return y&&l.add(m),A.has(m)||A.add(m),m},cancel:m=>{r.delete(m),l.delete(m)},process:m=>{if(c=m,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(h),n.clear(),s=!1,o&&(o=!1,p.process(m))}};return p}const M4=40;function xR(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=id.reduce((N,K)=>(N[K]=L4(o),N),{}),{setup:c,read:h,resolveKeyframes:p,preUpdate:m,update:y,preRender:w,render:S,postRender:A}=l,C=()=>{const N=ci.useManualTiming?s.timestamp:performance.now();n=!1,ci.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(N-s.timestamp,M4),1)),s.timestamp=N,s.isProcessing=!0,c.process(s),h.process(s),p.process(s),m.process(s),y.process(s),w.process(s),S.process(s),A.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(C))},R=()=>{n=!0,r=!0,s.isProcessing||t(C)};return{schedule:id.reduce((N,K)=>{const H=l[K];return N[K]=(X,k=!1,b=!1)=>(n||R(),H.schedule(X,k,b)),N},{}),cancel:N=>{for(let K=0;K<id.length;K++)l[id[K]].cancel(N)},state:s,steps:l}}const{schedule:wt,cancel:io,state:mn,steps:Nm}=xR(typeof requestAnimationFrame<"u"?requestAnimationFrame:xr,!0);let Td;function j4(){Td=void 0}const Jn={now:()=>(Td===void 0&&Jn.set(mn.isProcessing||ci.useManualTiming?mn.timestamp:performance.now()),Td),set:t=>{Td=t,queueMicrotask(j4)}},DR=t=>e=>typeof e=="string"&&e.startsWith(t),Sv=DR("--"),U4=DR("var(--"),Iv=t=>U4(t)?F4.test(t.split("/*")[0].trim()):!1,F4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yc={...jl,transform:t=>ui(0,1,t)},od={...jl,default:1},Qu=t=>Math.round(t*1e5)/1e5,bv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $4(t){return t==null}const B4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Av=(t,e)=>n=>!!(typeof n=="string"&&B4.test(n)&&n.startsWith(t)||e&&!$4(n)&&Object.prototype.hasOwnProperty.call(n,e)),OR=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(bv);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},z4=t=>ui(0,255,t),Vm={...jl,transform:t=>Math.round(z4(t))},Ko={test:Av("rgb","red"),parse:OR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Vm.transform(t)+", "+Vm.transform(e)+", "+Vm.transform(n)+", "+Qu(yc.transform(r))+")"};function W4(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Lg={test:Av("#"),parse:W4,transform:Ko.transform},Mc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$i=Mc("deg"),Ps=Mc("%"),Le=Mc("px"),q4=Mc("vh"),H4=Mc("vw"),IT={...Ps,parse:t=>Ps.parse(t)/100,transform:t=>Ps.transform(t*100)},al={test:Av("hsl","hue"),parse:OR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ps.transform(Qu(e))+", "+Ps.transform(Qu(n))+", "+Qu(yc.transform(r))+")"},Ht={test:t=>Ko.test(t)||Lg.test(t)||al.test(t),parse:t=>Ko.test(t)?Ko.parse(t):al.test(t)?al.parse(t):Lg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ko.transform(t):al.transform(t),getAnimatableNone:t=>{const e=Ht.parse(t);return e.alpha=0,Ht.transform(e)}},K4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function G4(t){return isNaN(t)&&typeof t=="string"&&(t.match(bv)?.length||0)+(t.match(K4)?.length||0)>0}const NR="number",VR="color",Q4="var",J4="var(",bT="${}",Y4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(Y4,h=>(Ht.test(h)?(r.color.push(o),s.push(VR),n.push(Ht.parse(h))):h.startsWith(J4)?(r.var.push(o),s.push(Q4),n.push(h)):(r.number.push(o),s.push(NR),n.push(parseFloat(h))),++o,bT)).split(bT);return{values:n,split:c,indexes:r,types:s}}function LR(t){return vc(t).values}function MR(t){const{split:e,types:n}=vc(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=n[l];c===NR?o+=Qu(s[l]):c===VR?o+=Ht.transform(s[l]):o+=s[l]}return o}}const X4=t=>typeof t=="number"?0:Ht.test(t)?Ht.getAnimatableNone(t):t;function Z4(t){const e=LR(t);return MR(t)(e.map(X4))}const oo={test:G4,parse:LR,createTransformer:MR,getAnimatableNone:Z4};function Lm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function e$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,h=2*n-c;s=Lm(h,c,t+1/3),o=Lm(h,c,t),l=Lm(h,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function Xd(t,e){return n=>n>0?e:t}const Rt=(t,e,n)=>t+(e-t)*n,Mm=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},t$=[Lg,Ko,al],n$=t=>t$.find(e=>e.test(t));function AT(t){const e=n$(t);if(!e)return!1;let n=e.parse(t);return e===al&&(n=e$(n)),n}const RT=(t,e)=>{const n=AT(t),r=AT(e);if(!n||!r)return Xd(t,e);const s={...n};return o=>(s.red=Mm(n.red,r.red,o),s.green=Mm(n.green,r.green,o),s.blue=Mm(n.blue,r.blue,o),s.alpha=Rt(n.alpha,r.alpha,o),Ko.transform(s))},Mg=new Set(["none","hidden"]);function r$(t,e){return Mg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function s$(t,e){return n=>Rt(t,e,n)}function Rv(t){return typeof t=="number"?s$:typeof t=="string"?Iv(t)?Xd:Ht.test(t)?RT:a$:Array.isArray(t)?jR:typeof t=="object"?Ht.test(t)?RT:i$:Xd}function jR(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>Rv(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function i$(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Rv(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function o$(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][r[o]],c=t.values[l]??0;n[s]=c,r[o]++}return n}const a$=(t,e)=>{const n=oo.createTransformer(e),r=vc(t),s=vc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Mg.has(t)&&!s.values.length||Mg.has(e)&&!r.values.length?r$(t,e):Vc(jR(o$(r,s),s.values),n):Xd(t,e)};function UR(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Rt(t,e,n):Rv(t)(t,e)}const l$=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>wt.update(e,n),stop:()=>io(e),now:()=>mn.isProcessing?mn.timestamp:Jn.now()}},FR=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Zd=2e4;function Pv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Zd;)e+=n,r=t.next(e);return e>=Zd?1/0:e}function u$(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Pv(r),Zd);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:kr(s)}}const c$=5;function $R(t,e,n){const r=Math.max(e-c$,0);return wR(n-t(r),e-r)}const Ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jm=.001;function h$({duration:t=Ot.duration,bounce:e=Ot.bounce,velocity:n=Ot.velocity,mass:r=Ot.mass}){let s,o,l=1-e;l=ui(Ot.minDamping,Ot.maxDamping,l),t=ui(Ot.minDuration,Ot.maxDuration,kr(t)),l<1?(s=p=>{const m=p*l,y=m*t,w=m-n,S=jg(p,l),A=Math.exp(-y);return jm-w/S*A},o=p=>{const y=p*l*t,w=y*n+n,S=Math.pow(l,2)*Math.pow(p,2)*t,A=Math.exp(-y),C=jg(Math.pow(p,2),l);return(-s(p)+jm>0?-1:1)*((w-S)*A)/C}):(s=p=>{const m=Math.exp(-p*t),y=(p-n)*t+1;return-jm+m*y},o=p=>{const m=Math.exp(-p*t),y=(n-p)*(t*t);return m*y});const c=5/t,h=f$(s,o,c);if(t=Rs(t),isNaN(h))return{stiffness:Ot.stiffness,damping:Ot.damping,duration:t};{const p=Math.pow(h,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:t}}}const d$=12;function f$(t,e,n){let r=n;for(let s=1;s<d$;s++)r=r-t(r)/e(r);return r}function jg(t,e){return t*Math.sqrt(1-e*e)}const p$=["duration","bounce"],m$=["stiffness","damping","mass"];function PT(t,e){return e.some(n=>t[n]!==void 0)}function g$(t){let e={velocity:Ot.velocity,stiffness:Ot.stiffness,damping:Ot.damping,mass:Ot.mass,isResolvedFromDuration:!1,...t};if(!PT(t,m$)&&PT(t,p$))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*ui(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ot.mass,stiffness:s,damping:o}}else{const n=h$(t);e={...e,...n,mass:Ot.mass},e.isResolvedFromDuration=!0}return e}function ef(t=Ot.visualDuration,e=Ot.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:h,damping:p,mass:m,duration:y,velocity:w,isResolvedFromDuration:S}=g$({...n,velocity:-kr(n.velocity||0)}),A=w||0,C=p/(2*Math.sqrt(h*m)),R=l-o,O=kr(Math.sqrt(h/m)),U=Math.abs(R)<5;r||(r=U?Ot.restSpeed.granular:Ot.restSpeed.default),s||(s=U?Ot.restDelta.granular:Ot.restDelta.default);let N;if(C<1){const H=jg(O,C);N=X=>{const k=Math.exp(-C*O*X);return l-k*((A+C*O*R)/H*Math.sin(H*X)+R*Math.cos(H*X))}}else if(C===1)N=H=>l-Math.exp(-O*H)*(R+(A+O*R)*H);else{const H=O*Math.sqrt(C*C-1);N=X=>{const k=Math.exp(-C*O*X),b=Math.min(H*X,300);return l-k*((A+C*O*R)*Math.sinh(b)+H*R*Math.cosh(b))/H}}const K={calculatedDuration:S&&y||null,next:H=>{const X=N(H);if(S)c.done=H>=y;else{let k=H===0?A:0;C<1&&(k=H===0?Rs(A):$R(N,H,X));const b=Math.abs(k)<=r,P=Math.abs(l-X)<=s;c.done=b&&P}return c.value=c.done?l:X,c},toString:()=>{const H=Math.min(Pv(K),Zd),X=FR(k=>K.next(H*k).value,H,30);return H+"ms "+X},toTransition:()=>{}};return K}ef.applyToOptions=t=>{const e=u$(t,100,ef);return t.ease=e.ease,t.duration=Rs(e.duration),t.type="keyframes",t};function Ug({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:h,restDelta:p=.5,restSpeed:m}){const y=t[0],w={done:!1,value:y},S=b=>c!==void 0&&b<c||h!==void 0&&b>h,A=b=>c===void 0?h:h===void 0||Math.abs(c-b)<Math.abs(h-b)?c:h;let C=n*e;const R=y+C,O=l===void 0?R:l(R);O!==R&&(C=O-y);const U=b=>-C*Math.exp(-b/r),N=b=>O+U(b),K=b=>{const P=U(b),L=N(b);w.done=Math.abs(P)<=p,w.value=w.done?O:L};let H,X;const k=b=>{S(w.value)&&(H=b,X=ef({keyframes:[w.value,A(w.value)],velocity:$R(N,b,w.value),damping:s,stiffness:o,restDelta:p,restSpeed:m}))};return k(0),{calculatedDuration:null,next:b=>{let P=!1;return!X&&H===void 0&&(P=!0,K(b),k(b)),H!==void 0&&b>=H?X.next(b-H):(!P&&K(b),w)}}}function y$(t,e,n){const r=[],s=n||ci.mix||UR,o=t.length-1;for(let l=0;l<o;l++){let c=s(t[l],t[l+1]);if(e){const h=Array.isArray(e)?e[l]||xr:e;c=Vc(h,c)}r.push(c)}return r}function v$(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(vv(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=y$(e,r,s),h=c.length,p=m=>{if(l&&m<t[0])return e[0];let y=0;if(h>1)for(;y<t.length-2&&!(m<t[y+1]);y++);const w=gc(t[y],t[y+1],m);return c[y](w)};return n?m=>p(ui(t[0],t[o-1],m)):p}function _$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=gc(0,e,r);t.push(Rt(n,1,s))}}function w$(t){const e=[0];return _$(e,t.length-1),e}function E$(t,e){return t.map(n=>n*e)}function T$(t,e){return t.map(()=>e||kR).splice(0,t.length-1)}function Ju({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=O4(r)?r.map(ST):ST(r),o={done:!1,value:e[0]},l=E$(n&&n.length===e.length?n:w$(e),t),c=v$(l,e,{ease:Array.isArray(s)?s:T$(e,s)});return{calculatedDuration:t,next:h=>(o.value=c(h),o.done=h>=t,o)}}const S$=t=>t!==null;function kv(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(S$),c=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const I$={decay:Ug,inertia:Ug,tween:Ju,keyframes:Ju,spring:ef};function BR(t){typeof t.type=="string"&&(t.type=I$[t.type])}class Cv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const b$=t=>t/100;class xv extends Cv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Jn.now()&&this.tick(Jn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;BR(e);const{type:n=Ju,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const h=n||Ju;h!==Ju&&typeof c[0]!="number"&&(this.mixKeyframes=Vc(b$,UR(c[0],c[1])),c=[0,100]);const p=h({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...c].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=Pv(p));const{calculatedDuration:m}=p;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:p=0,keyframes:m,repeat:y,repeatType:w,repeatDelay:S,type:A,onUpdate:C,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const O=this.currentTime-p*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?O<0:O>s;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let N=this.currentTime,K=r;if(y){const b=Math.min(this.currentTime,s)/c;let P=Math.floor(b),L=b%1;!L&&b>=1&&(L=1),L===1&&P--,P=Math.min(P,y+1),!!(P%2)&&(w==="reverse"?(L=1-L,S&&(L-=S/c)):w==="mirror"&&(K=l)),N=ui(0,1,L)*c}const H=U?{done:!1,value:m[0]}:K.next(N);o&&(H.value=o(H.value));let{done:X}=H;!U&&h!==null&&(X=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&X);return k&&A!==Ug&&(H.value=kv(m,this.options,R,this.speed)),C&&C(H.value),k&&this.finish(),H}then(e,n){return this.finished.then(e,n)}get duration(){return kr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kr(e)}get time(){return kr(this.currentTime)}set time(e){e=Rs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Jn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=kr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=l$,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function A$(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Go=t=>t*180/Math.PI,Fg=t=>{const e=Go(Math.atan2(t[1],t[0]));return $g(e)},R$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Fg,rotateZ:Fg,skewX:t=>Go(Math.atan(t[1])),skewY:t=>Go(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},$g=t=>(t=t%360,t<0&&(t+=360),t),kT=Fg,CT=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),xT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),P$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:CT,scaleY:xT,scale:t=>(CT(t)+xT(t))/2,rotateX:t=>$g(Go(Math.atan2(t[6],t[5]))),rotateY:t=>$g(Go(Math.atan2(-t[2],t[0]))),rotateZ:kT,rotate:kT,skewX:t=>Go(Math.atan(t[4])),skewY:t=>Go(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Bg(t){return t.includes("scale")?1:0}function zg(t,e){if(!t||t==="none")return Bg(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=P$,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=R$,s=c}if(!s)return Bg(e);const o=r[e],l=s[1].split(",").map(C$);return typeof o=="function"?o(l):l[o]}const k$=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return zg(n,e)};function C$(t){return parseFloat(t.trim())}const Ul=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fl=new Set(Ul),DT=t=>t===jl||t===Le,x$=new Set(["x","y","z"]),D$=Ul.filter(t=>!x$.has(t));function O$(t){const e=[];return D$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Jo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>zg(e,"x"),y:(t,{transform:e})=>zg(e,"y")};Jo.translateX=Jo.x;Jo.translateY=Jo.y;const Yo=new Set;let Wg=!1,qg=!1,Hg=!1;function zR(){if(qg){const t=Array.from(Yo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=O$(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{r.getValue(o)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}qg=!1,Wg=!1,Yo.forEach(t=>t.complete(Hg)),Yo.clear()}function WR(){Yo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(qg=!0)})}function N$(){Hg=!0,WR(),zR(),Hg=!1}class Dv{constructor(e,n,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Yo.add(this),Wg||(Wg=!0,wt.read(WR),wt.resolveKeyframes(zR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const c=r.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}A$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Yo.delete(this)}cancel(){this.state==="scheduled"&&(Yo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const V$=t=>t.startsWith("--");function L$(t,e,n){V$(e)?t.style.setProperty(e,n):t.style[e]=n}const M$=_v(()=>window.ScrollTimeline!==void 0),j$={};function U$(t,e){const n=_v(t);return()=>j$[e]??n()}const qR=U$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Uu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,OT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uu([0,.65,.55,1]),circOut:Uu([.55,0,1,.45]),backIn:Uu([.31,.01,.66,-.59]),backOut:Uu([.33,1.53,.69,.99])};function HR(t,e){if(t)return typeof t=="function"?qR()?FR(t,e):"ease-out":CR(t)?Uu(t):Array.isArray(t)?t.map(n=>HR(n,e)||OT.easeOut):OT[t]}function F$(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:h}={},p=void 0){const m={[e]:n};h&&(m.offset=h);const y=HR(c,s);Array.isArray(y)&&(m.easing=y);const w={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return p&&(w.pseudoElement=p),t.animate(m,w)}function KR(t){return typeof t=="function"&&"applyToOptions"in t}function $$({type:t,...e}){return KR(t)&&qR()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class B$ extends Cv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,vv(typeof e.type!="string");const p=$$(e);this.animation=F$(n,r,s,p,o),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=kv(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):L$(n,r,m),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return kr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kr(e)}get time(){return kr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Rs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&M$()?(this.animation.timeline=e,xr):n(this)}}const GR={anticipate:AR,backInOut:bR,circInOut:PR};function z$(t){return t in GR}function W$(t){typeof t.ease=="string"&&z$(t.ease)&&(t.ease=GR[t.ease])}const NT=10;class q$ extends B${constructor(e){W$(e),BR(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new xv({...l,autoplay:!1}),h=Rs(this.finishedTime??this.time);n.setWithVelocity(c.sample(h-NT).value,c.sample(h).value,NT),c.stop()}}const VT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oo.test(t)||t==="0")&&!t.startsWith("url("));function H$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function K$(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=VT(s,e),c=VT(o,e);return!l||!c?!1:H$(t)||(n==="spring"||KR(n))&&r}function Kg(t){t.duration=0,t.type="keyframes"}const G$=new Set(["opacity","clipPath","filter","transform"]),Q$=_v(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function J$(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=e.owner.getProps();return Q$()&&n&&G$.has(n)&&(n!=="transform"||!p)&&!h&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const Y$=40;class X$ extends Cv{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:h,motionValue:p,element:m,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Jn.now();const w={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,name:h,motionValue:p,element:m,...y},S=m?.KeyframeResolver||Dv;this.keyframeResolver=new S(c,(A,C,R)=>this.onKeyframesResolved(A,C,w,!R),h,p,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:h,isHandoff:p,onUpdate:m}=r;this.resolvedAt=Jn.now(),K$(e,o,l,c)||((ci.instantAnimations||!h)&&m?.(kv(e,r,n)),e[0]=e[e.length-1],Kg(r),r.repeat=0);const w={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Y$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},S=!p&&J$(w)?new q$({...w,element:w.motionValue.owner.current}):new xv(w);S.finished.then(()=>this.notifyFinished()).catch(xr),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),N$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Z$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eB(t){const e=Z$.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function QR(t,e,n=1){const[r,s]=eB(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return yR(l)?parseFloat(l):l}return Iv(s)?QR(s,e,n+1):s}function Ov(t,e){return t?.[e]??t?.default??t}const JR=new Set(["width","height","top","left","right","bottom",...Ul]),tB={test:t=>t==="auto",parse:t=>t},YR=t=>e=>e.test(t),XR=[jl,Le,Ps,$i,H4,q4,tB],LT=t=>XR.find(YR(t));function nB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||_R(t):!0}const rB=new Set(["brightness","contrast","saturate","opacity"]);function sB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bv)||[];if(!r)return t;const s=n.replace(r,"");let o=rB.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const iB=/\b([a-z-]*)\(.*?\)/gu,Gg={...oo,getAnimatableNone:t=>{const e=t.match(iB);return e?e.map(sB).join(" "):t}},MT={...jl,transform:Math.round},oB={rotate:$i,rotateX:$i,rotateY:$i,rotateZ:$i,scale:od,scaleX:od,scaleY:od,scaleZ:od,skew:$i,skewX:$i,skewY:$i,distance:Le,translateX:Le,translateY:Le,translateZ:Le,x:Le,y:Le,z:Le,perspective:Le,transformPerspective:Le,opacity:yc,originX:IT,originY:IT,originZ:Le},Nv={borderWidth:Le,borderTopWidth:Le,borderRightWidth:Le,borderBottomWidth:Le,borderLeftWidth:Le,borderRadius:Le,radius:Le,borderTopLeftRadius:Le,borderTopRightRadius:Le,borderBottomRightRadius:Le,borderBottomLeftRadius:Le,width:Le,maxWidth:Le,height:Le,maxHeight:Le,top:Le,right:Le,bottom:Le,left:Le,padding:Le,paddingTop:Le,paddingRight:Le,paddingBottom:Le,paddingLeft:Le,margin:Le,marginTop:Le,marginRight:Le,marginBottom:Le,marginLeft:Le,backgroundPositionX:Le,backgroundPositionY:Le,...oB,zIndex:MT,fillOpacity:yc,strokeOpacity:yc,numOctaves:MT},aB={...Nv,color:Ht,backgroundColor:Ht,outlineColor:Ht,fill:Ht,stroke:Ht,borderColor:Ht,borderTopColor:Ht,borderRightColor:Ht,borderBottomColor:Ht,borderLeftColor:Ht,filter:Gg,WebkitFilter:Gg},ZR=t=>aB[t];function eP(t,e){let n=ZR(t);return n!==Gg&&(n=oo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lB=new Set(["auto","none","0"]);function uB(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!lB.has(o)&&vc(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=eP(n,s)}class cB extends Dv{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let p=e[h];if(typeof p=="string"&&(p=p.trim(),Iv(p))){const m=QR(p,n.current);m!==void 0&&(e[h]=m),h===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!JR.has(r)||e.length!==2)return;const[s,o]=e,l=LT(s),c=LT(o);if(l!==c)if(DT(l)&&DT(c))for(let h=0;h<e.length;h++){const p=e[h];typeof p=="string"&&(e[h]=parseFloat(p))}else Jo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||nB(e[s]))&&r.push(s);r.length&&uB(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=Jo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,h])=>{e.getValue(c).set(h)}),this.resolveNoneKeyframes()}}function hB(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const tP=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function dB(t){return vR(t)&&"offsetHeight"in t}const jT=30,fB=t=>!isNaN(parseFloat(t));class pB{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=Jn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fB(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new wv);const r=this.events[e].add(n);return e==="change"?()=>{r(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>jT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jT);return wR(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Al(t,e){return new pB(t,e)}const{schedule:Vv}=xR(queueMicrotask,!1),Qr={x:!1,y:!1};function nP(){return Qr.x||Qr.y}function mB(t){return t==="x"||t==="y"?Qr[t]?null:(Qr[t]=!0,()=>{Qr[t]=!1}):Qr.x||Qr.y?null:(Qr.x=Qr.y=!0,()=>{Qr.x=Qr.y=!1})}function rP(t,e){const n=hB(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function UT(t){return!(t.pointerType==="touch"||nP())}function gB(t,e,n={}){const[r,s,o]=rP(t,n),l=c=>{if(!UT(c))return;const{target:h}=c,p=e(h,c);if(typeof p!="function"||!h)return;const m=y=>{UT(y)&&(p(y),h.removeEventListener("pointerleave",m))};h.addEventListener("pointerleave",m,s)};return r.forEach(c=>{c.addEventListener("pointerenter",l,s)}),o}const sP=(t,e)=>e?t===e?!0:sP(t,e.parentElement):!1,Lv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,yB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vB(t){return yB.has(t.tagName)||t.tabIndex!==-1}const Sd=new WeakSet;function FT(t){return e=>{e.key==="Enter"&&t(e)}}function Um(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _B=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=FT(()=>{if(Sd.has(n))return;Um(n,"down");const s=FT(()=>{Um(n,"up")}),o=()=>Um(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function $T(t){return Lv(t)&&!nP()}function wB(t,e,n={}){const[r,s,o]=rP(t,n),l=c=>{const h=c.currentTarget;if(!$T(c))return;Sd.add(h);const p=e(h,c),m=(S,A)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",w),Sd.has(h)&&Sd.delete(h),$T(S)&&typeof p=="function"&&p(S,{success:A})},y=S=>{m(S,h===window||h===document||n.useGlobalTarget||sP(h,S.target))},w=S=>{m(S,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",w,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),dB(c)&&(c.addEventListener("focus",p=>_B(p,s)),!vB(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function iP(t){return vR(t)&&"ownerSVGElement"in t}function EB(t){return iP(t)&&t.tagName==="svg"}const kn=t=>!!(t&&t.getVelocity),TB=[...XR,Ht,oo],SB=t=>TB.find(YR(t)),oP=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function IB(t=!0){const e=V.useContext(mv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=V.useId();V.useEffect(()=>{if(t)return s(o)},[t]);const l=V.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const aP=V.createContext({strict:!1}),BT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Rl={};for(const t in BT)Rl[t]={isEnabled:e=>BT[t].some(n=>!!e[n])};function bB(t){for(const e in t)Rl[e]={...Rl[e],...t[e]}}const AB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function tf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||AB.has(t)}let lP=t=>!tf(t);function RB(t){typeof t=="function"&&(lP=e=>e.startsWith("on")?!tf(e):t(e))}try{RB(require("@emotion/is-prop-valid").default)}catch{}function PB(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(lP(s)||n===!0&&tf(s)||!e&&!tf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const kf=V.createContext({});function Cf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function _c(t){return typeof t=="string"||Array.isArray(t)}const Mv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jv=["initial",...Mv];function xf(t){return Cf(t.animate)||jv.some(e=>_c(t[e]))}function uP(t){return!!(xf(t)||t.variants)}function kB(t,e){if(xf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||_c(n)?n:void 0,animate:_c(r)?r:void 0}}return t.inherit!==!1?e:{}}function CB(t){const{initial:e,animate:n}=kB(t,V.useContext(kf));return V.useMemo(()=>({initial:e,animate:n}),[zT(e),zT(n)])}function zT(t){return Array.isArray(t)?t.join(" "):t}const wc={};function xB(t){for(const e in t)wc[e]=t[e],Sv(e)&&(wc[e].isCSSVariable=!0)}function cP(t,{layout:e,layoutId:n}){return Fl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!wc[t]||t==="opacity")}const DB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OB=Ul.length;function NB(t,e,n){let r="",s=!0;for(let o=0;o<OB;o++){const l=Ul[o],c=t[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||n){const p=tP(c,Nv[l]);if(!h){s=!1;const m=DB[l]||l;r+=`${m}(${p}) `}n&&(e[l]=p)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Uv(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,c=!1;for(const h in e){const p=e[h];if(Fl.has(h)){l=!0;continue}else if(Sv(h)){s[h]=p;continue}else{const m=tP(p,Nv[h]);h.startsWith("origin")?(c=!0,o[h]=m):r[h]=m}}if(e.transform||(l||n?r.transform=NB(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:m=0}=o;r.transformOrigin=`${h} ${p} ${m}`}}const Fv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hP(t,e,n){for(const r in e)!kn(e[r])&&!cP(r,n)&&(t[r]=e[r])}function VB({transformTemplate:t},e){return V.useMemo(()=>{const n=Fv();return Uv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function LB(t,e){const n=t.style||{},r={};return hP(r,n,t),Object.assign(r,VB(t,e)),r}function MB(t,e){const n={},r=LB(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const jB={offset:"stroke-dashoffset",array:"stroke-dasharray"},UB={offset:"strokeDashoffset",array:"strokeDasharray"};function FB(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?jB:UB;t[o.offset]=Le.transform(-r);const l=Le.transform(e),c=Le.transform(n);t[o.array]=`${l} ${c}`}function dP(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...c},h,p,m){if(Uv(t,c,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:w}=t;y.transform&&(w.transform=y.transform,delete y.transform),(w.transform||y.transformOrigin)&&(w.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),w.transform&&(w.transformBox=m?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),s!==void 0&&FB(y,s,o,l,!1)}const fP=()=>({...Fv(),attrs:{}}),pP=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $B(t,e,n,r){const s=V.useMemo(()=>{const o=fP();return dP(o,e,pP(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};hP(o,t.style,t),s.style={...o,...s.style}}return s}const BB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $v(t){return typeof t!="string"||t.includes("-")?!1:!!(BB.indexOf(t)>-1||/[A-Z]/u.test(t))}function zB(t,e,n,{latestValues:r},s,o=!1){const c=($v(t)?$B:MB)(e,r,s,t),h=PB(e,typeof t=="string",o),p=t!==V.Fragment?{...h,...c,ref:n}:{},{children:m}=e,y=V.useMemo(()=>kn(m)?m.get():m,[m]);return V.createElement(t,{...p,children:y})}function WT(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Bv(t,e,n,r){if(typeof e=="function"){const[s,o]=WT(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=WT(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function Id(t){return kn(t)?t.get():t}function WB({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:qB(n,r,s,t),renderState:e()}}function qB(t,e,n,r){const s={},o=r(t,{});for(const w in o)s[w]=Id(o[w]);let{initial:l,animate:c}=t;const h=xf(t),p=uP(t);e&&p&&!h&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||l===!1;const y=m?c:l;if(y&&typeof y!="boolean"&&!Cf(y)){const w=Array.isArray(y)?y:[y];for(let S=0;S<w.length;S++){const A=Bv(t,w[S]);if(A){const{transitionEnd:C,transition:R,...O}=A;for(const U in O){let N=O[U];if(Array.isArray(N)){const K=m?N.length-1:0;N=N[K]}N!==null&&(s[U]=N)}for(const U in C)s[U]=C[U]}}}return s}const mP=t=>(e,n)=>{const r=V.useContext(kf),s=V.useContext(mv),o=()=>WB(t,e,r,s);return n?o():b4(o)};function zv(t,e,n){const{style:r}=t,s={};for(const o in r)(kn(r[o])||e.style&&kn(e.style[o])||cP(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=r[o]);return s}const HB=mP({scrapeMotionValuesFromProps:zv,createRenderState:Fv});function gP(t,e,n){const r=zv(t,e,n);for(const s in t)if(kn(t[s])||kn(e[s])){const o=Ul.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const KB=mP({scrapeMotionValuesFromProps:gP,createRenderState:fP}),GB=Symbol.for("motionComponentSymbol");function ll(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function QB(t,e,n){return V.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ll(n)&&(n.current=r))},[e])}const Wv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JB="framerAppearId",yP="data-"+Wv(JB),vP=V.createContext({});function YB(t,e,n,r,s){const{visualElement:o}=V.useContext(kf),l=V.useContext(aP),c=V.useContext(mv),h=V.useContext(oP).reducedMotion,p=V.useRef(null);r=r||l.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=p.current,y=V.useContext(vP);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&XB(p.current,n,s,y);const w=V.useRef(!1);V.useInsertionEffect(()=>{m&&w.current&&m.update(n,c)});const S=n[yP],A=V.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return A4(()=>{m&&(w.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),A.current&&m.animationState&&m.animationState.animateChanges())}),V.useEffect(()=>{m&&(!A.current&&m.animationState&&m.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),A.current=!1),m.enteringChildren=void 0)}),m}function XB(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:p,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:_P(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&ll(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:h,layoutRoot:p})}function _P(t){if(t)return t.options.allowProjection!==!1?t.projection:_P(t.parent)}function Fm(t,{forwardMotionProps:e=!1}={},n,r){n&&bB(n);const s=$v(t)?KB:HB;function o(c,h){let p;const m={...V.useContext(oP),...c,layoutId:ZB(c)},{isStatic:y}=m,w=CB(c),S=s(c,y);if(!y&&pv){e3();const A=t3(m);p=A.MeasureLayout,w.visualElement=YB(t,S,m,r,A.ProjectionNode)}return J.jsxs(kf.Provider,{value:w,children:[p&&w.visualElement?J.jsx(p,{visualElement:w.visualElement,...m}):null,zB(t,c,QB(S,w.visualElement,h),S,y,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=V.forwardRef(o);return l[GB]=t,l}function ZB({layoutId:t}){const e=V.useContext(gR).id;return e&&t!==void 0?e+"-"+t:t}function e3(t,e){V.useContext(aP).strict}function t3(t){const{drag:e,layout:n}=Rl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function n3(t,e){if(typeof Proxy>"u")return Fm;const n=new Map,r=(o,l)=>Fm(o,l,t,e),s=(o,l)=>r(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?r:(n.has(l)||n.set(l,Fm(l,void 0,t,e)),n.get(l))})}function wP({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function r3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function s3(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function $m(t){return t===void 0||t===1}function Qg({scale:t,scaleX:e,scaleY:n}){return!$m(t)||!$m(e)||!$m(n)}function Fo(t){return Qg(t)||EP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function EP(t){return qT(t.x)||qT(t.y)}function qT(t){return t&&t!=="0%"}function nf(t,e,n){const r=t-n,s=e*r;return n+s}function HT(t,e,n,r,s){return s!==void 0&&(t=nf(t,s,r)),nf(t,n,r)+e}function Jg(t,e=0,n=1,r,s){t.min=HT(t.min,e,n,r,s),t.max=HT(t.max,e,n,r,s)}function TP(t,{x:e,y:n}){Jg(t.x,e.translate,e.scale,e.originPoint),Jg(t.y,n.translate,n.scale,n.originPoint)}const KT=.999999999999,GT=1.0000000000001;function i3(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=n[c],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&cl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,TP(t,l)),r&&Fo(o.latestValues)&&cl(t,o.latestValues))}e.x<GT&&e.x>KT&&(e.x=1),e.y<GT&&e.y>KT&&(e.y=1)}function ul(t,e){t.min=t.min+e,t.max=t.max+e}function QT(t,e,n,r,s=.5){const o=Rt(t.min,t.max,s);Jg(t,e,n,o,r)}function cl(t,e){QT(t.x,e.x,e.scaleX,e.scale,e.originX),QT(t.y,e.y,e.scaleY,e.scale,e.originY)}function SP(t,e){return wP(s3(t.getBoundingClientRect(),e))}function o3(t,e,n){const r=SP(t,n),{scroll:s}=e;return s&&(ul(r.x,s.offset.x),ul(r.y,s.offset.y)),r}const JT=()=>({translate:0,scale:1,origin:0,originPoint:0}),hl=()=>({x:JT(),y:JT()}),YT=()=>({min:0,max:0}),Yt=()=>({x:YT(),y:YT()}),Yg={current:null},IP={current:!1};function a3(){if(IP.current=!0,!!pv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Yg.current=t.matches;t.addEventListener("change",e),e()}else Yg.current=!1}const l3=new WeakMap;function u3(t,e,n){for(const r in e){const s=e[r],o=n[r];if(kn(s))t.addValue(r,s);else if(kn(o))t.addValue(r,Al(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,Al(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const XT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class c3{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Jn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,wt.render(this.render,!1,!0))};const{latestValues:h,renderState:p}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=xf(n),this.isVariantNode=uP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in y){const S=y[w];h[w]!==void 0&&kn(S)&&S.set(h[w])}}mount(e){this.current=e,l3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),IP.current||a3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yg.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),io(this.notifyUpdate),io(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Fl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&wt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Rl){const n=Rl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<XT.length;r++){const s=XT[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=u3(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Al(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(yR(r)||_R(r))?r=parseFloat(r):!SB(r)&&oo.test(n)&&(r=eP(e,n)),this.setBaseTarget(e,kn(r)?r.get():r)),kn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Bv(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!kn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new wv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Vv.render(this.render)}}class bP extends c3{constructor(){super(...arguments),this.KeyframeResolver=cB}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;kn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function AP(t,{style:e,vars:n},r,s){const o=t.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,r);for(l in n)o.setProperty(l,n[l])}function h3(t){return window.getComputedStyle(t)}class d3 extends bP{constructor(){super(...arguments),this.type="html",this.renderInstance=AP}readValueFromInstance(e,n){if(Fl.has(n))return this.projection?.isProjecting?Bg(n):k$(e,n);{const r=h3(e),s=(Sv(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return SP(e,n)}build(e,n,r){Uv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return zv(e,n,r)}}const RP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function f3(t,e,n,r){AP(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(RP.has(s)?s:Wv(s),e.attrs[s])}class p3 extends bP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Yt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Fl.has(n)){const r=ZR(n);return r&&r.default||0}return n=RP.has(n)?n:Wv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return gP(e,n,r)}build(e,n,r){dP(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){f3(e,n,r,s)}mount(e){this.isSVGTag=pP(e.tagName),super.mount(e)}}const m3=(t,e)=>$v(t)?new p3(e):new d3(e,{allowProjection:t!==V.Fragment});function vl(t,e,n){const r=t.getProps();return Bv(r,e,n!==void 0?n:r.custom,t)}const Xg=t=>Array.isArray(t);function g3(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Al(n))}function y3(t){return Xg(t)?t[t.length-1]||0:t}function v3(t,e){const n=vl(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const c=y3(o[l]);g3(t,l,c)}}function _3(t){return!!(kn(t)&&t.add)}function Zg(t,e){const n=t.getValue("willChange");if(_3(n))return n.add(e);if(!n&&ci.WillChange){const r=new ci.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function PP(t){return t.props[yP]}const w3=t=>t!==null;function E3(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(w3),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const T3={type:"spring",stiffness:500,damping:25,restSpeed:10},S3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),I3={type:"keyframes",duration:.8},b3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},A3=(t,{keyframes:e})=>e.length>2?I3:Fl.has(t)?t.startsWith("scale")?S3(e[1]):T3:b3;function R3({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:h,elapsed:p,...m}){return!!Object.keys(m).length}const qv=(t,e,n,r={},s,o)=>l=>{const c=Ov(r,t)||{},h=c.delay||r.delay||0;let{elapsed:p=0}=r;p=p-Rs(h);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-p,onUpdate:w=>{e.set(w),c.onUpdate&&c.onUpdate(w)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:s};R3(c)||Object.assign(m,A3(t,m)),m.duration&&(m.duration=Rs(m.duration)),m.repeatDelay&&(m.repeatDelay=Rs(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Kg(m),m.delay===0&&(y=!0)),(ci.instantAnimations||ci.skipAnimations)&&(y=!0,Kg(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,y&&!o&&e.get()!==void 0){const w=E3(m.keyframes,c);if(w!==void 0){wt.update(()=>{m.onUpdate(w),m.onComplete()});return}}return c.isSync?new xv(m):new X$(m)};function P3({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function kP(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(o=r);const h=[],p=s&&t.animationState&&t.animationState.getState()[s];for(const m in c){const y=t.getValue(m,t.latestValues[m]??null),w=c[m];if(w===void 0||p&&P3(p,m))continue;const S={delay:n,...Ov(o||{},m)},A=y.get();if(A!==void 0&&!y.isAnimating&&!Array.isArray(w)&&w===A&&!S.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const O=PP(t);if(O){const U=window.MotionHandoffAnimation(O,m,wt);U!==null&&(S.startTime=U,C=!0)}}Zg(t,m),y.start(qv(m,y,w,t.shouldReduceMotion&&JR.has(m)?{type:!1}:S,t,C));const R=y.animation;R&&h.push(R)}return l&&Promise.all(h).then(()=>{wt.update(()=>{l&&v3(t,l)})}),h}function CP(t,e,n,r=0,s=1){const o=Array.from(t).sort((p,m)=>p.sortNodePosition(m)).indexOf(e),l=t.size,c=(l-1)*r;return typeof n=="function"?n(o,l):s===1?o*r:c-o*r}function ey(t,e,n={}){const r=vl(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(kP(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:y}=s;return k3(t,e,h,p,m,y,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,p]=c==="beforeChildren"?[o,l]:[l,o];return h().then(()=>p())}else return Promise.all([o(),l(n.delay)])}function k3(t,e,n=0,r=0,s=0,o=1,l){const c=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),c.push(ey(h,e,{...l,delay:n+(typeof r=="function"?0:r)+CP(t.variantChildren,h,r,s,o)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(c)}function C3(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>ey(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=ey(t,e,n);else{const s=typeof e=="function"?vl(t,e,n.custom):e;r=Promise.all(kP(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function xP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const x3=jv.length;function DP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?DP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<x3;n++){const r=jv[n],s=t.props[r];(_c(s)||s===!1)&&(e[r]=s)}return e}const D3=[...Mv].reverse(),O3=Mv.length;function N3(t){return e=>Promise.all(e.map(({animation:n,options:r})=>C3(t,n,r)))}function V3(t){let e=N3(t),n=ZT(),r=!0;const s=h=>(p,m)=>{const y=vl(t,m,h==="exit"?t.presenceContext?.custom:void 0);if(y){const{transition:w,transitionEnd:S,...A}=y;p={...p,...A,...S}}return p};function o(h){e=h(t)}function l(h){const{props:p}=t,m=DP(t.parent)||{},y=[],w=new Set;let S={},A=1/0;for(let R=0;R<O3;R++){const O=D3[R],U=n[O],N=p[O]!==void 0?p[O]:m[O],K=_c(N),H=O===h?U.isActive:null;H===!1&&(A=R);let X=N===m[O]&&N!==p[O]&&K;if(X&&r&&t.manuallyAnimateOnMount&&(X=!1),U.protectedKeys={...S},!U.isActive&&H===null||!N&&!U.prevProp||Cf(N)||typeof N=="boolean")continue;const k=L3(U.prevProp,N);let b=k||O===h&&U.isActive&&!X&&K||R>A&&K,P=!1;const L=Array.isArray(N)?N:[N];let M=L.reduce(s(O),{});H===!1&&(M={});const{prevResolvedValues:B={}}=U,x={...B,...M},We=_e=>{b=!0,w.has(_e)&&(P=!0,w.delete(_e)),U.needsAnimating[_e]=!0;const re=t.getValue(_e);re&&(re.liveStyle=!1)};for(const _e in x){const re=M[_e],fe=B[_e];if(S.hasOwnProperty(_e))continue;let le=!1;Xg(re)&&Xg(fe)?le=!xP(re,fe):le=re!==fe,le?re!=null?We(_e):w.add(_e):re!==void 0&&w.has(_e)?We(_e):U.protectedKeys[_e]=!0}U.prevProp=N,U.prevResolvedValues=M,U.isActive&&(S={...S,...M}),r&&t.blockInitialAnimation&&(b=!1);const it=X&&k;b&&(!it||P)&&y.push(...L.map(_e=>{const re={type:O};if(typeof _e=="string"&&r&&!it&&t.manuallyAnimateOnMount&&t.parent){const{parent:fe}=t,le=vl(fe,_e);if(fe.enteringChildren&&le){const{delayChildren:$}=le.transition||{};re.delay=CP(fe.enteringChildren,t,$)}}return{animation:_e,options:re}}))}if(w.size){const R={};if(typeof p.initial!="boolean"){const O=vl(t,Array.isArray(p.initial)?p.initial[0]:p.initial);O&&O.transition&&(R.transition=O.transition)}w.forEach(O=>{const U=t.getBaseTarget(O),N=t.getValue(O);N&&(N.liveStyle=!0),R[O]=U??null}),y.push({animation:R})}let C=!!y.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(y):Promise.resolve()}function c(h,p){if(n[h].isActive===p)return Promise.resolve();t.variantChildren?.forEach(y=>y.animationState?.setActive(h,p)),n[h].isActive=p;const m=l(h);for(const y in n)n[y].protectedKeys={};return m}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=ZT()}}}function L3(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xP(e,t):!1}function Mo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ZT(){return{animate:Mo(!0),whileInView:Mo(),whileHover:Mo(),whileTap:Mo(),whileDrag:Mo(),whileFocus:Mo(),exit:Mo()}}class lo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class M3 extends lo{constructor(e){super(e),e.animationState||(e.animationState=V3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Cf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let j3=0;class U3 extends lo{constructor(){super(...arguments),this.id=j3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const F3={animation:{Feature:M3},exit:{Feature:U3}};function Ec(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function jc(t){return{point:{x:t.pageX,y:t.pageY}}}const $3=t=>e=>Lv(e)&&t(e,jc(e));function Yu(t,e,n,r){return Ec(t,e,$3(n),r)}const OP=1e-4,B3=1-OP,z3=1+OP,NP=.01,W3=0-NP,q3=0+NP;function Mn(t){return t.max-t.min}function H3(t,e,n){return Math.abs(t-e)<=n}function eS(t,e,n,r=.5){t.origin=r,t.originPoint=Rt(e.min,e.max,t.origin),t.scale=Mn(n)/Mn(e),t.translate=Rt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=B3&&t.scale<=z3||isNaN(t.scale))&&(t.scale=1),(t.translate>=W3&&t.translate<=q3||isNaN(t.translate))&&(t.translate=0)}function Xu(t,e,n,r){eS(t.x,e.x,n.x,r?r.originX:void 0),eS(t.y,e.y,n.y,r?r.originY:void 0)}function tS(t,e,n){t.min=n.min+e.min,t.max=t.min+Mn(e)}function K3(t,e,n){tS(t.x,e.x,n.x),tS(t.y,e.y,n.y)}function nS(t,e,n){t.min=e.min-n.min,t.max=t.min+Mn(e)}function rf(t,e,n){nS(t.x,e.x,n.x),nS(t.y,e.y,n.y)}function Ar(t){return[t("x"),t("y")]}const VP=({current:t})=>t?t.ownerDocument.defaultView:null,rS=(t,e)=>Math.abs(t-e);function G3(t,e){const n=rS(t.x,e.x),r=rS(t.y,e.y);return Math.sqrt(n**2+r**2)}class LP{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=zm(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,A=G3(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!A)return;const{point:C}=w,{timestamp:R}=mn;this.history.push({...C,timestamp:R});const{onStart:O,onMove:U}=this.handlers;S||(O&&O(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,w)},this.handlePointerMove=(w,S)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=Bm(S,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(w,S)=>{this.end();const{onEnd:A,onSessionEnd:C,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=zm(w.type==="pointercancel"?this.lastMoveEventInfo:Bm(S,this.transformPagePoint),this.history);this.startEvent&&A&&A(w,O),C&&C(w,O)},!Lv(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const c=jc(e),h=Bm(c,this.transformPagePoint),{point:p}=h,{timestamp:m}=mn;this.history=[{...p,timestamp:m}];const{onSessionStart:y}=n;y&&y(e,zm(h,this.history)),this.removeListeners=Vc(Yu(this.contextWindow,"pointermove",this.handlePointerMove),Yu(this.contextWindow,"pointerup",this.handlePointerUp),Yu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),io(this.updatePoint)}}function Bm(t,e){return e?{point:e(t.point)}:t}function sS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function zm({point:t},e){return{point:t,delta:sS(t,MP(e)),offset:sS(t,Q3(e)),velocity:J3(e,.1)}}function Q3(t){return t[0]}function MP(t){return t[t.length-1]}function J3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=MP(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Rs(e)));)n--;if(!r)return{x:0,y:0};const o=kr(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Y3(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Rt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Rt(n,t,r.max):Math.min(t,n)),t}function iS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function X3(t,{top:e,left:n,bottom:r,right:s}){return{x:iS(t.x,n,s),y:iS(t.y,e,r)}}function oS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Z3(t,e){return{x:oS(t.x,e.x),y:oS(t.y,e.y)}}function e6(t,e){let n=.5;const r=Mn(t),s=Mn(e);return s>r?n=gc(e.min,e.max-r,t.min):r>s&&(n=gc(t.min,t.max-s,e.min)),ui(0,1,n)}function t6(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ty=.35;function n6(t=ty){return t===!1?t=0:t===!0&&(t=ty),{x:aS(t,"left","right"),y:aS(t,"top","bottom")}}function aS(t,e,n){return{min:lS(t,e),max:lS(t,n)}}function lS(t,e){return typeof t=="number"?t:t[e]||0}const r6=new WeakMap;class s6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=y=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(jc(y).point)},l=(y,w)=>{const{drag:S,dragPropagation:A,onDragStart:C}=this.getProps();if(S&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mB(S),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ar(O=>{let U=this.getAxisMotionValue(O).get()||0;if(Ps.test(U)){const{projection:N}=this.visualElement;if(N&&N.layout){const K=N.layout.layoutBox[O];K&&(U=Mn(K)*(parseFloat(U)/100))}}this.originPoint[O]=U}),C&&wt.postRender(()=>C(y,w)),Zg(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},c=(y,w)=>{this.latestPointerEvent=y,this.latestPanInfo=w;const{dragPropagation:S,dragDirectionLock:A,onDirectionLock:C,onDrag:R}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:O}=w;if(A&&this.currentDirection===null){this.currentDirection=i6(O),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",w.point,O),this.updateAxis("y",w.point,O),this.visualElement.render(),R&&R(y,w)},h=(y,w)=>{this.latestPointerEvent=y,this.latestPanInfo=w,this.stop(y,w),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Ar(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new LP(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:VP(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&wt.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!ad(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=Y3(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&ll(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=X3(r.layoutBox,e):this.constraints=!1,this.elastic=n6(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ar(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=t6(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ll(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=o3(r,s.root,this.visualElement.getTransformPagePoint());let l=Z3(s.layout.layoutBox,o);if(n){const c=n(r3(l));this.hasMutatedConstraints=!!c,c&&(l=wP(c))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},p=Ar(m=>{if(!ad(m,n,this.currentDirection))return;let y=h&&h[m]||{};l&&(y={min:0,max:0});const w=s?200:1e6,S=s?40:1e7,A={type:"inertia",velocity:r?e[m]:0,bounceStiffness:w,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(m,A)});return Promise.all(p).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Zg(this.visualElement,e),r.start(qv(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ar(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ar(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ar(n=>{const{drag:r}=this.getProps();if(!ad(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[n];o.set(e[n]-Rt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ll(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ar(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();s[l]=e6({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ar(l=>{if(!ad(l,e,null))return;const c=this.getAxisMotionValue(l),{min:h,max:p}=this.constraints[l];c.set(Rt(h,p,s[l]))})}addListeners(){if(!this.visualElement.current)return;r6.set(this.visualElement,this);const e=this.visualElement.current,n=Yu(e,"pointerdown",h=>{const{drag:p,dragListener:m=!0}=this.getProps();p&&m&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();ll(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),wt.read(r);const l=Ec(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ar(m=>{const y=this.getAxisMotionValue(m);y&&(this.originPoint[m]+=h[m].translate,y.set(y.get()+h[m].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=ty,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function ad(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function i6(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class o6 extends lo{constructor(e){super(e),this.removeGroupControls=xr,this.removeListeners=xr,this.controls=new s6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xr}unmount(){this.removeGroupControls(),this.removeListeners()}}const uS=t=>(e,n)=>{t&&wt.postRender(()=>t(e,n))};class a6 extends lo{constructor(){super(...arguments),this.removePointerDownListener=xr}onPointerDown(e){this.session=new LP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:VP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:uS(e),onStart:uS(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&wt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Yu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Le.test(t))t=parseFloat(t);else return t;const n=cS(t,e.target.x),r=cS(t,e.target.y);return`${n}% ${r}%`}},l6={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=oo.parse(t);if(s.length>5)return r;const o=oo.createTransformer(t),l=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,h=n.y.scale*e.y;s[0+l]/=c,s[1+l]/=h;const p=Rt(c,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=p),typeof s[3+l]=="number"&&(s[3+l]/=p),o(s)}};let Wm=!1;class u6 extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;xB(c6),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),Wm&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),bd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,Wm=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||wt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Vv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;Wm=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jP(t){const[e,n]=IB(),r=V.useContext(gR);return J.jsx(u6,{...t,layoutGroup:r,switchLayoutGroup:V.useContext(vP),isPresent:e,safeToRemove:n})}const c6={borderRadius:{...xu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xu,borderTopRightRadius:xu,borderBottomLeftRadius:xu,borderBottomRightRadius:xu,boxShadow:l6};function h6(t,e,n){const r=kn(t)?t:Al(t);return r.start(qv("",r,e,n)),r.animation}const d6=(t,e)=>t.depth-e.depth;class f6{constructor(){this.children=[],this.isDirty=!1}add(e){gv(this.children,e),this.isDirty=!0}remove(e){yv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(d6),this.isDirty=!1,this.children.forEach(e)}}function p6(t,e){const n=Jn.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(io(r),t(o-e))};return wt.setup(r,!0),()=>io(r)}const UP=["TopLeft","TopRight","BottomLeft","BottomRight"],m6=UP.length,hS=t=>typeof t=="string"?parseFloat(t):t,dS=t=>typeof t=="number"||Le.test(t);function g6(t,e,n,r,s,o){s?(t.opacity=Rt(0,n.opacity??1,y6(r)),t.opacityExit=Rt(e.opacity??1,0,v6(r))):o&&(t.opacity=Rt(e.opacity??1,n.opacity??1,r));for(let l=0;l<m6;l++){const c=`border${UP[l]}Radius`;let h=fS(e,c),p=fS(n,c);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||dS(h)===dS(p)?(t[c]=Math.max(Rt(hS(h),hS(p),r),0),(Ps.test(p)||Ps.test(h))&&(t[c]+="%")):t[c]=p}(e.rotate||n.rotate)&&(t.rotate=Rt(e.rotate||0,n.rotate||0,r))}function fS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const y6=FP(0,.5,RR),v6=FP(.5,.95,xr);function FP(t,e,n){return r=>r<t?0:r>e?1:n(gc(t,e,r))}function pS(t,e){t.min=e.min,t.max=e.max}function Kr(t,e){pS(t.x,e.x),pS(t.y,e.y)}function mS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function gS(t,e,n,r,s){return t-=e,t=nf(t,1/n,r),s!==void 0&&(t=nf(t,1/s,r)),t}function _6(t,e=0,n=1,r=.5,s,o=t,l=t){if(Ps.test(e)&&(e=parseFloat(e),e=Rt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Rt(o.min,o.max,r);t===o&&(c-=e),t.min=gS(t.min,e,n,c,s),t.max=gS(t.max,e,n,c,s)}function yS(t,e,[n,r,s],o,l){_6(t,e[n],e[r],e[s],e.scale,o,l)}const w6=["x","scaleX","originX"],E6=["y","scaleY","originY"];function vS(t,e,n,r){yS(t.x,e,w6,n?n.x:void 0,r?r.x:void 0),yS(t.y,e,E6,n?n.y:void 0,r?r.y:void 0)}function _S(t){return t.translate===0&&t.scale===1}function $P(t){return _S(t.x)&&_S(t.y)}function wS(t,e){return t.min===e.min&&t.max===e.max}function T6(t,e){return wS(t.x,e.x)&&wS(t.y,e.y)}function ES(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function BP(t,e){return ES(t.x,e.x)&&ES(t.y,e.y)}function TS(t){return Mn(t.x)/Mn(t.y)}function SS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class S6{constructor(){this.members=[]}add(e){gv(this.members,e),e.scheduleRender()}remove(e){if(yv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function I6(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:m,rotateX:y,rotateY:w,skewX:S,skewY:A}=n;p&&(r=`perspective(${p}px) ${r}`),m&&(r+=`rotate(${m}deg) `),y&&(r+=`rotateX(${y}deg) `),w&&(r+=`rotateY(${w}deg) `),S&&(r+=`skewX(${S}deg) `),A&&(r+=`skewY(${A}deg) `)}const c=t.x.scale*e.x,h=t.y.scale*e.y;return(c!==1||h!==1)&&(r+=`scale(${c}, ${h})`),r||"none"}const qm=["","X","Y","Z"],b6=1e3;let A6=0;function Hm(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function zP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=PP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",wt,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&zP(r)}function WP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e?.()){this.id=A6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(k6),this.nodes.forEach(O6),this.nodes.forEach(N6),this.nodes.forEach(C6)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new f6)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new wv),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=iP(l)&&!EB(l),this.instance=l;const{layoutId:c,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),t){let m,y=0;const w=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{y=window.innerWidth}),t(l,()=>{const S=window.innerWidth;S!==y&&(y=S,this.root.updateBlockedByResize=!0,m&&m(),m=p6(w,250),bd.hasAnimatedSinceResize&&(bd.hasAnimatedSinceResize=!1,this.nodes.forEach(AS)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:w,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||p.getDefaultTransition()||U6,{onLayoutAnimationStart:C,onLayoutAnimationComplete:R}=p.getProps(),O=!this.targetLayout||!BP(this.targetLayout,S),U=!y&&w;if(this.options.layoutRoot||this.resumeFrom||U||y&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Ov(A,"layout"),onPlay:C,onComplete:R};(p.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(m,U)}else y||AS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(V6),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(IS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(bS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(D6),this.nodes.forEach(R6),this.nodes.forEach(P6)):this.nodes.forEach(bS),this.clearAllSnapshots();const c=Jn.now();mn.delta=ui(0,1e3/60,c-mn.timestamp),mn.timestamp=c,mn.isProcessing=!0,Nm.update.process(mn),Nm.preRender.process(mn),Nm.render.process(mn),mn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(x6),this.sharedNodes.forEach(L6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mn(this.snapshot.measuredBox.x)&&!Mn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!$P(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,m=p!==this.prevTransformTemplateValue;l&&this.instance&&(c||Fo(this.latestValues)||m)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),F6(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Yt();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some($6))){const{scroll:p}=this.root;p&&(ul(c.x,p.offset.x),ul(c.y,p.offset.y))}return c}removeElementScroll(l){const c=Yt();if(Kr(c,l),this.scroll?.wasRoot)return c;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:m,options:y}=p;p!==this.root&&m&&y.layoutScroll&&(m.wasRoot&&Kr(c,l),ul(c.x,m.offset.x),ul(c.y,m.offset.y))}return c}applyTransform(l,c=!1){const h=Yt();Kr(h,l);for(let p=0;p<this.path.length;p++){const m=this.path[p];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&cl(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Fo(m.latestValues)&&cl(h,m.latestValues)}return Fo(this.latestValues)&&cl(h,this.latestValues),h}removeTransform(l){const c=Yt();Kr(c,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!Fo(p.latestValues))continue;Qg(p.latestValues)&&p.updateSnapshot();const m=Yt(),y=p.measurePageBox();Kr(m,y),vS(c,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,m)}return Fo(this.latestValues)&&vS(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!this.layout||!(m||y))return;this.resolvedRelativeTargetAt=mn.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Yt(),this.targetWithTransforms=Yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),K3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kr(this.target,this.layout.layoutBox),TP(this.target,this.targetDelta)):Kr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Qg(this.parent.latestValues)||EP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,h){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),rf(this.relativeTargetOrigin,c,h),Kr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===mn.timestamp&&(h=!1),h)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;Kr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,w=this.treeScale.y;i3(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Yt());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mS(this.prevProjectionDelta.x,this.projectionDelta.x),mS(this.prevProjectionDelta.y,this.projectionDelta.y)),Xu(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==w||!SS(this.projectionDelta.x,this.prevProjectionDelta.x)||!SS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hl(),this.projectionDelta=hl(),this.projectionDeltaWithTransform=hl()}setAnimationOrigin(l,c=!1){const h=this.snapshot,p=h?h.latestValues:{},m={...this.latestValues},y=hl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const w=Yt(),S=h?h.source:void 0,A=this.layout?this.layout.source:void 0,C=S!==A,R=this.getStack(),O=!R||R.members.length<=1,U=!!(C&&!O&&this.options.crossfade===!0&&!this.path.some(j6));this.animationProgress=0;let N;this.mixTargetDelta=K=>{const H=K/1e3;RS(y.x,l.x,H),RS(y.y,l.y,H),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rf(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),M6(this.relativeTarget,this.relativeTargetOrigin,w,H),N&&T6(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Yt()),Kr(N,this.relativeTarget)),C&&(this.animationValues=m,g6(m,p,this.latestValues,H,U,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{bd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Al(0)),this.currentAnimation=h6(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(b6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:p,latestValues:m}=l;if(!(!c||!h||!p)){if(this!==l&&this.layout&&p&&qP(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||Yt();const y=Mn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+y;const w=Mn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+w}Kr(c,h),cl(c,m),Xu(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new S6),this.sharedNodes.get(l).add(c);const p=c.options.initialPromotionConfig;c.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const p={};h.z&&Hm("z",l,p,this.animationValues);for(let m=0;m<qm.length;m++)Hm(`rotate${qm[m]}`,l,p,this.animationValues),Hm(`skew${qm[m]}`,l,p,this.animationValues);l.render();for(const m in p)l.setStaticValue(m,p[m]),this.animationValues&&(this.animationValues[m]=p[m]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Id(c?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Id(c?.pointerEvents)||""),this.hasProjected&&!Fo(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=I6(this.projectionDeltaWithTransform,this.treeScale,m);h&&(y=h(m,y)),l.transform=y;const{x:w,y:S}=this.projectionDelta;l.transformOrigin=`${w.origin*100}% ${S.origin*100}% 0`,p.animationValues?l.opacity=p===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const A in wc){if(m[A]===void 0)continue;const{correct:C,applyTo:R,isCSSVariable:O}=wc[A],U=y==="none"?m[A]:C(m[A],p);if(R){const N=R.length;for(let K=0;K<N;K++)l[R[K]]=U}else O?this.options.visualElement.renderState.vars[A]=U:l[A]=U}this.options.layoutId&&(l.pointerEvents=p===this?Id(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(IS),this.root.sharedNodes.clear()}}}function R6(t){t.updateLayout()}function P6(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Ar(m=>{const y=o?e.measuredBox[m]:e.layoutBox[m],w=Mn(y);y.min=n[m].min,y.max=y.min+w}):qP(s,e.layoutBox,n)&&Ar(m=>{const y=o?e.measuredBox[m]:e.layoutBox[m],w=Mn(n[m]);y.max=y.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+w)});const l=hl();Xu(l,n,e.layoutBox);const c=hl();o?Xu(c,t.applyTransform(r,!0),e.measuredBox):Xu(c,n,e.layoutBox);const h=!$P(l);let p=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:y,layout:w}=m;if(y&&w){const S=Yt();rf(S,e.layoutBox,y.layoutBox);const A=Yt();rf(A,n,w.layoutBox),BP(S,A)||(p=!0),m.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=S,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function k6(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function C6(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function x6(t){t.clearSnapshot()}function IS(t){t.clearMeasurements()}function bS(t){t.isLayoutDirty=!1}function D6(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function AS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function O6(t){t.resolveTargetDelta()}function N6(t){t.calcProjection()}function V6(t){t.resetSkewAndRotation()}function L6(t){t.removeLeadSnapshot()}function RS(t,e,n){t.translate=Rt(e.translate,0,n),t.scale=Rt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function PS(t,e,n,r){t.min=Rt(e.min,n.min,r),t.max=Rt(e.max,n.max,r)}function M6(t,e,n,r){PS(t.x,e.x,n.x,r),PS(t.y,e.y,n.y,r)}function j6(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const U6={duration:.45,ease:[.4,0,.1,1]},kS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),CS=kS("applewebkit/")&&!kS("chrome/")?Math.round:xr;function xS(t){t.min=CS(t.min),t.max=CS(t.max)}function F6(t){xS(t.x),xS(t.y)}function qP(t,e,n){return t==="position"||t==="preserve-aspect"&&!H3(TS(e),TS(n),.2)}function $6(t){return t!==t.root&&t.scroll?.wasRoot}const B6=WP({attachResizeListener:(t,e)=>Ec(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Km={current:void 0},HP=WP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Km.current){const t=new B6({});t.mount(window),t.setOptions({layoutScroll:!0}),Km.current=t}return Km.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),z6={pan:{Feature:a6},drag:{Feature:o6,ProjectionNode:HP,MeasureLayout:jP}};function DS(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&wt.postRender(()=>o(e,jc(e)))}class W6 extends lo{mount(){const{current:e}=this.node;e&&(this.unmount=gB(e,(n,r)=>(DS(this.node,r,"Start"),s=>DS(this.node,s,"End"))))}unmount(){}}class q6 extends lo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vc(Ec(this.node.current,"focus",()=>this.onFocus()),Ec(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function OS(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&wt.postRender(()=>o(e,jc(e)))}class H6 extends lo{mount(){const{current:e}=this.node;e&&(this.unmount=wB(e,(n,r)=>(OS(this.node,r,"Start"),(s,{success:o})=>OS(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ny=new WeakMap,Gm=new WeakMap,K6=t=>{const e=ny.get(t.target);e&&e(t)},G6=t=>{t.forEach(K6)};function Q6({root:t,...e}){const n=t||document;Gm.has(n)||Gm.set(n,{});const r=Gm.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(G6,{root:t,...e})),r[s]}function J6(t,e,n){const r=Q6(e);return ny.set(t,n),r.observe(t),()=>{ny.delete(t),r.unobserve(t)}}const Y6={some:0,all:1};class X6 extends lo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Y6[s]},c=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),w=p?m:y;w&&w(h)};return J6(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Z6(e,n))&&this.startObserver()}unmount(){}}function Z6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const e5={inView:{Feature:X6},tap:{Feature:H6},focus:{Feature:q6},hover:{Feature:W6}},t5={layout:{ProjectionNode:HP,MeasureLayout:jP}},n5={...F3,...e5,...z6,...t5},ld=n3(n5,m3),Hv=()=>J.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-gradient-to-br from-brand-dark via-brand-dark to-brand-blue",children:[J.jsx(ld.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"mb-8",children:J.jsx("h1",{className:"text-5xl font-bold text-white",children:""})}),J.jsxs(ld.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"relative",children:[J.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-white/10"}),J.jsx(ld.div,{className:"absolute inset-0 w-16 h-16 rounded-full border-4 border-transparent border-t-brand-accent",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})]}),J.jsx(ld.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-6 text-white/70 text-sm",children:" ..."})]}),lr=({children:t})=>{const{user:e,subscription:n,loading:r}=xj(),s=Os();return r?J.jsx(Hv,{}):e?!["/profile","/renew","/pricing","/dashboard","/app"].some(l=>s.pathname===l||s.pathname.startsWith("/app"))&&(!n||n.status==="expired")?J.jsx(Jm,{to:"/pricing",replace:!0,state:{message:"     ."}}):J.jsx(J.Fragment,{children:t}):J.jsx(Jm,{to:"/login",state:{from:s},replace:!0})};function r5(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const s5=t=>{switch(t){case"success":return a5;case"info":return u5;case"warning":return l5;case"error":return c5;default:return null}},i5=Array(12).fill(0),o5=({visible:t,className:e})=>ce.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ce.createElement("div",{className:"sonner-spinner"},i5.map((n,r)=>ce.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),a5=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),l5=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),u5=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),c5=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),h5=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ce.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ce.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),d5=()=>{const[t,e]=ce.useState(document.hidden);return ce.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let ry=1;class f5{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,o=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:ry++,l=this.toasts.find(h=>h.id===o),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(h=>h.id===o?(this.publish({...h,...e,id:o,title:r}),{...h,...e,id:o,dismissible:c,title:r}):h):this.addToast({title:r,...s,dismissible:c,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,l;const c=s.then(async p=>{if(l=["resolve",p],ce.isValidElement(p))o=!1,this.create({id:r,type:"default",message:p});else if(m5(p)&&!p.ok){o=!1;const y=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,w=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description,A=typeof y=="object"&&!ce.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:w,...A})}else if(p instanceof Error){o=!1;const y=typeof n.error=="function"?await n.error(p):n.error,w=typeof n.description=="function"?await n.description(p):n.description,A=typeof y=="object"&&!ce.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:w,...A})}else if(n.success!==void 0){o=!1;const y=typeof n.success=="function"?await n.success(p):n.success,w=typeof n.description=="function"?await n.description(p):n.description,A=typeof y=="object"&&!ce.isValidElement(y)?y:{message:y};this.create({id:r,type:"success",description:w,...A})}}).catch(async p=>{if(l=["reject",p],n.error!==void 0){o=!1;const m=typeof n.error=="function"?await n.error(p):n.error,y=typeof n.description=="function"?await n.description(p):n.description,S=typeof m=="object"&&!ce.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:y,...S})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),h=()=>new Promise((p,m)=>c.then(()=>l[0]==="reject"?m(l[1]):p(l[1])).catch(m));return typeof r!="string"&&typeof r!="number"?{unwrap:h}:Object.assign(r,{unwrap:h})},this.custom=(e,n)=>{const r=n?.id||ry++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Gn=new f5,p5=(t,e)=>{const n=e?.id||ry++;return Gn.addToast({title:t,...e,id:n}),n},m5=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",g5=p5,y5=()=>Gn.toasts,v5=()=>Gn.getActiveToasts(),n9=Object.assign(g5,{success:Gn.success,info:Gn.info,warning:Gn.warning,error:Gn.error,custom:Gn.custom,message:Gn.message,promise:Gn.promise,dismiss:Gn.dismiss,loading:Gn.loading},{getHistory:y5,getToasts:v5});r5("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function ud(t){return t.label!==void 0}const _5=3,w5="24px",E5="16px",NS=4e3,T5=356,S5=14,I5=45,b5=200;function ws(...t){return t.filter(Boolean).join(" ")}function A5(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const R5=t=>{var e,n,r,s,o,l,c,h,p;const{invert:m,toast:y,unstyled:w,interacting:S,setHeights:A,visibleToasts:C,heights:R,index:O,toasts:U,expanded:N,removeToast:K,defaultRichColors:H,closeButton:X,style:k,cancelButtonStyle:b,actionButtonStyle:P,className:L="",descriptionClassName:M="",duration:B,position:x,gap:We,expandByDefault:it,classNames:je,icons:_e,closeButtonAriaLabel:re="Close toast"}=t,[fe,le]=ce.useState(null),[$,ee]=ce.useState(null),[de,ge]=ce.useState(!1),[Ee,Ce]=ce.useState(!1),[Be,Te]=ce.useState(!1),[qe,kt]=ce.useState(!1),[Yn,Un]=ce.useState(!1),[Z,Y]=ce.useState(0),[he,xe]=ce.useState(0),Ze=ce.useRef(y.duration||B||NS),Tt=ce.useRef(null),Qe=ce.useRef(null),ht=O===0,xn=O+1<=C,Nt=y.type,_n=y.dismissible!==!1,fi=y.className||"",rt=y.descriptionClassName||"",Vt=ce.useMemo(()=>R.findIndex(De=>De.toastId===y.id)||0,[R,y.id]),pi=ce.useMemo(()=>{var De;return(De=y.closeButton)!=null?De:X},[y.closeButton,X]),Nr=ce.useMemo(()=>y.duration||B||NS,[y.duration,B]),mi=ce.useRef(0),Fn=ce.useRef(0),Vr=ce.useRef(0),Lr=ce.useRef(null),[rs,gi]=x.split("-"),yi=ce.useMemo(()=>R.reduce((De,lt,Lt)=>Lt>=Vt?De:De+lt.height,0),[R,Vt]),$n=d5(),vi=y.invert||m,gr=Nt==="loading";Fn.current=ce.useMemo(()=>Vt*We+yi,[Vt,yi]),ce.useEffect(()=>{Ze.current=Nr},[Nr]),ce.useEffect(()=>{ge(!0)},[]),ce.useEffect(()=>{const De=Qe.current;if(De){const lt=De.getBoundingClientRect().height;return xe(lt),A(Lt=>[{toastId:y.id,height:lt,position:y.position},...Lt]),()=>A(Lt=>Lt.filter(en=>en.toastId!==y.id))}},[A,y.id]),ce.useLayoutEffect(()=>{if(!de)return;const De=Qe.current,lt=De.style.height;De.style.height="auto";const Lt=De.getBoundingClientRect().height;De.style.height=lt,xe(Lt),A(en=>en.find(Ct=>Ct.toastId===y.id)?en.map(Ct=>Ct.toastId===y.id?{...Ct,height:Lt}:Ct):[{toastId:y.id,height:Lt,position:y.position},...en])},[de,y.title,y.description,A,y.id,y.jsx,y.action,y.cancel]);const Dn=ce.useCallback(()=>{Ce(!0),Y(Fn.current),A(De=>De.filter(lt=>lt.toastId!==y.id)),setTimeout(()=>{K(y)},b5)},[y,K,A,Fn]);ce.useEffect(()=>{if(y.promise&&Nt==="loading"||y.duration===1/0||y.type==="loading")return;let De;return N||S||$n?(()=>{if(Vr.current<mi.current){const en=new Date().getTime()-mi.current;Ze.current=Ze.current-en}Vr.current=new Date().getTime()})():(()=>{Ze.current!==1/0&&(mi.current=new Date().getTime(),De=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),Dn()},Ze.current))})(),()=>clearTimeout(De)},[N,S,y,Nt,$n,Dn]),ce.useEffect(()=>{y.delete&&(Dn(),y.onDismiss==null||y.onDismiss.call(y,y))},[Dn,y.delete]);function Mr(){var De;if(_e?.loading){var lt;return ce.createElement("div",{className:ws(je?.loader,y==null||(lt=y.classNames)==null?void 0:lt.loader,"sonner-loader"),"data-visible":Nt==="loading"},_e.loading)}return ce.createElement(o5,{className:ws(je?.loader,y==null||(De=y.classNames)==null?void 0:De.loader),visible:Nt==="loading"})}const jr=y.icon||_e?.[Nt]||s5(Nt);var pt,_i;return ce.createElement("li",{tabIndex:0,ref:Qe,className:ws(L,fi,je?.toast,y==null||(e=y.classNames)==null?void 0:e.toast,je?.default,je?.[Nt],y==null||(n=y.classNames)==null?void 0:n[Nt]),"data-sonner-toast":"","data-rich-colors":(pt=y.richColors)!=null?pt:H,"data-styled":!(y.jsx||y.unstyled||w),"data-mounted":de,"data-promise":!!y.promise,"data-swiped":Yn,"data-removed":Ee,"data-visible":xn,"data-y-position":rs,"data-x-position":gi,"data-index":O,"data-front":ht,"data-swiping":Be,"data-dismissible":_n,"data-type":Nt,"data-invert":vi,"data-swipe-out":qe,"data-swipe-direction":$,"data-expanded":!!(N||it&&de),"data-testid":y.testId,style:{"--index":O,"--toasts-before":O,"--z-index":U.length-O,"--offset":`${Ee?Z:Fn.current}px`,"--initial-height":it?"auto":`${he}px`,...k,...y.style},onDragEnd:()=>{Te(!1),le(null),Lr.current=null},onPointerDown:De=>{De.button!==2&&(gr||!_n||(Tt.current=new Date,Y(Fn.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(Te(!0),Lr.current={x:De.clientX,y:De.clientY})))},onPointerUp:()=>{var De,lt,Lt;if(qe||!_n)return;Lr.current=null;const en=Number(((De=Qe.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),On=Number(((lt=Qe.current)==null?void 0:lt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ct=new Date().getTime()-((Lt=Tt.current)==null?void 0:Lt.getTime()),Ft=fe==="x"?en:On,Xn=Math.abs(Ft)/Ct;if(Math.abs(Ft)>=I5||Xn>.11){Y(Fn.current),y.onDismiss==null||y.onDismiss.call(y,y),ee(fe==="x"?en>0?"right":"left":On>0?"down":"up"),Dn(),kt(!0);return}else{var $t,wn;($t=Qe.current)==null||$t.style.setProperty("--swipe-amount-x","0px"),(wn=Qe.current)==null||wn.style.setProperty("--swipe-amount-y","0px")}Un(!1),Te(!1),le(null)},onPointerMove:De=>{var lt,Lt,en;if(!Lr.current||!_n||((lt=window.getSelection())==null?void 0:lt.toString().length)>0)return;const Ct=De.clientY-Lr.current.y,Ft=De.clientX-Lr.current.x;var Xn;const $t=(Xn=t.swipeDirections)!=null?Xn:A5(x);!fe&&(Math.abs(Ft)>1||Math.abs(Ct)>1)&&le(Math.abs(Ft)>Math.abs(Ct)?"x":"y");let wn={x:0,y:0};const yr=tn=>1/(1.5+Math.abs(tn)/20);if(fe==="y"){if($t.includes("top")||$t.includes("bottom"))if($t.includes("top")&&Ct<0||$t.includes("bottom")&&Ct>0)wn.y=Ct;else{const tn=Ct*yr(Ct);wn.y=Math.abs(tn)<Math.abs(Ct)?tn:Ct}}else if(fe==="x"&&($t.includes("left")||$t.includes("right")))if($t.includes("left")&&Ft<0||$t.includes("right")&&Ft>0)wn.x=Ft;else{const tn=Ft*yr(Ft);wn.x=Math.abs(tn)<Math.abs(Ft)?tn:Ft}(Math.abs(wn.x)>0||Math.abs(wn.y)>0)&&Un(!0),(Lt=Qe.current)==null||Lt.style.setProperty("--swipe-amount-x",`${wn.x}px`),(en=Qe.current)==null||en.style.setProperty("--swipe-amount-y",`${wn.y}px`)}},pi&&!y.jsx&&Nt!=="loading"?ce.createElement("button",{"aria-label":re,"data-disabled":gr,"data-close-button":!0,onClick:gr||!_n?()=>{}:()=>{Dn(),y.onDismiss==null||y.onDismiss.call(y,y)},className:ws(je?.closeButton,y==null||(r=y.classNames)==null?void 0:r.closeButton)},(_i=_e?.close)!=null?_i:h5):null,(Nt||y.icon||y.promise)&&y.icon!==null&&(_e?.[Nt]!==null||y.icon)?ce.createElement("div",{"data-icon":"",className:ws(je?.icon,y==null||(s=y.classNames)==null?void 0:s.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||Mr():null,y.type!=="loading"?jr:null):null,ce.createElement("div",{"data-content":"",className:ws(je?.content,y==null||(o=y.classNames)==null?void 0:o.content)},ce.createElement("div",{"data-title":"",className:ws(je?.title,y==null||(l=y.classNames)==null?void 0:l.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?ce.createElement("div",{"data-description":"",className:ws(M,rt,je?.description,y==null||(c=y.classNames)==null?void 0:c.description)},typeof y.description=="function"?y.description():y.description):null),ce.isValidElement(y.cancel)?y.cancel:y.cancel&&ud(y.cancel)?ce.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||b,onClick:De=>{ud(y.cancel)&&_n&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,De),Dn())},className:ws(je?.cancelButton,y==null||(h=y.classNames)==null?void 0:h.cancelButton)},y.cancel.label):null,ce.isValidElement(y.action)?y.action:y.action&&ud(y.action)?ce.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||P,onClick:De=>{ud(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,De),!De.defaultPrevented&&Dn())},className:ws(je?.actionButton,y==null||(p=y.classNames)==null?void 0:p.actionButton)},y.action.label):null)};function VS(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function P5(t,e){const n={};return[t,e].forEach((r,s)=>{const o=s===1,l=o?"--mobile-offset":"--offset",c=o?E5:w5;function h(p){["top","right","bottom","left"].forEach(m=>{n[`${l}-${m}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?h(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?n[`${l}-${p}`]=c:n[`${l}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):h(c)}),n}const k5=ce.forwardRef(function(e,n){const{id:r,invert:s,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:h,className:p,offset:m,mobileOffset:y,theme:w="light",richColors:S,duration:A,style:C,visibleToasts:R=_5,toastOptions:O,dir:U=VS(),gap:N=S5,icons:K,containerAriaLabel:H="Notifications"}=e,[X,k]=ce.useState([]),b=ce.useMemo(()=>r?X.filter(de=>de.toasterId===r):X.filter(de=>!de.toasterId),[X,r]),P=ce.useMemo(()=>Array.from(new Set([o].concat(b.filter(de=>de.position).map(de=>de.position)))),[b,o]),[L,M]=ce.useState([]),[B,x]=ce.useState(!1),[We,it]=ce.useState(!1),[je,_e]=ce.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),re=ce.useRef(null),fe=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),le=ce.useRef(null),$=ce.useRef(!1),ee=ce.useCallback(de=>{k(ge=>{var Ee;return(Ee=ge.find(Ce=>Ce.id===de.id))!=null&&Ee.delete||Gn.dismiss(de.id),ge.filter(({id:Ce})=>Ce!==de.id)})},[]);return ce.useEffect(()=>Gn.subscribe(de=>{if(de.dismiss){requestAnimationFrame(()=>{k(ge=>ge.map(Ee=>Ee.id===de.id?{...Ee,delete:!0}:Ee))});return}setTimeout(()=>{N1.flushSync(()=>{k(ge=>{const Ee=ge.findIndex(Ce=>Ce.id===de.id);return Ee!==-1?[...ge.slice(0,Ee),{...ge[Ee],...de},...ge.slice(Ee+1)]:[de,...ge]})})})}),[X]),ce.useEffect(()=>{if(w!=="system"){_e(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?_e("dark"):_e("light")),typeof window>"u")return;const de=window.matchMedia("(prefers-color-scheme: dark)");try{de.addEventListener("change",({matches:ge})=>{_e(ge?"dark":"light")})}catch{de.addListener(({matches:Ee})=>{try{_e(Ee?"dark":"light")}catch(Ce){console.error(Ce)}})}},[w]),ce.useEffect(()=>{X.length<=1&&x(!1)},[X]),ce.useEffect(()=>{const de=ge=>{var Ee;if(l.every(Te=>ge[Te]||ge.code===Te)){var Be;x(!0),(Be=re.current)==null||Be.focus()}ge.code==="Escape"&&(document.activeElement===re.current||(Ee=re.current)!=null&&Ee.contains(document.activeElement))&&x(!1)};return document.addEventListener("keydown",de),()=>document.removeEventListener("keydown",de)},[l]),ce.useEffect(()=>{if(re.current)return()=>{le.current&&(le.current.focus({preventScroll:!0}),le.current=null,$.current=!1)}},[re.current]),ce.createElement("section",{ref:n,"aria-label":`${H} ${fe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((de,ge)=>{var Ee;const[Ce,Be]=de.split("-");return b.length?ce.createElement("ol",{key:de,dir:U==="auto"?VS():U,tabIndex:-1,ref:re,className:p,"data-sonner-toaster":!0,"data-sonner-theme":je,"data-y-position":Ce,"data-x-position":Be,style:{"--front-toast-height":`${((Ee=L[0])==null?void 0:Ee.height)||0}px`,"--width":`${T5}px`,"--gap":`${N}px`,...C,...P5(m,y)},onBlur:Te=>{$.current&&!Te.currentTarget.contains(Te.relatedTarget)&&($.current=!1,le.current&&(le.current.focus({preventScroll:!0}),le.current=null))},onFocus:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||$.current||($.current=!0,le.current=Te.relatedTarget)},onMouseEnter:()=>x(!0),onMouseMove:()=>x(!0),onMouseLeave:()=>{We||x(!1)},onDragEnd:()=>x(!1),onPointerDown:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||it(!0)},onPointerUp:()=>it(!1)},b.filter(Te=>!Te.position&&ge===0||Te.position===de).map((Te,qe)=>{var kt,Yn;return ce.createElement(R5,{key:Te.id,icons:K,index:qe,toast:Te,defaultRichColors:S,duration:(kt=O?.duration)!=null?kt:A,className:O?.className,descriptionClassName:O?.descriptionClassName,invert:s,visibleToasts:R,closeButton:(Yn=O?.closeButton)!=null?Yn:h,interacting:We,position:de,style:O?.style,unstyled:O?.unstyled,classNames:O?.classNames,cancelButtonStyle:O?.cancelButtonStyle,actionButtonStyle:O?.actionButtonStyle,closeButtonAriaLabel:O?.closeButtonAriaLabel,removeToast:ee,toasts:b.filter(Un=>Un.position==Te.position),heights:L.filter(Un=>Un.position==Te.position),setHeights:M,expandByDefault:c,gap:N,expanded:B,swipeDirections:e.swipeDirections})})):null}))}),C5=V.lazy(()=>at(()=>import("./LandingPage-mGwbu4js.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])).then(t=>({default:t.LandingPage}))),x5=V.lazy(()=>at(()=>import("./FeaturesPage-D0FczCwD.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,20,25,22,18])).then(t=>({default:t.FeaturesPage}))),D5=V.lazy(()=>at(()=>import("./PricingPage-mp1flJnc.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,22])).then(t=>({default:t.PricingPage}))),O5=V.lazy(()=>at(()=>import("./UnitsPage-CRtA-658.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,28,29])).then(t=>({default:t.UnitsPage}))),N5=V.lazy(()=>at(()=>import("./AboutPage-C68han6_.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,31,32])).then(t=>({default:t.AboutPage}))),V5=V.lazy(()=>at(()=>import("./ContactPage-D-0MxYNY.js"),__vite__mapDeps([33,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,34])).then(t=>({default:t.ContactPage}))),L5=V.lazy(()=>at(()=>import("./LoginPage-B7svgoMb.js"),__vite__mapDeps([35,2,1,3,4,5,6,7,8,9,10,11,12,13,14])).then(t=>({default:t.LoginPage}))),M5=V.lazy(()=>at(()=>import("./RegisterPage-uSj6nOXZ.js"),__vite__mapDeps([36,2,1,3,4,5,6,7,8,9,10,11,12,13,14,37])).then(t=>({default:t.RegisterPage}))),j5=V.lazy(()=>at(()=>import("./VerifyEmailPage-Dzm1z3ew.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,34,23,39])).then(t=>({default:t.VerifyEmailPage}))),U5=V.lazy(()=>at(()=>import("./ForgotPasswordPage-DSSD8Zb4.js"),__vite__mapDeps([40,2,1,3,4,5,6,7,8,9,10,11,12,13,14,34])).then(t=>({default:t.ForgotPasswordPage}))),F5=V.lazy(()=>at(()=>import("./Dashboard-CZOOMLpB.js"),__vite__mapDeps([41,32,4,42,31,43,21,6,19,3,5,44])).then(t=>({default:t.Dashboard}))),LS=V.lazy(()=>at(()=>import("./Properties-QRtl13Q3.js"),__vite__mapDeps([45,46,47,2,9,4,25,48,28,12,49,50,3,5])).then(t=>({default:t.Properties}))),MS=V.lazy(()=>at(()=>import("./Units-BJxSz9Dy.js"),__vite__mapDeps([51,46,47,2,9,4,52,48,28,3,49,19,50])).then(t=>({default:t.Units}))),jS=V.lazy(()=>at(()=>import("./Tenants-DYE0jRja.js"),__vite__mapDeps([53,2,46,47,9,4,48,28,13,14,49,50,19,7])).then(t=>({default:t.Tenants}))),US=V.lazy(()=>at(()=>import("./Contracts-Ciy1LvSw.js"),__vite__mapDeps([54,46,47,2,9,4,52,48,28,6,49,55,50,19])).then(t=>({default:t.Contracts}))),FS=V.lazy(()=>at(()=>import("./Payments-iMTscitI.js"),__vite__mapDeps([56,2,46,47,9,4,52,34,57,58,28,6,20])).then(t=>({default:t.Payments}))),$S=V.lazy(()=>at(()=>import("./Maintenance-CUZlOPcd.js"),__vite__mapDeps([59,46,47,2,9,4,52,48,58,57,34,21,49])).then(t=>({default:t.Maintenance}))),BS=V.lazy(()=>at(()=>import("./Reports-D-9tPjcJ.js"),__vite__mapDeps([60,2,47,52,58,4,5,18,21,61])).then(t=>({default:t.Reports}))),$5=V.lazy(()=>at(()=>import("./ProfilePage-BUYFDbAi.js"),__vite__mapDeps([62,1,2,3,4,5,6,7,8,9,10,11,12,13,14,32])).then(t=>({default:t.ProfilePage})));V.lazy(()=>at(()=>import("./Billing-DgYuyRLb.js"),__vite__mapDeps([63,9,4,48,28,64,61])).then(t=>({default:t.Billing})));const B5=V.lazy(()=>at(()=>import("./Employees-B8clXXZ5.js"),__vite__mapDeps([65,2,48,4,28,50,5,14,13,55,11,9,17,66,64])).then(t=>({default:t.Employees}))),zS=V.lazy(()=>at(()=>import("./Tasks-BhPoR9ZM.js"),__vite__mapDeps([67,2,48,4,28,57,68,44,50,9,7,55,11])).then(t=>({default:t.Tasks}))),z5=V.lazy(()=>at(()=>import("./Sales-DN5RgXEj.js"),__vite__mapDeps([69,2,48,4,18,19,5,28,29,3,64,49,50,43,70])).then(t=>({default:t.Sales}))),W5=V.lazy(()=>at(()=>import("./Settings-D3xe1s-E.js"),__vite__mapDeps([71,7,4,72,37,66,64,61,25,39,50])).then(t=>({default:t.Settings}))),q5=V.lazy(()=>at(()=>import("./EmployeeLoginPage-BsnwqCcC.js"),__vite__mapDeps([73,2,5,4,68,14,37,66,64])).then(t=>({default:t.EmployeeLoginPage}))),H5=V.lazy(()=>at(()=>import("./EmployeeDashboard-DiWsl7LU.js"),__vite__mapDeps([74,42,4,5,3,31,19,6,21,43])).then(t=>({default:t.EmployeeDashboard}))),Js=V.lazy(()=>at(()=>import("./EmployeeLayout-CZIunnXn.js"),__vite__mapDeps([75,5,4,42,3,31,19,6,21,43,70,37,8,72])).then(t=>({default:t.EmployeeLayout}))),ur=V.lazy(()=>at(()=>import("./DashboardLayout-1MA7mmQC.js"),__vite__mapDeps([76,5,4,9,42,3,31,19,6,21,43,70,8,10,72,11])).then(t=>({default:t.DashboardLayout})));function K5(){return J.jsx("div",{dir:"rtl",className:"font-cairo",children:J.jsx(Dj,{children:J.jsxs(I4,{children:[J.jsx(V.Suspense,{fallback:J.jsx(Hv,{}),children:J.jsxs(ZC,{children:[J.jsx(Ye,{path:"/",element:J.jsx(C5,{})}),J.jsx(Ye,{path:"/login",element:J.jsx(L5,{})}),J.jsx(Ye,{path:"/register",element:J.jsx(M5,{})}),J.jsx(Ye,{path:"/verify-email",element:J.jsx(j5,{})}),J.jsx(Ye,{path:"/forgot-password",element:J.jsx(U5,{})}),J.jsx(Ye,{path:"/features",element:J.jsx(x5,{})}),J.jsx(Ye,{path:"/pricing",element:J.jsx(D5,{})}),J.jsx(Ye,{path:"/units",element:J.jsx(O5,{})}),J.jsx(Ye,{path:"/about",element:J.jsx(N5,{})}),J.jsx(Ye,{path:"/contact",element:J.jsx(V5,{})}),J.jsx(Ye,{path:"/dashboard",element:J.jsx(Jm,{to:"/app",replace:!0})}),J.jsx(Ye,{path:"/app",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(F5,{})})})}),J.jsx(Ye,{path:"/app/properties",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(LS,{})})})}),J.jsx(Ye,{path:"/app/units",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(MS,{})})})}),J.jsx(Ye,{path:"/app/tenants",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(jS,{})})})}),J.jsx(Ye,{path:"/app/contracts",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(US,{})})})}),J.jsx(Ye,{path:"/app/payments",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(FS,{})})})}),J.jsx(Ye,{path:"/app/maintenance",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx($S,{})})})}),J.jsx(Ye,{path:"/app/reports",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(BS,{})})})}),J.jsx(Ye,{path:"/app/settings",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(W5,{})})})}),J.jsx(Ye,{path:"/profile",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx($5,{})})})}),J.jsx(Ye,{path:"/app/employees",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(B5,{})})})}),J.jsx(Ye,{path:"/app/tasks",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(zS,{})})})}),J.jsx(Ye,{path:"/app/sales",element:J.jsx(lr,{children:J.jsx(ur,{children:J.jsx(z5,{})})})}),J.jsx(Ye,{path:"/employee/login",element:J.jsx(q5,{})}),J.jsx(Ye,{path:"/employee/dashboard",element:J.jsx(Js,{children:J.jsx(H5,{})})}),J.jsx(Ye,{path:"/employee/properties",element:J.jsx(Js,{children:J.jsx(LS,{})})}),J.jsx(Ye,{path:"/employee/units",element:J.jsx(Js,{children:J.jsx(MS,{})})}),J.jsx(Ye,{path:"/employee/tenants",element:J.jsx(Js,{children:J.jsx(jS,{})})}),J.jsx(Ye,{path:"/employee/contracts",element:J.jsx(Js,{children:J.jsx(US,{})})}),J.jsx(Ye,{path:"/employee/payments",element:J.jsx(Js,{children:J.jsx(FS,{})})}),J.jsx(Ye,{path:"/employee/maintenance",element:J.jsx(Js,{children:J.jsx($S,{})})}),J.jsx(Ye,{path:"/employee/reports",element:J.jsx(Js,{children:J.jsx(BS,{})})}),J.jsx(Ye,{path:"/employee/tasks",element:J.jsx(Js,{children:J.jsx(zS,{})})})]})}),J.jsx(k5,{position:"top-center",richColors:!0})]})})})}class G5 extends V.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.hasError?J.jsxs("div",{style:{padding:"20px",color:"red",direction:"ltr"},children:[J.jsx("h1",{children:"Something went wrong."}),J.jsx("pre",{children:this.state.error?.toString()})]}):this.props.children}}aC.createRoot(document.getElementById("root")).render(J.jsx(G5,{children:J.jsx(V.Suspense,{fallback:J.jsx(Hv,{}),children:J.jsx(S1,{basename:"/",children:J.jsx(K5,{})})})}));export{iI as L,oP as M,mv as P,ce as R,ZE as _,ly as a,Os as b,e9 as c,J5 as d,N1 as e,Af as f,Z5 as g,Q5 as h,O1 as i,J as j,dB as k,b4 as l,ld as m,IB as n,A4 as o,gR as p,V as r,n9 as t,xj as u};
