import{r as c,u as y,a as N,R as w,j as e,m as d}from"./index-mGwfGQYQ.js";import{B as u}from"./button-obQTf0hL.js";import{A as v}from"./index-CO5ioJ40.js";import{X as k}from"./x-BRS87iRj.js";import{C as h}from"./check-xDcwErbx.js";import{c as S}from"./createLucideIcon-_jMiD3q_.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],z=S("loader-circle",C),M=({isOpen:t,onClose:r,plan:s})=>{const[b,o]=c.useState("form"),[m,i]=c.useState(!1),[f,x]=c.useState(""),{subscribe:p,user:l}=y(),g=N();w.useEffect(()=>{t&&(o("form"),i(!1),l?.email&&x(l.email))},[t,l]);const j=async a=>{a.preventDefault(),i(!0),await new Promise(n=>setTimeout(n,1500)),s&&p({name:s.name,price:s.price}),i(!1),o("success")};return s?e.jsx(v,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:r}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:e.jsxs(d.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.5},className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden pointer-events-auto border border-white/20",children:[e.jsx("button",{onClick:r,className:"absolute top-4 left-4 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors z-10",children:e.jsx(k,{className:"w-5 h-5"})}),b==="form"?e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-sm font-bold text-brand-blue uppercase tracking-wider mb-2",children:"تأكيد الاشتراك"}),e.jsx("h2",{className:"text-3xl font-bold text-brand-dark mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-500",children:[e.jsx("span",{className:"text-2xl font-bold text-brand-dark",children:s.price}),e.jsxs("span",{className:"text-sm",children:["ر.س / ",s.period||"شهرياً"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 mb-8 border border-gray-100",children:[e.jsx("h4",{className:"font-bold text-brand-dark mb-4 text-sm",children:"مميزات الباقة:"}),e.jsxs("ul",{className:"space-y-3",children:[s.features.slice(0,4).map((a,n)=>e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-white border border-gray-200 flex items-center justify-center shrink-0 text-green-500",children:e.jsx(h,{className:"w-3 h-3"})}),a]},n)),s.features.length>4&&e.jsxs("li",{className:"text-xs text-gray-400 pr-8",children:["+",s.features.length-4," مميزات أخرى..."]})]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-brand-dark",children:"البريد الإلكتروني"}),e.jsx("input",{type:"email",required:!0,value:f,onChange:a=>x(a.target.value),placeholder:"name@company.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all"})]}),e.jsx(u,{variant:"gradient",className:"w-full text-lg py-4 shadow-lg shadow-brand-blue/20",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-5 h-5 animate-spin mr-2"}),"جاري المعالجة..."]}):"إكمال الاشتراك"})]})]}):e.jsxs("div",{className:"p-12 text-center flex flex-col items-center justify-center",children:[e.jsx(d.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6",children:e.jsx(h,{className:"w-10 h-10"})}),e.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-2",children:"تم الاشتراك بنجاح!"}),e.jsxs("p",{className:"text-gray-500 mb-8 max-w-xs mx-auto",children:["شكراً لاشتراكك في باقة ",s.name,". تم إرسال تفاصيل التفعيل إلى بريدك الإلكتروني."]}),e.jsx(u,{onClick:()=>{r(),g("/app")},variant:"gradient",className:"w-full shadow-lg shadow-brand-blue/20",children:"الذهاب إلى لوحة التحكم"})]})]})})]})}):null};export{M as S};
