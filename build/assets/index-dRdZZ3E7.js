function lR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function V2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fg={exports:{}},Pu={},Ug={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function cR(){if(__)return Ze;__=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,E={};function _(H,ne,ue){this.props=H,this.context=ne,this.refs=E,this.updater=ue||T}_.prototype.isReactComponent={},_.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},_.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function C(){}C.prototype=_.prototype;function D(H,ne,ue){this.props=H,this.context=ne,this.refs=E,this.updater=ue||T}var k=D.prototype=new C;k.constructor=D,j(k,_.prototype),k.isPureReactComponent=!0;var O=Array.isArray,I=Object.prototype.hasOwnProperty,$={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(H,ne,ue){var ye,Ee={},De=null,Ae=null;if(ne!=null)for(ye in ne.ref!==void 0&&(Ae=ne.ref),ne.key!==void 0&&(De=""+ne.key),ne)I.call(ne,ye)&&!P.hasOwnProperty(ye)&&(Ee[ye]=ne[ye]);var ke=arguments.length-2;if(ke===1)Ee.children=ue;else if(1<ke){for(var Je=Array(ke),pt=0;pt<ke;pt++)Je[pt]=arguments[pt+2];Ee.children=Je}if(H&&H.defaultProps)for(ye in ke=H.defaultProps,ke)Ee[ye]===void 0&&(Ee[ye]=ke[ye]);return{$$typeof:t,type:H,key:De,ref:Ae,props:Ee,_owner:$.current}}function L(H,ne){return{$$typeof:t,type:H.type,key:ne,ref:H.ref,props:H.props,_owner:H._owner}}function U(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function B(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ue){return ne[ue]})}var q=/\/+/g;function V(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):ne.toString(36)}function se(H,ne,ue,ye,Ee){var De=typeof H;(De==="undefined"||De==="boolean")&&(H=null);var Ae=!1;if(H===null)Ae=!0;else switch(De){case"string":case"number":Ae=!0;break;case"object":switch(H.$$typeof){case t:case e:Ae=!0}}if(Ae)return Ae=H,Ee=Ee(Ae),H=ye===""?"."+V(Ae,0):ye,O(Ee)?(ue="",H!=null&&(ue=H.replace(q,"$&/")+"/"),se(Ee,ne,ue,"",function(pt){return pt})):Ee!=null&&(U(Ee)&&(Ee=L(Ee,ue+(!Ee.key||Ae&&Ae.key===Ee.key?"":(""+Ee.key).replace(q,"$&/")+"/")+H)),ne.push(Ee)),1;if(Ae=0,ye=ye===""?".":ye+":",O(H))for(var ke=0;ke<H.length;ke++){De=H[ke];var Je=ye+V(De,ke);Ae+=se(De,ne,ue,Je,Ee)}else if(Je=v(H),typeof Je=="function")for(H=Je.call(H),ke=0;!(De=H.next()).done;)De=De.value,Je=ye+V(De,ke++),Ae+=se(De,ne,ue,Je,Ee);else if(De==="object")throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Ae}function Q(H,ne,ue){if(H==null)return H;var ye=[],Ee=0;return se(H,ye,"","",function(De){return ne.call(ue,De,Ee++)}),ye}function le(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(ue){(H._status===0||H._status===-1)&&(H._status=1,H._result=ue)},function(ue){(H._status===0||H._status===-1)&&(H._status=2,H._result=ue)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var me={current:null},J={transition:null},xe={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:J,ReactCurrentOwner:$};function he(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:Q,forEach:function(H,ne,ue){Q(H,function(){ne.apply(this,arguments)},ue)},count:function(H){var ne=0;return Q(H,function(){ne++}),ne},toArray:function(H){return Q(H,function(ne){return ne})||[]},only:function(H){if(!U(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Ze.Component=_,Ze.Fragment=n,Ze.Profiler=s,Ze.PureComponent=D,Ze.StrictMode=r,Ze.Suspense=d,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,Ze.act=he,Ze.cloneElement=function(H,ne,ue){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var ye=j({},H.props),Ee=H.key,De=H.ref,Ae=H._owner;if(ne!=null){if(ne.ref!==void 0&&(De=ne.ref,Ae=$.current),ne.key!==void 0&&(Ee=""+ne.key),H.type&&H.type.defaultProps)var ke=H.type.defaultProps;for(Je in ne)I.call(ne,Je)&&!P.hasOwnProperty(Je)&&(ye[Je]=ne[Je]===void 0&&ke!==void 0?ke[Je]:ne[Je])}var Je=arguments.length-2;if(Je===1)ye.children=ue;else if(1<Je){ke=Array(Je);for(var pt=0;pt<Je;pt++)ke[pt]=arguments[pt+2];ye.children=ke}return{$$typeof:t,type:H.type,key:Ee,ref:De,props:ye,_owner:Ae}},Ze.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:a,_context:H},H.Consumer=H},Ze.createElement=A,Ze.createFactory=function(H){var ne=A.bind(null,H);return ne.type=H,ne},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(H){return{$$typeof:u,render:H}},Ze.isValidElement=U,Ze.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:le}},Ze.memo=function(H,ne){return{$$typeof:f,type:H,compare:ne===void 0?null:ne}},Ze.startTransition=function(H){var ne=J.transition;J.transition={};try{H()}finally{J.transition=ne}},Ze.unstable_act=he,Ze.useCallback=function(H,ne){return me.current.useCallback(H,ne)},Ze.useContext=function(H){return me.current.useContext(H)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(H){return me.current.useDeferredValue(H)},Ze.useEffect=function(H,ne){return me.current.useEffect(H,ne)},Ze.useId=function(){return me.current.useId()},Ze.useImperativeHandle=function(H,ne,ue){return me.current.useImperativeHandle(H,ne,ue)},Ze.useInsertionEffect=function(H,ne){return me.current.useInsertionEffect(H,ne)},Ze.useLayoutEffect=function(H,ne){return me.current.useLayoutEffect(H,ne)},Ze.useMemo=function(H,ne){return me.current.useMemo(H,ne)},Ze.useReducer=function(H,ne,ue){return me.current.useReducer(H,ne,ue)},Ze.useRef=function(H){return me.current.useRef(H)},Ze.useState=function(H){return me.current.useState(H)},Ze.useSyncExternalStore=function(H,ne,ue){return me.current.useSyncExternalStore(H,ne,ue)},Ze.useTransition=function(){return me.current.useTransition()},Ze.version="18.3.1",Ze}var E_;function ux(){return E_||(E_=1,Ug.exports=cR()),Ug.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function uR(){if(N_)return Pu;N_=1;var t=ux(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,f){var g,y={},v=null,T=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(T=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(y[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:u,key:v,ref:T,props:y,_owner:s.current}}return Pu.Fragment=n,Pu.jsx=l,Pu.jsxs=l,Pu}var T_;function dR(){return T_||(T_=1,Fg.exports=uR()),Fg.exports}var o=dR(),cf={},$g={exports:{}},or={},Bg={exports:{}},zg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function hR(){return S_||(S_=1,(function(t){function e(J,xe){var he=J.length;J.push(xe);e:for(;0<he;){var H=he-1>>>1,ne=J[H];if(0<s(ne,xe))J[H]=xe,J[he]=ne,he=H;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var xe=J[0],he=J.pop();if(he!==xe){J[0]=he;e:for(var H=0,ne=J.length,ue=ne>>>1;H<ue;){var ye=2*(H+1)-1,Ee=J[ye],De=ye+1,Ae=J[De];if(0>s(Ee,he))De<ne&&0>s(Ae,Ee)?(J[H]=Ae,J[De]=he,H=De):(J[H]=Ee,J[ye]=he,H=ye);else if(De<ne&&0>s(Ae,he))J[H]=Ae,J[De]=he,H=De;else break e}}return xe}function s(J,xe){var he=J.sortIndex-xe.sortIndex;return he!==0?he:J.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,y=null,v=3,T=!1,j=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(J){for(var xe=n(f);xe!==null;){if(xe.callback===null)r(f);else if(xe.startTime<=J)r(f),xe.sortIndex=xe.expirationTime,e(d,xe);else break;xe=n(f)}}function O(J){if(E=!1,k(J),!j)if(n(d)!==null)j=!0,le(I);else{var xe=n(f);xe!==null&&me(O,xe.startTime-J)}}function I(J,xe){j=!1,E&&(E=!1,C(A),A=-1),T=!0;var he=v;try{for(k(xe),y=n(d);y!==null&&(!(y.expirationTime>xe)||J&&!B());){var H=y.callback;if(typeof H=="function"){y.callback=null,v=y.priorityLevel;var ne=H(y.expirationTime<=xe);xe=t.unstable_now(),typeof ne=="function"?y.callback=ne:y===n(d)&&r(d),k(xe)}else r(d);y=n(d)}if(y!==null)var ue=!0;else{var ye=n(f);ye!==null&&me(O,ye.startTime-xe),ue=!1}return ue}finally{y=null,v=he,T=!1}}var $=!1,P=null,A=-1,L=5,U=-1;function B(){return!(t.unstable_now()-U<L)}function q(){if(P!==null){var J=t.unstable_now();U=J;var xe=!0;try{xe=P(!0,J)}finally{xe?V():($=!1,P=null)}}else $=!1}var V;if(typeof D=="function")V=function(){D(q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Q=se.port2;se.port1.onmessage=q,V=function(){Q.postMessage(null)}}else V=function(){_(q,0)};function le(J){P=J,$||($=!0,V())}function me(J,xe){A=_(function(){J(t.unstable_now())},xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){j||T||(j=!0,le(I))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(J){switch(v){case 1:case 2:case 3:var xe=3;break;default:xe=v}var he=v;v=xe;try{return J()}finally{v=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,xe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=v;v=J;try{return xe()}finally{v=he}},t.unstable_scheduleCallback=function(J,xe,he){var H=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?H+he:H):he=H,J){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=he+ne,J={id:g++,callback:xe,priorityLevel:J,startTime:he,expirationTime:ne,sortIndex:-1},he>H?(J.sortIndex=he,e(f,J),n(d)===null&&J===n(f)&&(E?(C(A),A=-1):E=!0,me(O,he-H))):(J.sortIndex=ne,e(d,J),j||T||(j=!0,le(I))),J},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(J){var xe=v;return function(){var he=v;v=xe;try{return J.apply(this,arguments)}finally{v=he}}}})(zg)),zg}var j_;function fR(){return j_||(j_=1,Bg.exports=hR()),Bg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function mR(){if(k_)return or;k_=1;var t=ux(),e=fR();function n(i){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,c){l(i,c),l(i+"Capture",c)}function l(i,c){for(s[i]=c,i=0;i<c.length;i++)r.add(c[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(i){return d.call(y,i)?!0:d.call(g,i)?!1:f.test(i)?y[i]=!0:(g[i]=!0,!1)}function T(i,c,h,p){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function j(i,c,h,p){if(c===null||typeof c>"u"||T(i,c,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function E(i,c,h,p,x,b,R){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=p,this.attributeNamespace=x,this.mustUseProperty=h,this.propertyName=i,this.type=c,this.sanitizeURL=b,this.removeEmptyString=R}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){_[i]=new E(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var c=i[0];_[c]=new E(c,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){_[i]=new E(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){_[i]=new E(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){_[i]=new E(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){_[i]=new E(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){_[i]=new E(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){_[i]=new E(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){_[i]=new E(i,5,!1,i.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function D(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var c=i.replace(C,D);_[c]=new E(c,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var c=i.replace(C,D);_[c]=new E(c,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var c=i.replace(C,D);_[c]=new E(c,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){_[i]=new E(i,1,!1,i.toLowerCase(),null,!1,!1)}),_.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){_[i]=new E(i,1,!1,i.toLowerCase(),null,!0,!0)});function k(i,c,h,p){var x=_.hasOwnProperty(c)?_[c]:null;(x!==null?x.type!==0:p||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(j(c,h,x,p)&&(h=null),p||x===null?v(c)&&(h===null?i.removeAttribute(c):i.setAttribute(c,""+h)):x.mustUseProperty?i[x.propertyName]=h===null?x.type===3?!1:"":h:(c=x.attributeName,p=x.attributeNamespace,h===null?i.removeAttribute(c):(x=x.type,h=x===3||x===4&&h===!0?"":""+h,p?i.setAttributeNS(p,c,h):i.setAttribute(c,h))))}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),$=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),B=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),J=Symbol.iterator;function xe(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var he=Object.assign,H;function ne(i){if(H===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);H=c&&c[1]||""}return`
`+H+i}var ue=!1;function ye(i,c){if(!i||ue)return"";ue=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(X){var p=X}Reflect.construct(i,[],c)}else{try{c.call()}catch(X){p=X}i.call(c.prototype)}else{try{throw Error()}catch(X){p=X}i()}}catch(X){if(X&&p&&typeof X.stack=="string"){for(var x=X.stack.split(`
`),b=p.stack.split(`
`),R=x.length-1,F=b.length-1;1<=R&&0<=F&&x[R]!==b[F];)F--;for(;1<=R&&0<=F;R--,F--)if(x[R]!==b[F]){if(R!==1||F!==1)do if(R--,F--,0>F||x[R]!==b[F]){var z=`
`+x[R].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=R&&0<=F);break}}}finally{ue=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?ne(i):""}function Ee(i){switch(i.tag){case 5:return ne(i.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return i=ye(i.type,!1),i;case 11:return i=ye(i.type.render,!1),i;case 1:return i=ye(i.type,!0),i;default:return""}}function De(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case $:return"Portal";case L:return"Profiler";case A:return"StrictMode";case V:return"Suspense";case se:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case B:return(i.displayName||"Context")+".Consumer";case U:return(i._context.displayName||"Context")+".Provider";case q:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Q:return c=i.displayName||null,c!==null?c:De(i.type)||"Memo";case le:c=i._payload,i=i._init;try{return De(i(c))}catch{}}return null}function Ae(i){var c=i.type;switch(i.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=c.render,i=i.displayName||i.name||"",c.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(c);case 8:return c===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ke(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Je(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function pt(i){var c=Je(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,c),p=""+i[c];if(!i.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,b=h.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return x.call(this)},set:function(R){p=""+R,b.call(this,R)}}),Object.defineProperty(i,c,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(R){p=""+R},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function vn(i){i._valueTracker||(i._valueTracker=pt(i))}function nn(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var h=c.getValue(),p="";return i&&(p=Je(i)?i.checked?"true":"false":i.value),i=p,i!==h?(c.setValue(i),!0):!1}function te(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ee(i,c){var h=c.checked;return he({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function ge(i,c){var h=c.defaultValue==null?"":c.defaultValue,p=c.checked!=null?c.checked:c.defaultChecked;h=ke(c.value!=null?c.value:h),i._wrapperState={initialChecked:p,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Fe(i,c){c=c.checked,c!=null&&k(i,"checked",c,!1)}function lt(i,c){Fe(i,c);var h=ke(c.value),p=c.type;if(h!=null)p==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}c.hasOwnProperty("value")?rt(i,c.type,h):c.hasOwnProperty("defaultValue")&&rt(i,c.type,ke(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(i.defaultChecked=!!c.defaultChecked)}function At(i,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var p=c.type;if(!(p!=="submit"&&p!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+i._wrapperState.initialValue,h||c===i.value||(i.value=c),i.defaultValue=c}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function rt(i,c,h){(c!=="number"||te(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var vt=Array.isArray;function qn(i,c,h,p){if(i=i.options,c){c={};for(var x=0;x<h.length;x++)c["$"+h[x]]=!0;for(h=0;h<i.length;h++)x=c.hasOwnProperty("$"+i[h].value),i[h].selected!==x&&(i[h].selected=x),x&&p&&(i[h].defaultSelected=!0)}else{for(h=""+ke(h),c=null,x=0;x<i.length;x++){if(i[x].value===h){i[x].selected=!0,p&&(i[x].defaultSelected=!0);return}c!==null||i[x].disabled||(c=i[x])}c!==null&&(c.selected=!0)}}function Bt(i,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return he({},c,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Rn(i,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(n(92));if(vt(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),h=c}i._wrapperState={initialValue:ke(h)}}function Gi(i,c){var h=ke(c.value),p=ke(c.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),c.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),p!=null&&(i.defaultValue=""+p)}function ht(i){var c=i.textContent;c===i._wrapperState.initialValue&&c!==""&&c!==null&&(i.value=c)}function zt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yi(i,c){return i==null||i==="http://www.w3.org/1999/xhtml"?zt(c):i==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Zr,Qi=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,p,x){MSApp.execUnsafeLocalFunction(function(){return i(c,h,p,x)})}:i})(function(i,c){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=c;else{for(Zr=Zr||document.createElement("div"),Zr.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Zr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;c.firstChild;)i.appendChild(c.firstChild)}});function er(i,c){if(c){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=c;return}}i.textContent=c}var es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ts=["Webkit","ms","Moz","O"];Object.keys(es).forEach(function(i){ts.forEach(function(c){c=c+i.charAt(0).toUpperCase()+i.substring(1),es[c]=es[i]})});function js(i,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||es.hasOwnProperty(i)&&es[i]?(""+c).trim():c+"px"}function Ji(i,c){i=i.style;for(var h in c)if(c.hasOwnProperty(h)){var p=h.indexOf("--")===0,x=js(h,c[h],p);h==="float"&&(h="cssFloat"),p?i.setProperty(h,x):i[h]=x}}var Xi=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tr(i,c){if(c){if(Xi[i]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Zi(i,c){if(i.indexOf("-")===-1)return typeof c.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ir=null;function Wn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ns=null,rs=null,_t=null;function ea(i){if(i=xu(i)){if(typeof ns!="function")throw Error(n(280));var c=i.stateNode;c&&(c=Eh(c),ns(i.stateNode,i.type,c))}}function Ue(i){rs?_t?_t.push(i):_t=[i]:rs=i}function gt(){if(rs){var i=rs,c=_t;if(_t=rs=null,ea(i),c)for(i=0;i<c.length;i++)ea(c[i])}}function qt(i,c){return i(c)}function dn(){}var Hn=!1;function Vt(i,c,h){if(Hn)return i(c,h);Hn=!0;try{return qt(i,c,h)}finally{Hn=!1,(rs!==null||_t!==null)&&(dn(),gt())}}function Gt(i,c){var h=i.stateNode;if(h===null)return null;var p=Eh(h);if(p===null)return null;h=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(n(231,c,typeof h));return h}var hr=!1;if(u)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){hr=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{hr=!1}function Pn(i,c,h,p,x,b,R,F,z){var X=Array.prototype.slice.call(arguments,3);try{c.apply(h,X)}catch(ae){this.onError(ae)}}var Ar=!1,hn=null,Qa=!1,Rr=null,th={onError:function(i){Ar=!0,hn=i}};function nh(i,c,h,p,x,b,R,F,z){Ar=!1,hn=null,Pn.apply(th,arguments)}function Hc(i,c,h,p,x,b,R,F,z){if(nh.apply(this,arguments),Ar){if(Ar){var X=hn;Ar=!1,hn=null}else throw Error(n(198));Qa||(Qa=!0,Rr=X)}}function ss(i){var c=i,h=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(h=c.return),i=c.return;while(i)}return c.tag===3?h:null}function Kc(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function rh(i){if(ss(i)!==i)throw Error(n(188))}function sh(i){var c=i.alternate;if(!c){if(c=ss(i),c===null)throw Error(n(188));return c!==i?null:i}for(var h=i,p=c;;){var x=h.return;if(x===null)break;var b=x.alternate;if(b===null){if(p=x.return,p!==null){h=p;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===h)return rh(x),i;if(b===p)return rh(x),c;b=b.sibling}throw Error(n(188))}if(h.return!==p.return)h=x,p=b;else{for(var R=!1,F=x.child;F;){if(F===h){R=!0,h=x,p=b;break}if(F===p){R=!0,p=x,h=b;break}F=F.sibling}if(!R){for(F=b.child;F;){if(F===h){R=!0,h=b,p=x;break}if(F===p){R=!0,p=b,h=x;break}F=F.sibling}if(!R)throw Error(n(189))}}if(h.alternate!==p)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?i:c}function ih(i){return i=sh(i),i!==null?Ja(i):null}function Ja(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var c=Ja(i);if(c!==null)return c;i=i.sibling}return null}var Gc=e.unstable_scheduleCallback,Zo=e.unstable_cancelCallback,Xa=e.unstable_shouldYield,ui=e.unstable_requestPaint,Et=e.unstable_now,gp=e.unstable_getCurrentPriorityLevel,el=e.unstable_ImmediatePriority,Yc=e.unstable_UserBlockingPriority,Za=e.unstable_NormalPriority,Qc=e.unstable_LowPriority,tl=e.unstable_IdlePriority,eo=null,fr=null;function ah(i){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(eo,i,void 0,(i.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:to,ks=Math.log,Pr=Math.LN2;function to(i){return i>>>=0,i===0?32:31-(ks(i)/Pr|0)|0}var Cs=64,ta=4194304;function dt(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function di(i,c){var h=i.pendingLanes;if(h===0)return 0;var p=0,x=i.suspendedLanes,b=i.pingedLanes,R=h&268435455;if(R!==0){var F=R&~x;F!==0?p=dt(F):(b&=R,b!==0&&(p=dt(b)))}else R=h&~x,R!==0?p=dt(R):b!==0&&(p=dt(b));if(p===0)return 0;if(c!==0&&c!==p&&(c&x)===0&&(x=p&-p,b=c&-c,x>=b||x===16&&(b&4194240)!==0))return c;if((p&4)!==0&&(p|=h&16),c=i.entangledLanes,c!==0)for(i=i.entanglements,c&=p;0<c;)h=31-mr(c),x=1<<h,p|=i[h],c&=~x;return p}function no(i,c){switch(i){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ro(i,c){for(var h=i.suspendedLanes,p=i.pingedLanes,x=i.expirationTimes,b=i.pendingLanes;0<b;){var R=31-mr(b),F=1<<R,z=x[R];z===-1?((F&h)===0||(F&p)!==0)&&(x[R]=no(F,c)):z<=c&&(i.expiredLanes|=F),b&=~F}}function Jc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Xc(){var i=Cs;return Cs<<=1,(Cs&4194240)===0&&(Cs=64),i}function Zc(i){for(var c=[],h=0;31>h;h++)c.push(i);return c}function so(i,c,h){i.pendingLanes|=c,c!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,c=31-mr(c),i[c]=h}function yp(i,c){var h=i.pendingLanes&~c;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=c,i.mutableReadLanes&=c,i.entangledLanes&=c,c=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<h;){var x=31-mr(h),b=1<<x;c[x]=0,p[x]=-1,i[x]=-1,h&=~b}}function eu(i,c){var h=i.entangledLanes|=c;for(i=i.entanglements;h;){var p=31-mr(h),x=1<<p;x&c|i[p]&c&&(i[p]|=c),h&=~x}}var st=0;function Is(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var tu,nl,nu,ru,su,As=!1,rl=[],Rs=null,Ps=null,bn=null,io=new Map,hi=new Map,pr=[],oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function na(i,c){switch(i){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":io.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":hi.delete(c.pointerId)}}function is(i,c,h,p,x,b){return i===null||i.nativeEvent!==b?(i={blockedOn:c,domEventName:h,eventSystemFlags:p,nativeEvent:b,targetContainers:[x]},c!==null&&(c=xu(c),c!==null&&nl(c)),i):(i.eventSystemFlags|=p,c=i.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),i)}function lh(i,c,h,p,x){switch(c){case"focusin":return Rs=is(Rs,i,c,h,p,x),!0;case"dragenter":return Ps=is(Ps,i,c,h,p,x),!0;case"mouseover":return bn=is(bn,i,c,h,p,x),!0;case"pointerover":var b=x.pointerId;return io.set(b,is(io.get(b)||null,i,c,h,p,x)),!0;case"gotpointercapture":return b=x.pointerId,hi.set(b,is(hi.get(b)||null,i,c,h,p,x)),!0}return!1}function sl(i){var c=co(i.target);if(c!==null){var h=ss(c);if(h!==null){if(c=h.tag,c===13){if(c=Kc(h),c!==null){i.blockedOn=c,su(i.priority,function(){nu(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yt(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var h=il(i.domEventName,i.eventSystemFlags,c[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var p=new h.constructor(h.type,h);Ir=p,h.target.dispatchEvent(p),Ir=null}else return c=xu(h),c!==null&&nl(c),i.blockedOn=h,!1;c.shift()}return!0}function ch(i,c,h){yt(i)&&h.delete(c)}function xp(){As=!1,Rs!==null&&yt(Rs)&&(Rs=null),Ps!==null&&yt(Ps)&&(Ps=null),bn!==null&&yt(bn)&&(bn=null),io.forEach(ch),hi.forEach(ch)}function ra(i,c){i.blockedOn===c&&(i.blockedOn=null,As||(As=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xp)))}function sa(i){function c(x){return ra(x,i)}if(0<rl.length){ra(rl[0],i);for(var h=1;h<rl.length;h++){var p=rl[h];p.blockedOn===i&&(p.blockedOn=null)}}for(Rs!==null&&ra(Rs,i),Ps!==null&&ra(Ps,i),bn!==null&&ra(bn,i),io.forEach(c),hi.forEach(c),h=0;h<pr.length;h++)p=pr[h],p.blockedOn===i&&(p.blockedOn=null);for(;0<pr.length&&(h=pr[0],h.blockedOn===null);)sl(h),h.blockedOn===null&&pr.shift()}var fi=O.ReactCurrentBatchConfig,mi=!0;function Ds(i,c,h,p){var x=st,b=fi.transition;fi.transition=null;try{st=1,iu(i,c,h,p)}finally{st=x,fi.transition=b}}function uh(i,c,h,p){var x=st,b=fi.transition;fi.transition=null;try{st=4,iu(i,c,h,p)}finally{st=x,fi.transition=b}}function iu(i,c,h,p){if(mi){var x=il(i,c,h,p);if(x===null)Cp(i,c,p,Os,h),na(i,p);else if(lh(x,i,c,h,p))p.stopPropagation();else if(na(i,p),c&4&&-1<oh.indexOf(i)){for(;x!==null;){var b=xu(x);if(b!==null&&tu(b),b=il(i,c,h,p),b===null&&Cp(i,c,p,Os,h),b===x)break;x=b}x!==null&&p.stopPropagation()}else Cp(i,c,p,null,h)}}var Os=null;function il(i,c,h,p){if(Os=null,i=Wn(p),i=co(i),i!==null)if(c=ss(i),c===null)i=null;else if(h=c.tag,h===13){if(i=Kc(c),i!==null)return i;i=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null);return Os=i,null}function al(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gp()){case el:return 1;case Yc:return 4;case Za:case Qc:return 16;case tl:return 536870912;default:return 16}default:return 16}}var gr=null,ol=null,pi=null;function dh(){if(pi)return pi;var i,c=ol,h=c.length,p,x="value"in gr?gr.value:gr.textContent,b=x.length;for(i=0;i<h&&c[i]===x[i];i++);var R=h-i;for(p=1;p<=R&&c[h-p]===x[b-p];p++);return pi=x.slice(i,1<p?1-p:void 0)}function ao(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function Ms(){return!0}function au(){return!1}function Dn(i){function c(h,p,x,b,R){this._reactName=h,this._targetInst=x,this.type=p,this.nativeEvent=b,this.target=R,this.currentTarget=null;for(var F in i)i.hasOwnProperty(F)&&(h=i[F],this[F]=h?h(b):b[F]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Ms:au,this.isPropagationStopped=au,this}return he(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),c}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=Dn(Ls),ia=he({},Ls,{view:0,detail:0}),ll=Dn(ia),cl,ul,yr,lo=he({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ge,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yr&&(yr&&i.type==="mousemove"?(cl=i.screenX-yr.screenX,ul=i.screenY-yr.screenY):ul=cl=0,yr=i),cl)},movementY:function(i){return"movementY"in i?i.movementY:ul}}),ou=Dn(lo),hh=he({},lo,{dataTransfer:0}),fh=Dn(hh),dl=he({},ia,{relatedTarget:0}),wn=Dn(dl),mh=he({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),ph=Dn(mh),aa=he({},Ls,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),m=Dn(aa),w=he({},Ls,{data:0}),S=Dn(w),M={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pe(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=Z[i])?!!c[i]:!1}function Ge(){return pe}var Wt=he({},ia,{key:function(i){if(i.key){var c=M[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=ao(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?G[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ge,charCode:function(i){return i.type==="keypress"?ao(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ao(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),mt=Dn(Wt),Qt=he({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xr=Dn(Qt),gi=he({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ge}),Vs=Dn(gi),Fs=he({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),hl=Dn(Fs),lu=he({},lo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),nA=Dn(lu),rA=[9,13,27,32],vp=u&&"CompositionEvent"in window,cu=null;u&&"documentMode"in document&&(cu=document.documentMode);var sA=u&&"TextEvent"in window&&!cu,mb=u&&(!vp||cu&&8<cu&&11>=cu),pb=" ",gb=!1;function yb(i,c){switch(i){case"keyup":return rA.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fl=!1;function iA(i,c){switch(i){case"compositionend":return xb(c);case"keypress":return c.which!==32?null:(gb=!0,pb);case"textInput":return i=c.data,i===pb&&gb?null:i;default:return null}}function aA(i,c){if(fl)return i==="compositionend"||!vp&&yb(i,c)?(i=dh(),pi=ol=gr=null,fl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return mb&&c.locale!=="ko"?null:c.data;default:return null}}var oA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vb(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!oA[i.type]:c==="textarea"}function bb(i,c,h,p){Ue(p),c=bh(c,"onChange"),0<c.length&&(h=new oo("onChange","change",null,h,p),i.push({event:h,listeners:c}))}var uu=null,du=null;function lA(i){Vb(i,0)}function gh(i){var c=xl(i);if(nn(c))return i}function cA(i,c){if(i==="change")return c}var wb=!1;if(u){var bp;if(u){var wp="oninput"in document;if(!wp){var _b=document.createElement("div");_b.setAttribute("oninput","return;"),wp=typeof _b.oninput=="function"}bp=wp}else bp=!1;wb=bp&&(!document.documentMode||9<document.documentMode)}function Eb(){uu&&(uu.detachEvent("onpropertychange",Nb),du=uu=null)}function Nb(i){if(i.propertyName==="value"&&gh(du)){var c=[];bb(c,du,i,Wn(i)),Vt(lA,c)}}function uA(i,c,h){i==="focusin"?(Eb(),uu=c,du=h,uu.attachEvent("onpropertychange",Nb)):i==="focusout"&&Eb()}function dA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gh(du)}function hA(i,c){if(i==="click")return gh(c)}function fA(i,c){if(i==="input"||i==="change")return gh(c)}function mA(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var as=typeof Object.is=="function"?Object.is:mA;function hu(i,c){if(as(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var h=Object.keys(i),p=Object.keys(c);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var x=h[p];if(!d.call(c,x)||!as(i[x],c[x]))return!1}return!0}function Tb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Sb(i,c){var h=Tb(i);i=0;for(var p;h;){if(h.nodeType===3){if(p=i+h.textContent.length,i<=c&&p>=c)return{node:h,offset:c-i};i=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Tb(h)}}function jb(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?jb(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function kb(){for(var i=window,c=te();c instanceof i.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)i=c.contentWindow;else break;c=te(i.document)}return c}function _p(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}function pA(i){var c=kb(),h=i.focusedElem,p=i.selectionRange;if(c!==h&&h&&h.ownerDocument&&jb(h.ownerDocument.documentElement,h)){if(p!==null&&_p(h)){if(c=p.start,i=p.end,i===void 0&&(i=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(i,h.value.length);else if(i=(c=h.ownerDocument||document)&&c.defaultView||window,i.getSelection){i=i.getSelection();var x=h.textContent.length,b=Math.min(p.start,x);p=p.end===void 0?b:Math.min(p.end,x),!i.extend&&b>p&&(x=p,p=b,b=x),x=Sb(h,b);var R=Sb(h,p);x&&R&&(i.rangeCount!==1||i.anchorNode!==x.node||i.anchorOffset!==x.offset||i.focusNode!==R.node||i.focusOffset!==R.offset)&&(c=c.createRange(),c.setStart(x.node,x.offset),i.removeAllRanges(),b>p?(i.addRange(c),i.extend(R.node,R.offset)):(c.setEnd(R.node,R.offset),i.addRange(c)))}}for(c=[],i=h;i=i.parentNode;)i.nodeType===1&&c.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)i=c[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var gA=u&&"documentMode"in document&&11>=document.documentMode,ml=null,Ep=null,fu=null,Np=!1;function Cb(i,c,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Np||ml==null||ml!==te(p)||(p=ml,"selectionStart"in p&&_p(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),fu&&hu(fu,p)||(fu=p,p=bh(Ep,"onSelect"),0<p.length&&(c=new oo("onSelect","select",null,c,h),i.push({event:c,listeners:p}),c.target=ml)))}function yh(i,c){var h={};return h[i.toLowerCase()]=c.toLowerCase(),h["Webkit"+i]="webkit"+c,h["Moz"+i]="moz"+c,h}var pl={animationend:yh("Animation","AnimationEnd"),animationiteration:yh("Animation","AnimationIteration"),animationstart:yh("Animation","AnimationStart"),transitionend:yh("Transition","TransitionEnd")},Tp={},Ib={};u&&(Ib=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function xh(i){if(Tp[i])return Tp[i];if(!pl[i])return i;var c=pl[i],h;for(h in c)if(c.hasOwnProperty(h)&&h in Ib)return Tp[i]=c[h];return i}var Ab=xh("animationend"),Rb=xh("animationiteration"),Pb=xh("animationstart"),Db=xh("transitionend"),Ob=new Map,Mb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oa(i,c){Ob.set(i,c),a(c,[i])}for(var Sp=0;Sp<Mb.length;Sp++){var jp=Mb[Sp],yA=jp.toLowerCase(),xA=jp[0].toUpperCase()+jp.slice(1);oa(yA,"on"+xA)}oa(Ab,"onAnimationEnd"),oa(Rb,"onAnimationIteration"),oa(Pb,"onAnimationStart"),oa("dblclick","onDoubleClick"),oa("focusin","onFocus"),oa("focusout","onBlur"),oa(Db,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vA=new Set("cancel close invalid load scroll toggle".split(" ").concat(mu));function Lb(i,c,h){var p=i.type||"unknown-event";i.currentTarget=h,Hc(p,c,void 0,i),i.currentTarget=null}function Vb(i,c){c=(c&4)!==0;for(var h=0;h<i.length;h++){var p=i[h],x=p.event;p=p.listeners;e:{var b=void 0;if(c)for(var R=p.length-1;0<=R;R--){var F=p[R],z=F.instance,X=F.currentTarget;if(F=F.listener,z!==b&&x.isPropagationStopped())break e;Lb(x,F,X),b=z}else for(R=0;R<p.length;R++){if(F=p[R],z=F.instance,X=F.currentTarget,F=F.listener,z!==b&&x.isPropagationStopped())break e;Lb(x,F,X),b=z}}}if(Qa)throw i=Rr,Qa=!1,Rr=null,i}function Nt(i,c){var h=c[Op];h===void 0&&(h=c[Op]=new Set);var p=i+"__bubble";h.has(p)||(Fb(c,i,2,!1),h.add(p))}function kp(i,c,h){var p=0;c&&(p|=4),Fb(h,i,p,c)}var vh="_reactListening"+Math.random().toString(36).slice(2);function pu(i){if(!i[vh]){i[vh]=!0,r.forEach(function(h){h!=="selectionchange"&&(vA.has(h)||kp(h,!1,i),kp(h,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[vh]||(c[vh]=!0,kp("selectionchange",!1,c))}}function Fb(i,c,h,p){switch(al(c)){case 1:var x=Ds;break;case 4:x=uh;break;default:x=iu}h=x.bind(null,c,h,i),x=void 0,!hr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),p?x!==void 0?i.addEventListener(c,h,{capture:!0,passive:x}):i.addEventListener(c,h,!0):x!==void 0?i.addEventListener(c,h,{passive:x}):i.addEventListener(c,h,!1)}function Cp(i,c,h,p,x){var b=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var R=p.tag;if(R===3||R===4){var F=p.stateNode.containerInfo;if(F===x||F.nodeType===8&&F.parentNode===x)break;if(R===4)for(R=p.return;R!==null;){var z=R.tag;if((z===3||z===4)&&(z=R.stateNode.containerInfo,z===x||z.nodeType===8&&z.parentNode===x))return;R=R.return}for(;F!==null;){if(R=co(F),R===null)return;if(z=R.tag,z===5||z===6){p=b=R;continue e}F=F.parentNode}}p=p.return}Vt(function(){var X=b,ae=Wn(h),ce=[];e:{var ie=Ob.get(i);if(ie!==void 0){var we=oo,Te=i;switch(i){case"keypress":if(ao(h)===0)break e;case"keydown":case"keyup":we=mt;break;case"focusin":Te="focus",we=wn;break;case"focusout":Te="blur",we=wn;break;case"beforeblur":case"afterblur":we=wn;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Vs;break;case Ab:case Rb:case Pb:we=ph;break;case Db:we=hl;break;case"scroll":we=ll;break;case"wheel":we=nA;break;case"copy":case"cut":case"paste":we=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=xr}var Ce=(c&4)!==0,Ht=!Ce&&i==="scroll",K=Ce?ie!==null?ie+"Capture":null:ie;Ce=[];for(var W=X,Y;W!==null;){Y=W;var fe=Y.stateNode;if(Y.tag===5&&fe!==null&&(Y=fe,K!==null&&(fe=Gt(W,K),fe!=null&&Ce.push(gu(W,fe,Y)))),Ht)break;W=W.return}0<Ce.length&&(ie=new we(ie,Te,null,h,ae),ce.push({event:ie,listeners:Ce}))}}if((c&7)===0){e:{if(ie=i==="mouseover"||i==="pointerover",we=i==="mouseout"||i==="pointerout",ie&&h!==Ir&&(Te=h.relatedTarget||h.fromElement)&&(co(Te)||Te[yi]))break e;if((we||ie)&&(ie=ae.window===ae?ae:(ie=ae.ownerDocument)?ie.defaultView||ie.parentWindow:window,we?(Te=h.relatedTarget||h.toElement,we=X,Te=Te?co(Te):null,Te!==null&&(Ht=ss(Te),Te!==Ht||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(we=null,Te=X),we!==Te)){if(Ce=ou,fe="onMouseLeave",K="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=xr,fe="onPointerLeave",K="onPointerEnter",W="pointer"),Ht=we==null?ie:xl(we),Y=Te==null?ie:xl(Te),ie=new Ce(fe,W+"leave",we,h,ae),ie.target=Ht,ie.relatedTarget=Y,fe=null,co(ae)===X&&(Ce=new Ce(K,W+"enter",Te,h,ae),Ce.target=Y,Ce.relatedTarget=Ht,fe=Ce),Ht=fe,we&&Te)t:{for(Ce=we,K=Te,W=0,Y=Ce;Y;Y=gl(Y))W++;for(Y=0,fe=K;fe;fe=gl(fe))Y++;for(;0<W-Y;)Ce=gl(Ce),W--;for(;0<Y-W;)K=gl(K),Y--;for(;W--;){if(Ce===K||K!==null&&Ce===K.alternate)break t;Ce=gl(Ce),K=gl(K)}Ce=null}else Ce=null;we!==null&&Ub(ce,ie,we,Ce,!1),Te!==null&&Ht!==null&&Ub(ce,Ht,Te,Ce,!0)}}e:{if(ie=X?xl(X):window,we=ie.nodeName&&ie.nodeName.toLowerCase(),we==="select"||we==="input"&&ie.type==="file")var Ie=cA;else if(vb(ie))if(wb)Ie=fA;else{Ie=dA;var Me=uA}else(we=ie.nodeName)&&we.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ie=hA);if(Ie&&(Ie=Ie(i,X))){bb(ce,Ie,h,ae);break e}Me&&Me(i,ie,X),i==="focusout"&&(Me=ie._wrapperState)&&Me.controlled&&ie.type==="number"&&rt(ie,"number",ie.value)}switch(Me=X?xl(X):window,i){case"focusin":(vb(Me)||Me.contentEditable==="true")&&(ml=Me,Ep=X,fu=null);break;case"focusout":fu=Ep=ml=null;break;case"mousedown":Np=!0;break;case"contextmenu":case"mouseup":case"dragend":Np=!1,Cb(ce,h,ae);break;case"selectionchange":if(gA)break;case"keydown":case"keyup":Cb(ce,h,ae)}var Le;if(vp)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else fl?yb(i,h)&&(We="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(We="onCompositionStart");We&&(mb&&h.locale!=="ko"&&(fl||We!=="onCompositionStart"?We==="onCompositionEnd"&&fl&&(Le=dh()):(gr=ae,ol="value"in gr?gr.value:gr.textContent,fl=!0)),Me=bh(X,We),0<Me.length&&(We=new S(We,i,null,h,ae),ce.push({event:We,listeners:Me}),Le?We.data=Le:(Le=xb(h),Le!==null&&(We.data=Le)))),(Le=sA?iA(i,h):aA(i,h))&&(X=bh(X,"onBeforeInput"),0<X.length&&(ae=new S("onBeforeInput","beforeinput",null,h,ae),ce.push({event:ae,listeners:X}),ae.data=Le))}Vb(ce,c)})}function gu(i,c,h){return{instance:i,listener:c,currentTarget:h}}function bh(i,c){for(var h=c+"Capture",p=[];i!==null;){var x=i,b=x.stateNode;x.tag===5&&b!==null&&(x=b,b=Gt(i,h),b!=null&&p.unshift(gu(i,b,x)),b=Gt(i,c),b!=null&&p.push(gu(i,b,x))),i=i.return}return p}function gl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Ub(i,c,h,p,x){for(var b=c._reactName,R=[];h!==null&&h!==p;){var F=h,z=F.alternate,X=F.stateNode;if(z!==null&&z===p)break;F.tag===5&&X!==null&&(F=X,x?(z=Gt(h,b),z!=null&&R.unshift(gu(h,z,F))):x||(z=Gt(h,b),z!=null&&R.push(gu(h,z,F)))),h=h.return}R.length!==0&&i.push({event:c,listeners:R})}var bA=/\r\n?/g,wA=/\u0000|\uFFFD/g;function $b(i){return(typeof i=="string"?i:""+i).replace(bA,`
`).replace(wA,"")}function wh(i,c,h){if(c=$b(c),$b(i)!==c&&h)throw Error(n(425))}function _h(){}var Ip=null,Ap=null;function Rp(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Pp=typeof setTimeout=="function"?setTimeout:void 0,_A=typeof clearTimeout=="function"?clearTimeout:void 0,Bb=typeof Promise=="function"?Promise:void 0,EA=typeof queueMicrotask=="function"?queueMicrotask:typeof Bb<"u"?function(i){return Bb.resolve(null).then(i).catch(NA)}:Pp;function NA(i){setTimeout(function(){throw i})}function Dp(i,c){var h=c,p=0;do{var x=h.nextSibling;if(i.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"){if(p===0){i.removeChild(x),sa(c);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=x}while(h);sa(c)}function la(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return i}function zb(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return i;c--}else h==="/$"&&c++}i=i.previousSibling}return null}var yl=Math.random().toString(36).slice(2),Us="__reactFiber$"+yl,yu="__reactProps$"+yl,yi="__reactContainer$"+yl,Op="__reactEvents$"+yl,TA="__reactListeners$"+yl,SA="__reactHandles$"+yl;function co(i){var c=i[Us];if(c)return c;for(var h=i.parentNode;h;){if(c=h[yi]||h[Us]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(i=zb(i);i!==null;){if(h=i[Us])return h;i=zb(i)}return c}i=h,h=i.parentNode}return null}function xu(i){return i=i[Us]||i[yi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function xl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Eh(i){return i[yu]||null}var Mp=[],vl=-1;function ca(i){return{current:i}}function Tt(i){0>vl||(i.current=Mp[vl],Mp[vl]=null,vl--)}function bt(i,c){vl++,Mp[vl]=i.current,i.current=c}var ua={},On=ca(ua),nr=ca(!1),uo=ua;function bl(i,c){var h=i.type.contextTypes;if(!h)return ua;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===c)return p.__reactInternalMemoizedMaskedChildContext;var x={},b;for(b in h)x[b]=c[b];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=c,i.__reactInternalMemoizedMaskedChildContext=x),x}function rr(i){return i=i.childContextTypes,i!=null}function Nh(){Tt(nr),Tt(On)}function qb(i,c,h){if(On.current!==ua)throw Error(n(168));bt(On,c),bt(nr,h)}function Wb(i,c,h){var p=i.stateNode;if(c=c.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var x in p)if(!(x in c))throw Error(n(108,Ae(i)||"Unknown",x));return he({},h,p)}function Th(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ua,uo=On.current,bt(On,i),bt(nr,nr.current),!0}function Hb(i,c,h){var p=i.stateNode;if(!p)throw Error(n(169));h?(i=Wb(i,c,uo),p.__reactInternalMemoizedMergedChildContext=i,Tt(nr),Tt(On),bt(On,i)):Tt(nr),bt(nr,h)}var xi=null,Sh=!1,Lp=!1;function Kb(i){xi===null?xi=[i]:xi.push(i)}function jA(i){Sh=!0,Kb(i)}function da(){if(!Lp&&xi!==null){Lp=!0;var i=0,c=st;try{var h=xi;for(st=1;i<h.length;i++){var p=h[i];do p=p(!0);while(p!==null)}xi=null,Sh=!1}catch(x){throw xi!==null&&(xi=xi.slice(i+1)),Gc(el,da),x}finally{st=c,Lp=!1}}return null}var wl=[],_l=0,jh=null,kh=0,Dr=[],Or=0,ho=null,vi=1,bi="";function fo(i,c){wl[_l++]=kh,wl[_l++]=jh,jh=i,kh=c}function Gb(i,c,h){Dr[Or++]=vi,Dr[Or++]=bi,Dr[Or++]=ho,ho=i;var p=vi;i=bi;var x=32-mr(p)-1;p&=~(1<<x),h+=1;var b=32-mr(c)+x;if(30<b){var R=x-x%5;b=(p&(1<<R)-1).toString(32),p>>=R,x-=R,vi=1<<32-mr(c)+x|h<<x|p,bi=b+i}else vi=1<<b|h<<x|p,bi=i}function Vp(i){i.return!==null&&(fo(i,1),Gb(i,1,0))}function Fp(i){for(;i===jh;)jh=wl[--_l],wl[_l]=null,kh=wl[--_l],wl[_l]=null;for(;i===ho;)ho=Dr[--Or],Dr[Or]=null,bi=Dr[--Or],Dr[Or]=null,vi=Dr[--Or],Dr[Or]=null}var vr=null,br=null,kt=!1,os=null;function Yb(i,c){var h=Fr(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=i,c=i.deletions,c===null?(i.deletions=[h],i.flags|=16):c.push(h)}function Qb(i,c){switch(i.tag){case 5:var h=i.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(i.stateNode=c,vr=i,br=la(c.firstChild),!0):!1;case 6:return c=i.pendingProps===""||c.nodeType!==3?null:c,c!==null?(i.stateNode=c,vr=i,br=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=ho!==null?{id:vi,overflow:bi}:null,i.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Fr(18,null,null,0),h.stateNode=c,h.return=i,i.child=h,vr=i,br=null,!0):!1;default:return!1}}function Up(i){return(i.mode&1)!==0&&(i.flags&128)===0}function $p(i){if(kt){var c=br;if(c){var h=c;if(!Qb(i,c)){if(Up(i))throw Error(n(418));c=la(h.nextSibling);var p=vr;c&&Qb(i,c)?Yb(p,h):(i.flags=i.flags&-4097|2,kt=!1,vr=i)}}else{if(Up(i))throw Error(n(418));i.flags=i.flags&-4097|2,kt=!1,vr=i}}}function Jb(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;vr=i}function Ch(i){if(i!==vr)return!1;if(!kt)return Jb(i),kt=!0,!1;var c;if((c=i.tag!==3)&&!(c=i.tag!==5)&&(c=i.type,c=c!=="head"&&c!=="body"&&!Rp(i.type,i.memoizedProps)),c&&(c=br)){if(Up(i))throw Xb(),Error(n(418));for(;c;)Yb(i,c),c=la(c.nextSibling)}if(Jb(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(c===0){br=la(i.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}i=i.nextSibling}br=null}}else br=vr?la(i.stateNode.nextSibling):null;return!0}function Xb(){for(var i=br;i;)i=la(i.nextSibling)}function El(){br=vr=null,kt=!1}function Bp(i){os===null?os=[i]:os.push(i)}var kA=O.ReactCurrentBatchConfig;function vu(i,c,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var p=h.stateNode}if(!p)throw Error(n(147,i));var x=p,b=""+i;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===b?c.ref:(c=function(R){var F=x.refs;R===null?delete F[b]:F[b]=R},c._stringRef=b,c)}if(typeof i!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,i))}return i}function Ih(i,c){throw i=Object.prototype.toString.call(c),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i))}function Zb(i){var c=i._init;return c(i._payload)}function ew(i){function c(K,W){if(i){var Y=K.deletions;Y===null?(K.deletions=[W],K.flags|=16):Y.push(W)}}function h(K,W){if(!i)return null;for(;W!==null;)c(K,W),W=W.sibling;return null}function p(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function x(K,W){return K=va(K,W),K.index=0,K.sibling=null,K}function b(K,W,Y){return K.index=Y,i?(Y=K.alternate,Y!==null?(Y=Y.index,Y<W?(K.flags|=2,W):Y):(K.flags|=2,W)):(K.flags|=1048576,W)}function R(K){return i&&K.alternate===null&&(K.flags|=2),K}function F(K,W,Y,fe){return W===null||W.tag!==6?(W=Pg(Y,K.mode,fe),W.return=K,W):(W=x(W,Y),W.return=K,W)}function z(K,W,Y,fe){var Ie=Y.type;return Ie===P?ae(K,W,Y.props.children,fe,Y.key):W!==null&&(W.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===le&&Zb(Ie)===W.type)?(fe=x(W,Y.props),fe.ref=vu(K,W,Y),fe.return=K,fe):(fe=ef(Y.type,Y.key,Y.props,null,K.mode,fe),fe.ref=vu(K,W,Y),fe.return=K,fe)}function X(K,W,Y,fe){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=Dg(Y,K.mode,fe),W.return=K,W):(W=x(W,Y.children||[]),W.return=K,W)}function ae(K,W,Y,fe,Ie){return W===null||W.tag!==7?(W=wo(Y,K.mode,fe,Ie),W.return=K,W):(W=x(W,Y),W.return=K,W)}function ce(K,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Pg(""+W,K.mode,Y),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case I:return Y=ef(W.type,W.key,W.props,null,K.mode,Y),Y.ref=vu(K,null,W),Y.return=K,Y;case $:return W=Dg(W,K.mode,Y),W.return=K,W;case le:var fe=W._init;return ce(K,fe(W._payload),Y)}if(vt(W)||xe(W))return W=wo(W,K.mode,Y,null),W.return=K,W;Ih(K,W)}return null}function ie(K,W,Y,fe){var Ie=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ie!==null?null:F(K,W,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:return Y.key===Ie?z(K,W,Y,fe):null;case $:return Y.key===Ie?X(K,W,Y,fe):null;case le:return Ie=Y._init,ie(K,W,Ie(Y._payload),fe)}if(vt(Y)||xe(Y))return Ie!==null?null:ae(K,W,Y,fe,null);Ih(K,Y)}return null}function we(K,W,Y,fe,Ie){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return K=K.get(Y)||null,F(W,K,""+fe,Ie);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case I:return K=K.get(fe.key===null?Y:fe.key)||null,z(W,K,fe,Ie);case $:return K=K.get(fe.key===null?Y:fe.key)||null,X(W,K,fe,Ie);case le:var Me=fe._init;return we(K,W,Y,Me(fe._payload),Ie)}if(vt(fe)||xe(fe))return K=K.get(Y)||null,ae(W,K,fe,Ie,null);Ih(W,fe)}return null}function Te(K,W,Y,fe){for(var Ie=null,Me=null,Le=W,We=W=0,pn=null;Le!==null&&We<Y.length;We++){Le.index>We?(pn=Le,Le=null):pn=Le.sibling;var ut=ie(K,Le,Y[We],fe);if(ut===null){Le===null&&(Le=pn);break}i&&Le&&ut.alternate===null&&c(K,Le),W=b(ut,W,We),Me===null?Ie=ut:Me.sibling=ut,Me=ut,Le=pn}if(We===Y.length)return h(K,Le),kt&&fo(K,We),Ie;if(Le===null){for(;We<Y.length;We++)Le=ce(K,Y[We],fe),Le!==null&&(W=b(Le,W,We),Me===null?Ie=Le:Me.sibling=Le,Me=Le);return kt&&fo(K,We),Ie}for(Le=p(K,Le);We<Y.length;We++)pn=we(Le,K,We,Y[We],fe),pn!==null&&(i&&pn.alternate!==null&&Le.delete(pn.key===null?We:pn.key),W=b(pn,W,We),Me===null?Ie=pn:Me.sibling=pn,Me=pn);return i&&Le.forEach(function(ba){return c(K,ba)}),kt&&fo(K,We),Ie}function Ce(K,W,Y,fe){var Ie=xe(Y);if(typeof Ie!="function")throw Error(n(150));if(Y=Ie.call(Y),Y==null)throw Error(n(151));for(var Me=Ie=null,Le=W,We=W=0,pn=null,ut=Y.next();Le!==null&&!ut.done;We++,ut=Y.next()){Le.index>We?(pn=Le,Le=null):pn=Le.sibling;var ba=ie(K,Le,ut.value,fe);if(ba===null){Le===null&&(Le=pn);break}i&&Le&&ba.alternate===null&&c(K,Le),W=b(ba,W,We),Me===null?Ie=ba:Me.sibling=ba,Me=ba,Le=pn}if(ut.done)return h(K,Le),kt&&fo(K,We),Ie;if(Le===null){for(;!ut.done;We++,ut=Y.next())ut=ce(K,ut.value,fe),ut!==null&&(W=b(ut,W,We),Me===null?Ie=ut:Me.sibling=ut,Me=ut);return kt&&fo(K,We),Ie}for(Le=p(K,Le);!ut.done;We++,ut=Y.next())ut=we(Le,K,We,ut.value,fe),ut!==null&&(i&&ut.alternate!==null&&Le.delete(ut.key===null?We:ut.key),W=b(ut,W,We),Me===null?Ie=ut:Me.sibling=ut,Me=ut);return i&&Le.forEach(function(oR){return c(K,oR)}),kt&&fo(K,We),Ie}function Ht(K,W,Y,fe){if(typeof Y=="object"&&Y!==null&&Y.type===P&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:e:{for(var Ie=Y.key,Me=W;Me!==null;){if(Me.key===Ie){if(Ie=Y.type,Ie===P){if(Me.tag===7){h(K,Me.sibling),W=x(Me,Y.props.children),W.return=K,K=W;break e}}else if(Me.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===le&&Zb(Ie)===Me.type){h(K,Me.sibling),W=x(Me,Y.props),W.ref=vu(K,Me,Y),W.return=K,K=W;break e}h(K,Me);break}else c(K,Me);Me=Me.sibling}Y.type===P?(W=wo(Y.props.children,K.mode,fe,Y.key),W.return=K,K=W):(fe=ef(Y.type,Y.key,Y.props,null,K.mode,fe),fe.ref=vu(K,W,Y),fe.return=K,K=fe)}return R(K);case $:e:{for(Me=Y.key;W!==null;){if(W.key===Me)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){h(K,W.sibling),W=x(W,Y.children||[]),W.return=K,K=W;break e}else{h(K,W);break}else c(K,W);W=W.sibling}W=Dg(Y,K.mode,fe),W.return=K,K=W}return R(K);case le:return Me=Y._init,Ht(K,W,Me(Y._payload),fe)}if(vt(Y))return Te(K,W,Y,fe);if(xe(Y))return Ce(K,W,Y,fe);Ih(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(h(K,W.sibling),W=x(W,Y),W.return=K,K=W):(h(K,W),W=Pg(Y,K.mode,fe),W.return=K,K=W),R(K)):h(K,W)}return Ht}var Nl=ew(!0),tw=ew(!1),Ah=ca(null),Rh=null,Tl=null,zp=null;function qp(){zp=Tl=Rh=null}function Wp(i){var c=Ah.current;Tt(Ah),i._currentValue=c}function Hp(i,c,h){for(;i!==null;){var p=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),i===h)break;i=i.return}}function Sl(i,c){Rh=i,zp=Tl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&c)!==0&&(sr=!0),i.firstContext=null)}function Mr(i){var c=i._currentValue;if(zp!==i)if(i={context:i,memoizedValue:c,next:null},Tl===null){if(Rh===null)throw Error(n(308));Tl=i,Rh.dependencies={lanes:0,firstContext:i}}else Tl=Tl.next=i;return c}var mo=null;function Kp(i){mo===null?mo=[i]:mo.push(i)}function nw(i,c,h,p){var x=c.interleaved;return x===null?(h.next=h,Kp(c)):(h.next=x.next,x.next=h),c.interleaved=h,wi(i,p)}function wi(i,c){i.lanes|=c;var h=i.alternate;for(h!==null&&(h.lanes|=c),h=i,i=i.return;i!==null;)i.childLanes|=c,h=i.alternate,h!==null&&(h.childLanes|=c),h=i,i=i.return;return h.tag===3?h.stateNode:null}var ha=!1;function Gp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rw(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function _i(i,c){return{eventTime:i,lane:c,tag:0,payload:null,callback:null,next:null}}function fa(i,c,h){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(ct&2)!==0){var x=p.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),p.pending=c,wi(i,h)}return x=p.interleaved,x===null?(c.next=c,Kp(p)):(c.next=x.next,x.next=c),p.interleaved=c,wi(i,h)}function Ph(i,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var p=c.lanes;p&=i.pendingLanes,h|=p,c.lanes=h,eu(i,h)}}function sw(i,c){var h=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var x=null,b=null;if(h=h.firstBaseUpdate,h!==null){do{var R={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};b===null?x=b=R:b=b.next=R,h=h.next}while(h!==null);b===null?x=b=c:b=b.next=c}else x=b=c;h={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:p.shared,effects:p.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=c:i.next=c,h.lastBaseUpdate=c}function Dh(i,c,h,p){var x=i.updateQueue;ha=!1;var b=x.firstBaseUpdate,R=x.lastBaseUpdate,F=x.shared.pending;if(F!==null){x.shared.pending=null;var z=F,X=z.next;z.next=null,R===null?b=X:R.next=X,R=z;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,F=ae.lastBaseUpdate,F!==R&&(F===null?ae.firstBaseUpdate=X:F.next=X,ae.lastBaseUpdate=z))}if(b!==null){var ce=x.baseState;R=0,ae=X=z=null,F=b;do{var ie=F.lane,we=F.eventTime;if((p&ie)===ie){ae!==null&&(ae=ae.next={eventTime:we,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Te=i,Ce=F;switch(ie=c,we=h,Ce.tag){case 1:if(Te=Ce.payload,typeof Te=="function"){ce=Te.call(we,ce,ie);break e}ce=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ce.payload,ie=typeof Te=="function"?Te.call(we,ce,ie):Te,ie==null)break e;ce=he({},ce,ie);break e;case 2:ha=!0}}F.callback!==null&&F.lane!==0&&(i.flags|=64,ie=x.effects,ie===null?x.effects=[F]:ie.push(F))}else we={eventTime:we,lane:ie,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ae===null?(X=ae=we,z=ce):ae=ae.next=we,R|=ie;if(F=F.next,F===null){if(F=x.shared.pending,F===null)break;ie=F,F=ie.next,ie.next=null,x.lastBaseUpdate=ie,x.shared.pending=null}}while(!0);if(ae===null&&(z=ce),x.baseState=z,x.firstBaseUpdate=X,x.lastBaseUpdate=ae,c=x.shared.interleaved,c!==null){x=c;do R|=x.lane,x=x.next;while(x!==c)}else b===null&&(x.shared.lanes=0);yo|=R,i.lanes=R,i.memoizedState=ce}}function iw(i,c,h){if(i=c.effects,c.effects=null,i!==null)for(c=0;c<i.length;c++){var p=i[c],x=p.callback;if(x!==null){if(p.callback=null,p=h,typeof x!="function")throw Error(n(191,x));x.call(p)}}}var bu={},$s=ca(bu),wu=ca(bu),_u=ca(bu);function po(i){if(i===bu)throw Error(n(174));return i}function Yp(i,c){switch(bt(_u,c),bt(wu,i),bt($s,bu),i=c.nodeType,i){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Yi(null,"");break;default:i=i===8?c.parentNode:c,c=i.namespaceURI||null,i=i.tagName,c=Yi(c,i)}Tt($s),bt($s,c)}function jl(){Tt($s),Tt(wu),Tt(_u)}function aw(i){po(_u.current);var c=po($s.current),h=Yi(c,i.type);c!==h&&(bt(wu,i),bt($s,h))}function Qp(i){wu.current===i&&(Tt($s),Tt(wu))}var Rt=ca(0);function Oh(i){for(var c=i;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Jp=[];function Xp(){for(var i=0;i<Jp.length;i++)Jp[i]._workInProgressVersionPrimary=null;Jp.length=0}var Mh=O.ReactCurrentDispatcher,Zp=O.ReactCurrentBatchConfig,go=0,Pt=null,rn=null,fn=null,Lh=!1,Eu=!1,Nu=0,CA=0;function Mn(){throw Error(n(321))}function eg(i,c){if(c===null)return!1;for(var h=0;h<c.length&&h<i.length;h++)if(!as(i[h],c[h]))return!1;return!0}function tg(i,c,h,p,x,b){if(go=b,Pt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Mh.current=i===null||i.memoizedState===null?PA:DA,i=h(p,x),Eu){b=0;do{if(Eu=!1,Nu=0,25<=b)throw Error(n(301));b+=1,fn=rn=null,c.updateQueue=null,Mh.current=OA,i=h(p,x)}while(Eu)}if(Mh.current=Uh,c=rn!==null&&rn.next!==null,go=0,fn=rn=Pt=null,Lh=!1,c)throw Error(n(300));return i}function ng(){var i=Nu!==0;return Nu=0,i}function Bs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Pt.memoizedState=fn=i:fn=fn.next=i,fn}function Lr(){if(rn===null){var i=Pt.alternate;i=i!==null?i.memoizedState:null}else i=rn.next;var c=fn===null?Pt.memoizedState:fn.next;if(c!==null)fn=c,rn=i;else{if(i===null)throw Error(n(310));rn=i,i={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},fn===null?Pt.memoizedState=fn=i:fn=fn.next=i}return fn}function Tu(i,c){return typeof c=="function"?c(i):c}function rg(i){var c=Lr(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=i;var p=rn,x=p.baseQueue,b=h.pending;if(b!==null){if(x!==null){var R=x.next;x.next=b.next,b.next=R}p.baseQueue=x=b,h.pending=null}if(x!==null){b=x.next,p=p.baseState;var F=R=null,z=null,X=b;do{var ae=X.lane;if((go&ae)===ae)z!==null&&(z=z.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),p=X.hasEagerState?X.eagerState:i(p,X.action);else{var ce={lane:ae,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};z===null?(F=z=ce,R=p):z=z.next=ce,Pt.lanes|=ae,yo|=ae}X=X.next}while(X!==null&&X!==b);z===null?R=p:z.next=F,as(p,c.memoizedState)||(sr=!0),c.memoizedState=p,c.baseState=R,c.baseQueue=z,h.lastRenderedState=p}if(i=h.interleaved,i!==null){x=i;do b=x.lane,Pt.lanes|=b,yo|=b,x=x.next;while(x!==i)}else x===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function sg(i){var c=Lr(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=i;var p=h.dispatch,x=h.pending,b=c.memoizedState;if(x!==null){h.pending=null;var R=x=x.next;do b=i(b,R.action),R=R.next;while(R!==x);as(b,c.memoizedState)||(sr=!0),c.memoizedState=b,c.baseQueue===null&&(c.baseState=b),h.lastRenderedState=b}return[b,p]}function ow(){}function lw(i,c){var h=Pt,p=Lr(),x=c(),b=!as(p.memoizedState,x);if(b&&(p.memoizedState=x,sr=!0),p=p.queue,ig(dw.bind(null,h,p,i),[i]),p.getSnapshot!==c||b||fn!==null&&fn.memoizedState.tag&1){if(h.flags|=2048,Su(9,uw.bind(null,h,p,x,c),void 0,null),mn===null)throw Error(n(349));(go&30)!==0||cw(h,c,x)}return x}function cw(i,c,h){i.flags|=16384,i={getSnapshot:c,value:h},c=Pt.updateQueue,c===null?(c={lastEffect:null,stores:null},Pt.updateQueue=c,c.stores=[i]):(h=c.stores,h===null?c.stores=[i]:h.push(i))}function uw(i,c,h,p){c.value=h,c.getSnapshot=p,hw(c)&&fw(i)}function dw(i,c,h){return h(function(){hw(c)&&fw(i)})}function hw(i){var c=i.getSnapshot;i=i.value;try{var h=c();return!as(i,h)}catch{return!0}}function fw(i){var c=wi(i,1);c!==null&&ds(c,i,1,-1)}function mw(i){var c=Bs();return typeof i=="function"&&(i=i()),c.memoizedState=c.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:i},c.queue=i,i=i.dispatch=RA.bind(null,Pt,i),[c.memoizedState,i]}function Su(i,c,h,p){return i={tag:i,create:c,destroy:h,deps:p,next:null},c=Pt.updateQueue,c===null?(c={lastEffect:null,stores:null},Pt.updateQueue=c,c.lastEffect=i.next=i):(h=c.lastEffect,h===null?c.lastEffect=i.next=i:(p=h.next,h.next=i,i.next=p,c.lastEffect=i)),i}function pw(){return Lr().memoizedState}function Vh(i,c,h,p){var x=Bs();Pt.flags|=i,x.memoizedState=Su(1|c,h,void 0,p===void 0?null:p)}function Fh(i,c,h,p){var x=Lr();p=p===void 0?null:p;var b=void 0;if(rn!==null){var R=rn.memoizedState;if(b=R.destroy,p!==null&&eg(p,R.deps)){x.memoizedState=Su(c,h,b,p);return}}Pt.flags|=i,x.memoizedState=Su(1|c,h,b,p)}function gw(i,c){return Vh(8390656,8,i,c)}function ig(i,c){return Fh(2048,8,i,c)}function yw(i,c){return Fh(4,2,i,c)}function xw(i,c){return Fh(4,4,i,c)}function vw(i,c){if(typeof c=="function")return i=i(),c(i),function(){c(null)};if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function bw(i,c,h){return h=h!=null?h.concat([i]):null,Fh(4,4,vw.bind(null,c,i),h)}function ag(){}function ww(i,c){var h=Lr();c=c===void 0?null:c;var p=h.memoizedState;return p!==null&&c!==null&&eg(c,p[1])?p[0]:(h.memoizedState=[i,c],i)}function _w(i,c){var h=Lr();c=c===void 0?null:c;var p=h.memoizedState;return p!==null&&c!==null&&eg(c,p[1])?p[0]:(i=i(),h.memoizedState=[i,c],i)}function Ew(i,c,h){return(go&21)===0?(i.baseState&&(i.baseState=!1,sr=!0),i.memoizedState=h):(as(h,c)||(h=Xc(),Pt.lanes|=h,yo|=h,i.baseState=!0),c)}function IA(i,c){var h=st;st=h!==0&&4>h?h:4,i(!0);var p=Zp.transition;Zp.transition={};try{i(!1),c()}finally{st=h,Zp.transition=p}}function Nw(){return Lr().memoizedState}function AA(i,c,h){var p=ya(i);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},Tw(i))Sw(c,h);else if(h=nw(i,c,h,p),h!==null){var x=Gn();ds(h,i,p,x),jw(h,c,p)}}function RA(i,c,h){var p=ya(i),x={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(Tw(i))Sw(c,x);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=c.lastRenderedReducer,b!==null))try{var R=c.lastRenderedState,F=b(R,h);if(x.hasEagerState=!0,x.eagerState=F,as(F,R)){var z=c.interleaved;z===null?(x.next=x,Kp(c)):(x.next=z.next,z.next=x),c.interleaved=x;return}}catch{}finally{}h=nw(i,c,x,p),h!==null&&(x=Gn(),ds(h,i,p,x),jw(h,c,p))}}function Tw(i){var c=i.alternate;return i===Pt||c!==null&&c===Pt}function Sw(i,c){Eu=Lh=!0;var h=i.pending;h===null?c.next=c:(c.next=h.next,h.next=c),i.pending=c}function jw(i,c,h){if((h&4194240)!==0){var p=c.lanes;p&=i.pendingLanes,h|=p,c.lanes=h,eu(i,h)}}var Uh={readContext:Mr,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},PA={readContext:Mr,useCallback:function(i,c){return Bs().memoizedState=[i,c===void 0?null:c],i},useContext:Mr,useEffect:gw,useImperativeHandle:function(i,c,h){return h=h!=null?h.concat([i]):null,Vh(4194308,4,vw.bind(null,c,i),h)},useLayoutEffect:function(i,c){return Vh(4194308,4,i,c)},useInsertionEffect:function(i,c){return Vh(4,2,i,c)},useMemo:function(i,c){var h=Bs();return c=c===void 0?null:c,i=i(),h.memoizedState=[i,c],i},useReducer:function(i,c,h){var p=Bs();return c=h!==void 0?h(c):c,p.memoizedState=p.baseState=c,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:c},p.queue=i,i=i.dispatch=AA.bind(null,Pt,i),[p.memoizedState,i]},useRef:function(i){var c=Bs();return i={current:i},c.memoizedState=i},useState:mw,useDebugValue:ag,useDeferredValue:function(i){return Bs().memoizedState=i},useTransition:function(){var i=mw(!1),c=i[0];return i=IA.bind(null,i[1]),Bs().memoizedState=i,[c,i]},useMutableSource:function(){},useSyncExternalStore:function(i,c,h){var p=Pt,x=Bs();if(kt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=c(),mn===null)throw Error(n(349));(go&30)!==0||cw(p,c,h)}x.memoizedState=h;var b={value:h,getSnapshot:c};return x.queue=b,gw(dw.bind(null,p,b,i),[i]),p.flags|=2048,Su(9,uw.bind(null,p,b,h,c),void 0,null),h},useId:function(){var i=Bs(),c=mn.identifierPrefix;if(kt){var h=bi,p=vi;h=(p&~(1<<32-mr(p)-1)).toString(32)+h,c=":"+c+"R"+h,h=Nu++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=CA++,c=":"+c+"r"+h.toString(32)+":";return i.memoizedState=c},unstable_isNewReconciler:!1},DA={readContext:Mr,useCallback:ww,useContext:Mr,useEffect:ig,useImperativeHandle:bw,useInsertionEffect:yw,useLayoutEffect:xw,useMemo:_w,useReducer:rg,useRef:pw,useState:function(){return rg(Tu)},useDebugValue:ag,useDeferredValue:function(i){var c=Lr();return Ew(c,rn.memoizedState,i)},useTransition:function(){var i=rg(Tu)[0],c=Lr().memoizedState;return[i,c]},useMutableSource:ow,useSyncExternalStore:lw,useId:Nw,unstable_isNewReconciler:!1},OA={readContext:Mr,useCallback:ww,useContext:Mr,useEffect:ig,useImperativeHandle:bw,useInsertionEffect:yw,useLayoutEffect:xw,useMemo:_w,useReducer:sg,useRef:pw,useState:function(){return sg(Tu)},useDebugValue:ag,useDeferredValue:function(i){var c=Lr();return rn===null?c.memoizedState=i:Ew(c,rn.memoizedState,i)},useTransition:function(){var i=sg(Tu)[0],c=Lr().memoizedState;return[i,c]},useMutableSource:ow,useSyncExternalStore:lw,useId:Nw,unstable_isNewReconciler:!1};function ls(i,c){if(i&&i.defaultProps){c=he({},c),i=i.defaultProps;for(var h in i)c[h]===void 0&&(c[h]=i[h]);return c}return c}function og(i,c,h,p){c=i.memoizedState,h=h(p,c),h=h==null?c:he({},c,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var $h={isMounted:function(i){return(i=i._reactInternals)?ss(i)===i:!1},enqueueSetState:function(i,c,h){i=i._reactInternals;var p=Gn(),x=ya(i),b=_i(p,x);b.payload=c,h!=null&&(b.callback=h),c=fa(i,b,x),c!==null&&(ds(c,i,x,p),Ph(c,i,x))},enqueueReplaceState:function(i,c,h){i=i._reactInternals;var p=Gn(),x=ya(i),b=_i(p,x);b.tag=1,b.payload=c,h!=null&&(b.callback=h),c=fa(i,b,x),c!==null&&(ds(c,i,x,p),Ph(c,i,x))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var h=Gn(),p=ya(i),x=_i(h,p);x.tag=2,c!=null&&(x.callback=c),c=fa(i,x,p),c!==null&&(ds(c,i,p,h),Ph(c,i,p))}};function kw(i,c,h,p,x,b,R){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,b,R):c.prototype&&c.prototype.isPureReactComponent?!hu(h,p)||!hu(x,b):!0}function Cw(i,c,h){var p=!1,x=ua,b=c.contextType;return typeof b=="object"&&b!==null?b=Mr(b):(x=rr(c)?uo:On.current,p=c.contextTypes,b=(p=p!=null)?bl(i,x):ua),c=new c(h,b),i.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=$h,i.stateNode=c,c._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=x,i.__reactInternalMemoizedMaskedChildContext=b),c}function Iw(i,c,h,p){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,p),c.state!==i&&$h.enqueueReplaceState(c,c.state,null)}function lg(i,c,h,p){var x=i.stateNode;x.props=h,x.state=i.memoizedState,x.refs={},Gp(i);var b=c.contextType;typeof b=="object"&&b!==null?x.context=Mr(b):(b=rr(c)?uo:On.current,x.context=bl(i,b)),x.state=i.memoizedState,b=c.getDerivedStateFromProps,typeof b=="function"&&(og(i,c,b,h),x.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(c=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),c!==x.state&&$h.enqueueReplaceState(x,x.state,null),Dh(i,h,x,p),x.state=i.memoizedState),typeof x.componentDidMount=="function"&&(i.flags|=4194308)}function kl(i,c){try{var h="",p=c;do h+=Ee(p),p=p.return;while(p);var x=h}catch(b){x=`
Error generating stack: `+b.message+`
`+b.stack}return{value:i,source:c,stack:x,digest:null}}function cg(i,c,h){return{value:i,source:null,stack:h??null,digest:c??null}}function ug(i,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var MA=typeof WeakMap=="function"?WeakMap:Map;function Aw(i,c,h){h=_i(-1,h),h.tag=3,h.payload={element:null};var p=c.value;return h.callback=function(){Gh||(Gh=!0,Tg=p),ug(i,c)},h}function Rw(i,c,h){h=_i(-1,h),h.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var x=c.value;h.payload=function(){return p(x)},h.callback=function(){ug(i,c)}}var b=i.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(h.callback=function(){ug(i,c),typeof p!="function"&&(pa===null?pa=new Set([this]):pa.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})}),h}function Pw(i,c,h){var p=i.pingCache;if(p===null){p=i.pingCache=new MA;var x=new Set;p.set(c,x)}else x=p.get(c),x===void 0&&(x=new Set,p.set(c,x));x.has(h)||(x.add(h),i=QA.bind(null,i,c,h),c.then(i,i))}function Dw(i){do{var c;if((c=i.tag===13)&&(c=i.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return i;i=i.return}while(i!==null);return null}function Ow(i,c,h,p,x){return(i.mode&1)===0?(i===c?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=_i(-1,1),c.tag=2,fa(h,c,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=x,i)}var LA=O.ReactCurrentOwner,sr=!1;function Kn(i,c,h,p){c.child=i===null?tw(c,null,h,p):Nl(c,i.child,h,p)}function Mw(i,c,h,p,x){h=h.render;var b=c.ref;return Sl(c,x),p=tg(i,c,h,p,b,x),h=ng(),i!==null&&!sr?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~x,Ei(i,c,x)):(kt&&h&&Vp(c),c.flags|=1,Kn(i,c,p,x),c.child)}function Lw(i,c,h,p,x){if(i===null){var b=h.type;return typeof b=="function"&&!Rg(b)&&b.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=b,Vw(i,c,b,p,x)):(i=ef(h.type,null,p,c,c.mode,x),i.ref=c.ref,i.return=c,c.child=i)}if(b=i.child,(i.lanes&x)===0){var R=b.memoizedProps;if(h=h.compare,h=h!==null?h:hu,h(R,p)&&i.ref===c.ref)return Ei(i,c,x)}return c.flags|=1,i=va(b,p),i.ref=c.ref,i.return=c,c.child=i}function Vw(i,c,h,p,x){if(i!==null){var b=i.memoizedProps;if(hu(b,p)&&i.ref===c.ref)if(sr=!1,c.pendingProps=p=b,(i.lanes&x)!==0)(i.flags&131072)!==0&&(sr=!0);else return c.lanes=i.lanes,Ei(i,c,x)}return dg(i,c,h,p,x)}function Fw(i,c,h){var p=c.pendingProps,x=p.children,b=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(Il,wr),wr|=h;else{if((h&1073741824)===0)return i=b!==null?b.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:i,cachePool:null,transitions:null},c.updateQueue=null,bt(Il,wr),wr|=i,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=b!==null?b.baseLanes:h,bt(Il,wr),wr|=p}else b!==null?(p=b.baseLanes|h,c.memoizedState=null):p=h,bt(Il,wr),wr|=p;return Kn(i,c,x,h),c.child}function Uw(i,c){var h=c.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function dg(i,c,h,p,x){var b=rr(h)?uo:On.current;return b=bl(c,b),Sl(c,x),h=tg(i,c,h,p,b,x),p=ng(),i!==null&&!sr?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~x,Ei(i,c,x)):(kt&&p&&Vp(c),c.flags|=1,Kn(i,c,h,x),c.child)}function $w(i,c,h,p,x){if(rr(h)){var b=!0;Th(c)}else b=!1;if(Sl(c,x),c.stateNode===null)zh(i,c),Cw(c,h,p),lg(c,h,p,x),p=!0;else if(i===null){var R=c.stateNode,F=c.memoizedProps;R.props=F;var z=R.context,X=h.contextType;typeof X=="object"&&X!==null?X=Mr(X):(X=rr(h)?uo:On.current,X=bl(c,X));var ae=h.getDerivedStateFromProps,ce=typeof ae=="function"||typeof R.getSnapshotBeforeUpdate=="function";ce||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(F!==p||z!==X)&&Iw(c,R,p,X),ha=!1;var ie=c.memoizedState;R.state=ie,Dh(c,p,R,x),z=c.memoizedState,F!==p||ie!==z||nr.current||ha?(typeof ae=="function"&&(og(c,h,ae,p),z=c.memoizedState),(F=ha||kw(c,h,F,p,ie,z,X))?(ce||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(c.flags|=4194308)):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=z),R.props=p,R.state=z,R.context=X,p=F):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{R=c.stateNode,rw(i,c),F=c.memoizedProps,X=c.type===c.elementType?F:ls(c.type,F),R.props=X,ce=c.pendingProps,ie=R.context,z=h.contextType,typeof z=="object"&&z!==null?z=Mr(z):(z=rr(h)?uo:On.current,z=bl(c,z));var we=h.getDerivedStateFromProps;(ae=typeof we=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(F!==ce||ie!==z)&&Iw(c,R,p,z),ha=!1,ie=c.memoizedState,R.state=ie,Dh(c,p,R,x);var Te=c.memoizedState;F!==ce||ie!==Te||nr.current||ha?(typeof we=="function"&&(og(c,h,we,p),Te=c.memoizedState),(X=ha||kw(c,h,X,p,ie,Te,z)||!1)?(ae||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(p,Te,z),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(p,Te,z)),typeof R.componentDidUpdate=="function"&&(c.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof R.componentDidUpdate!="function"||F===i.memoizedProps&&ie===i.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&ie===i.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=Te),R.props=p,R.state=Te,R.context=z,p=X):(typeof R.componentDidUpdate!="function"||F===i.memoizedProps&&ie===i.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&ie===i.memoizedState||(c.flags|=1024),p=!1)}return hg(i,c,h,p,b,x)}function hg(i,c,h,p,x,b){Uw(i,c);var R=(c.flags&128)!==0;if(!p&&!R)return x&&Hb(c,h,!1),Ei(i,c,b);p=c.stateNode,LA.current=c;var F=R&&typeof h.getDerivedStateFromError!="function"?null:p.render();return c.flags|=1,i!==null&&R?(c.child=Nl(c,i.child,null,b),c.child=Nl(c,null,F,b)):Kn(i,c,F,b),c.memoizedState=p.state,x&&Hb(c,h,!0),c.child}function Bw(i){var c=i.stateNode;c.pendingContext?qb(i,c.pendingContext,c.pendingContext!==c.context):c.context&&qb(i,c.context,!1),Yp(i,c.containerInfo)}function zw(i,c,h,p,x){return El(),Bp(x),c.flags|=256,Kn(i,c,h,p),c.child}var fg={dehydrated:null,treeContext:null,retryLane:0};function mg(i){return{baseLanes:i,cachePool:null,transitions:null}}function qw(i,c,h){var p=c.pendingProps,x=Rt.current,b=!1,R=(c.flags&128)!==0,F;if((F=R)||(F=i!==null&&i.memoizedState===null?!1:(x&2)!==0),F?(b=!0,c.flags&=-129):(i===null||i.memoizedState!==null)&&(x|=1),bt(Rt,x&1),i===null)return $p(c),i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((c.mode&1)===0?c.lanes=1:i.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(R=p.children,i=p.fallback,b?(p=c.mode,b=c.child,R={mode:"hidden",children:R},(p&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=R):b=tf(R,p,0,null),i=wo(i,p,h,null),b.return=c,i.return=c,b.sibling=i,c.child=b,c.child.memoizedState=mg(h),c.memoizedState=fg,i):pg(c,R));if(x=i.memoizedState,x!==null&&(F=x.dehydrated,F!==null))return VA(i,c,R,p,F,x,h);if(b){b=p.fallback,R=c.mode,x=i.child,F=x.sibling;var z={mode:"hidden",children:p.children};return(R&1)===0&&c.child!==x?(p=c.child,p.childLanes=0,p.pendingProps=z,c.deletions=null):(p=va(x,z),p.subtreeFlags=x.subtreeFlags&14680064),F!==null?b=va(F,b):(b=wo(b,R,h,null),b.flags|=2),b.return=c,p.return=c,p.sibling=b,c.child=p,p=b,b=c.child,R=i.child.memoizedState,R=R===null?mg(h):{baseLanes:R.baseLanes|h,cachePool:null,transitions:R.transitions},b.memoizedState=R,b.childLanes=i.childLanes&~h,c.memoizedState=fg,p}return b=i.child,i=b.sibling,p=va(b,{mode:"visible",children:p.children}),(c.mode&1)===0&&(p.lanes=h),p.return=c,p.sibling=null,i!==null&&(h=c.deletions,h===null?(c.deletions=[i],c.flags|=16):h.push(i)),c.child=p,c.memoizedState=null,p}function pg(i,c){return c=tf({mode:"visible",children:c},i.mode,0,null),c.return=i,i.child=c}function Bh(i,c,h,p){return p!==null&&Bp(p),Nl(c,i.child,null,h),i=pg(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function VA(i,c,h,p,x,b,R){if(h)return c.flags&256?(c.flags&=-257,p=cg(Error(n(422))),Bh(i,c,R,p)):c.memoizedState!==null?(c.child=i.child,c.flags|=128,null):(b=p.fallback,x=c.mode,p=tf({mode:"visible",children:p.children},x,0,null),b=wo(b,x,R,null),b.flags|=2,p.return=c,b.return=c,p.sibling=b,c.child=p,(c.mode&1)!==0&&Nl(c,i.child,null,R),c.child.memoizedState=mg(R),c.memoizedState=fg,b);if((c.mode&1)===0)return Bh(i,c,R,null);if(x.data==="$!"){if(p=x.nextSibling&&x.nextSibling.dataset,p)var F=p.dgst;return p=F,b=Error(n(419)),p=cg(b,p,void 0),Bh(i,c,R,p)}if(F=(R&i.childLanes)!==0,sr||F){if(p=mn,p!==null){switch(R&-R){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(p.suspendedLanes|R))!==0?0:x,x!==0&&x!==b.retryLane&&(b.retryLane=x,wi(i,x),ds(p,i,x,-1))}return Ag(),p=cg(Error(n(421))),Bh(i,c,R,p)}return x.data==="$?"?(c.flags|=128,c.child=i.child,c=JA.bind(null,i),x._reactRetry=c,null):(i=b.treeContext,br=la(x.nextSibling),vr=c,kt=!0,os=null,i!==null&&(Dr[Or++]=vi,Dr[Or++]=bi,Dr[Or++]=ho,vi=i.id,bi=i.overflow,ho=c),c=pg(c,p.children),c.flags|=4096,c)}function Ww(i,c,h){i.lanes|=c;var p=i.alternate;p!==null&&(p.lanes|=c),Hp(i.return,c,h)}function gg(i,c,h,p,x){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:x}:(b.isBackwards=c,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=h,b.tailMode=x)}function Hw(i,c,h){var p=c.pendingProps,x=p.revealOrder,b=p.tail;if(Kn(i,c,p.children,h),p=Rt.current,(p&2)!==0)p=p&1|2,c.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ww(i,h,c);else if(i.tag===19)Ww(i,h,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(bt(Rt,p),(c.mode&1)===0)c.memoizedState=null;else switch(x){case"forwards":for(h=c.child,x=null;h!==null;)i=h.alternate,i!==null&&Oh(i)===null&&(x=h),h=h.sibling;h=x,h===null?(x=c.child,c.child=null):(x=h.sibling,h.sibling=null),gg(c,!1,x,h,b);break;case"backwards":for(h=null,x=c.child,c.child=null;x!==null;){if(i=x.alternate,i!==null&&Oh(i)===null){c.child=x;break}i=x.sibling,x.sibling=h,h=x,x=i}gg(c,!0,h,null,b);break;case"together":gg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function zh(i,c){(c.mode&1)===0&&i!==null&&(i.alternate=null,c.alternate=null,c.flags|=2)}function Ei(i,c,h){if(i!==null&&(c.dependencies=i.dependencies),yo|=c.lanes,(h&c.childLanes)===0)return null;if(i!==null&&c.child!==i.child)throw Error(n(153));if(c.child!==null){for(i=c.child,h=va(i,i.pendingProps),c.child=h,h.return=c;i.sibling!==null;)i=i.sibling,h=h.sibling=va(i,i.pendingProps),h.return=c;h.sibling=null}return c.child}function FA(i,c,h){switch(c.tag){case 3:Bw(c),El();break;case 5:aw(c);break;case 1:rr(c.type)&&Th(c);break;case 4:Yp(c,c.stateNode.containerInfo);break;case 10:var p=c.type._context,x=c.memoizedProps.value;bt(Ah,p._currentValue),p._currentValue=x;break;case 13:if(p=c.memoizedState,p!==null)return p.dehydrated!==null?(bt(Rt,Rt.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?qw(i,c,h):(bt(Rt,Rt.current&1),i=Ei(i,c,h),i!==null?i.sibling:null);bt(Rt,Rt.current&1);break;case 19:if(p=(h&c.childLanes)!==0,(i.flags&128)!==0){if(p)return Hw(i,c,h);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),bt(Rt,Rt.current),p)break;return null;case 22:case 23:return c.lanes=0,Fw(i,c,h)}return Ei(i,c,h)}var Kw,yg,Gw,Yw;Kw=function(i,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},yg=function(){},Gw=function(i,c,h,p){var x=i.memoizedProps;if(x!==p){i=c.stateNode,po($s.current);var b=null;switch(h){case"input":x=ee(i,x),p=ee(i,p),b=[];break;case"select":x=he({},x,{value:void 0}),p=he({},p,{value:void 0}),b=[];break;case"textarea":x=Bt(i,x),p=Bt(i,p),b=[];break;default:typeof x.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=_h)}tr(h,p);var R;h=null;for(X in x)if(!p.hasOwnProperty(X)&&x.hasOwnProperty(X)&&x[X]!=null)if(X==="style"){var F=x[X];for(R in F)F.hasOwnProperty(R)&&(h||(h={}),h[R]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?b||(b=[]):(b=b||[]).push(X,null));for(X in p){var z=p[X];if(F=x?.[X],p.hasOwnProperty(X)&&z!==F&&(z!=null||F!=null))if(X==="style")if(F){for(R in F)!F.hasOwnProperty(R)||z&&z.hasOwnProperty(R)||(h||(h={}),h[R]="");for(R in z)z.hasOwnProperty(R)&&F[R]!==z[R]&&(h||(h={}),h[R]=z[R])}else h||(b||(b=[]),b.push(X,h)),h=z;else X==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,F=F?F.__html:void 0,z!=null&&F!==z&&(b=b||[]).push(X,z)):X==="children"?typeof z!="string"&&typeof z!="number"||(b=b||[]).push(X,""+z):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(z!=null&&X==="onScroll"&&Nt("scroll",i),b||F===z||(b=[])):(b=b||[]).push(X,z))}h&&(b=b||[]).push("style",h);var X=b;(c.updateQueue=X)&&(c.flags|=4)}},Yw=function(i,c,h,p){h!==p&&(c.flags|=4)};function ju(i,c){if(!kt)switch(i.tailMode){case"hidden":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Ln(i){var c=i.alternate!==null&&i.alternate.child===i.child,h=0,p=0;if(c)for(var x=i.child;x!==null;)h|=x.lanes|x.childLanes,p|=x.subtreeFlags&14680064,p|=x.flags&14680064,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)h|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=p,i.childLanes=h,c}function UA(i,c,h){var p=c.pendingProps;switch(Fp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(c),null;case 1:return rr(c.type)&&Nh(),Ln(c),null;case 3:return p=c.stateNode,jl(),Tt(nr),Tt(On),Xp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Ch(c)?c.flags|=4:i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,os!==null&&(kg(os),os=null))),yg(i,c),Ln(c),null;case 5:Qp(c);var x=po(_u.current);if(h=c.type,i!==null&&c.stateNode!=null)Gw(i,c,h,p,x),i.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!p){if(c.stateNode===null)throw Error(n(166));return Ln(c),null}if(i=po($s.current),Ch(c)){p=c.stateNode,h=c.type;var b=c.memoizedProps;switch(p[Us]=c,p[yu]=b,i=(c.mode&1)!==0,h){case"dialog":Nt("cancel",p),Nt("close",p);break;case"iframe":case"object":case"embed":Nt("load",p);break;case"video":case"audio":for(x=0;x<mu.length;x++)Nt(mu[x],p);break;case"source":Nt("error",p);break;case"img":case"image":case"link":Nt("error",p),Nt("load",p);break;case"details":Nt("toggle",p);break;case"input":ge(p,b),Nt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!b.multiple},Nt("invalid",p);break;case"textarea":Rn(p,b),Nt("invalid",p)}tr(h,b),x=null;for(var R in b)if(b.hasOwnProperty(R)){var F=b[R];R==="children"?typeof F=="string"?p.textContent!==F&&(b.suppressHydrationWarning!==!0&&wh(p.textContent,F,i),x=["children",F]):typeof F=="number"&&p.textContent!==""+F&&(b.suppressHydrationWarning!==!0&&wh(p.textContent,F,i),x=["children",""+F]):s.hasOwnProperty(R)&&F!=null&&R==="onScroll"&&Nt("scroll",p)}switch(h){case"input":vn(p),At(p,b,!0);break;case"textarea":vn(p),ht(p);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(p.onclick=_h)}p=x,c.updateQueue=p,p!==null&&(c.flags|=4)}else{R=x.nodeType===9?x:x.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=zt(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=R.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=R.createElement(h,{is:p.is}):(i=R.createElement(h),h==="select"&&(R=i,p.multiple?R.multiple=!0:p.size&&(R.size=p.size))):i=R.createElementNS(i,h),i[Us]=c,i[yu]=p,Kw(i,c,!1,!1),c.stateNode=i;e:{switch(R=Zi(h,p),h){case"dialog":Nt("cancel",i),Nt("close",i),x=p;break;case"iframe":case"object":case"embed":Nt("load",i),x=p;break;case"video":case"audio":for(x=0;x<mu.length;x++)Nt(mu[x],i);x=p;break;case"source":Nt("error",i),x=p;break;case"img":case"image":case"link":Nt("error",i),Nt("load",i),x=p;break;case"details":Nt("toggle",i),x=p;break;case"input":ge(i,p),x=ee(i,p),Nt("invalid",i);break;case"option":x=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},x=he({},p,{value:void 0}),Nt("invalid",i);break;case"textarea":Rn(i,p),x=Bt(i,p),Nt("invalid",i);break;default:x=p}tr(h,x),F=x;for(b in F)if(F.hasOwnProperty(b)){var z=F[b];b==="style"?Ji(i,z):b==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Qi(i,z)):b==="children"?typeof z=="string"?(h!=="textarea"||z!=="")&&er(i,z):typeof z=="number"&&er(i,""+z):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(s.hasOwnProperty(b)?z!=null&&b==="onScroll"&&Nt("scroll",i):z!=null&&k(i,b,z,R))}switch(h){case"input":vn(i),At(i,p,!1);break;case"textarea":vn(i),ht(i);break;case"option":p.value!=null&&i.setAttribute("value",""+ke(p.value));break;case"select":i.multiple=!!p.multiple,b=p.value,b!=null?qn(i,!!p.multiple,b,!1):p.defaultValue!=null&&qn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof x.onClick=="function"&&(i.onclick=_h)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ln(c),null;case 6:if(i&&c.stateNode!=null)Yw(i,c,i.memoizedProps,p);else{if(typeof p!="string"&&c.stateNode===null)throw Error(n(166));if(h=po(_u.current),po($s.current),Ch(c)){if(p=c.stateNode,h=c.memoizedProps,p[Us]=c,(b=p.nodeValue!==h)&&(i=vr,i!==null))switch(i.tag){case 3:wh(p.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&wh(p.nodeValue,h,(i.mode&1)!==0)}b&&(c.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[Us]=c,c.stateNode=p}return Ln(c),null;case 13:if(Tt(Rt),p=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(kt&&br!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Xb(),El(),c.flags|=98560,b=!1;else if(b=Ch(c),p!==null&&p.dehydrated!==null){if(i===null){if(!b)throw Error(n(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Us]=c}else El(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ln(c),b=!1}else os!==null&&(kg(os),os=null),b=!0;if(!b)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(c.child.flags|=8192,(c.mode&1)!==0&&(i===null||(Rt.current&1)!==0?sn===0&&(sn=3):Ag())),c.updateQueue!==null&&(c.flags|=4),Ln(c),null);case 4:return jl(),yg(i,c),i===null&&pu(c.stateNode.containerInfo),Ln(c),null;case 10:return Wp(c.type._context),Ln(c),null;case 17:return rr(c.type)&&Nh(),Ln(c),null;case 19:if(Tt(Rt),b=c.memoizedState,b===null)return Ln(c),null;if(p=(c.flags&128)!==0,R=b.rendering,R===null)if(p)ju(b,!1);else{if(sn!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(R=Oh(i),R!==null){for(c.flags|=128,ju(b,!1),p=R.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),c.subtreeFlags=0,p=h,h=c.child;h!==null;)b=h,i=p,b.flags&=14680066,R=b.alternate,R===null?(b.childLanes=0,b.lanes=i,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=R.childLanes,b.lanes=R.lanes,b.child=R.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=R.memoizedProps,b.memoizedState=R.memoizedState,b.updateQueue=R.updateQueue,b.type=R.type,i=R.dependencies,b.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return bt(Rt,Rt.current&1|2),c.child}i=i.sibling}b.tail!==null&&Et()>Al&&(c.flags|=128,p=!0,ju(b,!1),c.lanes=4194304)}else{if(!p)if(i=Oh(R),i!==null){if(c.flags|=128,p=!0,h=i.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),ju(b,!0),b.tail===null&&b.tailMode==="hidden"&&!R.alternate&&!kt)return Ln(c),null}else 2*Et()-b.renderingStartTime>Al&&h!==1073741824&&(c.flags|=128,p=!0,ju(b,!1),c.lanes=4194304);b.isBackwards?(R.sibling=c.child,c.child=R):(h=b.last,h!==null?h.sibling=R:c.child=R,b.last=R)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=Et(),c.sibling=null,h=Rt.current,bt(Rt,p?h&1|2:h&1),c):(Ln(c),null);case 22:case 23:return Ig(),p=c.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(c.flags|=8192),p&&(c.mode&1)!==0?(wr&1073741824)!==0&&(Ln(c),c.subtreeFlags&6&&(c.flags|=8192)):Ln(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function $A(i,c){switch(Fp(c),c.tag){case 1:return rr(c.type)&&Nh(),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return jl(),Tt(nr),Tt(On),Xp(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 5:return Qp(c),null;case 13:if(Tt(Rt),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(n(340));El()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return Tt(Rt),null;case 4:return jl(),null;case 10:return Wp(c.type._context),null;case 22:case 23:return Ig(),null;case 24:return null;default:return null}}var qh=!1,Vn=!1,BA=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Cl(i,c){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){Ft(i,c,p)}else h.current=null}function xg(i,c,h){try{h()}catch(p){Ft(i,c,p)}}var Qw=!1;function zA(i,c){if(Ip=mi,i=kb(),_p(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var x=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{h.nodeType,b.nodeType}catch{h=null;break e}var R=0,F=-1,z=-1,X=0,ae=0,ce=i,ie=null;t:for(;;){for(var we;ce!==h||x!==0&&ce.nodeType!==3||(F=R+x),ce!==b||p!==0&&ce.nodeType!==3||(z=R+p),ce.nodeType===3&&(R+=ce.nodeValue.length),(we=ce.firstChild)!==null;)ie=ce,ce=we;for(;;){if(ce===i)break t;if(ie===h&&++X===x&&(F=R),ie===b&&++ae===p&&(z=R),(we=ce.nextSibling)!==null)break;ce=ie,ie=ce.parentNode}ce=we}h=F===-1||z===-1?null:{start:F,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;for(Ap={focusedElem:i,selectionRange:h},mi=!1,Ne=c;Ne!==null;)if(c=Ne,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,Ne=i;else for(;Ne!==null;){c=Ne;try{var Te=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ce=Te.memoizedProps,Ht=Te.memoizedState,K=c.stateNode,W=K.getSnapshotBeforeUpdate(c.elementType===c.type?Ce:ls(c.type,Ce),Ht);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=c.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(fe){Ft(c,c.return,fe)}if(i=c.sibling,i!==null){i.return=c.return,Ne=i;break}Ne=c.return}return Te=Qw,Qw=!1,Te}function ku(i,c,h){var p=c.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var x=p=p.next;do{if((x.tag&i)===i){var b=x.destroy;x.destroy=void 0,b!==void 0&&xg(c,h,b)}x=x.next}while(x!==p)}}function Wh(i,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&i)===i){var p=h.create;h.destroy=p()}h=h.next}while(h!==c)}}function vg(i){var c=i.ref;if(c!==null){var h=i.stateNode;switch(i.tag){case 5:i=h;break;default:i=h}typeof c=="function"?c(i):c.current=i}}function Jw(i){var c=i.alternate;c!==null&&(i.alternate=null,Jw(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&(delete c[Us],delete c[yu],delete c[Op],delete c[TA],delete c[SA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Xw(i){return i.tag===5||i.tag===3||i.tag===4}function Zw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Xw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bg(i,c,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(i,c):h.insertBefore(i,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(i,h)):(c=h,c.appendChild(i)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=_h));else if(p!==4&&(i=i.child,i!==null))for(bg(i,c,h),i=i.sibling;i!==null;)bg(i,c,h),i=i.sibling}function wg(i,c,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,c?h.insertBefore(i,c):h.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(wg(i,c,h),i=i.sibling;i!==null;)wg(i,c,h),i=i.sibling}var _n=null,cs=!1;function ma(i,c,h){for(h=h.child;h!==null;)e_(i,c,h),h=h.sibling}function e_(i,c,h){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(eo,h)}catch{}switch(h.tag){case 5:Vn||Cl(h,c);case 6:var p=_n,x=cs;_n=null,ma(i,c,h),_n=p,cs=x,_n!==null&&(cs?(i=_n,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):_n.removeChild(h.stateNode));break;case 18:_n!==null&&(cs?(i=_n,h=h.stateNode,i.nodeType===8?Dp(i.parentNode,h):i.nodeType===1&&Dp(i,h),sa(i)):Dp(_n,h.stateNode));break;case 4:p=_n,x=cs,_n=h.stateNode.containerInfo,cs=!0,ma(i,c,h),_n=p,cs=x;break;case 0:case 11:case 14:case 15:if(!Vn&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){x=p=p.next;do{var b=x,R=b.destroy;b=b.tag,R!==void 0&&((b&2)!==0||(b&4)!==0)&&xg(h,c,R),x=x.next}while(x!==p)}ma(i,c,h);break;case 1:if(!Vn&&(Cl(h,c),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(F){Ft(h,c,F)}ma(i,c,h);break;case 21:ma(i,c,h);break;case 22:h.mode&1?(Vn=(p=Vn)||h.memoizedState!==null,ma(i,c,h),Vn=p):ma(i,c,h);break;default:ma(i,c,h)}}function t_(i){var c=i.updateQueue;if(c!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new BA),c.forEach(function(p){var x=XA.bind(null,i,p);h.has(p)||(h.add(p),p.then(x,x))})}}function us(i,c){var h=c.deletions;if(h!==null)for(var p=0;p<h.length;p++){var x=h[p];try{var b=i,R=c,F=R;e:for(;F!==null;){switch(F.tag){case 5:_n=F.stateNode,cs=!1;break e;case 3:_n=F.stateNode.containerInfo,cs=!0;break e;case 4:_n=F.stateNode.containerInfo,cs=!0;break e}F=F.return}if(_n===null)throw Error(n(160));e_(b,R,x),_n=null,cs=!1;var z=x.alternate;z!==null&&(z.return=null),x.return=null}catch(X){Ft(x,c,X)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)n_(c,i),c=c.sibling}function n_(i,c){var h=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(us(c,i),zs(i),p&4){try{ku(3,i,i.return),Wh(3,i)}catch(Ce){Ft(i,i.return,Ce)}try{ku(5,i,i.return)}catch(Ce){Ft(i,i.return,Ce)}}break;case 1:us(c,i),zs(i),p&512&&h!==null&&Cl(h,h.return);break;case 5:if(us(c,i),zs(i),p&512&&h!==null&&Cl(h,h.return),i.flags&32){var x=i.stateNode;try{er(x,"")}catch(Ce){Ft(i,i.return,Ce)}}if(p&4&&(x=i.stateNode,x!=null)){var b=i.memoizedProps,R=h!==null?h.memoizedProps:b,F=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{F==="input"&&b.type==="radio"&&b.name!=null&&Fe(x,b),Zi(F,R);var X=Zi(F,b);for(R=0;R<z.length;R+=2){var ae=z[R],ce=z[R+1];ae==="style"?Ji(x,ce):ae==="dangerouslySetInnerHTML"?Qi(x,ce):ae==="children"?er(x,ce):k(x,ae,ce,X)}switch(F){case"input":lt(x,b);break;case"textarea":Gi(x,b);break;case"select":var ie=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!b.multiple;var we=b.value;we!=null?qn(x,!!b.multiple,we,!1):ie!==!!b.multiple&&(b.defaultValue!=null?qn(x,!!b.multiple,b.defaultValue,!0):qn(x,!!b.multiple,b.multiple?[]:"",!1))}x[yu]=b}catch(Ce){Ft(i,i.return,Ce)}}break;case 6:if(us(c,i),zs(i),p&4){if(i.stateNode===null)throw Error(n(162));x=i.stateNode,b=i.memoizedProps;try{x.nodeValue=b}catch(Ce){Ft(i,i.return,Ce)}}break;case 3:if(us(c,i),zs(i),p&4&&h!==null&&h.memoizedState.isDehydrated)try{sa(c.containerInfo)}catch(Ce){Ft(i,i.return,Ce)}break;case 4:us(c,i),zs(i);break;case 13:us(c,i),zs(i),x=i.child,x.flags&8192&&(b=x.memoizedState!==null,x.stateNode.isHidden=b,!b||x.alternate!==null&&x.alternate.memoizedState!==null||(Ng=Et())),p&4&&t_(i);break;case 22:if(ae=h!==null&&h.memoizedState!==null,i.mode&1?(Vn=(X=Vn)||ae,us(c,i),Vn=X):us(c,i),zs(i),p&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!ae&&(i.mode&1)!==0)for(Ne=i,ae=i.child;ae!==null;){for(ce=Ne=ae;Ne!==null;){switch(ie=Ne,we=ie.child,ie.tag){case 0:case 11:case 14:case 15:ku(4,ie,ie.return);break;case 1:Cl(ie,ie.return);var Te=ie.stateNode;if(typeof Te.componentWillUnmount=="function"){p=ie,h=ie.return;try{c=p,Te.props=c.memoizedProps,Te.state=c.memoizedState,Te.componentWillUnmount()}catch(Ce){Ft(p,h,Ce)}}break;case 5:Cl(ie,ie.return);break;case 22:if(ie.memoizedState!==null){i_(ce);continue}}we!==null?(we.return=ie,Ne=we):i_(ce)}ae=ae.sibling}e:for(ae=null,ce=i;;){if(ce.tag===5){if(ae===null){ae=ce;try{x=ce.stateNode,X?(b=x.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(F=ce.stateNode,z=ce.memoizedProps.style,R=z!=null&&z.hasOwnProperty("display")?z.display:null,F.style.display=js("display",R))}catch(Ce){Ft(i,i.return,Ce)}}}else if(ce.tag===6){if(ae===null)try{ce.stateNode.nodeValue=X?"":ce.memoizedProps}catch(Ce){Ft(i,i.return,Ce)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===i)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===i)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===i)break e;ae===ce&&(ae=null),ce=ce.return}ae===ce&&(ae=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:us(c,i),zs(i),p&4&&t_(i);break;case 21:break;default:us(c,i),zs(i)}}function zs(i){var c=i.flags;if(c&2){try{e:{for(var h=i.return;h!==null;){if(Xw(h)){var p=h;break e}h=h.return}throw Error(n(160))}switch(p.tag){case 5:var x=p.stateNode;p.flags&32&&(er(x,""),p.flags&=-33);var b=Zw(i);wg(i,b,x);break;case 3:case 4:var R=p.stateNode.containerInfo,F=Zw(i);bg(i,F,R);break;default:throw Error(n(161))}}catch(z){Ft(i,i.return,z)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function qA(i,c,h){Ne=i,r_(i)}function r_(i,c,h){for(var p=(i.mode&1)!==0;Ne!==null;){var x=Ne,b=x.child;if(x.tag===22&&p){var R=x.memoizedState!==null||qh;if(!R){var F=x.alternate,z=F!==null&&F.memoizedState!==null||Vn;F=qh;var X=Vn;if(qh=R,(Vn=z)&&!X)for(Ne=x;Ne!==null;)R=Ne,z=R.child,R.tag===22&&R.memoizedState!==null?a_(x):z!==null?(z.return=R,Ne=z):a_(x);for(;b!==null;)Ne=b,r_(b),b=b.sibling;Ne=x,qh=F,Vn=X}s_(i)}else(x.subtreeFlags&8772)!==0&&b!==null?(b.return=x,Ne=b):s_(i)}}function s_(i){for(;Ne!==null;){var c=Ne;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Vn||Wh(5,c);break;case 1:var p=c.stateNode;if(c.flags&4&&!Vn)if(h===null)p.componentDidMount();else{var x=c.elementType===c.type?h.memoizedProps:ls(c.type,h.memoizedProps);p.componentDidUpdate(x,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var b=c.updateQueue;b!==null&&iw(c,b,p);break;case 3:var R=c.updateQueue;if(R!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}iw(c,R,h)}break;case 5:var F=c.stateNode;if(h===null&&c.flags&4){h=F;var z=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&h.focus();break;case"img":z.src&&(h.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var X=c.alternate;if(X!==null){var ae=X.memoizedState;if(ae!==null){var ce=ae.dehydrated;ce!==null&&sa(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Vn||c.flags&512&&vg(c)}catch(ie){Ft(c,c.return,ie)}}if(c===i){Ne=null;break}if(h=c.sibling,h!==null){h.return=c.return,Ne=h;break}Ne=c.return}}function i_(i){for(;Ne!==null;){var c=Ne;if(c===i){Ne=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Ne=h;break}Ne=c.return}}function a_(i){for(;Ne!==null;){var c=Ne;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Wh(4,c)}catch(z){Ft(c,h,z)}break;case 1:var p=c.stateNode;if(typeof p.componentDidMount=="function"){var x=c.return;try{p.componentDidMount()}catch(z){Ft(c,x,z)}}var b=c.return;try{vg(c)}catch(z){Ft(c,b,z)}break;case 5:var R=c.return;try{vg(c)}catch(z){Ft(c,R,z)}}}catch(z){Ft(c,c.return,z)}if(c===i){Ne=null;break}var F=c.sibling;if(F!==null){F.return=c.return,Ne=F;break}Ne=c.return}}var WA=Math.ceil,Hh=O.ReactCurrentDispatcher,_g=O.ReactCurrentOwner,Vr=O.ReactCurrentBatchConfig,ct=0,mn=null,Jt=null,En=0,wr=0,Il=ca(0),sn=0,Cu=null,yo=0,Kh=0,Eg=0,Iu=null,ir=null,Ng=0,Al=1/0,Ni=null,Gh=!1,Tg=null,pa=null,Yh=!1,ga=null,Qh=0,Au=0,Sg=null,Jh=-1,Xh=0;function Gn(){return(ct&6)!==0?Et():Jh!==-1?Jh:Jh=Et()}function ya(i){return(i.mode&1)===0?1:(ct&2)!==0&&En!==0?En&-En:kA.transition!==null?(Xh===0&&(Xh=Xc()),Xh):(i=st,i!==0||(i=window.event,i=i===void 0?16:al(i.type)),i)}function ds(i,c,h,p){if(50<Au)throw Au=0,Sg=null,Error(n(185));so(i,h,p),((ct&2)===0||i!==mn)&&(i===mn&&((ct&2)===0&&(Kh|=h),sn===4&&xa(i,En)),ar(i,p),h===1&&ct===0&&(c.mode&1)===0&&(Al=Et()+500,Sh&&da()))}function ar(i,c){var h=i.callbackNode;ro(i,c);var p=di(i,i===mn?En:0);if(p===0)h!==null&&Zo(h),i.callbackNode=null,i.callbackPriority=0;else if(c=p&-p,i.callbackPriority!==c){if(h!=null&&Zo(h),c===1)i.tag===0?jA(l_.bind(null,i)):Kb(l_.bind(null,i)),EA(function(){(ct&6)===0&&da()}),h=null;else{switch(Is(p)){case 1:h=el;break;case 4:h=Yc;break;case 16:h=Za;break;case 536870912:h=tl;break;default:h=Za}h=g_(h,o_.bind(null,i))}i.callbackPriority=c,i.callbackNode=h}}function o_(i,c){if(Jh=-1,Xh=0,(ct&6)!==0)throw Error(n(327));var h=i.callbackNode;if(Rl()&&i.callbackNode!==h)return null;var p=di(i,i===mn?En:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||c)c=Zh(i,p);else{c=p;var x=ct;ct|=2;var b=u_();(mn!==i||En!==c)&&(Ni=null,Al=Et()+500,vo(i,c));do try{GA();break}catch(F){c_(i,F)}while(!0);qp(),Hh.current=b,ct=x,Jt!==null?c=0:(mn=null,En=0,c=sn)}if(c!==0){if(c===2&&(x=Jc(i),x!==0&&(p=x,c=jg(i,x))),c===1)throw h=Cu,vo(i,0),xa(i,p),ar(i,Et()),h;if(c===6)xa(i,p);else{if(x=i.current.alternate,(p&30)===0&&!HA(x)&&(c=Zh(i,p),c===2&&(b=Jc(i),b!==0&&(p=b,c=jg(i,b))),c===1))throw h=Cu,vo(i,0),xa(i,p),ar(i,Et()),h;switch(i.finishedWork=x,i.finishedLanes=p,c){case 0:case 1:throw Error(n(345));case 2:bo(i,ir,Ni);break;case 3:if(xa(i,p),(p&130023424)===p&&(c=Ng+500-Et(),10<c)){if(di(i,0)!==0)break;if(x=i.suspendedLanes,(x&p)!==p){Gn(),i.pingedLanes|=i.suspendedLanes&x;break}i.timeoutHandle=Pp(bo.bind(null,i,ir,Ni),c);break}bo(i,ir,Ni);break;case 4:if(xa(i,p),(p&4194240)===p)break;for(c=i.eventTimes,x=-1;0<p;){var R=31-mr(p);b=1<<R,R=c[R],R>x&&(x=R),p&=~b}if(p=x,p=Et()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*WA(p/1960))-p,10<p){i.timeoutHandle=Pp(bo.bind(null,i,ir,Ni),p);break}bo(i,ir,Ni);break;case 5:bo(i,ir,Ni);break;default:throw Error(n(329))}}}return ar(i,Et()),i.callbackNode===h?o_.bind(null,i):null}function jg(i,c){var h=Iu;return i.current.memoizedState.isDehydrated&&(vo(i,c).flags|=256),i=Zh(i,c),i!==2&&(c=ir,ir=h,c!==null&&kg(c)),i}function kg(i){ir===null?ir=i:ir.push.apply(ir,i)}function HA(i){for(var c=i;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var x=h[p],b=x.getSnapshot;x=x.value;try{if(!as(b(),x))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function xa(i,c){for(c&=~Eg,c&=~Kh,i.suspendedLanes|=c,i.pingedLanes&=~c,i=i.expirationTimes;0<c;){var h=31-mr(c),p=1<<h;i[h]=-1,c&=~p}}function l_(i){if((ct&6)!==0)throw Error(n(327));Rl();var c=di(i,0);if((c&1)===0)return ar(i,Et()),null;var h=Zh(i,c);if(i.tag!==0&&h===2){var p=Jc(i);p!==0&&(c=p,h=jg(i,p))}if(h===1)throw h=Cu,vo(i,0),xa(i,c),ar(i,Et()),h;if(h===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=c,bo(i,ir,Ni),ar(i,Et()),null}function Cg(i,c){var h=ct;ct|=1;try{return i(c)}finally{ct=h,ct===0&&(Al=Et()+500,Sh&&da())}}function xo(i){ga!==null&&ga.tag===0&&(ct&6)===0&&Rl();var c=ct;ct|=1;var h=Vr.transition,p=st;try{if(Vr.transition=null,st=1,i)return i()}finally{st=p,Vr.transition=h,ct=c,(ct&6)===0&&da()}}function Ig(){wr=Il.current,Tt(Il)}function vo(i,c){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,_A(h)),Jt!==null)for(h=Jt.return;h!==null;){var p=h;switch(Fp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Nh();break;case 3:jl(),Tt(nr),Tt(On),Xp();break;case 5:Qp(p);break;case 4:jl();break;case 13:Tt(Rt);break;case 19:Tt(Rt);break;case 10:Wp(p.type._context);break;case 22:case 23:Ig()}h=h.return}if(mn=i,Jt=i=va(i.current,null),En=wr=c,sn=0,Cu=null,Eg=Kh=yo=0,ir=Iu=null,mo!==null){for(c=0;c<mo.length;c++)if(h=mo[c],p=h.interleaved,p!==null){h.interleaved=null;var x=p.next,b=h.pending;if(b!==null){var R=b.next;b.next=x,p.next=R}h.pending=p}mo=null}return i}function c_(i,c){do{var h=Jt;try{if(qp(),Mh.current=Uh,Lh){for(var p=Pt.memoizedState;p!==null;){var x=p.queue;x!==null&&(x.pending=null),p=p.next}Lh=!1}if(go=0,fn=rn=Pt=null,Eu=!1,Nu=0,_g.current=null,h===null||h.return===null){sn=1,Cu=c,Jt=null;break}e:{var b=i,R=h.return,F=h,z=c;if(c=En,F.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var X=z,ae=F,ce=ae.tag;if((ae.mode&1)===0&&(ce===0||ce===11||ce===15)){var ie=ae.alternate;ie?(ae.updateQueue=ie.updateQueue,ae.memoizedState=ie.memoizedState,ae.lanes=ie.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var we=Dw(R);if(we!==null){we.flags&=-257,Ow(we,R,F,b,c),we.mode&1&&Pw(b,X,c),c=we,z=X;var Te=c.updateQueue;if(Te===null){var Ce=new Set;Ce.add(z),c.updateQueue=Ce}else Te.add(z);break e}else{if((c&1)===0){Pw(b,X,c),Ag();break e}z=Error(n(426))}}else if(kt&&F.mode&1){var Ht=Dw(R);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),Ow(Ht,R,F,b,c),Bp(kl(z,F));break e}}b=z=kl(z,F),sn!==4&&(sn=2),Iu===null?Iu=[b]:Iu.push(b),b=R;do{switch(b.tag){case 3:b.flags|=65536,c&=-c,b.lanes|=c;var K=Aw(b,z,c);sw(b,K);break e;case 1:F=z;var W=b.type,Y=b.stateNode;if((b.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(pa===null||!pa.has(Y)))){b.flags|=65536,c&=-c,b.lanes|=c;var fe=Rw(b,F,c);sw(b,fe);break e}}b=b.return}while(b!==null)}h_(h)}catch(Ie){c=Ie,Jt===h&&h!==null&&(Jt=h=h.return);continue}break}while(!0)}function u_(){var i=Hh.current;return Hh.current=Uh,i===null?Uh:i}function Ag(){(sn===0||sn===3||sn===2)&&(sn=4),mn===null||(yo&268435455)===0&&(Kh&268435455)===0||xa(mn,En)}function Zh(i,c){var h=ct;ct|=2;var p=u_();(mn!==i||En!==c)&&(Ni=null,vo(i,c));do try{KA();break}catch(x){c_(i,x)}while(!0);if(qp(),ct=h,Hh.current=p,Jt!==null)throw Error(n(261));return mn=null,En=0,sn}function KA(){for(;Jt!==null;)d_(Jt)}function GA(){for(;Jt!==null&&!Xa();)d_(Jt)}function d_(i){var c=p_(i.alternate,i,wr);i.memoizedProps=i.pendingProps,c===null?h_(i):Jt=c,_g.current=null}function h_(i){var c=i;do{var h=c.alternate;if(i=c.return,(c.flags&32768)===0){if(h=UA(h,c,wr),h!==null){Jt=h;return}}else{if(h=$A(h,c),h!==null){h.flags&=32767,Jt=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{sn=6,Jt=null;return}}if(c=c.sibling,c!==null){Jt=c;return}Jt=c=i}while(c!==null);sn===0&&(sn=5)}function bo(i,c,h){var p=st,x=Vr.transition;try{Vr.transition=null,st=1,YA(i,c,h,p)}finally{Vr.transition=x,st=p}return null}function YA(i,c,h,p){do Rl();while(ga!==null);if((ct&6)!==0)throw Error(n(327));h=i.finishedWork;var x=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var b=h.lanes|h.childLanes;if(yp(i,b),i===mn&&(Jt=mn=null,En=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Yh||(Yh=!0,g_(Za,function(){return Rl(),null})),b=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||b){b=Vr.transition,Vr.transition=null;var R=st;st=1;var F=ct;ct|=4,_g.current=null,zA(i,h),n_(h,i),pA(Ap),mi=!!Ip,Ap=Ip=null,i.current=h,qA(h),ui(),ct=F,st=R,Vr.transition=b}else i.current=h;if(Yh&&(Yh=!1,ga=i,Qh=x),b=i.pendingLanes,b===0&&(pa=null),ah(h.stateNode),ar(i,Et()),c!==null)for(p=i.onRecoverableError,h=0;h<c.length;h++)x=c[h],p(x.value,{componentStack:x.stack,digest:x.digest});if(Gh)throw Gh=!1,i=Tg,Tg=null,i;return(Qh&1)!==0&&i.tag!==0&&Rl(),b=i.pendingLanes,(b&1)!==0?i===Sg?Au++:(Au=0,Sg=i):Au=0,da(),null}function Rl(){if(ga!==null){var i=Is(Qh),c=Vr.transition,h=st;try{if(Vr.transition=null,st=16>i?16:i,ga===null)var p=!1;else{if(i=ga,ga=null,Qh=0,(ct&6)!==0)throw Error(n(331));var x=ct;for(ct|=4,Ne=i.current;Ne!==null;){var b=Ne,R=b.child;if((Ne.flags&16)!==0){var F=b.deletions;if(F!==null){for(var z=0;z<F.length;z++){var X=F[z];for(Ne=X;Ne!==null;){var ae=Ne;switch(ae.tag){case 0:case 11:case 15:ku(8,ae,b)}var ce=ae.child;if(ce!==null)ce.return=ae,Ne=ce;else for(;Ne!==null;){ae=Ne;var ie=ae.sibling,we=ae.return;if(Jw(ae),ae===X){Ne=null;break}if(ie!==null){ie.return=we,Ne=ie;break}Ne=we}}}var Te=b.alternate;if(Te!==null){var Ce=Te.child;if(Ce!==null){Te.child=null;do{var Ht=Ce.sibling;Ce.sibling=null,Ce=Ht}while(Ce!==null)}}Ne=b}}if((b.subtreeFlags&2064)!==0&&R!==null)R.return=b,Ne=R;else e:for(;Ne!==null;){if(b=Ne,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:ku(9,b,b.return)}var K=b.sibling;if(K!==null){K.return=b.return,Ne=K;break e}Ne=b.return}}var W=i.current;for(Ne=W;Ne!==null;){R=Ne;var Y=R.child;if((R.subtreeFlags&2064)!==0&&Y!==null)Y.return=R,Ne=Y;else e:for(R=W;Ne!==null;){if(F=Ne,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Wh(9,F)}}catch(Ie){Ft(F,F.return,Ie)}if(F===R){Ne=null;break e}var fe=F.sibling;if(fe!==null){fe.return=F.return,Ne=fe;break e}Ne=F.return}}if(ct=x,da(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(eo,i)}catch{}p=!0}return p}finally{st=h,Vr.transition=c}}return!1}function f_(i,c,h){c=kl(h,c),c=Aw(i,c,1),i=fa(i,c,1),c=Gn(),i!==null&&(so(i,1,c),ar(i,c))}function Ft(i,c,h){if(i.tag===3)f_(i,i,h);else for(;c!==null;){if(c.tag===3){f_(c,i,h);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(pa===null||!pa.has(p))){i=kl(h,i),i=Rw(c,i,1),c=fa(c,i,1),i=Gn(),c!==null&&(so(c,1,i),ar(c,i));break}}c=c.return}}function QA(i,c,h){var p=i.pingCache;p!==null&&p.delete(c),c=Gn(),i.pingedLanes|=i.suspendedLanes&h,mn===i&&(En&h)===h&&(sn===4||sn===3&&(En&130023424)===En&&500>Et()-Ng?vo(i,0):Eg|=h),ar(i,c)}function m_(i,c){c===0&&((i.mode&1)===0?c=1:(c=ta,ta<<=1,(ta&130023424)===0&&(ta=4194304)));var h=Gn();i=wi(i,c),i!==null&&(so(i,c,h),ar(i,h))}function JA(i){var c=i.memoizedState,h=0;c!==null&&(h=c.retryLane),m_(i,h)}function XA(i,c){var h=0;switch(i.tag){case 13:var p=i.stateNode,x=i.memoizedState;x!==null&&(h=x.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(c),m_(i,h)}var p_;p_=function(i,c,h){if(i!==null)if(i.memoizedProps!==c.pendingProps||nr.current)sr=!0;else{if((i.lanes&h)===0&&(c.flags&128)===0)return sr=!1,FA(i,c,h);sr=(i.flags&131072)!==0}else sr=!1,kt&&(c.flags&1048576)!==0&&Gb(c,kh,c.index);switch(c.lanes=0,c.tag){case 2:var p=c.type;zh(i,c),i=c.pendingProps;var x=bl(c,On.current);Sl(c,h),x=tg(null,c,p,i,x,h);var b=ng();return c.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,rr(p)?(b=!0,Th(c)):b=!1,c.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Gp(c),x.updater=$h,c.stateNode=x,x._reactInternals=c,lg(c,p,i,h),c=hg(null,c,p,!0,b,h)):(c.tag=0,kt&&b&&Vp(c),Kn(null,c,x,h),c=c.child),c;case 16:p=c.elementType;e:{switch(zh(i,c),i=c.pendingProps,x=p._init,p=x(p._payload),c.type=p,x=c.tag=eR(p),i=ls(p,i),x){case 0:c=dg(null,c,p,i,h);break e;case 1:c=$w(null,c,p,i,h);break e;case 11:c=Mw(null,c,p,i,h);break e;case 14:c=Lw(null,c,p,ls(p.type,i),h);break e}throw Error(n(306,p,""))}return c;case 0:return p=c.type,x=c.pendingProps,x=c.elementType===p?x:ls(p,x),dg(i,c,p,x,h);case 1:return p=c.type,x=c.pendingProps,x=c.elementType===p?x:ls(p,x),$w(i,c,p,x,h);case 3:e:{if(Bw(c),i===null)throw Error(n(387));p=c.pendingProps,b=c.memoizedState,x=b.element,rw(i,c),Dh(c,p,null,h);var R=c.memoizedState;if(p=R.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},c.updateQueue.baseState=b,c.memoizedState=b,c.flags&256){x=kl(Error(n(423)),c),c=zw(i,c,p,h,x);break e}else if(p!==x){x=kl(Error(n(424)),c),c=zw(i,c,p,h,x);break e}else for(br=la(c.stateNode.containerInfo.firstChild),vr=c,kt=!0,os=null,h=tw(c,null,p,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(El(),p===x){c=Ei(i,c,h);break e}Kn(i,c,p,h)}c=c.child}return c;case 5:return aw(c),i===null&&$p(c),p=c.type,x=c.pendingProps,b=i!==null?i.memoizedProps:null,R=x.children,Rp(p,x)?R=null:b!==null&&Rp(p,b)&&(c.flags|=32),Uw(i,c),Kn(i,c,R,h),c.child;case 6:return i===null&&$p(c),null;case 13:return qw(i,c,h);case 4:return Yp(c,c.stateNode.containerInfo),p=c.pendingProps,i===null?c.child=Nl(c,null,p,h):Kn(i,c,p,h),c.child;case 11:return p=c.type,x=c.pendingProps,x=c.elementType===p?x:ls(p,x),Mw(i,c,p,x,h);case 7:return Kn(i,c,c.pendingProps,h),c.child;case 8:return Kn(i,c,c.pendingProps.children,h),c.child;case 12:return Kn(i,c,c.pendingProps.children,h),c.child;case 10:e:{if(p=c.type._context,x=c.pendingProps,b=c.memoizedProps,R=x.value,bt(Ah,p._currentValue),p._currentValue=R,b!==null)if(as(b.value,R)){if(b.children===x.children&&!nr.current){c=Ei(i,c,h);break e}}else for(b=c.child,b!==null&&(b.return=c);b!==null;){var F=b.dependencies;if(F!==null){R=b.child;for(var z=F.firstContext;z!==null;){if(z.context===p){if(b.tag===1){z=_i(-1,h&-h),z.tag=2;var X=b.updateQueue;if(X!==null){X=X.shared;var ae=X.pending;ae===null?z.next=z:(z.next=ae.next,ae.next=z),X.pending=z}}b.lanes|=h,z=b.alternate,z!==null&&(z.lanes|=h),Hp(b.return,h,c),F.lanes|=h;break}z=z.next}}else if(b.tag===10)R=b.type===c.type?null:b.child;else if(b.tag===18){if(R=b.return,R===null)throw Error(n(341));R.lanes|=h,F=R.alternate,F!==null&&(F.lanes|=h),Hp(R,h,c),R=b.sibling}else R=b.child;if(R!==null)R.return=b;else for(R=b;R!==null;){if(R===c){R=null;break}if(b=R.sibling,b!==null){b.return=R.return,R=b;break}R=R.return}b=R}Kn(i,c,x.children,h),c=c.child}return c;case 9:return x=c.type,p=c.pendingProps.children,Sl(c,h),x=Mr(x),p=p(x),c.flags|=1,Kn(i,c,p,h),c.child;case 14:return p=c.type,x=ls(p,c.pendingProps),x=ls(p.type,x),Lw(i,c,p,x,h);case 15:return Vw(i,c,c.type,c.pendingProps,h);case 17:return p=c.type,x=c.pendingProps,x=c.elementType===p?x:ls(p,x),zh(i,c),c.tag=1,rr(p)?(i=!0,Th(c)):i=!1,Sl(c,h),Cw(c,p,x),lg(c,p,x,h),hg(null,c,p,!0,i,h);case 19:return Hw(i,c,h);case 22:return Fw(i,c,h)}throw Error(n(156,c.tag))};function g_(i,c){return Gc(i,c)}function ZA(i,c,h,p){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(i,c,h,p){return new ZA(i,c,h,p)}function Rg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function eR(i){if(typeof i=="function")return Rg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===q)return 11;if(i===Q)return 14}return 2}function va(i,c){var h=i.alternate;return h===null?(h=Fr(i.tag,c,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=c,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,c=i.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function ef(i,c,h,p,x,b){var R=2;if(p=i,typeof i=="function")Rg(i)&&(R=1);else if(typeof i=="string")R=5;else e:switch(i){case P:return wo(h.children,x,b,c);case A:R=8,x|=8;break;case L:return i=Fr(12,h,c,x|2),i.elementType=L,i.lanes=b,i;case V:return i=Fr(13,h,c,x),i.elementType=V,i.lanes=b,i;case se:return i=Fr(19,h,c,x),i.elementType=se,i.lanes=b,i;case me:return tf(h,x,b,c);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:R=10;break e;case B:R=9;break e;case q:R=11;break e;case Q:R=14;break e;case le:R=16,p=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return c=Fr(R,h,c,x),c.elementType=i,c.type=p,c.lanes=b,c}function wo(i,c,h,p){return i=Fr(7,i,p,c),i.lanes=h,i}function tf(i,c,h,p){return i=Fr(22,i,p,c),i.elementType=me,i.lanes=h,i.stateNode={isHidden:!1},i}function Pg(i,c,h){return i=Fr(6,i,null,c),i.lanes=h,i}function Dg(i,c,h){return c=Fr(4,i.children!==null?i.children:[],i.key,c),c.lanes=h,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}function tR(i,c,h,p,x){this.tag=c,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.identifierPrefix=p,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Og(i,c,h,p,x,b,R,F,z){return i=new tR(i,c,h,F,z),c===1?(c=1,b===!0&&(c|=8)):c=0,b=Fr(3,null,null,c),i.current=b,b.stateNode=i,b.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gp(b),i}function nR(i,c,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:p==null?null:""+p,children:i,containerInfo:c,implementation:h}}function y_(i){if(!i)return ua;i=i._reactInternals;e:{if(ss(i)!==i||i.tag!==1)throw Error(n(170));var c=i;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(rr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(i.tag===1){var h=i.type;if(rr(h))return Wb(i,h,c)}return c}function x_(i,c,h,p,x,b,R,F,z){return i=Og(h,p,!0,i,x,b,R,F,z),i.context=y_(null),h=i.current,p=Gn(),x=ya(h),b=_i(p,x),b.callback=c??null,fa(h,b,x),i.current.lanes=x,so(i,x,p),ar(i,p),i}function nf(i,c,h,p){var x=c.current,b=Gn(),R=ya(x);return h=y_(h),c.context===null?c.context=h:c.pendingContext=h,c=_i(b,R),c.payload={element:i},p=p===void 0?null:p,p!==null&&(c.callback=p),i=fa(x,c,R),i!==null&&(ds(i,x,R,b),Ph(i,x,R)),R}function rf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function v_(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<c?h:c}}function Mg(i,c){v_(i,c),(i=i.alternate)&&v_(i,c)}function rR(){return null}var b_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Lg(i){this._internalRoot=i}sf.prototype.render=Lg.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(n(409));nf(i,c,null,null)},sf.prototype.unmount=Lg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;xo(function(){nf(null,i,null,null)}),c[yi]=null}};function sf(i){this._internalRoot=i}sf.prototype.unstable_scheduleHydration=function(i){if(i){var c=ru();i={blockedOn:null,target:i,priority:c};for(var h=0;h<pr.length&&c!==0&&c<pr[h].priority;h++);pr.splice(h,0,i),h===0&&sl(i)}};function Vg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function af(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function w_(){}function sR(i,c,h,p,x){if(x){if(typeof p=="function"){var b=p;p=function(){var X=rf(R);b.call(X)}}var R=x_(c,p,i,0,null,!1,!1,"",w_);return i._reactRootContainer=R,i[yi]=R.current,pu(i.nodeType===8?i.parentNode:i),xo(),R}for(;x=i.lastChild;)i.removeChild(x);if(typeof p=="function"){var F=p;p=function(){var X=rf(z);F.call(X)}}var z=Og(i,0,!1,null,null,!1,!1,"",w_);return i._reactRootContainer=z,i[yi]=z.current,pu(i.nodeType===8?i.parentNode:i),xo(function(){nf(c,z,h,p)}),z}function of(i,c,h,p,x){var b=h._reactRootContainer;if(b){var R=b;if(typeof x=="function"){var F=x;x=function(){var z=rf(R);F.call(z)}}nf(c,R,i,x)}else R=sR(h,c,i,x,p);return rf(R)}tu=function(i){switch(i.tag){case 3:var c=i.stateNode;if(c.current.memoizedState.isDehydrated){var h=dt(c.pendingLanes);h!==0&&(eu(c,h|1),ar(c,Et()),(ct&6)===0&&(Al=Et()+500,da()))}break;case 13:xo(function(){var p=wi(i,1);if(p!==null){var x=Gn();ds(p,i,1,x)}}),Mg(i,1)}},nl=function(i){if(i.tag===13){var c=wi(i,134217728);if(c!==null){var h=Gn();ds(c,i,134217728,h)}Mg(i,134217728)}},nu=function(i){if(i.tag===13){var c=ya(i),h=wi(i,c);if(h!==null){var p=Gn();ds(h,i,c,p)}Mg(i,c)}},ru=function(){return st},su=function(i,c){var h=st;try{return st=i,c()}finally{st=h}},ns=function(i,c,h){switch(c){case"input":if(lt(i,h),c=h.name,h.type==="radio"&&c!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var p=h[c];if(p!==i&&p.form===i.form){var x=Eh(p);if(!x)throw Error(n(90));nn(p),lt(p,x)}}}break;case"textarea":Gi(i,h);break;case"select":c=h.value,c!=null&&qn(i,!!h.multiple,c,!1)}},qt=Cg,dn=xo;var iR={usingClientEntryPoint:!1,Events:[xu,xl,Eh,Ue,gt,Cg]},Ru={findFiberByHostInstance:co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aR={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ih(i),i===null?null:i.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||rR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{eo=lf.inject(aR),fr=lf}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iR,or.createPortal=function(i,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vg(c))throw Error(n(200));return nR(i,c,null,h)},or.createRoot=function(i,c){if(!Vg(i))throw Error(n(299));var h=!1,p="",x=b_;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onRecoverableError!==void 0&&(x=c.onRecoverableError)),c=Og(i,1,!1,null,null,h,!1,p,x),i[yi]=c.current,pu(i.nodeType===8?i.parentNode:i),new Lg(c)},or.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=ih(c),i=i===null?null:i.stateNode,i},or.flushSync=function(i){return xo(i)},or.hydrate=function(i,c,h){if(!af(c))throw Error(n(200));return of(null,i,c,!0,h)},or.hydrateRoot=function(i,c,h){if(!Vg(i))throw Error(n(405));var p=h!=null&&h.hydratedSources||null,x=!1,b="",R=b_;if(h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onRecoverableError!==void 0&&(R=h.onRecoverableError)),c=x_(c,null,i,1,h??null,x,!1,b,R),i[yi]=c.current,pu(i),p)for(i=0;i<p.length;i++)h=p[i],x=h._getVersion,x=x(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,x]:c.mutableSourceEagerHydrationData.push(h,x);return new sf(c)},or.render=function(i,c,h){if(!af(c))throw Error(n(200));return of(null,i,c,!1,h)},or.unmountComponentAtNode=function(i){if(!af(i))throw Error(n(40));return i._reactRootContainer?(xo(function(){of(null,null,i,!1,function(){i._reactRootContainer=null,i[yi]=null})}),!0):!1},or.unstable_batchedUpdates=Cg,or.unstable_renderSubtreeIntoContainer=function(i,c,h,p){if(!af(h))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return of(i,c,h,!1,p)},or.version="18.3.1-next-f1338f8080-20240426",or}var C_;function F2(){if(C_)return $g.exports;C_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$g.exports=mR(),$g.exports}var I_;function pR(){if(I_)return cf;I_=1;var t=F2();return cf.createRoot=t.createRoot,cf.hydrateRoot=t.hydrateRoot,cf}var gR=pR(),N=ux();const de=V2(N),U2=lR({__proto__:null,default:de},[N]);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var A_="popstate";function yR(t={}){function e(r,s){let{pathname:a,search:l,hash:u}=r.location;return Gy("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:od(s)}return vR(e,n,null,t)}function It(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xR(){return Math.random().toString(36).substring(2,10)}function R_(t,e){return{usr:t.state,key:t.key,idx:e}}function Gy(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Nc(e):e,state:n,key:e&&e.key||r||xR()}}function od({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Nc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function vR(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function y(){u="POP";let _=g(),C=_==null?null:_-f;f=_,d&&d({action:u,location:E.location,delta:C})}function v(_,C){u="PUSH";let D=Gy(E.location,_,C);f=g()+1;let k=R_(D,f),O=E.createHref(D);try{l.pushState(k,"",O)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(O)}a&&d&&d({action:u,location:E.location,delta:1})}function T(_,C){u="REPLACE";let D=Gy(E.location,_,C);f=g();let k=R_(D,f),O=E.createHref(D);l.replaceState(k,"",O),a&&d&&d({action:u,location:E.location,delta:0})}function j(_){return bR(_)}let E={get action(){return u},get location(){return t(s,l)},listen(_){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(A_,y),d=_,()=>{s.removeEventListener(A_,y),d=null}},createHref(_){return e(s,_)},createURL:j,encodeLocation(_){let C=j(_);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:T,go(_){return l.go(_)}};return E}function bR(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),It(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:od(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function $2(t,e,n="/"){return wR(t,e,n,!1)}function wR(t,e,n,r){let s=typeof e=="string"?Nc(e):e,a=Li(s.pathname||"/",n);if(a==null)return null;let l=B2(t);_R(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=PR(a);u=AR(l[d],f,r)}return u}function B2(t,e=[],n=[],r="",s=!1){let a=(l,u,d=s,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;It(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=Pi([r,g.relativePath]),v=n.concat(g);l.children&&l.children.length>0&&(It(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),B2(l.children,e,v,y,d)),!(l.path==null&&!l.index)&&e.push({path:y,score:CR(y,l.index),routesMeta:v})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))a(l,u);else for(let d of z2(l.path))a(l,u,!0,d)}),e}function z2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=z2(r.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function _R(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:IR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ER=/^:[\w-]+$/,NR=3,TR=2,SR=1,jR=10,kR=-2,P_=t=>t==="*";function CR(t,e){let n=t.split("/"),r=n.length;return n.some(P_)&&(r+=kR),e&&(r+=TR),n.filter(s=>!P_(s)).reduce((s,a)=>s+(ER.test(a)?NR:a===""?SR:jR),r)}function IR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function AR(t,e,n=!1){let{routesMeta:r}=t,s={},a="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=em({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&n&&!r[r.length-1].route.index&&(y=em({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:Pi([a,y.pathname]),pathnameBase:VR(Pi([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=Pi([a,y.pathnameBase]))}return l}function em(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let j=u[v]||"";l=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const T=u[v];return y&&!T?f[g]=void 0:f[g]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:t}}function RR(t,e=!1,n=!0){Cr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function PR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Li(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var DR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OR=t=>DR.test(t);function MR(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Nc(t):t,a;if(n)if(OR(n))a=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Cr(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?a=D_(n.substring(1),"/"):a=D_(n,e)}else a=e;return{pathname:a,search:FR(r),hash:UR(s)}}function D_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function qg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dx(t){let e=LR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function hx(t,e,n,r=!1){let s;typeof t=="string"?s=Nc(t):(s={...t},It(!s.pathname||!s.pathname.includes("?"),qg("?","pathname","search",s)),It(!s.pathname||!s.pathname.includes("#"),qg("#","pathname","hash",s)),It(!s.search||!s.search.includes("#"),qg("#","search","hash",s)));let a=t===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=n;else{let y=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=MR(s,u),f=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Pi=t=>t.join("/").replace(/\/\/+/g,"/"),VR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $R(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function BR(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var q2=["POST","PUT","PATCH","DELETE"];new Set(q2);var zR=["GET",...q2];new Set(zR);var Tc=N.createContext(null);Tc.displayName="DataRouter";var Mm=N.createContext(null);Mm.displayName="DataRouterState";N.createContext(!1);var W2=N.createContext({isTransitioning:!1});W2.displayName="ViewTransition";var qR=N.createContext(new Map);qR.displayName="Fetchers";var WR=N.createContext(null);WR.displayName="Await";var Jr=N.createContext(null);Jr.displayName="Navigation";var Dd=N.createContext(null);Dd.displayName="Location";var li=N.createContext({outlet:null,matches:[],isDataRoute:!1});li.displayName="Route";var fx=N.createContext(null);fx.displayName="RouteError";function HR(t,{relative:e}={}){It(Sc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(Jr),{hash:s,pathname:a,search:l}=Od(t,{relative:e}),u=a;return n!=="/"&&(u=a==="/"?n:Pi([n,a])),r.createHref({pathname:u,search:l,hash:s})}function Sc(){return N.useContext(Dd)!=null}function dr(){return It(Sc(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Dd).location}var H2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function K2(t){N.useContext(Jr).static||N.useLayoutEffect(t)}function Ns(){let{isDataRoute:t}=N.useContext(li);return t?iP():KR()}function KR(){It(Sc(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Tc),{basename:e,navigator:n}=N.useContext(Jr),{matches:r}=N.useContext(li),{pathname:s}=dr(),a=JSON.stringify(dx(r)),l=N.useRef(!1);return K2(()=>{l.current=!0}),N.useCallback((d,f={})=>{if(Cr(l.current,H2),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=hx(d,JSON.parse(a),s,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Pi([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,a,s,t])}N.createContext(null);function Od(t,{relative:e}={}){let{matches:n}=N.useContext(li),{pathname:r}=dr(),s=JSON.stringify(dx(n));return N.useMemo(()=>hx(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function GR(t,e){return G2(t,e)}function G2(t,e,n,r,s){It(Sc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=N.useContext(Jr),{matches:l}=N.useContext(li),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let D=y&&y.path||"";Y2(f,!y||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let v=dr(),T;if(e){let D=typeof e=="string"?Nc(e):e;It(g==="/"||D.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${D.pathname}" was given in the \`location\` prop.`),T=D}else T=v;let j=T.pathname||"/",E=j;if(g!=="/"){let D=g.replace(/^\//,"").split("/");E="/"+j.replace(/^\//,"").split("/").slice(D.length).join("/")}let _=$2(t,{pathname:E});Cr(y||_!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Cr(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=ZR(_&&_.map(D=>Object.assign({},D,{params:Object.assign({},d,D.params),pathname:Pi([g,a.encodeLocation?a.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?g:Pi([g,a.encodeLocation?a.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),l,n,r,s);return e&&C?N.createElement(Dd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},C):C}function YR(){let t=sP(),e=$R(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:a},"ErrorBoundary")," or"," ",N.createElement("code",{style:a},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,l)}var QR=N.createElement(YR,null),JR=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?N.createElement(li.Provider,{value:this.props.routeContext},N.createElement(fx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XR({routeContext:t,match:e,children:n}){let r=N.useContext(Tc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(li.Provider,{value:t},n)}function ZR(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=n?.errors;if(l!=null){let g=a.findIndex(y=>y.route.id&&l?.[y.route.id]!==void 0);It(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let u=!1,d=-1;if(n)for(let g=0;g<a.length;g++){let y=a[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:T}=n,j=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||j){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let f=n&&r?(g,y)=>{r(g,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:BR(n.matches),errorInfo:y})}:void 0;return a.reduceRight((g,y,v)=>{let T,j=!1,E=null,_=null;n&&(T=l&&y.route.id?l[y.route.id]:void 0,E=y.route.errorElement||QR,u&&(d<0&&v===0?(Y2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,_=null):d===v&&(j=!0,_=y.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,v+1)),D=()=>{let k;return T?k=E:j?k=_:y.route.Component?k=N.createElement(y.route.Component,null):y.route.element?k=y.route.element:k=g,N.createElement(XR,{match:y,routeContext:{outlet:g,matches:C,isDataRoute:n!=null},children:k})};return n&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?N.createElement(JR,{location:n.location,revalidation:n.revalidation,component:E,error:T,children:D(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:f}):D()},null)}function mx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eP(t){let e=N.useContext(Tc);return It(e,mx(t)),e}function tP(t){let e=N.useContext(Mm);return It(e,mx(t)),e}function nP(t){let e=N.useContext(li);return It(e,mx(t)),e}function px(t){let e=nP(t),n=e.matches[e.matches.length-1];return It(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function rP(){return px("useRouteId")}function sP(){let t=N.useContext(fx),e=tP("useRouteError"),n=px("useRouteError");return t!==void 0?t:e.errors?.[n]}function iP(){let{router:t}=eP("useNavigate"),e=px("useNavigate"),n=N.useRef(!1);return K2(()=>{n.current=!0}),N.useCallback(async(s,a={})=>{Cr(n.current,H2),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var O_={};function Y2(t,e,n){!e&&!O_[t]&&(O_[t]=!0,Cr(!1,n))}N.memo(aP);function aP({routes:t,future:e,state:n,unstable_onError:r}){return G2(t,void 0,n,r,e)}function Yy({to:t,replace:e,state:n,relative:r}){It(Sc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(Jr);Cr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=N.useContext(li),{pathname:l}=dr(),u=Ns(),d=hx(t,dx(a),l,r==="path"),f=JSON.stringify(d);return N.useEffect(()=>{u(JSON.parse(f),{replace:e,state:n,relative:r})},[u,f,r,e,n]),null}function it(t){It(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oP({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){It(!Sc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:u,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[u,s,a,l]);typeof n=="string"&&(n=Nc(n));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:T="default"}=n,j=N.useMemo(()=>{let E=Li(f,u);return E==null?null:{location:{pathname:E,search:g,hash:y,state:v,key:T},navigationType:r}},[u,f,g,y,v,T,r]);return Cr(j!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:N.createElement(Jr.Provider,{value:d},N.createElement(Dd.Provider,{children:e,value:j}))}function lP({children:t,location:e}){return GR(Qy(t),e)}function Qy(t,e=[]){let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let a=[...e,s];if(r.type===N.Fragment){n.push.apply(n,Qy(r.props.children,a));return}It(r.type===it,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),It(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Qy(r.props.children,a)),n.push(l)}),n}var Mf="get",Lf="application/x-www-form-urlencoded";function Lm(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function cP(t){return Lm(t)&&t.tagName.toLowerCase()==="button"}function uP(t){return Lm(t)&&t.tagName.toLowerCase()==="form"}function dP(t){return Lm(t)&&t.tagName.toLowerCase()==="input"}function hP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fP(t,e){return t.button===0&&(!e||e==="_self")&&!hP(t)}function Jy(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function mP(t,e){let n=Jy(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}var uf=null;function pP(){if(uf===null)try{new FormData(document.createElement("form"),0),uf=!1}catch{uf=!0}return uf}var gP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wg(t){return t!=null&&!gP.has(t)?(Cr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lf}"`),null):t}function yP(t,e){let n,r,s,a,l;if(uP(t)){let u=t.getAttribute("action");r=u?Li(u,e):null,n=t.getAttribute("method")||Mf,s=Wg(t.getAttribute("enctype"))||Lf,a=new FormData(t)}else if(cP(t)||dP(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(r=d?Li(d,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Mf,s=Wg(t.getAttribute("formenctype"))||Wg(u.getAttribute("enctype"))||Lf,a=new FormData(u,t),!pP()){let{name:f,type:g,value:y}=t;if(g==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,y)}}else{if(Lm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Mf,r=null,s=Lf,l=t}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xP(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Li(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function vP(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function wP(t,e,n){let r=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await vP(a,n);return l.links?l.links():[]}return[]}));return TP(r.flat(1).filter(bP).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function M_(t,e,n,r,s,a){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):a==="data"?e.filter((d,f)=>{let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function _P(t,e,{includeHydrateFallback:n}={}){return EP(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function EP(t){return[...new Set(t)]}function NP(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function TP(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let a=JSON.stringify(NP(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function Q2(){let t=N.useContext(Tc);return gx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function SP(){let t=N.useContext(Mm);return gx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var yx=N.createContext(void 0);yx.displayName="FrameworkContext";function J2(){let t=N.useContext(yx);return gx(t,"You must render this element inside a <HydratedRouter> element"),t}function jP(t,e){let n=N.useContext(yx),[r,s]=N.useState(!1),[a,l]=N.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=N.useRef(null);N.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let E=C=>{C.forEach(D=>{l(D.isIntersecting)})},_=new IntersectionObserver(E,{threshold:.5});return v.current&&_.observe(v.current),()=>{_.disconnect()}}},[t]),N.useEffect(()=>{if(r){let E=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(E)}}},[r]);let T=()=>{s(!0)},j=()=>{s(!1),l(!1)};return n?t!=="intent"?[a,v,{}]:[a,v,{onFocus:Du(u,T),onBlur:Du(d,j),onMouseEnter:Du(f,T),onMouseLeave:Du(g,j),onTouchStart:Du(y,T)}]:[!1,v,{}]}function Du(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function kP({page:t,...e}){let{router:n}=Q2(),r=N.useMemo(()=>$2(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(IP,{page:t,matches:r,...e}):null}function CP(t){let{manifest:e,routeModules:n}=J2(),[r,s]=N.useState([]);return N.useEffect(()=>{let a=!1;return wP(t,e,n).then(l=>{a||s(l)}),()=>{a=!0}},[t,e,n]),r}function IP({page:t,matches:e,...n}){let r=dr(),{manifest:s,routeModules:a}=J2(),{basename:l}=Q2(),{loaderData:u,matches:d}=SP(),f=N.useMemo(()=>M_(t,e,d,s,r,"data"),[t,e,d,s,r]),g=N.useMemo(()=>M_(t,e,d,s,r,"assets"),[t,e,d,s,r]),y=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let j=new Set,E=!1;if(e.forEach(C=>{let D=s.routes[C.route.id];!D||!D.hasLoader||(!f.some(k=>k.route.id===C.route.id)&&C.route.id in u&&a[C.route.id]?.shouldRevalidate||D.hasClientLoader?E=!0:j.add(C.route.id))}),j.size===0)return[];let _=xP(t,l,"data");return E&&j.size>0&&_.searchParams.set("_routes",e.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[_.pathname+_.search]},[l,u,r,s,f,e,t,a]),v=N.useMemo(()=>_P(g,s),[g,s]),T=CP(g);return N.createElement(N.Fragment,null,y.map(j=>N.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),v.map(j=>N.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),T.map(({key:j,link:E})=>N.createElement("link",{key:j,nonce:n.nonce,...E})))}function AP(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var X2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{X2&&(window.__reactRouterVersion="7.10.1")}catch{}function RP({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=N.useRef();s.current==null&&(s.current=yR({window:r,v5Compat:!0}));let a=s.current,[l,u]=N.useState({action:a.action,location:a.location}),d=N.useCallback(f=>{n===!1?u(f):N.startTransition(()=>u(f))},[n]);return N.useLayoutEffect(()=>a.listen(d),[a,d]),N.createElement(oP,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:n===!0})}var Z2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ke=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},T){let{basename:j,unstable_useTransitions:E}=N.useContext(Jr),_=typeof f=="string"&&Z2.test(f),C,D=!1;if(typeof f=="string"&&_&&(C=f,X2))try{let U=new URL(window.location.href),B=f.startsWith("//")?new URL(U.protocol+f):new URL(f),q=Li(B.pathname,j);B.origin===U.origin&&q!=null?f=q+B.search+B.hash:D=!0}catch{Cr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=HR(f,{relative:s}),[O,I,$]=jP(r,v),P=MP(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_useTransitions:E});function A(U){e&&e(U),U.defaultPrevented||P(U)}let L=N.createElement("a",{...v,...$,href:C||k,onClick:D||a?e:A,ref:AP(T,I),target:d,"data-discover":!_&&n==="render"?"true":void 0});return O&&!_?N.createElement(N.Fragment,null,L,N.createElement(kP,{page:k})):L});Ke.displayName="Link";var PP=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...f},g){let y=Od(l,{relative:f.relative}),v=dr(),T=N.useContext(Mm),{navigator:j,basename:E}=N.useContext(Jr),_=T!=null&&$P(y)&&u===!0,C=j.encodeLocation?j.encodeLocation(y).pathname:y.pathname,D=v.pathname,k=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(D=D.toLowerCase(),k=k?k.toLowerCase():null,C=C.toLowerCase()),k&&E&&(k=Li(k,E)||k);const O=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let I=D===C||!s&&D.startsWith(C)&&D.charAt(O)==="/",$=k!=null&&(k===C||!s&&k.startsWith(C)&&k.charAt(C.length)==="/"),P={isActive:I,isPending:$,isTransitioning:_},A=I?e:void 0,L;typeof r=="function"?L=r(P):L=[r,I?"active":null,$?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let U=typeof a=="function"?a(P):a;return N.createElement(Ke,{...f,"aria-current":A,className:L,ref:g,style:U,to:l,viewTransition:u},typeof d=="function"?d(P):d)});PP.displayName="NavLink";var DP=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:a,method:l=Mf,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},T)=>{let{unstable_useTransitions:j}=N.useContext(Jr),E=FP(),_=UP(u,{relative:f}),C=l.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&Z2.test(u),k=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let I=O.nativeEvent.submitter,$=I?.getAttribute("formmethod")||l,P=()=>E(I||O.currentTarget,{fetcherKey:e,method:$,navigate:n,replace:s,state:a,relative:f,preventScrollReset:g,viewTransition:y});j&&n!==!1?N.startTransition(()=>P()):P()};return N.createElement("form",{ref:T,method:C,action:_,onSubmit:r?d:k,...v,"data-discover":!D&&t==="render"?"true":void 0})});DP.displayName="Form";function OP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eT(t){let e=N.useContext(Tc);return It(e,OP(t)),e}function MP(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_useTransitions:u}={}){let d=Ns(),f=dr(),g=Od(t,{relative:a});return N.useCallback(y=>{if(fP(y,e)){y.preventDefault();let v=n!==void 0?n:od(f)===od(g),T=()=>d(t,{replace:v,state:r,preventScrollReset:s,relative:a,viewTransition:l});u?N.startTransition(()=>T()):T()}},[f,d,g,n,r,e,t,s,a,l,u])}function tT(t){Cr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=N.useRef(Jy(t)),n=N.useRef(!1),r=dr(),s=N.useMemo(()=>mP(r.search,n.current?null:e.current),[r.search]),a=Ns(),l=N.useCallback((u,d)=>{const f=Jy(typeof u=="function"?u(new URLSearchParams(s)):u);n.current=!0,a("?"+f,d)},[a,s]);return[s,l]}var LP=0,VP=()=>`__${String(++LP)}__`;function FP(){let{router:t}=eT("useSubmit"),{basename:e}=N.useContext(Jr),n=rP(),r=t.fetch,s=t.navigate;return N.useCallback(async(a,l={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=yP(a,e);if(l.navigate===!1){let v=l.fetcherKey||VP();await r(v,n,l.action||u,{preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await s(l.action||u,{preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,n])}function UP(t,{relative:e}={}){let{basename:n}=N.useContext(Jr),r=N.useContext(li);It(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Od(t||".",{relative:e})},l=dr();if(t==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();a.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Pi([n,a.pathname])),od(a)}function $P(t,{relative:e}={}){let n=N.useContext(W2);It(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=eT("useViewTransitionState"),s=Od(t,{relative:e});if(!n.isTransitioning)return!1;let a=Li(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Li(n.nextLocation.pathname,r)||n.nextLocation.pathname;return em(s.pathname,l)!=null||em(s.pathname,a)!=null}var nT=F2();const rT=V2(nT),BP=()=>{};var L_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},zP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],u=t[n++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},iT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,u=l?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,g=a>>2,y=(a&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;d||(T=64,l||(v=64)),r.push(n[g],n[y],n[v],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||y==null)throw new qP;const v=a<<2|u>>4;if(r.push(v),f!==64){const T=u<<4&240|f>>2;if(r.push(T),y!==64){const j=f<<6&192|y;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WP=function(t){const e=sT(t);return iT.encodeByteArray(e,!0)},tm=function(t){return WP(t).replace(/\./g,"")},aT=function(t){try{return iT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=()=>HP().__FIREBASE_DEFAULTS__,GP=()=>{if(typeof process>"u"||typeof L_>"u")return;const t=L_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aT(t[1]);return e&&JSON.parse(e)},Vm=()=>{try{return BP()||KP()||GP()||YP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oT=t=>Vm()?.emulatorHosts?.[t],QP=t=>{const e=oT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lT=()=>Vm()?.config,cT=t=>Vm()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JP=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[tm(JSON.stringify(n)),tm(JSON.stringify(l)),""].join(".")}const Ku={};function ZP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ku))Ku[e]?t.emulator.push(e):t.prod.push(e);return t}function e4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let V_=!1;function dT(t,e){if(typeof window>"u"||typeof document>"u"||!jc(window.location.host)||Ku[t]===e||Ku[t]||V_)return;Ku[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=ZP().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{V_=!0,l()},v}function g(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=e4(r),T=n("text"),j=document.getElementById(T)||document.createElement("span"),E=n("learnmore"),_=document.getElementById(E)||document.createElement("a"),C=n("preprendIcon"),D=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const k=v.element;u(k),g(_,E);const O=f();d(D,C),k.append(D,j,_,O),document.body.appendChild(k)}a?(j.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function n4(){const t=Vm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function s4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i4(){const t=zn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function a4(){return!n4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fT(){try{return typeof indexedDB=="object"}catch{return!1}}function mT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}function o4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="FirebaseError";class Ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=l4,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ko.prototype.create)}}class Ko{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?c4(a,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new Ts(s,u,r)}}function c4(t,e){return t.replace(u4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const u4=/\{\$([^}]+)}/g;function d4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],l=e[s];if(F_(a)&&F_(l)){if(!Oa(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function F_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Fu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function h4(t,e){const n=new f4(t,e);return n.subscribe.bind(n)}class f4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");m4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Hg),s.error===void 0&&(s.error=Hg),s.complete===void 0&&(s.complete=Hg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=1e3,g4=2,y4=14400*1e3,x4=.5;function U_(t,e=p4,n=g4){const r=e*Math.pow(n,t),s=Math.round(x4*r*(Math.random()-.5)*2);return Math.min(y4,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w4(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&l.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:b4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b4(t){return t===So?void 0:t}function w4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new v4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const E4={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},N4=et.INFO,T4={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},S4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=T4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fm{constructor(e){this.name=e,this._logLevel=N4,this._logHandler=S4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const j4=(t,e)=>e.some(n=>t instanceof n);let $_,B_;function k4(){return $_||($_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C4(){return B_||(B_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pT=new WeakMap,Xy=new WeakMap,gT=new WeakMap,Kg=new WeakMap,xx=new WeakMap;function I4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Aa(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&pT.set(n,t)}).catch(()=>{}),xx.set(e,t),e}function A4(t){if(Xy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Xy.set(t,e)}let Zy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Aa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function R4(t){Zy=t(Zy)}function P4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gg(this),e,...n);return gT.set(r,e.sort?e.sort():[e]),Aa(r)}:C4().includes(t)?function(...e){return t.apply(Gg(this),e),Aa(pT.get(this))}:function(...e){return Aa(t.apply(Gg(this),e))}}function D4(t){return typeof t=="function"?P4(t):(t instanceof IDBTransaction&&A4(t),j4(t,k4())?new Proxy(t,Zy):t)}function Aa(t){if(t instanceof IDBRequest)return I4(t);if(Kg.has(t))return Kg.get(t);const e=D4(t);return e!==t&&(Kg.set(t,e),xx.set(e,t)),e}const Gg=t=>xx.get(t);function yT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),u=Aa(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Aa(l.result),d.oldVersion,d.newVersion,Aa(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const O4=["get","getKey","getAll","getAllKeys","count"],M4=["put","add","delete","clear"],Yg=new Map;function z_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yg.get(e))return Yg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=M4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||O4.includes(n)))return;const a=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&d.done]))[0]};return Yg.set(e,a),a}R4(t=>({...t,get:(e,n,r)=>z_(e,n)||t.get(e,n,r),has:(e,n)=>!!z_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(V4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function V4(t){return t.getComponent()?.type==="VERSION"}const e0="@firebase/app",q_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new Fm("@firebase/app"),F4="@firebase/app-compat",U4="@firebase/analytics-compat",$4="@firebase/analytics",B4="@firebase/app-check-compat",z4="@firebase/app-check",q4="@firebase/auth",W4="@firebase/auth-compat",H4="@firebase/database",K4="@firebase/data-connect",G4="@firebase/database-compat",Y4="@firebase/functions",Q4="@firebase/functions-compat",J4="@firebase/installations",X4="@firebase/installations-compat",Z4="@firebase/messaging",eD="@firebase/messaging-compat",tD="@firebase/performance",nD="@firebase/performance-compat",rD="@firebase/remote-config",sD="@firebase/remote-config-compat",iD="@firebase/storage",aD="@firebase/storage-compat",oD="@firebase/firestore",lD="@firebase/ai",cD="@firebase/firestore-compat",uD="firebase",dD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="[DEFAULT]",hD={[e0]:"fire-core",[F4]:"fire-core-compat",[$4]:"fire-analytics",[U4]:"fire-analytics-compat",[z4]:"fire-app-check",[B4]:"fire-app-check-compat",[q4]:"fire-auth",[W4]:"fire-auth-compat",[H4]:"fire-rtdb",[K4]:"fire-data-connect",[G4]:"fire-rtdb-compat",[Y4]:"fire-fn",[Q4]:"fire-fn-compat",[J4]:"fire-iid",[X4]:"fire-iid-compat",[Z4]:"fire-fcm",[eD]:"fire-fcm-compat",[tD]:"fire-perf",[nD]:"fire-perf-compat",[rD]:"fire-rc",[sD]:"fire-rc-compat",[iD]:"fire-gcs",[aD]:"fire-gcs-compat",[oD]:"fire-fst",[cD]:"fire-fst-compat",[lD]:"fire-vertex","fire-js":"fire-js",[uD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=new Map,fD=new Map,n0=new Map;function W_(t,e){try{t.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(n0.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;n0.set(e,t);for(const n of nm.values())W_(n,t);for(const n of fD.values())W_(n,t);return!0}function Go(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ra=new Ko("app","Firebase",mD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ra.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=dD;function xT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:t0,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ra.create("bad-app-name",{appName:String(s)});if(n||(n=lT()),!n)throw Ra.create("no-options");const a=nm.get(s);if(a){if(Oa(n,a.options)&&Oa(r,a.config))return a;throw Ra.create("duplicate-app",{appName:s})}const l=new _4(s);for(const d of n0.values())l.addComponent(d);const u=new pD(n,r,l);return nm.set(s,u),u}function vx(t=t0){const e=nm.get(t);if(!e&&t===t0&&lT())return xT();if(!e)throw Ra.create("no-app",{appName:t});return e}function Wr(t,e,n){let r=hD[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(l.join(" "));return}ei(new _s(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="firebase-heartbeat-database",yD=1,ld="firebase-heartbeat-store";let Qg=null;function vT(){return Qg||(Qg=yT(gD,yD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ld)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ra.create("idb-open",{originalErrorMessage:t.message})})),Qg}async function xD(t){try{const n=(await vT()).transaction(ld),r=await n.objectStore(ld).get(bT(t));return await n.done,r}catch(e){if(e instanceof Ts)Vi.warn(e.message);else{const n=Ra.create("idb-get",{originalErrorMessage:e?.message});Vi.warn(n.message)}}}async function H_(t,e){try{const r=(await vT()).transaction(ld,"readwrite");await r.objectStore(ld).put(e,bT(t)),await r.done}catch(n){if(n instanceof Ts)Vi.warn(n.message);else{const r=Ra.create("idb-set",{originalErrorMessage:n?.message});Vi.warn(r.message)}}}function bT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=1024,bD=30;class wD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ED(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=K_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>bD){const s=ND(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=K_(),{heartbeatsToSend:n,unsentEntries:r}=_D(this._heartbeatsCache.heartbeats),s=tm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Vi.warn(e),""}}}function K_(){return new Date().toISOString().substring(0,10)}function _D(t,e=vD){const n=[];let r=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),G_(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),G_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ED{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fT()?mT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return H_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return H_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function G_(t){return tm(JSON.stringify({version:2,heartbeats:t})).length}function ND(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){ei(new _s("platform-logger",e=>new L4(e),"PRIVATE")),ei(new _s("heartbeat",e=>new wD(e),"PRIVATE")),Wr(e0,q_,t),Wr(e0,q_,"esm2020"),Wr("fire-js","")}TD("");function wT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SD=wT,_T=new Ko("auth","Firebase",wT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm=new Fm("@firebase/auth");function jD(t,...e){rm.logLevel<=et.WARN&&rm.warn(`Auth (${kc}): ${t}`,...e)}function Vf(t,...e){rm.logLevel<=et.ERROR&&rm.error(`Auth (${kc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,...e){throw wx(t,...e)}function bs(t,...e){return wx(t,...e)}function bx(t,e,n){const r={...SD(),[e]:n};return new Ko("auth","Firebase",r).create(e,{appName:t.name})}function Di(t){return bx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kD(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gr(t,"argument-error"),bx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _T.create(t,...e)}function Oe(t,e,...n){if(!t)throw wx(e,...n)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vf(e),new Error(e)}function Fi(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(){return typeof self<"u"&&self.location?.href||""}function CD(){return Y_()==="http:"||Y_()==="https:"}function Y_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CD()||hT()||"connection"in navigator)?navigator.onLine:!0}function AD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fi(n>e,"Short delay should be less than long delay!"),this.isMobile=t4()||s4()}get(){return ID()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t,e){Fi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DD=new Ld(3e4,6e4);function Hi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ci(t,e,n,r,s={}){return NT(t,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const u=Md({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:d,...a};return r4()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&jc(t.emulatorConfig.host)&&(f.credentials="include"),ET.fetch()(await TT(t,t.config.apiHost,n,u),f)})}async function NT(t,e,n){t._canInitEmulator=!1;const r={...RD,...e};try{const s=new MD(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw df(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw df(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw df(t,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw bx(t,g,f);Gr(t,g)}}catch(s){if(s instanceof Ts)throw s;Gr(t,"network-request-failed",{message:String(s)})}}async function Vd(t,e,n,r,s={}){const a=await ci(t,e,n,r,s);return"mfaPendingCredential"in a&&Gr(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function TT(t,e,n,r){const s=`${e}${n}?${r}`,a=t,l=a.config.emulator?_x(t.config,s):`${t.config.apiScheme}://${s}`;return PD.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function OD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bs(this.auth,"network-request-failed")),DD.get())})}}function df(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=bs(t,e,r);return s.customData._tokenResponse=n,s}function Q_(t){return t!==void 0&&t.enterprise!==void 0}class LD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return OD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VD(t,e){return ci(t,"GET","/v2/recaptchaConfig",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function sm(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UD(t,e=!1){const n=xn(t),r=await n.getIdToken(e),s=Ex(r);Oe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:r,authTime:Gu(Jg(s.auth_time)),issuedAtTime:Gu(Jg(s.iat)),expirationTime:Gu(Jg(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Jg(t){return Number(t)*1e3}function Ex(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vf("JWT malformed, contained fewer than 3 sections"),null;try{const s=aT(n);return s?JSON.parse(s):(Vf("Failed to decode base64 JWT payload"),null)}catch(s){return Vf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function J_(t){const e=Ex(t);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ts&&$D(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $D({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gu(this.lastLoginAt),this.creationTime=Gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function im(t){const e=t.auth,n=await t.getIdToken(),r=await fc(t,sm(e,{idToken:n}));Oe(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=s.providerUserInfo?.length?ST(s.providerUserInfo):[],l=qD(t.providerData,a),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!l?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new s0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function zD(t){const e=xn(t);await im(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qD(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ST(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e){const n=await NT(t,{},async()=>{const r=Md({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=await TT(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return t.emulatorConfig&&jc(t.emulatorConfig.host)&&(d.credentials="include"),ET.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HD(t,e){return ci(t,"POST","/v2/accounts:revokeToken",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=J_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await WD(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,l=new ic;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Oe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Oe(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ic,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t,e){Oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xs{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new BD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new s0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await fc(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UD(this,e)}reload(){return zD(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await im(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tr(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await fc(this,FD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,u=n.tenantId??void 0,d=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:T,providerData:j,stsTokenManager:E}=n;Oe(y&&E,e,"internal-error");const _=ic.fromJSON(this.name,E);Oe(typeof y=="string",e,"internal-error"),wa(r,e.name),wa(s,e.name),Oe(typeof v=="boolean",e,"internal-error"),Oe(typeof T=="boolean",e,"internal-error"),wa(a,e.name),wa(l,e.name),wa(u,e.name),wa(d,e.name),wa(f,e.name),wa(g,e.name);const C=new xs({uid:y,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:a,tenantId:u,stsTokenManager:_,createdAt:f,lastLoginAt:g});return j&&Array.isArray(j)&&(C.providerData=j.map(D=>({...D}))),d&&(C._redirectEventId=d),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new ic;s.updateFromServerResponse(n);const a=new xs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await im(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Oe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?ST(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,u=new ic;u.updateFromIdToken(r);const d=new xs({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new s0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;function Ai(t){Fi(t instanceof Function,"Expected a class definition");let e=X_.get(t);return e?(Fi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,X_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jT.type="NONE";const Z_=jT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t,e,n){return`firebase:${t}:${e}:${n}`}class ac{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Ff(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ff("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sm(this.auth,{idToken:e}).catch(()=>{});return n?xs._fromGetAccountInfoResponse(this.auth,n,e):null}return xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ac(Ai(Z_),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||Ai(Z_);const l=Ff(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(l);if(g){let y;if(typeof g=="string"){const v=await sm(e,{idToken:g}).catch(()=>{});if(!v)break;y=await xs._fromGetAccountInfoResponse(e,v,g)}else y=xs._fromJSON(e,g);f!==a&&(u=y),a=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new ac(a,e,r):(a=d[0],u&&await a._set(l,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new ac(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PT(e))return"Blackberry";if(DT(e))return"Webos";if(CT(e))return"Safari";if((e.includes("chrome/")||IT(e))&&!e.includes("edge/"))return"Chrome";if(RT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function kT(t=zn()){return/firefox\//i.test(t)}function CT(t=zn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IT(t=zn()){return/crios\//i.test(t)}function AT(t=zn()){return/iemobile/i.test(t)}function RT(t=zn()){return/android/i.test(t)}function PT(t=zn()){return/blackberry/i.test(t)}function DT(t=zn()){return/webos/i.test(t)}function Nx(t=zn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KD(t=zn()){return Nx(t)&&!!window.navigator?.standalone}function GD(){return i4()&&document.documentMode===10}function OT(t=zn()){return Nx(t)||RT(t)||DT(t)||PT(t)||/windows phone/i.test(t)||AT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(t,e=[]){let n;switch(t){case"Browser":n=e1(zn());break;case"Worker":n=`${e1(zn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,u)=>{try{const d=e(a);l(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,e={}){return ci(t,"GET","/v2/passwordPolicy",Hi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=6;class XD{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??JD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t1(this),this.idTokenSubscription=new t1(this),this.beforeStateQueue=new YD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_T,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ai(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ac.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sm(this,{idToken:e}),r=await xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Tr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await im(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tr(this.app))return Promise.reject(Di(this));const n=e?xn(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tr(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tr(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QD(this),n=new XD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ko("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await HD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ai(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await ac.create(this,[Ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&jD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ka(t){return xn(t)}class t1{constructor(e){this.auth=e,this.observer=null,this.addObserver=h4(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e5(t){Um=t}function LT(t){return Um.loadJS(t)}function t5(){return Um.recaptchaEnterpriseScript}function n5(){return Um.gapiScript}function r5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class s5{constructor(){this.enterprise=new i5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class i5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const a5="recaptcha-enterprise",VT="NO_RECAPTCHA";class o5{constructor(e){this.type=a5,this.auth=Ka(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{VD(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new LD(d);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function s(a,l,u){const d=window.grecaptcha;Q_(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(f=>{l(f)}).catch(()=>{l(VT)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new s5().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(u=>{if(!n&&Q_(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=t5();d.length!==0&&(d+=u),LT(d).then(()=>{s(u,a,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function n1(t,e,n,r=!1,s=!1){const a=new o5(t);let l;if(s)l=VT;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function i0(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await n1(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await n1(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t,e){const n=Go(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Oa(a,e??{}))return s;Gr(s,"already-initialized")}return n.initialize({options:e})}function c5(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ai);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function u5(t,e,n){const r=Ka(t);Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=FT(e),{host:l,port:u}=d5(e),d=u===null?"":`:${u}`,f={url:`${a}//${l}${d}/`},g=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Oe(Oa(f,r.config.emulator)&&Oa(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,jc(l)?(uT(`${a}//${l}${d}`),dT("Auth",!0)):h5()}function FT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function d5(t){const e=FT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:r1(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:r1(l)}}}function r1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function h5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function f5(t,e){return ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(t,e){return Vd(t,"POST","/v1/accounts:signInWithPassword",Hi(t,e))}async function p5(t,e){return ci(t,"POST","/v1/accounts:sendOobCode",Hi(t,e))}async function g5(t,e){return p5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(t,e){return Vd(t,"POST","/v1/accounts:signInWithEmailLink",Hi(t,e))}async function x5(t,e){return Vd(t,"POST","/v1/accounts:signInWithEmailLink",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends Tx{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new cd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new cd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i0(e,n,"signInWithPassword",m5);case"emailLink":return y5(e,{email:this._email,oobCode:this._password});default:Gr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i0(e,r,"signUpPassword",f5);case"emailLink":return x5(e,{idToken:n,email:this._email,oobCode:this._password});default:Gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(t,e){return Vd(t,"POST","/v1/accounts:signInWithIdp",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="http://localhost";class Uo extends Tx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const l=new Uo(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return oc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,oc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oc(e,n)}buildRequest(){const e={requestUri:v5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Md(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function w5(t){const e=Vu(Fu(t)).link,n=e?Vu(Fu(e)).deep_link_id:null,r=Vu(Fu(t)).deep_link_id;return(r?Vu(Fu(r)).link:null)||r||n||e||t}class Sx{constructor(e){const n=Vu(Fu(e)),r=n.apiKey??null,s=n.oobCode??null,a=b5(n.mode??null);Oe(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=w5(e);try{return new Sx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.providerId=Cc.PROVIDER_ID}static credential(e,n){return cd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Sx.parseLink(n);return Oe(r,"argument-error"),cd._fromEmailAndCode(e,r.code,r.tenantId)}}Cc.PROVIDER_ID="password";Cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends jx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Fd{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sa.credential(e.oauthAccessToken)}catch{return null}}}Sa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Uo._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ci.credential(n,r)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Fd{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ja.credential(e.oauthAccessToken)}catch{return null}}}ja.GITHUB_SIGN_IN_METHOD="github.com";ja.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends Fd{constructor(){super("twitter.com")}static credential(e,n){return Uo._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ka.credentialFromTaggedObject(e)}static credentialFromError(e){return ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ka.credential(n,r)}catch{return null}}}ka.TWITTER_SIGN_IN_METHOD="twitter.com";ka.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _5(t,e){return Vd(t,"POST","/v1/accounts:signUp",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await xs._fromIdTokenResponse(e,r,s),l=s1(r);return new $o({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=s1(r);return new $o({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function s1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am extends Ts{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,am.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new am(e,n,r,s)}}function UT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?am._fromErrorAndOperation(t,a,e,r):a})}async function E5(t,e,n=!1){const r=await fc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $o._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t,e,n=!1){const{auth:r}=t;if(Tr(r.app))return Promise.reject(Di(r));const s="reauthenticate";try{const a=await fc(t,UT(r,s,e,t),n);Oe(a.idToken,r,"internal-error");const l=Ex(a.idToken);Oe(l,r,"internal-error");const{sub:u}=l;return Oe(t.uid===u,r,"user-mismatch"),$o._forOperation(t,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&Gr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(t,e,n=!1){if(Tr(t.app))return Promise.reject(Di(t));const r="signIn",s=await UT(t,r,e),a=await $o._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function T5(t,e){return $T(Ka(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t,e,n){Oe(n.url?.length>0,t,"invalid-continue-uri"),Oe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Oe(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Oe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Oe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(t){const e=Ka(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function j5(t,e,n){if(Tr(t.app))return Promise.reject(Di(t));const r=Ka(t),l=await i0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_5).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&BT(t),d}),u=await $o._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function k5(t,e,n){return Tr(t.app)?Promise.reject(Di(t)):T5(xn(t),Cc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&BT(t),r})}async function i1(t,e){const n=xn(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&S5(n.auth,s,e);const{email:a}=await g5(n.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,e){return ci(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=xn(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await fc(r,C5(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function A5(t,e,n,r){return xn(t).onIdTokenChanged(e,n,r)}function R5(t,e,n){return xn(t).beforeAuthStateChanged(e,n)}function P5(t,e,n,r){return xn(t).onAuthStateChanged(e,n,r)}function D5(t){return xn(t).signOut()}const om="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(om,"1"),this.storage.removeItem(om),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=1e3,M5=10;class qT extends zT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);GD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,M5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},O5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qT.type="LOCAL";const L5=qT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends zT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WT.type="SESSION";const HT=WT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new $m(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async f=>f(n.origin,a)),d=await V5(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$m.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,d)=>{const f=kx("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(){return window}function U5(t){Ks().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){return typeof Ks().WorkerGlobalScope<"u"&&typeof Ks().importScripts=="function"}async function $5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function B5(){return navigator?.serviceWorker?.controller||null}function z5(){return KT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="firebaseLocalStorageDb",q5=1,lm="firebaseLocalStorage",YT="fbase_key";class Ud{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bm(t,e){return t.transaction([lm],e?"readwrite":"readonly").objectStore(lm)}function W5(){const t=indexedDB.deleteDatabase(GT);return new Ud(t).toPromise()}function a0(){const t=indexedDB.open(GT,q5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lm,{keyPath:YT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(lm)?e(r):(r.close(),await W5(),e(await a0()))})})}async function a1(t,e,n){const r=Bm(t,!0).put({[YT]:e,value:n});return new Ud(r).toPromise()}async function H5(t,e){const n=Bm(t,!1).get(e),r=await new Ud(n).toPromise();return r===void 0?null:r.value}function o1(t,e){const n=Bm(t,!0).delete(e);return new Ud(n).toPromise()}const K5=800,G5=3;class QT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await a0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>G5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$m._getInstance(z5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $5(),!this.activeServiceWorker)return;this.sender=new F5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||B5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await a0();return await a1(e,om,"1"),await o1(e,om),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>a1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>H5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>o1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Bm(s,!1).getAll();return new Ud(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QT.type="LOCAL";const Y5=QT;new Ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e){return e?Ai(e):(Oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx extends Tx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Q5(t){return $T(t.auth,new Cx(t),t.bypassAuthState)}function J5(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),N5(n,new Cx(t),t.bypassAuthState)}async function X5(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),E5(n,new Cx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q5;case"linkViaPopup":case"linkViaRedirect":return X5;case"reauthViaPopup":case"reauthViaRedirect":return J5;default:Gr(this.auth,"internal-error")}}resolve(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=new Ld(2e3,1e4);async function e3(t,e,n){if(Tr(t.app))return Promise.reject(bs(t,"operation-not-supported-in-this-environment"));const r=Ka(t);kD(t,e,jx);const s=JT(r,n);return new Ao(r,"signInViaPopup",e,s).executeNotNull()}class Ao extends XT{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const e=kx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Z5.get())};e()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="pendingRedirect",Uf=new Map;class n3 extends XT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uf.get(this.auth._key());if(!e){try{const r=await r3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uf.set(this.auth._key(),e)}return this.bypassAuthState||Uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r3(t,e){const n=a3(e),r=i3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function s3(t,e){Uf.set(t._key(),e)}function i3(t){return Ai(t._redirectPersistence)}function a3(t){return Ff(t3,t.config.apiKey,t.name)}async function o3(t,e,n=!1){if(Tr(t.app))return Promise.reject(Di(t));const r=Ka(t),s=JT(r,e),l=await new n3(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=600*1e3;class c3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ZT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(bs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l3&&this.cachedEventUids.clear(),this.cachedEventUids.has(l1(e))}saveEventToCache(e){this.cachedEventUids.add(l1(e)),this.lastProcessedEventTime=Date.now()}}function l1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ZT({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function u3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f3=/^https?/;async function m3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await d3(t);for(const n of e)try{if(p3(n))return}catch{}Gr(t,"unauthorized-domain")}function p3(t){const e=r0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!f3.test(n))return!1;if(h3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=new Ld(3e4,6e4);function c1(){const t=Ks().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function y3(t){return new Promise((e,n)=>{function r(){c1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c1(),n(bs(t,"network-request-failed"))},timeout:g3.get()})}if(Ks().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ks().gapi?.load)r();else{const s=r5("iframefcb");return Ks()[s]=()=>{gapi.load?r():n(bs(t,"network-request-failed"))},LT(`${n5()}?onload=${s}`).catch(a=>n(a))}}).catch(e=>{throw $f=null,e})}let $f=null;function x3(t){return $f=$f||y3(t),$f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=new Ld(5e3,15e3),b3="__/auth/iframe",w3="emulator/auth/iframe",_3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N3(t){const e=t.config;Oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_x(e,w3):`https://${t.config.authDomain}/${b3}`,r={apiKey:e.apiKey,appName:t.name,v:kc},s=E3.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Md(r).slice(1)}`}async function T3(t){const e=await x3(t),n=Ks().gapi;return Oe(n,t,"internal-error"),e.open({where:document.body,url:N3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_3,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=bs(t,"network-request-failed"),u=Ks().setTimeout(()=>{a(l)},v3.get());function d(){Ks().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j3=500,k3=600,C3="_blank",I3="http://localhost";class u1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A3(t,e,n,r=j3,s=k3){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...S3,width:r.toString(),height:s.toString(),top:a,left:l},f=zn().toLowerCase();n&&(u=IT(f)?C3:n),kT(f)&&(e=e||I3,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[T,j])=>`${v}${T}=${j},`,"");if(KD(f)&&u!=="_self")return R3(e||"",u),new u1(null);const y=window.open(e||"",u,g);Oe(y,t,"popup-blocked");try{y.focus()}catch{}return new u1(y)}function R3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="__/auth/handler",D3="emulator/auth/handler",O3=encodeURIComponent("fac");async function d1(t,e,n,r,s,a){Oe(t.config.authDomain,t,"auth-domain-config-required"),Oe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kc,eventId:s};if(e instanceof jx){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",d4(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))l[g]=y}if(e instanceof Fd){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await t._getAppCheckToken(),f=d?`#${O3}=${encodeURIComponent(d)}`:"";return`${M3(t)}?${Md(u).slice(1)}${f}`}function M3({config:t}){return t.emulator?_x(t,D3):`https://${t.authDomain}/${P3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="webStorageSupport";class L3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HT,this._completeRedirectFn=o3,this._overrideRedirectResult=s3}async _openPopup(e,n,r,s){Fi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await d1(e,n,r,r0(),s);return A3(e,a,kx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await d1(e,n,r,r0(),s);return U5(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Fi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await T3(e),r=new c3(e);return n.register("authEvent",s=>(Oe(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xg,{type:Xg},s=>{const a=s?.[0]?.[Xg];a!==void 0&&n(!!a),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OT()||CT()||Nx()}}const V3=L3;var h1="@firebase/auth",f1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $3(t){ei(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Oe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MT(t)},f=new ZD(r,s,a,d);return c5(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new _s("auth-internal",e=>{const n=Ka(e.getProvider("auth").getImmediate());return(r=>new F3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wr(h1,f1,U3(t)),Wr(h1,f1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=300,z3=cT("authIdTokenMaxAge")||B3;let m1=null;const q3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>z3)return;const s=n?.token;m1!==s&&(m1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function W3(t=vx()){const e=Go(t,"auth");if(e.isInitialized())return e.getImmediate();const n=l5(t,{popupRedirectResolver:V3,persistence:[Y5,L5,HT]}),r=cT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=q3(a.toString());R5(n,l,()=>l(n.currentUser)),A5(n,u=>l(u))}}const s=oT("auth");return s&&u5(n,`http://${s}`),n}function H3(){return document.getElementsByTagName("head")?.[0]??document}e5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=bs("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",H3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$3("Browser");var p1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pa,eS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function L(){}L.prototype=A.prototype,P.F=A.prototype,P.prototype=new L,P.prototype.constructor=P,P.D=function(U,B,q){for(var V=Array(arguments.length-2),se=2;se<arguments.length;se++)V[se-2]=arguments[se];return A.prototype[B].apply(U,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,A,L){L||(L=0);const U=Array(16);if(typeof A=="string")for(var B=0;B<16;++B)U[B]=A.charCodeAt(L++)|A.charCodeAt(L++)<<8|A.charCodeAt(L++)<<16|A.charCodeAt(L++)<<24;else for(B=0;B<16;++B)U[B]=A[L++]|A[L++]<<8|A[L++]<<16|A[L++]<<24;A=P.g[0],L=P.g[1],B=P.g[2];let q=P.g[3],V;V=A+(q^L&(B^q))+U[0]+3614090360&4294967295,A=L+(V<<7&4294967295|V>>>25),V=q+(B^A&(L^B))+U[1]+3905402710&4294967295,q=A+(V<<12&4294967295|V>>>20),V=B+(L^q&(A^L))+U[2]+606105819&4294967295,B=q+(V<<17&4294967295|V>>>15),V=L+(A^B&(q^A))+U[3]+3250441966&4294967295,L=B+(V<<22&4294967295|V>>>10),V=A+(q^L&(B^q))+U[4]+4118548399&4294967295,A=L+(V<<7&4294967295|V>>>25),V=q+(B^A&(L^B))+U[5]+1200080426&4294967295,q=A+(V<<12&4294967295|V>>>20),V=B+(L^q&(A^L))+U[6]+2821735955&4294967295,B=q+(V<<17&4294967295|V>>>15),V=L+(A^B&(q^A))+U[7]+4249261313&4294967295,L=B+(V<<22&4294967295|V>>>10),V=A+(q^L&(B^q))+U[8]+1770035416&4294967295,A=L+(V<<7&4294967295|V>>>25),V=q+(B^A&(L^B))+U[9]+2336552879&4294967295,q=A+(V<<12&4294967295|V>>>20),V=B+(L^q&(A^L))+U[10]+4294925233&4294967295,B=q+(V<<17&4294967295|V>>>15),V=L+(A^B&(q^A))+U[11]+2304563134&4294967295,L=B+(V<<22&4294967295|V>>>10),V=A+(q^L&(B^q))+U[12]+1804603682&4294967295,A=L+(V<<7&4294967295|V>>>25),V=q+(B^A&(L^B))+U[13]+4254626195&4294967295,q=A+(V<<12&4294967295|V>>>20),V=B+(L^q&(A^L))+U[14]+2792965006&4294967295,B=q+(V<<17&4294967295|V>>>15),V=L+(A^B&(q^A))+U[15]+1236535329&4294967295,L=B+(V<<22&4294967295|V>>>10),V=A+(B^q&(L^B))+U[1]+4129170786&4294967295,A=L+(V<<5&4294967295|V>>>27),V=q+(L^B&(A^L))+U[6]+3225465664&4294967295,q=A+(V<<9&4294967295|V>>>23),V=B+(A^L&(q^A))+U[11]+643717713&4294967295,B=q+(V<<14&4294967295|V>>>18),V=L+(q^A&(B^q))+U[0]+3921069994&4294967295,L=B+(V<<20&4294967295|V>>>12),V=A+(B^q&(L^B))+U[5]+3593408605&4294967295,A=L+(V<<5&4294967295|V>>>27),V=q+(L^B&(A^L))+U[10]+38016083&4294967295,q=A+(V<<9&4294967295|V>>>23),V=B+(A^L&(q^A))+U[15]+3634488961&4294967295,B=q+(V<<14&4294967295|V>>>18),V=L+(q^A&(B^q))+U[4]+3889429448&4294967295,L=B+(V<<20&4294967295|V>>>12),V=A+(B^q&(L^B))+U[9]+568446438&4294967295,A=L+(V<<5&4294967295|V>>>27),V=q+(L^B&(A^L))+U[14]+3275163606&4294967295,q=A+(V<<9&4294967295|V>>>23),V=B+(A^L&(q^A))+U[3]+4107603335&4294967295,B=q+(V<<14&4294967295|V>>>18),V=L+(q^A&(B^q))+U[8]+1163531501&4294967295,L=B+(V<<20&4294967295|V>>>12),V=A+(B^q&(L^B))+U[13]+2850285829&4294967295,A=L+(V<<5&4294967295|V>>>27),V=q+(L^B&(A^L))+U[2]+4243563512&4294967295,q=A+(V<<9&4294967295|V>>>23),V=B+(A^L&(q^A))+U[7]+1735328473&4294967295,B=q+(V<<14&4294967295|V>>>18),V=L+(q^A&(B^q))+U[12]+2368359562&4294967295,L=B+(V<<20&4294967295|V>>>12),V=A+(L^B^q)+U[5]+4294588738&4294967295,A=L+(V<<4&4294967295|V>>>28),V=q+(A^L^B)+U[8]+2272392833&4294967295,q=A+(V<<11&4294967295|V>>>21),V=B+(q^A^L)+U[11]+1839030562&4294967295,B=q+(V<<16&4294967295|V>>>16),V=L+(B^q^A)+U[14]+4259657740&4294967295,L=B+(V<<23&4294967295|V>>>9),V=A+(L^B^q)+U[1]+2763975236&4294967295,A=L+(V<<4&4294967295|V>>>28),V=q+(A^L^B)+U[4]+1272893353&4294967295,q=A+(V<<11&4294967295|V>>>21),V=B+(q^A^L)+U[7]+4139469664&4294967295,B=q+(V<<16&4294967295|V>>>16),V=L+(B^q^A)+U[10]+3200236656&4294967295,L=B+(V<<23&4294967295|V>>>9),V=A+(L^B^q)+U[13]+681279174&4294967295,A=L+(V<<4&4294967295|V>>>28),V=q+(A^L^B)+U[0]+3936430074&4294967295,q=A+(V<<11&4294967295|V>>>21),V=B+(q^A^L)+U[3]+3572445317&4294967295,B=q+(V<<16&4294967295|V>>>16),V=L+(B^q^A)+U[6]+76029189&4294967295,L=B+(V<<23&4294967295|V>>>9),V=A+(L^B^q)+U[9]+3654602809&4294967295,A=L+(V<<4&4294967295|V>>>28),V=q+(A^L^B)+U[12]+3873151461&4294967295,q=A+(V<<11&4294967295|V>>>21),V=B+(q^A^L)+U[15]+530742520&4294967295,B=q+(V<<16&4294967295|V>>>16),V=L+(B^q^A)+U[2]+3299628645&4294967295,L=B+(V<<23&4294967295|V>>>9),V=A+(B^(L|~q))+U[0]+4096336452&4294967295,A=L+(V<<6&4294967295|V>>>26),V=q+(L^(A|~B))+U[7]+1126891415&4294967295,q=A+(V<<10&4294967295|V>>>22),V=B+(A^(q|~L))+U[14]+2878612391&4294967295,B=q+(V<<15&4294967295|V>>>17),V=L+(q^(B|~A))+U[5]+4237533241&4294967295,L=B+(V<<21&4294967295|V>>>11),V=A+(B^(L|~q))+U[12]+1700485571&4294967295,A=L+(V<<6&4294967295|V>>>26),V=q+(L^(A|~B))+U[3]+2399980690&4294967295,q=A+(V<<10&4294967295|V>>>22),V=B+(A^(q|~L))+U[10]+4293915773&4294967295,B=q+(V<<15&4294967295|V>>>17),V=L+(q^(B|~A))+U[1]+2240044497&4294967295,L=B+(V<<21&4294967295|V>>>11),V=A+(B^(L|~q))+U[8]+1873313359&4294967295,A=L+(V<<6&4294967295|V>>>26),V=q+(L^(A|~B))+U[15]+4264355552&4294967295,q=A+(V<<10&4294967295|V>>>22),V=B+(A^(q|~L))+U[6]+2734768916&4294967295,B=q+(V<<15&4294967295|V>>>17),V=L+(q^(B|~A))+U[13]+1309151649&4294967295,L=B+(V<<21&4294967295|V>>>11),V=A+(B^(L|~q))+U[4]+4149444226&4294967295,A=L+(V<<6&4294967295|V>>>26),V=q+(L^(A|~B))+U[11]+3174756917&4294967295,q=A+(V<<10&4294967295|V>>>22),V=B+(A^(q|~L))+U[2]+718787259&4294967295,B=q+(V<<15&4294967295|V>>>17),V=L+(q^(B|~A))+U[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(B+(V<<21&4294967295|V>>>11))&4294967295,P.g[2]=P.g[2]+B&4294967295,P.g[3]=P.g[3]+q&4294967295}r.prototype.v=function(P,A){A===void 0&&(A=P.length);const L=A-this.blockSize,U=this.C;let B=this.h,q=0;for(;q<A;){if(B==0)for(;q<=L;)s(this,P,q),q+=this.blockSize;if(typeof P=="string"){for(;q<A;)if(U[B++]=P.charCodeAt(q++),B==this.blockSize){s(this,U),B=0;break}}else for(;q<A;)if(U[B++]=P[q++],B==this.blockSize){s(this,U),B=0;break}}this.h=B,this.o+=A},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;A=this.o*8;for(var L=P.length-8;L<P.length;++L)P[L]=A&255,A/=256;for(this.v(P),P=Array(16),A=0,L=0;L<4;++L)for(let U=0;U<32;U+=8)P[A++]=this.g[L]>>>U&255;return P};function a(P,A){var L=u;return Object.prototype.hasOwnProperty.call(L,P)?L[P]:L[P]=A(P)}function l(P,A){this.h=A;const L=[];let U=!0;for(let B=P.length-1;B>=0;B--){const q=P[B]|0;U&&q==A||(L[B]=q,U=!1)}this.g=L}var u={};function d(P){return-128<=P&&P<128?a(P,function(A){return new l([A|0],A<0?-1:0)}):new l([P|0],P<0?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return y;if(P<0)return _(f(-P));const A=[];let L=1;for(let U=0;P>=L;U++)A[U]=P/L|0,L*=4294967296;return new l(A,0)}function g(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return _(g(P.substring(1),A));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=f(Math.pow(A,8));let U=y;for(let q=0;q<P.length;q+=8){var B=Math.min(8,P.length-q);const V=parseInt(P.substring(q,q+B),A);B<8?(B=f(Math.pow(A,B)),U=U.j(B).add(f(V))):(U=U.j(L),U=U.add(f(V)))}return U}var y=d(0),v=d(1),T=d(16777216);t=l.prototype,t.m=function(){if(E(this))return-_(this).m();let P=0,A=1;for(let L=0;L<this.g.length;L++){const U=this.i(L);P+=(U>=0?U:4294967296+U)*A,A*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(j(this))return"0";if(E(this))return"-"+_(this).toString(P);const A=f(Math.pow(P,6));var L=this;let U="";for(;;){const B=O(L,A).g;L=C(L,B.j(A));let q=((L.g.length>0?L.g[0]:L.h)>>>0).toString(P);if(L=B,j(L))return q+U;for(;q.length<6;)q="0"+q;U=q+U}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function j(P){if(P.h!=0)return!1;for(let A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function E(P){return P.h==-1}t.l=function(P){return P=C(this,P),E(P)?-1:j(P)?0:1};function _(P){const A=P.g.length,L=[];for(let U=0;U<A;U++)L[U]=~P.g[U];return new l(L,~P.h).add(v)}t.abs=function(){return E(this)?_(this):this},t.add=function(P){const A=Math.max(this.g.length,P.g.length),L=[];let U=0;for(let B=0;B<=A;B++){let q=U+(this.i(B)&65535)+(P.i(B)&65535),V=(q>>>16)+(this.i(B)>>>16)+(P.i(B)>>>16);U=V>>>16,q&=65535,V&=65535,L[B]=V<<16|q}return new l(L,L[L.length-1]&-2147483648?-1:0)};function C(P,A){return P.add(_(A))}t.j=function(P){if(j(this)||j(P))return y;if(E(this))return E(P)?_(this).j(_(P)):_(_(this).j(P));if(E(P))return _(this.j(_(P)));if(this.l(T)<0&&P.l(T)<0)return f(this.m()*P.m());const A=this.g.length+P.g.length,L=[];for(var U=0;U<2*A;U++)L[U]=0;for(U=0;U<this.g.length;U++)for(let B=0;B<P.g.length;B++){const q=this.i(U)>>>16,V=this.i(U)&65535,se=P.i(B)>>>16,Q=P.i(B)&65535;L[2*U+2*B]+=V*Q,D(L,2*U+2*B),L[2*U+2*B+1]+=q*Q,D(L,2*U+2*B+1),L[2*U+2*B+1]+=V*se,D(L,2*U+2*B+1),L[2*U+2*B+2]+=q*se,D(L,2*U+2*B+2)}for(P=0;P<A;P++)L[P]=L[2*P+1]<<16|L[2*P];for(P=A;P<2*A;P++)L[P]=0;return new l(L,0)};function D(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function k(P,A){this.g=P,this.h=A}function O(P,A){if(j(A))throw Error("division by zero");if(j(P))return new k(y,y);if(E(P))return A=O(_(P),A),new k(_(A.g),_(A.h));if(E(A))return A=O(P,_(A)),new k(_(A.g),A.h);if(P.g.length>30){if(E(P)||E(A))throw Error("slowDivide_ only works with positive integers.");for(var L=v,U=A;U.l(P)<=0;)L=I(L),U=I(U);var B=$(L,1),q=$(U,1);for(U=$(U,2),L=$(L,2);!j(U);){var V=q.add(U);V.l(P)<=0&&(B=B.add(L),q=V),U=$(U,1),L=$(L,1)}return A=C(P,B.j(A)),new k(B,A)}for(B=y;P.l(A)>=0;){for(L=Math.max(1,Math.floor(P.m()/A.m())),U=Math.ceil(Math.log(L)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),q=f(L),V=q.j(A);E(V)||V.l(P)>0;)L-=U,q=f(L),V=q.j(A);j(q)&&(q=v),B=B.add(q),P=C(P,V)}return new k(B,P)}t.B=function(P){return O(this,P).h},t.and=function(P){const A=Math.max(this.g.length,P.g.length),L=[];for(let U=0;U<A;U++)L[U]=this.i(U)&P.i(U);return new l(L,this.h&P.h)},t.or=function(P){const A=Math.max(this.g.length,P.g.length),L=[];for(let U=0;U<A;U++)L[U]=this.i(U)|P.i(U);return new l(L,this.h|P.h)},t.xor=function(P){const A=Math.max(this.g.length,P.g.length),L=[];for(let U=0;U<A;U++)L[U]=this.i(U)^P.i(U);return new l(L,this.h^P.h)};function I(P){const A=P.g.length+1,L=[];for(let U=0;U<A;U++)L[U]=P.i(U)<<1|P.i(U-1)>>>31;return new l(L,P.h)}function $(P,A){const L=A>>5;A%=32;const U=P.g.length-L,B=[];for(let q=0;q<U;q++)B[q]=A>0?P.i(q+L)>>>A|P.i(q+L+1)<<32-A:P.i(q+L);return new l(B,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,eS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,Pa=l}).apply(typeof p1<"u"?p1:typeof self<"u"?self:typeof window<"u"?window:{});var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tS,Uu,nS,Bf,o0,rS,sS,iS;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var w=0;w<m.length;++w){var S=m[w];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(m,w){if(w)e:{var S=r;m=m.split(".");for(var M=0;M<m.length-1;M++){var G=m[M];if(!(G in S))break e;S=S[G]}m=m[m.length-1],M=S[m],w=w(M),w!=M&&w!=null&&e(S,m,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(w){var S=[],M;for(M in w)Object.prototype.hasOwnProperty.call(w,M)&&S.push([M,w[M]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function d(m,w,S){return m.call.apply(m.bind,arguments)}function f(m,w,S){return f=d,f.apply(null,arguments)}function g(m,w){var S=Array.prototype.slice.call(arguments,1);return function(){var M=S.slice();return M.push.apply(M,arguments),m.apply(this,M)}}function y(m,w){function S(){}S.prototype=w.prototype,m.Z=w.prototype,m.prototype=new S,m.prototype.constructor=m,m.Ob=function(M,G,Z){for(var pe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)pe[Ge-2]=arguments[Ge];return w.prototype[G].apply(M,pe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function T(m){const w=m.length;if(w>0){const S=Array(w);for(let M=0;M<w;M++)S[M]=m[M];return S}return[]}function j(m,w){for(let M=1;M<arguments.length;M++){const G=arguments[M];var S=typeof G;if(S=S!="object"?S:G?Array.isArray(G)?"array":S:"null",S=="array"||S=="object"&&typeof G.length=="number"){S=m.length||0;const Z=G.length||0;m.length=S+Z;for(let pe=0;pe<Z;pe++)m[S+pe]=G[pe]}else m.push(G)}}class E{constructor(w,S){this.i=w,this.j=S,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function _(m){l.setTimeout(()=>{throw m},0)}function C(){var m=P;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class D{constructor(){this.h=this.g=null}add(w,S){const M=k.get();M.set(w,S),this.h?this.h.next=M:this.g=M,this.h=M}}var k=new E(()=>new O,m=>m.reset());class O{constructor(){this.next=this.g=this.h=null}set(w,S){this.h=w,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let I,$=!1,P=new D,A=()=>{const m=Promise.resolve(void 0);I=()=>{m.then(L)}};function L(){for(var m;m=C();){try{m.h.call(m.g)}catch(S){_(S)}var w=k;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}$=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};l.addEventListener("test",S,w),l.removeEventListener("test",S,w)}catch{}return m})();function V(m){return/^[\s\xa0]*$/.test(m)}function se(m,w){B.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}y(se,B),se.prototype.init=function(m,w){const S=this.type=m.type,M=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(S=="mouseover"?w=m.fromElement:S=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),le=0;function me(m,w,S,M,G){this.listener=m,this.proxy=null,this.src=w,this.type=S,this.capture=!!M,this.ha=G,this.key=++le,this.da=this.fa=!1}function J(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xe(m,w,S){for(const M in m)w.call(S,m[M],M,m)}function he(m,w){for(const S in m)w.call(void 0,m[S],S,m)}function H(m){const w={};for(const S in m)w[S]=m[S];return w}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(m,w){let S,M;for(let G=1;G<arguments.length;G++){M=arguments[G];for(S in M)m[S]=M[S];for(let Z=0;Z<ne.length;Z++)S=ne[Z],Object.prototype.hasOwnProperty.call(M,S)&&(m[S]=M[S])}}function ye(m){this.src=m,this.g={},this.h=0}ye.prototype.add=function(m,w,S,M,G){const Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);const pe=De(m,w,M,G);return pe>-1?(w=m[pe],S||(w.fa=!1)):(w=new me(w,this.src,Z,!!M,G),w.fa=S,m.push(w)),w};function Ee(m,w){const S=w.type;if(S in m.g){var M=m.g[S],G=Array.prototype.indexOf.call(M,w,void 0),Z;(Z=G>=0)&&Array.prototype.splice.call(M,G,1),Z&&(J(w),m.g[S].length==0&&(delete m.g[S],m.h--))}}function De(m,w,S,M){for(let G=0;G<m.length;++G){const Z=m[G];if(!Z.da&&Z.listener==w&&Z.capture==!!S&&Z.ha==M)return G}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),ke={};function Je(m,w,S,M,G){if(Array.isArray(w)){for(let Z=0;Z<w.length;Z++)Je(m,w[Z],S,M,G);return null}return S=At(S),m&&m[Q]?m.J(w,S,u(M)?!!M.capture:!1,G):pt(m,w,S,!1,M,G)}function pt(m,w,S,M,G,Z){if(!w)throw Error("Invalid event type");const pe=u(G)?!!G.capture:!!G;let Ge=Fe(m);if(Ge||(m[Ae]=Ge=new ye(m)),S=Ge.add(w,S,M,pe,Z),S.proxy)return S;if(M=vn(),S.proxy=M,M.src=m,M.listener=S,m.addEventListener)q||(G=pe),G===void 0&&(G=!1),m.addEventListener(w.toString(),M,G);else if(m.attachEvent)m.attachEvent(ee(w.toString()),M);else if(m.addListener&&m.removeListener)m.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return S}function vn(){function m(S){return w.call(m.src,m.listener,S)}const w=ge;return m}function nn(m,w,S,M,G){if(Array.isArray(w))for(var Z=0;Z<w.length;Z++)nn(m,w[Z],S,M,G);else M=u(M)?!!M.capture:!!M,S=At(S),m&&m[Q]?(m=m.i,Z=String(w).toString(),Z in m.g&&(w=m.g[Z],S=De(w,S,M,G),S>-1&&(J(w[S]),Array.prototype.splice.call(w,S,1),w.length==0&&(delete m.g[Z],m.h--)))):m&&(m=Fe(m))&&(w=m.g[w.toString()],m=-1,w&&(m=De(w,S,M,G)),(S=m>-1?w[m]:null)&&te(S))}function te(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[Q])Ee(w.i,m);else{var S=m.type,M=m.proxy;w.removeEventListener?w.removeEventListener(S,M,m.capture):w.detachEvent?w.detachEvent(ee(S),M):w.addListener&&w.removeListener&&w.removeListener(M),(S=Fe(w))?(Ee(S,m),S.h==0&&(S.src=null,w[Ae]=null)):J(m)}}}function ee(m){return m in ke?ke[m]:ke[m]="on"+m}function ge(m,w){if(m.da)m=!0;else{w=new se(w,this);const S=m.listener,M=m.ha||m.src;m.fa&&te(m),m=S.call(M,w)}return m}function Fe(m){return m=m[Ae],m instanceof ye?m:null}var lt="__closure_events_fn_"+(Math.random()*1e9>>>0);function At(m){return typeof m=="function"?m:(m[lt]||(m[lt]=function(w){return m.handleEvent(w)}),m[lt])}function rt(){U.call(this),this.i=new ye(this),this.M=this,this.G=null}y(rt,U),rt.prototype[Q]=!0,rt.prototype.removeEventListener=function(m,w,S,M){nn(this,m,w,S,M)};function vt(m,w){var S,M=m.G;if(M)for(S=[];M;M=M.G)S.push(M);if(m=m.M,M=w.type||w,typeof w=="string")w=new B(w,m);else if(w instanceof B)w.target=w.target||m;else{var G=w;w=new B(M,m),ue(w,G)}G=!0;let Z,pe;if(S)for(pe=S.length-1;pe>=0;pe--)Z=w.g=S[pe],G=qn(Z,M,!0,w)&&G;if(Z=w.g=m,G=qn(Z,M,!0,w)&&G,G=qn(Z,M,!1,w)&&G,S)for(pe=0;pe<S.length;pe++)Z=w.g=S[pe],G=qn(Z,M,!1,w)&&G}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const S=m.g[w];for(let M=0;M<S.length;M++)J(S[M]);delete m.g[w],m.h--}}this.G=null},rt.prototype.J=function(m,w,S,M){return this.i.add(String(m),w,!1,S,M)},rt.prototype.K=function(m,w,S,M){return this.i.add(String(m),w,!0,S,M)};function qn(m,w,S,M){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let G=!0;for(let Z=0;Z<w.length;++Z){const pe=w[Z];if(pe&&!pe.da&&pe.capture==S){const Ge=pe.listener,Wt=pe.ha||pe.src;pe.fa&&Ee(m.i,pe),G=Ge.call(Wt,M)!==!1&&G}}return G&&!M.defaultPrevented}function Bt(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(m,w||0)}function Rn(m){m.g=Bt(()=>{m.g=null,m.i&&(m.i=!1,Rn(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class Gi extends U{constructor(w,S){super(),this.m=w,this.l=S,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Rn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ht(m){U.call(this),this.h=m,this.g={}}y(ht,U);var zt=[];function Yi(m){xe(m.g,function(w,S){this.g.hasOwnProperty(S)&&te(w)},m),m.g={}}ht.prototype.N=function(){ht.Z.N.call(this),Yi(this)},ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zr=l.JSON.stringify,Qi=l.JSON.parse,er=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function es(){}function ts(){}var js={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ji(){B.call(this,"d")}y(Ji,B);function Xi(){B.call(this,"c")}y(Xi,B);var tr={},Zi=null;function Ir(){return Zi=Zi||new rt}tr.Ia="serverreachability";function Wn(m){B.call(this,tr.Ia,m)}y(Wn,B);function ns(m){const w=Ir();vt(w,new Wn(w))}tr.STAT_EVENT="statevent";function rs(m,w){B.call(this,tr.STAT_EVENT,m),this.stat=w}y(rs,B);function _t(m){const w=Ir();vt(w,new rs(w,m))}tr.Ja="timingevent";function ea(m,w){B.call(this,tr.Ja,m),this.size=w}y(ea,B);function Ue(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},w)}function gt(){this.g=!0}gt.prototype.ua=function(){this.g=!1};function qt(m,w,S,M,G,Z){m.info(function(){if(m.g)if(Z){var pe="",Ge=Z.split("&");for(let mt=0;mt<Ge.length;mt++){var Wt=Ge[mt].split("=");if(Wt.length>1){const Qt=Wt[0];Wt=Wt[1];const xr=Qt.split("_");pe=xr.length>=2&&xr[1]=="type"?pe+(Qt+"="+Wt+"&"):pe+(Qt+"=redacted&")}}}else pe=null;else pe=Z;return"XMLHTTP REQ ("+M+") [attempt "+G+"]: "+w+`
`+S+`
`+pe})}function dn(m,w,S,M,G,Z,pe){m.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+G+"]: "+w+`
`+S+`
`+Z+" "+pe})}function Hn(m,w,S,M){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+Gt(m,S)+(M?" "+M:"")})}function Vt(m,w){m.info(function(){return"TIMEOUT: "+w})}gt.prototype.info=function(){};function Gt(m,w){if(!m.g)return w;if(!w)return null;try{const Z=JSON.parse(w);if(Z){for(m=0;m<Z.length;m++)if(Array.isArray(Z[m])){var S=Z[m];if(!(S.length<2)){var M=S[1];if(Array.isArray(M)&&!(M.length<1)){var G=M[0];if(G!="noop"&&G!="stop"&&G!="close")for(let pe=1;pe<M.length;pe++)M[pe]=""}}}}return Zr(Z)}catch{return w}}var hr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pn;function Ar(){}y(Ar,es),Ar.prototype.g=function(){return new XMLHttpRequest},Pn=new Ar;function hn(m){return encodeURIComponent(String(m))}function Qa(m){var w=1;m=m.split(":");const S=[];for(;w>0&&m.length;)S.push(m.shift()),w--;return m.length&&S.push(m.join(":")),S}function Rr(m,w,S,M){this.j=m,this.i=w,this.l=S,this.S=M||1,this.V=new ht(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new th}function th(){this.i=null,this.g="",this.h=!1}var nh={},Hc={};function ss(m,w,S){m.M=1,m.A=di(Pr(w)),m.u=S,m.R=!0,Kc(m,null)}function Kc(m,w){m.F=Date.now(),Ja(m),m.B=Pr(m.A);var S=m.B,M=m.S;Array.isArray(M)||(M=[String(M)]),ru(S.i,"t",M),m.C=0,S=m.j.L,m.h=new th,m.g=hh(m.j,S?w:null,!m.u),m.P>0&&(m.O=new Gi(f(m.Y,m,m.g),m.P)),w=m.V,S=m.g,M=m.ba;var G="readystatechange";Array.isArray(G)||(G&&(zt[0]=G.toString()),G=zt);for(let Z=0;Z<G.length;Z++){const pe=Je(S,G[Z],M||w.handleEvent,!1,w.h||w);if(!pe)break;w.g[pe.key]=pe}w=m.J?H(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),ns(),qt(m.i,m.v,m.B,m.l,m.S,m.u)}Rr.prototype.ba=function(m){m=m.target;const w=this.O;w&&Ds(m)==3?w.j():this.Y(m)},Rr.prototype.Y=function(m){try{if(m==this.g)e:{const Ge=Ds(this.g),Wt=this.g.ya(),mt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||uh(this.g)))){this.K||Ge!=4||Wt==7||(Wt==8||mt<=0?ns(3):ns(2)),Zo(this);var w=this.g.ca();this.X=w;var S=rh(this);if(this.o=w==200,dn(this.i,this.v,this.B,this.l,this.S,Ge,w),this.o){if(this.U&&!this.L){t:{if(this.g){var M,G=this.g;if((M=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(M)){var Z=M;break t}}Z=null}if(m=Z)Hn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Et(this,m);else{this.o=!1,this.m=3,_t(12),ui(this),Xa(this);break e}}if(this.R){m=!0;let Qt;for(;!this.K&&this.C<S.length;)if(Qt=ih(this,S),Qt==Hc){Ge==4&&(this.m=4,_t(14),m=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==nh){this.m=4,_t(15),Hn(this.i,this.l,S,"[Invalid Chunk]"),m=!1;break}else Hn(this.i,this.l,Qt,null),Et(this,Qt);if(sh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||S.length!=0||this.h.h||(this.m=1,_t(16),m=!1),this.o=this.o&&m,!m)Hn(this.i,this.l,S,"[Invalid Chunked Response]"),ui(this),Xa(this);else if(S.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),oo(pe),pe.P=!0,_t(11))}}else Hn(this.i,this.l,S,null),Et(this,S);Ge==4&&ui(this),this.o&&!this.K&&(Ge==4?cl(this.j,this):(this.o=!1,Ja(this)))}else iu(this.g),w==400&&S.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),ui(this),Xa(this)}}}catch{}finally{}};function rh(m){if(!sh(m))return m.g.la();const w=uh(m.g);if(w==="")return"";let S="";const M=w.length,G=Ds(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return ui(m),Xa(m),"";m.h.i=new l.TextDecoder}for(let Z=0;Z<M;Z++)m.h.h=!0,S+=m.h.i.decode(w[Z],{stream:!(G&&Z==M-1)});return w.length=0,m.h.g+=S,m.C=0,m.h.g}function sh(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function ih(m,w){var S=m.C,M=w.indexOf(`
`,S);return M==-1?Hc:(S=Number(w.substring(S,M)),isNaN(S)?nh:(M+=1,M+S>w.length?Hc:(w=w.slice(M,M+S),m.C=M+S,w)))}Rr.prototype.cancel=function(){this.K=!0,ui(this)};function Ja(m){m.T=Date.now()+m.H,Gc(m,m.H)}function Gc(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ue(f(m.aa,m),w)}function Zo(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Rr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Vt(this.i,this.B),this.M!=2&&(ns(),_t(17)),ui(this),this.m=2,Xa(this)):Gc(this,this.T-m)};function Xa(m){m.j.I==0||m.K||cl(m.j,m)}function ui(m){Zo(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,Yi(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function Et(m,w){try{var S=m.j;if(S.I!=0&&(S.g==m||Qc(S.h,m))){if(!m.L&&Qc(S.h,m)&&S.I==3){try{var M=S.Ba.g.parse(w)}catch{M=null}if(Array.isArray(M)&&M.length==3){var G=M;if(G[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<m.F)ll(S),gr(S);else break e;Ls(S),_t(18)}}else S.xa=G[1],0<S.xa-S.K&&G[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Ue(f(S.Va,S),6e3));Za(S.h)<=1&&S.ta&&(S.ta=void 0)}else yr(S,11)}else if((m.L||S.g==m)&&ll(S),!V(w))for(G=S.Ba.g.parse(w),w=0;w<G.length;w++){let mt=G[w];const Qt=mt[0];if(!(Qt<=S.K))if(S.K=Qt,mt=mt[1],S.I==2)if(mt[0]=="c"){S.M=mt[1],S.ba=mt[2];const xr=mt[3];xr!=null&&(S.ka=xr,S.j.info("VER="+S.ka));const gi=mt[4];gi!=null&&(S.za=gi,S.j.info("SVER="+S.za));const Vs=mt[5];Vs!=null&&typeof Vs=="number"&&Vs>0&&(M=1.5*Vs,S.O=M,S.j.info("backChannelRequestTimeoutMs_="+M)),M=S;const Fs=m.g;if(Fs){const hl=Fs.g?Fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hl){var Z=M.h;Z.g||hl.indexOf("spdy")==-1&&hl.indexOf("quic")==-1&&hl.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(tl(Z,Z.h),Z.h=null))}if(M.G){const lu=Fs.g?Fs.g.getResponseHeader("X-HTTP-Session-Id"):null;lu&&(M.wa=lu,dt(M.J,M.G,lu))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-m.F,S.j.info("Handshake RTT: "+S.T+"ms")),M=S;var pe=m;if(M.na=ou(M,M.L?M.ba:null,M.W),pe.L){eo(M.h,pe);var Ge=pe,Wt=M.O;Wt&&(Ge.H=Wt),Ge.D&&(Zo(Ge),Ja(Ge)),M.g=pe}else Dn(M);S.i.length>0&&pi(S)}else mt[0]!="stop"&&mt[0]!="close"||yr(S,7);else S.I==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?yr(S,7):al(S):mt[0]!="noop"&&S.l&&S.l.qa(mt),S.A=0)}}ns(4)}catch{}}var gp=class{constructor(m,w){this.g=m,this.map=w}};function el(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Za(m){return m.h?1:m.g?m.g.size:0}function Qc(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function tl(m,w){m.g?m.g.add(w):m.h=w}function eo(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}el.prototype.cancel=function(){if(this.i=fr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function fr(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const S of m.g.values())w=w.concat(S.G);return w}return T(m.i)}var ah=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mr(m,w){if(m){m=m.split("&");for(let S=0;S<m.length;S++){const M=m[S].indexOf("=");let G,Z=null;M>=0?(G=m[S].substring(0,M),Z=m[S].substring(M+1)):G=m[S],w(G,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function ks(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof ks?(this.l=m.l,to(this,m.j),this.o=m.o,this.g=m.g,Cs(this,m.u),this.h=m.h,ta(this,su(m.i)),this.m=m.m):m&&(w=String(m).match(ah))?(this.l=!1,to(this,w[1]||"",!0),this.o=no(w[2]||""),this.g=no(w[3]||"",!0),Cs(this,w[4]),this.h=no(w[5]||"",!0),ta(this,w[6]||"",!0),this.m=no(w[7]||"")):(this.l=!1,this.i=new st(null,this.l))}ks.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(ro(w,Xc,!0),":");var S=this.g;return(S||w=="file")&&(m.push("//"),(w=this.o)&&m.push(ro(w,Xc,!0),"@"),m.push(hn(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&m.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(ro(S,S.charAt(0)=="/"?so:Zc,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",ro(S,eu)),m.join("")},ks.prototype.resolve=function(m){const w=Pr(this);let S=!!m.j;S?to(w,m.j):S=!!m.o,S?w.o=m.o:S=!!m.g,S?w.g=m.g:S=m.u!=null;var M=m.h;if(S)Cs(w,m.u);else if(S=!!m.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var G=w.h.lastIndexOf("/");G!=-1&&(M=w.h.slice(0,G+1)+M)}if(G=M,G==".."||G==".")M="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){M=G.lastIndexOf("/",0)==0,G=G.split("/");const Z=[];for(let pe=0;pe<G.length;){const Ge=G[pe++];Ge=="."?M&&pe==G.length&&Z.push(""):Ge==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),M&&pe==G.length&&Z.push("")):(Z.push(Ge),M=!0)}M=Z.join("/")}else M=G}return S?w.h=M:S=m.i.toString()!=="",S?ta(w,su(m.i)):S=!!m.m,S&&(w.m=m.m),w};function Pr(m){return new ks(m)}function to(m,w,S){m.j=S?no(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function Cs(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function ta(m,w,S){w instanceof st?(m.i=w,rl(m.i,m.l)):(S||(w=ro(w,yp)),m.i=new st(w,m.l))}function dt(m,w,S){m.i.set(w,S)}function di(m){return dt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function no(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ro(m,w,S){return typeof m=="string"?(m=encodeURI(m).replace(w,Jc),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Jc(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Xc=/[#\/\?@]/g,Zc=/[#\?:]/g,so=/[#\?]/g,yp=/[#\?@]/g,eu=/#/g;function st(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function Is(m){m.g||(m.g=new Map,m.h=0,m.i&&mr(m.i,function(w,S){m.add(decodeURIComponent(w.replace(/\+/g," ")),S)}))}t=st.prototype,t.add=function(m,w){Is(this),this.i=null,m=As(this,m);let S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(w),this.h+=1,this};function tu(m,w){Is(m),w=As(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function nl(m,w){return Is(m),w=As(m,w),m.g.has(w)}t.forEach=function(m,w){Is(this),this.g.forEach(function(S,M){S.forEach(function(G){m.call(w,G,M,this)},this)},this)};function nu(m,w){Is(m);let S=[];if(typeof w=="string")nl(m,w)&&(S=S.concat(m.g.get(As(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)S=S.concat(m[w]);return S}t.set=function(m,w){return Is(this),this.i=null,m=As(this,m),nl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},t.get=function(m,w){return m?(m=nu(this,m),m.length>0?String(m[0]):w):w};function ru(m,w,S){tu(m,w),S.length>0&&(m.i=null,m.g.set(As(m,w),T(S)),m.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let M=0;M<w.length;M++){var S=w[M];const G=hn(S);S=nu(this,S);for(let Z=0;Z<S.length;Z++){let pe=G;S[Z]!==""&&(pe+="="+hn(S[Z])),m.push(pe)}}return this.i=m.join("&")};function su(m){const w=new st;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function As(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function rl(m,w){w&&!m.j&&(Is(m),m.i=null,m.g.forEach(function(S,M){const G=M.toLowerCase();M!=G&&(tu(this,M),ru(this,G,S))},m)),m.j=w}function Rs(m,w){const S=new gt;if(l.Image){const M=new Image;M.onload=g(bn,S,"TestLoadImage: loaded",!0,w,M),M.onerror=g(bn,S,"TestLoadImage: error",!1,w,M),M.onabort=g(bn,S,"TestLoadImage: abort",!1,w,M),M.ontimeout=g(bn,S,"TestLoadImage: timeout",!1,w,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=m}else w(!1)}function Ps(m,w){const S=new gt,M=new AbortController,G=setTimeout(()=>{M.abort(),bn(S,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:M.signal}).then(Z=>{clearTimeout(G),Z.ok?bn(S,"TestPingServer: ok",!0,w):bn(S,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(G),bn(S,"TestPingServer: error",!1,w)})}function bn(m,w,S,M,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),M(S)}catch{}}function io(){this.g=new er}function hi(m){this.i=m.Sb||null,this.h=m.ab||!1}y(hi,es),hi.prototype.g=function(){return new pr(this.i,this.h)};function pr(m,w){rt.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(pr,rt),t=pr.prototype,t.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,is(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;oh(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function oh(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?na(this):is(this),this.readyState==3&&oh(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,na(this))},t.Na=function(m){this.g&&(this.response=m,na(this))},t.ga=function(){this.g&&na(this)};function na(m){m.readyState=4,m.l=null,m.j=null,m.B=null,is(m)}t.setRequestHeader=function(m,w){this.A.append(m,w)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var S=w.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=w.next();return m.join(`\r
`)};function is(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function lh(m){let w="";return xe(m,function(S,M){w+=M,w+=":",w+=S,w+=`\r
`}),w}function sl(m,w,S){e:{for(M in S){var M=!1;break e}M=!0}M||(S=lh(S),typeof m=="string"?S!=null&&hn(S):dt(m,w,S))}function yt(m){rt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(yt,rt);var ch=/^https?$/i,xp=["POST","PUT"];t=yt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,w,S,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pn.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(Z){ra(this,Z);return}if(m=S||"",S=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var G in M)S.set(G,M[G]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const Z of M.keys())S.set(Z,M.get(Z));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(S.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(xp,w,void 0)>=0)||M||G||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,pe]of S)this.g.setRequestHeader(Z,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Z){ra(this,Z)}};function ra(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,sa(m),mi(m)}function sa(m){m.A||(m.A=!0,vt(m,"complete"),vt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,vt(this,"complete"),vt(this,"abort"),mi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mi(this,!0)),yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?fi(this):this.Xa())},t.Xa=function(){fi(this)};function fi(m){if(m.h&&typeof a<"u"){if(m.v&&Ds(m)==4)setTimeout(m.Ca.bind(m),0);else if(vt(m,"readystatechange"),Ds(m)==4){m.h=!1;try{const Z=m.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var S;if(!(S=w)){var M;if(M=Z===0){let pe=String(m.D).match(ah)[1]||null;!pe&&l.self&&l.self.location&&(pe=l.self.location.protocol.slice(0,-1)),M=!ch.test(pe?pe.toLowerCase():"")}S=M}if(S)vt(m,"complete"),vt(m,"success");else{m.o=6;try{var G=Ds(m)>2?m.g.statusText:""}catch{G=""}m.l=G+" ["+m.ca()+"]",sa(m)}}finally{mi(m)}}}}function mi(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const S=m.g;m.g=null,w||vt(m,"ready");try{S.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ds(m){return m.g?m.g.readyState:0}t.ca=function(){try{return Ds(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),Qi(w)}};function uh(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function iu(m){const w={};m=(m.g&&Ds(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<m.length;M++){if(V(m[M]))continue;var S=Qa(m[M]);const G=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const Z=w[G]||[];w[G]=Z,Z.push(S)}he(w,function(M){return M.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(m,w,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||w}function il(m){this.za=0,this.i=[],this.j=new gt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Os("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Os("baseRetryDelayMs",5e3,m),this.Za=Os("retryDelaySeedMs",1e4,m),this.Ta=Os("forwardChannelMaxRetries",2,m),this.va=Os("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new el(m&&m.concurrentRequestLimit),this.Ba=new io,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=il.prototype,t.ka=8,t.I=1,t.connect=function(m,w,S,M){_t(0),this.W=m,this.H=w||{},S&&M!==void 0&&(this.H.OSID=S,this.H.OAID=M),this.F=this.X,this.J=ou(this,null,this.W),pi(this)};function al(m){if(ol(m),m.I==3){var w=m.V++,S=Pr(m.J);if(dt(S,"SID",m.M),dt(S,"RID",w),dt(S,"TYPE","terminate"),Ms(m,S),w=new Rr(m,m.j,w),w.M=2,w.A=di(Pr(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!S&&l.Image&&(new Image().src=w.A,S=!0),S||(w.g=hh(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Ja(w)}lo(m)}function gr(m){m.g&&(oo(m),m.g.cancel(),m.g=null)}function ol(m){gr(m),m.v&&(l.clearTimeout(m.v),m.v=null),ll(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function pi(m){if(!Yc(m.h)&&!m.m){m.m=!0;var w=m.Ea;I||A(),$||(I(),$=!0),P.add(w,m),m.D=0}}function dh(m,w){return Za(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ue(f(m.Ea,m,w),ul(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const G=new Rr(this,this.j,m);let Z=this.o;if(this.U&&(Z?(Z=H(Z),ue(Z,this.U)):Z=this.U),this.u!==null||this.R||(G.J=Z,Z=null),this.S)e:{for(var w=0,S=0;S<this.i.length;S++){t:{var M=this.i[S];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(w+=M,w>4096){w=S;break e}if(w===4096||S===this.i.length-1){w=S+1;break e}}w=1e3}else w=1e3;w=au(this,G,w),S=Pr(this.J),dt(S,"RID",m),dt(S,"CVER",22),this.G&&dt(S,"X-HTTP-Session-Id",this.G),Ms(this,S),Z&&(this.R?w="headers="+hn(lh(Z))+"&"+w:this.u&&sl(S,this.u,Z)),tl(this.h,G),this.Ra&&dt(S,"TYPE","init"),this.S?(dt(S,"$req",w),dt(S,"SID","null"),G.U=!0,ss(G,S,null)):ss(G,S,w),this.I=2}}else this.I==3&&(m?ao(this,m):this.i.length==0||Yc(this.h)||ao(this))};function ao(m,w){var S;w?S=w.l:S=m.V++;const M=Pr(m.J);dt(M,"SID",m.M),dt(M,"RID",S),dt(M,"AID",m.K),Ms(m,M),m.u&&m.o&&sl(M,m.u,m.o),S=new Rr(m,m.j,S,m.D+1),m.u===null&&(S.J=m.o),w&&(m.i=w.G.concat(m.i)),w=au(m,S,1e3),S.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),tl(m.h,S),ss(S,M,w)}function Ms(m,w){m.H&&xe(m.H,function(S,M){dt(w,M,S)}),m.l&&xe({},function(S,M){dt(w,M,S)})}function au(m,w,S){S=Math.min(m.i.length,S);const M=m.l?f(m.l.Ka,m.l,m):null;e:{var G=m.i;let Ge=-1;for(;;){const Wt=["count="+S];Ge==-1?S>0?(Ge=G[0].g,Wt.push("ofs="+Ge)):Ge=0:Wt.push("ofs="+Ge);let mt=!0;for(let Qt=0;Qt<S;Qt++){var Z=G[Qt].g;const xr=G[Qt].map;if(Z-=Ge,Z<0)Ge=Math.max(0,G[Qt].g-100),mt=!1;else try{Z="req"+Z+"_"||"";try{var pe=xr instanceof Map?xr:Object.entries(xr);for(const[gi,Vs]of pe){let Fs=Vs;u(Vs)&&(Fs=Zr(Vs)),Wt.push(Z+gi+"="+encodeURIComponent(Fs))}}catch(gi){throw Wt.push(Z+"type="+encodeURIComponent("_badmap")),gi}}catch{M&&M(xr)}}if(mt){pe=Wt.join("&");break e}}pe=void 0}return m=m.i.splice(0,S),w.G=m,pe}function Dn(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;I||A(),$||(I(),$=!0),P.add(w,m),m.A=0}}function Ls(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ue(f(m.Da,m),ul(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,ia(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ue(f(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),gr(this),ia(this))};function oo(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function ia(m){m.g=new Rr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=Pr(m.na);dt(w,"RID","rpc"),dt(w,"SID",m.M),dt(w,"AID",m.K),dt(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&dt(w,"TO",m.ia),dt(w,"TYPE","xmlhttp"),Ms(m,w),m.u&&m.o&&sl(w,m.u,m.o),m.O&&(m.g.H=m.O);var S=m.g;m=m.ba,S.M=1,S.A=di(Pr(w)),S.u=null,S.R=!0,Kc(S,m)}t.Va=function(){this.C!=null&&(this.C=null,gr(this),Ls(this),_t(19))};function ll(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function cl(m,w){var S=null;if(m.g==w){ll(m),oo(m),m.g=null;var M=2}else if(Qc(m.h,w))S=w.G,eo(m.h,w),M=1;else return;if(m.I!=0){if(w.o)if(M==1){S=w.u?w.u.length:0,w=Date.now()-w.F;var G=m.D;M=Ir(),vt(M,new ea(M,S)),pi(m)}else Dn(m);else if(G=w.m,G==3||G==0&&w.X>0||!(M==1&&dh(m,w)||M==2&&Ls(m)))switch(S&&S.length>0&&(w=m.h,w.i=w.i.concat(S)),G){case 1:yr(m,5);break;case 4:yr(m,10);break;case 3:yr(m,6);break;default:yr(m,2)}}}function ul(m,w){let S=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(S*=2),S*w}function yr(m,w){if(m.j.info("Error code "+w),w==2){var S=f(m.bb,m),M=m.Ua;const G=!M;M=new ks(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||to(M,"https"),di(M),G?Rs(M.toString(),S):Ps(M.toString(),S)}else _t(2);m.I=0,m.l&&m.l.pa(w),lo(m),ol(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function lo(m){if(m.I=0,m.ja=[],m.l){const w=fr(m.h);(w.length!=0||m.i.length!=0)&&(j(m.ja,w),j(m.ja,m.i),m.h.i.length=0,T(m.i),m.i.length=0),m.l.oa()}}function ou(m,w,S){var M=S instanceof ks?Pr(S):new ks(S);if(M.g!="")w&&(M.g=w+"."+M.g),Cs(M,M.u);else{var G=l.location;M=G.protocol,w=w?w+"."+G.hostname:G.hostname,G=+G.port;const Z=new ks(null);M&&to(Z,M),w&&(Z.g=w),G&&Cs(Z,G),S&&(Z.h=S),M=Z}return S=m.G,w=m.wa,S&&w&&dt(M,S,w),dt(M,"VER",m.ka),Ms(m,M),M}function hh(m,w,S){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new yt(new hi({ab:S})):new yt(m.ma),w.Fa(m.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fh(){}t=fh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function dl(){}dl.prototype.g=function(m,w){return new wn(m,w)};function wn(m,w){rt.call(this),this.g=new il(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!V(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!V(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new aa(this)}y(wn,rt),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){al(this.g)},wn.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.v&&(S={},S.__data__=Zr(m),m=S);w.i.push(new gp(w.Ya++,m)),w.I==3&&pi(w)},wn.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,wn.Z.N.call(this)};function mh(m){Ji.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const S in w){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}y(mh,Ji);function ph(){Xi.call(this),this.status=1}y(ph,Xi);function aa(m){this.g=m}y(aa,fh),aa.prototype.ra=function(){vt(this.g,"a")},aa.prototype.qa=function(m){vt(this.g,new mh(m))},aa.prototype.pa=function(m){vt(this.g,new ph)},aa.prototype.oa=function(){vt(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,iS=function(){return new dl},sS=function(){return Ir()},rS=tr,o0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hr.NO_ERROR=0,hr.TIMEOUT=8,hr.HTTP_ERROR=6,Bf=hr,Yt.COMPLETE="complete",nS=Yt,ts.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",rt.prototype.listen=rt.prototype.J,Uu=ts,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,tS=yt}).apply(typeof hf<"u"?hf:typeof self<"u"?self:typeof window<"u"?window:{});const g1="@firebase/firestore",y1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Un=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Un.UNAUTHENTICATED=new Un(null),Un.GOOGLE_CREDENTIALS=new Un("google-credentials-uid"),Un.FIRST_PARTY=new Un("first-party-uid"),Un.MOCK_USER=new Un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Fm("@firebase/firestore");function Hl(){return Bo.logLevel}function _e(t,...e){if(Bo.logLevel<=et.DEBUG){const n=e.map(Ix);Bo.debug(`Firestore (${Ic}): ${t}`,...n)}}function Ui(t,...e){if(Bo.logLevel<=et.ERROR){const n=e.map(Ix);Bo.error(`Firestore (${Ic}): ${t}`,...n)}}function mc(t,...e){if(Bo.logLevel<=et.WARN){const n=e.map(Ix);Bo.warn(`Firestore (${Ic}): ${t}`,...n)}}function Ix(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,aS(t,r,n)}function aS(t,e,n){let r=`FIRESTORE (${Ic}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ui(r),new Error(r)}function ft(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||aS(e,s,r)}function Ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class K3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Un.UNAUTHENTICATED)))}shutdown(){}}class G3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Y3{constructor(e){this.t=e,this.currentUser=Un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ft(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let a=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Da,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Da)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new oS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Un(e)}}class Q3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class J3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Q3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class x1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ft(this.o===void 0,3512);const r=a=>{a.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new x1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new x1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Z3(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function tt(t,e){return t<e?-1:t>e?1:0}function l0(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return Zg(s)===Zg(a)?tt(s,a):Zg(s)?1:-1}return tt(t.length,e.length)}const eO=55296,tO=57343;function Zg(t){const e=t.charCodeAt(0);return e>=eO&&e<=tO}function pc(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="__name__";class Ws{constructor(e,n,r){n===void 0?n=0:n>e.length&&ze(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ze(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ws.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ws?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Ws.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return tt(e.length,n.length)}static compareSegments(e,n){const r=Ws.isNumericId(e),s=Ws.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ws.extractNumericId(e).compare(Ws.extractNumericId(n)):l0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pa.fromString(e.substring(4,e.length-2))}}class Ot extends Ws{construct(e,n,r){return new Ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ot(n)}static emptyPath(){return new Ot([])}}const nO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends Ws{construct(e,n,r){return new kn(e,n,r)}static isValidIdentifier(e){return nO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v1}static keyField(){return new kn([v1])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Pe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Pe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Pe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(a(),s++)}if(a(),l)throw new Pe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(n)}static emptyPath(){return new kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Ot.fromString(e))}static fromName(e){return new Ve(Ot.fromString(e).popFirst(5))}static empty(){return new Ve(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t,e,n){if(!n)throw new Pe(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sO(t,e,n,r){if(e===!0&&r===!0)throw new Pe(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b1(t){if(!Ve.isDocumentKey(t))throw new Pe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Rx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ze(12329,{type:typeof t})}function ud(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rx(t);throw new Pe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,e){const n={typeString:t};return e&&(n.value=e),n}function $d(t,e){if(!lS(t))throw new Pe(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(s&&typeof l!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Pe(oe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=-62135596800,_1=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_1);return new jt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<w1)throw new Pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_1}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($d(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-w1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:tn("string",jt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new jt(0,0))}static max(){return new He(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=-1;function iO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=He.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new Ma(s,Ve.empty(),e)}function aO(t){return new Ma(t.readTime,t.key,dd)}class Ma{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ma(He.min(),Ve.empty(),dd)}static max(){return new Ma(He.max(),Ve.empty(),dd)}}function oO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ve.comparator(t.documentKey,e.documentKey),n!==0?n:tt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==lO)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,r)=>{n(e)}))}static reject(e){return new re(((n,r)=>{r(e)}))}static waitFor(e){return new re(((n,r)=>{let s=0,a=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++a,l&&a===s&&n()}),(d=>r(d)))})),l=!0,a===s&&n()}))}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next((s=>s?re.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,a)=>{r.push(n.call(this,s,a))})),this.waitFor(r)}static mapArray(e,n){return new re(((r,s)=>{const a=e.length,l=new Array(a);let u=0;for(let d=0;d<a;d++){const f=d;n(e[f]).next((g=>{l[f]=g,++u,u===a&&r(l)}),(g=>s(g)))}}))}static doWhile(e,n){return new re(((r,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):r()};a()}))}}function uO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=-1;function qm(t){return t==null}function cm(t){return t===0&&1/t==-1/0}function dO(t){return typeof t=="number"&&Number.isInteger(t)&&!cm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="";function hO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=E1(e)),e=fO(t.get(n),e);return E1(e)}function fO(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case cS:n+="";break;default:n+=a}}return n}function E1(t){return t+cS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.comparator=e,this.root=n||jn.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??jn.RED,this.left=s??jn.EMPTY,this.right=a??jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new jn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return jn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new T1(this.data.getIterator())}getIteratorFrom(e){return new T1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class T1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new vs([])}unionWith(e){let n=new un(kn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pc(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new dS("Invalid base64 string: "+a):a}})(e);return new In(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new In(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}In.EMPTY_BYTE_STRING=new In("");const mO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(t){if(ft(!!t,39018),typeof t=="string"){let e=0;const n=mO.exec(t);if(ft(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kt(t.seconds),nanos:Kt(t.nanos)}}function Kt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Va(t){return typeof t=="string"?In.fromBase64String(t):In.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="server_timestamp",fS="__type__",mS="__previous_value__",pS="__local_write_time__";function Dx(t){return(t?.mapValue?.fields||{})[fS]?.stringValue===hS}function Wm(t){const e=t.mapValue.fields[mS];return Dx(e)?Wm(e):e}function hd(t){const e=La(t.mapValue.fields[pS].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,r,s,a,l,u,d,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const um="(default)";class fd{constructor(e,n){this.projectId=e,this.database=n||um}static empty(){return new fd("","")}get isDefaultDatabase(){return this.database===um}isEqual(e){return e instanceof fd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="__type__",gO="__max__",mf={mapValue:{}},yS="__vector__",dm="value";function Fa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dx(t)?4:xO(t)?9007199254740991:yO(t)?10:11:ze(28295,{value:t})}function ti(t,e){if(t===e)return!0;const n=Fa(t);if(n!==Fa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hd(t).isEqual(hd(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=La(s.timestampValue),u=La(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Va(s.bytesValue).isEqual(Va(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return Kt(s.geoPointValue.latitude)===Kt(a.geoPointValue.latitude)&&Kt(s.geoPointValue.longitude)===Kt(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Kt(s.integerValue)===Kt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Kt(s.doubleValue),u=Kt(a.doubleValue);return l===u?cm(l)===cm(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return pc(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(N1(l)!==N1(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!ti(l[d],u[d])))return!1;return!0})(t,e);default:return ze(52216,{left:t})}}function md(t,e){return(t.values||[]).find((n=>ti(n,e)))!==void 0}function gc(t,e){if(t===e)return 0;const n=Fa(t),r=Fa(e);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const u=Kt(a.integerValue||a.doubleValue),d=Kt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return S1(t.timestampValue,e.timestampValue);case 4:return S1(hd(t),hd(e));case 5:return l0(t.stringValue,e.stringValue);case 6:return(function(a,l){const u=Va(a),d=Va(l);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const u=a.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=tt(u[f],d[f]);if(g!==0)return g}return tt(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const u=tt(Kt(a.latitude),Kt(l.latitude));return u!==0?u:tt(Kt(a.longitude),Kt(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return j1(t.arrayValue,e.arrayValue);case 10:return(function(a,l){const u=a.fields||{},d=l.fields||{},f=u[dm]?.arrayValue,g=d[dm]?.arrayValue,y=tt(f?.values?.length||0,g?.values?.length||0);return y!==0?y:j1(f,g)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===mf.mapValue&&l===mf.mapValue)return 0;if(a===mf.mapValue)return 1;if(l===mf.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),f=l.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=l0(d[y],g[y]);if(v!==0)return v;const T=gc(u[d[y]],f[g[y]]);if(T!==0)return T}return tt(d.length,g.length)})(t.mapValue,e.mapValue);default:throw ze(23264,{he:n})}}function S1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return tt(t,e);const n=La(t),r=La(e),s=tt(n.seconds,r.seconds);return s!==0?s:tt(n.nanos,r.nanos)}function j1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=gc(n[s],r[s]);if(a)return a}return tt(n.length,r.length)}function yc(t){return c0(t)}function c0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=La(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Va(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ve.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=c0(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${c0(n.fields[l])}`;return s+"}"})(t.mapValue):ze(61005,{value:t})}function zf(t){switch(Fa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wm(t);return e?16+zf(e):16;case 5:return 2*t.stringValue.length;case 6:return Va(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+zf(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Yo(r.fields,((a,l)=>{s+=a.length+zf(l)})),s})(t.mapValue);default:throw ze(13486,{value:t})}}function u0(t){return!!t&&"integerValue"in t}function Ox(t){return!!t&&"arrayValue"in t}function k1(t){return!!t&&"nullValue"in t}function C1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qf(t){return!!t&&"mapValue"in t}function yO(t){return(t?.mapValue?.fields||{})[gS]?.stringValue===yS}function Yu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Yo(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Yu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yu(t.arrayValue.values[n]);return e}return{...t}}function xO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(n)}setAll(e){let n=kn.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=Yu(l):s.push(u.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());qf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];qf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Yo(n,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new $r(Yu(this.value))}}function xS(t){const e=[];return Yo(t.fields,((n,r)=>{const s=new kn([n]);if(qf(r)){const a=xS(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new vs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n,r,s,a,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(e){return new $n(e,0,He.min(),He.min(),He.min(),$r.empty(),0)}static newFoundDocument(e,n,r,s){return new $n(e,1,n,He.min(),r,s,0)}static newNoDocument(e,n){return new $n(e,2,n,He.min(),He.min(),$r.empty(),0)}static newUnknownDocument(e,n){return new $n(e,3,n,He.min(),He.min(),$r.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.position=e,this.inclusive=n}}function I1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?r=Ve.comparator(Ve.fromName(l.referenceValue),n.key):r=gc(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function A1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n="asc"){this.field=e,this.dir=n}}function vO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{}class cn extends vS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wO(e,n,r):n==="array-contains"?new NO(e,r):n==="in"?new TO(e,r):n==="not-in"?new SO(e,r):n==="array-contains-any"?new jO(e,r):new cn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _O(e,r):new EO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(gc(n,this.value)):n!==null&&Fa(this.value)===Fa(n)&&this.matchesComparison(gc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends vS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ni(e,n)}matches(e){return bS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bS(t){return t.op==="and"}function wS(t){return bO(t)&&bS(t)}function bO(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function d0(t){if(t instanceof cn)return t.field.canonicalString()+t.op.toString()+yc(t.value);if(wS(t))return t.filters.map((e=>d0(e))).join(",");{const e=t.filters.map((n=>d0(n))).join(",");return`${t.op}(${e})`}}function _S(t,e){return t instanceof cn?(function(r,s){return s instanceof cn&&r.op===s.op&&r.field.isEqual(s.field)&&ti(r.value,s.value)})(t,e):t instanceof ni?(function(r,s){return s instanceof ni&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,u)=>a&&_S(l,s.filters[u])),!0):!1})(t,e):void ze(19439)}function ES(t){return t instanceof cn?(function(n){return`${n.field.canonicalString()} ${n.op} ${yc(n.value)}`})(t):t instanceof ni?(function(n){return n.op.toString()+" {"+n.getFilters().map(ES).join(" ,")+"}"})(t):"Filter"}class wO extends cn{constructor(e,n,r){super(e,n,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const n=Ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class _O extends cn{constructor(e,n){super(e,"in",n),this.keys=NS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class EO extends cn{constructor(e,n){super(e,"not-in",n),this.keys=NS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function NS(t,e){return(e.arrayValue?.values||[]).map((n=>Ve.fromName(n.referenceValue)))}class NO extends cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ox(n)&&md(n.arrayValue,this.value)}}class TO extends cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&md(this.value.arrayValue,n)}}class SO extends cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!md(this.value.arrayValue,n)}}class jO extends cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ox(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>md(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n=null,r=[],s=[],a=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.Te=null}}function R1(t,e=null,n=[],r=[],s=null,a=null,l=null){return new kO(t,e,n,r,s,a,l)}function Mx(t){const e=Ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>d0(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),qm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>yc(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>yc(r))).join(",")),e.Te=n}return e.Te}function Lx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_S(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!A1(t.startAt,e.startAt)&&A1(t.endAt,e.endAt)}function h0(t){return Ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n=null,r=[],s=[],a=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CO(t,e,n,r,s,a,l,u){return new Hm(t,e,n,r,s,a,l,u)}function Vx(t){return new Hm(t)}function P1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IO(t){return t.collectionGroup!==null}function Qu(t){const e=Ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new un(kn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new fm(a,r))})),n.has(kn.keyField().canonicalString())||e.Ie.push(new fm(kn.keyField(),r))}return e.Ie}function Gs(t){const e=Ye(t);return e.Ee||(e.Ee=AO(e,Qu(t))),e.Ee}function AO(t,e){if(t.limitType==="F")return R1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new fm(s.field,a)}));const n=t.endAt?new hm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hm(t.startAt.position,t.startAt.inclusive):null;return R1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function f0(t,e,n){return new Hm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Km(t,e){return Lx(Gs(t),Gs(e))&&t.limitType===e.limitType}function TS(t){return`${Mx(Gs(t))}|lt:${t.limitType}`}function Kl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>ES(s))).join(", ")}]`),qm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>yc(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>yc(s))).join(",")),`Target(${r})`})(Gs(t))}; limitType=${t.limitType})`}function Gm(t,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ve.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,s){for(const a of Qu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const f=I1(l,u,d);return l.inclusive?f<=0:f<0})(r.startAt,Qu(r),s)||r.endAt&&!(function(l,u,d){const f=I1(l,u,d);return l.inclusive?f>=0:f>0})(r.endAt,Qu(r),s))})(t,e)}function RO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SS(t){return(e,n)=>{let r=!1;for(const s of Qu(t)){const a=PO(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function PO(t,e,n){const r=t.field.isKeyField()?Ve.comparator(e.key,n.key):(function(a,l,u){const d=l.data.field(a),f=u.data.field(a);return d!==null&&f!==null?gc(d,f):ze(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ze(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,((n,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return uS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=new Lt(Ve.comparator);function $i(){return DO}const jS=new Lt(Ve.comparator);function $u(...t){let e=jS;for(const n of t)e=e.insert(n.key,n);return e}function kS(t){let e=jS;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ro(){return Ju()}function CS(){return Ju()}function Ju(){return new Qo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const OO=new Lt(Ve.comparator),MO=new un(Ve.comparator);function nt(...t){let e=MO;for(const n of t)e=e.add(n);return e}const LO=new un(tt);function VO(){return LO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cm(e)?"-0":e}}function IS(t){return{integerValue:""+t}}function FO(t,e){return dO(e)?IS(e):Fx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this._=void 0}}function UO(t,e,n){return t instanceof mm?(function(s,a){const l={fields:{[fS]:{stringValue:hS},[pS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Dx(a)&&(a=Wm(a)),a&&(l.fields[mS]=a),{mapValue:l}})(n,e):t instanceof pd?RS(t,e):t instanceof gd?PS(t,e):(function(s,a){const l=AS(s,a),u=D1(l)+D1(s.Ae);return u0(l)&&u0(s.Ae)?IS(u):Fx(s.serializer,u)})(t,e)}function $O(t,e,n){return t instanceof pd?RS(t,e):t instanceof gd?PS(t,e):n}function AS(t,e){return t instanceof pm?(function(r){return u0(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class mm extends Ym{}class pd extends Ym{constructor(e){super(),this.elements=e}}function RS(t,e){const n=DS(e);for(const r of t.elements)n.some((s=>ti(s,r)))||n.push(r);return{arrayValue:{values:n}}}class gd extends Ym{constructor(e){super(),this.elements=e}}function PS(t,e){let n=DS(e);for(const r of t.elements)n=n.filter((s=>!ti(s,r)));return{arrayValue:{values:n}}}class pm extends Ym{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function D1(t){return Kt(t.integerValue||t.doubleValue)}function DS(t){return Ox(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BO(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof pd&&s instanceof pd||r instanceof gd&&s instanceof gd?pc(r.elements,s.elements,ti):r instanceof pm&&s instanceof pm?ti(r.Ae,s.Ae):r instanceof mm&&s instanceof mm})(t.transform,e.transform)}class zO{constructor(e,n){this.version=e,this.transformResults=n}}class Oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qm{}function OS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new LS(t.key,Oi.none()):new Bd(t.key,t.data,Oi.none());{const n=t.data,r=$r.empty();let s=new un(kn.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new Jo(t.key,r,new vs(s.toArray()),Oi.none())}}function qO(t,e,n){t instanceof Bd?(function(s,a,l){const u=s.value.clone(),d=M1(s.fieldTransforms,a,l.transformResults);u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof Jo?(function(s,a,l){if(!Wf(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=M1(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(MS(s)),d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Xu(t,e,n,r){return t instanceof Bd?(function(a,l,u,d){if(!Wf(a.precondition,l))return u;const f=a.value.clone(),g=L1(a.fieldTransforms,d,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof Jo?(function(a,l,u,d){if(!Wf(a.precondition,l))return u;const f=L1(a.fieldTransforms,d,l),g=l.data;return g.setAll(MS(a)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((y=>y.field)))})(t,e,n,r):(function(a,l,u){return Wf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function WO(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=AS(r.transform,s||null);a!=null&&(n===null&&(n=$r.empty()),n.set(r.field,a))}return n||null}function O1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pc(r,s,((a,l)=>BO(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bd extends Qm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jo extends Qm{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function MS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function M1(t,e,n){const r=new Map;ft(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,u=e.data.field(a.field);r.set(a.field,$O(l,u,n[s]))}return r}function L1(t,e,n){const r=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);r.set(s.field,UO(a,l,e))}return r}class LS extends Qm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HO extends Qm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&qO(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CS();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=n.has(s.key)?null:u;const d=OS(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(He.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),nt())}isEqual(e){return this.batchId===e.batchId&&pc(this.mutations,e.mutations,((n,r)=>O1(n,r)))&&pc(this.baseMutations,e.baseMutations,((n,r)=>O1(n,r)))}}class Ux{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ft(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return OO})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new Ux(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GO=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,at;function QO(t){switch(t){case oe.OK:return ze(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return ze(15467,{code:t})}}function VS(t){if(t===void 0)return Ui("GRPC error has no .code"),oe.UNKNOWN;switch(t){case Xt.OK:return oe.OK;case Xt.CANCELLED:return oe.CANCELLED;case Xt.UNKNOWN:return oe.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return oe.INTERNAL;case Xt.UNAVAILABLE:return oe.UNAVAILABLE;case Xt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Xt.NOT_FOUND:return oe.NOT_FOUND;case Xt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Xt.ABORTED:return oe.ABORTED;case Xt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Xt.DATA_LOSS:return oe.DATA_LOSS;default:return ze(39323,{code:t})}}(at=Xt||(Xt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=new Pa([4294967295,4294967295],0);function V1(t){const e=JO().encode(t),n=new eS;return n.update(e),new Uint8Array(n.digest())}function F1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Pa([n,r],0),new Pa([s,a],0)]}class $x{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bu(`Invalid padding: ${n}`);if(r<0)throw new Bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pa.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Pa.fromNumber(r)));return s.compare(XO)===1&&(s=new Pa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=V1(e),[r,s]=F1(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);if(!this.we(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new $x(a,s,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const n=V1(e),[r,s]=F1(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,zd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Jm(He.min(),s,new Lt(tt),$i(),nt())}}class zd{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zd(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class FS{constructor(e,n){this.targetId=e,this.Ce=n}}class US{constructor(e,n,r=In.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class U1{constructor(){this.ve=0,this.Fe=$1(),this.Me=In.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nt(),n=nt(),r=nt();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ze(38017,{changeType:a})}})),new zd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=$1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZO{constructor(e){this.Ge=e,this.ze=new Map,this.je=$i(),this.Je=pf(),this.He=pf(),this.Ye=new Lt(tt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(h0(a))if(r===0){const l=new Ve(a.path);this.et(n,l,$n.newNoDocument(l,He.min()))}else ft(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let l,u;try{l=Va(r).toUint8Array()}catch(d){if(d instanceof dS)return mc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new $x(l,s,a)}catch(d){return mc(d instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((a=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(n,a,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((a,l)=>{const u=this.ot(l);if(u){if(a.current&&h0(u.target)){const d=new Ve(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,$n.newNoDocument(d,e))}a.Be&&(n.set(l,a.ke()),a.qe())}}));let r=nt();this.He.forEach(((a,l)=>{let u=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new Jm(e,n,this.Ye,this.je,r);return this.je=$i(),this.Je=pf(),this.He=pf(),this.Ye=new Lt(tt),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new U1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new un(tt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new un(tt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new U1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function pf(){return new Lt(Ve.comparator)}function $1(){return new Lt(Ve.comparator)}const e6={asc:"ASCENDING",desc:"DESCENDING"},t6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n6={and:"AND",or:"OR"};class r6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function m0(t,e){return t.useProto3Json||qm(e)?e:{value:e}}function gm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $S(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function s6(t,e){return gm(t,e.toTimestamp())}function Ys(t){return ft(!!t,49232),He.fromTimestamp((function(n){const r=La(n);return new jt(r.seconds,r.nanos)})(t))}function Bx(t,e){return p0(t,e).canonicalString()}function p0(t,e){const n=(function(s){return new Ot(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function BS(t){const e=Ot.fromString(t);return ft(KS(e),10190,{key:e.toString()}),e}function g0(t,e){return Bx(t.databaseId,e.path)}function ey(t,e){const n=BS(e);if(n.get(1)!==t.databaseId.projectId)throw new Pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ve(qS(n))}function zS(t,e){return Bx(t.databaseId,e)}function i6(t){const e=BS(t);return e.length===4?Ot.emptyPath():qS(e)}function y0(t){return new Ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qS(t){return ft(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function B1(t,e,n){return{name:g0(t,e),fields:n.value.mapValue.fields}}function a6(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ze(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(f,g){return f.useProto3Json?(ft(g===void 0||typeof g=="string",58123),In.fromBase64String(g||"")):(ft(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),In.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(f){const g=f.code===void 0?oe.UNKNOWN:VS(f.code);return new Pe(g,f.message||"")})(l);n=new US(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ey(t,r.document.name),a=Ys(r.document.updateTime),l=r.document.createTime?Ys(r.document.createTime):He.min(),u=new $r({mapValue:{fields:r.document.fields}}),d=$n.newFoundDocument(s,a,l,u),f=r.targetIds||[],g=r.removedTargetIds||[];n=new Hf(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ey(t,r.document),a=r.readTime?Ys(r.readTime):He.min(),l=$n.newNoDocument(s,a),u=r.removedTargetIds||[];n=new Hf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ey(t,r.document),a=r.removedTargetIds||[];n=new Hf([],a,s,null)}else{if(!("filter"in e))return ze(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new YO(s,a),u=r.targetId;n=new FS(u,l)}}return n}function o6(t,e){let n;if(e instanceof Bd)n={update:B1(t,e.key,e.value)};else if(e instanceof LS)n={delete:g0(t,e.key)};else if(e instanceof Jo)n={update:B1(t,e.key,e.data),updateMask:g6(e.fieldMask)};else{if(!(e instanceof HO))return ze(16599,{Vt:e.type});n={verify:g0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const u=l.transform;if(u instanceof mm)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof pd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof gd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof pm)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw ze(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:s6(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ze(27497)})(t,e.precondition)),n}function l6(t,e){return t&&t.length>0?(ft(e!==void 0,14353),t.map((n=>(function(s,a){let l=s.updateTime?Ys(s.updateTime):Ys(a);return l.isEqual(He.min())&&(l=Ys(a)),new zO(l,s.transformResults||[])})(n,e)))):[]}function c6(t,e){return{documents:[zS(t,e.path)]}}function u6(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zS(t,s);const a=(function(f){if(f.length!==0)return HS(ni.create(f,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:Gl(v.field),direction:f6(v.dir)}})(g)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=m0(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:s}}function d6(t){let e=i6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ft(r===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=(function(y){const v=WS(y);return v instanceof ni&&wS(v)?v.getFilters():[v]})(n.where));let l=[];n.orderBy&&(l=(function(y){return y.map((v=>(function(j){return new fm(Yl(j.field),(function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(v)))})(n.orderBy));let u=null;n.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,qm(v)?null:v})(n.limit));let d=null;n.startAt&&(d=(function(y){const v=!!y.before,T=y.values||[];return new hm(T,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(y){const v=!y.before,T=y.values||[];return new hm(T,v)})(n.endAt)),CO(e,s,l,a,u,"F",d,f)}function h6(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yl(n.unaryFilter.field);return cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Yl(n.unaryFilter.field);return cn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Yl(n.unaryFilter.field);return cn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Yl(n.unaryFilter.field);return cn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(t):t.fieldFilter!==void 0?(function(n){return cn.create(Yl(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ni.create(n.compositeFilter.filters.map((r=>WS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(n.compositeFilter.op))})(t):ze(30097,{filter:t})}function f6(t){return e6[t]}function m6(t){return t6[t]}function p6(t){return n6[t]}function Gl(t){return{fieldPath:t.canonicalString()}}function Yl(t){return kn.fromServerFormat(t.fieldPath)}function HS(t){return t instanceof cn?(function(n){if(n.op==="=="){if(C1(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(k1(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(C1(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(k1(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:m6(n.op),value:n.value}}})(t):t instanceof ni?(function(n){const r=n.getFilters().map((s=>HS(s)));return r.length===1?r[0]:{compositeFilter:{op:p6(n.op),filters:r}}})(t):ze(54877,{filter:t})}function g6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function KS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r,s,a=He.min(),l=He.min(),u=In.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.yt=e}}function x6(t){const e=d6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?f0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(){this.Cn=new b6}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Ma.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Ma.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class b6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new un(Ot.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new un(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GS=41943040;class cr{static withCacheSize(e){return new cr(e,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(GS,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xc(0)}static cr(){return new xc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="LruGarbageCollector",w6=1048576;function W1([t,e],[n,r]){const s=tt(t,n);return s===0?tt(e,r):s}class _6{constructor(e){this.Ir=e,this.buffer=new un(W1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();W1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class E6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(q1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Rc(n)?_e(q1,"Ignoring IndexedDB error during garbage collection: ",n):await Ac(n)}await this.Vr(3e5)}))}}class N6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(zm.ce);const r=new _6(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(z1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z1):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,l,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,n)))).next((y=>(a=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(f=Date.now(),Hl()<=et.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y}))))}}function T6(t,e){return new N6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(){this.changes=new Qo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Xu(r.mutation,s,vs.empty(),jt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,nt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=nt()){const s=Ro();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((a=>{let l=$u();return a.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=Ro();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,nt())))}populateOverlays(e,n,r){const s=[];return r.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,s){let a=$i();const l=Ju(),u=(function(){return Ju()})();return n.forEach(((d,f)=>{const g=r.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Jo)?a=a.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),Xu(g.mutation,f,g.mutation.getFieldMask(),jt.now())):l.set(f.key,vs.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((f,g)=>l.set(f,g))),n.forEach(((f,g)=>u.set(f,new j6(g,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=Ju();let s=new Lt(((l,u)=>l-u)),a=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((d=>{const f=n.get(d);if(f===null)return;let g=r.get(d)||vs.empty();g=u.applyToLocalView(f,g),r.set(d,g);const y=(s.get(u.batchId)||nt()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=CS();g.forEach((v=>{if(!a.has(v)){const T=OS(n.get(v),r.get(v));T!==null&&y.set(v,T),a=a.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return re.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return Ve.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):IO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):re.resolve(Ro());let u=dd,d=a;return l.next((f=>re.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{d=d.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,d,f,nt()))).next((g=>({batchId:u,changes:kS(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ve(n)).next((r=>{let s=$u();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let l=$u();return this.indexManager.getCollectionParents(e,a).next((u=>re.forEach(u,(d=>{const f=(function(y,v){return new Hm(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((g=>{g.forEach(((y,v)=>{l=l.insert(y,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s)))).next((l=>{a.forEach(((d,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,$n.newInvalidDocument(g)))}));let u=$u();return l.forEach(((d,f)=>{const g=a.get(d);g!==void 0&&Xu(g.mutation,f,vs.empty(),jt.now()),Gm(n,f)&&(u=u.insert(d,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ys(s.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:x6(s.bundledQuery),readTime:Ys(s.readTime)}})(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this.overlays=new Lt(Ve.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ro();return re.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,a)=>{this.St(e,n,a)})),re.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const s=Ro(),a=n.length+1,l=new Ve(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return re.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Lt(((f,g)=>f-g));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=a.get(f.largestBatchId);g===null&&(g=Ro(),a=a.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Ro(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return re.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new GO(n,r));let a=this.qr.get(n);a===void 0&&(a=nt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.Qr=new un(gn.$r),this.Ur=new un(gn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new gn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new gn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ve(new Ot([])),r=new gn(n,e),s=new gn(n,e+1),a=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ve(new Ot([])),r=new gn(n,e),s=new gn(n,e+1);let a=nt();return this.Ur.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new gn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ve.comparator(e.key,n.key)||tt(e.Yr,n.Yr)}static Kr(e,n){return tt(e.Yr,n.Yr)||Ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new un(gn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new KO(a,n,r,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new gn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Px:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gn(n,0),s=new gn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],(l=>{const u=this.Xr(l.Yr);a.push(u)})),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new un(tt);return n.forEach((s=>{const a=new gn(s,0),l=new gn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(u=>{r=r.add(u.Yr)}))})),re.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Ve.isDocumentKey(a)||(a=a.child(""));const l=new gn(new Ve(a),0);let u=new un(tt);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),l),re.resolve(this.ti(u))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return re.forEach(n.mutations,(s=>{const a=new gn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new gn(n,0),s=this.Zr.firstAfterOrEqual(r);return re.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.ri=e,this.docs=(function(){return new Lt(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(n))}getEntries(e,n){let r=$i();return n.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():$n.newInvalidDocument(s))})),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=$i();const l=n.path,u=new Ve(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||oO(aO(g),r)<=0||(s.has(g.key)||Gm(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,n,r,s){ze(9500)}ii(e,n){return re.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new D6(this)}getSize(e){return re.resolve(this.size)}}class D6 extends S6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.persistence=e,this.si=new Qo((n=>Mx(n)),Lx),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new zx,this.targetCount=0,this.ai=xc.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new xc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),re.waitFor(a).next((()=>s))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),re.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),re.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n){this.ui={},this.overlays={},this.ci=new zm(0),this.li=!1,this.li=!0,this.hi=new A6,this.referenceDelegate=e(this),this.Pi=new O6(this),this.indexManager=new v6,this.remoteDocumentCache=(function(s){return new P6(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new y6(n),this.Ii=new C6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new R6(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){_e("MemoryPersistence","Starting transaction:",e);const s=new M6(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,n){return re.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class M6 extends cO{constructor(e){super(),this.currentSequenceNumber=e}}class qx{constructor(e){this.persistence=e,this.Ri=new zx,this.Vi=null}static mi(e){return new qx(e)}get fi(){if(this.Vi)return this.Vi;throw ze(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(r=>{const s=Ve.fromPath(r);return this.gi(e,s).next((a=>{a||n.removeEntry(s,He.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ym{constructor(e,n){this.persistence=e,this.pi=new Qo((r=>hO(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=T6(this,n)}static mi(e,n){return new ym(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return re.forEach(this.pi,((r,s)=>this.br(e,r,s).next((a=>a?re.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,n).next((u=>{u||(r++,a.removeEntry(l,He.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zf(e.data.value)),n}br(e,n,r){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return re.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=nt(),s=nt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Wx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return a4()?8:uO(zn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,n,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new L6;return this.Ss(e,n,l).next((u=>{if(a.result=u,this.Vs)return this.bs(e,n,l,u.size)}))})).next((()=>a.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Hl()<=et.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Kl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Hl()<=et.DEBUG&&_e("QueryEngine","Query:",Kl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Hl()<=et.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Kl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gs(n))):re.resolve())}ys(e,n){if(P1(n))return re.resolve(null);let r=Gs(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=f0(n,null,"F"),r=Gs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=nt(...a);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const f=this.Ds(n,u);return this.Cs(n,f,l,d.readTime)?this.ys(e,f0(n,null,"F")):this.vs(e,f,n,d)}))))})))))}ws(e,n,r,s){return P1(n)||s.isEqual(He.min())?re.resolve(null):this.ps.getDocuments(e,r).next((a=>{const l=this.Ds(n,a);return this.Cs(n,l,r,s)?re.resolve(null):(Hl()<=et.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Kl(n)),this.vs(e,l,n,iO(s,dd)).next((u=>u)))}))}Ds(e,n){let r=new un(SS(e));return n.forEach(((s,a)=>{Gm(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Hl()<=et.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Kl(n)),this.ps.getDocumentsMatchingQuery(e,n,Ma.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="LocalStore",F6=3e8;class U6{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Lt(tt),this.xs=new Qo((a=>Mx(a)),Lx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function $6(t,e,n,r){return new U6(t,e,n,r)}async function QS(t,e){const n=Ye(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],u=[];let d=nt();for(const f of s){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of a){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function B6(t,e){const n=Ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const y=f.batch,v=y.keys();let T=re.resolve();return v.forEach((j=>{T=T.next((()=>g.getEntry(d,j))).next((E=>{const _=f.docVersions.get(j);ft(_!==null,48541),E.version.compareTo(_)<0&&(y.applyToRemoteDocument(E,f),E.isValidDocument()&&(E.setReadTime(f.commitVersion),g.addEntry(E)))}))})),T.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=nt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function JS(t){const e=Ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function z6(t,e){const n=Ye(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=s.get(y);if(!v)return;u.push(n.Pi.removeMatchingKeys(a,g.removedDocuments,y).next((()=>n.Pi.addMatchingKeys(a,g.addedDocuments,y))));let T=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(In.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),s=s.insert(y,T),(function(E,_,C){return E.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=F6?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(v,T,g)&&u.push(n.Pi.updateTargetData(a,T))}));let d=$i(),f=nt();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))})),u.push(q6(a,l,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!r.isEqual(He.min())){const g=n.Pi.getLastRemoteSnapshotVersion(a).next((y=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));u.push(g)}return re.waitFor(u).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,d,f))).next((()=>d))})).then((a=>(n.Ms=s,a)))}function q6(t,e,n){let r=nt(),s=nt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=$i();return n.forEach(((u,d)=>{const f=a.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(He.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):_e(Hx,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function W6(t,e){const n=Ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Px),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function H6(t,e){const n=Ye(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((a=>a?(s=a,re.resolve(s)):n.Pi.allocateTargetId(r).next((l=>(s=new Ia(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function x0(t,e,n){const r=Ye(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Rc(l))throw l;_e(Hx,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function H1(t,e,n){const r=Ye(t);let s=He.min(),a=nt();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,g){const y=Ye(d),v=y.xs.get(g);return v!==void 0?re.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(r,l,Gs(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{a=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,n?s:He.min(),n?a:nt()))).next((u=>(K6(r,RO(e),u),{documents:u,Qs:a})))))}function K6(t,e,n){let r=t.Os.get(e)||He.min();n.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class K1{constructor(){this.activeTargetIds=VO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G6{constructor(){this.Mo=new K1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new K1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="ConnectivityMonitor";class Y1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(G1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(G1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf=null;function v0(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="RestConnection",Q6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class J6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===um?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const l=v0(),u=this.zo(e,n.toUriEncodedString());_e(ty,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,a);const{host:f}=new URL(u),g=jc(f);return this.Jo(e,u,d,r,g).then((y=>(_e(ty,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw mc(ty,`RPC '${e}' ${l} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,n,r,s,a,l){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ic})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}zo(e,n){const r=Q6[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class Z6 extends J6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const l=v0();return new Promise(((u,d)=>{const f=new tS;f.setWithCredentials(!0),f.listenOnce(nS.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Bf.NO_ERROR:const y=f.getResponseJson();_e(Fn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),u(y);break;case Bf.TIMEOUT:_e(Fn,`RPC '${e}' ${l} timed out`),d(new Pe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Bf.HTTP_ERROR:const v=f.getStatus();if(_e(Fn,`RPC '${e}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const j=T?.error;if(j&&j.status&&j.message){const E=(function(C){const D=C.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(D)>=0?D:oe.UNKNOWN})(j.status);d(new Pe(E,j.message))}else d(new Pe(oe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Pe(oe.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{_e(Fn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);_e(Fn,`RPC '${e}' ${l} sending request:`,s),f.send(n,"POST",g,r,15)}))}T_(e,n,r){const s=v0(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=iS(),u=sS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const g=a.join("");_e(Fn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=l.createWebChannel(g,d);this.I_(y);let v=!1,T=!1;const j=new X6({Yo:_=>{T?_e(Fn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(v||(_e(Fn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),_e(Fn,`RPC '${e}' stream ${s} sending:`,_),y.send(_))},Zo:()=>y.close()}),E=(_,C,D)=>{_.listen(C,(k=>{try{D(k)}catch(O){setTimeout((()=>{throw O}),0)}}))};return E(y,Uu.EventType.OPEN,(()=>{T||(_e(Fn,`RPC '${e}' stream ${s} transport opened.`),j.o_())})),E(y,Uu.EventType.CLOSE,(()=>{T||(T=!0,_e(Fn,`RPC '${e}' stream ${s} transport closed`),j.a_(),this.E_(y))})),E(y,Uu.EventType.ERROR,(_=>{T||(T=!0,mc(Fn,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),j.a_(new Pe(oe.UNAVAILABLE,"The operation could not be completed")))})),E(y,Uu.EventType.MESSAGE,(_=>{if(!T){const C=_.data[0];ft(!!C,16349);const D=C,k=D?.error||D[0]?.error;if(k){_e(Fn,`RPC '${e}' stream ${s} received error:`,k);const O=k.status;let I=(function(A){const L=Xt[A];if(L!==void 0)return VS(L)})(O),$=k.message;I===void 0&&(I=oe.INTERNAL,$="Unknown error status: "+O+" with message "+k.message),T=!0,j.a_(new Pe(I,$)),y.close()}else _e(Fn,`RPC '${e}' stream ${s} received:`,C),j.u_(C)}})),E(u,rS.STAT_EVENT,(_=>{_.stat===o0.PROXY?_e(Fn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===o0.NOPROXY&&_e(Fn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function ny(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t){return new r6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="PersistentStream";class ZS{constructor(e,n,r,s,a,l,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new XS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(Ui(n.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new Pe(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(Q1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(_e(Q1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eM extends ZS{constructor(e,n,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=a6(this.serializer,e),r=(function(a){if(!("targetChange"in a))return He.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?He.min():l.readTime?Ys(l.readTime):He.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=y0(this.serializer),n.addTarget=(function(a,l){let u;const d=l.target;if(u=h0(d)?{documents:c6(a,d)}:{query:u6(a,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=$S(a,l.resumeToken);const f=m0(a,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(He.min())>0){u.readTime=gm(a,l.snapshotVersion.toTimestamp());const f=m0(a,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=h6(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=y0(this.serializer),n.removeTarget=e,this.q_(n)}}class tM extends ZS{constructor(e,n,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=l6(e.writeResults,e.commitTime),r=Ys(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=y0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>o6(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{}class rM extends nM{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Pe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,p0(n,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Pe(oe.UNKNOWN,a.toString())}))}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,p0(n,r),s,l,u,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Pe(oe.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class sM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ui(n),this.aa=!1):_e("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="RemoteStore";class iM{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Xo(this)&&(_e(zo,"Restarting streams for network reachability change."),await(async function(d){const f=Ye(d);f.Ea.add(4),await qd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Zm(f)})(this))}))})),this.Ra=new sM(r,s)}}async function Zm(t){if(Xo(t))for(const e of t.da)await e(!0)}async function qd(t){for(const e of t.da)await e(!1)}function ej(t,e){const n=Ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Qx(n)?Yx(n):Pc(n).O_()&&Gx(n,e))}function Kx(t,e){const n=Ye(t),r=Pc(n);n.Ia.delete(e),r.O_()&&tj(n,e),n.Ia.size===0&&(r.O_()?r.L_():Xo(n)&&n.Ra.set("Unknown"))}function Gx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pc(t).Y_(e)}function tj(t,e){t.Va.Ue(e),Pc(t).Z_(e)}function Yx(t){t.Va=new ZO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Pc(t).start(),t.Ra.ua()}function Qx(t){return Xo(t)&&!Pc(t).x_()&&t.Ia.size>0}function Xo(t){return Ye(t).Ea.size===0}function nj(t){t.Va=void 0}async function aM(t){t.Ra.set("Online")}async function oM(t){t.Ia.forEach(((e,n)=>{Gx(t,e)}))}async function lM(t,e){nj(t),Qx(t)?(t.Ra.ha(e),Yx(t)):t.Ra.set("Unknown")}async function cM(t,e,n){if(t.Ra.set("Online"),e instanceof US&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(t,e)}catch(r){_e(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xm(t,r)}else if(e instanceof Hf?t.Va.Ze(e):e instanceof FS?t.Va.st(e):t.Va.tt(e),!n.isEqual(He.min()))try{const r=await JS(t.localStore);n.compareTo(r)>=0&&await(function(a,l){const u=a.Va.Tt(l);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ia.get(f);g&&a.Ia.set(f,g.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,f)=>{const g=a.Ia.get(d);if(!g)return;a.Ia.set(d,g.withResumeToken(In.EMPTY_BYTE_STRING,g.snapshotVersion)),tj(a,d);const y=new Ia(g.target,d,f,g.sequenceNumber);Gx(a,y)})),a.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){_e(zo,"Failed to raise snapshot:",r),await xm(t,r)}}async function xm(t,e,n){if(!Rc(e))throw e;t.Ea.add(1),await qd(t),t.Ra.set("Offline"),n||(n=()=>JS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_e(zo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Zm(t)}))}function rj(t,e){return e().catch((n=>xm(t,n,e)))}async function ep(t){const e=Ye(t),n=Ua(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Px;for(;uM(e);)try{const s=await W6(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,dM(e,s)}catch(s){await xm(e,s)}sj(e)&&ij(e)}function uM(t){return Xo(t)&&t.Ta.length<10}function dM(t,e){t.Ta.push(e);const n=Ua(t);n.O_()&&n.X_&&n.ea(e.mutations)}function sj(t){return Xo(t)&&!Ua(t).x_()&&t.Ta.length>0}function ij(t){Ua(t).start()}async function hM(t){Ua(t).ra()}async function fM(t){const e=Ua(t);for(const n of t.Ta)e.ea(n.mutations)}async function mM(t,e,n){const r=t.Ta.shift(),s=Ux.from(r,e,n);await rj(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await ep(t)}async function pM(t,e){e&&Ua(t).X_&&await(async function(r,s){if((function(l){return QO(l)&&l!==oe.ABORTED})(s.code)){const a=r.Ta.shift();Ua(r).B_(),await rj(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await ep(r)}})(t,e),sj(t)&&ij(t)}async function J1(t,e){const n=Ye(t);n.asyncQueue.verifyOperationInProgress(),_e(zo,"RemoteStore received new credentials");const r=Xo(n);n.Ea.add(3),await qd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Zm(n)}async function gM(t,e){const n=Ye(t);e?(n.Ea.delete(2),await Zm(n)):e||(n.Ea.add(2),await qd(n),n.Ra.set("Unknown"))}function Pc(t){return t.ma||(t.ma=(function(n,r,s){const a=Ye(n);return a.sa(),new eM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:aM.bind(null,t),t_:oM.bind(null,t),r_:lM.bind(null,t),H_:cM.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Qx(t)?Yx(t):t.Ra.set("Unknown")):(await t.ma.stop(),nj(t))}))),t.ma}function Ua(t){return t.fa||(t.fa=(function(n,r,s){const a=Ye(n);return a.sa(),new tM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:hM.bind(null,t),r_:pM.bind(null,t),ta:fM.bind(null,t),na:mM.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await ep(t)):(await t.fa.stop(),t.Ta.length>0&&(_e(zo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const l=Date.now()+r,u=new Jx(e,n,l,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xx(t,e){if(Ui("AsyncQueue",`${e}: ${t}`),Rc(t))return new Pe(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{static emptySet(e){return new lc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ve.comparator(n.key,r.key):(n,r)=>Ve.comparator(n.key,r.key),this.keyedMap=$u(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new lc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.ga=new Lt(Ve.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ze(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class vc{constructor(e,n,r,s,a,l,u,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new vc(e,n,lc.emptySet(n),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Km(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xM{constructor(){this.queries=Z1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ye(n),a=s.queries;s.queries=Z1(),a.forEach(((l,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new Pe(oe.ABORTED,"Firestore shutting down"))}}function Z1(){return new Qo((t=>TS(t)),Km)}async function vM(t,e){const n=Ye(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new yM,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=Xx(l,`Initialization of query '${Kl(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Zx(n)}async function bM(t,e){const n=Ye(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wM(t,e){const n=Ye(t);let r=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const u of l.Sa)u.Fa(s)&&(r=!0);l.wa=s}}r&&Zx(n)}function _M(t,e,n){const r=Ye(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function Zx(t){t.Ca.forEach((e=>{e.next()}))}var b0,eE;(eE=b0||(b0={})).Ma="default",eE.Cache="cache";class EM{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==b0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.key=e}}class oj{constructor(e){this.key=e}}class NM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nt(),this.mutatedKeys=nt(),this.eu=SS(e),this.tu=new lc(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new X1,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const v=s.get(g),T=Gm(this.query,y)?y:null,j=!!v&&this.mutatedKeys.has(v.key),E=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let _=!1;v&&T?v.data.isEqual(T.data)?j!==E&&(r.track({type:3,doc:T}),_=!0):this.su(v,T)||(r.track({type:2,doc:T}),_=!0,(d&&this.eu(T,d)>0||f&&this.eu(T,f)<0)&&(u=!0)):!v&&T?(r.track({type:0,doc:T}),_=!0):v&&!T&&(r.track({type:1,doc:v}),_=!0,(d||f)&&(u=!0)),_&&(T?(l=l.add(T),a=E?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:u,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,y)=>(function(T,j){const E=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Rt:_})}};return E(T)-E(j)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new vc(this.query,e.tu,a,l,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new X1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new oj(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new aj(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=nt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return vc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ev="SyncEngine";class TM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SM{constructor(e){this.key=e,this.hu=!1}}class jM{constructor(e,n,r,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Qo((u=>TS(u)),Km),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(Ve.comparator),this.Au=new Map,this.Ru=new zx,this.Vu={},this.mu=new Map,this.fu=xc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kM(t,e,n=!0){const r=fj(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await lj(r,e,n,!0),s}async function CM(t,e){const n=fj(t);await lj(n,e,!0,!1)}async function lj(t,e,n,r){const s=await H6(t.localStore,Gs(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await IM(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&ej(t.remoteStore,s),u}async function IM(t,e,n,r,s){t.pu=(y,v,T)=>(async function(E,_,C,D){let k=_.view.ru(C);k.Cs&&(k=await H1(E.localStore,_.query,!1).then((({documents:P})=>_.view.ru(P,k))));const O=D&&D.targetChanges.get(_.targetId),I=D&&D.targetMismatches.get(_.targetId)!=null,$=_.view.applyChanges(k,E.isPrimaryClient,O,I);return nE(E,_.targetId,$.au),$.snapshot})(t,y,v,T);const a=await H1(t.localStore,e,!0),l=new NM(e,a.Qs),u=l.ru(a.documents),d=zd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=l.applyChanges(u,t.isPrimaryClient,d);nE(t,n,f.au);const g=new TM(e,n,l);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function AM(t,e,n){const r=Ye(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((l=>!Km(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await x0(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Kx(r.remoteStore,s.targetId),w0(r,s.targetId)})).catch(Ac)):(w0(r,s.targetId),await x0(r.localStore,s.targetId,!0))}async function RM(t,e){const n=Ye(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kx(n.remoteStore,r.targetId))}async function PM(t,e,n){const r=UM(t);try{const s=await(function(l,u){const d=Ye(l),f=jt.now(),g=u.reduce(((T,j)=>T.add(j.key)),nt());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let j=$i(),E=nt();return d.Ns.getEntries(T,g).next((_=>{j=_,j.forEach(((C,D)=>{D.isValidDocument()||(E=E.add(C))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,j))).next((_=>{y=_;const C=[];for(const D of u){const k=WO(D,y.get(D.key).overlayedDocument);k!=null&&C.push(new Jo(D.key,k,xS(k.value.mapValue),Oi.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,C,u)})).next((_=>{v=_;const C=_.applyToLocalDocumentSet(y,E);return d.documentOverlayCache.saveOverlays(T,_.batchId,C)}))})).then((()=>({batchId:v.batchId,changes:kS(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new Lt(tt)),f=f.insert(u,d),l.Vu[l.currentUser.toKey()]=f})(r,s.batchId,n),await Wd(r,s.changes),await ep(r.remoteStore)}catch(s){const a=Xx(s,"Failed to persist write");n.reject(a)}}async function cj(t,e){const n=Ye(t);try{const r=await z6(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Au.get(a);l&&(ft(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?ft(l.hu,14607):s.removedDocuments.size>0&&(ft(l.hu,42227),l.hu=!1))})),await Wd(n,r,e)}catch(r){await Ac(r)}}function tE(t,e,n){const r=Ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((a,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=Ye(l);d.onlineState=u;let f=!1;d.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&Zx(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DM(t,e,n){const r=Ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let l=new Lt(Ve.comparator);l=l.insert(a,$n.newNoDocument(a,He.min()));const u=nt().add(a),d=new Jm(He.min(),new Map,new Lt(tt),l,u);await cj(r,d),r.du=r.du.remove(a),r.Au.delete(e),tv(r)}else await x0(r.localStore,e,!1).then((()=>w0(r,e,n))).catch(Ac)}async function OM(t,e){const n=Ye(t),r=e.batch.batchId;try{const s=await B6(n.localStore,e);dj(n,r,null),uj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wd(n,s)}catch(s){await Ac(s)}}async function MM(t,e,n){const r=Ye(t);try{const s=await(function(l,u){const d=Ye(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(ft(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(r.localStore,e);dj(r,e,n),uj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wd(r,s)}catch(s){await Ac(s)}}function uj(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function dj(t,e,n){const r=Ye(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function w0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||hj(t,r)}))}function hj(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Kx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tv(t))}function nE(t,e,n){for(const r of n)r instanceof aj?(t.Ru.addReference(r.key,e),LM(t,r)):r instanceof oj?(_e(ev,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||hj(t,r.key)):ze(19791,{wu:r})}function LM(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(_e(ev,"New document in limbo: "+n),t.Eu.add(r),tv(t))}function tv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ve(Ot.fromString(e)),r=t.fu.next();t.Au.set(r,new SM(n)),t.du=t.du.insert(n,r),ej(t.remoteStore,new Ia(Gs(Vx(n.path)),r,"TargetPurposeLimboResolution",zm.ce))}}async function Wd(t,e,n){const r=Ye(t),s=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{l.push(r.pu(d,e,n).then((f=>{if((f||n)&&r.isPrimaryClient){const g=f?!f.fromCache:n?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=Wx.As(d.targetId,f);a.push(g)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(d,f){const g=Ye(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>re.forEach(f,(v=>re.forEach(v.Es,(T=>g.persistence.referenceDelegate.addReference(y,v.targetId,T))).next((()=>re.forEach(v.ds,(T=>g.persistence.referenceDelegate.removeReference(y,v.targetId,T)))))))))}catch(y){if(!Rc(y))throw y;_e(Hx,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const T=g.Ms.get(v),j=T.snapshotVersion,E=T.withLastLimboFreeSnapshotVersion(j);g.Ms=g.Ms.insert(v,E)}}})(r.localStore,a))}async function VM(t,e){const n=Ye(t);if(!n.currentUser.isEqual(e)){_e(ev,"User change. New user:",e.toKey());const r=await QS(n.localStore,e);n.currentUser=e,(function(a,l){a.mu.forEach((u=>{u.forEach((d=>{d.reject(new Pe(oe.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wd(n,r.Ls)}}function FM(t,e){const n=Ye(t),r=n.Au.get(e);if(r&&r.hu)return nt().add(r.key);{let s=nt();const a=n.Iu.get(e);if(!a)return s;for(const l of a){const u=n.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function fj(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DM.bind(null,e),e.Pu.H_=wM.bind(null,e.eventManager),e.Pu.yu=_M.bind(null,e.eventManager),e}function UM(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MM.bind(null,e),e}class vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return $6(this.persistence,new V6,e.initialUser,this.serializer)}Cu(e){return new YS(qx.mi,this.serializer)}Du(e){return new G6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vm.provider={build:()=>new vm};class $M extends vm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ft(this.persistence.referenceDelegate instanceof ym,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new E6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new YS((r=>ym.mi(r,n)),this.serializer)}}class _0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VM.bind(null,this.syncEngine),await gM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xM})()}createDatastore(e){const n=Xm(e.databaseInfo.databaseId),r=(function(a){return new Z6(a)})(e.databaseInfo);return(function(a,l,u,d){return new rM(a,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,a,l,u){return new iM(r,s,a,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>tE(this.syncEngine,n,0)),(function(){return Y1.v()?new Y1:new Y6})())}createSyncEngine(e,n){return(function(s,a,l,u,d,f,g){const y=new jM(s,a,l,u,d,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ye(n);_e(zo,"RemoteStore shutting down."),r.Ea.add(5),await qd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_0.provider={build:()=>new _0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="FirestoreClient";class zM{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Un.UNAUTHENTICATED,this.clientId=Ax.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{_e($a,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(_e($a,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xx(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ry(t,e){t.asyncQueue.verifyOperationInProgress(),_e($a,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await QS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function rE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qM(t);_e($a,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>J1(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>J1(e.remoteStore,s))),t._onlineComponents=e}async function qM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e($a,"Using user provided OfflineComponentProvider");try{await ry(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;mc("Error using user provided cache. Falling back to memory cache: "+n),await ry(t,new vm)}}else _e($a,"Using default OfflineComponentProvider"),await ry(t,new $M(void 0));return t._offlineComponents}async function mj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e($a,"Using user provided OnlineComponentProvider"),await rE(t,t._uninitializedComponentsProvider._online)):(_e($a,"Using default OnlineComponentProvider"),await rE(t,new _0))),t._onlineComponents}function WM(t){return mj(t).then((e=>e.syncEngine))}async function HM(t){const e=await mj(t),n=e.eventManager;return n.onListen=kM.bind(null,e.syncEngine),n.onUnlisten=AM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RM.bind(null,e.syncEngine),n}function KM(t,e,n={}){const r=new Da;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,u,d,f){const g=new BM({next:v=>{g.Nu(),l.enqueueAndForget((()=>bM(a,y)));const T=v.docs.has(u);!T&&v.fromCache?f.reject(new Pe(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&d&&d.source==="server"?f.reject(new Pe(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new EM(Vx(u.path),g,{includeMetadataChanges:!0,qa:!0});return vM(a,y)})(await HM(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="firestore.googleapis.com",iE=!0;class aE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gj,this.ssl=iE}else this.host=e.host,this.ssl=e.ssl??iE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<w6)throw new Pe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pj(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nv{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new K3;switch(r.type){case"firstParty":return new J3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Pe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=sE.get(n);r&&(_e("ComponentProvider","Removing Datastore"),sE.delete(n),r.terminate())})(this),Promise.resolve()}}function GM(t,e,n,r={}){t=ud(t,nv);const s=jc(e),a=t._getSettings(),l={...a,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(uT(`https://${u}`),dT("Firestore",!0)),a.host!==gj&&a.host!==u&&mc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:u,ssl:s,emulatorOptions:r};if(!Oa(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=Un.MOCK_USER;else{f=XP(r.mockUserToken,t._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Pe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Un(y)}t._authCredentials=new G3(new oS(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rv(this.firestore,e,this._query)}}class yn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}toJSON(){return{type:yn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($d(n,yn._jsonSchema))return new yn(e,r||null,new Ve(Ot.fromString(n.referencePath)))}}yn._jsonSchemaVersion="firestore/documentReference/1.0",yn._jsonSchema={type:tn("string",yn._jsonSchemaVersion),referencePath:tn("string")};class yd extends rv{constructor(e,n,r){super(e,n,Vx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Ve(e))}withConverter(e){return new yd(this.firestore,e,this._path)}}function Pl(t,e,...n){if(t=xn(t),arguments.length===1&&(e=Ax.newId()),rO("doc","path",e),t instanceof nv){const r=Ot.fromString(e,...n);return b1(r),new yn(t,null,new Ve(r))}{if(!(t instanceof yn||t instanceof yd))throw new Pe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ot.fromString(e,...n));return b1(r),new yn(t.firestore,t instanceof yd?t.converter:null,new Ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="AsyncQueue";class lE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new XS(this,"async_queue_retry"),this._c=()=>{const r=ny();r&&_e(oE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ny();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ny();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Da;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Rc(e))throw e;_e(oE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ui("INTERNAL UNHANDLED ERROR: ",cE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Jx.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&ze(47125,{Pc:cE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function cE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class sv extends nv{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new lE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lE(e),this._firestoreClient=void 0,await e}}}function YM(t,e){const n=typeof t=="object"?t:vx(),r=typeof t=="string"?t:um,s=Go(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=QP("firestore");a&&GM(s,...a)}return s}function yj(t){if(t._terminated)throw new Pe(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QM(t),t._firestoreClient}function QM(t){const e=t._freezeSettings(),n=(function(s,a,l,u){return new pO(s,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,pj(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new zM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Br(In.fromBase64String(e))}catch(n){throw new Pe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Br(In.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Br._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($d(e,Br._jsonSchema))return Br.fromBase64String(e.bytes)}}Br._jsonSchemaVersion="firestore/bytes/1.0",Br._jsonSchema={type:tn("string",Br._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Pe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Pe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Pe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qs._jsonSchemaVersion}}static fromJSON(e){if($d(e,Qs._jsonSchema))return new Qs(e.latitude,e.longitude)}}Qs._jsonSchemaVersion="firestore/geoPoint/1.0",Qs._jsonSchema={type:tn("string",Qs._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Js._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($d(e,Js._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Js(e.vectorValues);throw new Pe(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Js._jsonSchemaVersion="firestore/vectorValue/1.0",Js._jsonSchema={type:tn("string",Js._jsonSchemaVersion),vectorValues:tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=/^__.*__$/;class XM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bd(e,this.data,n,this.fieldTransforms)}}function vj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ac:t})}}class av{constructor(e,n,r,s,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new av({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vj(this.Ac)&&JM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xm(e)}Cc(e,n,r,s=!1){return new av({Ac:e,methodName:n,Dc:r,path:kn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eL(t){const e=t._freezeSettings(),n=Xm(t._databaseId);return new ZM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tL(t,e,n,r,s,a={}){const l=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);Ej("Data must be an object, but it was:",l,r);const u=wj(r,l);let d,f;if(a.merge)d=new vs(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const v=nL(e,y,n);if(!l.contains(v))throw new Pe(oe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);sL(g,v)||g.push(v)}d=new vs(g),f=l.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=l.fieldTransforms;return new XM(new $r(u),d,f)}function bj(t,e){if(_j(t=xn(t)))return Ej("Unsupported field value:",e,t),wj(t,e);if(t instanceof xj)return(function(r,s){if(!vj(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const u of r){let d=bj(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,s){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=jt.fromDate(r);return{timestampValue:gm(s.serializer,a)}}if(r instanceof jt){const a=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gm(s.serializer,a)}}if(r instanceof Qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Br)return{bytesValue:$S(s.serializer,r._byteString)};if(r instanceof yn){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Js)return(function(l,u){return{mapValue:{fields:{[gS]:{stringValue:yS},[dm]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Fx(u.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Rx(r)}`)})(t,e)}function wj(t,e){const n={};return uS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(t,((r,s)=>{const a=bj(s,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function _j(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof Qs||t instanceof Br||t instanceof yn||t instanceof xj||t instanceof Js)}function Ej(t,e,n){if(!_j(n)||!lS(n)){const r=Rx(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function nL(t,e,n){if((e=xn(e))instanceof iv)return e._internalPath;if(typeof e=="string")return Nj(t,e);throw bm("Field path arguments must be of type string or ",t,!1,void 0,n)}const rL=new RegExp("[~\\*/\\[\\]]");function Nj(t,e,n){if(e.search(rL)>=0)throw bm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new iv(...e.split("."))._internalPath}catch{throw bm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bm(t,e,n,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new Pe(oe.INVALID_ARGUMENT,u+t+d)}function sL(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sj("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iL extends Tj{data(){return super.data()}}function Sj(t,e){return typeof e=="string"?Nj(t,e):e instanceof iv?e._internalPath:e._delegate._internalPath}class aL{convertValue(e,n="none"){switch(Fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yo(e,((s,a)=>{r[s]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[dm].arrayValue?.values?.map((r=>Kt(r.doubleValue)));return new Js(n)}convertGeoPoint(e){return new Qs(Kt(e.latitude),Kt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hd(e));default:return null}}convertTimestamp(e){const n=La(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ot.fromString(e);ft(KS(r),9688,{name:e});const s=new fd(r.get(1),r.get(3)),a=new Ve(r.popFirst(5));return s.isEqual(n)||Ui(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class zu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lo extends Tj{constructor(e,n,r,s,a,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Lo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lo._jsonSchema={type:tn("string",Lo._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class Kf extends Lo{data(e={}){return super.data(e)}}class Zu{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new zu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Kf(this._firestore,this._userDataWriter,r.key,r,new zu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Pe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new Kf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const d=new Kf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:lL(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ax.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t){t=ud(t,yn);const e=ud(t.firestore,sv);return KM(yj(e),t._key).then((n=>dL(e,t,n)))}Zu._jsonSchemaVersion="firestore/querySnapshot/1.0",Zu._jsonSchema={type:tn("string",Zu._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class cL extends aL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function yf(t,e,n){t=ud(t,yn);const r=ud(t.firestore,sv),s=oL(t.converter,e,n);return uL(r,[tL(eL(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Oi.none())])}function uL(t,e){return(function(r,s){const a=new Da;return r.asyncQueue.enqueueAndForget((async()=>PM(await WM(r),s,a))),a.promise})(yj(t),e)}function dL(t,e,n){const r=n.docs.get(e._key),s=new cL(t);return new Lo(t,s,e._key,r,new zu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ic=s})(kc),ei(new _s("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),u=new sv(new Y3(r.getProvider("auth-internal")),new X3(l,r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Pe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fd(f.options.projectId,g)})(l,s),l);return a={useFetchStreams:n,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),Wr(g1,y1,e),Wr(g1,y1,"esm2020")})();var hL="firebase",fL="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wr(hL,fL,"app");const jj="@firebase/installations",ov="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=1e4,Cj=`w:${ov}`,Ij="FIS_v2",mL="https://firebaseinstallations.googleapis.com/v1",pL=3600*1e3,gL="installations",yL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qo=new Ko(gL,yL,xL);function Aj(t){return t instanceof Ts&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj({projectId:t}){return`${mL}/projects/${t}/installations`}function Pj(t){return{token:t.token,requestStatus:2,expiresIn:bL(t.expiresIn),creationTime:Date.now()}}async function Dj(t,e){const r=(await e.json()).error;return qo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Oj({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function vL(t,{refreshToken:e}){const n=Oj(t);return n.append("Authorization",wL(e)),n}async function Mj(t){const e=await t();return e.status>=500&&e.status<600?t():e}function bL(t){return Number(t.replace("s","000"))}function wL(t){return`${Ij} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Rj(t),s=Oj(t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const l={fid:n,authVersion:Ij,appId:t.appId,sdkVersion:Cj},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await Mj(()=>fetch(r,u));if(d.ok){const f=await d.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:Pj(f.authToken)}}else throw await Dj("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=/^[cdef][\w-]{21}$/,E0="";function TL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=SL(t);return NL.test(n)?n:E0}catch{return E0}}function SL(t){return EL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=new Map;function Fj(t,e){const n=tp(t);Uj(n,e),jL(n,e)}function Uj(t,e){const n=Vj.get(t);if(n)for(const r of n)r(e)}function jL(t,e){const n=kL();n&&n.postMessage({key:t,fid:e}),CL()}let Po=null;function kL(){return!Po&&"BroadcastChannel"in self&&(Po=new BroadcastChannel("[Firebase] FID Change"),Po.onmessage=t=>{Uj(t.data.key,t.data.fid)}),Po}function CL(){Vj.size===0&&Po&&(Po.close(),Po=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="firebase-installations-database",AL=1,Wo="firebase-installations-store";let sy=null;function lv(){return sy||(sy=yT(IL,AL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Wo)}}})),sy}async function wm(t,e){const n=tp(t),s=(await lv()).transaction(Wo,"readwrite"),a=s.objectStore(Wo),l=await a.get(n);return await a.put(e,n),await s.done,(!l||l.fid!==e.fid)&&Fj(t,e.fid),e}async function $j(t){const e=tp(t),r=(await lv()).transaction(Wo,"readwrite");await r.objectStore(Wo).delete(e),await r.done}async function np(t,e){const n=tp(t),s=(await lv()).transaction(Wo,"readwrite"),a=s.objectStore(Wo),l=await a.get(n),u=e(l);return u===void 0?await a.delete(n):await a.put(u,n),await s.done,u&&(!l||l.fid!==u.fid)&&Fj(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(t){let e;const n=await np(t.appConfig,r=>{const s=RL(r),a=PL(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===E0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function RL(t){const e=t||{fid:TL(),registrationStatus:0};return Bj(e)}function PL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(qo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=DL(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:OL(t)}:{installationEntry:e}}async function DL(t,e){try{const n=await _L(t,e);return wm(t.appConfig,n)}catch(n){throw Aj(n)&&n.customData.serverCode===409?await $j(t.appConfig):await wm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function OL(t){let e=await dE(t.appConfig);for(;e.registrationStatus===1;)await Lj(100),e=await dE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await cv(t);return r||n}return e}function dE(t){return np(t,e=>{if(!e)throw qo.create("installation-not-found");return Bj(e)})}function Bj(t){return ML(t)?{fid:t.fid,registrationStatus:0}:t}function ML(t){return t.registrationStatus===1&&t.registrationTime+kj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL({appConfig:t,heartbeatServiceProvider:e},n){const r=VL(t,n),s=vL(t,n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const l={installation:{sdkVersion:Cj,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await Mj(()=>fetch(r,u));if(d.ok){const f=await d.json();return Pj(f)}else throw await Dj("Generate Auth Token",d)}function VL(t,{fid:e}){return`${Rj(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uv(t,e=!1){let n;const r=await np(t.appConfig,a=>{if(!zj(a))throw qo.create("not-registered");const l=a.authToken;if(!e&&$L(l))return a;if(l.requestStatus===1)return n=FL(t,e),a;{if(!navigator.onLine)throw qo.create("app-offline");const u=zL(a);return n=UL(t,u),u}});return n?await n:r.authToken}async function FL(t,e){let n=await hE(t.appConfig);for(;n.authToken.requestStatus===1;)await Lj(100),n=await hE(t.appConfig);const r=n.authToken;return r.requestStatus===0?uv(t,e):r}function hE(t){return np(t,e=>{if(!zj(e))throw qo.create("not-registered");const n=e.authToken;return qL(n)?{...e,authToken:{requestStatus:0}}:e})}async function UL(t,e){try{const n=await LL(t,e),r={...e,authToken:n};return await wm(t.appConfig,r),n}catch(n){if(Aj(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await $j(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await wm(t.appConfig,r)}throw n}}function zj(t){return t!==void 0&&t.registrationStatus===2}function $L(t){return t.requestStatus===2&&!BL(t)}function BL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pL}function zL(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function qL(t){return t.requestStatus===1&&t.requestTime+kj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t){const e=t,{installationEntry:n,registrationPromise:r}=await cv(e);return r?r.catch(console.error):uv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(t,e=!1){const n=t;return await KL(n),(await uv(n,e)).token}async function KL(t){const{registrationPromise:e}=await cv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t){if(!t||!t.options)throw iy("App Configuration");if(!t.name)throw iy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw iy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function iy(t){return qo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="installations",YL="installations-internal",QL=t=>{const e=t.getProvider("app").getImmediate(),n=GL(e),r=Go(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},JL=t=>{const e=t.getProvider("app").getImmediate(),n=Go(e,qj).getImmediate();return{getId:()=>WL(n),getToken:s=>HL(n,s)}};function XL(){ei(new _s(qj,QL,"PUBLIC")),ei(new _s(YL,JL,"PRIVATE"))}XL();Wr(jj,ov);Wr(jj,ov,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="analytics",ZL="firebase_id",eV="origin",tV=60*1e3,nV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new Fm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kr=new Ko("analytics","Analytics",rV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){if(!t.startsWith(dv)){const e=kr.create("invalid-gtag-resource",{gtagURL:t});return Jn.warn(e.message),""}return t}function Wj(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function iV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function aV(t,e){const n=iV("firebase-js-sdk-policy",{createScriptURL:sV}),r=document.createElement("script"),s=`${dv}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function oV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function lV(t,e,n,r,s,a){const l=r[s];try{if(l)await e[l];else{const d=(await Wj(n)).find(f=>f.measurementId===s);d&&await e[d.appId]}}catch(u){Jn.error(u)}t("config",s,a)}async function cV(t,e,n,r,s){try{let a=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const u=await Wj(n);for(const d of l){const f=u.find(y=>y.measurementId===d),g=f&&e[f.appId];if(g)a.push(g);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,s||{})}catch(a){Jn.error(a)}}function uV(t,e,n,r){async function s(a,...l){try{if(a==="event"){const[u,d]=l;await cV(t,e,n,u,d)}else if(a==="config"){const[u,d]=l;await lV(t,e,n,r,u,d)}else if(a==="consent"){const[u,d]=l;t("consent",u,d)}else if(a==="get"){const[u,d,f]=l;t("get",u,d,f)}else if(a==="set"){const[u]=l;t("set",u)}else t(a,...l)}catch(u){Jn.error(u)}}return s}function dV(t,e,n,r,s){let a=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=uV(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}function hV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(dv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=30,mV=1e3;class pV{constructor(e={},n=mV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Hj=new pV;function gV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function yV(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:gV(n)},s=nV.replace("{app-id}",e),a=await fetch(s,r);if(a.status!==200&&a.status!==304){let l="";try{const u=await a.json();u.error?.message&&(l=u.error.message)}catch{}throw kr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function xV(t,e=Hj,n){const{appId:r,apiKey:s,measurementId:a}=t.options;if(!r)throw kr.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw kr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new wV;return setTimeout(async()=>{u.abort()},tV),Kj({appId:r,apiKey:s,measurementId:a},l,u,e)}async function Kj(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Hj){const{appId:a,measurementId:l}=t;try{await vV(r,e)}catch(u){if(l)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:a,measurementId:l};throw u}try{const u=await yV(t);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!bV(d)){if(s.deleteThrottleMetadata(a),l)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:a,measurementId:l};throw u}const f=Number(d?.customData?.httpStatus)===503?U_(n,s.intervalMillis,fV):U_(n,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,g),Jn.debug(`Calling attemptFetch again in ${f} millis`),Kj(t,g,r,s)}}function vV(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(a),r(kr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function bV(t){if(!(t instanceof Ts)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class wV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function _V(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const a=await e,l={...r,send_to:a};t("event",n,l)}}async function EV(t,e,n,r){if(r&&r.global){const s={};for(const a of Object.keys(n))s[`user_properties.${a}`]=n[a];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(){if(fT())try{await mT()}catch(t){return Jn.warn(kr.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Jn.warn(kr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function TV(t,e,n,r,s,a,l){const u=xV(t);u.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Jn.error(v)),e.push(u);const d=NV().then(v=>{if(v)return r.getId()}),[f,g]=await Promise.all([u,d]);hV(a)||aV(a,f.measurementId),s("js",new Date);const y=l?.config??{};return y[eV]="firebase",y.update=!0,g!=null&&(y[ZL]=g),s("config",f.measurementId,y),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.app=e}_delete(){return delete cc[this.app.options.appId],Promise.resolve()}}let cc={},fE=[];const mE={};let ay="dataLayer",jV="gtag",pE,hv,gE=!1;function kV(){const t=[];if(hT()&&t.push("This is a browser extension environment."),o4()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=kr.create("invalid-analytics-context",{errorInfo:e});Jn.warn(n.message)}}function CV(t,e,n){kV();const r=t.options.appId;if(!r)throw kr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw kr.create("no-api-key");if(cc[r]!=null)throw kr.create("already-exists",{id:r});if(!gE){oV(ay);const{wrappedGtag:a,gtagCore:l}=dV(cc,fE,mE,ay,jV);hv=a,pE=l,gE=!0}return cc[r]=TV(t,fE,mE,e,pE,ay,n),new SV(t)}function IV(t=vx()){t=xn(t);const e=Go(t,_m);return e.isInitialized()?e.getImmediate():AV(t)}function AV(t,e={}){const n=Go(t,_m);if(n.isInitialized()){const s=n.getImmediate();if(Oa(e,n.getOptions()))return s;throw kr.create("already-initialized")}return n.initialize({options:e})}function RV(t,e,n){t=xn(t),EV(hv,cc[t.app.options.appId],e,n).catch(r=>Jn.error(r))}function PV(t,e,n,r){t=xn(t),_V(hv,cc[t.app.options.appId],e,n,r).catch(s=>Jn.error(s))}const yE="@firebase/analytics",xE="0.10.19";function DV(){ei(new _s(_m,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return CV(r,s,n)},"PUBLIC")),ei(new _s("analytics-internal",t,"PRIVATE")),Wr(yE,xE),Wr(yE,xE,"esm2020");function t(e){try{const n=e.getProvider(_m).getImmediate();return{logEvent:(r,s,a)=>PV(n,r,s,a),setUserProperties:(r,s)=>RV(n,r,s)}}catch(n){throw kr.create("interop-component-reg-failed",{reason:n})}}}DV();const OV={apiKey:"AIzaSyBkxRFG8qLm3QrbUgPb_QLEC3pJYW3nfx0",authDomain:"arkan-8bd63.firebaseapp.com",projectId:"arkan-8bd63",storageBucket:"arkan-8bd63.firebasestorage.app",messagingSenderId:"1097406159096",appId:"1:1097406159096:web:3f6ab094d52e73942ac30d",measurementId:"G-VH77WMGF6Y"},fv=xT(OV);IV(fv);const Ou=W3(fv),Dl=YM(fv),Gj=N.createContext(null),Xr=()=>{const t=N.useContext(Gj);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},MV=({children:t})=>{const[e,n]=N.useState(null),[r,s]=N.useState(null),[a,l]=N.useState(!0),[u,d]=N.useState(()=>{const k=localStorage.getItem("employeeSession");return k?JSON.parse(k):null});N.useEffect(()=>{const k=P5(Ou,async O=>{if(n(O),O)try{const I=await uE(Pl(Dl,"subscriptions",O.uid));if(I.exists()){const $=I.data();new Date($.endDate)<new Date?s({...$,status:"expired"}):s($)}else s(null)}catch(I){console.error("Error fetching subscription:",I),s(null)}else s(null);l(!1)});return()=>k()},[]);const f=async(k,O)=>{if(k==="admin@arkan.sa"&&O==="Admin@2024"){n({uid:"demo-admin-uid",email:"admin@arkan.sa",displayName:"  ",emailVerified:!0}),s({planName:" ",price:"199 ./",startDate:new Date().toISOString(),endDate:new Date(Date.now()+365*24*60*60*1e3).toISOString(),status:"active",code:"ARK-DEMO-2024"});return}await k5(Ou,k,O)},g=async()=>{const k=new Ci;try{const I=(await e3(Ou,k)).user;if(!(await uE(Pl(Dl,"users",I.uid))).exists()){await yf(Pl(Dl,"users",I.uid),{name:I.displayName||" Google",email:I.email,emailVerified:!0,authProvider:"google",createdAt:new Date().toISOString()},{merge:!0});const P=new Date,A=new Date;A.setDate(P.getDate()+7);const L={planName:" ",price:"0",startDate:P.toISOString(),endDate:A.toISOString(),status:"active",code:`ARK-TRIAL-${Math.floor(Math.random()*1e5)}`};await yf(Pl(Dl,"subscriptions",I.uid),L),s(L)}}catch(O){throw console.error("Google Sign-in error:",O),O}},y=async(k,O,I)=>{console.log("AuthContext: Attempting registration for",O);try{const $=await j5(Ou,O,I);console.log("AuthContext: User created",$.user.uid),await I5($.user,{displayName:k}),console.log("AuthContext: Profile updated"),await i1($.user,{url:window.location.origin+"/login",handleCodeInApp:!1}),console.log("AuthContext: Verification email sent"),await yf(Pl(Dl,"users",$.user.uid),{name:k,email:O,emailVerified:!1,createdAt:new Date().toISOString()},{merge:!0}),console.log("AuthContext: Firestore doc created")}catch($){throw console.error("AuthContext: Registration FAILED",$),$}},v=async()=>{await D5(Ou)},T=k=>{d(k),k?localStorage.setItem("employeeSession",JSON.stringify(k)):localStorage.removeItem("employeeSession")},j=()=>{d(null),localStorage.removeItem("employeeSession")},E=(k,O)=>{if(!u)return!1;const I=u.permissions.find($=>$.module===k);return I?I.actions.includes(O):!1},_=async()=>{e&&!e.emailVerified&&await i1(e,{url:window.location.origin+"/login",handleCodeInApp:!1})},C=e?.emailVerified||e?.email==="admin@arkan.sa"||!1,D=async k=>{if(!e)return;const O=new Date,I=new Date;I.setDate(O.getDate()+30);const $={planName:k.name,price:k.price,startDate:O.toISOString(),endDate:I.toISOString(),status:"active",code:`ARK-${Math.floor(Math.random()*1e5)}-PRO`};await yf(Pl(Dl,"subscriptions",e.uid),$),s($)};return o.jsx(Gj.Provider,{value:{user:e,loading:a,subscription:r,currentEmployee:u,login:f,loginWithGoogle:g,register:y,logout:v,subscribe:D,setEmployeeSession:T,hasEmployeePermission:E,employeeLogout:j,resendVerificationEmail:_,isEmailVerified:C},children:!a&&t})};var Hs=function(){return Hs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hs.apply(this,arguments)};function Dc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function LV(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{f(r.next(g))}catch(y){l(y)}}function d(g){try{f(r.throw(g))}catch(y){l(y)}}function f(g){g.done?a(g.value):s(g.value).then(u,d)}f((r=r.apply(t,e||[])).next())})}function VV(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}const FV=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class mv extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class UV extends mv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class vE extends mv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bE extends mv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var N0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(N0||(N0={}));class $V{constructor(e,{headers:n={},customFetch:r,region:s=N0.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=FV(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return LV(this,arguments,void 0,function*(n,r={}){var s;let a,l;try{const{headers:u,method:d,body:f,signal:g,timeout:y}=r;let v={},{region:T}=r;T||(T=this.region);const j=new URL(`${this.url}/${n}`);T&&T!=="any"&&(v["x-region"]=T,j.searchParams.set("forceFunctionRegion",T));let E;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",E=f):typeof f=="string"?(v["Content-Type"]="text/plain",E=f):typeof FormData<"u"&&f instanceof FormData?E=f:(v["Content-Type"]="application/json",E=JSON.stringify(f)):E=f;let _=g;y&&(l=new AbortController,a=setTimeout(()=>l.abort(),y),g?(_=l.signal,g.addEventListener("abort",()=>l.abort())):_=l.signal);const C=yield this.fetch(j.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),u),body:E,signal:_}).catch(I=>{throw new UV(I)}),D=C.headers.get("x-relay-error");if(D&&D==="true")throw new vE(C);if(!C.ok)throw new bE(C);let k=((s=C.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),O;return k==="application/json"?O=yield C.json():k==="application/octet-stream"||k==="application/pdf"?O=yield C.blob():k==="text/event-stream"?O=C:k==="multipart/form-data"?O=yield C.formData():O=yield C.text(),{data:O,error:null,response:C}}catch(u){return{data:null,error:u,response:u instanceof bE||u instanceof vE?u.context:void 0}}finally{a&&clearTimeout(a)}})}}var BV=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},zV=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,u=null,d=null,f=a.status,g=a.statusText;if(a.ok){var y,v;if(n.method!=="HEAD"){var T;const C=await a.text();C===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((T=n.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?u=C:u=JSON.parse(C))}const E=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),_=(v=a.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");E&&_&&_.length>1&&(d=parseInt(_[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var j;const E=await a.text();try{l=JSON.parse(E),Array.isArray(l)&&a.status===404&&(u=[],l=null,f=200,g="OK")}catch{a.status===404&&E===""?(f=204,g="No Content"):l={message:E}}if(l&&n.isMaybeSingle&&(!(l==null||(j=l.details)===null||j===void 0)&&j.includes("0 rows"))&&(l=null,f=200,g="OK"),l&&n.shouldThrowOnError)throw new BV(l)}return{error:l,data:u,count:d,status:f,statusText:g}});return this.shouldThrowOnError||(s=s.catch(a=>{var l;let u="";const d=a?.cause;if(d){var f,g,y,v;const j=(f=d?.message)!==null&&f!==void 0?f:"",E=(g=d?.code)!==null&&g!==void 0?g:"";u=`${(y=a?.name)!==null&&y!==void 0?y:"FetchError"}: ${a?.message}`,u+=`

Caused by: ${(v=d?.name)!==null&&v!==void 0?v:"Error"}: ${j}`,E&&(u+=` (${E})`),d?.stack&&(u+=`
${d.stack}`)}else{var T;u=(T=a?.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(l=a?.name)!==null&&l!==void 0?l:"FetchError"}: ${a?.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},qV=class extends zV{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var l;const u=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const wE=new RegExp("[,()]");var Ql=class extends qV{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&wE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&wE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},WV=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),r&&this.headers.append("Prefer",`count=${r}`),new Ql({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ql({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ql({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Ql({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ql({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},HV=class Yj{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new WV(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Yj(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){var l;let u;const d=new URL(`${this.url}/rpc/${e}`);let f;r||s?(u=r?"HEAD":"GET",Object.entries(n).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{d.searchParams.append(y,v)})):(u="POST",f=n);const g=new Headers(this.headers);return a&&g.set("Prefer",`count=${a}`),new Ql({method:u,url:d,headers:g,schema:this.schemaName,body:f,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class KV{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const GV="2.89.0",YV=`realtime-js/${GV}`,Qj="1.0.0",QV="2.0.0",_E=Qj,T0=1e4,JV=1e3,XV=100;var Ta;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ta||(Ta={}));var on;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(on||(on={}));var gs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gs||(gs={}));var S0;(function(t){t.websocket="websocket"})(S0||(S0={}));var Co;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Co||(Co={}));class ZV{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,r){var s,a;const l=e.topic,u=(s=e.ref)!==null&&s!==void 0?s:"",d=(a=e.join_ref)!==null&&a!==void 0?a:"",f=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+f.length+y.length,T=new ArrayBuffer(this.HEADER_LENGTH+v);let j=new DataView(T),E=0;j.setUint8(E++,this.KINDS.userBroadcastPush),j.setUint8(E++,d.length),j.setUint8(E++,u.length),j.setUint8(E++,l.length),j.setUint8(E++,f.length),j.setUint8(E++,y.length),j.setUint8(E++,n),Array.from(d,C=>j.setUint8(E++,C.charCodeAt(0))),Array.from(u,C=>j.setUint8(E++,C.charCodeAt(0))),Array.from(l,C=>j.setUint8(E++,C.charCodeAt(0))),Array.from(f,C=>j.setUint8(E++,C.charCodeAt(0))),Array.from(y,C=>j.setUint8(E++,C.charCodeAt(0)));var _=new Uint8Array(T.byteLength+r.byteLength);return _.set(new Uint8Array(T),0),_.set(new Uint8Array(r),T.byteLength),_.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,a,l,u,d]=r;return n({join_ref:s,ref:a,topic:l,event:u,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const f=r.decode(e.slice(d,d+s));d=d+s;const g=r.decode(e.slice(d,d+a));d=d+a;const y=r.decode(e.slice(d,d+l));d=d+l;const v=e.slice(d,e.byteLength),T=u===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,j={type:this.BROADCAST_EVENT,event:g,payload:T};return l>0&&(j.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Jj{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var wt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(wt||(wt={}));const EE=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=e9(l,t,e,s),a),{}):{}},e9=(t,e,n,r)=>{const s=e.find(u=>u.name===t),a=s?.type,l=n[t];return a&&!r.includes(a)?Xj(a,l):j0(l)},Xj=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return s9(e,n)}switch(t){case wt.bool:return t9(e);case wt.float4:case wt.float8:case wt.int2:case wt.int4:case wt.int8:case wt.numeric:case wt.oid:return n9(e);case wt.json:case wt.jsonb:return r9(e);case wt.timestamp:return i9(e);case wt.abstime:case wt.date:case wt.daterange:case wt.int4range:case wt.int8range:case wt.money:case wt.reltime:case wt.text:case wt.time:case wt.timestamptz:case wt.timetz:case wt.tsrange:case wt.tstzrange:return j0(e);default:return j0(e)}},j0=t=>t,t9=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},n9=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},r9=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},s9=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>Xj(e,u))}return t},i9=t=>typeof t=="string"?t.replace(" ","T"):t,Zj=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class oy{constructor(e,n,r={},s=T0){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var NE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(NE||(NE={}));class ed{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ed.syncState(this.state,s,a,l),this.pendingDiffs.forEach(d=>{this.state=ed.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ed.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),l=this.transformState(n),u={},d={};return this.map(a,(f,g)=>{l[f]||(d[f]=g)}),this.map(l,(f,g)=>{const y=a[f];if(y){const v=g.map(_=>_.presence_ref),T=y.map(_=>_.presence_ref),j=g.filter(_=>T.indexOf(_.presence_ref)<0),E=y.filter(_=>v.indexOf(_.presence_ref)<0);j.length>0&&(u[f]=j),E.length>0&&(d[f]=E)}else u[f]=g}),this.syncDiff(a,{joins:u,leaves:d},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(u,d)=>{var f;const g=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),g.length>0){const y=e[u].map(T=>T.presence_ref),v=g.filter(T=>y.indexOf(T.presence_ref)<0);e[u].unshift(...v)}r(u,g,d)}),this.map(l,(u,d)=>{let f=e[u];if(!f)return;const g=d.map(y=>y.presence_ref);f=f.filter(y=>g.indexOf(y.presence_ref)<0),e[u]=f,s(u,f,d),f.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var TE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(TE||(TE={}));var td;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(td||(td={}));var ji;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ji||(ji={}));class Zl{constructor(e,n={config:{}},r){var s,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=on.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new oy(this,gs.join,this.params,this.timeout),this.rejoinTimer=new Jj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=on.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=on.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gs.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new ed(this),this.broadcastEndpointURL=Zj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==on.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&s!==void 0?s:[],g=!!this.bindings[td.PRESENCE]&&this.bindings[td.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,y={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(T=>e?.(ji.CHANNEL_ERROR,T)),this._onClose(()=>e?.(ji.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e?.(ji.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,_=(j=E?.length)!==null&&j!==void 0?j:0,C=[];for(let D=0;D<_;D++){const k=E[D],{filter:{event:O,schema:I,table:$,filter:P}}=k,A=T&&T[D];if(A&&A.event===O&&Zl.isFilterValueEqual(A.schema,I)&&Zl.isFilterValueEqual(A.table,$)&&Zl.isFilterValueEqual(A.filter,P))C.push(Object.assign(Object.assign({},k),{id:A.id}));else{this.unsubscribe(),this.state=on.errored,e?.(ji.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(ji.SUBSCRIBED);return}}).receive("error",T=>{this.state=on.errored,e?.(ji.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e?.(ji.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===on.joined&&e===td.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const f=await u.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=on.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new oy(this,gs.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=on.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new oy(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>XV){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:g}=gs;if(r&&[u,d,f,g].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(T=>{var j,E,_;return((j=T.filter)===null||j===void 0?void 0:j.event)==="*"||((_=(E=T.filter)===null||E===void 0?void 0:E.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===l}).map(T=>T.callback(v,r)):(a=this.bindings[l])===null||a===void 0||a.filter(T=>{var j,E,_,C,D,k;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in T){const O=T.id,I=(j=T.filter)===null||j===void 0?void 0:j.event;return O&&((E=n.ids)===null||E===void 0?void 0:E.includes(O))&&(I==="*"||I?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const O=(D=(C=T?.filter)===null||C===void 0?void 0:C.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return O==="*"||O===((k=n?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===l}).map(T=>{if(typeof v=="object"&&"ids"in v){const j=v.data,{schema:E,table:_,commit_timestamp:C,type:D,errors:k}=j;v=Object.assign(Object.assign({},{schema:E,table:_,commit_timestamp:C,eventType:D,new:{},old:{},errors:k}),this._getPayloadRecords(j))}T.callback(v,r)})}_isClosed(){return this.state===on.closed}_isJoined(){return this.state===on.joined}_isJoining(){return this.state===on.joining}_isLeaving(){return this.state===on.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Zl.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gs.close,{},e)}_onError(e){this._on(gs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=on.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=EE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=EE(e.columns,e.old_record)),n}}const ly=()=>{},xf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},a9=[1e3,2e3,5e3,1e4],o9=1e4,l9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class c9{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=T0,this.transport=null,this.heartbeatIntervalMs=xf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ly,this.ref=0,this.reconnectTimer=null,this.vsn=_E,this.logger=ly,this.conn=null,this.sendBuffer=[],this.serializer=new ZV,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${S0.websocket}`,this.httpEndpoint=Zj(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=KV.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ta.connecting:return Co.Connecting;case Ta.open:return Co.Open;case Ta.closing:return Co.Closing;default:return Co.Closed}}isConnected(){return this.connectionState()===Co.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new Zl(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:s,ref:a}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(JV,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},xf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:l}=n,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${r} ${s} ${u}`.trim(),a),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ta.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ta.open||this.conn.readyState===Ta.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([l9],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:YV};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(gs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Jj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,a,l,u,d,f,g,y,v,T;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:T0,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:xf.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:ly,this.vsn=(d=e?.vsn)!==null&&d!==void 0?d:_E,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(j=>a9[j-1]||o9),this.vsn){case Qj:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((j,E)=>E(JSON.stringify(j))),this.decode=(y=e?.decode)!==null&&y!==void 0?y:((j,E)=>E(JSON.parse(j)));break;case QV:this.encode=(v=e?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(T=e?.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var xd=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function u9(t,e,n){const r=new URL(e,t);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function d9(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function h9(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:l}){const u=u9(t.baseUrl,r,s),d=await d9(t.auth),f=await e(u,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...d,...l},body:a?JSON.stringify(a):void 0}),g=await f.text(),y=(f.headers.get("content-type")||"").includes("application/json"),v=y&&g?JSON.parse(g):g;if(!f.ok){const T=y?v:void 0,j=T?.error;throw new xd(j?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:j?.type,icebergCode:j?.code,details:T})}return{status:f.status,headers:f.headers,data:v}}}}function vf(t){return t.join("")}var f9=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:vf(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vf(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vf(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vf(t.namespace)}`}),!0}catch(e){if(e instanceof xd&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof xd&&n.status===409)return;throw n}}};function Ol(t){return t.join("")}var m9=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof xd&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof xd&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},p9=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=h9({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new f9(this.client,e),this.tableOps=new m9(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},rp=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Dt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var g9=class extends rp{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},k0=class extends rp{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const pv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),y9=()=>Response,C0=t=>{if(Array.isArray(t))return t.map(n=>C0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=C0(r)}),e},x9=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},v9=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(t)}function b9(t,e){if(vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w9(t){var e=b9(t,"string");return vd(e)=="symbol"?e:e+""}function _9(t,e,n){return(e=w9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Be(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SE(Object(n),!0).forEach(function(r){_9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const cy=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},E9=async(t,e,n)=>{t instanceof await y9()&&!n?.noResolveJson?t.json().then(r=>{const s=t.status||500,a=r?.statusCode||s+"";e(new g9(cy(r),s,a))}).catch(r=>{e(new k0(cy(r),r))}):e(new k0(cy(t),t))},N9=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||!r?s:(x9(r)?(s.headers=Be({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,e?.duplex&&(s.duplex=e.duplex),Be(Be({},s),n))};async function Hd(t,e,n,r,s,a){return new Promise((l,u)=>{t(n,N9(e,r,s,a)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>E9(d,u,r))})}async function bd(t,e,n,r){return Hd(t,"GET",e,n,r)}async function ps(t,e,n,r,s){return Hd(t,"POST",e,r,s,n)}async function I0(t,e,n,r,s){return Hd(t,"PUT",e,r,s,n)}async function T9(t,e,n,r){return Hd(t,"HEAD",e,Be(Be({},n),{},{noResolveJson:!0}),r)}async function gv(t,e,n,r,s){return Hd(t,"DELETE",e,r,s,n)}var S9=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Dt(e))return{data:null,error:e};throw e}}};let ek;ek=Symbol.toStringTag;var j9=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[ek]="BlobDownloadBuilder",this.promise=null}asStream(){return new S9(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Dt(e))return{data:null,error:e};throw e}}};const k9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var C9=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=pv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let a;const l=Be(Be({},jE),r);let u=Be(Be({},s.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",s.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),d&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=s.toBase64(s.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),r?.headers&&(u=Be(Be({},u),r.headers));const f=s._removeEmptyFolders(e),g=s._getFinalPath(f),y=await(t=="PUT"?I0:ps)(s.fetch,`${s.url}/object/${g}`,a,Be({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Dt(a))return{data:null,error:a};throw a}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const a=s._removeEmptyFolders(t),l=s._getFinalPath(a),u=new URL(s.url+`/object/upload/sign/${l}`);u.searchParams.set("token",e);try{let d;const f=Be({upsert:jE.upsert},r),g=Be(Be({},s.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType),{data:{path:a,fullPath:(await I0(s.fetch,u.toString(),d,{headers:g})).Key},error:null}}catch(d){if(s.shouldThrowOnError)throw d;if(Dt(d))return{data:null,error:d};throw d}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=Be({},n.headers);e?.upsert&&(s["x-upsert"]="true");const a=await ps(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(n.url+a.url),u=l.searchParams.get("token");if(!u)throw new rp("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await ps(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await ps(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),a=await ps(r.fetch,`${r.url}/object/sign/${s}`,Be({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n?.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${r.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await ps(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Be(Be({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),s=r?`?${r}`:"",a=this._getFinalPath(t),l=()=>bd(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new j9(l,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:C0(await bd(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await T9(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dt(r)&&r instanceof k0){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}async remove(t){var e=this;try{return{data:await gv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=Be(Be(Be({},k9),e),{},{prefix:t||""});return{data:await ps(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=Be({},t);return{data:await ps(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const tk="2.89.0",nk={"X-Client-Info":`storage-js/${tk}`};var I9=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Be(Be({},nk),e),this.fetch=pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await bd(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await bd(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await ps(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await I0(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await ps(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await gv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},A9=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},nk),e),this.fetch=pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ps(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await bd(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await gv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!v9(t))throw new rp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new p9({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const l=s[a];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(s,u),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}};const yv={"X-Client-Info":`storage-js/${tk}`,"Content-Type":"application/json"};var rk=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Sr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var uy=class extends rk{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},R9=class extends rk{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const xv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),P9=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},kE=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),D9=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const l=a?.statusCode||a?.code||r+"";e(new uy(kE(a),r,l))}).catch(()=>{const a=r+"";e(new uy(s.statusText||`HTTP ${r} error`,r,a))});else{const a=r+"";e(new uy(s.statusText||`HTTP ${r} error`,r,a))}}else e(new R9(kE(t),t))},O9=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return r?(P9(r)?(s.headers=Be({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,Be(Be({},s),n)):s};async function M9(t,e,n,r,s,a){return new Promise((l,u)=>{t(n,O9(e,r,s,a)).then(d=>{if(!d.ok)throw d;if(r?.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>D9(d,u,r))})}async function jr(t,e,n,r,s){return M9(t,"POST",e,r,s,n)}var L9=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},yv),e),this.fetch=xv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await jr(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await jr(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Sr(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await jr(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await jr(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Sr(r))return{data:null,error:r};throw r}}},V9=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},yv),e),this.fetch=xv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await jr(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await jr(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await jr(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await jr(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await jr(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}},F9=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},yv),e),this.fetch=xv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await jr(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await jr(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await jr(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await jr(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}}},U9=class extends F9{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new $9(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},$9=class extends L9{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new B9(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},B9=class extends V9{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},z9=class extends I9{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new C9(this.url,this.headers,t,this.fetch)}get vectors(){return new U9(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new A9(this.url+"/iceberg",this.headers,this.fetch)}};const sk="2.89.0",Jl=30*1e3,A0=3,dy=A0*Jl,q9="http://localhost:9999",W9="supabase.auth.token",H9={"X-Client-Info":`gotrue-js/${sk}`},R0="X-Supabase-Api-Version",ik={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,G9=600*1e3;class wd extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Y9 extends wd{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Q9(t){return Re(t)&&t.name==="AuthApiError"}class Io extends wd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ki extends wd{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Nr extends Ki{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function J9(t){return Re(t)&&t.name==="AuthSessionMissingError"}class Ml extends Ki{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bf extends Ki{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wf extends Ki{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X9(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class CE extends Ki{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Z9 extends Ki{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class P0 extends Ki{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function hy(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class IE extends Ki{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class D0 extends Ki{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Em="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),AE=` 	
\r=`.split(""),eF=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<AE.length;e+=1)t[AE[e].charCodeAt(0)]=-2;for(let e=0;e<Em.length;e+=1)t[Em[e].charCodeAt(0)]=e;return t})();function RE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Em[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Em[r]),e.queuedBits-=6}}function ak(t,e,n){const r=eF[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function PE(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{rF(l,r,n)};for(let l=0;l<t.length;l+=1)ak(t.charCodeAt(l),s,a);return e.join("")}function tF(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nF(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}tF(r,e)}}function rF(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function uc(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ak(t.charCodeAt(s),n,r);return new Uint8Array(e)}function sF(t){const e=[];return nF(t,n=>e.push(n)),new Uint8Array(e)}function Do(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>RE(s,n,r)),RE(null,n,r),e.join("")}function iF(t){return Math.round(Date.now()/1e3)+t}function aF(){return Symbol("auth-callback")}const Tn=()=>typeof window<"u"&&typeof document<"u",_o={tested:!1,writable:!1},ok=()=>{if(!Tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_o.tested)return _o.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_o.tested=!0,_o.writable=!0}catch{_o.tested=!0,_o.writable=!1}return _o.writable};function oF(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const lk=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lF=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Xl=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Eo=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Nn=async(t,e)=>{await t.removeItem(e)};class sp{constructor(){this.promise=new sp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}sp.promiseConstructor=Promise;function fy(t){const e=t.split(".");if(e.length!==3)throw new D0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!K9.test(e[r]))throw new D0("JWT not in base64url format");return{header:JSON.parse(PE(e[0])),payload:JSON.parse(PE(e[1])),signature:uc(e[2]),raw:{header:e[0],payload:e[1]}}}async function cF(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function uF(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){s(l);return}}})()})}function dF(t){return("0"+t.toString(16)).substr(-2)}function hF(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,dF).join("")}async function fF(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function mF(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await fF(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ll(t,e,n=!1){const r=hF();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Xl(t,`${e}-code-verifier`,s);const a=await mF(r);return[a,r===a?"plain":"s256"]}const pF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gF(t){const e=t.headers.get(R0);if(!e||!e.match(pF))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yF(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function xF(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vl(t){if(!vF.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function my(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bF(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function DE(t){return JSON.parse(JSON.stringify(t))}const jo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wF=[502,503,504];async function OE(t){var e;if(!lF(t))throw new P0(jo(t),0);if(wF.includes(t.status))throw new P0(jo(t),t.status);let n;try{n=await t.json()}catch(a){throw new Io(jo(a),a)}let r;const s=gF(t);if(s&&s.getTime()>=ik["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new IE(jo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Nr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new IE(jo(n),t.status,n.weak_password.reasons);throw new Y9(jo(n),t.status||500,r)}const _F=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function $e(t,e,n,r){var s;const a=Object.assign({},r?.headers);a[R0]||(a[R0]=ik["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await EF(t,e,n+u,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function EF(t,e,n,r,s,a){const l=_F(e,r,s,a);let u;try{u=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new P0(jo(d),0)}if(u.ok||await OE(u),r?.noResolveJson)return u;try{return await u.json()}catch(d){await OE(d)}}function fs(t){var e;let n=null;SF(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=iF(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ME(t){const e=fs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ca(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function NF(t){return{data:t,error:null}}function TF(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,l=Dc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function LE(t){return t}function SF(t){return t.access_token&&t.refresh_token&&t.expires_in}const py=["global","local","others"];class jF{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=lk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=py[0]){if(py.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${py.join(", ")}`);try{return await $e(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await $e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ca})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Dc(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await $e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:TF,redirectTo:n?.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ca})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},g=await $e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:LE});if(g.error)throw g.error;const y=await g.json(),v=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,T=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return T.length>0&&(T.forEach(j=>{const E=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);f[`${_}Page`]=E}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(Re(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Vl(e);try{return await $e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ca})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Vl(e);try{return await $e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ca})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Vl(e);try{return await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ca})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Vl(e.userId);try{const{data:n,error:r}=await $e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Vl(e.userId),Vl(e.id);try{return{data:await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,a,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},g=await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:LE});if(g.error)throw g.error;const y=await g.json(),v=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,T=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return T.length>0&&(T.forEach(j=>{const E=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);f[`${_}Page`]=E}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(Re(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await $e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await $e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function VE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Fl={debug:!!(globalThis&&ok()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ck extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class kF extends ck{}async function CF(t,e,n){Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new kF(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fl.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function IF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function uk(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function AF(t){return parseInt(t,16)}function RF(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function PF(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:f,scheme:g,uri:y,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=uk(t.address),j=g?`${g}://${r}`:r,E=t.statement?`${t.statement}
`:"",_=`${j} wants you to sign in with your Ethereum account:
${T}

${E}`;let C=`URI: ${y}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(C+=`
Expiration Time: ${s.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),d&&(C+=`
Request ID: ${d}`),f){let D=`
Resources:`;for(const k of f){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);D+=`
- ${k}`}C+=D}return`${_}
${C}`}class Zt extends Error{constructor({message:e,code:n,cause:r,name:s}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Nm extends Zt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function DF({error:t,options:e}){var n,r,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Zt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Zt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Zt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Zt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Zt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Zt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Zt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Zt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(dk(l)){if(a.rp.id!==l)return new Zt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Zt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Zt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function OF({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Zt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Zt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(dk(r)){if(n.rpId!==r)return new Zt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Zt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class MF{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const LF=new MF;function VF(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Dc(t,["challenge","user","excludeCredentials"]),a=uc(e).buffer,l=Object.assign(Object.assign({},n),{id:uc(n.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:uc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function FF(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Dc(t,["challenge","allowCredentials"]),s=uc(e).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:uc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function UF(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Do(new Uint8Array(t.response.attestationObject)),clientDataJSON:Do(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $F(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Do(new Uint8Array(s.authenticatorData)),clientDataJSON:Do(new Uint8Array(s.clientDataJSON)),signature:Do(new Uint8Array(s.signature)),userHandle:s.userHandle?Do(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dk(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function FE(){var t,e;return!!(Tn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function BF(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nm("Browser returned unexpected credential type",e)}:{data:null,error:new Nm("Empty credential response",e)}}catch(e){return{data:null,error:DF({error:e,options:t})}}}async function zF(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nm("Browser returned unexpected credential type",e)}:{data:null,error:new Nm("Empty credential response",e)}}catch(e){return{data:null,error:OF({error:e,options:t})}}}const qF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},WF={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Tm(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(n(l))r[a]=l;else if(e(l)){const u=r[a];e(u)?r[a]=Tm(u,l):r[a]=Tm(l)}else r[a]=l}return r}function HF(t,e){return Tm(qF,t,e||{})}function KF(t,e){return Tm(WF,t,e||{})}class GF{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:u};const d=s??LF.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=HF(l.webauthn.credential_options.publicKey,a?.create),{data:g,error:y}=await BF({publicKey:f,signal:d});return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const f=KF(l.webauthn.credential_options.publicKey,a?.request),{data:g,error:y}=await zF(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:d}));return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(l){return Re(l)?{data:null,error:l}:{data:null,error:new Io("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new wd("rpId is required for WebAuthn authentication")};try{if(!FE())return{data:null,error:new Io("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(l){return Re(l)?{data:null,error:l}:{data:null,error:new Io("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new wd("rpId is required for WebAuthn registration")};try{if(!FE())return{data:null,error:new Io("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:u};const{data:d,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(l){return Re(l)?{data:null,error:l}:{data:null,error:new Io("Unexpected error in register",l)}}}}IF();const YF={url:q9,storageKey:W9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function UE(t,e,n){return await n()}const Ul={};class _d{get jwks(){var e,n;return(n=(e=Ul[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ul[this.storageKey]=Object.assign(Object.assign({},Ul[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ul[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ul[this.storageKey]=Object.assign(Object.assign({},Ul[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},YF),e);if(this.storageKey=a.storageKey,this.instanceID=(n=_d.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,_d.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Tn()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new jF({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=lk(a.fetch),this.lock=a.lock||UE,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&Tn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=CF:this.lock=UE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new GF(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:ok()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=VE(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=VE(this.memoryStorage)),Tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${sk}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Tn()&&(n=oF(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Tn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),X9(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?this._returnResult({error:n}):this._returnResult({error:new Io("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:fs}),{data:l,error:u}=a;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:g,password:y,options:v}=e;let T=null,j=null;this.flowType==="pkce"&&([T,j]=await Ll(this.storage,this.storageKey)),a=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:y,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:T,code_challenge_method:j},xform:fs})}else if("phone"in e){const{phone:g,password:y,options:v}=e;a=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(s=v?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:fs})}else throw new bf("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return await Nn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(await Nn(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:u}=e;n=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ME})}else if("phone"in e){const{phone:a,password:l,options:u}=e;n=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ME})}else throw new bf("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new Ml;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,a,l,u,d,f,g,y,v;let T,j;if("message"in e)T=e.message,j=e.signature;else{const{chain:E,wallet:_,statement:C,options:D}=e;let k;if(Tn())if(typeof _=="object")k=_;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")k=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=_}const O=new URL((n=D?.url)!==null&&n!==void 0?n:window.location.href),I=await k.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=uk(I[0]);let P=(r=D?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const L=await k.request({method:"eth_chainId"});P=AF(L)}const A={domain:O.host,address:$,statement:C,uri:O.href,version:"1",chainId:P,nonce:(s=D?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=D?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=D?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=D?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=D?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=D?.signInWithEthereum)===null||g===void 0?void 0:g.resources};T=PF(A),j=await k.request({method:"personal_sign",params:[RF(T),$]})}try{const{data:E,error:_}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:j},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:fs});if(_)throw _;if(!E||!E.session||!E.user){const C=new Ml;return this._returnResult({data:{user:null,session:null},error:C})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:_})}catch(E){if(Re(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(e){var n,r,s,a,l,u,d,f,g,y,v,T;let j,E;if("message"in e)j=e.message,E=e.signature;else{const{chain:_,wallet:C,statement:D,options:k}=e;let O;if(Tn())if(typeof C=="object")O=C;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))O=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=C}const I=new URL((n=k?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const $=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),D?{statement:D}:null));let P;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")P=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)P=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)j=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),E=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${I.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(s=(r=k?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=k?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((l=k?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((u=k?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((f=k?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((y=(g=k?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...k.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const $=await O.signMessage(new TextEncoder().encode(j),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=$}}try{const{data:_,error:C}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Do(E)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:fs});if(C)throw C;if(!_||!_.session||!_.user){const D=new Ml;return this._returnResult({data:{user:null,session:null},error:D})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:C})}catch(_){if(Re(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(e){const n=await Eo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Z9;const{data:a,error:l}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:fs});if(await Nn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const u=new Ml;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(await Nn(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:l}=e,u=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:fs}),{data:d,error:f}=u;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const g=new Ml;return this._returnResult({data:{user:null,session:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,a,l;try{if("email"in e){const{email:u,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Ll(this.storage,this.storageKey));const{error:y}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d?.data)!==null&&n!==void 0?n:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:g}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d?.data)!==null&&s!==void 0?s:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new bf("You must provide either an email or phone number.")}catch(u){if(await Nn(this.storage,`${this.storageKey}-code-verifier`),Re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await $e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:fs});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(s){if(Re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,a,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ll(this.storage,this.storageKey));const f=await $e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:NF});return!((a=f.data)===null||a===void 0)&&a.url&&Tn()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(u){if(await Nn(this.storage,`${this.storageKey}-code-verifier`),Re(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Nr;const{error:s}=await $e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Re(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:l}=await $e(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:l,error:u}=await $e(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:u})}throw new bf("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Eo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<dy:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Eo(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=my()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=bF(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ca}):await this._useSession(async n=>{var r,s,a;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nr}:await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Ca})})}catch(n){if(Re(n))return J9(n)&&(await this._removeSession(),await Nn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Nr;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Ll(this.storage,this.storageKey));const{data:f,error:g}=await $e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Ca});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Nn(this.storage,`${this.storageKey}-code-verifier`),Re(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nr;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:l}=fy(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Nr;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Tn())throw new wf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new CE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new CE("No code detected.");const{data:D,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=e;if(!a||!u||!l||!f)throw new wf("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(u);let v=g+y;d&&(v=parseInt(d));const T=v-g;T*1e3<=Jl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${y}s`);const j=v-y;g-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,v,g):g-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,v,g);const{data:E,error:_}=await this._getUser(a);if(_)throw _;const C={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:y,expires_at:v,refresh_token:l,token_type:f,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(r){if(Re(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Eo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(Q9(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Nn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=aF(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ll(this.storage,this.storageKey,!0));try{return await $e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Nn(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var l,u,d,f,g;const{data:y,error:v}=a;if(v)throw v;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await $e(this.fetch,"GET",T,{headers:this.headers,jwt:(g=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Tn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(Re(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:l,provider:u,token:d,access_token:f,nonce:g}=e,y=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:fs}),{data:v,error:T}=y;return T?this._returnResult({data:{user:null,session:null},error:T}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Ml}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:T}))}catch(s){if(await Nn(this.storage,`${this.storageKey}-code-verifier`),Re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)throw l;return await $e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await uF(async s=>(s>0&&await cF(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await $e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fs})),(s,a)=>{const l=200*Math.pow(2,s);return a&&hy(a)&&Date.now()+l-r<Jl})}catch(r){if(this._debug(n,"error",r),Re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Eo(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Eo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Xl(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l?.user)!==null&&e!==void 0?e:my()}else if(s&&!s.user&&!s.user){const l=await Eo(this.storage,this.storageKey+"-user");l&&l?.user?(s.user=l.user,await Nn(this.storage,this.storageKey+"-user"),await Xl(this.storage,this.storageKey,s)):s.user=my()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<dy;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${dy}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),hy(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&l?.user?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sp;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Nr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),Re(a)){const l={data:null,error:a};return hy(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Nn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Xl(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=DE(s);await Xl(this.storage,this.storageKey,a)}else{const s=DE(n);await Xl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nn(this.storage,this.storageKey),await Nn(this.storage,this.storageKey+"-code-verifier"),await Nn(this.storage,this.storageKey+"-user"),this.userStorage&&await Nn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Jl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Jl}ms, refresh threshold is ${A0} ticks`),s<=A0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ck)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await Ll(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await $e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await $e(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&d.type==="totp"&&(!((s=d?.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?UF(e.webauthn.credential_response):$F(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:VF(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:FF(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n?.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=fy(r.access_token);let l=null;a.aal&&(l=a.aal);let u=l;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await $e(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Nr})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Nr});const l=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Tn()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Nr});const l=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Tn()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await $e(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Nr})})}catch(e){if(Re(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await $e(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nr})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+G9>s)return r;const{data:a,error:l}=await $e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:T,error:j}=await this.getSession();if(j||!T.session)return this._returnResult({data:null,error:j});r=T.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:d}}=fy(r);n?.allowExpired||yF(a.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!f){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:a,header:s,signature:l},error:null}}const g=xF(s.alg),y=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,l,sF(`${u}.${d}`)))throw new D0("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}}_d.nextInstanceID={};const QF=_d,JF="2.89.0";let qu="";typeof Deno<"u"?qu="deno":typeof document<"u"?qu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qu="react-native":qu="node";const XF={"X-Client-Info":`supabase-js-${qu}/${JF}`},ZF={headers:XF},e8={schema:"public"},t8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n8={};function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(t)}function r8(t,e){if(Ed(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s8(t){var e=r8(t,"string");return Ed(e)=="symbol"?e:e+""}function i8(t,e,n){return(e=s8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$E(Object(n),!0).forEach(function(r){i8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const a8=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),o8=()=>Headers,l8=(t,e,n)=>{const r=a8(n),s=o8();return async(a,l)=>{var u;const d=(u=await e())!==null&&u!==void 0?u:t;let f=new s(l?.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(a,Ut(Ut({},l),{},{headers:f}))}};function c8(t){return t.endsWith("/")?t:t+"/"}function u8(t,e){var n,r;const{db:s,auth:a,realtime:l,global:u}=t,{db:d,auth:f,realtime:g,global:y}=e,v={db:Ut(Ut({},d),s),auth:Ut(Ut({},f),a),realtime:Ut(Ut({},g),l),storage:{},global:Ut(Ut(Ut({},y),u),{},{headers:Ut(Ut({},(n=y?.headers)!==null&&n!==void 0?n:{}),(r=u?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function d8(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(c8(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var h8=class extends QF{constructor(t){super(t)}},f8=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const a=d8(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:e8,realtime:n8,auth:Ut(Ut({},t8),{},{storageKey:l}),global:ZF},d=u8(n??{},u);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=d.auth)!==null&&f!==void 0?f:{},this.headers,d.global.fetch)}this.fetch=l8(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Ut({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new HV(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new z9(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new $V(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:l,lock:u,debug:d,throwOnError:f},g,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new h8({url:this.authUrl.href,headers:Ut(Ut({},v),g),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:l,lock:u,debug:d,throwOnError:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new c9(this.realtimeUrl.href,Ut(Ut({},t),{},{params:Ut(Ut({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const m8=(t,e,n)=>new f8(t,e,n);function p8(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}p8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const g8="https://sjkmtixbwzyariqhaasl.supabase.co",y8="sb_publishable_5yRDnLS-JjfhwenmCLFPzA_Wasb6UmF",xt=m8(g8,y8),hk=N.createContext(void 0),Yn="demo-company";function x8(t,e,n,r,s,a,l){const u=[],d=new Date(r),f=new Date(s),g=new Date;let y=1;l==="quarterly"&&(y=3),l==="yearly"&&(y=12);let v=new Date(d);for(;v<=f;){const T=v.toISOString().split("T")[0],j=new Date(T)<g;u.push({contractId:t,tenantName:e,unitNo:n,dueDate:T,amount:a,status:j?"overdue":"due"}),v.setMonth(v.getMonth()+y)}return u}function v8(t){return{id:t.id,companyId:t.company_id,name:t.name,city:t.city,address:t.address,type:t.type,description:t.description,latitude:t.latitude,longitude:t.longitude,notes:t.notes,images:t.images||[],createdAt:t.created_at}}function b8(t){return{id:t.id,companyId:t.company_id,propertyId:t.property_id,propertyName:t.property_name,unitNo:t.unit_no,type:t.type,floor:t.floor,bedrooms:t.bedrooms,bathrooms:t.bathrooms,areaSqm:t.area_sqm,description:t.description,rentAmount:t.rent_amount,status:t.status,images:t.images||[],createdAt:t.created_at}}function w8(t){return{id:t.id,companyId:t.company_id,fullName:t.full_name,nationalId:t.national_id,phone:t.phone,email:t.email,createdAt:t.created_at}}function _8(t){return{id:t.id,companyId:t.company_id,propertyId:t.property_id,propertyName:t.property_name,unitId:t.unit_id,unitNo:t.unit_no,tenantId:t.tenant_id,tenantName:t.tenant_name,startDate:t.start_date,endDate:t.end_date,rentAmount:t.rent_amount,paymentFrequency:t.payment_frequency,depositAmount:t.deposit_amount,notes:t.notes,status:t.status,createdAt:t.created_at}}function E8(t){return{id:t.id,companyId:t.company_id,contractId:t.contract_id,tenantName:t.tenant_name,unitNo:t.unit_no,dueDate:t.due_date,amount:t.amount,status:t.status,paidAt:t.paid_at,method:t.method,reference:t.reference,createdAt:t.created_at}}function N8(t){return{id:t.id,companyId:t.company_id,propertyId:t.property_id,propertyName:t.property_name,unitId:t.unit_id,unitNo:t.unit_no,title:t.title,description:t.description,priority:t.priority,status:t.status,cost:t.cost,requestedBy:t.requested_by,assignedTo:t.assigned_to,createdAt:t.created_at}}const T8=[{module:"properties",actions:["view","create","edit","delete"]},{module:"units",actions:["view","create","edit","delete"]},{module:"tenants",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view","create","edit","delete"]},{module:"payments",actions:["view","create","edit","delete"]},{module:"maintenance",actions:["view","create","edit","delete"]},{module:"reports",actions:["view"]},{module:"settings",actions:["view","edit"]},{module:"sales",actions:["view","create","edit","delete"]},{module:"employees",actions:["view","create","edit","delete"]},{module:"tasks",actions:["view","create","edit","delete"]}],S8=[{id:"emp-1",companyId:Yn,fullName:"  ",email:"admin@arkan.sa",password:"Admin@2024",phone:"0501234567",role:"admin",department:"",joinDate:"2023-01-01",status:"active",permissions:[...T8],isActive:!0,createdAt:"2023-01-01"}],j8=[],k8=[],$l={employees:"arkan_employees_data",tasks:"arkan_tasks_data",notifications:"arkan_notifications_data"};function gy(t,e){try{const n=localStorage.getItem(t);if(n)return JSON.parse(n)}catch(n){console.error(`Error loading ${t} from localStorage:`,n)}return e}function yy(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error(`Error saving ${t} to localStorage:`,n)}}function C8({children:t}){const[e,n]=N.useState([]),[r,s]=N.useState([]),[a,l]=N.useState([]),[u,d]=N.useState([]),[f,g]=N.useState([]),[y,v]=N.useState([]),[T,j]=N.useState(()=>gy($l.employees,S8)),[E,_]=N.useState(()=>gy($l.tasks,j8)),[C,D]=N.useState(()=>gy($l.notifications,k8)),[k,O]=N.useState(!0);N.useEffect(()=>{T.length>0&&yy($l.employees,T)},[T]),N.useEffect(()=>{yy($l.tasks,E)},[E]),N.useEffect(()=>{yy($l.notifications,C)},[C]);const I=N.useCallback(async()=>{O(!0);try{const{data:te}=await xt.from("properties").select("*").eq("company_id",Yn);te&&n(te.map(v8));const{data:ee}=await xt.from("units").select("*").eq("company_id",Yn);ee&&s(ee.map(b8));const{data:ge}=await xt.from("tenants").select("*").eq("company_id",Yn);ge&&l(ge.map(w8));const{data:Fe}=await xt.from("contracts").select("*").eq("company_id",Yn);Fe&&d(Fe.map(_8));const{data:lt}=await xt.from("payments").select("*").eq("company_id",Yn);lt&&g(lt.map(E8));const{data:At}=await xt.from("maintenance_requests").select("*").eq("company_id",Yn);At&&v(At.map(N8))}catch(te){console.error("Error fetching data:",te)}finally{O(!1)}},[]);N.useEffect(()=>{I()},[I]);const $=N.useCallback(()=>{const te=r.length,ee=r.filter(ht=>ht.status==="vacant").length,ge=r.filter(ht=>ht.status==="rented").length,Fe=r.filter(ht=>ht.status==="maintenance").length,lt=te>0?ge/te*100:0,rt=u.filter(ht=>ht.status==="active").reduce((ht,zt)=>zt.paymentFrequency==="monthly"?ht+zt.rentAmount:zt.paymentFrequency==="quarterly"?ht+zt.rentAmount/3:zt.paymentFrequency==="yearly"?ht+zt.rentAmount/12:ht,0),vt=f.filter(ht=>ht.status==="overdue"),qn=vt.reduce((ht,zt)=>ht+zt.amount,0),Bt=vt.length,Rn=new Date;Rn.setDate(Rn.getDate()+30);const Gi=u.filter(ht=>{const zt=new Date(ht.endDate);return ht.status==="active"&&zt<=Rn}).length;return{totalUnits:te,vacantUnits:ee,rentedUnits:ge,maintenanceUnits:Fe,occupancyRate:lt,expectedMonthlyIncome:rt,overdueAmount:qn,overdueCount:Bt,contractsExpiringSoon:Gi}},[r,u,f]),P=async te=>{const{error:ee}=await xt.from("properties").insert({company_id:Yn,name:te.name,city:te.city,address:te.address,type:te.type,description:te.description,notes:te.notes,images:te.images});ee||await I()},A=async(te,ee)=>{const ge={};ee.name&&(ge.name=ee.name),ee.city&&(ge.city=ee.city),ee.address&&(ge.address=ee.address),ee.type&&(ge.type=ee.type),ee.description!==void 0&&(ge.description=ee.description),ee.notes!==void 0&&(ge.notes=ee.notes),ee.images&&(ge.images=ee.images);const{error:Fe}=await xt.from("properties").update(ge).eq("id",te);Fe||await I()},L=async te=>{const{error:ee}=await xt.from("properties").delete().eq("id",te);ee||await I()},U=async te=>{const{error:ee}=await xt.from("units").insert({company_id:Yn,property_id:te.propertyId,property_name:te.propertyName,unit_no:te.unitNo,type:te.type,floor:te.floor,bedrooms:te.bedrooms,bathrooms:te.bathrooms,area_sqm:te.areaSqm,description:te.description,rent_amount:te.rentAmount,status:te.status||"vacant",images:te.images});ee||await I()},B=async(te,ee)=>{const ge={};ee.propertyId&&(ge.property_id=ee.propertyId),ee.propertyName&&(ge.property_name=ee.propertyName),ee.unitNo&&(ge.unit_no=ee.unitNo),ee.type&&(ge.type=ee.type),ee.floor!==void 0&&(ge.floor=ee.floor),ee.bedrooms!==void 0&&(ge.bedrooms=ee.bedrooms),ee.bathrooms!==void 0&&(ge.bathrooms=ee.bathrooms),ee.areaSqm!==void 0&&(ge.area_sqm=ee.areaSqm),ee.description!==void 0&&(ge.description=ee.description),ee.rentAmount!==void 0&&(ge.rent_amount=ee.rentAmount),ee.status&&(ge.status=ee.status),ee.images&&(ge.images=ee.images);const{error:Fe}=await xt.from("units").update(ge).eq("id",te);Fe||await I()},q=async te=>{const{error:ee}=await xt.from("units").delete().eq("id",te);ee||await I()},V=async te=>{const{error:ee}=await xt.from("tenants").insert({company_id:Yn,full_name:te.fullName,national_id:te.nationalId,phone:te.phone,email:te.email});ee||await I()},se=async(te,ee)=>{const ge={};ee.fullName&&(ge.full_name=ee.fullName),ee.nationalId!==void 0&&(ge.national_id=ee.nationalId),ee.phone&&(ge.phone=ee.phone),ee.email!==void 0&&(ge.email=ee.email);const{error:Fe}=await xt.from("tenants").update(ge).eq("id",te);Fe||await I()},Q=async te=>{const{error:ee}=await xt.from("tenants").delete().eq("id",te);ee||await I()},le=async te=>{const{data:ee,error:ge}=await xt.from("contracts").insert({company_id:Yn,property_id:te.propertyId,property_name:te.propertyName,unit_id:te.unitId,unit_no:te.unitNo,tenant_id:te.tenantId,tenant_name:te.tenantName,start_date:te.startDate,end_date:te.endDate,rent_amount:te.rentAmount,payment_frequency:te.paymentFrequency,deposit_amount:te.depositAmount,notes:te.notes,status:te.status||"active"}).select().single();if(!ge&&ee){const Fe=x8(ee.id,te.tenantName,te.unitNo,te.startDate,te.endDate,te.rentAmount,te.paymentFrequency);for(const lt of Fe)await xt.from("payments").insert({company_id:Yn,contract_id:lt.contractId,tenant_name:lt.tenantName,unit_no:lt.unitNo,due_date:lt.dueDate,amount:lt.amount,status:lt.status});await xt.from("units").update({status:"rented"}).eq("id",te.unitId),await I()}},me=async(te,ee)=>{const ge={};ee.status&&(ge.status=ee.status),ee.notes!==void 0&&(ge.notes=ee.notes),ee.rentAmount!==void 0&&(ge.rent_amount=ee.rentAmount);const{error:Fe}=await xt.from("contracts").update(ge).eq("id",te);if(!Fe&&ee.status==="ended"){const lt=u.find(At=>At.id===te);lt&&await xt.from("units").update({status:"vacant"}).eq("id",lt.unitId)}Fe||await I()},J=async te=>{const ee=u.find(Fe=>Fe.id===te);await xt.from("payments").delete().eq("contract_id",te);const{error:ge}=await xt.from("contracts").delete().eq("id",te);!ge&&ee&&(await xt.from("units").update({status:"vacant"}).eq("id",ee.unitId),await I())},xe=async(te,ee,ge)=>{const{error:Fe}=await xt.from("payments").update({status:"paid",paid_at:new Date().toISOString(),method:ee,reference:ge||null}).eq("id",te);Fe||await I()},he=async te=>{const{error:ee}=await xt.from("maintenance_requests").insert({company_id:Yn,property_id:te.propertyId,property_name:te.propertyName,unit_id:te.unitId,unit_no:te.unitNo,title:te.title,description:te.description,priority:te.priority,status:te.status||"new",cost:te.cost||0,requested_by:te.requestedBy,assigned_to:te.assignedTo});ee||await I()},H=async(te,ee)=>{const ge={};ee.title&&(ge.title=ee.title),ee.description&&(ge.description=ee.description),ee.priority&&(ge.priority=ee.priority),ee.status&&(ge.status=ee.status),ee.cost!==void 0&&(ge.cost=ee.cost),ee.assignedTo!==void 0&&(ge.assigned_to=ee.assignedTo);const{error:Fe}=await xt.from("maintenance_requests").update(ge).eq("id",te);Fe||await I()},ne=async te=>{const{error:ee}=await xt.from("maintenance_requests").delete().eq("id",te);ee||await I()},ue=te=>{const ee={...te,id:`emp-${Date.now()}`,companyId:Yn,createdAt:new Date().toISOString()};j(ge=>[...ge,ee])},ye=(te,ee)=>{j(ge=>ge.map(Fe=>Fe.id===te?{...Fe,...ee}:Fe))},Ee=te=>{j(ee=>ee.filter(ge=>ge.id!==te))},De=te=>{const ee=new Date().toISOString(),ge={...te,id:`task-${Date.now()}`,companyId:Yn,comments:[],history:[{id:`h-${Date.now()}`,action:"created",createdBy:te.createdBy,createdByName:te.createdByName,createdAt:ee}],createdAt:ee,updatedAt:ee};_(Fe=>[...Fe,ge])},Ae=(te,ee)=>{_(ge=>ge.map(Fe=>Fe.id===te?{...Fe,...ee,updatedAt:new Date().toISOString()}:Fe))},ke=te=>{_(ee=>ee.filter(ge=>ge.id!==te))},Je=(te,ee,ge,Fe)=>{_(lt=>lt.map(At=>{if(At.id===te){const rt=new Date().toISOString();return{...At,assignedTo:ee,assignedToName:ge,history:[...At.history,{id:`h-${Date.now()}`,action:"transferred",fromEmployee:At.assignedTo,fromEmployeeName:At.assignedToName,toEmployee:ee,toEmployeeName:ge,note:Fe,createdBy:At.assignedTo,createdByName:At.assignedToName,createdAt:rt}],updatedAt:rt}}return At}))},pt=(te,ee)=>{_(ge=>ge.map(Fe=>{if(Fe.id===te){const lt=new Date().toISOString();return{...Fe,status:ee,history:[...Fe.history,{id:`h-${Date.now()}`,action:"status_changed",fromStatus:Fe.status,toStatus:ee,createdBy:Fe.assignedTo,createdByName:Fe.assignedToName,createdAt:lt}],updatedAt:lt}}return Fe}))},vn=te=>{D(ee=>ee.map(ge=>ge.id===te?{...ge,read:!0}:ge))},nn=()=>{D(te=>te.map(ee=>({...ee,read:!0})))};return o.jsx(hk.Provider,{value:{properties:e,units:r,tenants:a,contracts:u,payments:f,maintenanceRequests:y,employees:T,tasks:E,notifications:C,loading:k,getKPI:$,refreshData:I,addProperty:P,updateProperty:A,deleteProperty:L,addUnit:U,updateUnit:B,deleteUnit:q,addTenant:V,updateTenant:se,deleteTenant:Q,addContract:le,updateContract:me,deleteContract:J,recordPayment:xe,addMaintenanceRequest:he,updateMaintenanceRequest:H,deleteMaintenanceRequest:ne,addEmployee:ue,updateEmployee:ye,deleteEmployee:Ee,addTask:De,updateTask:Ae,deleteTask:ke,transferTask:Je,updateTaskStatus:pt,markNotificationRead:vn,markAllNotificationsRead:nn},children:t})}function An(){const t=N.useContext(hk);if(!t)throw new Error("useData must be used within a DataProvider");return t}const _r=({children:t})=>{const{user:e,subscription:n,isLoading:r}=Xr(),s=dr();return r?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e?!["/profile","/renew","/pricing","/dashboard"].includes(s.pathname)&&(!n||n.status==="expired")?o.jsx(Yy,{to:"/pricing",replace:!0,state:{message:"     ."}}):o.jsx(o.Fragment,{children:t}):o.jsx(Yy,{to:"/login",state:{from:s},replace:!0})},vv=N.createContext({});function bv(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const wv=typeof window<"u",fk=wv?N.useLayoutEffect:N.useEffect,ip=N.createContext(null);function _v(t,e){t.indexOf(e)===-1&&t.push(e)}function Ev(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Bi=(t,e,n)=>n>e?e:n<t?t:n;let Nv=()=>{};const zi={},mk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function pk(t){return typeof t=="object"&&t!==null}const gk=t=>/^0[^.\s]+$/u.test(t);function Tv(t){let e;return()=>(e===void 0&&(e=t()),e)}const Hr=t=>t,I8=(t,e)=>n=>e(t(n)),Kd=(...t)=>t.reduce(I8),Nd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Sv{constructor(){this.subscriptions=[]}add(e){return _v(this.subscriptions,e),()=>Ev(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xs=t=>t*1e3,zr=t=>t/1e3;function yk(t,e){return e?t*(1e3/e):0}const xk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,A8=1e-7,R8=12;function P8(t,e,n,r,s){let a,l,u=0;do l=e+(n-e)/2,a=xk(l,r,s)-t,a>0?n=l:e=l;while(Math.abs(a)>A8&&++u<R8);return l}function Gd(t,e,n,r){if(t===e&&n===r)return Hr;const s=a=>P8(a,0,1,t,n);return a=>a===0||a===1?a:xk(s(a),e,r)}const vk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,bk=t=>e=>1-t(1-e),wk=Gd(.33,1.53,.69,.99),jv=bk(wk),_k=vk(jv),Ek=t=>(t*=2)<1?.5*jv(t):.5*(2-Math.pow(2,-10*(t-1))),kv=t=>1-Math.sin(Math.acos(t)),Nk=bk(kv),Tk=vk(kv),D8=Gd(.42,0,1,1),O8=Gd(0,0,.58,1),Sk=Gd(.42,0,.58,1),M8=t=>Array.isArray(t)&&typeof t[0]!="number",jk=t=>Array.isArray(t)&&typeof t[0]=="number",L8={linear:Hr,easeIn:D8,easeInOut:Sk,easeOut:O8,circIn:kv,circInOut:Tk,circOut:Nk,backIn:jv,backInOut:_k,backOut:wk,anticipate:Ek},V8=t=>typeof t=="string",BE=t=>{if(jk(t)){Nv(t.length===4);const[e,n,r,s]=t;return Gd(e,n,r,s)}else if(V8(t))return L8[t];return t},_f=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function F8(t,e){let n=new Set,r=new Set,s=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(f.schedule(g),t()),g(u)}const f={schedule:(g,y=!1,v=!1)=>{const j=v&&s?n:r;return y&&l.add(g),j.has(g)||j.add(g),g},cancel:g=>{r.delete(g),l.delete(g)},process:g=>{if(u=g,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,a&&(a=!1,f.process(g))}};return f}const U8=40;function kk(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=_f.reduce((k,O)=>(k[O]=F8(a),k),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:g,update:y,preRender:v,render:T,postRender:j}=l,E=()=>{const k=zi.useManualTiming?s.timestamp:performance.now();n=!1,zi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(k-s.timestamp,U8),1)),s.timestamp=k,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),g.process(s),y.process(s),v.process(s),T.process(s),j.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(E))},_=()=>{n=!0,r=!0,s.isProcessing||t(E)};return{schedule:_f.reduce((k,O)=>{const I=l[O];return k[O]=($,P=!1,A=!1)=>(n||_(),I.schedule($,P,A)),k},{}),cancel:k=>{for(let O=0;O<_f.length;O++)l[_f[O]].cancel(k)},state:s,steps:l}}const{schedule:Ct,cancel:Ba,state:Sn,steps:xy}=kk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hr,!0);let Gf;function $8(){Gf=void 0}const ur={now:()=>(Gf===void 0&&ur.set(Sn.isProcessing||zi.useManualTiming?Sn.timestamp:performance.now()),Gf),set:t=>{Gf=t,queueMicrotask($8)}},Ck=t=>e=>typeof e=="string"&&e.startsWith(t),Cv=Ck("--"),B8=Ck("var(--"),Iv=t=>B8(t)?z8.test(t.split("/*")[0].trim()):!1,z8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Oc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Td={...Oc,transform:t=>Bi(0,1,t)},Ef={...Oc,default:1},nd=t=>Math.round(t*1e5)/1e5,Av=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function q8(t){return t==null}const W8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Rv=(t,e)=>n=>!!(typeof n=="string"&&W8.test(n)&&n.startsWith(t)||e&&!q8(n)&&Object.prototype.hasOwnProperty.call(n,e)),Ik=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,l,u]=r.match(Av);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},H8=t=>Bi(0,255,t),vy={...Oc,transform:t=>Math.round(H8(t))},Oo={test:Rv("rgb","red"),parse:Ik("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+vy.transform(t)+", "+vy.transform(e)+", "+vy.transform(n)+", "+nd(Td.transform(r))+")"};function K8(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const O0={test:Rv("#"),parse:K8,transform:Oo.transform},Yd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ea=Yd("deg"),Zs=Yd("%"),qe=Yd("px"),G8=Yd("vh"),Y8=Yd("vw"),zE={...Zs,parse:t=>Zs.parse(t)/100,transform:t=>Zs.transform(t*100)},ec={test:Rv("hsl","hue"),parse:Ik("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Zs.transform(nd(e))+", "+Zs.transform(nd(n))+", "+nd(Td.transform(r))+")"},en={test:t=>Oo.test(t)||O0.test(t)||ec.test(t),parse:t=>Oo.test(t)?Oo.parse(t):ec.test(t)?ec.parse(t):O0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Oo.transform(t):ec.transform(t),getAnimatableNone:t=>{const e=en.parse(t);return e.alpha=0,en.transform(e)}},Q8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function J8(t){return isNaN(t)&&typeof t=="string"&&(t.match(Av)?.length||0)+(t.match(Q8)?.length||0)>0}const Ak="number",Rk="color",X8="var",Z8="var(",qE="${}",eU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const u=e.replace(eU,d=>(en.test(d)?(r.color.push(a),s.push(Rk),n.push(en.parse(d))):d.startsWith(Z8)?(r.var.push(a),s.push(X8),n.push(d)):(r.number.push(a),s.push(Ak),n.push(parseFloat(d))),++a,qE)).split(qE);return{values:n,split:u,indexes:r,types:s}}function Pk(t){return Sd(t).values}function Dk(t){const{split:e,types:n}=Sd(t),r=e.length;return s=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],s[l]!==void 0){const u=n[l];u===Ak?a+=nd(s[l]):u===Rk?a+=en.transform(s[l]):a+=s[l]}return a}}const tU=t=>typeof t=="number"?0:en.test(t)?en.getAnimatableNone(t):t;function nU(t){const e=Pk(t);return Dk(t)(e.map(tU))}const za={test:J8,parse:Pk,createTransformer:Dk,getAnimatableNone:nU};function by(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function rU({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,l=0;if(!e)s=a=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;s=by(d,u,t+1/3),a=by(d,u,t),l=by(d,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Sm(t,e){return n=>n>0?e:t}const Mt=(t,e,n)=>t+(e-t)*n,wy=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},sU=[O0,Oo,ec],iU=t=>sU.find(e=>e.test(t));function WE(t){const e=iU(t);if(!e)return!1;let n=e.parse(t);return e===ec&&(n=rU(n)),n}const HE=(t,e)=>{const n=WE(t),r=WE(e);if(!n||!r)return Sm(t,e);const s={...n};return a=>(s.red=wy(n.red,r.red,a),s.green=wy(n.green,r.green,a),s.blue=wy(n.blue,r.blue,a),s.alpha=Mt(n.alpha,r.alpha,a),Oo.transform(s))},M0=new Set(["none","hidden"]);function aU(t,e){return M0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function oU(t,e){return n=>Mt(t,e,n)}function Pv(t){return typeof t=="number"?oU:typeof t=="string"?Iv(t)?Sm:en.test(t)?HE:uU:Array.isArray(t)?Ok:typeof t=="object"?en.test(t)?HE:lU:Sm}function Ok(t,e){const n=[...t],r=n.length,s=t.map((a,l)=>Pv(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)n[l]=s[l](a);return n}}function lU(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Pv(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function cU(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],l=t.indexes[a][r[a]],u=t.values[l]??0;n[s]=u,r[a]++}return n}const uU=(t,e)=>{const n=za.createTransformer(e),r=Sd(t),s=Sd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?M0.has(t)&&!s.values.length||M0.has(e)&&!r.values.length?aU(t,e):Kd(Ok(cU(r,s),s.values),n):Sm(t,e)};function Mk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Mt(t,e,n):Pv(t)(t,e)}const dU=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ct.update(e,n),stop:()=>Ba(e),now:()=>Sn.isProcessing?Sn.timestamp:ur.now()}},Lk=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},jm=2e4;function Dv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<jm;)e+=n,r=t.next(e);return e>=jm?1/0:e}function hU(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Dv(r),jm);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:zr(s)}}const fU=5;function Vk(t,e,n){const r=Math.max(e-fU,0);return yk(n-t(r),e-r)}const $t={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_y=.001;function mU({duration:t=$t.duration,bounce:e=$t.bounce,velocity:n=$t.velocity,mass:r=$t.mass}){let s,a,l=1-e;l=Bi($t.minDamping,$t.maxDamping,l),t=Bi($t.minDuration,$t.maxDuration,zr(t)),l<1?(s=f=>{const g=f*l,y=g*t,v=g-n,T=L0(f,l),j=Math.exp(-y);return _y-v/T*j},a=f=>{const y=f*l*t,v=y*n+n,T=Math.pow(l,2)*Math.pow(f,2)*t,j=Math.exp(-y),E=L0(Math.pow(f,2),l);return(-s(f)+_y>0?-1:1)*((v-T)*j)/E}):(s=f=>{const g=Math.exp(-f*t),y=(f-n)*t+1;return-_y+g*y},a=f=>{const g=Math.exp(-f*t),y=(n-f)*(t*t);return g*y});const u=5/t,d=gU(s,a,u);if(t=Xs(t),isNaN(d))return{stiffness:$t.stiffness,damping:$t.damping,duration:t};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:t}}}const pU=12;function gU(t,e,n){let r=n;for(let s=1;s<pU;s++)r=r-t(r)/e(r);return r}function L0(t,e){return t*Math.sqrt(1-e*e)}const yU=["duration","bounce"],xU=["stiffness","damping","mass"];function KE(t,e){return e.some(n=>t[n]!==void 0)}function vU(t){let e={velocity:$t.velocity,stiffness:$t.stiffness,damping:$t.damping,mass:$t.mass,isResolvedFromDuration:!1,...t};if(!KE(t,xU)&&KE(t,yU))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Bi(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:$t.mass,stiffness:s,damping:a}}else{const n=mU(t);e={...e,...n,mass:$t.mass},e.isResolvedFromDuration=!0}return e}function km(t=$t.visualDuration,e=$t.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:g,duration:y,velocity:v,isResolvedFromDuration:T}=vU({...n,velocity:-zr(n.velocity||0)}),j=v||0,E=f/(2*Math.sqrt(d*g)),_=l-a,C=zr(Math.sqrt(d/g)),D=Math.abs(_)<5;r||(r=D?$t.restSpeed.granular:$t.restSpeed.default),s||(s=D?$t.restDelta.granular:$t.restDelta.default);let k;if(E<1){const I=L0(C,E);k=$=>{const P=Math.exp(-E*C*$);return l-P*((j+E*C*_)/I*Math.sin(I*$)+_*Math.cos(I*$))}}else if(E===1)k=I=>l-Math.exp(-C*I)*(_+(j+C*_)*I);else{const I=C*Math.sqrt(E*E-1);k=$=>{const P=Math.exp(-E*C*$),A=Math.min(I*$,300);return l-P*((j+E*C*_)*Math.sinh(A)+I*_*Math.cosh(A))/I}}const O={calculatedDuration:T&&y||null,next:I=>{const $=k(I);if(T)u.done=I>=y;else{let P=I===0?j:0;E<1&&(P=I===0?Xs(j):Vk(k,I,$));const A=Math.abs(P)<=r,L=Math.abs(l-$)<=s;u.done=A&&L}return u.value=u.done?l:$,u},toString:()=>{const I=Math.min(Dv(O),jm),$=Lk(P=>O.next(I*P).value,I,30);return I+"ms "+$},toTransition:()=>{}};return O}km.applyToOptions=t=>{const e=hU(t,100,km);return t.ease=e.ease,t.duration=Xs(e.duration),t.type="keyframes",t};function V0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:g}){const y=t[0],v={done:!1,value:y},T=A=>u!==void 0&&A<u||d!==void 0&&A>d,j=A=>u===void 0?d:d===void 0||Math.abs(u-A)<Math.abs(d-A)?u:d;let E=n*e;const _=y+E,C=l===void 0?_:l(_);C!==_&&(E=C-y);const D=A=>-E*Math.exp(-A/r),k=A=>C+D(A),O=A=>{const L=D(A),U=k(A);v.done=Math.abs(L)<=f,v.value=v.done?C:U};let I,$;const P=A=>{T(v.value)&&(I=A,$=km({keyframes:[v.value,j(v.value)],velocity:Vk(k,A,v.value),damping:s,stiffness:a,restDelta:f,restSpeed:g}))};return P(0),{calculatedDuration:null,next:A=>{let L=!1;return!$&&I===void 0&&(L=!0,O(A),P(A)),I!==void 0&&A>=I?$.next(A-I):(!L&&O(A),v)}}}function bU(t,e,n){const r=[],s=n||zi.mix||Mk,a=t.length-1;for(let l=0;l<a;l++){let u=s(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||Hr:e;u=Kd(d,u)}r.push(u)}return r}function wU(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(Nv(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=bU(e,r,s),d=u.length,f=g=>{if(l&&g<t[0])return e[0];let y=0;if(d>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const v=Nd(t[y],t[y+1],g);return u[y](v)};return n?g=>f(Bi(t[0],t[a-1],g)):f}function _U(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Nd(0,e,r);t.push(Mt(n,1,s))}}function EU(t){const e=[0];return _U(e,t.length-1),e}function NU(t,e){return t.map(n=>n*e)}function TU(t,e){return t.map(()=>e||Sk).splice(0,t.length-1)}function rd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=M8(r)?r.map(BE):BE(r),a={done:!1,value:e[0]},l=NU(n&&n.length===e.length?n:EU(e),t),u=wU(l,e,{ease:Array.isArray(s)?s:TU(e,s)});return{calculatedDuration:t,next:d=>(a.value=u(d),a.done=d>=t,a)}}const SU=t=>t!==null;function Ov(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(SU),u=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!u||r===void 0?a[u]:r}const jU={decay:V0,inertia:V0,tween:rd,keyframes:rd,spring:km};function Fk(t){typeof t.type=="string"&&(t.type=jU[t.type])}class Mv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const kU=t=>t/100;class Lv extends Mv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ur.now()&&this.tick(ur.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Fk(e);const{type:n=rd,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=e;let{keyframes:u}=e;const d=n||rd;d!==rd&&typeof u[0]!="number"&&(this.mixKeyframes=Kd(kU,Mk(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=Dv(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:g,repeat:y,repeatType:v,repeatDelay:T,type:j,onUpdate:E,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-f*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?C<0:C>s;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let k=this.currentTime,O=r;if(y){const A=Math.min(this.currentTime,s)/u;let L=Math.floor(A),U=A%1;!U&&A>=1&&(U=1),U===1&&L--,L=Math.min(L,y+1),!!(L%2)&&(v==="reverse"?(U=1-U,T&&(U-=T/u)):v==="mirror"&&(O=l)),k=Bi(0,1,U)*u}const I=D?{done:!1,value:g[0]}:O.next(k);a&&(I.value=a(I.value));let{done:$}=I;!D&&d!==null&&($=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return P&&j!==V0&&(I.value=Ov(g,this.options,_,this.speed)),E&&E(I.value),P&&this.finish(),I}then(e,n){return this.finished.then(e,n)}get duration(){return zr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zr(e)}get time(){return zr(this.currentTime)}set time(e){e=Xs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ur.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=dU,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ur.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function CU(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Mo=t=>t*180/Math.PI,F0=t=>{const e=Mo(Math.atan2(t[1],t[0]));return U0(e)},IU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:F0,rotateZ:F0,skewX:t=>Mo(Math.atan(t[1])),skewY:t=>Mo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},U0=t=>(t=t%360,t<0&&(t+=360),t),GE=F0,YE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),QE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),AU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:YE,scaleY:QE,scale:t=>(YE(t)+QE(t))/2,rotateX:t=>U0(Mo(Math.atan2(t[6],t[5]))),rotateY:t=>U0(Mo(Math.atan2(-t[2],t[0]))),rotateZ:GE,rotate:GE,skewX:t=>Mo(Math.atan(t[4])),skewY:t=>Mo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function $0(t){return t.includes("scale")?1:0}function B0(t,e){if(!t||t==="none")return $0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=AU,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=IU,s=u}if(!s)return $0(e);const a=r[e],l=s[1].split(",").map(PU);return typeof a=="function"?a(l):l[a]}const RU=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return B0(n,e)};function PU(t){return parseFloat(t.trim())}const Mc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lc=new Set(Mc),JE=t=>t===Oc||t===qe,DU=new Set(["x","y","z"]),OU=Mc.filter(t=>!DU.has(t));function MU(t){const e=[];return OU.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>B0(e,"x"),y:(t,{transform:e})=>B0(e,"y")};Vo.translateX=Vo.x;Vo.translateY=Vo.y;const Fo=new Set;let z0=!1,q0=!1,W0=!1;function Uk(){if(q0){const t=Array.from(Fo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=MU(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,l])=>{r.getValue(a)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}q0=!1,z0=!1,Fo.forEach(t=>t.complete(W0)),Fo.clear()}function $k(){Fo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(q0=!0)})}function LU(){W0=!0,$k(),Uk(),W0=!1}class Vv{constructor(e,n,r,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Fo.add(this),z0||(z0=!0,Ct.read($k),Ct.resolveKeyframes(Uk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const u=r.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&a===void 0&&s.set(e[0])}CU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Fo.delete(this)}cancel(){this.state==="scheduled"&&(Fo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VU=t=>t.startsWith("--");function FU(t,e,n){VU(e)?t.style.setProperty(e,n):t.style[e]=n}const UU=Tv(()=>window.ScrollTimeline!==void 0),$U={};function BU(t,e){const n=Tv(t);return()=>$U[e]??n()}const Bk=BU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,XE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wu([0,.65,.55,1]),circOut:Wu([.55,0,1,.45]),backIn:Wu([.31,.01,.66,-.59]),backOut:Wu([.33,1.53,.69,.99])};function zk(t,e){if(t)return typeof t=="function"?Bk()?Lk(t,e):"ease-out":jk(t)?Wu(t):Array.isArray(t)?t.map(n=>zk(n,e)||XE.easeOut):XE[t]}function zU(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const g={[e]:n};d&&(g.offset=d);const y=zk(u,s);Array.isArray(y)&&(g.easing=y);const v={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),t.animate(g,v)}function qk(t){return typeof t=="function"&&"applyToOptions"in t}function qU({type:t,...e}){return qk(t)&&Bk()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class WU extends Mv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,Nv(typeof e.type!="string");const f=qU(e);this.animation=zU(n,r,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=Ov(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):FU(n,r,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return zr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zr(e)}get time(){return zr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Xs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&UU()?(this.animation.timeline=e,Hr):n(this)}}const Wk={anticipate:Ek,backInOut:_k,circInOut:Tk};function HU(t){return t in Wk}function KU(t){typeof t.ease=="string"&&HU(t.ease)&&(t.ease=Wk[t.ease])}const ZE=10;class GU extends WU{constructor(e){KU(e),Fk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new Lv({...l,autoplay:!1}),d=Xs(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-ZE).value,u.sample(d).value,ZE),u.stop()}}const eN=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(za.test(t)||t==="0")&&!t.startsWith("url("));function YU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function QU(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=eN(s,e),u=eN(a,e);return!l||!u?!1:YU(t)||(n==="spring"||qk(n))&&r}function H0(t){t.duration=0,t.type="keyframes"}const JU=new Set(["opacity","clipPath","filter","transform"]),XU=Tv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ZU(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return XU()&&n&&JU.has(n)&&(n!=="transform"||!f)&&!d&&!r&&s!=="mirror"&&a!==0&&l!=="inertia"}const e7=40;class t7 extends Mv{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:g,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ur.now();const v={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:l,name:d,motionValue:f,element:g,...y},T=g?.KeyframeResolver||Vv;this.keyframeResolver=new T(u,(j,E,_)=>this.onKeyframesResolved(j,E,v,!_),d,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:g}=r;this.resolvedAt=ur.now(),QU(e,a,l,u)||((zi.instantAnimations||!d)&&g?.(Ov(e,r,n)),e[0]=e[e.length-1],H0(r),r.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>e7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},T=!f&&ZU(v)?new GU({...v,element:v.motionValue.owner.current}):new Lv(v);T.finished.then(()=>this.notifyFinished()).catch(Hr),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),LU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const n7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function r7(t){const e=n7.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Hk(t,e,n=1){const[r,s]=r7(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return mk(l)?parseFloat(l):l}return Iv(s)?Hk(s,e,n+1):s}function Fv(t,e){return t?.[e]??t?.default??t}const Kk=new Set(["width","height","top","left","right","bottom",...Mc]),s7={test:t=>t==="auto",parse:t=>t},Gk=t=>e=>e.test(t),Yk=[Oc,qe,Zs,Ea,Y8,G8,s7],tN=t=>Yk.find(Gk(t));function i7(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gk(t):!0}const a7=new Set(["brightness","contrast","saturate","opacity"]);function o7(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Av)||[];if(!r)return t;const s=n.replace(r,"");let a=a7.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const l7=/\b([a-z-]*)\(.*?\)/gu,K0={...za,getAnimatableNone:t=>{const e=t.match(l7);return e?e.map(o7).join(" "):t}},nN={...Oc,transform:Math.round},c7={rotate:Ea,rotateX:Ea,rotateY:Ea,rotateZ:Ea,scale:Ef,scaleX:Ef,scaleY:Ef,scaleZ:Ef,skew:Ea,skewX:Ea,skewY:Ea,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:Td,originX:zE,originY:zE,originZ:qe},Uv={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe,...c7,zIndex:nN,fillOpacity:Td,strokeOpacity:Td,numOctaves:nN},u7={...Uv,color:en,backgroundColor:en,outlineColor:en,fill:en,stroke:en,borderColor:en,borderTopColor:en,borderRightColor:en,borderBottomColor:en,borderLeftColor:en,filter:K0,WebkitFilter:K0},Qk=t=>u7[t];function Jk(t,e){let n=Qk(t);return n!==K0&&(n=za),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const d7=new Set(["auto","none","0"]);function h7(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!d7.has(a)&&Sd(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=Jk(n,s)}class f7 extends Vv{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Iv(f))){const g=Hk(f,n.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Kk.has(r)||e.length!==2)return;const[s,a]=e,l=tN(s),u=tN(a);if(l!==u)if(JE(l)&&JE(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else Vo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||i7(e[s]))&&r.push(s);r.length&&h7(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=Vo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function m7(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const Xk=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Zk(t){return pk(t)&&"offsetHeight"in t}const rN=30,p7=t=>!isNaN(parseFloat(t));class g7{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=ur.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ur.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=p7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Sv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ct.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ur.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>rN)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,rN);return yk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bc(t,e){return new g7(t,e)}const{schedule:$v}=kk(queueMicrotask,!1),ms={x:!1,y:!1};function eC(){return ms.x||ms.y}function y7(t){return t==="x"||t==="y"?ms[t]?null:(ms[t]=!0,()=>{ms[t]=!1}):ms.x||ms.y?null:(ms.x=ms.y=!0,()=>{ms.x=ms.y=!1})}function tC(t,e){const n=m7(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function sN(t){return!(t.pointerType==="touch"||eC())}function x7(t,e,n={}){const[r,s,a]=tC(t,n),l=u=>{if(!sN(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const g=y=>{sN(y)&&(f(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),a}const nC=(t,e)=>e?t===e?!0:nC(t,e.parentElement):!1,Bv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,v7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function b7(t){return v7.has(t.tagName)||t.tabIndex!==-1}const Yf=new WeakSet;function iN(t){return e=>{e.key==="Enter"&&t(e)}}function Ey(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const w7=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=iN(()=>{if(Yf.has(n))return;Ey(n,"down");const s=iN(()=>{Ey(n,"up")}),a=()=>Ey(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function aN(t){return Bv(t)&&!eC()}function _7(t,e,n={}){const[r,s,a]=tC(t,n),l=u=>{const d=u.currentTarget;if(!aN(u))return;Yf.add(d);const f=e(d,u),g=(T,j)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),Yf.has(d)&&Yf.delete(d),aN(T)&&typeof f=="function"&&f(T,{success:j})},y=T=>{g(T,d===window||d===document||n.useGlobalTarget||nC(d,T.target))},v=T=>{g(T,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",v,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),Zk(u)&&(u.addEventListener("focus",f=>w7(f,s)),!b7(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function rC(t){return pk(t)&&"ownerSVGElement"in t}function E7(t){return rC(t)&&t.tagName==="svg"}const Bn=t=>!!(t&&t.getVelocity),N7=[...Yk,en,za],T7=t=>N7.find(Gk(t)),zv=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function oN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function S7(...t){return e=>{let n=!1;const r=t.map(s=>{const a=oN(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():oN(t[s],null)}}}}function j7(...t){return N.useCallback(S7(...t),t)}class k7 extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Zk(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function C7({children:t,isPresent:e,anchorX:n,root:r}){const s=N.useId(),a=N.useRef(null),l=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=N.useContext(zv),d=j7(a,t?.ref);return N.useInsertionEffect(()=>{const{width:f,height:g,top:y,left:v,right:T}=l.current;if(e||!a.current||!f||!g)return;const j=n==="left"?`left: ${v}`:`right: ${T}`;a.current.dataset.motionPopId=s;const E=document.createElement("style");u&&(E.nonce=u);const _=r??document.head;return _.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${j}px !important;
            top: ${y}px !important;
          }
        `),()=>{_.contains(E)&&_.removeChild(E)}},[e]),o.jsx(k7,{isPresent:e,childRef:a,sizeRef:l,children:N.cloneElement(t,{ref:d})})}const I7=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:l,anchorX:u,root:d})=>{const f=bv(A7),g=N.useId();let y=!0,v=N.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:n,custom:s,onExitComplete:T=>{f.set(T,!0);for(const j of f.values())if(!j)return;r&&r()},register:T=>(f.set(T,!1),()=>f.delete(T))}),[n,f,r]);return a&&y&&(v={...v}),N.useMemo(()=>{f.forEach((T,j)=>f.set(j,!1))},[n]),N.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),l==="popLayout"&&(t=o.jsx(C7,{isPresent:n,anchorX:u,root:d,children:t})),o.jsx(ip.Provider,{value:v,children:t})};function A7(){return new Map}function sC(t=!0){const e=N.useContext(ip);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=N.useId();N.useEffect(()=>{if(t)return s(a)},[t]);const l=N.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,l]:[!0]}const Nf=t=>t.key||"";function lN(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const qa=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[f,g]=sC(l),y=N.useMemo(()=>lN(t),[t]),v=l&&!f?[]:y.map(Nf),T=N.useRef(!0),j=N.useRef(y),E=bv(()=>new Map),[_,C]=N.useState(y),[D,k]=N.useState(y);fk(()=>{T.current=!1,j.current=y;for(let $=0;$<D.length;$++){const P=Nf(D[$]);v.includes(P)?E.delete(P):E.get(P)!==!0&&E.set(P,!1)}},[D,v.length,v.join("-")]);const O=[];if(y!==_){let $=[...y];for(let P=0;P<D.length;P++){const A=D[P],L=Nf(A);v.includes(L)||($.splice(P,0,A),O.push(A))}return a==="wait"&&O.length&&($=O),k(lN($)),C(y),null}const{forceRender:I}=N.useContext(vv);return o.jsx(o.Fragment,{children:D.map($=>{const P=Nf($),A=l&&!f?!1:y===D||v.includes(P),L=()=>{if(E.has(P))E.set(P,!0);else return;let U=!0;E.forEach(B=>{B||(U=!1)}),U&&(I?.(),k(j.current),l&&g?.(),r&&r())};return o.jsx(I7,{isPresent:A,initial:!T.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:d,onExitComplete:A?void 0:L,anchorX:u,children:$},P)})})},iC=N.createContext({strict:!1}),cN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wc={};for(const t in cN)wc[t]={isEnabled:e=>cN[t].some(n=>!!e[n])};function R7(t){for(const e in t)wc[e]={...wc[e],...t[e]}}const P7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||P7.has(t)}let aC=t=>!Cm(t);function D7(t){typeof t=="function"&&(aC=e=>e.startsWith("on")?!Cm(e):t(e))}try{D7(require("@emotion/is-prop-valid").default)}catch{}function O7(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(aC(s)||n===!0&&Cm(s)||!e&&!Cm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const ap=N.createContext({});function op(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function jd(t){return typeof t=="string"||Array.isArray(t)}const qv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wv=["initial",...qv];function lp(t){return op(t.animate)||Wv.some(e=>jd(t[e]))}function oC(t){return!!(lp(t)||t.variants)}function M7(t,e){if(lp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||jd(n)?n:void 0,animate:jd(r)?r:void 0}}return t.inherit!==!1?e:{}}function L7(t){const{initial:e,animate:n}=M7(t,N.useContext(ap));return N.useMemo(()=>({initial:e,animate:n}),[uN(e),uN(n)])}function uN(t){return Array.isArray(t)?t.join(" "):t}const kd={};function V7(t){for(const e in t)kd[e]=t[e],Cv(e)&&(kd[e].isCSSVariable=!0)}function lC(t,{layout:e,layoutId:n}){return Lc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!kd[t]||t==="opacity")}const F7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},U7=Mc.length;function $7(t,e,n){let r="",s=!0;for(let a=0;a<U7;a++){const l=Mc[a],u=t[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const f=Xk(u,Uv[l]);if(!d){s=!1;const g=F7[l]||l;r+=`${g}(${f}) `}n&&(e[l]=f)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Hv(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let l=!1,u=!1;for(const d in e){const f=e[d];if(Lc.has(d)){l=!0;continue}else if(Cv(d)){s[d]=f;continue}else{const g=Xk(f,Uv[d]);d.startsWith("origin")?(u=!0,a[d]=g):r[d]=g}}if(e.transform||(l||n?r.transform=$7(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${f} ${g}`}}const Kv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cC(t,e,n){for(const r in e)!Bn(e[r])&&!lC(r,n)&&(t[r]=e[r])}function B7({transformTemplate:t},e){return N.useMemo(()=>{const n=Kv();return Hv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function z7(t,e){const n=t.style||{},r={};return cC(r,n,t),Object.assign(r,B7(t,e)),r}function q7(t,e){const n={},r=z7(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const W7={offset:"stroke-dashoffset",array:"stroke-dasharray"},H7={offset:"strokeDashoffset",array:"strokeDasharray"};function K7(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?W7:H7;t[a.offset]=qe.transform(-r);const l=qe.transform(e),u=qe.transform(n);t[a.array]=`${l} ${u}`}function uC(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},d,f,g){if(Hv(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v}=t;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=g?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),s!==void 0&&K7(y,s,a,l,!1)}const dC=()=>({...Kv(),attrs:{}}),hC=t=>typeof t=="string"&&t.toLowerCase()==="svg";function G7(t,e,n,r){const s=N.useMemo(()=>{const a=dC();return uC(a,e,hC(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};cC(a,t.style,t),s.style={...a,...s.style}}return s}const Y7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gv(t){return typeof t!="string"||t.includes("-")?!1:!!(Y7.indexOf(t)>-1||/[A-Z]/u.test(t))}function Q7(t,e,n,{latestValues:r},s,a=!1){const u=(Gv(t)?G7:q7)(e,r,s,t),d=O7(e,typeof t=="string",a),f=t!==N.Fragment?{...d,...u,ref:n}:{},{children:g}=e,y=N.useMemo(()=>Bn(g)?g.get():g,[g]);return N.createElement(t,{...f,children:y})}function dN(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Yv(t,e,n,r){if(typeof e=="function"){const[s,a]=dN(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=dN(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function Qf(t){return Bn(t)?t.get():t}function J7({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:X7(n,r,s,t),renderState:e()}}function X7(t,e,n,r){const s={},a=r(t,{});for(const v in a)s[v]=Qf(a[v]);let{initial:l,animate:u}=t;const d=lp(t),f=oC(t);e&&f&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const y=g?u:l;if(y&&typeof y!="boolean"&&!op(y)){const v=Array.isArray(y)?y:[y];for(let T=0;T<v.length;T++){const j=Yv(t,v[T]);if(j){const{transitionEnd:E,transition:_,...C}=j;for(const D in C){let k=C[D];if(Array.isArray(k)){const O=g?k.length-1:0;k=k[O]}k!==null&&(s[D]=k)}for(const D in E)s[D]=E[D]}}}return s}const fC=t=>(e,n)=>{const r=N.useContext(ap),s=N.useContext(ip),a=()=>J7(t,e,r,s);return n?a():bv(a)};function Qv(t,e,n){const{style:r}=t,s={};for(const a in r)(Bn(r[a])||e.style&&Bn(e.style[a])||lC(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const Z7=fC({scrapeMotionValuesFromProps:Qv,createRenderState:Kv});function mC(t,e,n){const r=Qv(t,e,n);for(const s in t)if(Bn(t[s])||Bn(e[s])){const a=Mc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}const e$=fC({scrapeMotionValuesFromProps:mC,createRenderState:dC}),t$=Symbol.for("motionComponentSymbol");function tc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function n$(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):tc(n)&&(n.current=r))},[e])}const Jv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),r$="framerAppearId",pC="data-"+Jv(r$),gC=N.createContext({});function s$(t,e,n,r,s){const{visualElement:a}=N.useContext(ap),l=N.useContext(iC),u=N.useContext(ip),d=N.useContext(zv).reducedMotion,f=N.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,y=N.useContext(gC);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&i$(f.current,n,s,y);const v=N.useRef(!1);N.useInsertionEffect(()=>{g&&v.current&&g.update(n,u)});const T=n[pC],j=N.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return fk(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),j.current&&g.animationState&&g.animationState.animateChanges())}),N.useEffect(()=>{g&&(!j.current&&g.animationState&&g.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),j.current=!1),g.enteringChildren=void 0)}),g}function i$(t,e,n,r){const{layoutId:s,layout:a,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:yC(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||u&&tc(u),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:f})}function yC(t){if(t)return t.options.allowProjection!==!1?t.projection:yC(t.parent)}function Ny(t,{forwardMotionProps:e=!1}={},n,r){n&&R7(n);const s=Gv(t)?e$:Z7;function a(u,d){let f;const g={...N.useContext(zv),...u,layoutId:a$(u)},{isStatic:y}=g,v=L7(u),T=s(u,y);if(!y&&wv){o$();const j=l$(g);f=j.MeasureLayout,v.visualElement=s$(t,T,g,r,j.ProjectionNode)}return o.jsxs(ap.Provider,{value:v,children:[f&&v.visualElement?o.jsx(f,{visualElement:v.visualElement,...g}):null,Q7(t,u,n$(T,v.visualElement,d),T,y,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=N.forwardRef(a);return l[t$]=t,l}function a$({layoutId:t}){const e=N.useContext(vv).id;return e&&t!==void 0?e+"-"+t:t}function o$(t,e){N.useContext(iC).strict}function l$(t){const{drag:e,layout:n}=wc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function c$(t,e){if(typeof Proxy>"u")return Ny;const n=new Map,r=(a,l)=>Ny(a,l,t,e),s=(a,l)=>r(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?r:(n.has(l)||n.set(l,Ny(l,void 0,t,e)),n.get(l))})}function xC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function u$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function d$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ty(t){return t===void 0||t===1}function G0({scale:t,scaleX:e,scaleY:n}){return!Ty(t)||!Ty(e)||!Ty(n)}function ko(t){return G0(t)||vC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vC(t){return hN(t.x)||hN(t.y)}function hN(t){return t&&t!=="0%"}function Im(t,e,n){const r=t-n,s=e*r;return n+s}function fN(t,e,n,r,s){return s!==void 0&&(t=Im(t,s,r)),Im(t,n,r)+e}function Y0(t,e=0,n=1,r,s){t.min=fN(t.min,e,n,r,s),t.max=fN(t.max,e,n,r,s)}function bC(t,{x:e,y:n}){Y0(t.x,e.translate,e.scale,e.originPoint),Y0(t.y,n.translate,n.scale,n.originPoint)}const mN=.999999999999,pN=1.0000000000001;function h$(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,l;for(let u=0;u<s;u++){a=n[u],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&rc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,bC(t,l)),r&&ko(a.latestValues)&&rc(t,a.latestValues))}e.x<pN&&e.x>mN&&(e.x=1),e.y<pN&&e.y>mN&&(e.y=1)}function nc(t,e){t.min=t.min+e,t.max=t.max+e}function gN(t,e,n,r,s=.5){const a=Mt(t.min,t.max,s);Y0(t,e,n,a,r)}function rc(t,e){gN(t.x,e.x,e.scaleX,e.scale,e.originX),gN(t.y,e.y,e.scaleY,e.scale,e.originY)}function wC(t,e){return xC(d$(t.getBoundingClientRect(),e))}function f$(t,e,n){const r=wC(t,n),{scroll:s}=e;return s&&(nc(r.x,s.offset.x),nc(r.y,s.offset.y)),r}const yN=()=>({translate:0,scale:1,origin:0,originPoint:0}),sc=()=>({x:yN(),y:yN()}),xN=()=>({min:0,max:0}),ln=()=>({x:xN(),y:xN()}),Q0={current:null},_C={current:!1};function m$(){if(_C.current=!0,!!wv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Q0.current=t.matches;t.addEventListener("change",e),e()}else Q0.current=!1}const p$=new WeakMap;function g$(t,e,n){for(const r in e){const s=e[r],a=n[r];if(Bn(s))t.addValue(r,s);else if(Bn(a))t.addValue(r,bc(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,bc(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const vN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class y${scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=ur.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Ct.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=lp(n),this.isVariantNode=oC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in y){const T=y[v];d[v]!==void 0&&Bn(T)&&T.set(d[v])}}mount(e){this.current=e,p$.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),_C.current||m$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Q0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ba(this.notifyUpdate),Ba(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Lc.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Ct.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in wc){const n=wc[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<vN.length;r++){const s=vN[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=e[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=g$(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=bc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(mk(r)||gk(r))?r=parseFloat(r):!T7(r)&&za.test(n)&&(r=Jk(e,n)),this.setBaseTarget(e,Bn(r)?r.get():r)),Bn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Yv(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Bn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Sv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){$v.render(this.render)}}class EC extends y${constructor(){super(...arguments),this.KeyframeResolver=f7}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Bn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function NC(t,{style:e,vars:n},r,s){const a=t.style;let l;for(l in e)a[l]=e[l];s?.applyProjectionStyles(a,r);for(l in n)a.setProperty(l,n[l])}function x$(t){return window.getComputedStyle(t)}class v$ extends EC{constructor(){super(...arguments),this.type="html",this.renderInstance=NC}readValueFromInstance(e,n){if(Lc.has(n))return this.projection?.isProjecting?$0(n):RU(e,n);{const r=x$(e),s=(Cv(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wC(e,n)}build(e,n,r){Hv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Qv(e,n,r)}}const TC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function b$(t,e,n,r){NC(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(TC.has(s)?s:Jv(s),e.attrs[s])}class w$ extends EC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Lc.has(n)){const r=Qk(n);return r&&r.default||0}return n=TC.has(n)?n:Jv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return mC(e,n,r)}build(e,n,r){uC(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){b$(e,n,r,s)}mount(e){this.isSVGTag=hC(e.tagName),super.mount(e)}}const _$=(t,e)=>Gv(t)?new w$(e):new v$(e,{allowProjection:t!==N.Fragment});function dc(t,e,n){const r=t.getProps();return Yv(r,e,n!==void 0?n:r.custom,t)}const J0=t=>Array.isArray(t);function E$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,bc(n))}function N$(t){return J0(t)?t[t.length-1]||0:t}function T$(t,e){const n=dc(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const l in a){const u=N$(a[l]);E$(t,l,u)}}function S$(t){return!!(Bn(t)&&t.add)}function X0(t,e){const n=t.getValue("willChange");if(S$(n))return n.add(e);if(!n&&zi.WillChange){const r=new zi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function SC(t){return t.props[pC]}const j$=t=>t!==null;function k$(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(j$),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}const C$={type:"spring",stiffness:500,damping:25,restSpeed:10},I$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),A$={type:"keyframes",duration:.8},R$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},P$=(t,{keyframes:e})=>e.length>2?A$:Lc.has(t)?t.startsWith("scale")?I$(e[1]):C$:R$;function D$({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:u,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const Xv=(t,e,n,r={},s,a)=>l=>{const u=Fv(r,t)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Xs(d);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:a?void 0:s};D$(u)||Object.assign(g,P$(t,g)),g.duration&&(g.duration=Xs(g.duration)),g.repeatDelay&&(g.repeatDelay=Xs(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(H0(g),g.delay===0&&(y=!0)),(zi.instantAnimations||zi.skipAnimations)&&(y=!0,H0(g),g.delay=0),g.allowFlatten=!u.type&&!u.ease,y&&!a&&e.get()!==void 0){const v=k$(g.keyframes,u);if(v!==void 0){Ct.update(()=>{g.onUpdate(v),g.onComplete()});return}}return u.isSync?new Lv(g):new t7(g)};function O$({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function jC(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(a=r);const d=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const g in u){const y=t.getValue(g,t.latestValues[g]??null),v=u[g];if(v===void 0||f&&O$(f,g))continue;const T={delay:n,...Fv(a||{},g)},j=y.get();if(j!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===j&&!T.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const C=SC(t);if(C){const D=window.MotionHandoffAnimation(C,g,Ct);D!==null&&(T.startTime=D,E=!0)}}X0(t,g),y.start(Xv(g,y,v,t.shouldReduceMotion&&Kk.has(g)?{type:!1}:T,t,E));const _=y.animation;_&&d.push(_)}return l&&Promise.all(d).then(()=>{Ct.update(()=>{l&&T$(t,l)})}),d}function kC(t,e,n,r=0,s=1){const a=Array.from(t).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),l=t.size,u=(l-1)*r;return typeof n=="function"?n(a,l):s===1?a*r:u-a*r}function Z0(t,e,n={}){const r=dc(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(jC(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:y}=s;return M$(t,e,d,f,g,y,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[a,l]:[l,a];return d().then(()=>f())}else return Promise.all([a(),l(n.delay)])}function M$(t,e,n=0,r=0,s=0,a=1,l){const u=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),u.push(Z0(d,e,{...l,delay:n+(typeof r=="function"?0:r)+kC(t.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(u)}function L$(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>Z0(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=Z0(t,e,n);else{const s=typeof e=="function"?dc(t,e,n.custom):e;r=Promise.all(jC(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function CC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const V$=Wv.length;function IC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?IC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<V$;n++){const r=Wv[n],s=t.props[r];(jd(s)||s===!1)&&(e[r]=s)}return e}const F$=[...qv].reverse(),U$=qv.length;function $$(t){return e=>Promise.all(e.map(({animation:n,options:r})=>L$(t,n,r)))}function B$(t){let e=$$(t),n=bN(),r=!0;const s=d=>(f,g)=>{const y=dc(t,g,d==="exit"?t.presenceContext?.custom:void 0);if(y){const{transition:v,transitionEnd:T,...j}=y;f={...f,...j,...T}}return f};function a(d){e=d(t)}function l(d){const{props:f}=t,g=IC(t.parent)||{},y=[],v=new Set;let T={},j=1/0;for(let _=0;_<U$;_++){const C=F$[_],D=n[C],k=f[C]!==void 0?f[C]:g[C],O=jd(k),I=C===d?D.isActive:null;I===!1&&(j=_);let $=k===g[C]&&k!==f[C]&&O;if($&&r&&t.manuallyAnimateOnMount&&($=!1),D.protectedKeys={...T},!D.isActive&&I===null||!k&&!D.prevProp||op(k)||typeof k=="boolean")continue;const P=z$(D.prevProp,k);let A=P||C===d&&D.isActive&&!$&&O||_>j&&O,L=!1;const U=Array.isArray(k)?k:[k];let B=U.reduce(s(C),{});I===!1&&(B={});const{prevResolvedValues:q={}}=D,V={...q,...B},se=me=>{A=!0,v.has(me)&&(L=!0,v.delete(me)),D.needsAnimating[me]=!0;const J=t.getValue(me);J&&(J.liveStyle=!1)};for(const me in V){const J=B[me],xe=q[me];if(T.hasOwnProperty(me))continue;let he=!1;J0(J)&&J0(xe)?he=!CC(J,xe):he=J!==xe,he?J!=null?se(me):v.add(me):J!==void 0&&v.has(me)?se(me):D.protectedKeys[me]=!0}D.prevProp=k,D.prevResolvedValues=B,D.isActive&&(T={...T,...B}),r&&t.blockInitialAnimation&&(A=!1);const Q=$&&P;A&&(!Q||L)&&y.push(...U.map(me=>{const J={type:C};if(typeof me=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:xe}=t,he=dc(xe,me);if(xe.enteringChildren&&he){const{delayChildren:H}=he.transition||{};J.delay=kC(xe.enteringChildren,t,H)}}return{animation:me,options:J}}))}if(v.size){const _={};if(typeof f.initial!="boolean"){const C=dc(t,Array.isArray(f.initial)?f.initial[0]:f.initial);C&&C.transition&&(_.transition=C.transition)}v.forEach(C=>{const D=t.getBaseTarget(C),k=t.getValue(C);k&&(k.liveStyle=!0),_[C]=D??null}),y.push({animation:_})}let E=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(y):Promise.resolve()}function u(d,f){if(n[d].isActive===f)return Promise.resolve();t.variantChildren?.forEach(y=>y.animationState?.setActive(d,f)),n[d].isActive=f;const g=l(d);for(const y in n)n[y].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=bN()}}}function z$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!CC(e,t):!1}function No(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bN(){return{animate:No(!0),whileInView:No(),whileHover:No(),whileTap:No(),whileDrag:No(),whileFocus:No(),exit:No()}}class Ga{constructor(e){this.isMounted=!1,this.node=e}update(){}}class q$ extends Ga{constructor(e){super(e),e.animationState||(e.animationState=B$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();op(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let W$=0;class H$ extends Ga{constructor(){super(...arguments),this.id=W$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const K$={animation:{Feature:q$},exit:{Feature:H$}};function Cd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Qd(t){return{point:{x:t.pageX,y:t.pageY}}}const G$=t=>e=>Bv(e)&&t(e,Qd(e));function sd(t,e,n,r){return Cd(t,e,G$(n),r)}const AC=1e-4,Y$=1-AC,Q$=1+AC,RC=.01,J$=0-RC,X$=0+RC;function Qn(t){return t.max-t.min}function Z$(t,e,n){return Math.abs(t-e)<=n}function wN(t,e,n,r=.5){t.origin=r,t.originPoint=Mt(e.min,e.max,t.origin),t.scale=Qn(n)/Qn(e),t.translate=Mt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Y$&&t.scale<=Q$||isNaN(t.scale))&&(t.scale=1),(t.translate>=J$&&t.translate<=X$||isNaN(t.translate))&&(t.translate=0)}function id(t,e,n,r){wN(t.x,e.x,n.x,r?r.originX:void 0),wN(t.y,e.y,n.y,r?r.originY:void 0)}function _N(t,e,n){t.min=n.min+e.min,t.max=t.min+Qn(e)}function eB(t,e,n){_N(t.x,e.x,n.x),_N(t.y,e.y,n.y)}function EN(t,e,n){t.min=e.min-n.min,t.max=t.min+Qn(e)}function Am(t,e,n){EN(t.x,e.x,n.x),EN(t.y,e.y,n.y)}function Ur(t){return[t("x"),t("y")]}const PC=({current:t})=>t?t.ownerDocument.defaultView:null,NN=(t,e)=>Math.abs(t-e);function tB(t,e){const n=NN(t.x,e.x),r=NN(t.y,e.y);return Math.sqrt(n**2+r**2)}class DC{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=jy(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,j=tB(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!j)return;const{point:E}=v,{timestamp:_}=Sn;this.history.push({...E,timestamp:_});const{onStart:C,onMove:D}=this.handlers;T||(C&&C(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,v)},this.handlePointerMove=(v,T)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Sy(T,this.transformPagePoint),Ct.update(this.updatePoint,!0)},this.handlePointerUp=(v,T)=>{this.end();const{onEnd:j,onSessionEnd:E,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=jy(v.type==="pointercancel"?this.lastMoveEventInfo:Sy(T,this.transformPagePoint),this.history);this.startEvent&&j&&j(v,C),E&&E(v,C)},!Bv(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const u=Qd(e),d=Sy(u,this.transformPagePoint),{point:f}=d,{timestamp:g}=Sn;this.history=[{...f,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,jy(d,this.history)),this.removeListeners=Kd(sd(this.contextWindow,"pointermove",this.handlePointerMove),sd(this.contextWindow,"pointerup",this.handlePointerUp),sd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ba(this.updatePoint)}}function Sy(t,e){return e?{point:e(t.point)}:t}function TN(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jy({point:t},e){return{point:t,delta:TN(t,OC(e)),offset:TN(t,nB(e)),velocity:rB(e,.1)}}function nB(t){return t[0]}function OC(t){return t[t.length-1]}function rB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=OC(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Xs(e)));)n--;if(!r)return{x:0,y:0};const a=zr(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function sB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Mt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Mt(n,t,r.max):Math.min(t,n)),t}function SN(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function iB(t,{top:e,left:n,bottom:r,right:s}){return{x:SN(t.x,n,s),y:SN(t.y,e,r)}}function jN(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function aB(t,e){return{x:jN(t.x,e.x),y:jN(t.y,e.y)}}function oB(t,e){let n=.5;const r=Qn(t),s=Qn(e);return s>r?n=Nd(e.min,e.max-r,t.min):r>s&&(n=Nd(t.min,t.max-s,e.min)),Bi(0,1,n)}function lB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ex=.35;function cB(t=ex){return t===!1?t=0:t===!0&&(t=ex),{x:kN(t,"left","right"),y:kN(t,"top","bottom")}}function kN(t,e,n){return{min:CN(t,e),max:CN(t,n)}}function CN(t,e){return typeof t=="number"?t:t[e]||0}const uB=new WeakMap;class dB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Qd(y).point)},l=(y,v)=>{const{drag:T,dragPropagation:j,onDragStart:E}=this.getProps();if(T&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=y7(T),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ur(C=>{let D=this.getAxisMotionValue(C).get()||0;if(Zs.test(D)){const{projection:k}=this.visualElement;if(k&&k.layout){const O=k.layout.layoutBox[C];O&&(D=Qn(O)*(parseFloat(D)/100))}}this.originPoint[C]=D}),E&&Ct.postRender(()=>E(y,v)),X0(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},u=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:T,dragDirectionLock:j,onDirectionLock:E,onDrag:_}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:C}=v;if(j&&this.currentDirection===null){this.currentDirection=hB(C),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",v.point,C),this.updateAxis("y",v.point,C),this.visualElement.render(),_&&_(y,v)},d=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Ur(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new DC(e,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:PC(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&Ct.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Tf(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=sB(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&tc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=iB(r.layoutBox,e):this.constraints=!1,this.elastic=cB(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ur(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=lB(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!tc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=f$(r,s.root,this.visualElement.getTransformPagePoint());let l=aB(s.layout.layoutBox,a);if(n){const u=n(u$(l));this.hasMutatedConstraints=!!u,u&&(l=xC(u))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Ur(g=>{if(!Tf(g,n,this.currentDirection))return;let y=d&&d[g]||{};l&&(y={min:0,max:0});const v=s?200:1e6,T=s?40:1e7,j={type:"inertia",velocity:r?e[g]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(g,j)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return X0(this.visualElement,e),r.start(Xv(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ur(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ur(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ur(n=>{const{drag:r}=this.getProps();if(!Tf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[n];a.set(e[n]-Mt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tc(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ur(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=oB({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ur(l=>{if(!Tf(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(Mt(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;uB.set(this.visualElement,this);const e=this.visualElement.current,n=sd(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();tc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ct.read(r);const l=Cd(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Ur(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),n(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=ex,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function Tf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function hB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class fB extends Ga{constructor(e){super(e),this.removeGroupControls=Hr,this.removeListeners=Hr,this.controls=new dB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hr}unmount(){this.removeGroupControls(),this.removeListeners()}}const IN=t=>(e,n)=>{t&&Ct.postRender(()=>t(e,n))};class mB extends Ga{constructor(){super(...arguments),this.removePointerDownListener=Hr}onPointerDown(e){this.session=new DC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:IN(e),onStart:IN(n),onMove:r,onEnd:(a,l)=>{delete this.session,s&&Ct.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=sd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function AN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Mu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(qe.test(t))t=parseFloat(t);else return t;const n=AN(t,e.target.x),r=AN(t,e.target.y);return`${n}% ${r}%`}},pB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=za.parse(t);if(s.length>5)return r;const a=za.createTransformer(t),l=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;s[0+l]/=u,s[1+l]/=d;const f=Mt(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),a(s)}};let ky=!1;class gB extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;V7(yB),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),ky&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Jf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,ky=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||Ct.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),$v.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;ky=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MC(t){const[e,n]=sC(),r=N.useContext(vv);return o.jsx(gB,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(gC),isPresent:e,safeToRemove:n})}const yB={borderRadius:{...Mu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mu,borderTopRightRadius:Mu,borderBottomLeftRadius:Mu,borderBottomRightRadius:Mu,boxShadow:pB};function xB(t,e,n){const r=Bn(t)?t:bc(t);return r.start(Xv("",r,e,n)),r.animation}const vB=(t,e)=>t.depth-e.depth;class bB{constructor(){this.children=[],this.isDirty=!1}add(e){_v(this.children,e),this.isDirty=!0}remove(e){Ev(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vB),this.isDirty=!1,this.children.forEach(e)}}function wB(t,e){const n=ur.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(Ba(r),t(a-e))};return Ct.setup(r,!0),()=>Ba(r)}const LC=["TopLeft","TopRight","BottomLeft","BottomRight"],_B=LC.length,RN=t=>typeof t=="string"?parseFloat(t):t,PN=t=>typeof t=="number"||qe.test(t);function EB(t,e,n,r,s,a){s?(t.opacity=Mt(0,n.opacity??1,NB(r)),t.opacityExit=Mt(e.opacity??1,0,TB(r))):a&&(t.opacity=Mt(e.opacity??1,n.opacity??1,r));for(let l=0;l<_B;l++){const u=`border${LC[l]}Radius`;let d=DN(e,u),f=DN(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||PN(d)===PN(f)?(t[u]=Math.max(Mt(RN(d),RN(f),r),0),(Zs.test(f)||Zs.test(d))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=Mt(e.rotate||0,n.rotate||0,r))}function DN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const NB=VC(0,.5,Nk),TB=VC(.5,.95,Hr);function VC(t,e,n){return r=>r<t?0:r>e?1:n(Nd(t,e,r))}function ON(t,e){t.min=e.min,t.max=e.max}function hs(t,e){ON(t.x,e.x),ON(t.y,e.y)}function MN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function LN(t,e,n,r,s){return t-=e,t=Im(t,1/n,r),s!==void 0&&(t=Im(t,1/s,r)),t}function SB(t,e=0,n=1,r=.5,s,a=t,l=t){if(Zs.test(e)&&(e=parseFloat(e),e=Mt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=Mt(a.min,a.max,r);t===a&&(u-=e),t.min=LN(t.min,e,n,u,s),t.max=LN(t.max,e,n,u,s)}function VN(t,e,[n,r,s],a,l){SB(t,e[n],e[r],e[s],e.scale,a,l)}const jB=["x","scaleX","originX"],kB=["y","scaleY","originY"];function FN(t,e,n,r){VN(t.x,e,jB,n?n.x:void 0,r?r.x:void 0),VN(t.y,e,kB,n?n.y:void 0,r?r.y:void 0)}function UN(t){return t.translate===0&&t.scale===1}function FC(t){return UN(t.x)&&UN(t.y)}function $N(t,e){return t.min===e.min&&t.max===e.max}function CB(t,e){return $N(t.x,e.x)&&$N(t.y,e.y)}function BN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function UC(t,e){return BN(t.x,e.x)&&BN(t.y,e.y)}function zN(t){return Qn(t.x)/Qn(t.y)}function qN(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class IB{constructor(){this.members=[]}add(e){_v(this.members,e),e.scheduleRender()}remove(e){if(Ev(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AB(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,l=n?.z||0;if((s||a||l)&&(r=`translate3d(${s}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:y,rotateY:v,skewX:T,skewY:j}=n;f&&(r=`perspective(${f}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),v&&(r+=`rotateY(${v}deg) `),T&&(r+=`skewX(${T}deg) `),j&&(r+=`skewY(${j}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const Cy=["","X","Y","Z"],RB=1e3;let PB=0;function Iy(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function $C(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=SC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ct,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&$C(r)}function BC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=e?.()){this.id=PB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(MB),this.nodes.forEach(UB),this.nodes.forEach($B),this.nodes.forEach(LB)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new bB)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Sv),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=rC(l)&&!E7(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let g,y=0;const v=()=>this.root.updateBlockedByResize=!1;Ct.read(()=>{y=window.innerWidth}),t(l,()=>{const T=window.innerWidth;T!==y&&(y=T,this.root.updateBlockedByResize=!0,g&&g(),g=wB(v,250),Jf.hasAnimatedSinceResize&&(Jf.hasAnimatedSinceResize=!1,this.nodes.forEach(KN)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||f.getDefaultTransition()||HB,{onLayoutAnimationStart:E,onLayoutAnimationComplete:_}=f.getProps(),C=!this.targetLayout||!UC(this.targetLayout,T),D=!y&&v;if(this.options.layoutRoot||this.resumeFrom||D||y&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Fv(j,"layout"),onPlay:E,onComplete:_};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(g,D)}else y||KN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ba(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(BB),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$C(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(HN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(FB),this.nodes.forEach(DB),this.nodes.forEach(OB)):this.nodes.forEach(HN),this.clearAllSnapshots();const u=ur.now();Sn.delta=Bi(0,1e3/60,u-Sn.timestamp),Sn.timestamp=u,Sn.isProcessing=!0,xy.update.process(Sn),xy.preRender.process(Sn),xy.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$v.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(VB),this.sharedNodes.forEach(zB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qn(this.snapshot.measuredBox.x)&&!Qn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!FC(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||ko(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),KB(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return ln();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(GB))){const{scroll:f}=this.root;f&&(nc(u.x,f.offset.x),nc(u.y,f.offset.y))}return u}removeElementScroll(l){const u=ln();if(hs(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:y}=f;f!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&hs(u,l),nc(u.x,g.offset.x),nc(u.y,g.offset.y))}return u}applyTransform(l,u=!1){const d=ln();hs(d,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&rc(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),ko(g.latestValues)&&rc(d,g.latestValues)}return ko(this.latestValues)&&rc(d,this.latestValues),d}removeTransform(l){const u=ln();hs(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!ko(f.latestValues))continue;G0(f.latestValues)&&f.updateSnapshot();const g=ln(),y=f.measurePageBox();hs(g,y),FN(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return ko(this.latestValues)&&FN(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=Sn.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hs(this.target,this.layout.layoutBox),bC(this.target,this.targetDelta)):hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||G0(this.parent.latestValues)||vC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),Am(this.relativeTargetOrigin,u,d),hs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;hs(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;h$(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ln());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MN(this.prevProjectionDelta.x,this.projectionDelta.x),MN(this.prevProjectionDelta.y,this.projectionDelta.y)),id(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!qN(this.projectionDelta.x,this.prevProjectionDelta.x)||!qN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sc(),this.projectionDelta=sc(),this.projectionDeltaWithTransform=sc()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},y=sc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=ln(),T=d?d.source:void 0,j=this.layout?this.layout.source:void 0,E=T!==j,_=this.getStack(),C=!_||_.members.length<=1,D=!!(E&&!C&&this.options.crossfade===!0&&!this.path.some(WB));this.animationProgress=0;let k;this.mixTargetDelta=O=>{const I=O/1e3;GN(y.x,l.x,I),GN(y.y,l.y,I),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Am(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qB(this.relativeTarget,this.relativeTargetOrigin,v,I),k&&CB(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=ln()),hs(k,this.relativeTarget)),E&&(this.animationValues=g,EB(g,f,this.latestValues,I,D,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ba(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ct.update(()=>{Jf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bc(0)),this.currentAnimation=xB(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(RB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:g}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&zC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||ln();const y=Qn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+y;const v=Qn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+v}hs(u,d),rc(u,g),id(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new IB),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&Iy("z",l,f,this.animationValues);for(let g=0;g<Cy.length;g++)Iy(`rotate${Cy[g]}`,l,f,this.animationValues),Iy(`skew${Cy[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Qf(u?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Qf(u?.pointerEvents)||""),this.hasProjected&&!ko(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=AB(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),l.transform=y;const{x:v,y:T}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${T.origin*100}% 0`,f.animationValues?l.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const j in kd){if(g[j]===void 0)continue;const{correct:E,applyTo:_,isCSSVariable:C}=kd[j],D=y==="none"?g[j]:E(g[j],f);if(_){const k=_.length;for(let O=0;O<k;O++)l[_[O]]=D}else C?this.options.visualElement.renderState.vars[j]=D:l[j]=D}this.options.layoutId&&(l.pointerEvents=f===this?Qf(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(WN),this.root.sharedNodes.clear()}}}function DB(t){t.updateLayout()}function OB(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?Ur(g=>{const y=a?e.measuredBox[g]:e.layoutBox[g],v=Qn(y);y.min=n[g].min,y.max=y.min+v}):zC(s,e.layoutBox,n)&&Ur(g=>{const y=a?e.measuredBox[g]:e.layoutBox[g],v=Qn(n[g]);y.max=y.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+v)});const l=sc();id(l,n,e.layoutBox);const u=sc();a?id(u,t.applyTransform(r,!0),e.measuredBox):id(u,n,e.layoutBox);const d=!FC(l);let f=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:v}=g;if(y&&v){const T=ln();Am(T,e.layoutBox,y.layoutBox);const j=ln();Am(j,n,v.layoutBox),UC(T,j)||(f=!0),g.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=T,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function MB(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function LB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function VB(t){t.clearSnapshot()}function WN(t){t.clearMeasurements()}function HN(t){t.isLayoutDirty=!1}function FB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function KN(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function UB(t){t.resolveTargetDelta()}function $B(t){t.calcProjection()}function BB(t){t.resetSkewAndRotation()}function zB(t){t.removeLeadSnapshot()}function GN(t,e,n){t.translate=Mt(e.translate,0,n),t.scale=Mt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function YN(t,e,n,r){t.min=Mt(e.min,n.min,r),t.max=Mt(e.max,n.max,r)}function qB(t,e,n,r){YN(t.x,e.x,n.x,r),YN(t.y,e.y,n.y,r)}function WB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const HB={duration:.45,ease:[.4,0,.1,1]},QN=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),JN=QN("applewebkit/")&&!QN("chrome/")?Math.round:Hr;function XN(t){t.min=JN(t.min),t.max=JN(t.max)}function KB(t){XN(t.x),XN(t.y)}function zC(t,e,n){return t==="position"||t==="preserve-aspect"&&!Z$(zN(e),zN(n),.2)}function GB(t){return t!==t.root&&t.scroll?.wasRoot}const YB=BC({attachResizeListener:(t,e)=>Cd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ay={current:void 0},qC=BC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ay.current){const t=new YB({});t.mount(window),t.setOptions({layoutScroll:!0}),Ay.current=t}return Ay.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),QB={pan:{Feature:mB},drag:{Feature:fB,ProjectionNode:qC,MeasureLayout:MC}};function ZN(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Ct.postRender(()=>a(e,Qd(e)))}class JB extends Ga{mount(){const{current:e}=this.node;e&&(this.unmount=x7(e,(n,r)=>(ZN(this.node,r,"Start"),s=>ZN(this.node,s,"End"))))}unmount(){}}class XB extends Ga{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kd(Cd(this.node.current,"focus",()=>this.onFocus()),Cd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function e2(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Ct.postRender(()=>a(e,Qd(e)))}class ZB extends Ga{mount(){const{current:e}=this.node;e&&(this.unmount=_7(e,(n,r)=>(e2(this.node,r,"Start"),(s,{success:a})=>e2(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const tx=new WeakMap,Ry=new WeakMap,ez=t=>{const e=tx.get(t.target);e&&e(t)},tz=t=>{t.forEach(ez)};function nz({root:t,...e}){const n=t||document;Ry.has(n)||Ry.set(n,{});const r=Ry.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(tz,{root:t,...e})),r[s]}function rz(t,e,n){const r=nz(e);return tx.set(t,n),r.observe(t),()=>{tx.delete(t),r.unobserve(t)}}const sz={some:0,all:1};class iz extends Ga{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:sz[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),v=f?g:y;v&&v(d)};return rz(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(az(e,n))&&this.startObserver()}unmount(){}}function az({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const oz={inView:{Feature:iz},tap:{Feature:ZB},focus:{Feature:XB},hover:{Feature:JB}},lz={layout:{ProjectionNode:qC,MeasureLayout:MC}},cz={...K$,...oz,...QB,...lz},Qe=c$(cz,_$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dz=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),t2=t=>{const e=dz(t);return e.charAt(0).toUpperCase()+e.slice(1)},WC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},d)=>N.createElement("svg",{ref:d,...hz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:WC("lucide",s),...u},[...l.map(([f,g])=>N.createElement(f,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(t,e)=>{const n=N.forwardRef(({className:r,...s},a)=>N.createElement(fz,{ref:a,iconNode:e,className:WC(`lucide-${uz(t2(t))}`,`lucide-${t}`,r),...s}));return n.displayName=t2(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],n2=ve("arrow-left-right",mz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gz=ve("arrow-left",pz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],HC=ve("arrow-right",yz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],vz=ve("bath",xz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],wz=ve("bed",bz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Zv=ve("bell",_z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],eb=ve("brain",Ez);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Xn=ve("building-2",Nz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Sz=ve("building",Tz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Rm=ve("calendar",jz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ri=ve("chart-column",kz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Iz=ve("chart-pie",Cz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ys=ve("check",Az);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Pz=ve("chevron-left",Rz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],tb=ve("chevron-right",Dz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],KC=ve("circle-alert",Oz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mi=ve("circle-check-big",Mz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nx=ve("circle-check",Lz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Fz=ve("circle-user",Vz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$z=ve("circle-x",Uz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Jd=ve("clipboard-list",Bz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Id=ve("clock",zz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],r2=ve("copy",qz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Kr=ve("credit-card",Wz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Kz=ve("database",Hz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Yz=ve("dollar-sign",Gz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Hu=ve("download",Qz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Xz=ve("external-link",Jz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],nb=ve("eye-off",Zz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cp=ve("eye",eq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],nq=ve("facebook",tq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],sq=ve("file-pen-line",rq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Yr=ve("file-text",iq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],GC=ve("funnel",aq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],lq=ve("heart",oq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],qr=ve("house",cq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dq=ve("info",uq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],fq=ve("instagram",hq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],pq=ve("key",mq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],yq=ve("linkedin",gq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vq=ve("loader-circle",xq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ad=ve("lock",bq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],rb=ve("log-out",wq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],si=ve("mail",_q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Rd=ve("map-pin",Eq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Tq=ve("maximize",Nq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],YC=ve("menu",Sq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],kq=ve("message-circle",jq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Iq=ve("monitor",Cq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],Rq=ve("palette",Aq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Dq=ve("pen-tool",Pq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Mq=ve("pen",Oq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Xd=ve("phone",Lq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ii=ve("plus",Vq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Pm=ve("receipt",Fq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rx=ve("refresh-cw",Uq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bq=ve("save",$q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ai=ve("search",zq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Wq=ve("send",qq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kq=ve("settings",Hq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sb=ve("shield-check",Gq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Vc=ve("shopping-cart",Yq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Wa=ve("square-pen",Qq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],QC=ve("star",Jq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zq=ve("target",Xq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Es=ve("trash-2",eW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],up=ve("trending-up",tW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_c=ve("triangle-alert",nW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],sW=ve("twitter",rW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ib=ve("upload",iW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],oW=ve("user-plus",aW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fc=ve("user",lW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],qi=ve("users",cW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Wi=ve("wrench",uW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ha=ve("x",dW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fW=ve("zap",hW);function JC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=JC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ab(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=JC(t))&&(r&&(r+=" "),r+=e);return r}const mW=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},pW=(t,e)=>({classGroupId:t,validator:e}),XC=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Dm="-",s2=[],gW="arbitrary..",yW=t=>{const e=vW(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return xW(l);const u=l.split(Dm),d=u[0]===""&&u.length>1?1:0;return ZC(u,d,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],f=n[l];return d?f?mW(f,d):d:f||s2}return n[l]||s2}}},ZC=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],a=n.nextPart.get(s);if(a){const f=ZC(t,e+1,a);if(f)return f}const l=n.validators;if(l===null)return;const u=e===0?t.join(Dm):t.slice(e).join(Dm),d=l.length;for(let f=0;f<d;f++){const g=l[f];if(g.validator(u))return g.classGroupId}},xW=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?gW+r:void 0})(),vW=t=>{const{theme:e,classGroups:n}=t;return bW(n,e)},bW=(t,e)=>{const n=XC();for(const r in t){const s=t[r];ob(s,n,r,e)}return n},ob=(t,e,n,r)=>{const s=t.length;for(let a=0;a<s;a++){const l=t[a];wW(l,e,n,r)}},wW=(t,e,n,r)=>{if(typeof t=="string"){_W(t,e,n);return}if(typeof t=="function"){EW(t,e,n,r);return}NW(t,e,n,r)},_W=(t,e,n)=>{const r=t===""?e:eI(e,t);r.classGroupId=n},EW=(t,e,n,r)=>{if(TW(t)){ob(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(pW(n,t))},NW=(t,e,n,r)=>{const s=Object.entries(t),a=s.length;for(let l=0;l<a;l++){const[u,d]=s[l];ob(d,eI(e,u),n,r)}},eI=(t,e)=>{let n=t;const r=e.split(Dm),s=r.length;for(let a=0;a<s;a++){const l=r[a];let u=n.nextPart.get(l);u||(u=XC(),n.nextPart.set(l,u)),n=u}return n},TW=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,SW=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(a,l)=>{n[a]=l,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let l=n[a];if(l!==void 0)return l;if((l=r[a])!==void 0)return s(a,l),l},set(a,l){a in n?n[a]=l:s(a,l)}}},sx="!",i2=":",jW=[],a2=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),kW=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const a=[];let l=0,u=0,d=0,f;const g=s.length;for(let E=0;E<g;E++){const _=s[E];if(l===0&&u===0){if(_===i2){a.push(s.slice(d,E)),d=E+1;continue}if(_==="/"){f=E;continue}}_==="["?l++:_==="]"?l--:_==="("?u++:_===")"&&u--}const y=a.length===0?s:s.slice(d);let v=y,T=!1;y.endsWith(sx)?(v=y.slice(0,-1),T=!0):y.startsWith(sx)&&(v=y.slice(1),T=!0);const j=f&&f>d?f-d:void 0;return a2(a,T,v,j)};if(e){const s=e+i2,a=r;r=l=>l.startsWith(s)?a(l.slice(s.length)):a2(jW,!1,l,void 0,!0)}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},CW=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let a=0;a<n.length;a++){const l=n[a],u=l[0]==="[",d=e.has(l);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},IW=t=>({cache:SW(t.cacheSize),parseClassName:kW(t),sortModifiers:CW(t),...yW(t)}),AW=/\s+/,RW=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=e,l=[],u=t.trim().split(AW);let d="";for(let f=u.length-1;f>=0;f-=1){const g=u[f],{isExternal:y,modifiers:v,hasImportantModifier:T,baseClassName:j,maybePostfixModifierPosition:E}=n(g);if(y){d=g+(d.length>0?" "+d:d);continue}let _=!!E,C=r(_?j.substring(0,E):j);if(!C){if(!_){d=g+(d.length>0?" "+d:d);continue}if(C=r(j),!C){d=g+(d.length>0?" "+d:d);continue}_=!1}const D=v.length===0?"":v.length===1?v[0]:a(v).join(":"),k=T?D+sx:D,O=k+C;if(l.indexOf(O)>-1)continue;l.push(O);const I=s(C,_);for(let $=0;$<I.length;++$){const P=I[$];l.push(k+P)}d=g+(d.length>0?" "+d:d)}return d},PW=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=tI(n))&&(s&&(s+=" "),s+=r);return s},tI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=tI(t[r]))&&(n&&(n+=" "),n+=e);return n},DW=(t,...e)=>{let n,r,s,a;const l=d=>{const f=e.reduce((g,y)=>y(g),t());return n=IW(f),r=n.cache.get,s=n.cache.set,a=u,u(d)},u=d=>{const f=r(d);if(f)return f;const g=RW(d,n);return s(d,g),g};return a=l,(...d)=>a(PW(...d))},OW=[],an=t=>{const e=n=>n[t]||OW;return e.isThemeGetter=!0,e},nI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,MW=/^\d+\/\d+$/,LW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,VW=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FW=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,UW=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$W=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bl=t=>MW.test(t),Xe=t=>!!t&&!Number.isNaN(Number(t)),_a=t=>!!t&&Number.isInteger(Number(t)),Py=t=>t.endsWith("%")&&Xe(t.slice(0,-1)),Ti=t=>LW.test(t),BW=()=>!0,zW=t=>VW.test(t)&&!FW.test(t),sI=()=>!1,qW=t=>UW.test(t),WW=t=>$W.test(t),HW=t=>!Se(t)&&!je(t),KW=t=>Uc(t,oI,sI),Se=t=>nI.test(t),To=t=>Uc(t,lI,zW),Dy=t=>Uc(t,XW,Xe),o2=t=>Uc(t,iI,sI),GW=t=>Uc(t,aI,WW),Sf=t=>Uc(t,cI,qW),je=t=>rI.test(t),Lu=t=>$c(t,lI),YW=t=>$c(t,ZW),l2=t=>$c(t,iI),QW=t=>$c(t,oI),JW=t=>$c(t,aI),jf=t=>$c(t,cI,!0),Uc=(t,e,n)=>{const r=nI.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},$c=(t,e,n=!1)=>{const r=rI.exec(t);return r?r[1]?e(r[1]):n:!1},iI=t=>t==="position"||t==="percentage",aI=t=>t==="image"||t==="url",oI=t=>t==="length"||t==="size"||t==="bg-size",lI=t=>t==="length",XW=t=>t==="number",ZW=t=>t==="family-name",cI=t=>t==="shadow",eH=()=>{const t=an("color"),e=an("font"),n=an("text"),r=an("font-weight"),s=an("tracking"),a=an("leading"),l=an("breakpoint"),u=an("container"),d=an("spacing"),f=an("radius"),g=an("shadow"),y=an("inset-shadow"),v=an("text-shadow"),T=an("drop-shadow"),j=an("blur"),E=an("perspective"),_=an("aspect"),C=an("ease"),D=an("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],I=()=>[...O(),je,Se],$=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],A=()=>[je,Se,d],L=()=>[Bl,"full","auto",...A()],U=()=>[_a,"none","subgrid",je,Se],B=()=>["auto",{span:["full",_a,je,Se]},_a,je,Se],q=()=>[_a,"auto",je,Se],V=()=>["auto","min","max","fr",je,Se],se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Q=()=>["start","end","center","stretch","center-safe","end-safe"],le=()=>["auto",...A()],me=()=>[Bl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],J=()=>[t,je,Se],xe=()=>[...O(),l2,o2,{position:[je,Se]}],he=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",QW,KW,{size:[je,Se]}],ne=()=>[Py,Lu,To],ue=()=>["","none","full",f,je,Se],ye=()=>["",Xe,Lu,To],Ee=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>[Xe,Py,l2,o2],ke=()=>["","none",j,je,Se],Je=()=>["none",Xe,je,Se],pt=()=>["none",Xe,je,Se],vn=()=>[Xe,je,Se],nn=()=>[Bl,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ti],breakpoint:[Ti],color:[BW],container:[Ti],"drop-shadow":[Ti],ease:["in","out","in-out"],font:[HW],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ti],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ti],shadow:[Ti],spacing:["px",Xe],text:[Ti],"text-shadow":[Ti],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Bl,Se,je,_]}],container:["container"],columns:[{columns:[Xe,Se,je,u]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:I()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[_a,"auto",je,Se]}],basis:[{basis:[Bl,"full","auto",u,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Xe,Bl,"auto","initial","none",Se]}],grow:[{grow:["",Xe,je,Se]}],shrink:[{shrink:["",Xe,je,Se]}],order:[{order:[_a,"first","last","none",je,Se]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...Q(),"normal"]}],"justify-self":[{"justify-self":["auto",...Q()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...Q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Q(),{baseline:["","last"]}]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...Q(),"baseline"]}],"place-self":[{"place-self":["auto",...Q()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:le()}],mx:[{mx:le()}],my:[{my:le()}],ms:[{ms:le()}],me:[{me:le()}],mt:[{mt:le()}],mr:[{mr:le()}],mb:[{mb:le()}],ml:[{ml:le()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:me()}],w:[{w:[u,"screen",...me()]}],"min-w":[{"min-w":[u,"screen","none",...me()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...me()]}],h:[{h:["screen","lh",...me()]}],"min-h":[{"min-h":["screen","lh","none",...me()]}],"max-h":[{"max-h":["screen","lh",...me()]}],"font-size":[{text:["base",n,Lu,To]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,je,Dy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Py,Se]}],"font-family":[{font:[YW,Se,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,je,Se]}],"line-clamp":[{"line-clamp":[Xe,"none",je,Dy]}],leading:[{leading:[a,...A()]}],"list-image":[{"list-image":["none",je,Se]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",je,Se]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[Xe,"from-font","auto",je,To]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[Xe,"auto",je,Se]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je,Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je,Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:xe()}],"bg-repeat":[{bg:he()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_a,je,Se],radial:["",je,Se],conic:[_a,je,Se]},JW,GW]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:ue()}],"rounded-s":[{"rounded-s":ue()}],"rounded-e":[{"rounded-e":ue()}],"rounded-t":[{"rounded-t":ue()}],"rounded-r":[{"rounded-r":ue()}],"rounded-b":[{"rounded-b":ue()}],"rounded-l":[{"rounded-l":ue()}],"rounded-ss":[{"rounded-ss":ue()}],"rounded-se":[{"rounded-se":ue()}],"rounded-ee":[{"rounded-ee":ue()}],"rounded-es":[{"rounded-es":ue()}],"rounded-tl":[{"rounded-tl":ue()}],"rounded-tr":[{"rounded-tr":ue()}],"rounded-br":[{"rounded-br":ue()}],"rounded-bl":[{"rounded-bl":ue()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ee(),"hidden","none"]}],"divide-style":[{divide:[...Ee(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[...Ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Xe,je,Se]}],"outline-w":[{outline:["",Xe,Lu,To]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",g,jf,Sf]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",y,jf,Sf]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[Xe,To]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",v,jf,Sf]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[Xe,je,Se]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Xe]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ae()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":Ae()}],"mask-image-t-to-pos":[{"mask-t-to":Ae()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":Ae()}],"mask-image-r-to-pos":[{"mask-r-to":Ae()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":Ae()}],"mask-image-b-to-pos":[{"mask-b-to":Ae()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":Ae()}],"mask-image-l-to-pos":[{"mask-l-to":Ae()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":Ae()}],"mask-image-x-to-pos":[{"mask-x-to":Ae()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":Ae()}],"mask-image-y-to-pos":[{"mask-y-to":Ae()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[je,Se]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ae()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[Xe]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ae()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:xe()}],"mask-repeat":[{mask:he()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",je,Se]}],filter:[{filter:["","none",je,Se]}],blur:[{blur:ke()}],brightness:[{brightness:[Xe,je,Se]}],contrast:[{contrast:[Xe,je,Se]}],"drop-shadow":[{"drop-shadow":["","none",T,jf,Sf]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",Xe,je,Se]}],"hue-rotate":[{"hue-rotate":[Xe,je,Se]}],invert:[{invert:["",Xe,je,Se]}],saturate:[{saturate:[Xe,je,Se]}],sepia:[{sepia:["",Xe,je,Se]}],"backdrop-filter":[{"backdrop-filter":["","none",je,Se]}],"backdrop-blur":[{"backdrop-blur":ke()}],"backdrop-brightness":[{"backdrop-brightness":[Xe,je,Se]}],"backdrop-contrast":[{"backdrop-contrast":[Xe,je,Se]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Xe,je,Se]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Xe,je,Se]}],"backdrop-invert":[{"backdrop-invert":["",Xe,je,Se]}],"backdrop-opacity":[{"backdrop-opacity":[Xe,je,Se]}],"backdrop-saturate":[{"backdrop-saturate":[Xe,je,Se]}],"backdrop-sepia":[{"backdrop-sepia":["",Xe,je,Se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",je,Se]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Xe,"initial",je,Se]}],ease:[{ease:["linear","initial",C,je,Se]}],delay:[{delay:[Xe,je,Se]}],animate:[{animate:["none",D,je,Se]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,je,Se]}],"perspective-origin":[{"perspective-origin":I()}],rotate:[{rotate:Je()}],"rotate-x":[{"rotate-x":Je()}],"rotate-y":[{"rotate-y":Je()}],"rotate-z":[{"rotate-z":Je()}],scale:[{scale:pt()}],"scale-x":[{"scale-x":pt()}],"scale-y":[{"scale-y":pt()}],"scale-z":[{"scale-z":pt()}],"scale-3d":["scale-3d"],skew:[{skew:vn()}],"skew-x":[{"skew-x":vn()}],"skew-y":[{"skew-y":vn()}],transform:[{transform:[je,Se,"","none","gpu","cpu"]}],"transform-origin":[{origin:I()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:nn()}],"translate-x":[{"translate-x":nn()}],"translate-y":[{"translate-y":nn()}],"translate-z":[{"translate-z":nn()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je,Se]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je,Se]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[Xe,Lu,To,Dy]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},lb=DW(eH);function tH(...t){return lb(ab(t))}const be=de.forwardRef(({className:t,variant:e="primary",size:n="md",children:r,...s},a)=>{const l={primary:"bg-primary text-white hover:bg-primary/90 shadow-lg shadow-primary/20",secondary:"bg-accent text-primary hover:bg-accent/90 shadow-lg shadow-accent/20",outline:"border-2 border-primary text-primary hover:bg-primary/5",ghost:"text-primary hover:bg-primary/5",gradient:"bg-gradient-to-r from-brand-purple to-brand-blue text-white shadow-lg shadow-brand-blue/20 hover:shadow-xl hover:shadow-brand-blue/30"},u={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg font-bold"};return o.jsx(Qe.button,{ref:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:tH("relative inline-flex items-center justify-center rounded-xl font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50",l[e],u[n],t),...s,children:r})});be.displayName="Button";const c2=[{name:"",path:"/",icon:qr},{name:"",path:"/features",icon:QC},{name:"",path:"/units",icon:Xn},{name:"",path:"/pricing",icon:Kr},{name:" ",path:"/about",icon:dq},{name:" ",path:"/contact",icon:kq}],nH=()=>{const[t,e]=N.useState(!1),{user:n,logout:r}=Xr();return o.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 h-[80px]",children:[o.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-md border-b border-gray-100"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-8 relative h-full flex items-center justify-between",children:[o.jsxs(Ke,{to:"/",className:"text-3xl font-extrabold tracking-tight flex items-center gap-1",children:[o.jsx("span",{className:"bg-gradient-to-tr from-brand-purple to-brand-blue bg-clip-text text-transparent",children:""}),o.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-accent mt-3"})]}),o.jsx("div",{className:"hidden md:flex items-center gap-8",children:c2.map(s=>o.jsx(Ke,{to:s.path,className:"text-brand-dark hover:text-brand-blue font-medium transition-colors flex items-center gap-2",children:s.name},s.path))}),o.jsxs("div",{className:"flex items-center gap-4",children:[n?o.jsxs("div",{className:"flex items-center gap-3 pl-2",children:[o.jsxs("div",{className:"hidden md:flex flex-col items-end mr-2",children:[o.jsx("span",{className:"text-sm font-bold text-brand-dark",children:n.name}),o.jsx("span",{className:"text-xs text-brand-blue bg-brand-blue/10 px-2 py-0.5 rounded-full",children:""})]}),o.jsx(Ke,{to:"/dashboard",children:o.jsxs(be,{size:"sm",variant:"outline",className:"hidden md:inline-flex border-gray-200 hover:border-brand-blue hover:text-brand-blue",children:[o.jsx(Fc,{className:"w-4 h-4 ml-2"})," "]})}),o.jsx("button",{onClick:r,className:"p-2.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all border border-transparent hover:border-red-100",title:" ",children:o.jsx(rb,{className:"w-5 h-5"})})]}):o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ke,{to:"/login",className:"hidden md:block text-brand-dark font-medium hover:text-brand-blue",children:" "}),o.jsx(Ke,{to:"/register",children:o.jsx(be,{size:"sm",variant:"gradient",className:"hidden md:inline-flex",children:" "})})]}),o.jsx("button",{onClick:()=>e(!t),className:"md:hidden p-2 text-brand-dark hover:bg-gray-100 rounded-lg transition-colors",children:t?o.jsx(Ha,{}):o.jsx(YC,{})})]})]}),o.jsx(qa,{children:t&&o.jsx(Qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-b border-gray-100 overflow-hidden shadow-xl",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-4 flex flex-col gap-4",children:[c2.map(s=>o.jsxs(Ke,{to:s.path,onClick:()=>e(!1),className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-xl transition-colors text-brand-dark",children:[o.jsx(s.icon,{className:"w-5 h-5 text-brand-blue"}),o.jsx("span",{className:"font-medium",children:s.name})]},s.path)),n?o.jsxs(o.Fragment,{children:[o.jsx(Ke,{to:"/dashboard",children:o.jsx(be,{className:"w-full mb-3",variant:"outline",children:" "})}),o.jsx(be,{onClick:r,className:"w-full text-red-500 border-red-200 hover:bg-red-50",variant:"ghost",children:" "})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ke,{to:"/login",children:o.jsx(be,{className:"w-full mb-3",variant:"ghost",children:" "})}),o.jsx(Ke,{to:"/register",children:o.jsx(be,{className:"w-full",variant:"gradient",children:" "})})]})]})})})]})},rH=()=>o.jsx("footer",{className:"bg-white pt-24 pb-12 border-t border-gray-100 mt-20",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ke,{to:"/",className:"text-3xl font-bold bg-gradient-to-r from-brand-purple to-brand-blue bg-clip-text text-transparent inline-block mb-4",children:""}),o.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:"     .         ."}),o.jsx("div",{className:"flex items-center gap-4",children:[nq,sW,fq,yq].map((t,e)=>o.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-gray-50 text-gray-400 flex items-center justify-center hover:bg-brand-blue hover:text-white transition-all duration-300",children:o.jsx(t,{className:"w-5 h-5"})},e))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-brand-dark mb-6 text-lg",children:""}),o.jsxs("ul",{className:"space-y-4 text-sm font-medium text-gray-500",children:[o.jsx("li",{children:o.jsx(Ke,{to:"/features",className:"hover:text-brand-blue transition-colors",children:""})}),o.jsx("li",{children:o.jsx(Ke,{to:"/pricing",className:"hover:text-brand-blue transition-colors",children:""})}),o.jsx("li",{children:o.jsx(Ke,{to:"/units",className:"hover:text-brand-blue transition-colors",children:""})}),o.jsx("li",{children:o.jsx(Ke,{to:"/about",className:"hover:text-brand-blue transition-colors",children:" "})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-brand-dark mb-6 text-lg",children:""}),o.jsxs("ul",{className:"space-y-4 text-sm font-medium text-gray-500",children:[o.jsx("li",{children:o.jsx(Ke,{to:"/contact",className:"hover:text-brand-blue transition-colors",children:" "})}),o.jsx("li",{children:o.jsx(Ke,{to:"#",className:"hover:text-brand-blue transition-colors",children:" "})}),o.jsx("li",{children:o.jsx(Ke,{to:"#",className:"hover:text-brand-blue transition-colors",children:" "})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-brand-dark mb-6 text-lg",children:" "}),o.jsxs("ul",{className:"space-y-4 text-sm font-medium text-gray-500",children:[o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx(Rd,{className:"w-5 h-5 text-brand-blue shrink-0"}),o.jsx("span",{children:"   "})]}),o.jsxs("li",{className:"flex items-center gap-3",children:[o.jsx(Xd,{className:"w-5 h-5 text-brand-blue shrink-0"}),o.jsx("span",{dir:"ltr",children:"+966 50 000 0000"})]}),o.jsxs("li",{className:"flex items-center gap-3",children:[o.jsx(si,{className:"w-5 h-5 text-brand-blue shrink-0"}),o.jsx("span",{children:"help@arkan.app"})]})]})]})]}),o.jsx("div",{className:"border-t border-gray-100 pt-8 text-center",children:o.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear(),"  .   ."]})})]})}),Qr=({children:t})=>o.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50 font-cairo text-brand-dark",dir:"rtl",children:[o.jsx(nH,{}),o.jsx("main",{className:"flex-grow",children:t}),o.jsx(rH,{})]});function sH(...t){return lb(ab(t))}const ws=de.forwardRef(({className:t,variant:e="default",children:n,...r},s)=>{const a={default:"bg-white border border-gray-100 shadow-xl shadow-gray-200/50",glass:"glass","glass-dark":"glass-dark",gradient:"card-gradient"};return o.jsx(Qe.div,{ref:s,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.5},className:sH("rounded-2xl p-6 overflow-hidden",a[e],t),...r,children:n})});ws.displayName="Card";const uI=({isOpen:t,onClose:e,plan:n})=>{const[r,s]=N.useState("form"),[a,l]=N.useState(!1),[u,d]=N.useState(""),{subscribe:f,user:g}=Xr();Ns(),de.useEffect(()=>{t&&(s("form"),l(!1),g?.email&&d(g.email))},[t,g]);const y=async v=>{v.preventDefault(),l(!0),await new Promise(T=>setTimeout(T,1500)),n&&f(n.name,n.price,30),l(!1),s("success")};return n?o.jsx(qa,{children:t&&o.jsxs(o.Fragment,{children:[o.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:e}),o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:o.jsxs(Qe.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.5},className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden pointer-events-auto border border-white/20",children:[o.jsx("button",{onClick:e,className:"absolute top-4 left-4 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors z-10",children:o.jsx(Ha,{className:"w-5 h-5"})}),r==="form"?o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h3",{className:"text-sm font-bold text-brand-blue uppercase tracking-wider mb-2",children:" "}),o.jsx("h2",{className:"text-3xl font-bold text-brand-dark mb-2",children:n.name}),o.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-500",children:[o.jsx("span",{className:"text-2xl font-bold text-brand-dark",children:n.price}),o.jsxs("span",{className:"text-sm",children:[". / ",n.period||""]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 mb-8 border border-gray-100",children:[o.jsx("h4",{className:"font-bold text-brand-dark mb-4 text-sm",children:" :"}),o.jsxs("ul",{className:"space-y-3",children:[n.features.slice(0,4).map((v,T)=>o.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-600",children:[o.jsx("div",{className:"w-5 h-5 rounded-full bg-white border border-gray-200 flex items-center justify-center shrink-0 text-green-500",children:o.jsx(ys,{className:"w-3 h-3"})}),v]},T)),n.features.length>4&&o.jsxs("li",{className:"text-xs text-gray-400 pr-8",children:["+",n.features.length-4,"  ..."]})]})]}),o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsx("input",{type:"email",required:!0,value:u,onChange:v=>d(v.target.value),placeholder:"name@company.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all"})]}),o.jsx(be,{variant:"gradient",className:"w-full text-lg py-4 shadow-lg shadow-brand-blue/20",disabled:a,children:a?o.jsxs(o.Fragment,{children:[o.jsx(vq,{className:"w-5 h-5 animate-spin mr-2"})," ..."]}):" "})]})]}):o.jsxs("div",{className:"p-12 text-center flex flex-col items-center justify-center",children:[o.jsx(Qe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6",children:o.jsx(ys,{className:"w-10 h-10"})}),o.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-2",children:"  !"}),o.jsxs("p",{className:"text-gray-500 mb-8 max-w-xs mx-auto",children:["    ",n.name,".       ."]}),o.jsx(be,{onClick:e,variant:"outline",className:"w-full",children:""})]})]})})]})}):null},iH=()=>{const[t,e]=N.useState(!1),[n,r]=N.useState(null),s=a=>{const l={name:a.name,price:a.price,features:a.feat||a.features||[],period:""};r(l),e(!0)};return o.jsxs(Qr,{children:[o.jsxs("section",{className:"relative h-[750px] flex items-center justify-center overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&q=80&w=2670",alt:"City Skyline",className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-dark/95 via-brand-dark/80 to-brand-dark/40"})]}),o.jsx("div",{className:"container mx-auto px-6 lg:px-12 relative z-10 w-full",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[o.jsx("div",{className:"text-center lg:text-right",children:o.jsxs(Qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[o.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold leading-tight mb-8 text-white",children:["   ",o.jsx("br",{}),o.jsx("span",{className:"text-brand-accent bg-clip-text text-transparent bg-gradient-to-l from-brand-blue to-brand-light",children:" "})]}),o.jsx("p",{className:"text-xl lg:text-2xl text-gray-200 mb-12 leading-relaxed max-w-2xl mx-auto lg:mx-0 font-light",children:" ..         .      ."}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-6",children:[o.jsx(be,{size:"lg",variant:"gradient",className:"w-full sm:w-auto min-w-[200px] shadow-lg shadow-brand-blue/20 hover:shadow-brand-blue/40 text-lg py-4",children:" "}),o.jsx(Ke,{to:"/features",className:"w-full sm:w-auto",children:o.jsx(be,{size:"lg",variant:"outline",className:"w-full min-w-[200px] text-white border-white/30 hover:bg-white hover:text-brand-dark hover:border-white text-lg py-4 backdrop-blur-sm",children:" "})})]})]})}),o.jsx(Qe.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:1,delay:.2},className:"hidden lg:block relative",children:o.jsxs("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 p-8 rounded-3xl shadow-2xl max-w-md mr-auto transform rotate-2 hover:rotate-0 transition-all duration-500 ease-out group cursor-default",children:[o.jsxs("div",{className:"flex items-center gap-5 mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-blue to-brand-purple rounded-2xl flex items-center justify-center shadow-lg",children:o.jsx(Xn,{className:"w-8 h-8 text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-brand-light font-medium tracking-wide",children:"  "}),o.jsx("p",{className:"text-3xl font-bold text-white tracking-tight",children:"124 "})]})]}),o.jsx("div",{className:"relative h-3 bg-brand-dark/50 rounded-full overflow-hidden mb-4 border border-white/5",children:o.jsx(Qe.div,{className:"absolute h-full bg-brand-accent rounded-full",initial:{width:"0%"},animate:{width:"85%"},transition:{duration:1.5,delay:.5}})}),o.jsxs("div",{className:"flex justify-between items-end text-white",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-xs text-brand-light mb-1",children:" "}),o.jsx("span",{className:"text-xl font-bold",children:"85%"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-sm font-medium bg-green-400/10 px-2 py-1 rounded-lg border border-green-400/20",children:[o.jsx(up,{className:"w-4 h-4"}),o.jsx("span",{children:"+12% "})]})]})]})})]})})]}),o.jsx("section",{className:"py-24 bg-white",children:o.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[o.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[o.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-brand-light text-brand-blue text-sm font-bold tracking-wide uppercase mb-4",children:" "}),o.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-brand-dark",children:"   "})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[{icon:Yr,title:" ",text:"          .",color:"text-blue-600",bg:"bg-blue-50"},{icon:Pm,title:" ",text:"      .",color:"text-green-600",bg:"bg-green-50"},{icon:Wi,title:" ",text:"       .",color:"text-orange-600",bg:"bg-orange-50"},{icon:Sz,title:" ",text:"      .",color:"text-purple-600",bg:"bg-purple-50"},{icon:eb,title:" ",text:"      AI.",color:"text-pink-600",bg:"bg-pink-50"},{icon:Iz,title:" ",text:"      .",color:"text-indigo-600",bg:"bg-indigo-50"}].map((a,l)=>o.jsxs(ws,{className:"group p-8 border border-gray-100 hover:border-brand-blue/20 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 h-full",children:[o.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center mb-6 text-xl shrink-0 transition-transform group-hover:scale-110 duration-300 ${a.bg} ${a.color}`,children:o.jsx(a.icon,{className:"w-8 h-8"})}),o.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-4 group-hover:text-brand-blue transition-colors",children:a.title}),o.jsx("p",{className:"text-gray-500 leading-relaxed font-medium",children:a.text})]},l))})]})}),o.jsx("section",{className:"py-24 bg-slate-50 border-t border-gray-100",children:o.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[o.jsxs("div",{className:"text-center mb-20",children:[o.jsx("h2",{className:"text-4xl font-bold text-brand-dark mb-6",children:"   "}),o.jsx("p",{className:"text-xl text-gray-500 max-w-2xl mx-auto",children:"    .       ."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{name:"",price:"629",role:" ",feat:["  30 ","3 ","   PDF"," ","  ","  "],rec:!1},{name:"",price:"1,329",role:" ",feat:["120  ","10 ","  "," AI (+)","  ","  PDF","   "],rec:!0},{name:"",price:"2,449",role:" ",feat:["  ","  ","  (API)","  ","  ","  ","  Premium"],rec:!1},{name:"Arkan AI",price:"419",role:" ",feat:["  ","  ","  ","  "],rec:!1,addon:!0}].map((a,l)=>o.jsxs("div",{className:`flex flex-col p-8 rounded-3xl transition-all duration-300 relative ${a.rec?"bg-white shadow-2xl scale-105 z-10 border-2 border-brand-blue":"bg-white shadow-lg border border-gray-100 hover:scale-105 hover:shadow-xl"}`,children:[a.rec&&o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 bg-brand-blue text-white text-xs font-bold px-4 py-1.5 rounded-b-xl shadow-md",children:" "}),o.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-2",children:a.name}),o.jsx("p",{className:"text-sm text-gray-400 mb-8 font-medium",children:a.role}),o.jsxs("div",{className:"mb-8",children:[o.jsx("span",{className:"text-4xl font-bold text-brand-dark",children:a.price}),o.jsx("span",{className:"text-gray-500 text-sm mr-2",children:". /"})]}),o.jsx("div",{className:"space-y-4 mb-8 flex-grow",children:a.feat.map((u,d)=>o.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[o.jsx("div",{className:"w-5 h-5 rounded-full bg-brand-light flex items-center justify-center shrink-0",children:o.jsx(ys,{className:"w-3 h-3 text-brand-blue"})}),o.jsx("span",{className:"font-medium",children:u})]},d))}),o.jsx(be,{onClick:()=>s(a),variant:a.rec?"gradient":"outline",className:`w-full py-6 font-bold text-base ${a.addon?"border-brand-purple text-brand-purple hover:bg-brand-purple hover:text-white":""}`,children:a.addon?" ":" "})]},l))}),o.jsxs("div",{className:"mt-12 text-center",children:[o.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"  "}),o.jsxs("div",{className:"flex items-center justify-center gap-6 opacity-50 hover:opacity-100 transition-opacity duration-300",children:[o.jsx("div",{className:"bg-white rounded-lg px-3 py-2 shadow-sm border border-gray-100",children:o.jsxs("svg",{className:"h-6 w-auto",viewBox:"0 0 750 471",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M278.198 334.228L311.356 138.997H364.399L331.241 334.228H278.198Z",fill:"#00579F"}),o.jsx("path",{d:"M524.307 142.687C513.542 138.878 496.479 134.772 475.605 134.772C423.237 134.772 386.832 161.293 386.566 199.97C386.054 228.758 412.967 244.838 433.337 254.488C454.211 264.396 461.273 270.864 461.188 279.971C461.023 293.808 444.556 300.018 429.162 300.018C408.04 300.018 396.858 296.886 379.445 289.237L372.554 285.956L365.053 332.074C377.757 337.629 401.426 342.449 426.002 342.709C481.533 342.709 517.257 316.617 517.683 275.409C517.854 252.714 503.538 235.469 472.301 221.209C453.442 211.899 441.91 205.686 442.084 195.951C442.084 187.236 452.162 177.919 473.97 177.919C492.342 177.573 505.974 181.343 516.691 185.152L521.98 187.563L529.651 142.687H524.307Z",fill:"#00579F"}),o.jsx("path",{d:"M661.615 138.997H620.938C608.573 138.997 599.406 142.427 593.871 155.063L515.259 334.228H570.704C570.704 334.228 579.943 308.913 582.024 303.018C588.037 303.018 641.934 303.105 649.681 303.105C651.251 310.734 656.123 334.228 656.123 334.228H705L661.615 138.997ZM597.545 260.089C601.819 249.126 618.709 204.605 618.709 204.605C618.443 205.086 622.974 193.64 625.556 186.438L629.152 202.864C629.152 202.864 639.411 250.693 641.575 260.089H597.545Z",fill:"#00579F"}),o.jsx("path",{d:"M232.903 138.997L181.111 269.372L175.605 242.317C166.518 212.416 138.448 179.832 107.083 163.581L154.608 334.054L210.479 333.967L288.775 138.997H232.903Z",fill:"#00579F"}),o.jsx("path",{d:"M131.92 138.997H47.894L47 143.277C113.396 159.9 158.141 199.021 175.604 242.317L157.817 155.322C154.739 143.169 145.706 139.388 131.92 138.997Z",fill:"#FAA61A"})]})}),o.jsx("div",{className:"bg-white rounded-lg px-3 py-2 shadow-sm border border-gray-100",children:o.jsxs("svg",{className:"h-6 w-auto",viewBox:"0 0 152 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"47",cy:"50",r:"40",fill:"#EB001B"}),o.jsx("circle",{cx:"105",cy:"50",r:"40",fill:"#F79E1B"}),o.jsx("path",{d:"M76 20.2C84.7 27.4 90 38.1 90 50C90 61.9 84.7 72.6 76 79.8C67.3 72.6 62 61.9 62 50C62 38.1 67.3 27.4 76 20.2Z",fill:"#FF5F00"})]})}),o.jsx("div",{className:"bg-white rounded-lg px-3 py-2 shadow-sm border border-gray-100",children:o.jsxs("svg",{className:"h-6 w-auto",viewBox:"0 0 200 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{width:"200",height:"80",rx:"8",fill:"#1A4393"}),o.jsx("text",{x:"100",y:"48",textAnchor:"middle",fill:"white",fontSize:"28",fontWeight:"bold",fontFamily:"Arial",children:"mada"})]})})]})]})]})}),o.jsx("section",{className:"py-24 bg-white",children:o.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-16 gap-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-4xl font-bold text-brand-dark mb-4",children:"  "}),o.jsx("p",{className:"text-xl text-gray-500",children:"      ."})]}),o.jsx(Ke,{to:"/units",children:o.jsxs(be,{variant:"ghost",className:"hidden md:flex items-center gap-2 group text-brand-blue hover:bg-brand-light px-6 py-3 rounded-xl transition-all",children:[o.jsx("span",{className:"font-bold",children:"  "}),o.jsx(HC,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"})]})})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10",children:[{img:"https://images.unsplash.com/photo-1600596542815-2a4fe053155e",title:"  -  ",price:"85,000",area:"450",loc:" ",type:""},{img:"https://images.unsplash.com/photo-1600607686527-6fb886090705",title:"  -  ",price:"45,000",area:"180",loc:" - ",type:""},{img:"https://images.unsplash.com/photo-1512917774080-9991f1c4c750",title:"  - ",price:"60,000",area:"320",loc:"",type:" "}].map((a,l)=>o.jsxs("div",{className:"group bg-white rounded-3xl overflow-hidden shadow-lg border border-gray-100 hover:shadow-2xl hover:border-brand-blue/30 transition-all duration-500 flex flex-col",children:[o.jsxs("div",{className:"relative h-72 overflow-hidden",children:[o.jsx("img",{src:`${a.img}?auto=format&fit=crop&q=80&w=800`,alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 ease-in-out"}),o.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[o.jsx("span",{className:"bg-white/95 backdrop-blur shadow-sm px-4 py-1.5 rounded-full text-brand-dark font-bold text-xs",children:a.type}),o.jsx("span",{className:"bg-green-500/90 backdrop-blur shadow-sm px-4 py-1.5 rounded-full text-white font-bold text-xs animate-pulse",children:""})]})]}),o.jsxs("div",{className:"p-8 flex flex-col flex-grow",children:[o.jsx("div",{className:"flex justify-between items-start mb-6",children:o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-xl text-brand-dark mb-2 group-hover:text-brand-blue transition-colors line-clamp-1",children:a.title}),o.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[o.jsx(Xz,{className:"w-3.5 h-3.5"})," ",a.loc]})]})}),o.jsxs("div",{className:"mt-auto pt-6 border-t border-gray-100 flex items-center justify-between",children:[o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:"text-2xl font-bold text-brand-dark",children:[a.price," ",o.jsx("span",{className:"text-xs text-gray-400 font-normal",children:"."})]})}),o.jsx(be,{size:"sm",variant:"secondary",className:"hover:bg-brand-blue hover:text-white transition-colors",children:" "})]})]})]},l))})]})}),o.jsxs("section",{className:"py-24 bg-white relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-brand-light/30 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/2 pointer-events-none"}),o.jsx("div",{className:"container mx-auto px-6 lg:px-12 relative z-10",children:o.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-gray-100 flex flex-col md:flex-row",children:[o.jsxs("div",{className:"bg-brand-dark relative w-full md:w-2/5 p-12 text-white flex flex-col justify-between overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-brand-blue/20"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-brand-purple/50 rounded-full blur-[80px]"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("h3",{className:"text-3xl font-bold mb-6",children:" "}),o.jsxs("p",{className:"text-brand-light/80 leading-relaxed mb-8",children:["     .",o.jsx("br",{}),"      ."]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:o.jsx(Xd,{className:"w-5 h-5 text-brand-accent"})}),o.jsx("span",{className:"font-bold text-lg",dir:"ltr",children:"+966 50 123 4567"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:o.jsx(si,{className:"w-5 h-5 text-brand-accent"})}),o.jsx("span",{children:"hello@arkan.app"})]})]})]})]}),o.jsx("div",{className:"w-full md:w-3/5 p-12 bg-white",children:o.jsxs("form",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all bg-gray-50 focus:bg-white"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all bg-gray-50 focus:bg-white"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsx("input",{type:"email",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all bg-gray-50 focus:bg-white"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:""}),o.jsx("textarea",{rows:4,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all bg-gray-50 focus:bg-white resize-none"})]}),o.jsx(be,{size:"lg",variant:"gradient",className:"w-full justify-center text-lg font-bold shadow-lg shadow-brand-blue/20 hover:shadow-brand-blue/40",children:" "})]})})]})})]}),o.jsx(uI,{isOpen:t,onClose:()=>e(!1),plan:n})]})},aH=()=>{const t=[{title:"   ",desc:"       .                .",icon:sq,color:"text-blue-500",bg:"bg-blue-50",img:"https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?auto=format&fit=crop&q=80&w=1000"},{title:"   ",desc:"    .                   .",icon:Dq,color:"text-orange-500",bg:"bg-orange-50",img:"https://images.unsplash.com/photo-1581092921461-eab62e97a783?auto=format&fit=crop&q=80&w=1000"},{title:"  ",desc:"                     .",icon:Pm,color:"text-green-500",bg:"bg-green-50",img:"https://images.unsplash.com/photo-1554224154-26032ffc0d07?auto=format&fit=crop&q=80&w=1000"},{title:"  ",desc:"      .      ...         .",icon:ib,color:"text-purple-500",bg:"bg-purple-50",img:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&q=80&w=1000"},{title:"  ",desc:"    .                .",icon:eb,color:"text-pink-500",bg:"bg-pink-50",img:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=1000"},{title:"  ",desc:"            .     .",icon:up,color:"text-indigo-500",bg:"bg-indigo-50",img:"https://images.unsplash.com/photo-1543286386-713df548e9cc?auto=format&fit=crop&q=80&w=1000"}];return o.jsx(Qr,{children:o.jsx("div",{className:"bg-white pt-20 pb-32",children:o.jsxs("div",{className:"container",children:[o.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[o.jsx("span",{className:"text-brand-blue font-bold tracking-wider uppercase",children:" "}),o.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-brand-dark mt-3 mb-6",children:"   "}),o.jsx("p",{className:"text-gray-600 text-lg",children:"            ."})]}),o.jsx("div",{className:"space-y-32",children:t.map((e,n)=>o.jsxs(Qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.7},className:`flex flex-col ${n%2===0?"lg:flex-row":"lg:flex-row-reverse"} items-center gap-12 lg:gap-24`,children:[o.jsxs("div",{className:"lg:w-1/2 space-y-6 text-center lg:text-right",children:[o.jsx("div",{className:`w-16 h-16 rounded-2xl ${e.bg} ${e.color} flex items-center justify-center mx-auto lg:mx-0 shadow-lg`,children:o.jsx(e.icon,{className:"w-8 h-8"})}),o.jsx("h2",{className:"text-3xl font-bold text-brand-dark",children:e.title}),o.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:e.desc})]}),o.jsx("div",{className:"lg:w-1/2 w-full",children:o.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl group",children:[o.jsx("div",{className:"absolute inset-0 bg-brand-dark/20 group-hover:bg-transparent transition-colors duration-500 z-10"}),o.jsx("img",{src:e.img,alt:e.title,className:"w-full h-[400px] object-cover transform group-hover:scale-105 transition-transform duration-700"})]})})]},n))})]})})})},oH=()=>{const[t,e]=N.useState(!1),[n,r]=N.useState(null),s=l=>{r({name:l.name,price:l.price,features:l.features||[],period:""}),e(!0)},a=[{name:"",price:"629",desc:"  ",icon:QC,features:["  30 ","3 ","   PDF"," ","  ","  "]},{name:"",price:"1,329",desc:"  ",popular:!0,icon:fW,features:["120  ","10 ","  ","   ( + )","  ","  PDF","   "]},{name:"",price:"2,449",desc:"  ",icon:Xn,features:["   ","  ","  (API)","  ","  ","   ","   (Premium)"]}];return o.jsxs(Qr,{children:[o.jsx("div",{className:"bg-slate-50 py-20 min-h-screen",children:o.jsxs("div",{className:"container",children:[o.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[o.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-brand-dark mb-6",children:"   "}),o.jsx("p",{className:"text-gray-600 text-lg",children:"           ."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:a.map((l,u)=>o.jsxs(ws,{className:`relative flex flex-col ${l.popular?"border-brand-blue shadow-2xl scale-105 z-10":""}`,variant:(l.popular,"default"),children:[l.popular&&o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 bg-gradient-to-r from-brand-blue to-cyan-500 text-white px-4 py-1 rounded-b-xl text-sm font-bold",children:" "}),o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 ${l.popular?"bg-brand-blue text-white":"bg-brand-light text-brand-dark"}`,children:o.jsx(l.icon,{className:"w-7 h-7"})}),o.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-2",children:l.name}),o.jsx("p",{className:"text-gray-500",children:l.desc})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("span",{className:"text-4xl font-bold text-brand-dark",children:l.price}),o.jsx("span",{className:"text-gray-500 mr-2",children:" / "})]}),o.jsx("div",{className:"flex-grow mb-8 space-y-4",children:l.features.map((d,f)=>o.jsxs("div",{className:"flex items-start gap-3 text-gray-600",children:[o.jsx(ys,{className:`w-5 h-5 shrink-0 ${l.popular?"text-brand-blue":"text-green-500"}`}),o.jsx("span",{children:d})]},f))}),o.jsx(be,{onClick:()=>s(l),variant:l.popular?"gradient":"outline",className:"w-full",children:" "})]},u))}),o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(ws,{variant:"gradient",className:"flex flex-col md:flex-row items-center justify-between p-8 lg:p-12",children:[o.jsxs("div",{className:"flex items-start gap-6 mb-6 md:mb-0",children:[o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center text-white shrink-0",children:o.jsx(eb,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"   ()"}),o.jsx("p",{className:"text-blue-100 mb-4",children:"        ."}),o.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-2 text-blue-50 text-sm",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(ys,{className:"w-4 h-4"}),"   "]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(ys,{className:"w-4 h-4"}),"   "]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(ys,{className:"w-4 h-4"}),"   "]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(ys,{className:"w-4 h-4"}),"   "]})]})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-3 shrink-0",children:[o.jsxs("div",{className:"text-white text-right",children:[o.jsx("span",{className:"text-3xl font-bold",children:"419"}),o.jsx("span",{className:"text-blue-100 mr-2",children:" / "})]}),o.jsx(be,{onClick:()=>s({name:"  ",price:"419",features:["  ","  ","  ","  "]}),className:"bg-white text-brand-dark hover:bg-gray-100 w-full md:w-auto",children:" "})]})]})}),o.jsxs("div",{className:"mt-16 text-center",children:[o.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"  "}),o.jsxs("div",{className:"flex items-center justify-center gap-8 opacity-60 hover:opacity-100 transition-opacity duration-300",children:[o.jsx("div",{className:"bg-white rounded-lg px-4 py-3 shadow-sm border border-gray-100",children:o.jsxs("svg",{className:"h-8 w-auto",viewBox:"0 0 750 471",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M278.198 334.228L311.356 138.997H364.399L331.241 334.228H278.198Z",fill:"#00579F"}),o.jsx("path",{d:"M524.307 142.687C513.542 138.878 496.479 134.772 475.605 134.772C423.237 134.772 386.832 161.293 386.566 199.97C386.054 228.758 412.967 244.838 433.337 254.488C454.211 264.396 461.273 270.864 461.188 279.971C461.023 293.808 444.556 300.018 429.162 300.018C408.04 300.018 396.858 296.886 379.445 289.237L372.554 285.956L365.053 332.074C377.757 337.629 401.426 342.449 426.002 342.709C481.533 342.709 517.257 316.617 517.683 275.409C517.854 252.714 503.538 235.469 472.301 221.209C453.442 211.899 441.91 205.686 442.084 195.951C442.084 187.236 452.162 177.919 473.97 177.919C492.342 177.573 505.974 181.343 516.691 185.152L521.98 187.563L529.651 142.687H524.307Z",fill:"#00579F"}),o.jsx("path",{d:"M661.615 138.997H620.938C608.573 138.997 599.406 142.427 593.871 155.063L515.259 334.228H570.704C570.704 334.228 579.943 308.913 582.024 303.018C588.037 303.018 641.934 303.105 649.681 303.105C651.251 310.734 656.123 334.228 656.123 334.228H705L661.615 138.997ZM597.545 260.089C601.819 249.126 618.709 204.605 618.709 204.605C618.443 205.086 622.974 193.64 625.556 186.438L629.152 202.864C629.152 202.864 639.411 250.693 641.575 260.089H597.545Z",fill:"#00579F"}),o.jsx("path",{d:"M232.903 138.997L181.111 269.372L175.605 242.317C166.518 212.416 138.448 179.832 107.083 163.581L154.608 334.054L210.479 333.967L288.775 138.997H232.903Z",fill:"#00579F"}),o.jsx("path",{d:"M131.92 138.997H47.894L47 143.277C113.396 159.9 158.141 199.021 175.604 242.317L157.817 155.322C154.739 143.169 145.706 139.388 131.92 138.997Z",fill:"#FAA61A"})]})}),o.jsx("div",{className:"bg-white rounded-lg px-4 py-3 shadow-sm border border-gray-100",children:o.jsxs("svg",{className:"h-8 w-auto",viewBox:"0 0 152 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"47",cy:"50",r:"40",fill:"#EB001B"}),o.jsx("circle",{cx:"105",cy:"50",r:"40",fill:"#F79E1B"}),o.jsx("path",{d:"M76 20.2C84.7 27.4 90 38.1 90 50C90 61.9 84.7 72.6 76 79.8C67.3 72.6 62 61.9 62 50C62 38.1 67.3 27.4 76 20.2Z",fill:"#FF5F00"})]})}),o.jsx("div",{className:"bg-white rounded-lg px-4 py-3 shadow-sm border border-gray-100",children:o.jsxs("svg",{className:"h-8 w-auto",viewBox:"0 0 200 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{width:"200",height:"80",rx:"8",fill:"#1A4393"}),o.jsx("text",{x:"100",y:"48",textAnchor:"middle",fill:"white",fontSize:"28",fontWeight:"bold",fontFamily:"Arial",children:"mada"})]})})]}),o.jsx("p",{className:"text-gray-400 text-xs mt-4",children:"       "})]})]})}),o.jsx(uI,{isOpen:t,onClose:()=>e(!1),plan:n})]})},lH=()=>{const[t,e]=N.useState("all"),n=[{id:1,title:"   ",price:"85,000",loc:" - ",beds:5,baths:4,area:"450",type:"",status:"",img:"https://images.unsplash.com/photo-1600596542815-2a4fe053155e?auto=format&fit=crop&q=80&w=800"},{id:2,title:"   ",price:"45,000",loc:" - ",beds:3,baths:2,area:"180",type:"",status:"",img:"https://images.unsplash.com/photo-1600607686527-6fb886090705?auto=format&fit=crop&q=80&w=800"},{id:3,title:" ",price:"60,000",loc:" - ",beds:4,baths:3,area:"300",type:"",status:"",img:"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&q=80&w=800"},{id:4,title:"  ",price:"35,000",loc:" - ",beds:1,baths:1,area:"60",type:"",status:"",img:"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?auto=format&fit=crop&q=80&w=800"},{id:5,title:" ",price:"120,000",loc:" - ",beds:6,baths:5,area:"600",type:"",status:"",img:"https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?auto=format&fit=crop&q=80&w=800"},{id:6,title:"  ()",price:"90,000",loc:" - ",beds:4,baths:4,area:"350",type:"",status:"",img:"https://images.unsplash.com/photo-1600566753086-00f18fb6b3ea?auto=format&fit=crop&q=80&w=800"}];return o.jsx(Qr,{children:o.jsx("div",{className:"bg-slate-50 min-h-screen py-10 pt-24",children:o.jsxs("div",{className:"container",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-10 gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-brand-dark",children:" "}),o.jsxs("p",{className:"text-gray-500",children:[" ",n.length,"   "]})]}),o.jsxs("div",{className:"relative w-full md:w-96",children:[o.jsx("input",{type:"text",placeholder:"    ...",className:"w-full pl-4 pr-12 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20"}),o.jsx(ai,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-10",children:[["","","","",""].map(r=>o.jsx("button",{onClick:()=>e(r),className:`px-6 py-2 rounded-lg text-sm font-medium transition-colors ${t===r?"bg-brand-dark text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:r},r)),o.jsxs("button",{className:"mr-auto px-4 py-2 flex items-center gap-2 text-brand-blue font-medium hover:bg-brand-light rounded-lg",children:[o.jsx(GC,{className:"w-4 h-4"}),"  "]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(r=>o.jsxs(ws,{className:"p-0 border-0 shadow-sm hover:shadow-xl transition-shadow overflow-hidden group",children:[o.jsxs("div",{className:"relative h-64 overflow-hidden",children:[o.jsx("img",{src:r.img,alt:r.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"}),o.jsx("div",{className:`absolute top-4 right-4 px-3 py-1 rounded-full text-white font-bold text-sm ${r.status===""?"bg-green-500":r.status===""?"bg-gray-500":"bg-orange-500"}`,children:r.status}),o.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-between items-center text-white",children:o.jsxs("span",{className:"font-bold text-lg drop-shadow-md",children:[r.price," ."]})})]}),o.jsxs("div",{className:"p-5",children:[o.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-2",children:r.title}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-4 text-sm",children:[o.jsx(Rd,{className:"w-4 h-4 text-brand-blue"}),r.loc]}),o.jsxs("div",{className:"flex items-center justify-between py-4 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[o.jsx(wz,{className:"w-5 h-5 text-gray-400"})," ",r.beds," "]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[o.jsx(vz,{className:"w-5 h-5 text-gray-400"})," ",r.baths," "]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[o.jsx(Tq,{className:"w-5 h-5 text-gray-400"})," ",r.area]})]}),o.jsx(be,{variant:"outline",className:"w-full mt-2",children:" "})]})]},r.id))})]})})})},cH=()=>o.jsx(Qr,{children:o.jsxs("div",{className:"pt-20",children:[o.jsxs("section",{className:"bg-brand-dark text-white py-24 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-purple/20 to-brand-blue/20"}),o.jsxs("div",{className:"container relative z-10 text-center",children:[o.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:" "}),o.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                      ."})]})]}),o.jsx("section",{className:"py-24 bg-white",children:o.jsx("div",{className:"container",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[{icon:Zq,title:"",desc:"        ."},{icon:qi,title:"",desc:"        ."},{icon:lq,title:"",desc:"         ."},{icon:sb,title:"",desc:"      ."}].map((t,e)=>o.jsxs(ws,{className:"text-center group hover:-translate-y-2 transition-transform duration-300",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-brand-light text-brand-blue flex items-center justify-center mx-auto mb-6 group-hover:bg-brand-blue group-hover:text-white transition-colors",children:o.jsx(t.icon,{className:"w-8 h-8"})}),o.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-3",children:t.title}),o.jsx("p",{className:"text-gray-600",children:t.desc})]},e))})})}),o.jsx("section",{className:"py-24 bg-slate-50",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"text-3xl font-bold text-center text-brand-dark mb-16",children:" "}),o.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[o.jsx("div",{className:"absolute top-0 bottom-0 right-1/2 w-0.5 bg-brand-blue/20"}),[{year:"2020",title:"",desc:"     ."},{year:"2021",title:" 1000 ",desc:"     1000    ."},{year:"2022",title:" ",desc:"      ."},{year:"2023",title:" ",desc:"      ."}].map((t,e)=>o.jsxs("div",{className:"relative flex items-center justify-between mb-12",children:[o.jsx("div",{className:`w-1/2 px-8 ${e%2===0?"text-left lg:order-1":"text-right lg:order-2"}`}),o.jsx("div",{className:"absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-brand-blue border-4 border-white shadow-lg z-10"}),o.jsx("div",{className:`w-1/2 px-8 ${e%2===0?"text-right lg:order-2":"text-left lg:order-1"}`,children:o.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[o.jsx("span",{className:"text-brand-blue font-bold text-xl block mb-2",children:t.year}),o.jsx("h3",{className:"font-bold text-brand-dark text-lg mb-2",children:t.title}),o.jsx("p",{className:"text-gray-500",children:t.desc})]})})]},e))]})]})})]})}),uH=()=>{const[t,e]=N.useState(!1),n=r=>{r.preventDefault(),e(!0),setTimeout(()=>e(!1),5e3)};return o.jsx(Qr,{children:o.jsx("div",{className:"bg-slate-50 py-24 min-h-screen",children:o.jsxs("div",{className:"container",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-brand-dark mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-lg",children:"        ."})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[o.jsxs("div",{className:"space-y-8",children:[o.jsxs(ws,{className:"p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-6",children:" "}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-light text-brand-blue flex items-center justify-center shrink-0",children:o.jsx(Rd,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-brand-dark mb-1",children:""}),o.jsxs("p",{className:"text-gray-600",children:["   ",o.jsx("br",{}),"    "]})]})]}),o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-light text-brand-blue flex items-center justify-center shrink-0",children:o.jsx(Xd,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-brand-dark mb-1",children:""}),o.jsx("p",{className:"text-gray-600",dir:"ltr",children:"+966 50 123 4567"})]})]}),o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-light text-brand-blue flex items-center justify-center shrink-0",children:o.jsx(si,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-brand-dark mb-1",children:" "}),o.jsx("p",{className:"text-gray-600",children:"contact@sakan.app"})]})]})]})]}),o.jsxs(ws,{className:"p-0 overflow-hidden h-[300px] bg-slate-200 relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Rd,{className:"w-10 h-10 mx-auto mb-2 text-gray-400"}),o.jsx("p",{children:" "})]})}),o.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14494.613867086827!2d46.72185005!3d24.738875!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3e2f03890d489399%3A0xba974d1c98e79fd5!2sRiyadh!5e0!3m2!1sen!2ssa!4v1625064562819!5m2!1sen!2ssa",width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",className:"opacity-70 hover:opacity-100 transition-opacity duration-300"})]})]}),o.jsxs(ws,{className:"p-8 relative overflow-hidden",children:[o.jsx(qa,{children:t&&o.jsxs(Qe.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"absolute inset-0 bg-white z-10 flex flex-col items-center justify-center text-center p-8",children:[o.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-green-500 mb-6",children:o.jsx(Mi,{className:"w-10 h-10"})}),o.jsx("h3",{className:"text-2xl font-bold text-brand-dark mb-2",children:"  !"}),o.jsx("p",{className:"text-gray-600",children:"  .        ."})]})}),o.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-6",children:"  "}),o.jsxs("form",{onSubmit:n,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),o.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20",placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),o.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20",placeholder:"name@example.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),o.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20 bg-white",children:[o.jsx("option",{children:" "}),o.jsx("option",{children:""}),o.jsx("option",{children:" "}),o.jsx("option",{children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("textarea",{required:!0,rows:4,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20",placeholder:"  "})]}),o.jsxs(be,{type:"submit",variant:"gradient",className:"w-full flex items-center gap-2 justify-center",children:["  ",o.jsx(Wq,{className:"w-4 h-4 mt-1"})]})]})]})]})]})})})},dH=()=>{const[t,e]=N.useState(""),[n,r]=N.useState(""),{login:s,loginWithGoogle:a}=Xr(),l=Ns(),u=dr(),[d,f]=N.useState(""),[g,y]=N.useState(!1),[v,T]=N.useState(!1),j=async _=>{_.preventDefault(),f(""),y(!0);try{await s(t,n),l(u.state?.from?.pathname||"/app")}catch(C){console.error("Login error:",C),f(C.message||"    ")}finally{y(!1)}},E=async()=>{f(""),T(!0);try{await a(),l(u.state?.from?.pathname||"/app")}catch(_){console.error("Google login error:",_),_.code==="auth/popup-closed-by-user"?f("    "):f(_.message||"      Google")}finally{T(!1)}};return o.jsx(Qr,{children:o.jsx("div",{className:"min-h-screen pt-24 pb-12 flex items-center justify-center bg-slate-50",children:o.jsxs("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-gray-100",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-brand-dark mb-2",children:" "}),o.jsx("p",{className:"text-gray-500",children:"    "})]}),o.jsx(be,{type:"button",variant:"outline",className:"w-full py-4 text-lg mb-6 flex items-center justify-center gap-3 border-2 hover:bg-gray-50",onClick:E,disabled:v,children:v?o.jsx("span",{children:" ..."}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),o.jsx("span",{children:"   Google"})]})}),o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-200"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-4 bg-white text-gray-400",children:""})})]}),o.jsxs("form",{onSubmit:j,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsx("input",{type:"email",required:!0,value:t,onChange:_=>e(_.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsx(Ke,{to:"/forgot-password",className:"text-xs text-brand-blue hover:underline",children:"  "})]}),o.jsx("input",{type:"password",required:!0,value:n,onChange:_=>r(_.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all"})]}),d&&o.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl text-sm text-center",children:d}),o.jsx(be,{variant:"gradient",className:"w-full py-4 text-lg",disabled:g,children:g?"  ...":" "})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["  "," ",o.jsx(Ke,{to:"/register",className:"text-brand-blue font-bold hover:underline",children:"  "})]})}),o.jsx("div",{className:"text-center mt-4 pt-4 border-t border-gray-100",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:[""," ",o.jsx(Ke,{to:"/employee/login",className:"text-brand-purple font-bold hover:underline",children:"    "})]})})]})})})},hH=()=>{const t=Ns(),{register:e,loginWithGoogle:n}=Xr(),[r,s]=N.useState({fullName:"",email:"",password:"",confirmPassword:""}),[a,l]=N.useState(""),[u,d]=N.useState(!1),[f,g]=N.useState(!1),y=j=>{s({...r,[j.target.name]:j.target.value})},v=async j=>{if(j.preventDefault(),l(""),r.password!==r.confirmPassword){l("   ");return}if(r.password.length<6){l("     6   ");return}d(!0);try{await e(r.fullName,r.email,r.password),t("/verify-email")}catch(E){console.error("Registration Error",E),E.code==="auth/email-already-in-use"?l("   "):l("   .   .")}finally{d(!1)}},T=async()=>{l(""),g(!0);try{await n(),t("/app")}catch(j){console.error("Google register error:",j),j.code==="auth/popup-closed-by-user"?l("   "):l(j.message||"     Google")}finally{g(!1)}};return o.jsx(Qr,{children:o.jsxs("div",{className:"min-h-screen pt-24 pb-12 flex items-center justify-center bg-slate-50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-brand-purple/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-brand-blue/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 pointer-events-none"}),o.jsxs("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-gray-100 relative z-10",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-brand-light rounded-2xl flex items-center justify-center mx-auto mb-4 text-brand-blue",children:o.jsx(oW,{className:"w-8 h-8"})}),o.jsx("h1",{className:"text-2xl font-bold text-brand-dark mb-2",children:"  "}),o.jsx("p",{className:"text-gray-500 text-sm",children:"    "})]}),o.jsx(be,{type:"button",variant:"outline",className:"w-full py-4 text-base mb-6 flex items-center justify-center gap-3 border-2 hover:bg-gray-50",onClick:T,disabled:f,children:f?o.jsx("span",{children:" ..."}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),o.jsx("span",{children:"  Google"})]})}),o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-200"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-4 bg-white text-gray-400",children:""})})]}),a&&o.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl mb-6 text-sm flex items-center gap-2",children:[o.jsx("span",{children:""})," ",a]}),o.jsxs("form",{onSubmit:v,className:"space-y-5",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx(Fc,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{name:"fullName",type:"text",required:!0,value:r.fullName,onChange:y,className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all",placeholder:":  "})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx(si,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{name:"email",type:"email",required:!0,value:r.email,onChange:y,className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all",placeholder:"name@company.com"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx(Ad,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{name:"password",type:"password",required:!0,value:r.password,onChange:y,className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all",placeholder:""})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:"  "}),o.jsxs("div",{className:"relative",children:[o.jsx(Ad,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{name:"confirmPassword",type:"password",required:!0,value:r.confirmPassword,onChange:y,className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all",placeholder:""})]})]}),o.jsx(be,{disabled:u,variant:"gradient",className:"w-full py-4 text-lg mt-4",type:"submit",children:u?" ...":" "})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["  "," ",o.jsx(Ke,{to:"/login",className:"text-brand-blue font-bold hover:underline",children:" "})]})})]})]})})},fH=()=>{const{user:t,resendVerificationEmail:e,isEmailVerified:n}=Xr(),r=Ns(),[s,a]=N.useState(!1),[l,u]=N.useState(!1),[d,f]=N.useState(""),g=async()=>{a(!0),f(""),u(!1);try{await e(),u(!0)}catch(v){f(v.message||"     ")}finally{a(!1)}},y=()=>{window.location.reload()};return n?o.jsx(Qr,{children:o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-brand-light/30 flex items-center justify-center py-12 px-4",children:o.jsxs(ws,{className:"max-w-md w-full text-center p-8",children:[o.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(Mi,{className:"w-10 h-10 text-green-600"})}),o.jsx("h1",{className:"text-2xl font-bold text-brand-dark mb-4",children:"    !"}),o.jsx("p",{className:"text-gray-600 mb-8",children:"      ."}),o.jsxs(be,{variant:"gradient",className:"w-full",onClick:()=>r("/app"),children:["  ",o.jsx(HC,{className:"w-4 h-4 mr-2"})]})]})})}):o.jsx(Qr,{children:o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-brand-light/30 flex items-center justify-center py-12 px-4",children:o.jsxs(ws,{className:"max-w-md w-full text-center p-8",children:[o.jsx("div",{className:"w-20 h-20 bg-brand-light rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:o.jsx(si,{className:"w-10 h-10 text-brand-blue"})}),o.jsx("h1",{className:"text-2xl font-bold text-brand-dark mb-4",children:"   "}),o.jsx("p",{className:"text-gray-600 mb-2",children:"   :"}),o.jsx("p",{className:"text-brand-blue font-bold text-lg mb-6",dir:"ltr",children:t?.email}),o.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:o.jsxs("p",{className:"text-amber-800 text-sm",children:["          .",o.jsx("br",{}),o.jsx("span",{className:"text-amber-600 text-xs",children:"       (Spam)    ."})]})}),l&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:o.jsxs("p",{className:"text-green-700 text-sm flex items-center justify-center gap-2",children:[o.jsx(Mi,{className:"w-4 h-4"}),"     !"]})}),d&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:o.jsx("p",{className:"text-red-700 text-sm",children:d})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(be,{variant:"gradient",className:"w-full",onClick:y,children:[o.jsx(rx,{className:"w-4 h-4 ml-2"}),"   "]}),o.jsx(be,{variant:"outline",className:"w-full",onClick:g,disabled:s,children:s?o.jsxs(o.Fragment,{children:[o.jsx(rx,{className:"w-4 h-4 ml-2 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(si,{className:"w-4 h-4 ml-2"}),"   "]})})]}),o.jsx("p",{className:"text-gray-400 text-xs mt-6",children:"      support@arkan.app"})]})})})},mH=[{name:" ",path:"/app",icon:ri},{name:"",path:"/app/properties",icon:Xn},{name:"",path:"/app/units",icon:qr},{name:"",path:"/app/tenants",icon:qi},{name:"",path:"/app/contracts",icon:Yr},{name:"",path:"/app/payments",icon:Kr},{name:"",path:"/app/maintenance",icon:Wi},{name:"",path:"/app/sales",icon:Vc},{name:"",path:"/app/tasks",icon:Jd},{name:"",path:"/app/reports",icon:ri},{name:"",path:"/app/employees",icon:qi}],pH={properties:{label:"",icon:Xn},units:{label:"",icon:qr},tenants:{label:"",icon:qi},contracts:{label:"",icon:Yr},payments:{label:"",icon:Kr},maintenance:{label:"",icon:Wi},reports:{label:"",icon:ri},sales:{label:"",icon:Vc},employees:{label:"",icon:qi},tasks:{label:"",icon:Jd}},gH=[{module:"properties",actions:["view","create","edit","delete"]},{module:"units",actions:["view","create","edit","delete"]},{module:"tenants",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view","create","edit","delete"]},{module:"payments",actions:["view","create","edit","delete"]},{module:"maintenance",actions:["view","create","edit","delete"]},{module:"sales",actions:["view","create","edit","delete"]},{module:"tasks",actions:["view","create","edit","delete"]},{module:"reports",actions:["view"]},{module:"employees",actions:["view","create","edit","delete"]}],yH={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Oy={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};function xH(){const{user:t}=Xr();return o.jsxs(Qe.div,{className:"space-y-6 lg:space-y-8",variants:yH,initial:"hidden",animate:"show",children:[o.jsx(Qe.div,{variants:Oy,className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:o.jsxs("div",{children:[o.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-brand-dark mb-1",children:[" ",o.jsx("span",{className:"text-brand-blue",children:t?.displayName?.split(" ")[0]||""}),"!"]}),o.jsx("p",{className:"text-sm lg:text-base text-gray-500",children:"   "})]})}),o.jsxs(Qe.div,{variants:Oy,className:"space-y-3 lg:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 px-1",children:[o.jsx(sb,{className:"w-4 h-4 lg:w-5 lg:h-5 text-brand-blue"}),o.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:" "})]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 sm:gap-3 lg:gap-4",children:gH.map(e=>{const n=pH[e.module],r=n?.icon||ri,s=e.actions.length>=4;return o.jsxs(Qe.div,{whileHover:{y:-2},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 lg:p-4 flex items-center justify-between group overflow-hidden relative",children:[o.jsx("div",{className:"absolute left-0 top-0 w-1 h-full bg-brand-blue opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsxs("div",{className:"flex items-center gap-2 lg:gap-3 min-w-0",children:[o.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-brand-blue/10 group-hover:text-brand-blue transition-colors flex-shrink-0",children:o.jsx(r,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-bold text-gray-800 text-xs lg:text-sm truncate",children:n?.label}),o.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400 mt-0.5 truncate",children:s?" ":" "})]})]}),s&&o.jsx("div",{className:"w-6 h-6 lg:w-8 lg:h-8 rounded-full bg-green-50 flex items-center justify-center text-green-600 flex-shrink-0",children:o.jsx(nx,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]},e.module)})})]}),o.jsxs(Qe.div,{variants:Oy,className:"space-y-3 lg:space-y-4",children:[o.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark px-1",children:" "}),o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-5 gap-2 sm:gap-3 lg:gap-4",children:mH.filter(e=>e.path!=="/app").map(e=>{const n=e.icon;return o.jsx(Ke,{to:e.path,children:o.jsxs(Qe.div,{whileHover:{scale:1.03,y:-2},whileTap:{scale:.98},className:"h-full bg-white p-3 sm:p-4 lg:p-6 rounded-xl lg:rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg hover:border-brand-blue/20 transition-all cursor-pointer group flex flex-col items-center justify-center text-center gap-2 lg:gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gray-50 rounded-xl lg:rounded-2xl flex items-center justify-center group-hover:bg-brand-blue/10 transition-colors duration-300",children:o.jsx(n,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-gray-500 group-hover:text-brand-blue transition-colors duration-300"})}),o.jsx("h3",{className:"font-bold text-gray-700 group-hover:text-brand-dark transition-colors text-xs sm:text-sm lg:text-base",children:e.name})]})},e.path)})})]})]})}function Cn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function u2(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function dp(...t){return e=>{let n=!1;const r=t.map(s=>{const a=u2(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():u2(t[s],null)}}}}function oi(...t){return N.useCallback(dp(...t),t)}function vH(t,e){const n=N.createContext(e),r=a=>{const{children:l,...u}=a,d=N.useMemo(()=>u,Object.values(u));return o.jsx(n.Provider,{value:d,children:l})};r.displayName=t+"Provider";function s(a){const l=N.useContext(n);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function hp(t,e=[]){let n=[];function r(a,l){const u=N.createContext(l),d=n.length;n=[...n,l];const f=y=>{const{scope:v,children:T,...j}=y,E=v?.[t]?.[d]||u,_=N.useMemo(()=>j,Object.values(j));return o.jsx(E.Provider,{value:_,children:T})};f.displayName=a+"Provider";function g(y,v){const T=v?.[t]?.[d]||u,j=N.useContext(T);if(j)return j;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,g]}const s=()=>{const a=n.map(l=>N.createContext(l));return function(u){const d=u?.[t]||a;return N.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return s.scopeName=t,[r,bH(s,...e)]}function bH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const l=r.reduce((u,{useScope:d,scopeName:f})=>{const y=d(a)[`__scope${f}`];return{...u,...y}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}var Pd=globalThis?.document?N.useLayoutEffect:()=>{},wH=U2[" useId ".trim().toString()]||(()=>{}),_H=0;function ad(t){const[e,n]=N.useState(wH());return Pd(()=>{n(r=>r??String(_H++))},[t]),t||(e?`radix-${e}`:"")}var EH=U2[" useInsertionEffect ".trim().toString()]||Pd;function cb({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,l]=NH({defaultProp:e,onChange:n}),u=t!==void 0,d=u?t:s;{const g=N.useRef(t!==void 0);N.useEffect(()=>{const y=g.current;y!==u&&console.warn(`${r} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,r])}const f=N.useCallback(g=>{if(u){const y=TH(g)?g(t):g;y!==t&&l.current?.(y)}else a(g)},[u,t,a,l]);return[d,f]}function NH({defaultProp:t,onChange:e}){const[n,r]=N.useState(t),s=N.useRef(n),a=N.useRef(e);return EH(()=>{a.current=e},[e]),N.useEffect(()=>{s.current!==n&&(a.current?.(n),s.current=n)},[n,s]),[n,r,a]}function TH(t){return typeof t=="function"}function SH(t){const e=jH(t),n=N.forwardRef((r,s)=>{const{children:a,...l}=r,u=N.Children.toArray(a),d=u.find(CH);if(d){const f=d.props.children,g=u.map(y=>y===d?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:y);return o.jsx(e,{...l,ref:s,children:N.isValidElement(f)?N.cloneElement(f,void 0,g):null})}return o.jsx(e,{...l,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}function jH(t){const e=N.forwardRef((n,r)=>{const{children:s,...a}=n;if(N.isValidElement(s)){const l=AH(s),u=IH(a,s.props);return s.type!==N.Fragment&&(u.ref=r?dp(r,l):l),N.cloneElement(s,u)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var kH=Symbol("radix.slottable");function CH(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===kH}function IH(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{const d=a(...u);return s(...u),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function AH(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var RH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zn=RH.reduce((t,e)=>{const n=SH(`Primitive.${e}`),r=N.forwardRef((s,a)=>{const{asChild:l,...u}=s,d=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(d,{...u,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function PH(t,e){t&&nT.flushSync(()=>t.dispatchEvent(e))}function Ec(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...n)=>e.current?.(...n),[])}function DH(t,e=globalThis?.document){const n=Ec(t);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var OH="DismissableLayer",ix="dismissableLayer.update",MH="dismissableLayer.pointerDownOutside",LH="dismissableLayer.focusOutside",d2,dI=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hI=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...d}=t,f=N.useContext(dI),[g,y]=N.useState(null),v=g?.ownerDocument??globalThis?.document,[,T]=N.useState({}),j=oi(e,P=>y(P)),E=Array.from(f.layers),[_]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),C=E.indexOf(_),D=g?E.indexOf(g):-1,k=f.layersWithOutsidePointerEventsDisabled.size>0,O=D>=C,I=UH(P=>{const A=P.target,L=[...f.branches].some(U=>U.contains(A));!O||L||(s?.(P),l?.(P),P.defaultPrevented||u?.())},v),$=$H(P=>{const A=P.target;[...f.branches].some(U=>U.contains(A))||(a?.(P),l?.(P),P.defaultPrevented||u?.())},v);return DH(P=>{D===f.layers.size-1&&(r?.(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),N.useEffect(()=>{if(g)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(d2=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),h2(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=d2)}},[g,v,n,f]),N.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),h2())},[g,f]),N.useEffect(()=>{const P=()=>T({});return document.addEventListener(ix,P),()=>document.removeEventListener(ix,P)},[]),o.jsx(Zn.div,{...d,ref:j,style:{pointerEvents:k?O?"auto":"none":void 0,...t.style},onFocusCapture:Cn(t.onFocusCapture,$.onFocusCapture),onBlurCapture:Cn(t.onBlurCapture,$.onBlurCapture),onPointerDownCapture:Cn(t.onPointerDownCapture,I.onPointerDownCapture)})});hI.displayName=OH;var VH="DismissableLayerBranch",FH=N.forwardRef((t,e)=>{const n=N.useContext(dI),r=N.useRef(null),s=oi(e,r);return N.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Zn.div,{...t,ref:s})});FH.displayName=VH;function UH(t,e=globalThis?.document){const n=Ec(t),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let d=function(){fI(MH,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function $H(t,e=globalThis?.document){const n=Ec(t),r=N.useRef(!1);return N.useEffect(()=>{const s=a=>{a.target&&!r.current&&fI(LH,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function h2(){const t=new CustomEvent(ix);document.dispatchEvent(t)}function fI(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?PH(s,a):s.dispatchEvent(a)}var My="focusScope.autoFocusOnMount",Ly="focusScope.autoFocusOnUnmount",f2={bubbles:!1,cancelable:!0},BH="FocusScope",mI=N.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...l}=t,[u,d]=N.useState(null),f=Ec(s),g=Ec(a),y=N.useRef(null),v=oi(e,E=>d(E)),T=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let E=function(k){if(T.paused||!u)return;const O=k.target;u.contains(O)?y.current=O:Na(y.current,{select:!0})},_=function(k){if(T.paused||!u)return;const O=k.relatedTarget;O!==null&&(u.contains(O)||Na(y.current,{select:!0}))},C=function(k){if(document.activeElement===document.body)for(const I of k)I.removedNodes.length>0&&Na(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",_);const D=new MutationObserver(C);return u&&D.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",_),D.disconnect()}}},[r,u,T.paused]),N.useEffect(()=>{if(u){p2.add(T);const E=document.activeElement;if(!u.contains(E)){const C=new CustomEvent(My,f2);u.addEventListener(My,f),u.dispatchEvent(C),C.defaultPrevented||(zH(GH(pI(u)),{select:!0}),document.activeElement===E&&Na(u))}return()=>{u.removeEventListener(My,f),setTimeout(()=>{const C=new CustomEvent(Ly,f2);u.addEventListener(Ly,g),u.dispatchEvent(C),C.defaultPrevented||Na(E??document.body,{select:!0}),u.removeEventListener(Ly,g),p2.remove(T)},0)}}},[u,f,g,T]);const j=N.useCallback(E=>{if(!n&&!r||T.paused)return;const _=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,C=document.activeElement;if(_&&C){const D=E.currentTarget,[k,O]=qH(D);k&&O?!E.shiftKey&&C===O?(E.preventDefault(),n&&Na(k,{select:!0})):E.shiftKey&&C===k&&(E.preventDefault(),n&&Na(O,{select:!0})):C===D&&E.preventDefault()}},[n,r,T.paused]);return o.jsx(Zn.div,{tabIndex:-1,...l,ref:v,onKeyDown:j})});mI.displayName=BH;function zH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Na(r,{select:e}),document.activeElement!==n)return}function qH(t){const e=pI(t),n=m2(e,t),r=m2(e.reverse(),t);return[n,r]}function pI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function m2(t,e){for(const n of t)if(!WH(n,{upTo:e}))return n}function WH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function HH(t){return t instanceof HTMLInputElement&&"select"in t}function Na(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&HH(t)&&e&&t.select()}}var p2=KH();function KH(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=g2(t,e),t.unshift(e)},remove(e){t=g2(t,e),t[0]?.resume()}}}function g2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function GH(t){return t.filter(e=>e.tagName!=="A")}var YH="Portal",gI=N.forwardRef((t,e)=>{const{container:n,...r}=t,[s,a]=N.useState(!1);Pd(()=>a(!0),[]);const l=n||s&&globalThis?.document?.body;return l?rT.createPortal(o.jsx(Zn.div,{...r,ref:e}),l):null});gI.displayName=YH;function QH(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var Zd=t=>{const{present:e,children:n}=t,r=JH(e),s=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),a=oi(r.ref,XH(s));return typeof n=="function"||r.isPresent?N.cloneElement(s,{ref:a}):null};Zd.displayName="Presence";function JH(t){const[e,n]=N.useState(),r=N.useRef(null),s=N.useRef(t),a=N.useRef("none"),l=t?"mounted":"unmounted",[u,d]=QH(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const f=kf(r.current);a.current=u==="mounted"?f:"none"},[u]),Pd(()=>{const f=r.current,g=s.current;if(g!==t){const v=a.current,T=kf(f);t?d("MOUNT"):T==="none"||f?.display==="none"?d("UNMOUNT"):d(g&&v!==T?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,d]),Pd(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,y=T=>{const E=kf(r.current).includes(CSS.escape(T.animationName));if(T.target===e&&E&&(d("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},v=T=>{T.target===e&&(a.current=kf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:N.useCallback(f=>{r.current=f?getComputedStyle(f):null,n(f)},[])}}function kf(t){return t?.animationName||"none"}function XH(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Vy=0;function ZH(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??y2()),document.body.insertAdjacentElement("beforeend",t[1]??y2()),Vy++,()=>{Vy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vy--}},[])}function y2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Xf="right-scroll-bar-position",Zf="width-before-scroll-bar",eK="with-scroll-bars-hidden",tK="--removed-body-scroll-bar-size";function Fy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function nK(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var rK=typeof window<"u"?N.useLayoutEffect:N.useEffect,x2=new WeakMap;function sK(t,e){var n=nK(null,function(r){return t.forEach(function(s){return Fy(s,r)})});return rK(function(){var r=x2.get(n);if(r){var s=new Set(r),a=new Set(t),l=n.current;s.forEach(function(u){a.has(u)||Fy(u,null)}),a.forEach(function(u){s.has(u)||Fy(u,l)})}x2.set(n,t)},[t]),n}function iK(t){return t}function aK(t,e){e===void 0&&(e=iK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var l=e(a,r);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(a){for(r=!0;n.length;){var l=n;n=[],l.forEach(a)}n={push:function(u){return a(u)},filter:function(){return n}}},assignMedium:function(a){r=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(a),l=n}var d=function(){var g=l;l=[],g.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(g){l.push(g),f()},filter:function(g){return l=l.filter(g),n}}}};return s}function oK(t){t===void 0&&(t={});var e=aK(null);return e.options=Hs({async:!0,ssr:!1},t),e}var yI=function(t){var e=t.sideCar,n=Dc(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Hs({},n))};yI.isSideCarExport=!0;function lK(t,e){return t.useMedium(e),yI}var xI=oK(),Uy=function(){},fp=N.forwardRef(function(t,e){var n=N.useRef(null),r=N.useState({onScrollCapture:Uy,onWheelCapture:Uy,onTouchMoveCapture:Uy}),s=r[0],a=r[1],l=t.forwardProps,u=t.children,d=t.className,f=t.removeScrollBar,g=t.enabled,y=t.shards,v=t.sideCar,T=t.noRelative,j=t.noIsolation,E=t.inert,_=t.allowPinchZoom,C=t.as,D=C===void 0?"div":C,k=t.gapMode,O=Dc(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=v,$=sK([n,e]),P=Hs(Hs({},O),s);return N.createElement(N.Fragment,null,g&&N.createElement(I,{sideCar:xI,removeScrollBar:f,shards:y,noRelative:T,noIsolation:j,inert:E,setCallbacks:a,allowPinchZoom:!!_,lockRef:n,gapMode:k}),l?N.cloneElement(N.Children.only(u),Hs(Hs({},P),{ref:$})):N.createElement(D,Hs({},P,{className:d,ref:$}),u))});fp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fp.classNames={fullWidth:Zf,zeroRight:Xf};var cK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function uK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=cK();return e&&t.setAttribute("nonce",e),t}function dK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function hK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var fK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=uK())&&(dK(e,n),hK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},mK=function(){var t=fK();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},vI=function(){var t=mK(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},pK={left:0,top:0,right:0,gap:0},$y=function(t){return parseInt(t||"",10)||0},gK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[$y(n),$y(r),$y(s)]},yK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return pK;var e=gK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},xK=vI(),hc="data-scroll-locked",vK=function(t,e,n,r){var s=t.left,a=t.top,l=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(eK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(hc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xf,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Zf,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Xf," .").concat(Xf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Zf," .").concat(Zf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hc,`] {
    `).concat(tK,": ").concat(u,`px;
  }
`)},v2=function(){var t=parseInt(document.body.getAttribute(hc)||"0",10);return isFinite(t)?t:0},bK=function(){N.useEffect(function(){return document.body.setAttribute(hc,(v2()+1).toString()),function(){var t=v2()-1;t<=0?document.body.removeAttribute(hc):document.body.setAttribute(hc,t.toString())}},[])},wK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;bK();var a=N.useMemo(function(){return yK(s)},[s]);return N.createElement(xK,{styles:vK(a,!e,s,n?"":"!important")})},ax=!1;if(typeof window<"u")try{var Cf=Object.defineProperty({},"passive",{get:function(){return ax=!0,!0}});window.addEventListener("test",Cf,Cf),window.removeEventListener("test",Cf,Cf)}catch{ax=!1}var zl=ax?{passive:!1}:!1,_K=function(t){return t.tagName==="TEXTAREA"},bI=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_K(t)&&n[e]==="visible")},EK=function(t){return bI(t,"overflowY")},NK=function(t){return bI(t,"overflowX")},b2=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=wI(t,r);if(s){var a=_I(t,r),l=a[1],u=a[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},TK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},SK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},wI=function(t,e){return t==="v"?EK(e):NK(e)},_I=function(t,e){return t==="v"?TK(e):SK(e)},jK=function(t,e){return t==="h"&&e==="rtl"?-1:1},kK=function(t,e,n,r,s){var a=jK(t,window.getComputedStyle(e).direction),l=a*r,u=n.target,d=e.contains(u),f=!1,g=l>0,y=0,v=0;do{if(!u)break;var T=_I(t,u),j=T[0],E=T[1],_=T[2],C=E-_-a*j;(j||C)&&wI(t,u)&&(y+=C,v+=j);var D=u.parentNode;u=D&&D.nodeType===Node.DOCUMENT_FRAGMENT_NODE?D.host:D}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(f=!0),f},If=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},w2=function(t){return[t.deltaX,t.deltaY]},_2=function(t){return t&&"current"in t?t.current:t},CK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},IK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},AK=0,ql=[];function RK(t){var e=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),s=N.useState(AK++)[0],a=N.useState(vI)[0],l=N.useRef(t);N.useEffect(function(){l.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var E=VV([t.lockRef.current],(t.shards||[]).map(_2),!0).filter(Boolean);return E.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=N.useCallback(function(E,_){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!l.current.allowPinchZoom;var C=If(E),D=n.current,k="deltaX"in E?E.deltaX:D[0]-C[0],O="deltaY"in E?E.deltaY:D[1]-C[1],I,$=E.target,P=Math.abs(k)>Math.abs(O)?"h":"v";if("touches"in E&&P==="h"&&$.type==="range")return!1;var A=window.getSelection(),L=A&&A.anchorNode,U=L?L===$||L.contains($):!1;if(U)return!1;var B=b2(P,$);if(!B)return!0;if(B?I=P:(I=P==="v"?"h":"v",B=b2(P,$)),!B)return!1;if(!r.current&&"changedTouches"in E&&(k||O)&&(r.current=I),!I)return!0;var q=r.current||I;return kK(q,_,E,q==="h"?k:O)},[]),d=N.useCallback(function(E){var _=E;if(!(!ql.length||ql[ql.length-1]!==a)){var C="deltaY"in _?w2(_):If(_),D=e.current.filter(function(I){return I.name===_.type&&(I.target===_.target||_.target===I.shadowParent)&&CK(I.delta,C)})[0];if(D&&D.should){_.cancelable&&_.preventDefault();return}if(!D){var k=(l.current.shards||[]).map(_2).filter(Boolean).filter(function(I){return I.contains(_.target)}),O=k.length>0?u(_,k[0]):!l.current.noIsolation;O&&_.cancelable&&_.preventDefault()}}},[]),f=N.useCallback(function(E,_,C,D){var k={name:E,delta:_,target:C,should:D,shadowParent:PK(C)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(O){return O!==k})},1)},[]),g=N.useCallback(function(E){n.current=If(E),r.current=void 0},[]),y=N.useCallback(function(E){f(E.type,w2(E),E.target,u(E,t.lockRef.current))},[]),v=N.useCallback(function(E){f(E.type,If(E),E.target,u(E,t.lockRef.current))},[]);N.useEffect(function(){return ql.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",d,zl),document.addEventListener("touchmove",d,zl),document.addEventListener("touchstart",g,zl),function(){ql=ql.filter(function(E){return E!==a}),document.removeEventListener("wheel",d,zl),document.removeEventListener("touchmove",d,zl),document.removeEventListener("touchstart",g,zl)}},[]);var T=t.removeScrollBar,j=t.inert;return N.createElement(N.Fragment,null,j?N.createElement(a,{styles:IK(s)}):null,T?N.createElement(wK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function PK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const DK=lK(xI,RK);var EI=N.forwardRef(function(t,e){return N.createElement(fp,Hs({},t,{ref:e,sideCar:DK}))});EI.classNames=fp.classNames;var OK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Wl=new WeakMap,Af=new WeakMap,Rf={},By=0,NI=function(t){return t&&(t.host||NI(t.parentNode))},MK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=NI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},LK=function(t,e,n,r){var s=MK(e,Array.isArray(t)?t:[t]);Rf[n]||(Rf[n]=new WeakMap);var a=Rf[n],l=[],u=new Set,d=new Set(s),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};s.forEach(f);var g=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))g(v);else try{var T=v.getAttribute(r),j=T!==null&&T!=="false",E=(Wl.get(v)||0)+1,_=(a.get(v)||0)+1;Wl.set(v,E),a.set(v,_),l.push(v),E===1&&j&&Af.set(v,!0),_===1&&v.setAttribute(n,"true"),j||v.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",v,C)}})};return g(e),u.clear(),By++,function(){l.forEach(function(y){var v=Wl.get(y)-1,T=a.get(y)-1;Wl.set(y,v),a.set(y,T),v||(Af.has(y)||y.removeAttribute(r),Af.delete(y)),T||y.removeAttribute(n)}),By--,By||(Wl=new WeakMap,Wl=new WeakMap,Af=new WeakMap,Rf={})}},VK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=OK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),LK(r,s,n,"aria-hidden")):function(){return null}};function FK(t){const e=UK(t),n=N.forwardRef((r,s)=>{const{children:a,...l}=r,u=N.Children.toArray(a),d=u.find(BK);if(d){const f=d.props.children,g=u.map(y=>y===d?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:y);return o.jsx(e,{...l,ref:s,children:N.isValidElement(f)?N.cloneElement(f,void 0,g):null})}return o.jsx(e,{...l,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}function UK(t){const e=N.forwardRef((n,r)=>{const{children:s,...a}=n;if(N.isValidElement(s)){const l=qK(s),u=zK(a,s.props);return s.type!==N.Fragment&&(u.ref=r?dp(r,l):l),N.cloneElement(s,u)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $K=Symbol("radix.slottable");function BK(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$K}function zK(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{const d=a(...u);return s(...u),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function qK(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var mp="Dialog",[TI]=hp(mp),[WK,Ss]=TI(mp),SI=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:l=!0}=t,u=N.useRef(null),d=N.useRef(null),[f,g]=cb({prop:r,defaultProp:s??!1,onChange:a,caller:mp});return o.jsx(WK,{scope:e,triggerRef:u,contentRef:d,contentId:ad(),titleId:ad(),descriptionId:ad(),open:f,onOpenChange:g,onOpenToggle:N.useCallback(()=>g(y=>!y),[g]),modal:l,children:n})};SI.displayName=mp;var jI="DialogTrigger",HK=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(jI,n),a=oi(e,s.triggerRef);return o.jsx(Zn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":hb(s.open),...r,ref:a,onClick:Cn(t.onClick,s.onOpenToggle)})});HK.displayName=jI;var ub="DialogPortal",[KK,kI]=TI(ub,{forceMount:void 0}),CI=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=Ss(ub,e);return o.jsx(KK,{scope:e,forceMount:n,children:N.Children.map(r,l=>o.jsx(Zd,{present:n||a.open,children:o.jsx(gI,{asChild:!0,container:s,children:l})}))})};CI.displayName=ub;var Om="DialogOverlay",II=N.forwardRef((t,e)=>{const n=kI(Om,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Ss(Om,t.__scopeDialog);return a.modal?o.jsx(Zd,{present:r||a.open,children:o.jsx(YK,{...s,ref:e})}):null});II.displayName=Om;var GK=FK("DialogOverlay.RemoveScroll"),YK=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(Om,n);return o.jsx(EI,{as:GK,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Zn.div,{"data-state":hb(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ho="DialogContent",AI=N.forwardRef((t,e)=>{const n=kI(Ho,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Ss(Ho,t.__scopeDialog);return o.jsx(Zd,{present:r||a.open,children:a.modal?o.jsx(QK,{...s,ref:e}):o.jsx(JK,{...s,ref:e})})});AI.displayName=Ho;var QK=N.forwardRef((t,e)=>{const n=Ss(Ho,t.__scopeDialog),r=N.useRef(null),s=oi(e,n.contentRef,r);return N.useEffect(()=>{const a=r.current;if(a)return VK(a)},[]),o.jsx(RI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Cn(t.onCloseAutoFocus,a=>{a.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Cn(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&a.preventDefault()}),onFocusOutside:Cn(t.onFocusOutside,a=>a.preventDefault())})}),JK=N.forwardRef((t,e)=>{const n=Ss(Ho,t.__scopeDialog),r=N.useRef(!1),s=N.useRef(!1);return o.jsx(RI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=a.target;n.triggerRef.current?.contains(l)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),RI=N.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...l}=t,u=Ss(Ho,n),d=N.useRef(null),f=oi(e,d);return ZH(),o.jsxs(o.Fragment,{children:[o.jsx(mI,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(hI,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":hb(u.open),...l,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(ZK,{titleId:u.titleId}),o.jsx(tG,{contentRef:d,descriptionId:u.descriptionId})]})]})}),db="DialogTitle",PI=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(db,n);return o.jsx(Zn.h2,{id:s.titleId,...r,ref:e})});PI.displayName=db;var DI="DialogDescription",XK=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(DI,n);return o.jsx(Zn.p,{id:s.descriptionId,...r,ref:e})});XK.displayName=DI;var OI="DialogClose",MI=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(OI,n);return o.jsx(Zn.button,{type:"button",...r,ref:e,onClick:Cn(t.onClick,()=>s.onOpenChange(!1))})});MI.displayName=OI;function hb(t){return t?"open":"closed"}var LI="DialogTitleWarning",[LY,VI]=vH(LI,{contentName:Ho,titleName:db,docsSlug:"dialog"}),ZK=({titleId:t})=>{const e=VI(LI),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},eG="DialogDescriptionWarning",tG=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VI(eG).contentName}}.`;return N.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},nG=SI,rG=CI,sG=II,iG=AI,aG=PI,oG=MI;function Ya(...t){return lb(ab(t))}function Bc({...t}){return o.jsx(nG,{"data-slot":"dialog",...t})}function lG({...t}){return o.jsx(rG,{"data-slot":"dialog-portal",...t})}function cG({className:t,...e}){return o.jsx(sG,{"data-slot":"dialog-overlay",className:Ya("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[100] bg-black/60",t),...e})}function zc({className:t,children:e,...n}){return o.jsxs(lG,{"data-slot":"dialog-portal",children:[o.jsx(cG,{}),o.jsxs(iG,{"data-slot":"dialog-content",className:Ya("bg-white data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[101] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-xl border border-gray-200 p-6 shadow-2xl duration-200 sm:max-w-lg",t),...n,children:[e,o.jsxs(oG,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[o.jsx(Ha,{}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function qc({className:t,...e}){return o.jsx("div",{"data-slot":"dialog-header",className:Ya("flex flex-col gap-2 text-center sm:text-left",t),...e})}function Wc({className:t,...e}){return o.jsx(aG,{"data-slot":"dialog-title",className:Ya("text-lg leading-none font-semibold",t),...e})}function uG(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const dG=t=>{switch(t){case"success":return mG;case"info":return gG;case"warning":return pG;case"error":return yG;default:return null}},hG=Array(12).fill(0),fG=({visible:t,className:e})=>de.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},de.createElement("div",{className:"sonner-spinner"},hG.map((n,r)=>de.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),mG=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),pG=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),gG=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),yG=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xG=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},de.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),de.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),vG=()=>{const[t,e]=de.useState(document.hidden);return de.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let ox=1;class bG{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,a=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:ox++,l=this.toasts.find(d=>d.id===a),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(d=>d.id===a?(this.publish({...d,...e,id:a,title:r}),{...d,...e,id:a,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let a=r!==void 0,l;const u=s.then(async f=>{if(l=["resolve",f],de.isValidElement(f))a=!1,this.create({id:r,type:"default",message:f});else if(_G(f)&&!f.ok){a=!1;const y=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,j=typeof y=="object"&&!de.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:v,...j})}else if(f instanceof Error){a=!1;const y=typeof n.error=="function"?await n.error(f):n.error,v=typeof n.description=="function"?await n.description(f):n.description,j=typeof y=="object"&&!de.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:v,...j})}else if(n.success!==void 0){a=!1;const y=typeof n.success=="function"?await n.success(f):n.success,v=typeof n.description=="function"?await n.description(f):n.description,j=typeof y=="object"&&!de.isValidElement(y)?y:{message:y};this.create({id:r,type:"success",description:v,...j})}}).catch(async f=>{if(l=["reject",f],n.error!==void 0){a=!1;const g=typeof n.error=="function"?await n.error(f):n.error,y=typeof n.description=="function"?await n.description(f):n.description,T=typeof g=="object"&&!de.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:y,...T})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,g)=>u.then(()=>l[0]==="reject"?g(l[1]):f(l[1])).catch(g));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,n)=>{const r=n?.id||ox++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const lr=new bG,wG=(t,e)=>{const n=e?.id||ox++;return lr.addToast({title:t,...e,id:n}),n},_G=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",EG=wG,NG=()=>lr.toasts,TG=()=>lr.getActiveToasts(),ot=Object.assign(EG,{success:lr.success,info:lr.info,warning:lr.warning,error:lr.error,custom:lr.custom,message:lr.message,promise:lr.promise,dismiss:lr.dismiss,loading:lr.loading},{getHistory:NG,getToasts:TG});uG("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Pf(t){return t.label!==void 0}const SG=3,jG="24px",kG="16px",E2=4e3,CG=356,IG=14,AG=45,RG=200;function qs(...t){return t.filter(Boolean).join(" ")}function PG(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const DG=t=>{var e,n,r,s,a,l,u,d,f;const{invert:g,toast:y,unstyled:v,interacting:T,setHeights:j,visibleToasts:E,heights:_,index:C,toasts:D,expanded:k,removeToast:O,defaultRichColors:I,closeButton:$,style:P,cancelButtonStyle:A,actionButtonStyle:L,className:U="",descriptionClassName:B="",duration:q,position:V,gap:se,expandByDefault:Q,classNames:le,icons:me,closeButtonAriaLabel:J="Close toast"}=t,[xe,he]=de.useState(null),[H,ne]=de.useState(null),[ue,ye]=de.useState(!1),[Ee,De]=de.useState(!1),[Ae,ke]=de.useState(!1),[Je,pt]=de.useState(!1),[vn,nn]=de.useState(!1),[te,ee]=de.useState(0),[ge,Fe]=de.useState(0),lt=de.useRef(y.duration||q||E2),At=de.useRef(null),rt=de.useRef(null),vt=C===0,qn=C+1<=E,Bt=y.type,Rn=y.dismissible!==!1,Gi=y.className||"",ht=y.descriptionClassName||"",zt=de.useMemo(()=>_.findIndex(Ue=>Ue.toastId===y.id)||0,[_,y.id]),Yi=de.useMemo(()=>{var Ue;return(Ue=y.closeButton)!=null?Ue:$},[y.closeButton,$]),Zr=de.useMemo(()=>y.duration||q||E2,[y.duration,q]),Qi=de.useRef(0),er=de.useRef(0),es=de.useRef(0),ts=de.useRef(null),[js,Ji]=V.split("-"),Xi=de.useMemo(()=>_.reduce((Ue,gt,qt)=>qt>=zt?Ue:Ue+gt.height,0),[_,zt]),tr=vG(),Zi=y.invert||g,Ir=Bt==="loading";er.current=de.useMemo(()=>zt*se+Xi,[zt,Xi]),de.useEffect(()=>{lt.current=Zr},[Zr]),de.useEffect(()=>{ye(!0)},[]),de.useEffect(()=>{const Ue=rt.current;if(Ue){const gt=Ue.getBoundingClientRect().height;return Fe(gt),j(qt=>[{toastId:y.id,height:gt,position:y.position},...qt]),()=>j(qt=>qt.filter(dn=>dn.toastId!==y.id))}},[j,y.id]),de.useLayoutEffect(()=>{if(!ue)return;const Ue=rt.current,gt=Ue.style.height;Ue.style.height="auto";const qt=Ue.getBoundingClientRect().height;Ue.style.height=gt,Fe(qt),j(dn=>dn.find(Vt=>Vt.toastId===y.id)?dn.map(Vt=>Vt.toastId===y.id?{...Vt,height:qt}:Vt):[{toastId:y.id,height:qt,position:y.position},...dn])},[ue,y.title,y.description,j,y.id,y.jsx,y.action,y.cancel]);const Wn=de.useCallback(()=>{De(!0),ee(er.current),j(Ue=>Ue.filter(gt=>gt.toastId!==y.id)),setTimeout(()=>{O(y)},RG)},[y,O,j,er]);de.useEffect(()=>{if(y.promise&&Bt==="loading"||y.duration===1/0||y.type==="loading")return;let Ue;return k||T||tr?(()=>{if(es.current<Qi.current){const dn=new Date().getTime()-Qi.current;lt.current=lt.current-dn}es.current=new Date().getTime()})():(()=>{lt.current!==1/0&&(Qi.current=new Date().getTime(),Ue=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),Wn()},lt.current))})(),()=>clearTimeout(Ue)},[k,T,y,Bt,tr,Wn]),de.useEffect(()=>{y.delete&&(Wn(),y.onDismiss==null||y.onDismiss.call(y,y))},[Wn,y.delete]);function ns(){var Ue;if(me?.loading){var gt;return de.createElement("div",{className:qs(le?.loader,y==null||(gt=y.classNames)==null?void 0:gt.loader,"sonner-loader"),"data-visible":Bt==="loading"},me.loading)}return de.createElement(fG,{className:qs(le?.loader,y==null||(Ue=y.classNames)==null?void 0:Ue.loader),visible:Bt==="loading"})}const rs=y.icon||me?.[Bt]||dG(Bt);var _t,ea;return de.createElement("li",{tabIndex:0,ref:rt,className:qs(U,Gi,le?.toast,y==null||(e=y.classNames)==null?void 0:e.toast,le?.default,le?.[Bt],y==null||(n=y.classNames)==null?void 0:n[Bt]),"data-sonner-toast":"","data-rich-colors":(_t=y.richColors)!=null?_t:I,"data-styled":!(y.jsx||y.unstyled||v),"data-mounted":ue,"data-promise":!!y.promise,"data-swiped":vn,"data-removed":Ee,"data-visible":qn,"data-y-position":js,"data-x-position":Ji,"data-index":C,"data-front":vt,"data-swiping":Ae,"data-dismissible":Rn,"data-type":Bt,"data-invert":Zi,"data-swipe-out":Je,"data-swipe-direction":H,"data-expanded":!!(k||Q&&ue),"data-testid":y.testId,style:{"--index":C,"--toasts-before":C,"--z-index":D.length-C,"--offset":`${Ee?te:er.current}px`,"--initial-height":Q?"auto":`${ge}px`,...P,...y.style},onDragEnd:()=>{ke(!1),he(null),ts.current=null},onPointerDown:Ue=>{Ue.button!==2&&(Ir||!Rn||(At.current=new Date,ee(er.current),Ue.target.setPointerCapture(Ue.pointerId),Ue.target.tagName!=="BUTTON"&&(ke(!0),ts.current={x:Ue.clientX,y:Ue.clientY})))},onPointerUp:()=>{var Ue,gt,qt;if(Je||!Rn)return;ts.current=null;const dn=Number(((Ue=rt.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Hn=Number(((gt=rt.current)==null?void 0:gt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Vt=new Date().getTime()-((qt=At.current)==null?void 0:qt.getTime()),Gt=xe==="x"?dn:Hn,hr=Math.abs(Gt)/Vt;if(Math.abs(Gt)>=AG||hr>.11){ee(er.current),y.onDismiss==null||y.onDismiss.call(y,y),ne(xe==="x"?dn>0?"right":"left":Hn>0?"down":"up"),Wn(),pt(!0);return}else{var Yt,Pn;(Yt=rt.current)==null||Yt.style.setProperty("--swipe-amount-x","0px"),(Pn=rt.current)==null||Pn.style.setProperty("--swipe-amount-y","0px")}nn(!1),ke(!1),he(null)},onPointerMove:Ue=>{var gt,qt,dn;if(!ts.current||!Rn||((gt=window.getSelection())==null?void 0:gt.toString().length)>0)return;const Vt=Ue.clientY-ts.current.y,Gt=Ue.clientX-ts.current.x;var hr;const Yt=(hr=t.swipeDirections)!=null?hr:PG(V);!xe&&(Math.abs(Gt)>1||Math.abs(Vt)>1)&&he(Math.abs(Gt)>Math.abs(Vt)?"x":"y");let Pn={x:0,y:0};const Ar=hn=>1/(1.5+Math.abs(hn)/20);if(xe==="y"){if(Yt.includes("top")||Yt.includes("bottom"))if(Yt.includes("top")&&Vt<0||Yt.includes("bottom")&&Vt>0)Pn.y=Vt;else{const hn=Vt*Ar(Vt);Pn.y=Math.abs(hn)<Math.abs(Vt)?hn:Vt}}else if(xe==="x"&&(Yt.includes("left")||Yt.includes("right")))if(Yt.includes("left")&&Gt<0||Yt.includes("right")&&Gt>0)Pn.x=Gt;else{const hn=Gt*Ar(Gt);Pn.x=Math.abs(hn)<Math.abs(Gt)?hn:Gt}(Math.abs(Pn.x)>0||Math.abs(Pn.y)>0)&&nn(!0),(qt=rt.current)==null||qt.style.setProperty("--swipe-amount-x",`${Pn.x}px`),(dn=rt.current)==null||dn.style.setProperty("--swipe-amount-y",`${Pn.y}px`)}},Yi&&!y.jsx&&Bt!=="loading"?de.createElement("button",{"aria-label":J,"data-disabled":Ir,"data-close-button":!0,onClick:Ir||!Rn?()=>{}:()=>{Wn(),y.onDismiss==null||y.onDismiss.call(y,y)},className:qs(le?.closeButton,y==null||(r=y.classNames)==null?void 0:r.closeButton)},(ea=me?.close)!=null?ea:xG):null,(Bt||y.icon||y.promise)&&y.icon!==null&&(me?.[Bt]!==null||y.icon)?de.createElement("div",{"data-icon":"",className:qs(le?.icon,y==null||(s=y.classNames)==null?void 0:s.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||ns():null,y.type!=="loading"?rs:null):null,de.createElement("div",{"data-content":"",className:qs(le?.content,y==null||(a=y.classNames)==null?void 0:a.content)},de.createElement("div",{"data-title":"",className:qs(le?.title,y==null||(l=y.classNames)==null?void 0:l.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?de.createElement("div",{"data-description":"",className:qs(B,ht,le?.description,y==null||(u=y.classNames)==null?void 0:u.description)},typeof y.description=="function"?y.description():y.description):null),de.isValidElement(y.cancel)?y.cancel:y.cancel&&Pf(y.cancel)?de.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||A,onClick:Ue=>{Pf(y.cancel)&&Rn&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,Ue),Wn())},className:qs(le?.cancelButton,y==null||(d=y.classNames)==null?void 0:d.cancelButton)},y.cancel.label):null,de.isValidElement(y.action)?y.action:y.action&&Pf(y.action)?de.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||L,onClick:Ue=>{Pf(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,Ue),!Ue.defaultPrevented&&Wn())},className:qs(le?.actionButton,y==null||(f=y.classNames)==null?void 0:f.actionButton)},y.action.label):null)};function N2(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function OG(t,e){const n={};return[t,e].forEach((r,s)=>{const a=s===1,l=a?"--mobile-offset":"--offset",u=a?kG:jG;function d(f){["top","right","bottom","left"].forEach(g=>{n[`${l}-${g}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?n[`${l}-${f}`]=u:n[`${l}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(u)}),n}const MG=de.forwardRef(function(e,n){const{id:r,invert:s,position:a="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:d,className:f,offset:g,mobileOffset:y,theme:v="light",richColors:T,duration:j,style:E,visibleToasts:_=SG,toastOptions:C,dir:D=N2(),gap:k=IG,icons:O,containerAriaLabel:I="Notifications"}=e,[$,P]=de.useState([]),A=de.useMemo(()=>r?$.filter(ue=>ue.toasterId===r):$.filter(ue=>!ue.toasterId),[$,r]),L=de.useMemo(()=>Array.from(new Set([a].concat(A.filter(ue=>ue.position).map(ue=>ue.position)))),[A,a]),[U,B]=de.useState([]),[q,V]=de.useState(!1),[se,Q]=de.useState(!1),[le,me]=de.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=de.useRef(null),xe=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),he=de.useRef(null),H=de.useRef(!1),ne=de.useCallback(ue=>{P(ye=>{var Ee;return(Ee=ye.find(De=>De.id===ue.id))!=null&&Ee.delete||lr.dismiss(ue.id),ye.filter(({id:De})=>De!==ue.id)})},[]);return de.useEffect(()=>lr.subscribe(ue=>{if(ue.dismiss){requestAnimationFrame(()=>{P(ye=>ye.map(Ee=>Ee.id===ue.id?{...Ee,delete:!0}:Ee))});return}setTimeout(()=>{rT.flushSync(()=>{P(ye=>{const Ee=ye.findIndex(De=>De.id===ue.id);return Ee!==-1?[...ye.slice(0,Ee),{...ye[Ee],...ue},...ye.slice(Ee+1)]:[ue,...ye]})})})}),[$]),de.useEffect(()=>{if(v!=="system"){me(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?me("dark"):me("light")),typeof window>"u")return;const ue=window.matchMedia("(prefers-color-scheme: dark)");try{ue.addEventListener("change",({matches:ye})=>{me(ye?"dark":"light")})}catch{ue.addListener(({matches:Ee})=>{try{me(Ee?"dark":"light")}catch(De){console.error(De)}})}},[v]),de.useEffect(()=>{$.length<=1&&V(!1)},[$]),de.useEffect(()=>{const ue=ye=>{var Ee;if(l.every(ke=>ye[ke]||ye.code===ke)){var Ae;V(!0),(Ae=J.current)==null||Ae.focus()}ye.code==="Escape"&&(document.activeElement===J.current||(Ee=J.current)!=null&&Ee.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",ue),()=>document.removeEventListener("keydown",ue)},[l]),de.useEffect(()=>{if(J.current)return()=>{he.current&&(he.current.focus({preventScroll:!0}),he.current=null,H.current=!1)}},[J.current]),de.createElement("section",{ref:n,"aria-label":`${I} ${xe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},L.map((ue,ye)=>{var Ee;const[De,Ae]=ue.split("-");return A.length?de.createElement("ol",{key:ue,dir:D==="auto"?N2():D,tabIndex:-1,ref:J,className:f,"data-sonner-toaster":!0,"data-sonner-theme":le,"data-y-position":De,"data-x-position":Ae,style:{"--front-toast-height":`${((Ee=U[0])==null?void 0:Ee.height)||0}px`,"--width":`${CG}px`,"--gap":`${k}px`,...E,...OG(g,y)},onBlur:ke=>{H.current&&!ke.currentTarget.contains(ke.relatedTarget)&&(H.current=!1,he.current&&(he.current.focus({preventScroll:!0}),he.current=null))},onFocus:ke=>{ke.target instanceof HTMLElement&&ke.target.dataset.dismissible==="false"||H.current||(H.current=!0,he.current=ke.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{se||V(!1)},onDragEnd:()=>V(!1),onPointerDown:ke=>{ke.target instanceof HTMLElement&&ke.target.dataset.dismissible==="false"||Q(!0)},onPointerUp:()=>Q(!1)},A.filter(ke=>!ke.position&&ye===0||ke.position===ue).map((ke,Je)=>{var pt,vn;return de.createElement(DG,{key:ke.id,icons:O,index:Je,toast:ke,defaultRichColors:T,duration:(pt=C?.duration)!=null?pt:j,className:C?.className,descriptionClassName:C?.descriptionClassName,invert:s,visibleToasts:_,closeButton:(vn=C?.closeButton)!=null?vn:d,interacting:se,position:ue,style:C?.style,unstyled:C?.unstyled,classNames:C?.classNames,cancelButtonStyle:C?.cancelButtonStyle,actionButtonStyle:C?.actionButtonStyle,closeButtonAriaLabel:C?.closeButtonAriaLabel,removeToast:ne,toasts:A.filter(nn=>nn.position==ke.position),heights:U.filter(nn=>nn.position==ke.position),setHeights:B,expandByDefault:u,gap:k,expanded:q,swipeDirections:e.swipeDirections})})):null}))}),LG=["",""," "," ","","","","","",""],VG=[{value:"building",label:" "},{value:"villa",label:""},{value:"complex",label:" "},{value:"land",label:""}];function FG({isOpen:t,onClose:e,propertyId:n}){const{properties:r,addProperty:s,updateProperty:a}=An(),[l,u]=N.useState({name:"",city:"",address:"",type:"building",images:[]});N.useEffect(()=>{if(n){const y=r.find(v=>v.id===n);y&&u({name:y.name,city:y.city,address:y.address,type:y.type,images:y.images||[]})}else u({name:"",city:"",address:"",type:"building",images:[]})},[n,r,t]);const d=y=>{if(y.preventDefault(),!l.name||!l.address){ot.error("    ");return}n?(a(n,l),ot.success("   ")):(s(l),ot.success("   ")),e()},f=()=>{const y=["https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=800","https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800","https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800","https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800"],v=y[Math.floor(Math.random()*y.length)];u({...l,images:[...l.images,v]}),ot.success("  ")},g=y=>{u({...l,images:l.images.filter((v,T)=>T!==y)})};return o.jsx(Bc,{open:t,onOpenChange:e,children:o.jsxs(zc,{className:"max-w-lg",children:[o.jsx(qc,{children:o.jsx(Wc,{children:n?" ":"  "})}),o.jsxs("form",{onSubmit:d,className:"space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:l.name,onChange:y=>u({...l,name:y.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:":  "})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("select",{value:l.type,onChange:y=>u({...l,type:y.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:VG.map(y=>o.jsx("option",{value:y.value,children:y.label},y.value))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("select",{value:l.city,onChange:y=>u({...l,city:y.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:LG.map(y=>o.jsx("option",{value:y,children:y},y))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:l.address,onChange:y=>u({...l,address:y.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:":    "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),l.images.length>0&&o.jsx("div",{className:"grid grid-cols-4 gap-2 mb-3",children:l.images.map((y,v)=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:y,alt:` ${v+1}`,className:"w-full h-16 object-cover rounded-lg"}),o.jsx("button",{type:"button",onClick:()=>g(v),className:"absolute top-1 left-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Ha,{className:"w-3 h-3"})})]},v))}),o.jsxs("button",{type:"button",onClick:f,className:"w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-xl hover:border-brand-blue transition-colors flex items-center justify-center gap-2 text-gray-600 hover:text-brand-blue text-sm",children:[o.jsx(ib,{className:"w-4 h-4"}),o.jsx("span",{children:" "})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(be,{type:"submit",variant:"gradient",className:"flex-1",children:n?" ":" "}),o.jsx(be,{type:"button",variant:"outline",onClick:e,children:""})]})]})]})})}function T2(){const{properties:t,units:e,deleteProperty:n}=An();Ns();const[r,s]=N.useState(""),[a,l]=N.useState("all"),[u,d]=N.useState(!1),[f,g]=N.useState(null),y=_=>{const C=e.filter(I=>I.propertyId===_),D=C.length,k=C.filter(I=>I.status==="rented").length,O=D>0?Math.round(k/D*100):0;return{total:D,rented:k,occupancy:O}},v=t.filter(_=>{const C=_.name.toLowerCase().includes(r.toLowerCase())||_.city.toLowerCase().includes(r.toLowerCase()),D=a==="all"||_.city===a;return C&&D}),T=["all",...Array.from(new Set(t.map(_=>_.city)))],j=_=>{g(_),d(!0)},E=_=>{const C=t.find(k=>k.id===_),D=e.filter(k=>k.propertyId===_);if(D.length>0){ot.error(`   "${C?.name}"    ${D.length} `);return}confirm(`     "${C?.name}"`)&&(n(_),ot.success("   "))};return o.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["    (",t.length," )"]})}),o.jsxs(be,{onClick:()=>{g(null),d(!0)},variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[o.jsx(ii,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 lg:gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(ai,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),o.jsx("input",{type:"text",placeholder:"  ...",value:r,onChange:_=>s(_.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all text-sm lg:text-base"})]}),o.jsxs("select",{value:a,onChange:_=>l(_.target.value),className:"px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white transition-all text-sm lg:text-base",children:[o.jsx("option",{value:"all",children:" "}),T.filter(_=>_!=="all").map(_=>o.jsx("option",{value:_,children:_},_))]})]})}),v.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:v.map((_,C)=>{const D=y(_.id);return o.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:C*.05},className:"bg-white rounded-xl lg:rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 group",children:[o.jsxs("div",{className:"relative h-36 sm:h-40 lg:h-48 overflow-hidden",children:[o.jsx("img",{src:_.images[0]||"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800",alt:_.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),o.jsxs("div",{className:"absolute bottom-3 lg:bottom-4 right-3 lg:right-4 left-3 lg:left-4",children:[o.jsx("h3",{className:"text-white font-bold text-base lg:text-lg mb-1",children:_.name}),o.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-xs lg:text-sm",children:[o.jsx(Rd,{className:"w-3 h-3 lg:w-4 lg:h-4"}),o.jsx("span",{children:_.city})]})]}),o.jsx("div",{className:"absolute top-3 lg:top-4 left-3 lg:left-4",children:o.jsx("span",{className:"px-2 lg:px-3 py-1 bg-white/90 backdrop-blur rounded-full text-[10px] lg:text-xs font-medium text-brand-dark",children:_.type==="building"?"":_.type==="villa"?"":_.type==="complex"?"":""})})]}),o.jsxs("div",{className:"p-3 lg:p-5",children:[o.jsx("p",{className:"text-gray-500 text-xs lg:text-sm mb-3 lg:mb-4 line-clamp-2",children:_.address}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 lg:gap-3 mb-3 lg:mb-4",children:[o.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:"text-base lg:text-lg font-bold text-brand-dark",children:D.total}),o.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:""})]}),o.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-green-50 rounded-lg",children:[o.jsx("div",{className:"text-base lg:text-lg font-bold text-green-600",children:D.rented}),o.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:""})]}),o.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-blue-50 rounded-lg",children:[o.jsxs("div",{className:"text-base lg:text-lg font-bold text-brand-blue",children:[D.occupancy,"%"]}),o.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:""})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 lg:pt-4 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>j(_.id),className:"p-1.5 lg:p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg transition-colors",title:"",children:o.jsx(Wa,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>E(_.id),className:"p-1.5 lg:p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:o.jsx(Es,{className:"w-4 h-4"})})]}),o.jsx(Ke,{to:`/app/units?property=${_.id}`,children:o.jsxs(be,{variant:"outline",size:"sm",className:"text-xs lg:text-sm px-2 lg:px-3",children:[o.jsx(qr,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1"}),""]})})]})]})]},_.id)})}):o.jsxs("div",{className:"bg-white rounded-xl lg:rounded-2xl shadow-lg p-8 lg:p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Xn,{className:"w-8 h-8 lg:w-10 lg:h-10 text-gray-400"})}),o.jsx("h3",{className:"text-lg lg:text-xl font-bold text-gray-700 mb-2",children:"  "}),o.jsx("p",{className:"text-sm lg:text-base text-gray-500 mb-6",children:r||a!=="all"?"    ":"   "}),!r&&a==="all"&&o.jsxs(be,{onClick:()=>{g(null),d(!0)},variant:"gradient",children:[o.jsx(ii,{className:"w-5 h-5 ml-2"}),"  "]})]}),o.jsx(FG,{isOpen:u,onClose:()=>{d(!1),g(null)},propertyId:f})]})}const UG=[{value:"apartment",label:""},{value:"studio",label:""},{value:"office",label:""},{value:"shop",label:" "},{value:"warehouse",label:""},{value:"villa",label:""}];function $G({isOpen:t,onClose:e,propertyId:n,unitId:r}){const{units:s,properties:a,addUnit:l,updateUnit:u}=An(),[d,f]=N.useState({propertyId:n||"",unitNo:"",type:"apartment",floor:"",rentAmount:0,status:"vacant",areaSqm:0,bedrooms:0,bathrooms:0}),g=a.find(v=>v.id===d.propertyId);N.useEffect(()=>{if(r){const v=s.find(T=>T.id===r);v&&f({propertyId:v.propertyId,unitNo:v.unitNo,type:v.type,floor:v.floor||"",rentAmount:v.rentAmount,status:v.status,areaSqm:v.areaSqm||0,bedrooms:v.bedrooms||0,bathrooms:v.bathrooms||0})}else n&&f(v=>({...v,propertyId:n}))},[r,n,s,t]);const y=v=>{if(v.preventDefault(),!d.propertyId||!d.unitNo){ot.error("    ");return}const T={propertyId:d.propertyId,propertyName:g?.name||"",unitNo:d.unitNo,type:d.type,floor:d.floor||void 0,rentAmount:d.rentAmount,status:d.status,areaSqm:d.areaSqm,bedrooms:d.bedrooms,bathrooms:d.bathrooms,images:[]};r?(u(r,T),ot.success("   ")):(l(T),ot.success("   ")),e()};return o.jsx(Bc,{open:t,onOpenChange:e,children:o.jsxs(zc,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx(qc,{children:o.jsx(Wc,{children:r?" ":"  "})}),o.jsxs("form",{onSubmit:y,className:"space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:d.propertyId,onChange:v=>f({...d,propertyId:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",disabled:!!n,children:[o.jsx("option",{value:"",children:" "}),a.map(v=>o.jsxs("option",{value:v.id,children:[v.name," - ",v.city]},v.id))]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:d.unitNo,onChange:v=>f({...d,unitNo:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:"A-101"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("select",{value:d.type,onChange:v=>f({...d,type:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:UG.map(v=>o.jsx("option",{value:v.value,children:v.label},v.value))})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"text",value:d.floor,onChange:v=>f({...d,floor:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsxs("select",{value:d.status,onChange:v=>f({...d,status:v.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[o.jsx("option",{value:"vacant",children:""}),o.jsx("option",{value:"rented",children:""}),o.jsx("option",{value:"maintenance",children:""})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" (.) ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"number",min:"0",value:d.rentAmount,onChange:v=>f({...d,rentAmount:parseInt(v.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),o.jsx("input",{type:"number",min:"0",value:d.areaSqm,onChange:v=>f({...d,areaSqm:parseInt(v.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsx("input",{type:"number",min:"0",value:d.bedrooms,onChange:v=>f({...d,bedrooms:parseInt(v.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsx("input",{type:"number",min:"0",value:d.bathrooms,onChange:v=>f({...d,bathrooms:parseInt(v.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(be,{type:"submit",variant:"gradient",className:"flex-1",children:r?" ":" "}),o.jsx(be,{type:"button",variant:"outline",onClick:e,children:""})]})]})]})})}function St(t){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function Ri(t){return(typeof t=="string"?new Date(t):t).toLocaleDateString("ar-SA",{year:"numeric",month:"2-digit",day:"2-digit"})}function BG(t){const e=typeof t=="string"?new Date(t):t,r=new Date().getTime()-e.getTime(),s=Math.floor(r/(1e3*60*60*24));return s===0?"":s===1?"":s<7?` ${s} `:s<30?` ${Math.floor(s/7)} `:s<365?` ${Math.floor(s/30)} `:` ${Math.floor(s/365)} `}function ki(t){const e=typeof t=="string"?new Date(t):t,n=new Date,r=e.getTime()-n.getTime();return Math.ceil(r/(1e3*60*60*24))}function S2(){const{units:t,properties:e,contracts:n,deleteUnit:r,updateUnit:s}=An(),[a]=tT(),l=a.get("property")||"all",[u,d]=N.useState(""),[f,g]=N.useState("all"),[y,v]=N.useState(!1),[T,j]=N.useState(null),E=N.useMemo(()=>t.filter(I=>{const $=I.unitNo.toLowerCase().includes(u.toLowerCase())||I.propertyName.toLowerCase().includes(u.toLowerCase()),P=f==="all"||I.status===f,A=l==="all"||I.propertyId===l;return $&&P&&A}),[t,u,f,l]),_=N.useMemo(()=>{const I=l==="all"?t:t.filter($=>$.propertyId===l);return{total:I.length,rented:I.filter($=>$.status==="rented").length,vacant:I.filter($=>$.status==="vacant").length,maintenance:I.filter($=>$.status==="maintenance").length}},[t,l]),C=I=>{j(I),v(!0)},D=I=>{const $=t.find(A=>A.id===I);if(n.some(A=>A.unitId===I&&A.status==="active")){ot.error(`    "${$?.unitNo}"    `);return}confirm(`      "${$?.unitNo}"`)&&(r(I),ot.success("   "))},k=(I,$)=>{s(I,{status:$}),ot.success("   ")},O=I=>{const P={rented:{bg:"bg-green-100",text:"text-green-700",label:""},vacant:{bg:"bg-amber-100",text:"text-amber-700",label:""},maintenance:{bg:"bg-red-100",text:"text-red-700",label:""}}[I];return o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.bg} ${P.text}`,children:P.label})};return e.find(I=>I.id===l),o.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["   (",E.length,"  ",_.total,")"]})}),o.jsxs(be,{onClick:()=>{j(null),v(!0)},variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[o.jsx(ii,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 lg:gap-4",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4 text-center",children:[o.jsx("div",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:_.total}),o.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4 text-center",children:[o.jsx("div",{className:"text-xl lg:text-2xl font-bold text-green-600",children:_.rented}),o.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:""})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4 text-center",children:[o.jsx("div",{className:"text-xl lg:text-2xl font-bold text-amber-600",children:_.vacant}),o.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:""})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4 text-center",children:[o.jsx("div",{className:"text-xl lg:text-2xl font-bold text-red-600",children:_.maintenance}),o.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:""})]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:o.jsxs("div",{className:"space-y-3 lg:space-y-0 lg:grid lg:grid-cols-3 lg:gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(ai,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),o.jsx("input",{type:"text",placeholder:"  ...",value:u,onChange:I=>d(I.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base"})]}),o.jsxs("select",{value:l,onChange:I=>window.location.href=`/app/units?property=${I.target.value}`,className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white text-sm lg:text-base",children:[o.jsx("option",{value:"all",children:" "}),e.map(I=>o.jsx("option",{value:I.id,children:I.name},I.id))]}),o.jsx("div",{className:"flex gap-1.5 lg:gap-2 overflow-x-auto pb-1",children:["all","vacant","rented","maintenance"].map(I=>o.jsx("button",{onClick:()=>g(I),className:`flex-1 min-w-fit py-2 px-2 lg:px-3 rounded-xl text-xs lg:text-sm font-medium transition-all whitespace-nowrap ${f===I?"bg-brand-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:I==="all"?"":I==="vacant"?"":I==="rented"?"":""},I))})]})}),o.jsx("div",{className:"lg:hidden space-y-3",children:E.map((I,$)=>o.jsxs(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:$*.02},className:"bg-white rounded-xl shadow p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-light flex items-center justify-center",children:o.jsx(qr,{className:"w-5 h-5 text-brand-blue"})}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-gray-900",children:I.unitNo}),I.floor&&o.jsxs("span",{className:"text-xs text-gray-400 block",children:[" ",I.floor]})]})]}),O(I.status)]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:":"}),o.jsx("span",{className:"text-gray-700",children:I.propertyName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:":"}),o.jsxs("span",{className:"text-gray-700",children:[I.bedrooms&&`${I.bedrooms} `,I.bathrooms&&`  ${I.bathrooms} `,I.areaSqm&&`  ${I.areaSqm} `]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:":"}),o.jsx("span",{className:"font-bold text-brand-dark",children:St(I.rentAmount)})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100",children:[o.jsxs("select",{value:I.status,onChange:P=>k(I.id,P.target.value),className:`text-xs font-medium rounded-lg px-2 py-1.5 border-0 ${I.status==="rented"?"bg-green-100 text-green-700":I.status==="vacant"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[o.jsx("option",{value:"vacant",children:""}),o.jsx("option",{value:"rented",children:""}),o.jsx("option",{value:"maintenance",children:""})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>C(I.id),className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg transition-colors",title:"",children:o.jsx(Wa,{className:"w-4 h-4"})}),I.status==="vacant"&&o.jsx(Ke,{to:`/app/contracts?unit=${I.id}`,children:o.jsx("button",{className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ",children:o.jsx(Yr,{className:"w-4 h-4"})})}),o.jsx("button",{onClick:()=>D(I.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:o.jsx(Es,{className:"w-4 h-4"})})]})]})]},I.id))}),o.jsxs("div",{className:"hidden lg:block bg-white rounded-xl shadow-lg overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:" "}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:E.map((I,$)=>o.jsxs(Qe.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:$*.02},className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-light flex items-center justify-center",children:o.jsx(qr,{className:"w-5 h-5 text-brand-blue"})}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-gray-900",children:I.unitNo}),I.floor&&o.jsxs("span",{className:"text-xs text-gray-400 block",children:[" ",I.floor]})]})]})}),o.jsx("td",{className:"px-6 py-4 text-gray-600",children:I.propertyName}),o.jsx("td",{className:"px-6 py-4 text-gray-600",children:o.jsxs("div",{className:"text-sm",children:[I.bedrooms&&o.jsxs("span",{children:[I.bedrooms," "]}),I.bathrooms&&o.jsxs("span",{className:"mr-2",children:[" ",I.bathrooms," "]}),I.areaSqm&&o.jsxs("span",{className:"mr-2",children:[" ",I.areaSqm," "]})]})}),o.jsx("td",{className:"px-6 py-4 font-bold text-brand-dark",children:St(I.rentAmount)}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("select",{value:I.status,onChange:P=>k(I.id,P.target.value),className:`text-xs font-medium rounded-lg px-2 py-1 border-0 ${I.status==="rented"?"bg-green-100 text-green-700":I.status==="vacant"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[o.jsx("option",{value:"vacant",children:""}),o.jsx("option",{value:"rented",children:""}),o.jsx("option",{value:"maintenance",children:""})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>C(I.id),className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg transition-colors",title:"",children:o.jsx(Wa,{className:"w-4 h-4"})}),I.status==="vacant"&&o.jsx(Ke,{to:`/app/contracts?unit=${I.id}`,children:o.jsx("button",{className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ",children:o.jsx(Yr,{className:"w-4 h-4"})})}),o.jsx("button",{onClick:()=>D(I.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:o.jsx(Es,{className:"w-4 h-4"})})]})})]},I.id))})]})}),E.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(qr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{className:"text-gray-500",children:"  "}),(u||f!=="all")&&o.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"   "})]})]}),E.length===0&&o.jsxs("div",{className:"lg:hidden text-center py-12 bg-white rounded-xl shadow",children:[o.jsx(qr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{className:"text-gray-500",children:"  "}),(u||f!=="all")&&o.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"   "})]}),o.jsx($G,{isOpen:y,onClose:()=>{v(!1),j(null)},propertyId:l!=="all"?l:"",unitId:T})]})}function j2(){const{tenants:t,contracts:e,payments:n,addTenant:r,updateTenant:s,deleteTenant:a}=An(),[l,u]=N.useState(""),[d,f]=N.useState(!1),[g,y]=N.useState(null),[v,T]=N.useState({fullName:"",phone:"",email:"",nationalId:""}),j=t.filter(k=>k.fullName.toLowerCase().includes(l.toLowerCase())||k.phone.includes(l)||k.nationalId&&k.nationalId.includes(l)),E=k=>{const O=e.filter(L=>L.tenantId===k),I=O.filter(L=>L.status==="active"),P=n.filter(L=>O.some(U=>U.id===L.contractId)).filter(L=>L.status==="overdue"),A=P.reduce((L,U)=>L+U.amount,0);return{activeContracts:I.length,totalContracts:O.length,overdueCount:P.length,overdueAmount:A}},_=k=>{k?(y(k),T({fullName:k.fullName,phone:k.phone,email:k.email||"",nationalId:k.nationalId||""})):(y(null),T({fullName:"",phone:"",email:"",nationalId:""})),f(!0)},C=k=>{if(k.preventDefault(),!v.fullName||!v.phone){ot.error("    ");return}g?(s(g.id,v),ot.success("   ")):(r(v),ot.success("   ")),f(!1),y(null)},D=k=>{if(E(k.id).activeContracts>0){ot.error(`   "${k.fullName}"    `);return}confirm(`     "${k.fullName}"`)&&(a(k.id),ot.success("   "))};return o.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["   (",t.length," )"]})}),o.jsxs(be,{onClick:()=>_(),variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[o.jsx(ii,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:o.jsxs("div",{className:"relative",children:[o.jsx(ai,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),o.jsx("input",{type:"text",placeholder:"      ...",value:l,onChange:k=>u(k.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all text-sm lg:text-base"})]})}),j.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:j.map((k,O)=>{const I=E(k.id);return o.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:O*.05},className:"bg-white rounded-xl lg:rounded-2xl shadow-lg p-4 lg:p-6 hover:shadow-xl transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3 lg:mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[o.jsx("div",{className:"w-10 h-10 lg:w-12 lg:h-12 rounded-full bg-gradient-to-br from-brand-blue to-brand-purple flex items-center justify-center text-white font-bold text-base lg:text-lg",children:k.fullName.charAt(0)}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-bold text-brand-dark text-sm lg:text-base truncate",children:k.fullName}),k.nationalId&&o.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-400",children:[": ",k.nationalId]})]})]}),I.overdueCount>0&&o.jsxs("span",{className:"px-1.5 lg:px-2 py-0.5 lg:py-1 bg-red-100 text-red-600 text-[10px] lg:text-xs font-medium rounded-full flex-shrink-0",children:[I.overdueCount," "]})]}),o.jsxs("div",{className:"space-y-1.5 lg:space-y-2 mb-3 lg:mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs lg:text-sm text-gray-600",children:[o.jsx(Xd,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{dir:"ltr",className:"truncate",children:k.phone})]}),k.email&&o.jsxs("div",{className:"flex items-center gap-2 text-xs lg:text-sm text-gray-600",children:[o.jsx(si,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"truncate",children:k.email})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:gap-3 mb-3 lg:mb-4 pt-3 lg:pt-4 border-t border-gray-100",children:[o.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:"text-base lg:text-lg font-bold text-brand-dark",children:I.activeContracts}),o.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:" "})]}),o.jsxs("div",{className:"text-center p-1.5 lg:p-2 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:"text-base lg:text-lg font-bold text-brand-dark",children:I.totalContracts}),o.jsx("div",{className:"text-[10px] lg:text-xs text-gray-500",children:" "})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 lg:pt-4 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>_(k),className:"p-1.5 lg:p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg transition-colors",title:"",children:o.jsx(Wa,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>D(k),className:"p-1.5 lg:p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:o.jsx(Es,{className:"w-4 h-4"})})]}),o.jsx(Ke,{to:`/app/contracts?tenant=${k.id}`,children:o.jsxs(be,{variant:"outline",size:"sm",className:"text-xs lg:text-sm px-2 lg:px-3",children:[o.jsx(Yr,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1"}),""]})})]})]},k.id)})}):o.jsxs("div",{className:"bg-white rounded-xl lg:rounded-2xl shadow-lg p-8 lg:p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Fc,{className:"w-8 h-8 lg:w-10 lg:h-10 text-gray-400"})}),o.jsx("h3",{className:"text-lg lg:text-xl font-bold text-gray-700 mb-2",children:"  "}),o.jsx("p",{className:"text-sm lg:text-base text-gray-500 mb-6",children:l?"    ":"   "}),!l&&o.jsxs(be,{onClick:()=>_(),variant:"gradient",children:[o.jsx(ii,{className:"w-5 h-5 ml-2"}),"  "]})]}),o.jsx(Bc,{open:d,onOpenChange:f,children:o.jsxs(zc,{className:"max-w-[95vw] sm:max-w-md mx-auto",children:[o.jsx(qc,{children:o.jsx(Wc,{className:"text-base lg:text-lg",children:g?"  ":"  "})}),o.jsxs("form",{onSubmit:C,className:"space-y-3 lg:space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:v.fullName,onChange:k=>T({...v,fullName:k.target.value}),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:":   "})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"tel",value:v.phone,onChange:k=>T({...v,phone:k.target.value}),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:"05XXXXXXXX",dir:"ltr"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsx("input",{type:"email",value:v.email,onChange:k=>T({...v,email:k.target.value}),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:"example@email.com",dir:"ltr"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:"  "}),o.jsx("input",{type:"text",value:v.nationalId,onChange:k=>T({...v,nationalId:k.target.value}),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:"11XXXXXXXX",dir:"ltr"})]}),o.jsxs("div",{className:"flex gap-2 lg:gap-3 pt-4",children:[o.jsx(be,{type:"submit",variant:"gradient",className:"flex-1 text-sm lg:text-base py-2.5 lg:py-3",children:g?" ":" "}),o.jsx(be,{type:"button",variant:"outline",onClick:()=>f(!1),className:"text-sm lg:text-base",children:""})]})]})]})})]})}function zG({isOpen:t,onClose:e,contractId:n,preselectedUnitId:r}){const{contracts:s,units:a,tenants:l,addContract:u,updateContract:d}=An(),[f,g]=N.useState({tenantId:"",unitId:"",startDate:"",endDate:"",rentAmount:0,paymentFrequency:"monthly",status:"active",deposit:0,notes:""}),y=n?a:a.filter(j=>j.status==="vacant");N.useEffect(()=>{if(n){const j=s.find(E=>E.id===n);j&&g({tenantId:j.tenantId,unitId:j.unitId,startDate:j.startDate,endDate:j.endDate,rentAmount:j.rentAmount,paymentFrequency:j.paymentFrequency,status:j.status,deposit:j.deposit||0,notes:j.notes||""})}else{const j=r?a.find(E=>E.id===r):null;g({tenantId:"",unitId:r||"",startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],rentAmount:j?.rentAmount||0,paymentFrequency:"monthly",status:"active",deposit:0,notes:""})}},[n,r,s,a,t]);const v=j=>{const E=a.find(_=>_.id===j);E&&g({...f,unitId:j,rentAmount:E.rentAmount})},T=j=>{if(j.preventDefault(),!f.tenantId||!f.unitId){ot.error("   ");return}if(!f.startDate||!f.endDate){ot.error("   ");return}if(new Date(f.endDate)<=new Date(f.startDate)){ot.error("       ");return}n?(d(n,f),ot.success("   ")):(u(f),ot.success("    ")),e()};return o.jsx(Bc,{open:t,onOpenChange:e,children:o.jsxs(zc,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx(qc,{children:o.jsx(Wc,{children:n?" ":"  "})}),o.jsxs("form",{onSubmit:T,className:"space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:f.tenantId,onChange:j=>g({...f,tenantId:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[o.jsx("option",{value:"",children:" "}),l.map(j=>o.jsxs("option",{value:j.id,children:[j.fullName," - ",j.phone]},j.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:f.unitId,onChange:j=>v(j.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",disabled:!!n,children:[o.jsx("option",{value:"",children:" "}),y.map(j=>o.jsxs("option",{value:j.id,children:[j.propertyName," - ",j.unitNo," (",j.rentAmount.toLocaleString()," .)"]},j.id))]}),!n&&y.length===0&&o.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"   .    ."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",value:f.startDate,onChange:j=>g({...f,startDate:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",value:f.endDate,onChange:j=>g({...f,endDate:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  (.) ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"number",min:"0",value:f.rentAmount,onChange:j=>g({...f,rentAmount:parseInt(j.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:f.paymentFrequency,onChange:j=>g({...f,paymentFrequency:j.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[o.jsx("option",{value:"monthly",children:""}),o.jsx("option",{value:"quarterly",children:" "}),o.jsx("option",{value:"yearly",children:""})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  (.)"}),o.jsx("input",{type:"number",min:"0",value:f.deposit,onChange:j=>g({...f,deposit:parseInt(j.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("textarea",{value:f.notes,onChange:j=>g({...f,notes:j.target.value}),rows:2,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:"  ..."})]}),!n&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 text-sm text-blue-700",children:"          "}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(be,{type:"submit",variant:"gradient",className:"flex-1",children:n?" ":" "}),o.jsx(be,{type:"button",variant:"outline",onClick:e,children:""})]})]})]})})}function k2(){const{contracts:t,deleteContract:e,updateContract:n}=An(),[r]=tT(),s=r.get("tenant")||"all",a=r.get("unit")||"all",[l,u]=N.useState(""),[d,f]=N.useState("all"),[g,y]=N.useState(!1),[v,T]=N.useState(null),[j,E]=N.useState(a!=="all"?a:null),_=N.useMemo(()=>t.filter(O=>{const I=O.tenantName.toLowerCase().includes(l.toLowerCase())||O.propertyName.toLowerCase().includes(l.toLowerCase())||O.unitNo.toLowerCase().includes(l.toLowerCase()),$=d==="all"||O.status===d,P=s==="all"||O.tenantId===s,A=a==="all"||O.unitId===a;return I&&$&&P&&A}),[t,l,d,s,a]),C=N.useMemo(()=>({total:t.length,active:t.filter(O=>O.status==="active").length,expiringSoon:t.filter(O=>{const I=ki(O.endDate);return O.status==="active"&&I>=0&&I<=30}).length,totalMonthlyRent:t.filter(O=>O.status==="active").reduce((O,I)=>{let $=I.rentAmount;return I.paymentFrequency==="quarterly"&&($/=3),I.paymentFrequency==="semi_annual"&&($/=6),I.paymentFrequency==="monthly"&&($/=12),O+$},0)}),[t]),D=async O=>{if(window.confirm("           ."))try{await n(O,{status:"ended"}),ot.success("   ")}catch{ot.error("    ")}},k=async O=>{if(window.confirm("       "))try{await e(O),ot.success("   ")}catch{ot.error("    ")}};return o.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["   (",t.length," )"]})}),o.jsxs(be,{onClick:()=>{T(null),E(a!=="all"?a:null),y(!0)},variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[o.jsx(ii,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 lg:gap-4",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:[o.jsx("div",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:C.total}),o.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:[o.jsx("div",{className:"text-xl lg:text-2xl font-bold text-green-600",children:C.active}),o.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:[o.jsx("div",{className:"text-xl lg:text-2xl font-bold text-amber-600",children:C.expiringSoon}),o.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:[o.jsx("div",{className:"text-sm lg:text-lg font-bold text-brand-dark",children:St(C.totalMonthlyRent)}),o.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:" "})]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm p-3 lg:p-4 border border-gray-100",children:o.jsxs("div",{className:"space-y-3 lg:space-y-0 lg:grid lg:grid-cols-2 lg:gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(ai,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),o.jsx("input",{type:"text",placeholder:"   ...",value:l,onChange:O=>u(O.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base"})]}),o.jsx("div",{className:"flex gap-1.5 lg:gap-2",children:["all","active","ended"].map(O=>o.jsx("button",{onClick:()=>f(O),className:`flex-1 py-2 px-2 rounded-xl text-xs lg:text-sm font-medium transition-all ${d===O?"bg-brand-blue text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:O==="all"?"":O==="active"?"":""},O))})]})}),o.jsx("div",{className:"lg:hidden space-y-3",children:_.map((O,I)=>{const $=ki(O.endDate);return o.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:I*.02},className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-brand-blue to-brand-purple flex items-center justify-center text-white font-bold text-sm",children:O.tenantName.charAt(0)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900 text-sm",children:O.tenantName}),o.jsxs("p",{className:"text-xs text-gray-500",children:[O.propertyName," - ",O.unitNo]})]})]}),o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${O.status==="active"?"bg-green-100 text-green-700":O.status==="ended"?"bg-gray-100 text-gray-700":"bg-amber-100 text-amber-700"}`,children:O.status==="active"?"":O.status==="ended"?"":""})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:" "}),o.jsx("p",{className:"font-medium",children:Ri(O.startDate)}),o.jsxs("p",{className:"text-gray-400",children:[" ",Ri(O.endDate)]}),O.status==="active"&&o.jsx("span",{className:`${$<30?"text-red-600":$<90?"text-amber-600":"text-green-600"}`,children:$>0?` ${$} `:""})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:""}),o.jsx("p",{className:"font-bold text-brand-dark",children:St(O.rentAmount)}),o.jsx("p",{className:"text-gray-400",children:O.paymentFrequency==="monthly"?"":O.paymentFrequency==="quarterly"?" ":""})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ke,{to:`/app/payments?contract=${O.id}`,children:o.jsx("button",{className:"p-1.5 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg",children:o.jsx(Kr,{className:"w-4 h-4"})})}),o.jsx("button",{onClick:()=>{T(O.id),y(!0)},className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",children:o.jsx(Wa,{className:"w-4 h-4"})}),O.status==="active"&&o.jsx("button",{onClick:()=>D(O.id),className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg",children:o.jsx(Rm,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>k(O.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg",children:o.jsx(Es,{className:"w-4 h-4"})})]}),o.jsx(Ke,{to:`/app/payments?contract=${O.id}`,children:o.jsxs(be,{variant:"outline",size:"sm",className:"text-xs px-2",children:[o.jsx(Kr,{className:"w-3 h-3 ml-1"}),""]})})]})]},O.id)})}),o.jsxs("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:" / "}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:" "}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map((O,I)=>{const $=ki(O.endDate);return o.jsxs(Qe.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:I*.02},className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-blue to-brand-purple flex items-center justify-center text-white font-bold",children:O.tenantName.charAt(0)}),o.jsx("div",{children:o.jsx("p",{className:"font-medium text-gray-900",children:O.tenantName})})]})}),o.jsxs("td",{className:"px-6 py-4",children:[o.jsx("p",{className:"text-gray-900",children:O.propertyName}),o.jsxs("p",{className:"text-sm text-gray-500",children:[" ",O.unitNo]})]}),o.jsxs("td",{className:"px-6 py-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:Ri(O.startDate)}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",Ri(O.endDate)]}),O.status==="active"&&o.jsx("span",{className:`text-xs ${$<30?"text-red-600":$<90?"text-amber-600":"text-green-600"}`,children:$>0?` ${$} `:""})]}),o.jsxs("td",{className:"px-6 py-4",children:[o.jsx("p",{className:"font-bold text-brand-dark",children:St(O.rentAmount)}),o.jsx("p",{className:"text-xs text-gray-400",children:O.paymentFrequency==="monthly"?"":O.paymentFrequency==="quarterly"?" ":""})]}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.status==="active"?"bg-green-100 text-green-700":O.status==="ended"?"bg-gray-100 text-gray-700":"bg-amber-100 text-amber-700"}`,children:O.status==="active"?"":O.status==="ended"?"":""})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ke,{to:`/app/payments?contract=${O.id}`,children:o.jsx("button",{className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-brand-blue/10 rounded-lg",title:"",children:o.jsx(Kr,{className:"w-4 h-4"})})}),o.jsx("button",{onClick:()=>{T(O.id),y(!0)},className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",title:"",children:o.jsx(Wa,{className:"w-4 h-4"})}),O.status==="active"&&o.jsx("button",{onClick:()=>D(O.id),className:"p-2 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg",title:" ",children:o.jsx(Rm,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>k(O.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg",title:"",children:o.jsx(Es,{className:"w-4 h-4"})})]})})]},O.id)})})]})}),_.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Yr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{className:"text-gray-500",children:"  "})]})]}),_.length===0&&o.jsxs("div",{className:"lg:hidden text-center py-12 bg-white rounded-xl shadow border border-gray-100",children:[o.jsx(Yr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{className:"text-gray-500",children:"  "})]}),o.jsx(zG,{isOpen:g,onClose:()=>{y(!1),T(null),E(null)},contractId:v,preselectedUnitId:j})]})}function C2(){const{payments:t,recordPayment:e}=An(),[n,r]=N.useState(""),[s,a]=N.useState("all"),[l,u]=N.useState(null),[d,f]=N.useState(!1),[g,y]=N.useState("bank"),[v,T]=N.useState(""),j=N.useMemo(()=>t.filter(k=>{const O=k.tenantName.toLowerCase().includes(n.toLowerCase())||k.unitNo.toLowerCase().includes(n.toLowerCase()),I=s==="all"||k.status===s;return O&&I}).sort((k,O)=>{const I={overdue:0,due:1,paid:2};return I[k.status]!==I[O.status]?I[k.status]-I[O.status]:new Date(k.dueDate).getTime()-new Date(O.dueDate).getTime()}),[t,n,s]),E=N.useMemo(()=>{const k=t.filter($=>$.status==="paid"),O=t.filter($=>$.status==="due"),I=t.filter($=>$.status==="overdue");return{paidCount:k.length,paidAmount:k.reduce(($,P)=>$+P.amount,0),dueCount:O.length,dueAmount:O.reduce(($,P)=>$+P.amount,0),overdueCount:I.length,overdueAmount:I.reduce(($,P)=>$+P.amount,0)}},[t]),_=()=>{l&&(e(l.id,g,v||void 0),ot.success("   "),f(!1),u(null),T(""))},C=k=>{u(k),y("bank"),T(""),f(!0)},D=k=>{const I={paid:{bg:"bg-green-100",text:"text-green-700",label:"",icon:Mi},due:{bg:"bg-amber-100",text:"text-amber-700",label:"",icon:Id},overdue:{bg:"bg-red-100",text:"text-red-700",label:"",icon:_c}}[k];return o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${I.bg} ${I.text}`,children:[o.jsx(I.icon,{className:"w-3 h-3"}),I.label]})};return o.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[o.jsx("div",{children:o.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"   "})}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 lg:gap-4",children:[o.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 lg:gap-3",children:[o.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-green-100 flex items-center justify-center",children:o.jsx(Mi,{className:"w-4 h-4 lg:w-5 lg:h-5 text-green-600"})}),o.jsxs("div",{className:"text-center sm:text-right",children:[o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""}),o.jsx("p",{className:"text-sm lg:text-lg font-bold text-brand-dark",children:St(E.paidAmount)}),o.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-400",children:[E.paidCount," "]})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 lg:gap-3",children:[o.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-amber-100 flex items-center justify-center",children:o.jsx(Id,{className:"w-4 h-4 lg:w-5 lg:h-5 text-amber-600"})}),o.jsxs("div",{className:"text-center sm:text-right",children:[o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""}),o.jsx("p",{className:"text-sm lg:text-lg font-bold text-brand-dark",children:St(E.dueAmount)}),o.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-400",children:[E.dueCount," "]})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 lg:gap-3",children:[o.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-red-100 flex items-center justify-center",children:o.jsx(_c,{className:"w-4 h-4 lg:w-5 lg:h-5 text-red-600"})}),o.jsxs("div",{className:"text-center sm:text-right",children:[o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""}),o.jsx("p",{className:"text-sm lg:text-lg font-bold text-red-600",children:St(E.overdueAmount)}),o.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-400",children:[E.overdueCount," "]})]})]})})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:o.jsxs("div",{className:"space-y-3 lg:space-y-0 lg:grid lg:grid-cols-2 lg:gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(ai,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 lg:w-5 lg:h-5"}),o.jsx("input",{type:"text",placeholder:"   ...",value:n,onChange:k=>r(k.target.value),className:"w-full pr-9 lg:pr-10 pl-3 lg:pl-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base"})]}),o.jsx("div",{className:"flex gap-1.5 lg:gap-2 overflow-x-auto pb-1",children:["all","overdue","due","paid"].map(k=>o.jsx("button",{onClick:()=>a(k),className:`flex-1 min-w-fit py-2 px-2 lg:px-3 rounded-xl text-xs lg:text-sm font-medium transition-all whitespace-nowrap ${s===k?"bg-brand-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:k==="all"?"":k==="overdue"?"":k==="due"?"":""},k))})]})}),o.jsx("div",{className:"lg:hidden space-y-3",children:j.slice(0,50).map((k,O)=>o.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:O*.02},className:"bg-white rounded-xl shadow p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900 text-sm",children:k.tenantName}),o.jsx("p",{className:"text-xs text-gray-500",children:k.unitNo})]}),D(k.status)]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:""}),o.jsx("p",{className:"font-bold text-brand-dark",children:St(k.amount)})]}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-xs text-gray-500",children:" "}),o.jsx("p",{className:"text-sm text-gray-600",children:Ri(k.dueDate)}),k.status!=="paid"&&o.jsx("span",{className:`text-[10px] ${k.status==="overdue"?"text-red-500":"text-amber-500"}`,children:ki(k.dueDate)<0?` ${Math.abs(ki(k.dueDate))} `:` ${ki(k.dueDate)} `})]})]}),o.jsx("div",{className:"pt-3 border-t border-gray-100",children:k.status!=="paid"?o.jsxs(be,{size:"sm",variant:"gradient",onClick:()=>C(k),className:"w-full text-sm",children:[o.jsx(Kr,{className:"w-4 h-4 ml-1"})," "]}):o.jsx("span",{className:"block text-center text-sm text-gray-400",children:k.method==="cash"?"":k.method==="bank"?" ":" "})})]},k.id))}),o.jsxs("div",{className:"hidden lg:block bg-white rounded-xl shadow-lg overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:" "}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:j.slice(0,50).map((k,O)=>o.jsxs(Qe.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:O*.02},className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"font-medium text-gray-900",children:k.tenantName})}),o.jsx("td",{className:"px-6 py-4 text-gray-600",children:k.unitNo}),o.jsx("td",{className:"px-6 py-4 font-bold text-brand-dark",children:St(k.amount)}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:Ri(k.dueDate)}),k.status!=="paid"&&o.jsx("span",{className:`block text-xs ${k.status==="overdue"?"text-red-500":"text-amber-500"}`,children:ki(k.dueDate)<0?` ${Math.abs(ki(k.dueDate))} `:` ${ki(k.dueDate)} `})]})}),o.jsx("td",{className:"px-6 py-4",children:D(k.status)}),o.jsx("td",{className:"px-6 py-4",children:k.status!=="paid"?o.jsxs(be,{size:"sm",variant:"gradient",onClick:()=>C(k),children:[o.jsx(Kr,{className:"w-4 h-4 ml-1"})," "]}):o.jsx("span",{className:"text-sm text-gray-400",children:k.method==="cash"?"":k.method==="bank"?" ":" "})})]},k.id))})]})}),j.length===0&&o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx(Pm,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"    "})]})]}),j.length===0&&o.jsxs("div",{className:"lg:hidden text-center py-12 bg-white rounded-xl shadow text-gray-500",children:[o.jsx(Pm,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"    "})]}),o.jsx(Bc,{open:d,onOpenChange:f,children:o.jsxs(zc,{className:"max-w-[95vw] sm:max-w-md mx-auto",children:[o.jsx(qc,{children:o.jsx(Wc,{className:"text-base lg:text-lg",children:" "})}),l&&o.jsxs("div",{className:"space-y-3 lg:space-y-4 mt-4",children:[o.jsx("div",{className:"bg-gray-50 rounded-xl p-3 lg:p-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-3 lg:gap-4 text-xs lg:text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:":"}),o.jsx("p",{className:"font-medium",children:l.tenantName})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:":"}),o.jsx("p",{className:"font-medium",children:l.unitNo})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:":"}),o.jsx("p",{className:"font-bold text-brand-dark",children:St(l.amount)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:" :"}),o.jsx("p",{className:"font-medium",children:Ri(l.dueDate)})]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-2",children:" "}),o.jsx("div",{className:"grid grid-cols-3 gap-1.5 lg:gap-2",children:[{value:"bank",label:" "},{value:"cash",label:""},{value:"online",label:" "}].map(k=>o.jsx("button",{type:"button",onClick:()=>y(k.value),className:`py-2 px-2 lg:px-3 rounded-lg text-xs lg:text-sm font-medium transition-all ${g===k.value?"bg-brand-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:k.label},k.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs lg:text-sm font-medium text-gray-700 mb-1",children:"  ()"}),o.jsx("input",{type:"text",value:v,onChange:k=>T(k.target.value),className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue text-sm lg:text-base",placeholder:"   ",dir:"ltr"})]}),o.jsxs("div",{className:"flex gap-2 lg:gap-3 pt-4",children:[o.jsxs(be,{onClick:_,variant:"gradient",className:"flex-1 text-sm lg:text-base",children:[o.jsx(Mi,{className:"w-4 h-4 ml-2"})," "]}),o.jsx(be,{variant:"outline",onClick:()=>f(!1),className:"text-sm lg:text-base",children:""})]})]})]})})]})}function qG({isOpen:t,onClose:e,ticketId:n}){const{maintenanceRequests:r,units:s,properties:a,addMaintenanceRequest:l,updateMaintenanceRequest:u}=An(),[d,f]=N.useState({propertyId:"",unitId:"",title:"",description:"",status:"new",priority:"medium",assignedTo:"",cost:0});N.useEffect(()=>{if(n){const E=r.find(_=>_.id===n);E&&f({propertyId:E.propertyId,unitId:E.unitId||"",title:E.title,description:E.description,status:E.status,priority:E.priority,assignedTo:E.assignedTo||"",cost:E.cost||0})}else f({propertyId:"",unitId:"",title:"",description:"",status:"new",priority:"medium",assignedTo:"",cost:0})},[n,r,t]);const g=E=>{f({...d,propertyId:E,unitId:""})},y=E=>s.filter(_=>_.propertyId===E),v=E=>a.find(_=>_.id===E)?.name||"",T=E=>s.find(_=>_.id===E)?.unitNo,j=E=>{if(E.preventDefault(),!d.propertyId||!d.title){ot.error("    ");return}const _={propertyId:d.propertyId,propertyName:v(d.propertyId),unitId:d.unitId||void 0,unitNo:d.unitId?T(d.unitId):void 0,title:d.title,description:d.description,status:d.status,priority:d.priority,assignedTo:d.assignedTo||void 0,cost:d.cost,requestedBy:"admin"};n?(u(n,_),ot.success("   ")):(l(_),ot.success("   ")),e()};return o.jsx(Bc,{open:t,onOpenChange:e,children:o.jsxs(zc,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx(qc,{children:o.jsx(Wc,{children:n?"  ":"  "})}),o.jsxs("form",{onSubmit:j,className:"space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:d.propertyId,onChange:E=>g(E.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[o.jsx("option",{value:"",children:" "}),a.map(E=>o.jsxs("option",{value:E.id,children:[E.name," - ",E.city]},E.id))]})]}),d.propertyId&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),o.jsxs("select",{value:d.unitId,onChange:E=>f({...d,unitId:E.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[o.jsx("option",{value:"",children:"  "}),y(d.propertyId).map(E=>o.jsx("option",{value:E.id,children:E.unitNo},E.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["  ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:d.title,onChange:E=>f({...d,title:E.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:":   "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("textarea",{value:d.description,onChange:E=>f({...d,description:E.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:"  ..."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsxs("select",{value:d.priority,onChange:E=>f({...d,priority:E.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[o.jsx("option",{value:"low",children:""}),o.jsx("option",{value:"medium",children:""}),o.jsx("option",{value:"high",children:""}),o.jsx("option",{value:"urgent",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsxs("select",{value:d.status,onChange:E=>f({...d,status:E.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue bg-white",children:[o.jsx("option",{value:"new",children:""}),o.jsx("option",{value:"in_progress",children:" "}),o.jsx("option",{value:"done",children:""}),o.jsx("option",{value:"canceled",children:""})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"text",value:d.assignedTo,onChange:E=>f({...d,assignedTo:E.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue",placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (.)"}),o.jsx("input",{type:"number",min:"0",value:d.cost,onChange:E=>f({...d,cost:parseInt(E.target.value)||0}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(be,{type:"submit",variant:"gradient",className:"flex-1",children:n?" ":" "}),o.jsx(be,{type:"button",variant:"outline",onClick:e,children:""})]})]})]})})}function I2(){const{maintenanceRequests:t,updateMaintenanceRequest:e,deleteMaintenanceRequest:n,properties:r}=An(),[s,a]=N.useState(!1),[l,u]=N.useState(null),[d,f]=N.useState("all"),[g,y]=N.useState("all"),v=N.useMemo(()=>({new:t.filter(C=>C.status==="new").length,in_progress:t.filter(C=>C.status==="in_progress").length,done:t.filter(C=>C.status==="done").length,totalCost:t.reduce((C,D)=>C+D.cost,0)}),[t]),T=N.useMemo(()=>t.filter(C=>{const D=d==="all"||C.status===d,k=g==="all"||C.priority===g;return D&&k}).sort((C,D)=>{const k={urgent:0,high:1,medium:2,low:3};return k[C.priority]!==k[D.priority]?k[C.priority]-k[D.priority]:new Date(D.createdAt).getTime()-new Date(C.createdAt).getTime()}),[t,d,g]),j=(C,D)=>{e(C,{status:D}),ot.success(D==="done"?"   ":"  ")},E=C=>{const k={urgent:{bg:"bg-red-100",text:"text-red-700",label:""},high:{bg:"bg-orange-100",text:"text-orange-700",label:""},medium:{bg:"bg-amber-100",text:"text-amber-700",label:""},low:{bg:"bg-gray-100",text:"text-gray-700",label:""}}[C];return o.jsx("span",{className:`px-1.5 lg:px-2 py-0.5 lg:py-1 rounded-full text-[10px] lg:text-xs font-medium ${k.bg} ${k.text}`,children:k.label})},_=C=>({new:o.jsx(_c,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-amber-500"}),in_progress:o.jsx(Id,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-blue-500"}),done:o.jsx(Mi,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-green-500"}),canceled:o.jsx($z,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 text-gray-400"})})[C];return o.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm lg:text-base text-gray-600",children:["    (",t.length," )"]})}),o.jsxs(be,{onClick:()=>{u(null),a(!0)},variant:"gradient",className:"w-full sm:w-auto text-sm lg:text-base",children:[o.jsx(ii,{className:"w-4 h-4 lg:w-5 lg:h-5 ml-2"}),"  "]})]}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 lg:gap-4",children:[o.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:o.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[o.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-amber-100 flex items-center justify-center",children:o.jsx(_c,{className:"w-4 h-4 lg:w-5 lg:h-5 text-amber-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:v.new}),o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:o.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[o.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:o.jsx(Id,{className:"w-4 h-4 lg:w-5 lg:h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:v.in_progress}),o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:" "})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:o.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[o.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-green-100 flex items-center justify-center",children:o.jsx(Mi,{className:"w-4 h-4 lg:w-5 lg:h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-dark",children:v.done}),o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow p-3 lg:p-4",children:o.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[o.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:o.jsx(Wi,{className:"w-4 h-4 lg:w-5 lg:h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm lg:text-lg font-bold text-brand-dark",children:St(v.totalCost)}),o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:" "})]})]})})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-3 lg:p-4",children:o.jsxs("div",{className:"space-y-3 lg:space-y-0 lg:grid lg:grid-cols-2 lg:gap-4",children:[o.jsx("div",{className:"flex gap-1.5 lg:gap-2 overflow-x-auto pb-1",children:["all","new","in_progress","done"].map(C=>o.jsx("button",{onClick:()=>f(C),className:`flex-1 min-w-fit py-2 px-2 rounded-xl text-xs lg:text-sm font-medium transition-all whitespace-nowrap ${d===C?"bg-brand-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:C==="all"?"":C==="new"?"":C==="in_progress"?" ":""},C))}),o.jsx("div",{className:"flex gap-1.5 lg:gap-2 overflow-x-auto pb-1",children:["all","urgent","high","medium","low"].map(C=>o.jsx("button",{onClick:()=>y(C),className:`flex-1 min-w-fit py-2 px-2 rounded-xl text-xs lg:text-sm font-medium transition-all whitespace-nowrap ${g===C?"bg-brand-dark text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:C==="all"?"":C==="urgent"?"":C==="high"?"":C==="medium"?"":""},C))})]})}),o.jsx("div",{className:"space-y-3 lg:space-y-4",children:T.map((C,D)=>o.jsx(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:D*.03},className:`bg-white rounded-xl shadow-lg p-3 lg:p-5 border-r-4 ${C.priority==="urgent"?"border-red-500":C.priority==="high"?"border-orange-500":C.priority==="medium"?"border-amber-500":"border-gray-300"}`,children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3 lg:gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 lg:gap-3 mb-2",children:[_(C.status),o.jsx("h3",{className:"font-bold text-brand-dark text-sm lg:text-base",children:C.title}),E(C.priority)]}),o.jsx("p",{className:"text-xs lg:text-sm text-gray-500 mb-2 line-clamp-2",children:C.description}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 lg:gap-4 text-[10px] lg:text-xs text-gray-400",children:[o.jsx("span",{children:C.propertyName}),C.unitNo&&o.jsxs("span",{children:["  ",C.unitNo]}),o.jsxs("span",{children:[" ",BG(C.createdAt)]}),C.assignedTo&&o.jsxs("span",{className:"hidden sm:inline",children:[" : ",C.assignedTo]})]})]}),o.jsxs("div",{className:"flex items-center justify-between lg:justify-end gap-2 lg:gap-4 pt-3 lg:pt-0 border-t lg:border-0 border-gray-100",children:[C.cost>0&&o.jsxs("div",{className:"text-right lg:text-left",children:[o.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400",children:""}),o.jsx("p",{className:"font-bold text-brand-dark text-sm lg:text-base",children:St(C.cost)})]}),o.jsxs("select",{value:C.status,onChange:k=>j(C.id,k.target.value),className:"text-xs lg:text-sm rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[o.jsx("option",{value:"new",children:""}),o.jsx("option",{value:"in_progress",children:" "}),o.jsx("option",{value:"done",children:""}),o.jsx("option",{value:"canceled",children:""})]}),o.jsxs(be,{size:"sm",variant:"outline",onClick:()=>{u(C.id),a(!0)},className:"text-xs lg:text-sm px-2 lg:px-3",children:[o.jsx(Wa,{className:"w-3 h-3 lg:w-4 lg:h-4 lg:ml-1"}),o.jsx("span",{className:"hidden lg:inline",children:""})]})]})]})},C.id))}),T.length===0&&o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 lg:p-12 text-center",children:[o.jsx(Wi,{className:"w-10 h-10 lg:w-12 lg:h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{className:"text-sm lg:text-base text-gray-500",children:"   "})]}),o.jsx(qG,{isOpen:s,onClose:()=>{a(!1),u(null)},ticketId:l})]})}function A2(t){const e=WG(t),n=N.forwardRef((r,s)=>{const{children:a,...l}=r,u=N.Children.toArray(a),d=u.find(KG);if(d){const f=d.props.children,g=u.map(y=>y===d?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:y);return o.jsx(e,{...l,ref:s,children:N.isValidElement(f)?N.cloneElement(f,void 0,g):null})}return o.jsx(e,{...l,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}function WG(t){const e=N.forwardRef((n,r)=>{const{children:s,...a}=n;if(N.isValidElement(s)){const l=YG(s),u=GG(a,s.props);return s.type!==N.Fragment&&(u.ref=r?dp(r,l):l),N.cloneElement(s,u)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var HG=Symbol("radix.slottable");function KG(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===HG}function GG(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{const d=a(...u);return s(...u),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function YG(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function QG(t){const e=t+"CollectionProvider",[n,r]=hp(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=E=>{const{scope:_,children:C}=E,D=de.useRef(null),k=de.useRef(new Map).current;return o.jsx(s,{scope:_,itemMap:k,collectionRef:D,children:C})};l.displayName=e;const u=t+"CollectionSlot",d=A2(u),f=de.forwardRef((E,_)=>{const{scope:C,children:D}=E,k=a(u,C),O=oi(_,k.collectionRef);return o.jsx(d,{ref:O,children:D})});f.displayName=u;const g=t+"CollectionItemSlot",y="data-radix-collection-item",v=A2(g),T=de.forwardRef((E,_)=>{const{scope:C,children:D,...k}=E,O=de.useRef(null),I=oi(_,O),$=a(g,C);return de.useEffect(()=>($.itemMap.set(O,{ref:O,...k}),()=>void $.itemMap.delete(O))),o.jsx(v,{[y]:"",ref:I,children:D})});T.displayName=g;function j(E){const _=a(t+"CollectionConsumer",E);return de.useCallback(()=>{const D=_.collectionRef.current;if(!D)return[];const k=Array.from(D.querySelectorAll(`[${y}]`));return Array.from(_.itemMap.values()).sort(($,P)=>k.indexOf($.ref.current)-k.indexOf(P.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:l,Slot:f,ItemSlot:T},j,r]}var JG=N.createContext(void 0);function FI(t){const e=N.useContext(JG);return t||e||"ltr"}var zy="rovingFocusGroup.onEntryFocus",XG={bubbles:!1,cancelable:!0},eh="RovingFocusGroup",[lx,UI,ZG]=QG(eh),[eY,$I]=hp(eh,[ZG]),[tY,nY]=eY(eh),BI=N.forwardRef((t,e)=>o.jsx(lx.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(lx.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(rY,{...t,ref:e})})}));BI.displayName=eh;var rY=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,...y}=t,v=N.useRef(null),T=oi(e,v),j=FI(a),[E,_]=cb({prop:l,defaultProp:u??null,onChange:d,caller:eh}),[C,D]=N.useState(!1),k=Ec(f),O=UI(n),I=N.useRef(!1),[$,P]=N.useState(0);return N.useEffect(()=>{const A=v.current;if(A)return A.addEventListener(zy,k),()=>A.removeEventListener(zy,k)},[k]),o.jsx(tY,{scope:n,orientation:r,dir:j,loop:s,currentTabStopId:E,onItemFocus:N.useCallback(A=>_(A),[_]),onItemShiftTab:N.useCallback(()=>D(!0),[]),onFocusableItemAdd:N.useCallback(()=>P(A=>A+1),[]),onFocusableItemRemove:N.useCallback(()=>P(A=>A-1),[]),children:o.jsx(Zn.div,{tabIndex:C||$===0?-1:0,"data-orientation":r,...y,ref:T,style:{outline:"none",...t.style},onMouseDown:Cn(t.onMouseDown,()=>{I.current=!0}),onFocus:Cn(t.onFocus,A=>{const L=!I.current;if(A.target===A.currentTarget&&L&&!C){const U=new CustomEvent(zy,XG);if(A.currentTarget.dispatchEvent(U),!U.defaultPrevented){const B=O().filter(le=>le.focusable),q=B.find(le=>le.active),V=B.find(le=>le.id===E),Q=[q,V,...B].filter(Boolean).map(le=>le.ref.current);WI(Q,g)}}I.current=!1}),onBlur:Cn(t.onBlur,()=>D(!1))})})}),zI="RovingFocusGroupItem",qI=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:l,...u}=t,d=ad(),f=a||d,g=nY(zI,n),y=g.currentTabStopId===f,v=UI(n),{onFocusableItemAdd:T,onFocusableItemRemove:j,currentTabStopId:E}=g;return N.useEffect(()=>{if(r)return T(),()=>j()},[r,T,j]),o.jsx(lx.ItemSlot,{scope:n,id:f,focusable:r,active:s,children:o.jsx(Zn.span,{tabIndex:y?0:-1,"data-orientation":g.orientation,...u,ref:e,onMouseDown:Cn(t.onMouseDown,_=>{r?g.onItemFocus(f):_.preventDefault()}),onFocus:Cn(t.onFocus,()=>g.onItemFocus(f)),onKeyDown:Cn(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){g.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const C=aY(_,g.orientation,g.dir);if(C!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let k=v().filter(O=>O.focusable).map(O=>O.ref.current);if(C==="last")k.reverse();else if(C==="prev"||C==="next"){C==="prev"&&k.reverse();const O=k.indexOf(_.currentTarget);k=g.loop?oY(k,O+1):k.slice(O+1)}setTimeout(()=>WI(k))}}),children:typeof l=="function"?l({isCurrentTabStop:y,hasTabStop:E!=null}):l})})});qI.displayName=zI;var sY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iY(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function aY(t,e,n){const r=iY(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return sY[r]}function WI(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function oY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var lY=BI,cY=qI,pp="Tabs",[uY]=hp(pp,[$I]),HI=$I(),[dY,fb]=uY(pp),KI=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:l="horizontal",dir:u,activationMode:d="automatic",...f}=t,g=FI(u),[y,v]=cb({prop:r,onChange:s,defaultProp:a??"",caller:pp});return o.jsx(dY,{scope:n,baseId:ad(),value:y,onValueChange:v,orientation:l,dir:g,activationMode:d,children:o.jsx(Zn.div,{dir:g,"data-orientation":l,...f,ref:e})})});KI.displayName=pp;var GI="TabsList",YI=N.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=fb(GI,n),l=HI(n);return o.jsx(lY,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(Zn.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});YI.displayName=GI;var QI="TabsTrigger",JI=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,l=fb(QI,n),u=HI(n),d=eA(l.baseId,r),f=tA(l.baseId,r),g=r===l.value;return o.jsx(cY,{asChild:!0,...u,focusable:!s,active:g,children:o.jsx(Zn.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...a,ref:e,onMouseDown:Cn(t.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?l.onValueChange(r):y.preventDefault()}),onKeyDown:Cn(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&l.onValueChange(r)}),onFocus:Cn(t.onFocus,()=>{const y=l.activationMode!=="manual";!g&&!s&&y&&l.onValueChange(r)})})})});JI.displayName=QI;var XI="TabsContent",ZI=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...l}=t,u=fb(XI,n),d=eA(u.baseId,r),f=tA(u.baseId,r),g=r===u.value,y=N.useRef(g);return N.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),o.jsx(Zd,{present:s||g,children:({present:v})=>o.jsx(Zn.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!v,id:f,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:v&&a})})});ZI.displayName=XI;function eA(t,e){return`${t}-trigger-${e}`}function tA(t,e){return`${t}-content-${e}`}var hY=KI,fY=YI,mY=JI,pY=ZI;function gY({className:t,...e}){return o.jsx(hY,{"data-slot":"tabs",className:Ya("flex flex-col gap-2",t),...e})}function yY({className:t,...e}){return o.jsx(fY,{"data-slot":"tabs-list",className:Ya("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...e})}function Df({className:t,...e}){return o.jsx(mY,{"data-slot":"tabs-trigger",className:Ya("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function Of({className:t,...e}){return o.jsx(pY,{"data-slot":"tabs-content",className:Ya("flex-1 outline-none",t),...e})}function R2(){const{properties:t,units:e,contracts:n,payments:r,maintenanceRequests:s}=An(),[a,l]=N.useState(""),[u,d]=N.useState(""),[f,g]=N.useState("all"),y=N.useMemo(()=>r.filter(_=>_.status==="overdue").sort((_,C)=>new Date(_.dueDate).getTime()-new Date(C.dueDate).getTime()),[r]),v=N.useMemo(()=>t.map(_=>{const C=e.filter(A=>A.propertyId===_.id),D=C.length,k=C.filter(A=>A.status==="rented").length,O=C.filter(A=>A.status==="vacant").length,I=C.filter(A=>A.status==="maintenance").length,$=D>0?Math.round(k/D*100):0,P=n.filter(A=>A.propertyId===_.id&&A.status==="active").reduce((A,L)=>L.paymentFrequency==="monthly"?A+L.rentAmount:L.paymentFrequency==="quarterly"?A+L.rentAmount/3:L.paymentFrequency==="yearly"?A+L.rentAmount/12:A,0);return{..._,total:D,rented:k,vacant:O,maintenance:I,occupancy:$,monthlyIncome:P}}),[t,e,n]),T=N.useMemo(()=>{const _=r.filter(D=>D.status==="paid"&&D.paidAt),C={};return _.forEach(D=>{const k=new Date(D.paidAt),O=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}`;C[O]=(C[O]||0)+D.amount}),Object.entries(C).sort(([D],[k])=>k.localeCompare(D)).slice(0,12).map(([D,k])=>({month:D,amount:k}))},[r]),j=N.useMemo(()=>{const _={};return s.forEach(C=>{_[C.propertyId]||(_[C.propertyId]={count:0,cost:0,name:C.propertyName}),_[C.propertyId].count++,_[C.propertyId].cost+=C.cost}),Object.entries(_).map(([C,D])=>({propertyId:C,...D})).sort((C,D)=>D.cost-C.cost)},[s]),E=(_,C,D)=>{const k=[D.join(","),..._.map($=>D.map(P=>$[P]||"").join(","))].join(`
`),O=new Blob(["\uFEFF"+k],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a");I.href=URL.createObjectURL(O),I.download=`${C}_${new Date().toISOString().split("T")[0]}.csv`,I.click(),ot.success("   ")};return o.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[o.jsx("div",{className:"mb-4 lg:mb-8",children:o.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"      "})}),o.jsxs(gY,{defaultValue:"overdue",className:"space-y-4 lg:space-y-6",children:[o.jsxs(yY,{className:"bg-white shadow rounded-xl p-1 w-full grid grid-cols-2 lg:grid-cols-4 gap-1",children:[o.jsxs(Df,{value:"overdue",className:"flex items-center justify-center gap-1 lg:gap-2 text-xs lg:text-sm py-2",children:[o.jsx(_c,{className:"w-3 h-3 lg:w-4 lg:h-4"}),o.jsx("span",{children:""})]}),o.jsxs(Df,{value:"occupancy",className:"flex items-center justify-center gap-1 lg:gap-2 text-xs lg:text-sm py-2",children:[o.jsx(Xn,{className:"w-3 h-3 lg:w-4 lg:h-4"}),o.jsx("span",{children:""})]}),o.jsxs(Df,{value:"income",className:"flex items-center justify-center gap-1 lg:gap-2 text-xs lg:text-sm py-2",children:[o.jsx(up,{className:"w-3 h-3 lg:w-4 lg:h-4"}),o.jsx("span",{children:""})]}),o.jsxs(Df,{value:"maintenance",className:"flex items-center justify-center gap-1 lg:gap-2 text-xs lg:text-sm py-2",children:[o.jsx(Wi,{className:"w-3 h-3 lg:w-4 lg:h-4"}),o.jsx("span",{children:""})]})]}),o.jsx(Of,{value:"overdue",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 lg:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 lg:mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:" "}),o.jsxs("p",{className:"text-xs lg:text-sm text-gray-500",children:[y.length,"    ",St(y.reduce((_,C)=>_+C.amount,0))]})]}),o.jsxs(be,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs lg:text-sm",onClick:()=>E(y.map(_=>({tenantName:_.tenantName,unitNo:_.unitNo,amount:_.amount,dueDate:_.dueDate})),"overdue_payments",["tenantName","unitNo","amount","dueDate"]),children:[o.jsx(Hu,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1 lg:ml-2"})," CSV"]})]}),o.jsx("div",{className:"lg:hidden space-y-3",children:y.map(_=>{const C=Math.abs(Math.floor((new Date().getTime()-new Date(_.dueDate).getTime())/864e5));return o.jsxs("div",{className:"border border-gray-100 rounded-xl p-3",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:_.tenantName}),o.jsx("p",{className:"text-xs text-gray-500",children:_.unitNo})]}),o.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-[10px] font-medium",children:[C," "]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-xs text-gray-500",children:Ri(_.dueDate)}),o.jsx("span",{className:"font-bold text-red-600 text-sm",children:St(_.amount)})]})]},_.id)})}),o.jsx("div",{className:"hidden lg:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "}),o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:y.map(_=>{const C=Math.abs(Math.floor((new Date().getTime()-new Date(_.dueDate).getTime())/864e5));return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3 font-medium",children:_.tenantName}),o.jsx("td",{className:"px-4 py-3 text-gray-600",children:_.unitNo}),o.jsx("td",{className:"px-4 py-3 font-bold text-red-600",children:St(_.amount)}),o.jsx("td",{className:"px-4 py-3 text-gray-600",children:Ri(_.dueDate)}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:[C," "]})})]},_.id)})})]})}),y.length===0&&o.jsxs("div",{className:"text-center py-8 lg:py-12 text-gray-500",children:[o.jsx(_c,{className:"w-10 h-10 lg:w-12 lg:h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{className:"text-sm lg:text-base",children:"    "})]})]})}),o.jsx(Of,{value:"occupancy",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 lg:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 lg:mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:" "}),o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:"   "})]}),o.jsxs(be,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs lg:text-sm",onClick:()=>E(v.map(_=>({name:_.name,city:_.city,total:_.total,rented:_.rented,vacant:_.vacant,occupancy:_.occupancy,monthlyIncome:_.monthlyIncome})),"occupancy_report",["name","city","total","rented","vacant","occupancy","monthlyIncome"]),children:[o.jsx(Hu,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1 lg:ml-2"})," CSV"]})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4",children:v.map(_=>o.jsxs("div",{className:"border border-gray-100 rounded-xl p-3 lg:p-4",children:[o.jsx("h3",{className:"font-bold text-brand-dark text-sm lg:text-base mb-1",children:_.name}),o.jsx("p",{className:"text-xs lg:text-sm text-gray-500 mb-3",children:_.city}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"flex justify-between text-xs lg:text-sm mb-1",children:[o.jsx("span",{children:" "}),o.jsxs("span",{className:"font-bold",children:[_.occupancy,"%"]})]}),o.jsx("div",{className:"h-1.5 lg:h-2 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full",style:{width:`${_.occupancy}%`}})})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 lg:gap-2 text-center text-[10px] lg:text-xs",children:[o.jsxs("div",{className:"bg-green-50 rounded p-1.5 lg:p-2",children:[o.jsx("div",{className:"font-bold text-green-600",children:_.rented}),o.jsx("div",{className:"text-gray-500",children:""})]}),o.jsxs("div",{className:"bg-amber-50 rounded p-1.5 lg:p-2",children:[o.jsx("div",{className:"font-bold text-amber-600",children:_.vacant}),o.jsx("div",{className:"text-gray-500",children:""})]}),o.jsxs("div",{className:"bg-gray-50 rounded p-1.5 lg:p-2",children:[o.jsx("div",{className:"font-bold text-gray-600",children:_.maintenance}),o.jsx("div",{className:"text-gray-500",children:""})]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:o.jsxs("div",{className:"flex justify-between text-xs lg:text-sm",children:[o.jsx("span",{className:"text-gray-500",children:" :"}),o.jsx("span",{className:"font-bold text-brand-dark",children:St(_.monthlyIncome)})]})})]},_.id))})]})}),o.jsx(Of,{value:"income",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 lg:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 lg:mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:"  "}),o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:"   "})]}),o.jsxs(be,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs lg:text-sm",onClick:()=>E(T,"income_report",["month","amount"]),children:[o.jsx(Hu,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1 lg:ml-2"})," CSV"]})]}),o.jsxs("div",{className:"lg:hidden space-y-2",children:[T.map(_=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[o.jsx("span",{className:"font-medium text-sm",children:_.month}),o.jsx("span",{className:"font-bold text-green-600 text-sm",children:St(_.amount)})]},_.month)),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-brand-blue/10 rounded-lg",children:[o.jsx("span",{className:"font-bold text-sm",children:""}),o.jsx("span",{className:"font-bold text-brand-dark text-sm",children:St(T.reduce((_,C)=>_+C.amount,0))})]})]}),o.jsx("div",{className:"hidden lg:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:T.map(_=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3 font-medium",children:_.month}),o.jsx("td",{className:"px-4 py-3 font-bold text-green-600",children:St(_.amount)})]},_.month))}),o.jsx("tfoot",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-3 font-bold",children:""}),o.jsx("td",{className:"px-4 py-3 font-bold text-brand-dark",children:St(T.reduce((_,C)=>_+C.amount,0))})]})})]})})]})}),o.jsx(Of,{value:"maintenance",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 lg:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 lg:mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:" "}),o.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:"   "})]}),o.jsxs(be,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs lg:text-sm",onClick:()=>E(j,"maintenance_report",["name","count","cost"]),children:[o.jsx(Hu,{className:"w-3 h-3 lg:w-4 lg:h-4 ml-1 lg:ml-2"})," CSV"]})]}),o.jsxs("div",{className:"lg:hidden space-y-2",children:[j.map(_=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:_.name}),o.jsxs("p",{className:"text-xs text-gray-500",children:[_.count," "]})]}),o.jsx("span",{className:"font-bold text-brand-dark text-sm",children:St(_.cost)})]},_.propertyId)),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-brand-blue/10 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-sm",children:""}),o.jsxs("p",{className:"text-xs text-gray-500",children:[j.reduce((_,C)=>_+C.count,0)," "]})]}),o.jsx("span",{className:"font-bold text-brand-dark text-sm",children:St(j.reduce((_,C)=>_+C.cost,0))})]})]}),o.jsx("div",{className:"hidden lg:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:""}),o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "}),o.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:" "})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:j.map(_=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3 font-medium",children:_.name}),o.jsx("td",{className:"px-4 py-3 text-gray-600",children:_.count}),o.jsx("td",{className:"px-4 py-3 font-bold text-brand-dark",children:St(_.cost)})]},_.propertyId))}),o.jsx("tfoot",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-3 font-bold",children:""}),o.jsx("td",{className:"px-4 py-3 font-bold",children:j.reduce((_,C)=>_+C.count,0)}),o.jsx("td",{className:"px-4 py-3 font-bold text-brand-dark",children:St(j.reduce((_,C)=>_+C.cost,0))})]})})]})})]})})]})]})}const xY=()=>{const{user:t,subscription:e,logout:n}=Xr();if(!t)return null;const r=s=>new Date(s).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"});return o.jsx(Qr,{children:o.jsx("div",{className:"min-h-screen pt-24 pb-12 bg-slate-50",children:o.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[o.jsx("h1",{className:"text-3xl font-bold text-brand-dark mb-8",children:" "}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx("div",{className:"md:col-span-1 bg-white rounded-3xl p-6 shadow-sm border border-gray-100 h-fit",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-24 h-24 bg-brand-light rounded-full flex items-center justify-center mb-4 text-brand-blue",children:o.jsx(Fc,{className:"w-10 h-10"})}),o.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:t.displayName||" "}),o.jsx("p",{className:"text-gray-500 text-sm mb-6",children:t.email}),o.jsx(be,{onClick:n,variant:"outline",className:"w-full text-red-500 border-red-100 hover:bg-red-50 hover:text-red-600",children:" "})]})}),o.jsxs("div",{className:"md:col-span-2 space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-sm border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-brand-dark flex items-center gap-2",children:[o.jsx(Kr,{className:"w-5 h-5 text-brand-blue"})," "]}),e?.status==="active"?o.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:""}):o.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:"  / "})]}),e?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),o.jsx("p",{className:"font-bold text-brand-dark text-lg",children:e.planName})]}),o.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),o.jsx("p",{className:"font-bold text-brand-blue font-mono text-lg",children:e.code||"---"})]}),o.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),o.jsx("p",{className:"font-bold text-gray-700",children:r(e.startDate)})]}),o.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),o.jsx("p",{className:"font-bold text-gray-700",children:r(e.endDate)})]})]}),o.jsx("div",{className:"pt-4 border-t border-gray-100",children:o.jsx(Ke,{to:"/pricing",children:o.jsx(be,{className:"w-full",children:"   "})})})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-gray-500 mb-4",children:"    "}),o.jsx(Ke,{to:"/pricing",children:o.jsx(be,{variant:"primary",children:" "})})]})]}),o.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-sm border border-gray-100",children:[o.jsxs("h3",{className:"text-xl font-bold text-brand-dark flex items-center gap-2 mb-4",children:[o.jsx(sb,{className:"w-5 h-5 text-gray-400"}),""]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-700",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"************"})]}),o.jsx(Ke,{to:"/forgot-password",children:o.jsx(be,{variant:"outline",size:"sm",children:""})})]})]})]})]})]})})})},vY=()=>{const[t,e]=N.useState(""),[n,r]=N.useState(!1),[s,a]=N.useState(!1),l=async u=>{u.preventDefault(),a(!0),await new Promise(d=>setTimeout(d,1500)),a(!1),r(!0)};return o.jsx(Qr,{children:o.jsxs("div",{className:"min-h-screen pt-24 pb-12 flex items-center justify-center bg-slate-50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-brand-purple/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-brand-blue/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 pointer-events-none"}),o.jsx("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-gray-100 relative z-10 transition-all duration-300",children:n?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-6 text-green-500 animate-in zoom-in duration-300",children:o.jsx(Mi,{className:"w-10 h-10"})}),o.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-3",children:"  !"}),o.jsxs("p",{className:"text-gray-500 mb-8 leading-relaxed",children:["        :",o.jsx("br",{}),o.jsx("span",{className:"font-semibold text-brand-dark",children:t})]}),o.jsx(Ke,{to:"/login",children:o.jsx(be,{variant:"outline",className:"w-full",children:"  "})})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-brand-light rounded-2xl flex items-center justify-center mx-auto mb-4 text-brand-blue",children:o.jsx(si,{className:"w-8 h-8"})}),o.jsx("h1",{className:"text-2xl font-bold text-brand-dark mb-2",children:"  "}),o.jsx("p",{className:"text-gray-500 text-sm",children:"        "})]}),o.jsxs("form",{onSubmit:l,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-bold text-brand-dark",children:" "}),o.jsx("input",{type:"email",required:!0,value:t,onChange:u=>e(u.target.value),placeholder:"name@company.com",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-brand-blue/50 focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all placeholder:text-gray-300"})]}),o.jsx(be,{disabled:s,variant:"gradient",className:"w-full py-4 text-lg",children:s?" ...":"  "})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs(Ke,{to:"/login",className:"text-gray-500 hover:text-brand-dark flex items-center justify-center gap-2 text-sm font-medium transition-colors",children:[o.jsx(gz,{className:"w-4 h-4"}),"  "]})})]})})]})})},qy={admin:" ",manager:"",accountant:"",maintenance:" ",employee:""},bY={admin:"bg-purple-100 text-purple-700",manager:"bg-blue-100 text-blue-700",accountant:"bg-green-100 text-green-700",maintenance:"bg-orange-100 text-orange-700",employee:"bg-gray-100 text-gray-700"};function wY(){const{employees:t,addEmployee:e,updateEmployee:n,deleteEmployee:r}=An(),[s,a]=N.useState(""),[l,u]=N.useState(!1),[d,f]=N.useState(null),[g,y]=N.useState("all"),[v,T]=N.useState(!1),[j,E]=N.useState(null),[_,C]=N.useState(null),[D,k]=N.useState(!1),[O,I]=N.useState({fullName:"",email:"",phone:"",role:"employee",department:"",joinDate:new Date().toISOString().split("T")[0],status:"active"}),$=se=>{const Q=se.trim().split(" ")[0].toLowerCase(),le={:"a",:"e",:"a",:"a",:"b",:"t",:"th",:"j",:"h",:"kh",:"d",:"th",:"r",:"z",:"s",:"sh",:"s",:"d",:"t",:"z",:"a",:"gh",:"f",:"q",:"k",:"l",:"m",:"n",:"h",:"w",:"y",:"a",:"a",:""};let me="";for(const xe of Q)me+=le[xe]||xe;const J=Math.floor(Math.random()*100);return`${me}${J}@arkan.sa`},P=()=>{const se="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789",Q="@#$%!";let le="";for(let me=0;me<8;me++)le+=se.charAt(Math.floor(Math.random()*se.length));return le+=Q.charAt(Math.floor(Math.random()*Q.length)),le},A=se=>{switch(se){case"admin":return[{module:"properties",actions:["view","create","edit","delete"]},{module:"units",actions:["view","create","edit","delete"]},{module:"tenants",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view","create","edit","delete"]},{module:"payments",actions:["view","create","edit","delete"]},{module:"maintenance",actions:["view","create","edit","delete"]},{module:"reports",actions:["view"]},{module:"employees",actions:["view","create","edit","delete"]}];case"manager":return[{module:"properties",actions:["view","create","edit"]},{module:"units",actions:["view","create","edit"]},{module:"tenants",actions:["view","create","edit"]},{module:"contracts",actions:["view","create","edit"]},{module:"reports",actions:["view"]}];case"accountant":return[{module:"payments",actions:["view","create","edit","delete"]},{module:"contracts",actions:["view"]},{module:"reports",actions:["view"]},{module:"sales",actions:["view","create","edit","delete"]}];case"maintenance":return[{module:"maintenance",actions:["view","create","edit"]},{module:"units",actions:["view"]},{module:"tasks",actions:["view","edit"]}];default:return[{module:"properties",actions:["view"]},{module:"units",actions:["view"]},{module:"tenants",actions:["view"]}]}},L=async(se,Q)=>{await navigator.clipboard.writeText(se),C(Q),setTimeout(()=>C(null),2e3),ot.success(" !")},U=t.filter(se=>{const Q=se.fullName.includes(s)||se.email.includes(s)||se.phone.includes(s),le=g==="all"||se.role===g;return Q&&le}),B=se=>{se?(f(se),I({fullName:se.fullName,email:se.email,phone:se.phone,role:se.role,department:se.department,joinDate:se.joinDate,status:se.status})):(f(null),I({fullName:"",email:"",phone:"",role:"employee",department:"",joinDate:new Date().toISOString().split("T")[0],status:"active"})),u(!0)},q=se=>{if(se.preventDefault(),d)n(d.id,O),ot.success("   ");else{const Q=O.email||$(O.fullName),le=P(),me=A(O.role);e({...O,email:Q,password:le,permissions:me,isActive:!0}),E({email:Q,password:le,name:O.fullName}),T(!0)}u(!1)},V=se=>{confirm("      ")&&r(se)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-gray-500",children:[t.length,"  "]})}),o.jsxs(be,{onClick:()=>B(),className:"bg-brand-blue hover:bg-brand-dark text-white",children:[o.jsx(ii,{className:"w-5 h-5 ml-2"})," "]})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",placeholder:"  ...",value:s,onChange:se=>a(se.target.value),className:"w-full pr-10 pl-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),o.jsxs("select",{value:g,onChange:se=>y(se.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[o.jsx("option",{value:"all",children:" "}),Object.entries(qy).map(([se,Q])=>o.jsx("option",{value:se,children:Q},se))]})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map((se,Q)=>o.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Q*.05},className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-brand-blue to-brand-purple rounded-full flex items-center justify-center text-white font-bold text-lg",children:se.fullName.charAt(0)}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-brand-dark",children:se.fullName}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${bY[se.role]}`,children:qy[se.role]})]})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>B(se),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Mq,{className:"w-4 h-4 text-gray-500"})}),o.jsx("button",{onClick:()=>V(se.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",children:o.jsx(Es,{className:"w-4 h-4 text-red-500"})})]})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[o.jsx(Xn,{className:"w-4 h-4"}),o.jsx("span",{children:se.department})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[o.jsx(si,{className:"w-4 h-4"}),o.jsx("span",{children:se.email})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[o.jsx(Xd,{className:"w-4 h-4"}),o.jsx("span",{dir:"ltr",children:se.phone})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[o.jsx(Rm,{className:"w-4 h-4"}),o.jsxs("span",{children:[" : ",new Date(se.joinDate).toLocaleDateString("ar-EG")]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:o.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${se.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:se.status==="active"?"":" "})})]},se.id))}),U.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Fz,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"  "})]}),o.jsx(qa,{children:l&&o.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:d?" ":"  "}),o.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Ha,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:q,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsx("input",{type:"text",value:O.fullName,onChange:se=>I({...O,fullName:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsx("input",{type:"email",value:O.email,onChange:se=>I({...O,email:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsx("input",{type:"tel",value:O.phone,onChange:se=>I({...O,phone:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("select",{value:O.role,onChange:se=>I({...O,role:se.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:Object.entries(qy).map(([se,Q])=>o.jsx("option",{value:se,children:Q},se))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"text",value:O.department,onChange:se=>I({...O,department:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsx("input",{type:"date",value:O.joinDate,onChange:se=>I({...O,joinDate:se.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsxs("select",{value:O.status,onChange:se=>I({...O,status:se.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[o.jsx("option",{value:"active",children:""}),o.jsx("option",{value:"inactive",children:" "})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(be,{type:"submit",className:"flex-1 bg-brand-blue hover:bg-brand-dark text-white",children:d?" ":" "}),o.jsx(be,{type:"button",onClick:()=>u(!1),variant:"outline",className:"flex-1",children:""})]})]})]})})}),o.jsx(qa,{children:v&&j&&o.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ys,{className:"w-8 h-8 text-green-600"})}),o.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:"   !"}),o.jsx("p",{className:"text-gray-500 text-sm mt-1",children:j.name})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[o.jsxs("p",{className:"text-sm text-blue-700 font-medium mb-3",children:[o.jsx(pq,{className:"w-4 h-4 inline ml-1"}),"  :"]}),o.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 mb-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:" "}),o.jsx("p",{className:"font-mono text-sm",dir:"ltr",children:j.email})]}),o.jsx("button",{onClick:()=>L(j.email,"email"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:_==="email"?o.jsx(ys,{className:"w-4 h-4 text-green-600"}):o.jsx(r2,{className:"w-4 h-4 text-gray-500"})})]}),o.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:" "}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"font-mono text-sm",dir:"ltr",children:D?j.password:""}),o.jsx("button",{onClick:()=>k(!D),className:"p-1 hover:bg-gray-100 rounded",children:D?o.jsx(nb,{className:"w-4 h-4 text-gray-400"}):o.jsx(cp,{className:"w-4 h-4 text-gray-400"})})]})]}),o.jsx("button",{onClick:()=>L(j.password,"password"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:_==="password"?o.jsx(ys,{className:"w-4 h-4 text-green-600"}):o.jsx(r2,{className:"w-4 h-4 text-gray-500"})})]})]}),o.jsx("p",{className:"text-xs text-gray-400 text-center",children:"          "})]}),o.jsx("div",{className:"p-6 border-t border-gray-100",children:o.jsx(be,{onClick:()=>{T(!1),E(null),k(!1)},className:"w-full bg-brand-blue hover:bg-brand-dark text-white",children:""})})]})})})]})}const Wy={pending:" ",in_progress:" ",review:"",completed:"",cancelled:""},P2={pending:"bg-yellow-100 text-yellow-700 border-yellow-200",in_progress:"bg-blue-100 text-blue-700 border-blue-200",review:"bg-purple-100 text-purple-700 border-purple-200",completed:"bg-green-100 text-green-700 border-green-200",cancelled:"bg-red-100 text-red-700 border-red-200"},Hy={low:"",medium:"",high:"",urgent:""},D2={low:"bg-gray-100 text-gray-600",medium:"bg-blue-100 text-blue-600",high:"bg-orange-100 text-orange-600",urgent:"bg-red-100 text-red-600"};function O2(){const{tasks:t,employees:e,addTask:n,updateTaskStatus:r,deleteTask:s,transferTask:a}=An(),[l,u]=N.useState(""),[d,f]=N.useState(!1),[g,y]=N.useState(!1),[v,T]=N.useState(null),[j,E]=N.useState("all"),[_,C]=N.useState("kanban"),[D,k]=N.useState({title:"",description:"",priority:"medium",assignedTo:"",dueDate:new Date().toISOString().split("T")[0]}),[O,I]=N.useState(""),[$,P]=N.useState(""),A=t.filter(Q=>{const le=Q.title.includes(l)||Q.description.includes(l),me=j==="all"||Q.status===j;return le&&me}),L=Q=>{Q.preventDefault();const le=e.find(me=>me.id===D.assignedTo);le&&(n({title:D.title,description:D.description,priority:D.priority,status:"pending",assignedTo:D.assignedTo,assignedToName:le.fullName,createdBy:"emp-1",createdByName:"  ",dueDate:D.dueDate}),f(!1),k({title:"",description:"",priority:"medium",assignedTo:"",dueDate:new Date().toISOString().split("T")[0]}))},U=()=>{if(!v||!O)return;const Q=e.find(le=>le.id===O);Q&&(a(v.id,O,Q.fullName,$),y(!1),I(""),P(""),T(null))},B=(Q,le)=>{r(Q,le)},q=Q=>{confirm("      ")&&s(Q)},V={pending:A.filter(Q=>Q.status==="pending"),in_progress:A.filter(Q=>Q.status==="in_progress"),review:A.filter(Q=>Q.status==="review"),completed:A.filter(Q=>Q.status==="completed")},se=({task:Q})=>o.jsxs(Qe.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-md p-4 mb-3 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsx("h4",{className:"font-semibold text-brand-dark text-sm",children:Q.title}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${D2[Q.priority]}`,children:Hy[Q.priority]})]}),o.jsx("p",{className:"text-gray-500 text-xs mb-3 line-clamp-2",children:Q.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Fc,{className:"w-3 h-3"}),o.jsx("span",{children:Q.assignedToName})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Rm,{className:"w-3 h-3"}),o.jsx("span",{children:new Date(Q.dueDate).toLocaleDateString("ar-EG")})]})]}),o.jsxs("div",{className:"flex gap-1 mt-3 pt-3 border-t border-gray-100",children:[o.jsxs("button",{onClick:()=>{T(Q),y(!0)},className:"flex-1 text-xs py-1.5 px-2 bg-gray-50 hover:bg-gray-100 rounded-lg text-gray-600 flex items-center justify-center gap-1",children:[o.jsx(n2,{className:"w-3 h-3"}),""]}),Q.status!=="completed"&&o.jsxs("button",{onClick:()=>B(Q.id,"completed"),className:"flex-1 text-xs py-1.5 px-2 bg-green-50 hover:bg-green-100 rounded-lg text-green-600 flex items-center justify-center gap-1",children:[o.jsx(nx,{className:"w-3 h-3"}),""]}),o.jsx("button",{onClick:()=>q(Q.id),className:"text-xs py-1.5 px-2 bg-red-50 hover:bg-red-100 rounded-lg text-red-600",children:o.jsx(Es,{className:"w-3 h-3"})})]})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-gray-500",children:[t.length,"   ",t.filter(Q=>Q.status==="pending").length,"  "]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[o.jsx("button",{onClick:()=>C("kanban"),className:`px-4 py-2 rounded-lg text-sm ${_==="kanban"?"bg-white shadow":""}`,children:""}),o.jsx("button",{onClick:()=>C("list"),className:`px-4 py-2 rounded-lg text-sm ${_==="list"?"bg-white shadow":""}`,children:""})]}),o.jsxs(be,{onClick:()=>f(!0),className:"bg-brand-blue hover:bg-brand-dark text-white",children:[o.jsx(ii,{className:"w-5 h-5 ml-2"})," "]})]})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",placeholder:"  ...",value:l,onChange:Q=>u(Q.target.value),className:"w-full pr-10 pl-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),o.jsxs("select",{value:j,onChange:Q=>E(Q.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[o.jsx("option",{value:"all",children:" "}),Object.entries(Wy).map(([Q,le])=>o.jsx("option",{value:Q,children:le},Q))]})]})}),_==="kanban"&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:["pending","in_progress","review","completed"].map(Q=>o.jsxs("div",{className:`rounded-2xl p-4 ${P2[Q]} bg-opacity-30`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"font-bold text-brand-dark flex items-center gap-2",children:[Q==="pending"&&o.jsx(Id,{className:"w-4 h-4"}),Q==="in_progress"&&o.jsx(KC,{className:"w-4 h-4"}),Q==="review"&&o.jsx(ai,{className:"w-4 h-4"}),Q==="completed"&&o.jsx(nx,{className:"w-4 h-4"}),Wy[Q]]}),o.jsx("span",{className:"text-sm bg-white px-2 py-0.5 rounded-full",children:V[Q].length})]}),o.jsxs("div",{className:"space-y-3",children:[V[Q].map(le=>o.jsx(se,{task:le},le.id)),V[Q].length===0&&o.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"  "})]})]},Q))}),_==="list"&&o.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""}),o.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:A.map(Q=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4",children:[o.jsx("div",{className:"font-medium text-brand-dark",children:Q.title}),o.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:Q.description})]}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.assignedToName}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${D2[Q.priority]}`,children:Hy[Q.priority]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("select",{value:Q.status,onChange:le=>B(Q.id,le.target.value),className:`text-xs px-2 py-1 rounded-full border ${P2[Q.status]}`,children:Object.entries(Wy).map(([le,me])=>o.jsx("option",{value:le,children:me},le))})}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(Q.dueDate).toLocaleDateString("ar-EG")}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{T(Q),y(!0)},className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(n2,{className:"w-4 h-4 text-gray-500"})}),o.jsx("button",{onClick:()=>q(Q.id),className:"p-2 hover:bg-red-50 rounded-lg",children:o.jsx(Es,{className:"w-4 h-4 text-red-500"})})]})})]},Q.id))})]})}),o.jsx(qa,{children:d&&o.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:"  "}),o.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Ha,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:L,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsx("input",{type:"text",value:D.title,onChange:Q=>k({...D,title:Q.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("textarea",{value:D.description,onChange:Q=>k({...D,description:Q.target.value}),rows:3,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsxs("select",{value:D.assignedTo,onChange:Q=>k({...D,assignedTo:Q.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[o.jsx("option",{value:"",children:" "}),e.filter(Q=>Q.status==="active").map(Q=>o.jsx("option",{value:Q.id,children:Q.fullName},Q.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("select",{value:D.priority,onChange:Q=>k({...D,priority:Q.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:Object.entries(Hy).map(([Q,le])=>o.jsx("option",{value:Q,children:le},Q))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsx("input",{type:"date",value:D.dueDate,onChange:Q=>k({...D,dueDate:Q.target.value}),required:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(be,{type:"submit",className:"flex-1 bg-brand-blue hover:bg-brand-dark text-white",children:" "}),o.jsx(be,{type:"button",onClick:()=>f(!1),variant:"outline",className:"flex-1",children:""})]})]})]})})}),o.jsx(qa,{children:g&&v&&o.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:" "}),o.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Ha,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),o.jsx("p",{className:"font-medium text-brand-dark",children:v.title}),o.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[" : ",v.assignedToName]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),o.jsxs("select",{value:O,onChange:Q=>I(Q.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20",children:[o.jsx("option",{value:"",children:" "}),e.filter(Q=>Q.status==="active"&&Q.id!==v.assignedTo).map(Q=>o.jsx("option",{value:Q.id,children:Q.fullName},Q.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),o.jsx("textarea",{value:$,onChange:Q=>P(Q.target.value),rows:2,placeholder:"   ...",className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(be,{onClick:U,disabled:!O,className:"flex-1 bg-brand-blue hover:bg-brand-dark text-white",children:""}),o.jsx(be,{type:"button",onClick:()=>y(!1),variant:"outline",className:"flex-1",children:""})]})]})]})})})]})}const cx="arkan_sales_data",M2=[{id:"sale-1",propertyName:"  ",unitNo:"A-101",buyerName:"  ",buyerPhone:"0501234567",salePrice:85e4,saleDate:"2024-12-15",status:"completed",paymentMethod:"cash"},{id:"sale-2",propertyName:"  ",unitNo:"B-203",buyerName:"  ",buyerPhone:"0559876543",salePrice:12e5,saleDate:"2024-12-20",status:"completed",paymentMethod:"bank"},{id:"sale-3",propertyName:" ",unitNo:"V-05",buyerName:"  ",buyerPhone:"0544567890",salePrice:25e5,saleDate:"2025-01-02",status:"pending",paymentMethod:"installment"}],_Y=()=>{try{const t=localStorage.getItem(cx);if(t)return JSON.parse(t)}catch(t){console.error("Error loading sales from localStorage:",t)}return localStorage.setItem(cx,JSON.stringify(M2)),M2},EY=t=>{try{localStorage.setItem(cx,JSON.stringify(t))}catch(e){console.error("Error saving sales to localStorage:",e)}};function NY(){const{properties:t,units:e}=An(),[n,r]=N.useState([]),[s,a]=N.useState(""),[l,u]=N.useState(!1);N.useEffect(()=>{const I=_Y();r(I)},[]),N.useEffect(()=>{n.length>0&&EY(n)},[n]);const[d,f]=N.useState({propertyName:"",unitNo:"",buyerName:"",buyerPhone:"",buyerId:"",buyerEmail:"",salePrice:"",saleDate:new Date().toISOString().split("T")[0],paymentMethod:"cash",status:"pending",notes:""}),g=()=>{f({propertyName:"",unitNo:"",buyerName:"",buyerPhone:"",buyerId:"",buyerEmail:"",salePrice:"",saleDate:new Date().toISOString().split("T")[0],paymentMethod:"cash",status:"pending",notes:""})},y=I=>{if(I.preventDefault(),!d.propertyName||!d.unitNo||!d.buyerName||!d.salePrice){alert("    ");return}const $={id:`sale-${Date.now()}`,propertyName:d.propertyName,unitNo:d.unitNo,buyerName:d.buyerName,buyerPhone:d.buyerPhone,salePrice:parseFloat(d.salePrice),saleDate:d.saleDate,status:d.status,paymentMethod:d.paymentMethod,notes:d.notes};r(P=>[$,...P]),g(),u(!1),alert("    ! ")},v=I=>{alert(` :

: ${I.propertyName}
: ${I.unitNo}
: ${I.buyerName}
: ${I.buyerPhone}
: ${I.salePrice.toLocaleString()} .
: ${I.saleDate}
: ${I.status==="completed"?"":I.status==="pending"?" ":""}
${I.notes?": "+I.notes:""}`)},T=I=>{f({propertyName:I.propertyName,unitNo:I.unitNo,buyerName:I.buyerName,buyerPhone:I.buyerPhone,buyerId:"",buyerEmail:"",salePrice:I.salePrice.toString(),saleDate:I.saleDate,paymentMethod:I.paymentMethod,status:I.status,notes:I.notes||""}),r($=>$.filter(P=>P.id!==I.id)),u(!0)},j=I=>{confirm(`        "${I.buyerName}"`)&&(r($=>$.filter(P=>P.id!==I.id)),alert("    "))},E=n.filter(I=>I.status==="completed").reduce((I,$)=>I+$.salePrice,0),_=n.filter(I=>I.status==="pending").length,C=n.filter(I=>I.status==="completed").length,D=n.filter(I=>I.propertyName.includes(s)||I.buyerName.includes(s)||I.unitNo.includes(s)),k=I=>{const $={pending:"bg-yellow-100 text-yellow-700",completed:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700"},P={pending:" ",completed:"",cancelled:""};return o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${$[I]}`,children:P[I]})},O=I=>{const $={cash:"",installment:"",bank:" "};return o.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600 text-xs",children:$[I]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-brand-dark mb-1",children:""}),o.jsx("p",{className:"text-gray-500",children:"   "})]}),o.jsxs(be,{onClick:()=>u(!0),className:"gap-2",children:[o.jsx(ii,{className:"w-4 h-4"}),"  "]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsxs("p",{className:"text-2xl font-bold text-brand-dark",children:[E.toLocaleString()," ",o.jsx("span",{className:"text-sm text-gray-400",children:"."})]})]}),o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:o.jsx(Yz,{className:"w-6 h-6 text-green-600"})})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"text-2xl font-bold text-brand-dark",children:C})]}),o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:o.jsx(up,{className:"w-6 h-6 text-blue-600"})})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"text-2xl font-bold text-brand-dark",children:_})]}),o.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:o.jsx(Yr,{className:"w-6 h-6 text-yellow-600"})})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"text-2xl font-bold text-brand-dark",children:t.length})]}),o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:o.jsx(Xn,{className:"w-6 h-6 text-purple-600"})})]})})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"   ...",value:s,onChange:I=>a(I.target.value),className:"w-full pr-10 pl-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all"})]}),o.jsxs(be,{variant:"outline",className:"gap-2",children:[o.jsx(GC,{className:"w-4 h-4"}),""]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-right py-4 px-6 text-sm font-semibold text-gray-600",children:""}),o.jsx("th",{className:"text-right py-4 px-6 text-sm font-semibold text-gray-600",children:""}),o.jsx("th",{className:"text-right py-4 px-6 text-sm font-semibold text-gray-600",children:""}),o.jsx("th",{className:"text-right py-4 px-6 text-sm font-semibold text-gray-600",children:""}),o.jsx("th",{className:"text-right py-4 px-6 text-sm font-semibold text-gray-600",children:" "}),o.jsx("th",{className:"text-right py-4 px-6 text-sm font-semibold text-gray-600",children:""}),o.jsx("th",{className:"text-right py-4 px-6 text-sm font-semibold text-gray-600",children:""}),o.jsx("th",{className:"text-right py-4 px-6 text-sm font-semibold text-gray-600",children:""})]})}),o.jsx("tbody",{children:D.length>0?D.map(I=>o.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50/50 transition-colors",children:[o.jsx("td",{className:"py-4 px-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-brand-light rounded-lg flex items-center justify-center",children:o.jsx(qr,{className:"w-5 h-5 text-brand-blue"})}),o.jsx("span",{className:"font-medium text-gray-800",children:I.propertyName})]})}),o.jsx("td",{className:"py-4 px-6 text-gray-600",children:I.unitNo}),o.jsx("td",{className:"py-4 px-6",children:o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800",children:I.buyerName}),o.jsx("p",{className:"text-sm text-gray-500",children:I.buyerPhone})]})}),o.jsxs("td",{className:"py-4 px-6 font-semibold text-brand-dark",children:[I.salePrice.toLocaleString()," ."]}),o.jsx("td",{className:"py-4 px-6",children:O(I.paymentMethod)}),o.jsx("td",{className:"py-4 px-6 text-gray-600",children:I.saleDate}),o.jsx("td",{className:"py-4 px-6",children:k(I.status)}),o.jsx("td",{className:"py-4 px-6",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>v(I),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:" ",children:o.jsx(cp,{className:"w-4 h-4 text-gray-500"})}),o.jsx("button",{onClick:()=>T(I),className:"p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:o.jsx(Wa,{className:"w-4 h-4 text-blue-500"})}),o.jsx("button",{onClick:()=>j(I),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"",children:o.jsx(Es,{className:"w-4 h-4 text-red-500"})})]})})]},I.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"py-12 text-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-3",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:o.jsx(Vc,{className:"w-8 h-8 text-gray-400"})}),o.jsx("p",{className:"text-gray-500",children:"   "})]})})})})]})}),o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-100",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:[" ",D.length,"  ",n.length," "]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:o.jsx(tb,{className:"w-5 h-5 text-gray-500"})}),o.jsx("span",{className:"px-3 py-1 bg-brand-blue text-white rounded-lg text-sm",children:"1"}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:o.jsx(Pz,{className:"w-5 h-5 text-gray-500"})})]})]})]}),l&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-dark",children:"   "}),o.jsx("button",{onClick:()=>{u(!1),g()},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:""})]}),o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" *"}),o.jsxs("select",{value:d.propertyName,onChange:I=>f({...d,propertyName:I.target.selectedOptions[0]?.text||""}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all",required:!0,children:[o.jsx("option",{value:"",children:" "}),t.map(I=>o.jsx("option",{value:I.name,children:I.name},I.id)),o.jsx("option",{value:"  ",children:"  "}),o.jsx("option",{value:"  ",children:"  "}),o.jsx("option",{value:" ",children:" "})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" *"}),o.jsxs("select",{value:d.unitNo,onChange:I=>f({...d,unitNo:I.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all",required:!0,children:[o.jsx("option",{value:"",children:" "}),e.filter(I=>I.status==="vacant").map(I=>o.jsx("option",{value:I.unitNo,children:I.unitNo},I.id)),o.jsx("option",{value:"A-102",children:"A-102"}),o.jsx("option",{value:"B-205",children:"B-205"}),o.jsx("option",{value:"V-08",children:"V-08"})]})]})]}),o.jsxs("div",{className:"border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" "}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"  *"}),o.jsx("input",{type:"text",placeholder:" ",value:d.buyerName,onChange:I=>f({...d,buyerName:I.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" "}),o.jsx("input",{type:"tel",placeholder:"05XXXXXXXX",value:d.buyerPhone,onChange:I=>f({...d,buyerPhone:I.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" "}),o.jsx("input",{type:"text",placeholder:"  ",value:d.buyerId,onChange:I=>f({...d,buyerId:I.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" "}),o.jsx("input",{type:"email",placeholder:"email@example.com",value:d.buyerEmail,onChange:I=>f({...d,buyerEmail:I.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all"})]})]})]}),o.jsxs("div",{className:"border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" "}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"  *"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"number",placeholder:"0",value:d.salePrice,onChange:I=>f({...d,salePrice:I.target.value}),className:"w-full px-4 py-3 pl-16 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all",required:!0}),o.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"."})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" "}),o.jsx("input",{type:"date",value:d.saleDate,onChange:I=>f({...d,saleDate:I.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" "}),o.jsxs("select",{value:d.paymentMethod,onChange:I=>f({...d,paymentMethod:I.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all",children:[o.jsx("option",{value:"cash",children:""}),o.jsx("option",{value:"bank",children:" "}),o.jsx("option",{value:"installment",children:""})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:""}),o.jsxs("select",{value:d.status,onChange:I=>f({...d,status:I.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all",children:[o.jsx("option",{value:"pending",children:" "}),o.jsx("option",{value:"completed",children:""})]})]})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:""}),o.jsx("textarea",{rows:3,placeholder:"  ...",value:d.notes,onChange:I=>f({...d,notes:I.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-2 focus:ring-brand-blue/20 outline-none transition-all resize-none"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx(be,{type:"button",onClick:()=>{u(!1),g()},variant:"outline",className:"flex-1",children:""}),o.jsx(be,{type:"submit",className:"flex-1",children:"  "})]})]})]})})]})}function TY(){const[t,e]=N.useState("profile"),[n,r]=N.useState(!1),[s,a]=N.useState({profile:{name:"Demo User",email:"demo@atsanalyzer.com",company:"Demo Company",role:"HR Manager"},notifications:{emailAlerts:!0,pushNotifications:!1,weeklyReports:!0,analysisComplete:!0},privacy:{dataRetention:"90",shareAnalytics:!1,autoDelete:!0},appearance:{theme:"light",language:"en",dateFormat:"MM/DD/YYYY"}}),l={backdropFilter:"blur(16px)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(31, 38, 135, 0.15)"},u=[{id:"profile",label:"Profile",icon:Fc},{id:"notifications",label:"Notifications",icon:Zv},{id:"privacy",label:"Privacy & Security",icon:Ad},{id:"data",label:"Data Management",icon:Kz},{id:"appearance",label:"Appearance",icon:Rq}],d=(E,_,C)=>{a(D=>({...D,[E]:{...D[E],[_]:C}}))},f=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Full Name"}),o.jsx("input",{type:"text",value:s.profile.name,onChange:E=>d("profile","name",E.target.value),className:"w-full px-4 py-2 rounded-xl border border-white/30 bg-white/10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Email Address"}),o.jsx("input",{type:"email",value:s.profile.email,onChange:E=>d("profile","email",E.target.value),className:"w-full px-4 py-2 rounded-xl border border-white/30 bg-white/10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Company"}),o.jsx("input",{type:"text",value:s.profile.company,onChange:E=>d("profile","company",E.target.value),className:"w-full px-4 py-2 rounded-xl border border-white/30 bg-white/10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Role"}),o.jsxs("select",{value:s.profile.role,onChange:E=>d("profile","role",E.target.value),className:"w-full px-4 py-2 rounded-xl border border-white/30 bg-white/10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[o.jsx("option",{value:"HR Manager",children:"HR Manager"}),o.jsx("option",{value:"Recruiter",children:"Recruiter"}),o.jsx("option",{value:"Talent Acquisition",children:"Talent Acquisition"}),o.jsx("option",{value:"Admin",children:"Admin"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Change Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:n?"text":"password",placeholder:"Enter new password",className:"w-full px-4 py-2 pr-12 rounded-xl border border-white/30 bg-white/10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"}),o.jsx("button",{onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:n?o.jsx(nb,{className:"w-4 h-4"}):o.jsx(cp,{className:"w-4 h-4"})})]})]})]}),g=()=>o.jsx("div",{className:"space-y-6",children:Object.entries(s.notifications).map(([E,_])=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border border-white/10 rounded-xl",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-gray-800 capitalize",children:E.replace(/([A-Z])/g," $1").toLowerCase()}),o.jsxs("p",{className:"text-sm text-gray-600",children:[E==="emailAlerts"&&"Receive email notifications for important updates",E==="pushNotifications"&&"Get push notifications in your browser",E==="weeklyReports"&&"Weekly summary of your recruitment analytics",E==="analysisComplete"&&"Notification when resume analysis is complete"]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:_,onChange:C=>d("notifications",E,C.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-500"})]})]},E))}),y=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded-xl",children:[o.jsx("h4",{className:"text-gray-800 mb-2",children:"Data Retention Period"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"How long should we keep your uploaded resumes?"}),o.jsxs("select",{value:s.privacy.dataRetention,onChange:E=>d("privacy","dataRetention",E.target.value),className:"w-full px-4 py-2 rounded-xl border border-white/30 bg-white/10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[o.jsx("option",{value:"30",children:"30 days"}),o.jsx("option",{value:"90",children:"90 days"}),o.jsx("option",{value:"180",children:"6 months"}),o.jsx("option",{value:"365",children:"1 year"}),o.jsx("option",{value:"forever",children:"Keep forever"})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border border-white/10 rounded-xl",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-gray-800",children:"Share Anonymous Analytics"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Help us improve by sharing anonymous usage data"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.privacy.shareAnalytics,onChange:E=>d("privacy","shareAnalytics",E.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-500"})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border border-white/10 rounded-xl",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-gray-800",children:"Auto-delete Old Data"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Automatically delete data after retention period"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.privacy.autoDelete,onChange:E=>d("privacy","autoDelete",E.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-500"})]})]})]}),v=()=>o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("button",{className:"p-6 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-colors text-left",children:[o.jsx(Hu,{className:"w-8 h-8 text-purple-500 mb-3"}),o.jsx("h4",{className:"text-gray-800 mb-2",children:"Export Data"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Download all your data in JSON format"})]}),o.jsxs("button",{className:"p-6 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-colors text-left",children:[o.jsx(ib,{className:"w-8 h-8 text-teal-500 mb-3"}),o.jsx("h4",{className:"text-gray-800 mb-2",children:"Import Data"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Import data from previous backups"})]}),o.jsxs("button",{className:"p-6 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-colors text-left",children:[o.jsx(rx,{className:"w-8 h-8 text-blue-500 mb-3"}),o.jsx("h4",{className:"text-gray-800 mb-2",children:"Reset Settings"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Reset all settings to default values"})]}),o.jsxs("button",{className:"p-6 bg-red-50 border border-red-200 rounded-xl hover:bg-red-100 transition-colors text-left",children:[o.jsx(Es,{className:"w-8 h-8 text-red-500 mb-3"}),o.jsx("h4",{className:"text-red-800 mb-2",children:"Delete All Data"}),o.jsx("p",{className:"text-sm text-red-600",children:"Permanently delete all your data"})]})]})}),T=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded-xl",children:[o.jsx("h4",{className:"text-gray-800 mb-2",children:"Theme"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose your preferred color scheme"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","auto"].map(E=>o.jsxs("button",{onClick:()=>d("appearance","theme",E),className:`p-3 rounded-xl border transition-colors capitalize ${s.appearance.theme===E?"border-purple-500 bg-purple-100 text-purple-700":"border-white/30 bg-white/10 text-gray-700 hover:bg-white/20"}`,children:[o.jsx(Iq,{className:"w-5 h-5 mx-auto mb-1"}),E]},E))})]}),o.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded-xl",children:[o.jsx("h4",{className:"text-gray-800 mb-2",children:"Language"}),o.jsxs("select",{value:s.appearance.language,onChange:E=>d("appearance","language",E.target.value),className:"w-full px-4 py-2 rounded-xl border border-white/30 bg-white/10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[o.jsx("option",{value:"en",children:"English"}),o.jsx("option",{value:"es",children:"Espaol"}),o.jsx("option",{value:"fr",children:"Franais"}),o.jsx("option",{value:"de",children:"Deutsch"})]})]}),o.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded-xl",children:[o.jsx("h4",{className:"text-gray-800 mb-2",children:"Date Format"}),o.jsxs("select",{value:s.appearance.dateFormat,onChange:E=>d("appearance","dateFormat",E.target.value),className:"w-full px-4 py-2 rounded-xl border border-white/30 bg-white/10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[o.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),o.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),o.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),j=()=>{switch(t){case"profile":return f();case"notifications":return g();case"privacy":return y();case"data":return v();case"appearance":return T();default:return f()}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl bg-gradient-to-r from-purple-600 to-teal-600 bg-clip-text text-transparent",children:"Settings"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account preferences and application settings."})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsx("div",{className:"rounded-2xl p-4 shadow-xl",style:l,children:o.jsx("nav",{className:"space-y-2",children:u.map(E=>{const _=E.icon;return o.jsxs("button",{onClick:()=>e(E.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all duration-300 ${t===E.id?"bg-gradient-to-r from-purple-500 to-teal-500 text-white":"text-gray-700 hover:bg-white/20"}`,children:[o.jsx(_,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:E.label})]},E.id)})})})}),o.jsx("div",{className:"lg:col-span-3",children:o.jsxs("div",{className:"rounded-2xl p-6 shadow-xl",style:l,children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-xl text-gray-800",children:u.find(E=>E.id===t)?.label}),o.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-teal-500 text-white rounded-xl hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[o.jsx(Bq,{className:"w-4 h-4"}),"Save Changes"]})]}),j()]})})]})]})}function SY(){const t=Ns(),{employees:e}=An(),{setEmployeeSession:n}=Xr(),[r,s]=N.useState(""),[a,l]=N.useState(""),[u,d]=N.useState(!1),[f,g]=N.useState(""),[y,v]=N.useState(!1),T=async j=>{j.preventDefault(),g(""),v(!0);const E=e.find(_=>_.email.toLowerCase().trim()===r.toLowerCase().trim());if(console.log("Login Attempt:",{email:r.trim(),found:!!E,status:E?.status,isActive:E?.isActive}),!E){g("   "),v(!1);return}if(!E.isActive){g("  .   "),v(!1);return}if(E.password!==a.trim()){console.log("Password Mismatch:",{inputLength:a.trim().length,storedLength:E.password.length}),g("   "),v(!1);return}n&&n(E),localStorage.setItem("employeeSession",JSON.stringify(E)),v(!1),t("/employee/dashboard")};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-brand-dark to-slate-900 flex items-center justify-center p-4",dir:"rtl",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[o.jsx("div",{className:"absolute top-1/4 -right-1/4 w-96 h-96 bg-brand-blue/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-1/4 -left-1/4 w-96 h-96 bg-brand-purple/20 rounded-full blur-3xl"})]}),o.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative z-10 w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs(Ke,{to:"/",className:"inline-flex items-center gap-3 group",children:[o.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-brand-blue to-brand-purple p-3 shadow-lg group-hover:shadow-brand-blue/30 transition-shadow",children:o.jsx(Xn,{className:"w-full h-full text-white"})}),o.jsx("span",{className:"text-3xl font-bold text-white",children:""})]}),o.jsx("p",{className:"mt-4 text-gray-400",children:" "})]}),o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-dark text-center mb-6",children:" "}),o.jsxs("form",{onSubmit:T,className:"space-y-5",children:[f&&o.jsxs(Qe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:[o.jsx(KC,{className:"w-5 h-5 flex-shrink-0"}),o.jsx("span",{children:f})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx(si,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"email",value:r,onChange:j=>s(j.target.value),className:"w-full pr-12 pl-4 py-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all",placeholder:"name@arkan.sa",required:!0,dir:"ltr"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx(Ad,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:u?"text":"password",value:a,onChange:j=>l(j.target.value),className:"w-full pr-12 pl-12 py-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all",placeholder:"",required:!0,dir:"ltr"}),o.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?o.jsx(nb,{className:"w-5 h-5"}):o.jsx(cp,{className:"w-5 h-5"})})]})]}),o.jsx(be,{type:"submit",variant:"gradient",className:"w-full py-4 text-lg",disabled:y,children:y?"  ...":" "})]}),o.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl",children:[o.jsx("p",{className:"text-sm text-blue-700 font-medium mb-2",children:" :"}),o.jsxs("div",{className:"space-y-1 text-xs text-blue-600",children:[o.jsxs("p",{children:[o.jsx("strong",{children:":"})," khaled@arkan.sa / Khaled@2024"]}),o.jsxs("p",{children:[o.jsx("strong",{children:":"})," mohammed@arkan.sa / Mohammed@2024"]}),o.jsxs("p",{children:[o.jsx("strong",{children:" :"})," fatima@arkan.sa / Fatima@2024"]})]})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx(Ke,{to:"/login",className:"text-sm text-gray-500 hover:text-brand-blue transition-colors",children:"  "})})]})]})]})}const jY=[{name:" ",path:"/employee/dashboard",icon:ri,module:"properties"},{name:"",path:"/employee/properties",icon:Xn,module:"properties"},{name:"",path:"/employee/units",icon:qr,module:"units"},{name:"",path:"/employee/tenants",icon:qi,module:"tenants"},{name:"",path:"/employee/contracts",icon:Yr,module:"contracts"},{name:"",path:"/employee/payments",icon:Kr,module:"payments"},{name:"",path:"/employee/maintenance",icon:Wi,module:"maintenance"},{name:"",path:"/employee/sales",icon:Vc,module:"sales"},{name:"",path:"/employee/tasks",icon:Jd,module:"tasks"},{name:"",path:"/employee/reports",icon:ri,module:"reports"}],kY={properties:"",units:"",tenants:"",contracts:"",payments:"",maintenance:"",reports:"",settings:"",sales:"",employees:"",tasks:""};function CY(){const{currentEmployee:t,employeeLogout:e}=Xr(),{employees:n}=An(),r=Ns();dr();const s=N.useMemo(()=>t&&n.find(u=>u.id===t.id)||null,[t,n]);if(N.useEffect(()=>{if(!t){r("/employee/login");return}if(s&&!s.isActive){e(),r("/employee/login");return}t&&!s&&(e(),r("/employee/login"))},[t,s,r,e]),!t||!s)return null;const a=(u,d)=>{const f=s.permissions.find(g=>g.module===u);return f?f.actions.includes(d):!1},l=jY.filter(u=>a(u.module,"view")&&u.path!=="/employee/dashboard");return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-brand-dark mb-1",children:[" ",s.fullName.split(" ")[0],"!"]}),o.jsx("p",{className:"text-gray-500",children:"   "})]})}),o.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-dark mb-4",children:""}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.permissions.map(u=>o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-2 border-b border-gray-200 pb-2",children:kY[u.module]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:u.actions.map(d=>o.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${d==="view"?"bg-blue-100 text-blue-700":d==="create"?"bg-green-100 text-green-700":d==="edit"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:d==="view"?"":d==="create"?"":d==="edit"?"":""},d))})]},u.module))})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-brand-dark mb-4",children:" "}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:l.map((u,d)=>{const f=u.icon;return o.jsx(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},children:o.jsxs(Ke,{to:u.path,className:"block bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-all group border border-transparent hover:border-brand-blue/20",children:[o.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-xl flex items-center justify-center mb-3 group-hover:bg-brand-blue/10 transition-colors",children:o.jsx(f,{className:"w-6 h-6 text-gray-600 group-hover:text-brand-blue transition-colors"})}),o.jsx("h3",{className:"font-bold text-gray-800 group-hover:text-brand-dark",children:u.name})]})},u.path)})})]})]})}const Ky=[{name:" ",path:"/employee/dashboard",icon:ri,module:"properties"},{name:"",path:"/employee/properties",icon:Xn,module:"properties"},{name:"",path:"/employee/units",icon:qr,module:"units"},{name:"",path:"/employee/tenants",icon:qi,module:"tenants"},{name:"",path:"/employee/contracts",icon:Yr,module:"contracts"},{name:"",path:"/employee/payments",icon:Kr,module:"payments"},{name:"",path:"/employee/maintenance",icon:Wi,module:"maintenance"},{name:"",path:"/employee/sales",icon:Vc,module:"sales"},{name:"",path:"/employee/tasks",icon:Jd,module:"tasks"},{name:"",path:"/employee/reports",icon:ri,module:"reports"}];function Si({children:t}){const{pathname:e}=dr(),{currentEmployee:n,employeeLogout:r}=Xr(),{employees:s}=An(),a=Ns(),l=N.useMemo(()=>n&&s.find(f=>f.id===n.id)||null,[n,s]);if(!n||!l)return null;const u=(f,g)=>{const y=l.permissions.find(v=>v.module===f);return y?y.actions.includes(g):!1},d=()=>{r(),a("/employee/login")};return o.jsxs("div",{className:"min-h-screen bg-slate-100 font-cairo",dir:"rtl",children:[o.jsxs("aside",{className:"fixed right-0 top-0 h-screen w-64 bg-white shadow-xl z-40 flex flex-col",children:[o.jsx("div",{className:"p-6 border-b border-gray-100",children:o.jsxs(Ke,{to:"/employee/dashboard",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-brand-blue to-brand-purple rounded-xl flex items-center justify-center",children:o.jsx(Xn,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xl font-bold bg-gradient-to-l from-brand-blue to-brand-purple bg-clip-text text-transparent block",children:""}),o.jsx("span",{className:"text-xs text-gray-400",children:" "})]})]})}),o.jsx("nav",{className:"flex-1 py-4 overflow-y-auto",children:o.jsxs("ul",{className:"space-y-1 px-3",children:[Ky.filter(f=>u(f.module,"view")).map(f=>{const g=e===f.path;return o.jsx("li",{children:o.jsxs(Ke,{to:f.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${g?"bg-gradient-to-l from-brand-blue to-brand-purple text-white shadow-lg":"text-gray-600 hover:bg-gray-50 hover:text-brand-dark"}`,children:[o.jsx(f.icon,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:f.name}),g&&o.jsx(tb,{className:"w-4 h-4 mr-auto"})]})},f.path)}),o.jsx("div",{className:"my-4 border-t border-gray-100"}),o.jsx("p",{className:"px-4 text-xs text-gray-400 mb-2",children:" "}),Ky.filter(f=>!u(f.module,"view")).map(f=>o.jsx("li",{children:o.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 cursor-not-allowed",children:[o.jsx(f.icon,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium flex-1",children:f.name}),o.jsx(Ad,{className:"w-4 h-4"})]})},f.path))]})}),o.jsxs("div",{className:"p-4 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3 px-2",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-brand-blue to-brand-purple rounded-full flex items-center justify-center text-white font-bold",children:l.fullName.charAt(0)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-brand-dark truncate",children:l.fullName}),o.jsx("p",{className:"text-xs text-gray-400 truncate",children:l.department})]})]}),o.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 px-4 py-2.5 text-red-600 hover:bg-red-50 rounded-xl transition-colors",children:[o.jsx(rb,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:" "})]})]})]}),o.jsxs("div",{className:"mr-64",children:[o.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-30",children:o.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[o.jsx("div",{children:o.jsx("h1",{className:"text-xl font-bold text-brand-dark",children:Ky.find(f=>f.path===e)?.name||" "})}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsx("button",{className:"relative p-2 hover:bg-gray-100 rounded-xl transition-colors",children:o.jsx(Zv,{className:"w-5 h-5 text-gray-500"})})})]})}),o.jsx("main",{className:"p-6",children:o.jsx(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:t},e)})]})]})}const L2=[{name:" ",path:"/app",icon:ri},{name:"",path:"/app/properties",icon:Xn},{name:"",path:"/app/units",icon:qr},{name:"",path:"/app/tenants",icon:qi},{name:"",path:"/app/contracts",icon:Yr},{name:"",path:"/app/payments",icon:Kr},{name:"",path:"/app/maintenance",icon:Wi},{name:"",path:"/app/sales",icon:Vc},{name:"",path:"/app/employees",icon:qi},{name:"",path:"/app/tasks",icon:Jd},{name:"",path:"/app/reports",icon:ri},{name:"",path:"/app/settings",icon:Kq}];function Er({children:t}){const{pathname:e}=dr(),{user:n,logout:r}=Xr(),[s,a]=N.useState(!1),l=()=>a(!1);return o.jsxs("div",{className:"min-h-screen bg-slate-100 font-cairo",dir:"rtl",children:[o.jsx(qa,{children:s&&o.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:"fixed inset-0 bg-black/50 z-40 lg:hidden"})}),o.jsxs("aside",{className:`
                fixed right-0 top-0 h-screen w-72 lg:w-64 bg-white shadow-xl z-50 flex flex-col
                transform transition-transform duration-300 ease-in-out
                ${s?"translate-x-0":"translate-x-full lg:translate-x-0"}
            `,children:[o.jsxs("div",{className:"p-4 lg:p-6 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs(Ke,{to:"/app",className:"flex items-center gap-2",onClick:l,children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-brand-blue to-brand-purple rounded-xl flex items-center justify-center",children:o.jsx(Xn,{className:"w-6 h-6 text-white"})}),o.jsx("span",{className:"text-xl lg:text-2xl font-bold bg-gradient-to-l from-brand-blue to-brand-purple bg-clip-text text-transparent",children:""})]}),o.jsx("button",{onClick:l,className:"lg:hidden p-2 hover:bg-gray-100 rounded-xl",children:o.jsx(Ha,{className:"w-5 h-5 text-gray-500"})})]}),o.jsx("p",{className:"px-4 py-2 text-xs text-gray-400 lg:hidden",children:" "}),o.jsx("nav",{className:"flex-1 py-2 lg:py-4 overflow-y-auto",children:o.jsx("ul",{className:"space-y-1 px-2 lg:px-3",children:L2.map(u=>{const d=e===u.path;return o.jsx("li",{children:o.jsxs(Ke,{to:u.path,onClick:l,className:`flex items-center gap-3 px-3 lg:px-4 py-2.5 lg:py-3 rounded-xl transition-all text-sm lg:text-base ${d?"bg-gradient-to-l from-brand-blue to-brand-purple text-white shadow-lg":"text-gray-600 hover:bg-gray-50 hover:text-brand-dark"}`,children:[o.jsx(u.icon,{className:"w-5 h-5 flex-shrink-0"}),o.jsx("span",{className:"font-medium",children:u.name}),d&&o.jsx(tb,{className:"w-4 h-4 mr-auto"})]})},u.path)})})}),o.jsxs("div",{className:"p-3 lg:p-4 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3 px-2",children:[o.jsx("div",{className:"w-9 lg:w-10 h-9 lg:h-10 bg-gradient-to-br from-brand-blue to-brand-purple rounded-full flex items-center justify-center text-white font-bold text-sm lg:text-base flex-shrink-0",children:n?.displayName?.charAt(0)||""}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-brand-dark truncate text-sm lg:text-base",children:n?.displayName||""}),o.jsx("p",{className:"text-xs text-gray-400 truncate",children:n?.email})]})]}),o.jsxs("button",{onClick:()=>r(),className:"w-full flex items-center gap-3 px-4 py-2.5 text-red-600 hover:bg-red-50 rounded-xl transition-colors",children:[o.jsx(rb,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:" "})]})]})]}),o.jsxs("div",{className:"lg:mr-64",children:[o.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-30",children:o.jsxs("div",{className:"flex items-center justify-between px-4 lg:px-6 py-3 lg:py-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>a(!0),className:"lg:hidden p-2 hover:bg-gray-100 rounded-xl transition-colors",children:o.jsx(YC,{className:"w-6 h-6 text-gray-600"})}),o.jsx("h1",{className:"text-lg lg:text-xl font-bold text-brand-dark",children:L2.find(u=>u.path===e)?.name||" "})]}),o.jsx("div",{className:"flex items-center gap-2 lg:gap-4",children:o.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-xl transition-colors",children:[o.jsx(Zv,{className:"w-5 h-5 text-gray-500"}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})})]})}),o.jsx("main",{className:"p-3 lg:p-6",children:o.jsx(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:t},e)})]})]})}function IY(){return o.jsx("div",{dir:"rtl",className:"font-cairo",children:o.jsx(MV,{children:o.jsxs(C8,{children:[o.jsxs(lP,{children:[o.jsx(it,{path:"/",element:o.jsx(iH,{})}),o.jsx(it,{path:"/login",element:o.jsx(dH,{})}),o.jsx(it,{path:"/register",element:o.jsx(hH,{})}),o.jsx(it,{path:"/verify-email",element:o.jsx(fH,{})}),o.jsx(it,{path:"/forgot-password",element:o.jsx(vY,{})}),o.jsx(it,{path:"/features",element:o.jsx(aH,{})}),o.jsx(it,{path:"/pricing",element:o.jsx(oH,{})}),o.jsx(it,{path:"/units",element:o.jsx(lH,{})}),o.jsx(it,{path:"/about",element:o.jsx(cH,{})}),o.jsx(it,{path:"/contact",element:o.jsx(uH,{})}),o.jsx(it,{path:"/dashboard",element:o.jsx(Yy,{to:"/app",replace:!0})}),o.jsx(it,{path:"/app",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(xH,{})})})}),o.jsx(it,{path:"/app/properties",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(T2,{})})})}),o.jsx(it,{path:"/app/units",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(S2,{})})})}),o.jsx(it,{path:"/app/tenants",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(j2,{})})})}),o.jsx(it,{path:"/app/contracts",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(k2,{})})})}),o.jsx(it,{path:"/app/payments",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(C2,{})})})}),o.jsx(it,{path:"/app/maintenance",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(I2,{})})})}),o.jsx(it,{path:"/app/reports",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(R2,{})})})}),o.jsx(it,{path:"/app/settings",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(TY,{})})})}),o.jsx(it,{path:"/profile",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(xY,{})})})}),o.jsx(it,{path:"/app/employees",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(wY,{})})})}),o.jsx(it,{path:"/app/tasks",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(O2,{})})})}),o.jsx(it,{path:"/app/sales",element:o.jsx(_r,{children:o.jsx(Er,{children:o.jsx(NY,{})})})}),o.jsx(it,{path:"/employee/login",element:o.jsx(SY,{})}),o.jsx(it,{path:"/employee/dashboard",element:o.jsx(Si,{children:o.jsx(CY,{})})}),o.jsx(it,{path:"/employee/properties",element:o.jsx(Si,{children:o.jsx(T2,{})})}),o.jsx(it,{path:"/employee/units",element:o.jsx(Si,{children:o.jsx(S2,{})})}),o.jsx(it,{path:"/employee/tenants",element:o.jsx(Si,{children:o.jsx(j2,{})})}),o.jsx(it,{path:"/employee/contracts",element:o.jsx(Si,{children:o.jsx(k2,{})})}),o.jsx(it,{path:"/employee/payments",element:o.jsx(Si,{children:o.jsx(C2,{})})}),o.jsx(it,{path:"/employee/maintenance",element:o.jsx(Si,{children:o.jsx(I2,{})})}),o.jsx(it,{path:"/employee/reports",element:o.jsx(Si,{children:o.jsx(R2,{})})}),o.jsx(it,{path:"/employee/tasks",element:o.jsx(Si,{children:o.jsx(O2,{})})})]}),o.jsx(MG,{position:"top-center",richColors:!0})]})})})}class AY extends N.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.hasError?o.jsxs("div",{style:{padding:"20px",color:"red",direction:"ltr"},children:[o.jsx("h1",{children:"Something went wrong."}),o.jsx("pre",{children:this.state.error?.toString()})]}):this.props.children}}gR.createRoot(document.getElementById("root")).render(o.jsx(AY,{children:o.jsx(RP,{basename:"/",children:o.jsx(IY,{})})}));
